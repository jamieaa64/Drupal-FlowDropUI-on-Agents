{"version":3,"file":"flowdrop.es.js","sources":["../../node_modules/@d34dman/flowdrop/dist/types/auth.js","../../node_modules/@d34dman/flowdrop/dist/types/events.js","../../node_modules/@d34dman/flowdrop/dist/api/client.js","../../node_modules/@d34dman/flowdrop/dist/config/endpoints.js","../../node_modules/@d34dman/flowdrop/dist/api/enhanced-client.js","../../node_modules/svelte/src/version.js","../../node_modules/svelte/src/internal/disclose-version.js","../../node_modules/svelte/src/constants.js","../../node_modules/esm-env/dev-fallback.js","../../node_modules/svelte/src/internal/shared/utils.js","../../node_modules/svelte/src/internal/client/constants.js","../../node_modules/svelte/src/internal/shared/errors.js","../../node_modules/svelte/src/internal/client/errors.js","../../node_modules/svelte/src/internal/client/warnings.js","../../node_modules/svelte/src/internal/client/dom/hydration.js","../../node_modules/svelte/src/internal/client/reactivity/equality.js","../../node_modules/svelte/src/internal/flags/index.js","../../node_modules/svelte/src/internal/shared/warnings.js","../../node_modules/svelte/src/internal/shared/clone.js","../../node_modules/svelte/src/internal/client/dev/tracing.js","../../node_modules/svelte/src/internal/client/context.js","../../node_modules/svelte/src/internal/client/dom/task.js","../../node_modules/svelte/src/internal/client/error-handling.js","../../node_modules/svelte/src/internal/client/reactivity/batch.js","../../node_modules/svelte/src/reactivity/create-subscriber.js","../../node_modules/svelte/src/internal/client/dom/blocks/boundary.js","../../node_modules/svelte/src/internal/client/reactivity/async.js","../../node_modules/svelte/src/internal/client/reactivity/deriveds.js","../../node_modules/svelte/src/internal/client/reactivity/sources.js","../../node_modules/svelte/src/internal/client/proxy.js","../../node_modules/svelte/src/internal/client/dev/equality.js","../../node_modules/svelte/src/internal/client/dom/operations.js","../../node_modules/svelte/src/internal/client/dom/elements/misc.js","../../node_modules/svelte/src/internal/client/dom/elements/bindings/shared.js","../../node_modules/svelte/src/internal/client/reactivity/effects.js","../../node_modules/svelte/src/internal/client/runtime.js","../../node_modules/svelte/src/internal/client/dom/elements/events.js","../../node_modules/svelte/src/internal/client/dom/blocks/svelte-head.js","../../node_modules/svelte/src/internal/client/dom/reconciler.js","../../node_modules/svelte/src/internal/client/dom/template.js","../../node_modules/svelte/src/utils.js","../../node_modules/svelte/src/internal/client/render.js","../../node_modules/svelte/src/internal/client/dom/blocks/branches.js","../../node_modules/svelte/src/internal/client/dom/blocks/snippet.js","../../node_modules/svelte/src/index-client.js","../../node_modules/svelte/src/internal/client/dom/blocks/if.js","../../node_modules/svelte/src/internal/client/dom/blocks/css-props.js","../../node_modules/svelte/src/internal/client/dom/blocks/each.js","../../node_modules/svelte/src/internal/client/dom/blocks/html.js","../../node_modules/svelte/src/internal/client/dom/blocks/svelte-component.js","../../node_modules/svelte/src/internal/client/dom/elements/actions.js","../../node_modules/svelte/src/internal/client/dom/elements/attachments.js","../../node_modules/clsx/dist/clsx.mjs","../../node_modules/svelte/src/internal/shared/attributes.js","../../node_modules/svelte/src/internal/client/dom/elements/class.js","../../node_modules/svelte/src/internal/client/dom/elements/style.js","../../node_modules/svelte/src/internal/client/dom/elements/bindings/select.js","../../node_modules/svelte/src/internal/client/dom/elements/attributes.js","../../node_modules/svelte/src/internal/client/dom/elements/bindings/input.js","../../node_modules/svelte/src/internal/client/dom/elements/bindings/size.js","../../node_modules/svelte/src/internal/client/dom/elements/bindings/this.js","../../node_modules/svelte/src/store/utils.js","../../node_modules/svelte/src/store/shared/index.js","../../node_modules/svelte/src/internal/client/reactivity/store.js","../../node_modules/svelte/src/internal/client/reactivity/props.js","../../node_modules/d3-dispatch/src/dispatch.js","../../node_modules/d3-selection/src/namespaces.js","../../node_modules/d3-selection/src/namespace.js","../../node_modules/d3-selection/src/creator.js","../../node_modules/d3-selection/src/selector.js","../../node_modules/d3-selection/src/selection/select.js","../../node_modules/d3-selection/src/array.js","../../node_modules/d3-selection/src/selectorAll.js","../../node_modules/d3-selection/src/selection/selectAll.js","../../node_modules/d3-selection/src/matcher.js","../../node_modules/d3-selection/src/selection/selectChild.js","../../node_modules/d3-selection/src/selection/selectChildren.js","../../node_modules/d3-selection/src/selection/filter.js","../../node_modules/d3-selection/src/selection/sparse.js","../../node_modules/d3-selection/src/selection/enter.js","../../node_modules/d3-selection/src/constant.js","../../node_modules/d3-selection/src/selection/data.js","../../node_modules/d3-selection/src/selection/exit.js","../../node_modules/d3-selection/src/selection/join.js","../../node_modules/d3-selection/src/selection/merge.js","../../node_modules/d3-selection/src/selection/order.js","../../node_modules/d3-selection/src/selection/sort.js","../../node_modules/d3-selection/src/selection/call.js","../../node_modules/d3-selection/src/selection/nodes.js","../../node_modules/d3-selection/src/selection/node.js","../../node_modules/d3-selection/src/selection/size.js","../../node_modules/d3-selection/src/selection/empty.js","../../node_modules/d3-selection/src/selection/each.js","../../node_modules/d3-selection/src/selection/attr.js","../../node_modules/d3-selection/src/window.js","../../node_modules/d3-selection/src/selection/style.js","../../node_modules/d3-selection/src/selection/property.js","../../node_modules/d3-selection/src/selection/classed.js","../../node_modules/d3-selection/src/selection/text.js","../../node_modules/d3-selection/src/selection/html.js","../../node_modules/d3-selection/src/selection/raise.js","../../node_modules/d3-selection/src/selection/lower.js","../../node_modules/d3-selection/src/selection/append.js","../../node_modules/d3-selection/src/selection/insert.js","../../node_modules/d3-selection/src/selection/remove.js","../../node_modules/d3-selection/src/selection/clone.js","../../node_modules/d3-selection/src/selection/datum.js","../../node_modules/d3-selection/src/selection/on.js","../../node_modules/d3-selection/src/selection/dispatch.js","../../node_modules/d3-selection/src/selection/iterator.js","../../node_modules/d3-selection/src/selection/index.js","../../node_modules/d3-selection/src/select.js","../../node_modules/d3-selection/src/sourceEvent.js","../../node_modules/d3-selection/src/pointer.js","../../node_modules/d3-drag/src/noevent.js","../../node_modules/d3-drag/src/nodrag.js","../../node_modules/d3-drag/src/constant.js","../../node_modules/d3-drag/src/event.js","../../node_modules/d3-drag/src/drag.js","../../node_modules/d3-color/src/define.js","../../node_modules/d3-color/src/color.js","../../node_modules/d3-interpolate/src/constant.js","../../node_modules/d3-interpolate/src/color.js","../../node_modules/d3-interpolate/src/rgb.js","../../node_modules/d3-interpolate/src/numberArray.js","../../node_modules/d3-interpolate/src/array.js","../../node_modules/d3-interpolate/src/date.js","../../node_modules/d3-interpolate/src/number.js","../../node_modules/d3-interpolate/src/object.js","../../node_modules/d3-interpolate/src/string.js","../../node_modules/d3-interpolate/src/value.js","../../node_modules/d3-interpolate/src/transform/decompose.js","../../node_modules/d3-interpolate/src/transform/parse.js","../../node_modules/d3-interpolate/src/transform/index.js","../../node_modules/d3-interpolate/src/zoom.js","../../node_modules/d3-timer/src/timer.js","../../node_modules/d3-timer/src/timeout.js","../../node_modules/d3-transition/src/transition/schedule.js","../../node_modules/d3-transition/src/interrupt.js","../../node_modules/d3-transition/src/selection/interrupt.js","../../node_modules/d3-transition/src/transition/tween.js","../../node_modules/d3-transition/src/transition/interpolate.js","../../node_modules/d3-transition/src/transition/attr.js","../../node_modules/d3-transition/src/transition/attrTween.js","../../node_modules/d3-transition/src/transition/delay.js","../../node_modules/d3-transition/src/transition/duration.js","../../node_modules/d3-transition/src/transition/ease.js","../../node_modules/d3-transition/src/transition/easeVarying.js","../../node_modules/d3-transition/src/transition/filter.js","../../node_modules/d3-transition/src/transition/merge.js","../../node_modules/d3-transition/src/transition/on.js","../../node_modules/d3-transition/src/transition/remove.js","../../node_modules/d3-transition/src/transition/select.js","../../node_modules/d3-transition/src/transition/selectAll.js","../../node_modules/d3-transition/src/transition/selection.js","../../node_modules/d3-transition/src/transition/style.js","../../node_modules/d3-transition/src/transition/styleTween.js","../../node_modules/d3-transition/src/transition/text.js","../../node_modules/d3-transition/src/transition/textTween.js","../../node_modules/d3-transition/src/transition/transition.js","../../node_modules/d3-transition/src/transition/end.js","../../node_modules/d3-transition/src/transition/index.js","../../node_modules/d3-ease/src/cubic.js","../../node_modules/d3-transition/src/selection/transition.js","../../node_modules/d3-transition/src/selection/index.js","../../node_modules/d3-zoom/src/constant.js","../../node_modules/d3-zoom/src/event.js","../../node_modules/d3-zoom/src/transform.js","../../node_modules/d3-zoom/src/noevent.js","../../node_modules/d3-zoom/src/zoom.js","../../node_modules/@xyflow/system/dist/esm/index.js","../../node_modules/@xyflow/svelte/dist/lib/components/Handle/Handle.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/nodes/DefaultNode.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/nodes/InputNode.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/nodes/OutputNode.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/nodes/GroupNode.svelte","../../node_modules/@xyflow/svelte/dist/lib/actions/portal/portal.svelte.js","../../node_modules/@xyflow/svelte/dist/lib/actions/portal/utils.svelte.js","../../node_modules/@xyflow/svelte/dist/lib/utils/index.js","../../node_modules/@xyflow/svelte/dist/lib/components/EdgeLabel/EdgeLabel.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/edges/BaseEdge.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/edges/BezierEdge.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/edges/SmoothStepEdgeInternal.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/edges/StraightEdgeInternal.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/edges/StepEdgeInternal.svelte","../../node_modules/svelte/src/reactivity/set.js","../../node_modules/svelte/src/reactivity/reactive-value.js","../../node_modules/svelte/src/reactivity/media-query.js","../../node_modules/@xyflow/svelte/dist/lib/store/visibleElements.js","../../node_modules/@xyflow/svelte/dist/lib/store/initial-store.svelte.js","../../node_modules/@xyflow/svelte/dist/lib/hooks/useStore.js","../../node_modules/@xyflow/svelte/dist/lib/store/index.js","../../node_modules/@xyflow/svelte/dist/lib/actions/zoom/index.js","../../node_modules/@xyflow/svelte/dist/lib/container/Zoom/Zoom.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/Pane/Pane.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/Viewport/Viewport.svelte","../../node_modules/@xyflow/svelte/dist/lib/actions/drag/index.js","../../node_modules/@xyflow/svelte/dist/lib/components/A11yDescriptions/A11yDescriptions.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/A11yDescriptions/index.js","../../node_modules/@xyflow/svelte/dist/lib/components/NodeWrapper/NodeWrapper.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/NodeRenderer/NodeRenderer.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/EdgeWrapper/EdgeWrapper.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/EdgeRenderer/MarkerDefinition/MarkerDefinition.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/EdgeRenderer/MarkerDefinition/Marker.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/EdgeRenderer/EdgeRenderer.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/Selection/Selection.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/NodeSelection/NodeSelection.svelte","../../node_modules/@svelte-put/shortcut/src/shortcut.js","../../node_modules/@xyflow/svelte/dist/lib/hooks/useSvelteFlow.svelte.js","../../node_modules/@xyflow/svelte/dist/lib/components/KeyHandler/KeyHandler.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/ConnectionLine/ConnectionLine.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/Panel/Panel.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/Attribution/Attribution.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/SvelteFlow/Wrapper.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/SvelteFlow/SvelteFlow.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/SvelteFlowProvider/SvelteFlowProvider.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/ControlButton.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/Controls.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Background/types.js","../../node_modules/@xyflow/svelte/dist/lib/plugins/Background/DotPattern.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Background/LinePattern.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Background/Background.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Minimap/MinimapNode.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Minimap/interactive.js","../../node_modules/@xyflow/svelte/dist/lib/plugins/Minimap/Minimap.svelte","../../node_modules/@xyflow/svelte/dist/lib/hooks/useConnection.svelte.js","../../node_modules/@iconify/svelte/dist/functions.js","../../node_modules/@iconify/svelte/dist/Icon.svelte","../../node_modules/@d34dman/flowdrop/dist/components/CanvasBanner.svelte","../../node_modules/@d34dman/flowdrop/dist/components/FlowDropZone.svelte","../../node_modules/@d34dman/flowdrop/dist/utils/connections.js","../../node_modules/@d34dman/flowdrop/dist/utils/colors.js","../../node_modules/@d34dman/flowdrop/dist/components/ConnectionLine.svelte","../../node_modules/@d34dman/flowdrop/dist/stores/workflowStore.js","../../node_modules/@d34dman/flowdrop/dist/utils/icons.js","../../node_modules/@d34dman/flowdrop/dist/components/WorkflowNode.svelte","../../node_modules/marked/lib/marked.esm.js","../../node_modules/@d34dman/flowdrop/dist/components/MarkdownDisplay.svelte","../../node_modules/@d34dman/flowdrop/dist/components/NotesNode.svelte","../../node_modules/@d34dman/flowdrop/dist/components/SimpleNode.svelte","../../node_modules/@d34dman/flowdrop/dist/components/SquareNode.svelte","../../node_modules/@d34dman/flowdrop/dist/components/ToolNode.svelte","../../node_modules/@d34dman/flowdrop/dist/components/GatewayNode.svelte","../../node_modules/@d34dman/flowdrop/dist/components/StatusLabel.svelte","../../node_modules/@d34dman/flowdrop/dist/utils/nodeStatus.js","../../node_modules/@d34dman/flowdrop/dist/components/NodeStatusOverlay.svelte","../../node_modules/@d34dman/flowdrop/dist/utils/nodeWrapper.js","../../node_modules/@d34dman/flowdrop/dist/utils/nodeTypes.js","../../node_modules/@d34dman/flowdrop/dist/components/UniversalNode.svelte","../../node_modules/@d34dman/flowdrop/dist/services/api.js","../../node_modules/uuid/dist/esm-browser/stringify.js","../../node_modules/uuid/dist/esm-browser/rng.js","../../node_modules/uuid/dist/esm-browser/native.js","../../node_modules/uuid/dist/esm-browser/v4.js","../../node_modules/@d34dman/flowdrop/dist/services/nodeExecutionService.js","../../node_modules/@d34dman/flowdrop/dist/helpers/workflowEditorHelper.js","../../node_modules/@d34dman/flowdrop/dist/utils/performanceUtils.js","../../node_modules/@d34dman/flowdrop/dist/components/WorkflowEditor.svelte","../../node_modules/@d34dman/flowdrop/dist/components/LoadingSpinner.svelte","../../node_modules/@d34dman/flowdrop/dist/components/NodeSidebar.svelte","../../node_modules/@d34dman/flowdrop/dist/components/StatusIcon.svelte","../../node_modules/@d34dman/flowdrop/dist/components/ConfigForm.svelte","../../node_modules/@d34dman/flowdrop/dist/components/ConfigModal.svelte","../../node_modules/@d34dman/flowdrop/dist/components/ConfigSidebar.svelte","../../node_modules/@d34dman/flowdrop/dist/components/LogsSidebar.svelte","../../src/lib/mocks/app-stores.js","../../node_modules/@d34dman/flowdrop/dist/components/Navbar.svelte","../../node_modules/@d34dman/flowdrop/dist/data/samples.js","../../node_modules/svelte-5-french-toast/dist/core/store.js","../../node_modules/svelte-5-french-toast/dist/core/types.js","../../node_modules/svelte-5-french-toast/dist/core/utils.js","../../node_modules/svelte-5-french-toast/dist/core/toast.js","../../node_modules/@d34dman/flowdrop/dist/services/toastService.js","../../node_modules/@d34dman/flowdrop/dist/components/App.svelte","../../node_modules/@d34dman/flowdrop/dist/components/PipelineStatus.svelte","../../node_modules/@d34dman/flowdrop/dist/utils/config.js","../../node_modules/@d34dman/flowdrop/dist/services/workflowStorage.js","../../node_modules/@d34dman/flowdrop/dist/services/globalSave.js","../../node_modules/@d34dman/flowdrop/dist/config/defaultPortConfig.js","../../node_modules/@d34dman/flowdrop/dist/services/portConfigApi.js","../../node_modules/@d34dman/flowdrop/dist/services/draftStorage.js","../../node_modules/@d34dman/flowdrop/dist/config/apiConfig.js","../../node_modules/@d34dman/flowdrop/dist/config/runtimeConfig.js","../../node_modules/@d34dman/flowdrop/dist/adapters/WorkflowAdapter.js","../../node_modules/@d34dman/flowdrop/dist/clients/ApiClient.js","../../node_modules/@d34dman/flowdrop/dist/svelte-app.js"],"sourcesContent":["/**\n * Authentication Provider Types for FlowDrop\n *\n * Provides interfaces and implementations for authentication in FlowDrop.\n * AuthProvider is passed at mount time and cannot be changed without remounting.\n *\n * @module types/auth\n */\n/**\n * Static authentication provider\n *\n * Provides authentication using static credentials configured at instantiation.\n * Suitable for simple use cases where tokens don't change during the session.\n * Also used internally for backward compatibility with existing endpointConfig.auth.\n *\n * @example\n * ```typescript\n * // Bearer token authentication\n * const authProvider = new StaticAuthProvider({\n *   type: \"bearer\",\n *   token: \"your-jwt-token\"\n * });\n *\n * // API key authentication\n * const authProvider = new StaticAuthProvider({\n *   type: \"api_key\",\n *   apiKey: \"your-api-key\"\n * });\n *\n * // Custom headers\n * const authProvider = new StaticAuthProvider({\n *   type: \"custom\",\n *   headers: {\n *     \"X-Custom-Auth\": \"value\",\n *     \"X-Tenant-ID\": \"tenant123\"\n *   }\n * });\n * ```\n */\nexport class StaticAuthProvider {\n    /** Cached authentication headers */\n    headers;\n    /**\n     * Create a new StaticAuthProvider\n     *\n     * @param config - Static authentication configuration\n     */\n    constructor(config) {\n        this.headers = {};\n        switch (config.type) {\n            case \"bearer\":\n                if (config.token) {\n                    this.headers[\"Authorization\"] = `Bearer ${config.token}`;\n                }\n                break;\n            case \"api_key\":\n                if (config.apiKey) {\n                    this.headers[\"X-API-Key\"] = config.apiKey;\n                }\n                break;\n            case \"custom\":\n                if (config.headers) {\n                    this.headers = { ...config.headers };\n                }\n                break;\n            case \"none\":\n            default:\n                // No headers needed\n                break;\n        }\n    }\n    /**\n     * Get authentication headers\n     *\n     * Returns the statically configured headers.\n     *\n     * @returns Promise resolving to authentication headers\n     */\n    async getAuthHeaders() {\n        return this.headers;\n    }\n    /**\n     * Check if authenticated\n     *\n     * Returns true if any auth headers are configured.\n     *\n     * @returns true if headers are configured\n     */\n    isAuthenticated() {\n        return Object.keys(this.headers).length > 0;\n    }\n    /**\n     * Handle unauthorized response\n     *\n     * Static provider cannot refresh tokens, so always returns false.\n     *\n     * @returns Promise resolving to false (cannot refresh)\n     */\n    async onUnauthorized() {\n        // Static provider cannot refresh tokens\n        return false;\n    }\n    /**\n     * Handle forbidden response\n     *\n     * Static provider has no special handling for 403.\n     */\n    async onForbidden() {\n        // No special handling for static provider\n    }\n}\n/**\n * Callback-based authentication provider\n *\n * Provides authentication using callback functions for dynamic token retrieval.\n * Ideal for enterprise integrations where the parent application manages auth.\n *\n * @example\n * ```typescript\n * const authProvider = new CallbackAuthProvider({\n *   getToken: async () => {\n *     return authService.getAccessToken();\n *   },\n *   onUnauthorized: async () => {\n *     const refreshed = await authService.refreshToken();\n *     return refreshed;\n *   },\n *   onForbidden: async () => {\n *     showError(\"You don't have permission to access this resource\");\n *   }\n * });\n * ```\n */\nexport class CallbackAuthProvider {\n    /** Function to get the current token */\n    getToken;\n    /** Optional unauthorized callback */\n    onUnauthorizedCallback;\n    /** Optional forbidden callback */\n    onForbiddenCallback;\n    /**\n     * Create a new CallbackAuthProvider\n     *\n     * @param config - Callback authentication configuration\n     */\n    constructor(config) {\n        this.getToken = config.getToken;\n        this.onUnauthorizedCallback = config.onUnauthorized;\n        this.onForbiddenCallback = config.onForbidden;\n    }\n    /**\n     * Get authentication headers\n     *\n     * Calls the getToken callback to retrieve the current token.\n     *\n     * @returns Promise resolving to authentication headers\n     */\n    async getAuthHeaders() {\n        const token = await this.getToken();\n        if (token) {\n            return { Authorization: `Bearer ${token}` };\n        }\n        return {};\n    }\n    /**\n     * Check if authenticated\n     *\n     * For callback-based auth, we assume authenticated if getToken exists.\n     * The actual token validity is checked when making requests.\n     *\n     * @returns true (assumes authenticated, actual check happens on request)\n     */\n    isAuthenticated() {\n        // For callback-based auth, we assume authenticated if getToken exists\n        // The actual token validity is checked when making requests\n        return true;\n    }\n    /**\n     * Handle unauthorized response\n     *\n     * Calls the onUnauthorized callback if provided.\n     *\n     * @returns Promise resolving to true if auth was refreshed\n     */\n    async onUnauthorized() {\n        if (this.onUnauthorizedCallback) {\n            return this.onUnauthorizedCallback();\n        }\n        return false;\n    }\n    /**\n     * Handle forbidden response\n     *\n     * Calls the onForbidden callback if provided.\n     */\n    async onForbidden() {\n        if (this.onForbiddenCallback) {\n            await this.onForbiddenCallback();\n        }\n    }\n}\n/**\n * No-op authentication provider\n *\n * Used when no authentication is required.\n * Provides empty headers and always returns not authenticated.\n */\nexport class NoAuthProvider {\n    /**\n     * Get authentication headers\n     *\n     * Returns empty headers (no auth).\n     *\n     * @returns Promise resolving to empty object\n     */\n    async getAuthHeaders() {\n        return {};\n    }\n    /**\n     * Check if authenticated\n     *\n     * Always returns false (no auth configured).\n     *\n     * @returns false\n     */\n    isAuthenticated() {\n        return false;\n    }\n}\n/**\n * Create an AuthProvider from legacy endpointConfig.auth configuration\n *\n * Used internally for backward compatibility with existing code that uses\n * the old auth configuration format in EndpointConfig.\n *\n * @param authConfig - Legacy auth configuration from EndpointConfig\n * @returns AuthProvider instance\n */\nexport function createAuthProviderFromLegacyConfig(authConfig) {\n    if (!authConfig || authConfig.type === \"none\") {\n        return new NoAuthProvider();\n    }\n    return new StaticAuthProvider(authConfig);\n}\n","/**\n * Event Handler Types for FlowDrop\n *\n * Defines high-level event handlers for enterprise integration.\n * These events allow parent applications to react to workflow lifecycle events.\n *\n * @module types/events\n */\n/**\n * Default feature values\n *\n * Used when features are not explicitly configured.\n */\nexport const DEFAULT_FEATURES = {\n    autoSaveDraft: true,\n    autoSaveDraftInterval: 30000,\n    showToasts: true\n};\n/**\n * Merge user-provided features with defaults\n *\n * @param features - User-provided feature configuration\n * @returns Complete feature configuration with defaults applied\n */\nexport function mergeFeatures(features) {\n    return {\n        ...DEFAULT_FEATURES,\n        ...features\n    };\n}\n","/**\n * API Client for FlowDrop Workflow Library\n */\n/**\n * HTTP API client for FlowDrop\n */\nexport class FlowDropApiClient {\n    baseUrl;\n    headers;\n    constructor(baseUrl, apiKey) {\n        this.baseUrl = baseUrl.replace(/\\/$/, '');\n        this.headers = {\n            'Content-Type': 'application/json'\n        };\n        if (apiKey) {\n            this.headers['Authorization'] = `Bearer ${apiKey}`;\n        }\n    }\n    /**\n     * Make HTTP request with error handling\n     */\n    async request(endpoint, options = {}) {\n        const url = `${this.baseUrl}${endpoint}`;\n        const config = {\n            headers: this.headers,\n            ...options\n        };\n        try {\n            const response = await fetch(url, config);\n            if (!response.ok) {\n                throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n            }\n            const data = await response.json();\n            return data;\n        }\n        catch (error) {\n            console.error('API request failed:', error);\n            throw new Error(`API request failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\n        }\n    }\n    /**\n     * Fetch available node types and their metadata\n     */\n    async getAvailableNodes() {\n        const response = await this.request('/nodes');\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to fetch available nodes');\n        }\n        return response.data;\n    }\n    /**\n     * Fetch nodes by category\n     */\n    async getNodesByCategory(category) {\n        const response = await this.request(`/nodes?category=${encodeURIComponent(category)}`);\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to fetch nodes by category');\n        }\n        return response.data;\n    }\n    /**\n     * Fetch a specific node's metadata\n     */\n    async getNodeMetadata(nodeId) {\n        const response = await this.request(`/nodes/${encodeURIComponent(nodeId)}`);\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to fetch node metadata');\n        }\n        return response.data;\n    }\n    /**\n     * Save a workflow\n     */\n    async saveWorkflow(workflow) {\n        const response = await this.request('/workflows', {\n            method: 'POST',\n            body: JSON.stringify(workflow)\n        });\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to save workflow');\n        }\n        return response.data;\n    }\n    /**\n     * Update an existing workflow\n     */\n    async updateWorkflow(workflowId, workflow) {\n        const response = await this.request(`/workflows/${encodeURIComponent(workflowId)}`, {\n            method: 'PUT',\n            body: JSON.stringify(workflow)\n        });\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to update workflow');\n        }\n        return response.data;\n    }\n    /**\n     * Load a workflow by ID\n     */\n    async loadWorkflow(workflowId) {\n        const response = await this.request(`/workflows/${encodeURIComponent(workflowId)}`);\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to load workflow');\n        }\n        return response.data;\n    }\n    /**\n     * List all workflows\n     */\n    async listWorkflows() {\n        const response = await this.request('/workflows');\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to list workflows');\n        }\n        return response.data;\n    }\n    /**\n     * Delete a workflow\n     */\n    async deleteWorkflow(workflowId) {\n        const response = await this.request(`/workflows/${encodeURIComponent(workflowId)}`, {\n            method: 'DELETE'\n        });\n        if (!response.success) {\n            throw new Error(response.error || 'Failed to delete workflow');\n        }\n    }\n    /**\n     * Execute a workflow\n     */\n    async executeWorkflow(workflowId, inputs) {\n        const response = await this.request(`/workflows/${encodeURIComponent(workflowId)}/execute`, {\n            method: 'POST',\n            body: JSON.stringify({ inputs })\n        });\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to execute workflow');\n        }\n        return response.data;\n    }\n    /**\n     * Get execution status\n     */\n    async getExecutionStatus(executionId) {\n        const response = await this.request(`/executions/${encodeURIComponent(executionId)}`);\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to get execution status');\n        }\n        return response.data;\n    }\n    /**\n     * Cancel workflow execution\n     */\n    async cancelExecution(executionId) {\n        const response = await this.request(`/executions/${encodeURIComponent(executionId)}/cancel`, {\n            method: 'POST'\n        });\n        if (!response.success) {\n            throw new Error(response.error || 'Failed to cancel execution');\n        }\n    }\n    /**\n     * Get execution logs\n     */\n    async getExecutionLogs(executionId) {\n        const response = await this.request(`/executions/${encodeURIComponent(executionId)}/logs`);\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to get execution logs');\n        }\n        return response.data;\n    }\n    /**\n     * Validate workflow configuration\n     */\n    async validateWorkflow(workflow) {\n        const response = await this.request('/workflows/validate', {\n            method: 'POST',\n            body: JSON.stringify(workflow)\n        });\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to validate workflow');\n        }\n        return response.data;\n    }\n    /**\n     * Export workflow as JSON\n     */\n    async exportWorkflow(workflowId) {\n        const response = await this.request(`/workflows/${encodeURIComponent(workflowId)}/export`);\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to export workflow');\n        }\n        return response.data;\n    }\n    /**\n     * Import workflow from JSON\n     */\n    async importWorkflow(workflowJson) {\n        const response = await this.request('/workflows/import', {\n            method: 'POST',\n            body: JSON.stringify({ workflow: workflowJson })\n        });\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to import workflow');\n        }\n        return response.data;\n    }\n    /**\n     * Fetch port configuration\n     */\n    async getPortConfig() {\n        const response = await this.request('/port-config');\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to fetch port configuration');\n        }\n        return response.data;\n    }\n    /**\n     * Fetch pipeline data including job information and status\n     */\n    async getPipelineData(pipelineId) {\n        const response = await this.request(`/pipeline/${encodeURIComponent(pipelineId)}`);\n        return response;\n    }\n}\n","/**\n * FlowDrop Endpoint Configuration\n * Provides configurable endpoints for all API actions\n */\n/**\n * Default endpoint configuration\n */\nexport const defaultEndpointConfig = {\n    baseUrl: '/api/flowdrop',\n    endpoints: {\n        nodes: {\n            list: '/nodes',\n            get: '/nodes/{id}',\n            byCategory: '/nodes?category={category}',\n            metadata: '/nodes/{id}/metadata'\n        },\n        portConfig: '/port-config',\n        workflows: {\n            list: '/workflows',\n            get: '/workflows/{id}',\n            create: '/workflows',\n            update: '/workflows/{id}',\n            delete: '/workflows/{id}',\n            validate: '/workflows/validate',\n            export: '/workflows/{id}/export',\n            import: '/workflows/import'\n        },\n        executions: {\n            execute: '/workflows/{id}/execute',\n            status: '/executions/{id}',\n            cancel: '/executions/{id}/cancel',\n            logs: '/executions/{id}/logs',\n            history: '/executions'\n        },\n        pipelines: {\n            list: '/workflow/{workflow_id}/pipelines',\n            get: '/pipeline/{id}',\n            create: '/pipeline',\n            update: '/pipeline/{id}',\n            delete: '/pipeline/{id}',\n            status: '/pipeline/{id}/status',\n            logs: '/pipeline/{id}/logs',\n            execute: '/pipeline/{id}/execute',\n            stop: '/pipeline/{id}/stop'\n        },\n        templates: {\n            list: '/templates',\n            get: '/templates/{id}',\n            create: '/templates',\n            update: '/templates/{id}',\n            delete: '/templates/{id}'\n        },\n        users: {\n            profile: '/users/profile',\n            preferences: '/users/preferences'\n        },\n        system: {\n            health: '/system/health',\n            config: '/system/config',\n            version: '/system/version'\n        }\n    },\n    timeout: 30000,\n    retry: {\n        enabled: true,\n        maxAttempts: 3,\n        delay: 1000,\n        backoff: 'exponential'\n    }\n};\n/**\n * Create endpoint configuration with custom base URL\n */\nexport function createEndpointConfig(baseUrl, overrides) {\n    const config = {\n        ...defaultEndpointConfig,\n        baseUrl: baseUrl.replace(/\\/$/, ''),\n        ...overrides\n    };\n    return config;\n}\n/**\n * Build full URL for an endpoint\n */\nexport function buildEndpointUrl(config, endpointPath, params) {\n    let url = endpointPath;\n    // Replace path parameters\n    if (params) {\n        Object.entries(params).forEach(([key, value]) => {\n            url = url.replace(`{${key}}`, encodeURIComponent(value));\n        });\n    }\n    // Ensure URL starts with base URL\n    if (!url.startsWith('http') && !url.startsWith('//')) {\n        url = `${config.baseUrl}${url.startsWith('/') ? url : `/${url}`}`;\n    }\n    return url;\n}\n/**\n * Get HTTP method for an endpoint\n */\nexport function getEndpointMethod(config, endpointKey) {\n    return config.methods?.[endpointKey] || 'GET';\n}\n/**\n * Get custom headers for an endpoint\n */\nexport function getEndpointHeaders(config, endpointKey) {\n    const baseHeaders = {\n        'Content-Type': 'application/json'\n    };\n    // Add authentication headers\n    if (config.auth?.type === 'bearer' && config.auth.token) {\n        baseHeaders['Authorization'] = `Bearer ${config.auth.token}`;\n    }\n    else if (config.auth?.type === 'api_key' && config.auth.apiKey) {\n        baseHeaders['X-API-Key'] = config.auth.apiKey;\n    }\n    else if (config.auth?.type === 'custom' && config.auth.headers) {\n        Object.assign(baseHeaders, config.auth.headers);\n    }\n    // Add endpoint-specific headers\n    const endpointHeaders = config.headers?.[endpointKey];\n    if (endpointHeaders) {\n        Object.assign(baseHeaders, endpointHeaders);\n    }\n    return baseHeaders;\n}\n","/**\n * Enhanced API Client for FlowDrop\n *\n * Uses configurable endpoints and supports pluggable authentication providers.\n *\n * @module api/enhanced-client\n */\nimport { buildEndpointUrl, getEndpointMethod, getEndpointHeaders } from \"../config/endpoints.js\";\nimport { createAuthProviderFromLegacyConfig } from \"../types/auth.js\";\n/**\n * API error with additional context\n */\nexport class ApiError extends Error {\n    /** HTTP status code */\n    status;\n    /** Original error data from API */\n    errorData;\n    /** Operation that was being performed */\n    operation;\n    constructor(message, status, operation, errorData = {}) {\n        super(message);\n        this.name = \"ApiError\";\n        this.status = status;\n        this.operation = operation;\n        this.errorData = errorData;\n    }\n}\n/**\n * Enhanced HTTP API client for FlowDrop with configurable endpoints\n *\n * Supports pluggable authentication via AuthProvider interface.\n *\n * @example\n * ```typescript\n * // With AuthProvider\n * const client = new EnhancedFlowDropApiClient(config, authProvider);\n *\n * // Backward compatible (uses config.auth)\n * const client = new EnhancedFlowDropApiClient(config);\n * ```\n */\nexport class EnhancedFlowDropApiClient {\n    config;\n    authProvider;\n    /**\n     * Create a new EnhancedFlowDropApiClient\n     *\n     * @param config - Endpoint configuration\n     * @param authProvider - Optional authentication provider (if not provided, uses config.auth)\n     */\n    constructor(config, authProvider) {\n        this.config = config;\n        // Use provided AuthProvider or create one from legacy config\n        this.authProvider = authProvider ?? createAuthProviderFromLegacyConfig(config.auth);\n    }\n    /**\n     * Make HTTP request with error handling, retry logic, and auth support\n     *\n     * @param endpointKey - Key identifying the endpoint (for method/header lookup)\n     * @param endpointPath - The endpoint path template\n     * @param params - URL parameters to substitute\n     * @param options - Additional fetch options\n     * @param operation - Description of the operation (for error messages)\n     */\n    async request(endpointKey, endpointPath, params, options = {}, operation = \"API request\") {\n        const url = buildEndpointUrl(this.config, endpointPath, params);\n        const method = options.method ?? getEndpointMethod(this.config, endpointKey);\n        const configHeaders = getEndpointHeaders(this.config, endpointKey);\n        // Get auth headers from provider\n        const authHeaders = await this.authProvider.getAuthHeaders();\n        // Merge headers: config headers < auth headers < request-specific headers\n        const headers = {\n            ...configHeaders,\n            ...authHeaders,\n            ...options.headers\n        };\n        const fetchConfig = {\n            method,\n            headers,\n            ...options\n        };\n        let lastError = null;\n        const maxAttempts = this.config.retry?.enabled ? this.config.retry.maxAttempts : 1;\n        for (let attempt = 1; attempt <= maxAttempts; attempt++) {\n            try {\n                const response = await fetch(url, fetchConfig);\n                // Handle 401 Unauthorized\n                if (response.status === 401) {\n                    if (this.authProvider.onUnauthorized) {\n                        const refreshed = await this.authProvider.onUnauthorized();\n                        if (refreshed && attempt < maxAttempts) {\n                            // Get new auth headers and retry\n                            const newAuthHeaders = await this.authProvider.getAuthHeaders();\n                            fetchConfig.headers = {\n                                ...configHeaders,\n                                ...newAuthHeaders,\n                                ...options.headers\n                            };\n                            continue; // Retry with new headers\n                        }\n                    }\n                    throw new ApiError(\"Unauthorized\", 401, operation, {});\n                }\n                // Handle 403 Forbidden\n                if (response.status === 403) {\n                    if (this.authProvider.onForbidden) {\n                        await this.authProvider.onForbidden();\n                    }\n                    throw new ApiError(\"Forbidden\", 403, operation, {});\n                }\n                // Handle other errors\n                if (!response.ok) {\n                    const errorData = await response.json().catch(() => ({}));\n                    throw new ApiError(errorData.error ?? `HTTP ${response.status}: ${response.statusText}`, response.status, operation, errorData);\n                }\n                const data = await response.json();\n                return data;\n            }\n            catch (error) {\n                // If it's already an ApiError, preserve it\n                if (error instanceof ApiError) {\n                    lastError = error;\n                }\n                else {\n                    lastError = error instanceof Error ? error : new Error(String(error));\n                }\n                // Don't retry on auth errors (401, 403) or last attempt\n                if ((lastError instanceof ApiError &&\n                    (lastError.status === 401 || lastError.status === 403)) ||\n                    attempt === maxAttempts) {\n                    console.error(`API request failed after ${attempt} attempts:`, lastError);\n                    throw lastError;\n                }\n                // Wait before retry\n                const delay = this.config.retry?.delay ?? 1000;\n                const backoffDelay = this.config.retry?.backoff === \"exponential\" ? delay * Math.pow(2, attempt - 1) : delay;\n                await new Promise((resolve) => setTimeout(resolve, backoffDelay));\n            }\n        }\n        throw lastError;\n    }\n    /**\n     * Update the auth provider\n     *\n     * Useful for updating auth after token refresh in parent application.\n     * Note: Per specification, this should rarely be needed as auth is typically\n     * set at mount time and requires remount to change.\n     *\n     * @param authProvider - New authentication provider\n     */\n    setAuthProvider(authProvider) {\n        this.authProvider = authProvider;\n    }\n    /**\n     * Get current auth provider\n     *\n     * @returns The current AuthProvider instance\n     */\n    getAuthProvider() {\n        return this.authProvider;\n    }\n    // =========================================================================\n    // Node API Methods\n    // =========================================================================\n    /**\n     * Fetch all available node types\n     */\n    async getAvailableNodes() {\n        const response = await this.request(\"nodes.list\", this.config.endpoints.nodes.list, undefined, {}, \"fetch available nodes\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to fetch available nodes\");\n        }\n        return response.data;\n    }\n    /**\n     * Fetch nodes filtered by category\n     */\n    async getNodesByCategory(category) {\n        const response = await this.request(\"nodes.byCategory\", this.config.endpoints.nodes.byCategory, { category }, {}, \"fetch nodes by category\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to fetch nodes by category\");\n        }\n        return response.data;\n    }\n    /**\n     * Fetch metadata for a specific node type\n     */\n    async getNodeMetadata(nodeId) {\n        const response = await this.request(\"nodes.metadata\", this.config.endpoints.nodes.metadata, { id: nodeId }, {}, \"fetch node metadata\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to fetch node metadata\");\n        }\n        return response.data;\n    }\n    // =========================================================================\n    // Workflow API Methods\n    // =========================================================================\n    /**\n     * Save a new workflow\n     */\n    async saveWorkflow(workflow) {\n        const response = await this.request(\"workflows.create\", this.config.endpoints.workflows.create, undefined, {\n            method: \"POST\",\n            body: JSON.stringify(workflow)\n        }, \"save workflow\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to save workflow\");\n        }\n        return response.data;\n    }\n    /**\n     * Update an existing workflow\n     */\n    async updateWorkflow(workflowId, workflow) {\n        const response = await this.request(\"workflows.update\", this.config.endpoints.workflows.update, { id: workflowId }, {\n            method: \"PUT\",\n            body: JSON.stringify(workflow)\n        }, \"update workflow\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to update workflow\");\n        }\n        return response.data;\n    }\n    /**\n     * Load a workflow by ID\n     */\n    async loadWorkflow(workflowId) {\n        const response = await this.request(\"workflows.get\", this.config.endpoints.workflows.get, { id: workflowId }, {}, \"load workflow\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to load workflow\");\n        }\n        return response.data;\n    }\n    /**\n     * List all workflows\n     */\n    async listWorkflows() {\n        const response = await this.request(\"workflows.list\", this.config.endpoints.workflows.list, undefined, {}, \"list workflows\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to list workflows\");\n        }\n        return response.data;\n    }\n    /**\n     * Delete a workflow\n     */\n    async deleteWorkflow(workflowId) {\n        const response = await this.request(\"workflows.delete\", this.config.endpoints.workflows.delete, { id: workflowId }, { method: \"DELETE\" }, \"delete workflow\");\n        if (!response.success) {\n            throw new Error(response.error ?? \"Failed to delete workflow\");\n        }\n    }\n    /**\n     * Validate a workflow\n     */\n    async validateWorkflow(workflow) {\n        const response = await this.request(\"workflows.validate\", this.config.endpoints.workflows.validate, undefined, {\n            method: \"POST\",\n            body: JSON.stringify(workflow)\n        }, \"validate workflow\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to validate workflow\");\n        }\n        return response.data;\n    }\n    /**\n     * Export a workflow as JSON string\n     */\n    async exportWorkflow(workflowId) {\n        const response = await this.request(\"workflows.export\", this.config.endpoints.workflows.export, { id: workflowId }, {}, \"export workflow\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to export workflow\");\n        }\n        return response.data;\n    }\n    /**\n     * Import a workflow from JSON\n     */\n    async importWorkflow(workflowJson) {\n        const response = await this.request(\"workflows.import\", this.config.endpoints.workflows.import, undefined, {\n            method: \"POST\",\n            body: JSON.stringify({ workflow: workflowJson })\n        }, \"import workflow\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to import workflow\");\n        }\n        return response.data;\n    }\n    // =========================================================================\n    // Execution API Methods\n    // =========================================================================\n    /**\n     * Execute a workflow\n     */\n    async executeWorkflow(workflowId, inputs) {\n        const response = await this.request(\"executions.execute\", this.config.endpoints.executions.execute, { id: workflowId }, {\n            method: \"POST\",\n            body: JSON.stringify({ inputs })\n        }, \"execute workflow\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to execute workflow\");\n        }\n        return response.data;\n    }\n    /**\n     * Get execution status\n     */\n    async getExecutionStatus(executionId) {\n        const response = await this.request(\"executions.status\", this.config.endpoints.executions.status, { id: executionId }, {}, \"get execution status\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to get execution status\");\n        }\n        return response.data;\n    }\n    /**\n     * Cancel a running execution\n     */\n    async cancelExecution(executionId) {\n        const response = await this.request(\"executions.cancel\", this.config.endpoints.executions.cancel, { id: executionId }, { method: \"POST\" }, \"cancel execution\");\n        if (!response.success) {\n            throw new Error(response.error ?? \"Failed to cancel execution\");\n        }\n    }\n    /**\n     * Get execution logs\n     */\n    async getExecutionLogs(executionId) {\n        const response = await this.request(\"executions.logs\", this.config.endpoints.executions.logs, { id: executionId }, {}, \"get execution logs\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to get execution logs\");\n        }\n        return response.data;\n    }\n    // =========================================================================\n    // Template API Methods\n    // =========================================================================\n    /**\n     * List available templates\n     */\n    async listTemplates() {\n        const response = await this.request(\"templates.list\", this.config.endpoints.templates.list, undefined, {}, \"list templates\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to list templates\");\n        }\n        return response.data;\n    }\n    /**\n     * Get a template by ID\n     */\n    async getTemplate(templateId) {\n        const response = await this.request(\"templates.get\", this.config.endpoints.templates.get, { id: templateId }, {}, \"get template\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to get template\");\n        }\n        return response.data;\n    }\n    // =========================================================================\n    // System API Methods\n    // =========================================================================\n    /**\n     * Get system health status\n     */\n    async getSystemHealth() {\n        const response = await this.request(\"system.health\", this.config.endpoints.system.health, undefined, {}, \"get system health\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to get system health\");\n        }\n        return response.data;\n    }\n    /**\n     * Get system configuration\n     */\n    async getSystemConfig() {\n        const response = await this.request(\"system.config\", this.config.endpoints.system.config, undefined, {}, \"get system config\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to get system config\");\n        }\n        return response.data;\n    }\n    /**\n     * Get system version information\n     */\n    async getSystemVersion() {\n        const response = await this.request(\"system.version\", this.config.endpoints.system.version, undefined, {}, \"get system version\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to get system version\");\n        }\n        return response.data;\n    }\n}\n","// generated during release, do not modify\n\n/**\n * The current version, as set in package.json.\n * @type {string}\n */\nexport const VERSION = '5.41.3';\nexport const PUBLIC_VERSION = '5';\n","import { PUBLIC_VERSION } from '../version.js';\n\nif (typeof window !== 'undefined') {\n\t// @ts-expect-error\n\t((window.__svelte ??= {}).v ??= new Set()).add(PUBLIC_VERSION);\n}\n","export const EACH_ITEM_REACTIVE = 1;\nexport const EACH_INDEX_REACTIVE = 1 << 1;\n/** See EachBlock interface metadata.is_controlled for an explanation what this is */\nexport const EACH_IS_CONTROLLED = 1 << 2;\nexport const EACH_IS_ANIMATED = 1 << 3;\nexport const EACH_ITEM_IMMUTABLE = 1 << 4;\n\nexport const PROPS_IS_IMMUTABLE = 1;\nexport const PROPS_IS_RUNES = 1 << 1;\nexport const PROPS_IS_UPDATED = 1 << 2;\nexport const PROPS_IS_BINDABLE = 1 << 3;\nexport const PROPS_IS_LAZY_INITIAL = 1 << 4;\n\nexport const TRANSITION_IN = 1;\nexport const TRANSITION_OUT = 1 << 1;\nexport const TRANSITION_GLOBAL = 1 << 2;\n\nexport const TEMPLATE_FRAGMENT = 1;\nexport const TEMPLATE_USE_IMPORT_NODE = 1 << 1;\nexport const TEMPLATE_USE_SVG = 1 << 2;\nexport const TEMPLATE_USE_MATHML = 1 << 3;\n\nexport const HYDRATION_START = '[';\n/** used to indicate that an `{:else}...` block was rendered */\nexport const HYDRATION_START_ELSE = '[!';\nexport const HYDRATION_END = ']';\nexport const HYDRATION_ERROR = {};\n\nexport const ELEMENT_IS_NAMESPACED = 1;\nexport const ELEMENT_PRESERVE_ATTRIBUTE_CASE = 1 << 1;\nexport const ELEMENT_IS_INPUT = 1 << 2;\n\nexport const UNINITIALIZED = Symbol();\n\n// Dev-time component properties\nexport const FILENAME = Symbol('filename');\nexport const HMR = Symbol('hmr');\n\nexport const NAMESPACE_HTML = 'http://www.w3.org/1999/xhtml';\nexport const NAMESPACE_SVG = 'http://www.w3.org/2000/svg';\nexport const NAMESPACE_MATHML = 'http://www.w3.org/1998/Math/MathML';\n\n// we use a list of ignorable runtime warnings because not every runtime warning\n// can be ignored and we want to keep the validation for svelte-ignore in place\nexport const IGNORABLE_RUNTIME_WARNINGS = /** @type {const} */ ([\n\t'await_waterfall',\n\t'await_reactivity_loss',\n\t'state_snapshot_uncloneable',\n\t'binding_property_non_reactive',\n\t'hydration_attribute_changed',\n\t'hydration_html_changed',\n\t'ownership_invalid_binding',\n\t'ownership_invalid_mutation'\n]);\n\n/**\n * Whitespace inside one of these elements will not result in\n * a whitespace node being created in any circumstances. (This\n * list is almost certainly very incomplete)\n * TODO this is currently unused\n */\nexport const ELEMENTS_WITHOUT_TEXT = ['audio', 'datalist', 'dl', 'optgroup', 'select', 'video'];\n\nexport const ATTACHMENT_KEY = '@attach';\n","const node_env = globalThis.process?.env?.NODE_ENV;\nexport default node_env && !node_env.toLowerCase().startsWith('prod');\n","// Store the references to globals in case someone tries to monkey patch these, causing the below\n// to de-opt (this occurs often when using popular extensions).\nexport var is_array = Array.isArray;\nexport var index_of = Array.prototype.indexOf;\nexport var array_from = Array.from;\nexport var object_keys = Object.keys;\nexport var define_property = Object.defineProperty;\nexport var get_descriptor = Object.getOwnPropertyDescriptor;\nexport var get_descriptors = Object.getOwnPropertyDescriptors;\nexport var object_prototype = Object.prototype;\nexport var array_prototype = Array.prototype;\nexport var get_prototype_of = Object.getPrototypeOf;\nexport var is_extensible = Object.isExtensible;\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\nexport const noop = () => {};\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n\n/**\n * @template [T=any]\n * @param {any} value\n * @returns {value is PromiseLike<T>}\n */\nexport function is_promise(value) {\n\treturn typeof value?.then === 'function';\n}\n\n/** @param {Function} fn */\nexport function run(fn) {\n\treturn fn();\n}\n\n/** @param {Array<() => void>} arr */\nexport function run_all(arr) {\n\tfor (var i = 0; i < arr.length; i++) {\n\t\tarr[i]();\n\t}\n}\n\n/**\n * TODO replace with Promise.withResolvers once supported widely enough\n * @template T\n */\nexport function deferred() {\n\t/** @type {(value: T) => void} */\n\tvar resolve;\n\n\t/** @type {(reason: any) => void} */\n\tvar reject;\n\n\t/** @type {Promise<T>} */\n\tvar promise = new Promise((res, rej) => {\n\t\tresolve = res;\n\t\treject = rej;\n\t});\n\n\t// @ts-expect-error\n\treturn { promise, resolve, reject };\n}\n\n/**\n * @template V\n * @param {V} value\n * @param {V | (() => V)} fallback\n * @param {boolean} [lazy]\n * @returns {V}\n */\nexport function fallback(value, fallback, lazy = false) {\n\treturn value === undefined\n\t\t? lazy\n\t\t\t? /** @type {() => V} */ (fallback)()\n\t\t\t: /** @type {V} */ (fallback)\n\t\t: value;\n}\n\n/**\n * When encountering a situation like `let [a, b, c] = $derived(blah())`,\n * we need to stash an intermediate value that `a`, `b`, and `c` derive\n * from, in case it's an iterable\n * @template T\n * @param {ArrayLike<T> | Iterable<T>} value\n * @param {number} [n]\n * @returns {Array<T>}\n */\nexport function to_array(value, n) {\n\t// return arrays unchanged\n\tif (Array.isArray(value)) {\n\t\treturn value;\n\t}\n\n\t// if value is not iterable, or `n` is unspecified (indicates a rest\n\t// element, which means we're not concerned about unbounded iterables)\n\t// convert to an array with `Array.from`\n\tif (n === undefined || !(Symbol.iterator in value)) {\n\t\treturn Array.from(value);\n\t}\n\n\t// otherwise, populate an array with `n` values\n\n\t/** @type {T[]} */\n\tconst array = [];\n\n\tfor (const element of value) {\n\t\tarray.push(element);\n\t\tif (array.length === n) break;\n\t}\n\n\treturn array;\n}\n","// General flags\nexport const DERIVED = 1 << 1;\nexport const EFFECT = 1 << 2;\nexport const RENDER_EFFECT = 1 << 3;\nexport const BLOCK_EFFECT = 1 << 4;\nexport const BRANCH_EFFECT = 1 << 5;\nexport const ROOT_EFFECT = 1 << 6;\nexport const BOUNDARY_EFFECT = 1 << 7;\nexport const CLEAN = 1 << 10;\nexport const DIRTY = 1 << 11;\nexport const MAYBE_DIRTY = 1 << 12;\nexport const INERT = 1 << 13;\nexport const DESTROYED = 1 << 14;\n\n// Flags exclusive to effects\nexport const EFFECT_RAN = 1 << 15;\n/** 'Transparent' effects do not create a transition boundary */\nexport const EFFECT_TRANSPARENT = 1 << 16;\nexport const INSPECT_EFFECT = 1 << 17;\nexport const HEAD_EFFECT = 1 << 18;\nexport const EFFECT_PRESERVED = 1 << 19;\nexport const USER_EFFECT = 1 << 20;\n\n// Flags exclusive to deriveds\nexport const UNOWNED = 1 << 8;\nexport const DISCONNECTED = 1 << 9;\n/**\n * Tells that we marked this derived and its reactions as visited during the \"mark as (maybe) dirty\"-phase.\n * Will be lifted during execution of the derived and during checking its dirty state (both are necessary\n * because a derived might be checked but not executed).\n */\nexport const WAS_MARKED = 1 << 15;\n\n// Flags used for async\nexport const REACTION_IS_UPDATING = 1 << 21;\nexport const ASYNC = 1 << 22;\n\nexport const ERROR_VALUE = 1 << 23;\n\nexport const STATE_SYMBOL = Symbol('$state');\nexport const LEGACY_PROPS = Symbol('legacy props');\nexport const LOADING_ATTR_SYMBOL = Symbol('');\nexport const PROXY_PATH_SYMBOL = Symbol('proxy path');\n\n/** allow users to ignore aborted signal errors if `reason.name === 'StaleReactionError` */\nexport const STALE_REACTION = new (class StaleReactionError extends Error {\n\tname = 'StaleReactionError';\n\tmessage = 'The reaction that called `getAbortSignal()` was re-run or destroyed';\n})();\n\nexport const ELEMENT_NODE = 1;\nexport const TEXT_NODE = 3;\nexport const COMMENT_NODE = 8;\nexport const DOCUMENT_FRAGMENT_NODE = 11;\n","/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\n/**\n * Cannot use `{@render children(...)}` if the parent component uses `let:` directives. Consider using a named snippet instead\n * @returns {never}\n */\nexport function invalid_default_snippet() {\n\tif (DEV) {\n\t\tconst error = new Error(`invalid_default_snippet\\nCannot use \\`{@render children(...)}\\` if the parent component uses \\`let:\\` directives. Consider using a named snippet instead\\nhttps://svelte.dev/e/invalid_default_snippet`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/invalid_default_snippet`);\n\t}\n}\n\n/**\n * A snippet function was passed invalid arguments. Snippets should only be instantiated via `{@render ...}`\n * @returns {never}\n */\nexport function invalid_snippet_arguments() {\n\tif (DEV) {\n\t\tconst error = new Error(`invalid_snippet_arguments\\nA snippet function was passed invalid arguments. Snippets should only be instantiated via \\`{@render ...}\\`\\nhttps://svelte.dev/e/invalid_snippet_arguments`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/invalid_snippet_arguments`);\n\t}\n}\n\n/**\n * `%name%(...)` can only be used during component initialisation\n * @param {string} name\n * @returns {never}\n */\nexport function lifecycle_outside_component(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`lifecycle_outside_component\\n\\`${name}(...)\\` can only be used during component initialisation\\nhttps://svelte.dev/e/lifecycle_outside_component`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/lifecycle_outside_component`);\n\t}\n}\n\n/**\n * Context was not set in a parent component\n * @returns {never}\n */\nexport function missing_context() {\n\tif (DEV) {\n\t\tconst error = new Error(`missing_context\\nContext was not set in a parent component\\nhttps://svelte.dev/e/missing_context`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/missing_context`);\n\t}\n}\n\n/**\n * Attempted to render a snippet without a `{@render}` block. This would cause the snippet code to be stringified instead of its content being rendered to the DOM. To fix this, change `{snippet}` to `{@render snippet()}`.\n * @returns {never}\n */\nexport function snippet_without_render_tag() {\n\tif (DEV) {\n\t\tconst error = new Error(`snippet_without_render_tag\\nAttempted to render a snippet without a \\`{@render}\\` block. This would cause the snippet code to be stringified instead of its content being rendered to the DOM. To fix this, change \\`{snippet}\\` to \\`{@render snippet()}\\`.\\nhttps://svelte.dev/e/snippet_without_render_tag`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/snippet_without_render_tag`);\n\t}\n}\n\n/**\n * `%name%` is not a store with a `subscribe` method\n * @param {string} name\n * @returns {never}\n */\nexport function store_invalid_shape(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`store_invalid_shape\\n\\`${name}\\` is not a store with a \\`subscribe\\` method\\nhttps://svelte.dev/e/store_invalid_shape`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/store_invalid_shape`);\n\t}\n}\n\n/**\n * The `this` prop on `<svelte:element>` must be a string, if defined\n * @returns {never}\n */\nexport function svelte_element_invalid_this_value() {\n\tif (DEV) {\n\t\tconst error = new Error(`svelte_element_invalid_this_value\\nThe \\`this\\` prop on \\`<svelte:element>\\` must be a string, if defined\\nhttps://svelte.dev/e/svelte_element_invalid_this_value`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/svelte_element_invalid_this_value`);\n\t}\n}","/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\nexport *  from '../shared/errors.js';\n\n/**\n * Cannot create a `$derived(...)` with an `await` expression outside of an effect tree\n * @returns {never}\n */\nexport function async_derived_orphan() {\n\tif (DEV) {\n\t\tconst error = new Error(`async_derived_orphan\\nCannot create a \\`$derived(...)\\` with an \\`await\\` expression outside of an effect tree\\nhttps://svelte.dev/e/async_derived_orphan`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/async_derived_orphan`);\n\t}\n}\n\n/**\n * Using `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\n * @returns {never}\n */\nexport function bind_invalid_checkbox_value() {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_invalid_checkbox_value\\nUsing \\`bind:value\\` together with a checkbox input is not allowed. Use \\`bind:checked\\` instead\\nhttps://svelte.dev/e/bind_invalid_checkbox_value`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_invalid_checkbox_value`);\n\t}\n}\n\n/**\n * Component %component% has an export named `%key%` that a consumer component is trying to access using `bind:%key%`, which is disallowed. Instead, use `bind:this` (e.g. `<%name% bind:this={component} />`) and then access the property on the bound component instance (e.g. `component.%key%`)\n * @param {string} component\n * @param {string} key\n * @param {string} name\n * @returns {never}\n */\nexport function bind_invalid_export(component, key, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_invalid_export\\nComponent ${component} has an export named \\`${key}\\` that a consumer component is trying to access using \\`bind:${key}\\`, which is disallowed. Instead, use \\`bind:this\\` (e.g. \\`<${name} bind:this={component} />\\`) and then access the property on the bound component instance (e.g. \\`component.${key}\\`)\\nhttps://svelte.dev/e/bind_invalid_export`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_invalid_export`);\n\t}\n}\n\n/**\n * A component is attempting to bind to a non-bindable property `%key%` belonging to %component% (i.e. `<%name% bind:%key%={...}>`). To mark a property as bindable: `let { %key% = $bindable() } = $props()`\n * @param {string} key\n * @param {string} component\n * @param {string} name\n * @returns {never}\n */\nexport function bind_not_bindable(key, component, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_not_bindable\\nA component is attempting to bind to a non-bindable property \\`${key}\\` belonging to ${component} (i.e. \\`<${name} bind:${key}={...}>\\`). To mark a property as bindable: \\`let { ${key} = $bindable() } = $props()\\`\\nhttps://svelte.dev/e/bind_not_bindable`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_not_bindable`);\n\t}\n}\n\n/**\n * Calling `%method%` on a component instance (of %component%) is no longer valid in Svelte 5\n * @param {string} method\n * @param {string} component\n * @returns {never}\n */\nexport function component_api_changed(method, component) {\n\tif (DEV) {\n\t\tconst error = new Error(`component_api_changed\\nCalling \\`${method}\\` on a component instance (of ${component}) is no longer valid in Svelte 5\\nhttps://svelte.dev/e/component_api_changed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/component_api_changed`);\n\t}\n}\n\n/**\n * Attempted to instantiate %component% with `new %name%`, which is no longer valid in Svelte 5. If this component is not under your control, set the `compatibility.componentApi` compiler option to `4` to keep it working.\n * @param {string} component\n * @param {string} name\n * @returns {never}\n */\nexport function component_api_invalid_new(component, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`component_api_invalid_new\\nAttempted to instantiate ${component} with \\`new ${name}\\`, which is no longer valid in Svelte 5. If this component is not under your control, set the \\`compatibility.componentApi\\` compiler option to \\`4\\` to keep it working.\\nhttps://svelte.dev/e/component_api_invalid_new`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/component_api_invalid_new`);\n\t}\n}\n\n/**\n * A derived value cannot reference itself recursively\n * @returns {never}\n */\nexport function derived_references_self() {\n\tif (DEV) {\n\t\tconst error = new Error(`derived_references_self\\nA derived value cannot reference itself recursively\\nhttps://svelte.dev/e/derived_references_self`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/derived_references_self`);\n\t}\n}\n\n/**\n * Keyed each block has duplicate key `%value%` at indexes %a% and %b%\n * @param {string} a\n * @param {string} b\n * @param {string | undefined | null} [value]\n * @returns {never}\n */\nexport function each_key_duplicate(a, b, value) {\n\tif (DEV) {\n\t\tconst error = new Error(`each_key_duplicate\\n${value\n\t\t\t? `Keyed each block has duplicate key \\`${value}\\` at indexes ${a} and ${b}`\n\t\t\t: `Keyed each block has duplicate key at indexes ${a} and ${b}`}\\nhttps://svelte.dev/e/each_key_duplicate`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/each_key_duplicate`);\n\t}\n}\n\n/**\n * `%rune%` cannot be used inside an effect cleanup function\n * @param {string} rune\n * @returns {never}\n */\nexport function effect_in_teardown(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_in_teardown\\n\\`${rune}\\` cannot be used inside an effect cleanup function\\nhttps://svelte.dev/e/effect_in_teardown`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_in_teardown`);\n\t}\n}\n\n/**\n * Effect cannot be created inside a `$derived` value that was not itself created inside an effect\n * @returns {never}\n */\nexport function effect_in_unowned_derived() {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_in_unowned_derived\\nEffect cannot be created inside a \\`$derived\\` value that was not itself created inside an effect\\nhttps://svelte.dev/e/effect_in_unowned_derived`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_in_unowned_derived`);\n\t}\n}\n\n/**\n * `%rune%` can only be used inside an effect (e.g. during component initialisation)\n * @param {string} rune\n * @returns {never}\n */\nexport function effect_orphan(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_orphan\\n\\`${rune}\\` can only be used inside an effect (e.g. during component initialisation)\\nhttps://svelte.dev/e/effect_orphan`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_orphan`);\n\t}\n}\n\n/**\n * `$effect.pending()` can only be called inside an effect or derived\n * @returns {never}\n */\nexport function effect_pending_outside_reaction() {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_pending_outside_reaction\\n\\`$effect.pending()\\` can only be called inside an effect or derived\\nhttps://svelte.dev/e/effect_pending_outside_reaction`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_pending_outside_reaction`);\n\t}\n}\n\n/**\n * Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state\n * @returns {never}\n */\nexport function effect_update_depth_exceeded() {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_update_depth_exceeded\\nMaximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state\\nhttps://svelte.dev/e/effect_update_depth_exceeded`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_update_depth_exceeded`);\n\t}\n}\n\n/**\n * Cannot use `flushSync` inside an effect\n * @returns {never}\n */\nexport function flush_sync_in_effect() {\n\tif (DEV) {\n\t\tconst error = new Error(`flush_sync_in_effect\\nCannot use \\`flushSync\\` inside an effect\\nhttps://svelte.dev/e/flush_sync_in_effect`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/flush_sync_in_effect`);\n\t}\n}\n\n/**\n * `getAbortSignal()` can only be called inside an effect or derived\n * @returns {never}\n */\nexport function get_abort_signal_outside_reaction() {\n\tif (DEV) {\n\t\tconst error = new Error(`get_abort_signal_outside_reaction\\n\\`getAbortSignal()\\` can only be called inside an effect or derived\\nhttps://svelte.dev/e/get_abort_signal_outside_reaction`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/get_abort_signal_outside_reaction`);\n\t}\n}\n\n/**\n * Failed to hydrate the application\n * @returns {never}\n */\nexport function hydration_failed() {\n\tif (DEV) {\n\t\tconst error = new Error(`hydration_failed\\nFailed to hydrate the application\\nhttps://svelte.dev/e/hydration_failed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/hydration_failed`);\n\t}\n}\n\n/**\n * Could not `{@render}` snippet due to the expression being `null` or `undefined`. Consider using optional chaining `{@render snippet?.()}`\n * @returns {never}\n */\nexport function invalid_snippet() {\n\tif (DEV) {\n\t\tconst error = new Error(`invalid_snippet\\nCould not \\`{@render}\\` snippet due to the expression being \\`null\\` or \\`undefined\\`. Consider using optional chaining \\`{@render snippet?.()}\\`\\nhttps://svelte.dev/e/invalid_snippet`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/invalid_snippet`);\n\t}\n}\n\n/**\n * `%name%(...)` cannot be used in runes mode\n * @param {string} name\n * @returns {never}\n */\nexport function lifecycle_legacy_only(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`lifecycle_legacy_only\\n\\`${name}(...)\\` cannot be used in runes mode\\nhttps://svelte.dev/e/lifecycle_legacy_only`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/lifecycle_legacy_only`);\n\t}\n}\n\n/**\n * Cannot do `bind:%key%={undefined}` when `%key%` has a fallback value\n * @param {string} key\n * @returns {never}\n */\nexport function props_invalid_value(key) {\n\tif (DEV) {\n\t\tconst error = new Error(`props_invalid_value\\nCannot do \\`bind:${key}={undefined}\\` when \\`${key}\\` has a fallback value\\nhttps://svelte.dev/e/props_invalid_value`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/props_invalid_value`);\n\t}\n}\n\n/**\n * Rest element properties of `$props()` such as `%property%` are readonly\n * @param {string} property\n * @returns {never}\n */\nexport function props_rest_readonly(property) {\n\tif (DEV) {\n\t\tconst error = new Error(`props_rest_readonly\\nRest element properties of \\`$props()\\` such as \\`${property}\\` are readonly\\nhttps://svelte.dev/e/props_rest_readonly`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/props_rest_readonly`);\n\t}\n}\n\n/**\n * The `%rune%` rune is only available inside `.svelte` and `.svelte.js/ts` files\n * @param {string} rune\n * @returns {never}\n */\nexport function rune_outside_svelte(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`rune_outside_svelte\\nThe \\`${rune}\\` rune is only available inside \\`.svelte\\` and \\`.svelte.js/ts\\` files\\nhttps://svelte.dev/e/rune_outside_svelte`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/rune_outside_svelte`);\n\t}\n}\n\n/**\n * `setContext` must be called when a component first initializes, not in a subsequent effect or after an `await` expression\n * @returns {never}\n */\nexport function set_context_after_init() {\n\tif (DEV) {\n\t\tconst error = new Error(`set_context_after_init\\n\\`setContext\\` must be called when a component first initializes, not in a subsequent effect or after an \\`await\\` expression\\nhttps://svelte.dev/e/set_context_after_init`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/set_context_after_init`);\n\t}\n}\n\n/**\n * Property descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\n * @returns {never}\n */\nexport function state_descriptors_fixed() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_descriptors_fixed\\nProperty descriptors defined on \\`$state\\` objects must contain \\`value\\` and always be \\`enumerable\\`, \\`configurable\\` and \\`writable\\`.\\nhttps://svelte.dev/e/state_descriptors_fixed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_descriptors_fixed`);\n\t}\n}\n\n/**\n * Cannot set prototype of `$state` object\n * @returns {never}\n */\nexport function state_prototype_fixed() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_prototype_fixed\\nCannot set prototype of \\`$state\\` object\\nhttps://svelte.dev/e/state_prototype_fixed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_prototype_fixed`);\n\t}\n}\n\n/**\n * Updating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\n * @returns {never}\n */\nexport function state_unsafe_mutation() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_unsafe_mutation\\nUpdating state inside \\`$derived(...)\\`, \\`$inspect(...)\\` or a template expression is forbidden. If the value should not be reactive, declare it without \\`$state\\`\\nhttps://svelte.dev/e/state_unsafe_mutation`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_unsafe_mutation`);\n\t}\n}\n\n/**\n * A `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\n * @returns {never}\n */\nexport function svelte_boundary_reset_onerror() {\n\tif (DEV) {\n\t\tconst error = new Error(`svelte_boundary_reset_onerror\\nA \\`<svelte:boundary>\\` \\`reset\\` function cannot be called while an error is still being handled\\nhttps://svelte.dev/e/svelte_boundary_reset_onerror`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/svelte_boundary_reset_onerror`);\n\t}\n}","/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\nvar bold = 'font-weight: bold';\nvar normal = 'font-weight: normal';\n\n/**\n * Assignment to `%property%` property (%location%) will evaluate to the right-hand side, not the value of `%property%` following the assignment. This may result in unexpected behaviour.\n * @param {string} property\n * @param {string} location\n */\nexport function assignment_value_stale(property, location) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] assignment_value_stale\\n%cAssignment to \\`${property}\\` property (${location}) will evaluate to the right-hand side, not the value of \\`${property}\\` following the assignment. This may result in unexpected behaviour.\\nhttps://svelte.dev/e/assignment_value_stale`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/assignment_value_stale`);\n\t}\n}\n\n/**\n * Detected reactivity loss when reading `%name%`. This happens when state is read in an async function after an earlier `await`\n * @param {string} name\n */\nexport function await_reactivity_loss(name) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] await_reactivity_loss\\n%cDetected reactivity loss when reading \\`${name}\\`. This happens when state is read in an async function after an earlier \\`await\\`\\nhttps://svelte.dev/e/await_reactivity_loss`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/await_reactivity_loss`);\n\t}\n}\n\n/**\n * An async derived, `%name%` (%location%) was not read immediately after it resolved. This often indicates an unnecessary waterfall, which can slow down your app\n * @param {string} name\n * @param {string} location\n */\nexport function await_waterfall(name, location) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] await_waterfall\\n%cAn async derived, \\`${name}\\` (${location}) was not read immediately after it resolved. This often indicates an unnecessary waterfall, which can slow down your app\\nhttps://svelte.dev/e/await_waterfall`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/await_waterfall`);\n\t}\n}\n\n/**\n * `%binding%` (%location%) is binding to a non-reactive property\n * @param {string} binding\n * @param {string | undefined | null} [location]\n */\nexport function binding_property_non_reactive(binding, location) {\n\tif (DEV) {\n\t\tconsole.warn(\n\t\t\t`%c[svelte] binding_property_non_reactive\\n%c${location\n\t\t\t\t? `\\`${binding}\\` (${location}) is binding to a non-reactive property`\n\t\t\t\t: `\\`${binding}\\` is binding to a non-reactive property`}\\nhttps://svelte.dev/e/binding_property_non_reactive`,\n\t\t\tbold,\n\t\t\tnormal\n\t\t);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/binding_property_non_reactive`);\n\t}\n}\n\n/**\n * Your `console.%method%` contained `$state` proxies. Consider using `$inspect(...)` or `$state.snapshot(...)` instead\n * @param {string} method\n */\nexport function console_log_state(method) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] console_log_state\\n%cYour \\`console.${method}\\` contained \\`$state\\` proxies. Consider using \\`$inspect(...)\\` or \\`$state.snapshot(...)\\` instead\\nhttps://svelte.dev/e/console_log_state`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/console_log_state`);\n\t}\n}\n\n/**\n * %handler% should be a function. Did you mean to %suggestion%?\n * @param {string} handler\n * @param {string} suggestion\n */\nexport function event_handler_invalid(handler, suggestion) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] event_handler_invalid\\n%c${handler} should be a function. Did you mean to ${suggestion}?\\nhttps://svelte.dev/e/event_handler_invalid`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/event_handler_invalid`);\n\t}\n}\n\n/**\n * The `%attribute%` attribute on `%html%` changed its value between server and client renders. The client value, `%value%`, will be ignored in favour of the server value\n * @param {string} attribute\n * @param {string} html\n * @param {string} value\n */\nexport function hydration_attribute_changed(attribute, html, value) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] hydration_attribute_changed\\n%cThe \\`${attribute}\\` attribute on \\`${html}\\` changed its value between server and client renders. The client value, \\`${value}\\`, will be ignored in favour of the server value\\nhttps://svelte.dev/e/hydration_attribute_changed`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/hydration_attribute_changed`);\n\t}\n}\n\n/**\n * The value of an `{@html ...}` block %location% changed between server and client renders. The client value will be ignored in favour of the server value\n * @param {string | undefined | null} [location]\n */\nexport function hydration_html_changed(location) {\n\tif (DEV) {\n\t\tconsole.warn(\n\t\t\t`%c[svelte] hydration_html_changed\\n%c${location\n\t\t\t\t? `The value of an \\`{@html ...}\\` block ${location} changed between server and client renders. The client value will be ignored in favour of the server value`\n\t\t\t\t: 'The value of an `{@html ...}` block changed between server and client renders. The client value will be ignored in favour of the server value'}\\nhttps://svelte.dev/e/hydration_html_changed`,\n\t\t\tbold,\n\t\t\tnormal\n\t\t);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/hydration_html_changed`);\n\t}\n}\n\n/**\n * Hydration failed because the initial UI does not match what was rendered on the server. The error occurred near %location%\n * @param {string | undefined | null} [location]\n */\nexport function hydration_mismatch(location) {\n\tif (DEV) {\n\t\tconsole.warn(\n\t\t\t`%c[svelte] hydration_mismatch\\n%c${location\n\t\t\t\t? `Hydration failed because the initial UI does not match what was rendered on the server. The error occurred near ${location}`\n\t\t\t\t: 'Hydration failed because the initial UI does not match what was rendered on the server'}\\nhttps://svelte.dev/e/hydration_mismatch`,\n\t\t\tbold,\n\t\t\tnormal\n\t\t);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/hydration_mismatch`);\n\t}\n}\n\n/**\n * The `render` function passed to `createRawSnippet` should return HTML for a single element\n */\nexport function invalid_raw_snippet_render() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] invalid_raw_snippet_render\\n%cThe \\`render\\` function passed to \\`createRawSnippet\\` should return HTML for a single element\\nhttps://svelte.dev/e/invalid_raw_snippet_render`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/invalid_raw_snippet_render`);\n\t}\n}\n\n/**\n * Detected a migrated `$:` reactive block in `%filename%` that both accesses and updates the same reactive value. This may cause recursive updates when converted to an `$effect`.\n * @param {string} filename\n */\nexport function legacy_recursive_reactive_block(filename) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] legacy_recursive_reactive_block\\n%cDetected a migrated \\`$:\\` reactive block in \\`${filename}\\` that both accesses and updates the same reactive value. This may cause recursive updates when converted to an \\`$effect\\`.\\nhttps://svelte.dev/e/legacy_recursive_reactive_block`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/legacy_recursive_reactive_block`);\n\t}\n}\n\n/**\n * Tried to unmount a component that was not mounted\n */\nexport function lifecycle_double_unmount() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] lifecycle_double_unmount\\n%cTried to unmount a component that was not mounted\\nhttps://svelte.dev/e/lifecycle_double_unmount`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/lifecycle_double_unmount`);\n\t}\n}\n\n/**\n * %parent% passed property `%prop%` to %child% with `bind:`, but its parent component %owner% did not declare `%prop%` as a binding. Consider creating a binding between %owner% and %parent% (e.g. `bind:%prop%={...}` instead of `%prop%={...}`)\n * @param {string} parent\n * @param {string} prop\n * @param {string} child\n * @param {string} owner\n */\nexport function ownership_invalid_binding(parent, prop, child, owner) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] ownership_invalid_binding\\n%c${parent} passed property \\`${prop}\\` to ${child} with \\`bind:\\`, but its parent component ${owner} did not declare \\`${prop}\\` as a binding. Consider creating a binding between ${owner} and ${parent} (e.g. \\`bind:${prop}={...}\\` instead of \\`${prop}={...}\\`)\\nhttps://svelte.dev/e/ownership_invalid_binding`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/ownership_invalid_binding`);\n\t}\n}\n\n/**\n * Mutating unbound props (`%name%`, at %location%) is strongly discouraged. Consider using `bind:%prop%={...}` in %parent% (or using a callback) instead\n * @param {string} name\n * @param {string} location\n * @param {string} prop\n * @param {string} parent\n */\nexport function ownership_invalid_mutation(name, location, prop, parent) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] ownership_invalid_mutation\\n%cMutating unbound props (\\`${name}\\`, at ${location}) is strongly discouraged. Consider using \\`bind:${prop}={...}\\` in ${parent} (or using a callback) instead\\nhttps://svelte.dev/e/ownership_invalid_mutation`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/ownership_invalid_mutation`);\n\t}\n}\n\n/**\n * The `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\n */\nexport function select_multiple_invalid_value() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] select_multiple_invalid_value\\n%cThe \\`value\\` property of a \\`<select multiple>\\` element should be an array, but it received a non-array value. The selection will be kept as is.\\nhttps://svelte.dev/e/select_multiple_invalid_value`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/select_multiple_invalid_value`);\n\t}\n}\n\n/**\n * Reactive `$state(...)` proxies and the values they proxy have different identities. Because of this, comparisons with `%operator%` will produce unexpected results\n * @param {string} operator\n */\nexport function state_proxy_equality_mismatch(operator) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] state_proxy_equality_mismatch\\n%cReactive \\`$state(...)\\` proxies and the values they proxy have different identities. Because of this, comparisons with \\`${operator}\\` will produce unexpected results\\nhttps://svelte.dev/e/state_proxy_equality_mismatch`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/state_proxy_equality_mismatch`);\n\t}\n}\n\n/**\n * Tried to unmount a state proxy, rather than a component\n */\nexport function state_proxy_unmount() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] state_proxy_unmount\\n%cTried to unmount a state proxy, rather than a component\\nhttps://svelte.dev/e/state_proxy_unmount`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/state_proxy_unmount`);\n\t}\n}\n\n/**\n * A `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\n */\nexport function svelte_boundary_reset_noop() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] svelte_boundary_reset_noop\\n%cA \\`<svelte:boundary>\\` \\`reset\\` function only resets the boundary the first time it is called\\nhttps://svelte.dev/e/svelte_boundary_reset_noop`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/svelte_boundary_reset_noop`);\n\t}\n}\n\n/**\n * The `slide` transition does not work correctly for elements with `display: %value%`\n * @param {string} value\n */\nexport function transition_slide_display(value) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] transition_slide_display\\n%cThe \\`slide\\` transition does not work correctly for elements with \\`display: ${value}\\`\\nhttps://svelte.dev/e/transition_slide_display`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/transition_slide_display`);\n\t}\n}","/** @import { TemplateNode } from '#client' */\n\nimport { COMMENT_NODE } from '#client/constants';\nimport {\n\tHYDRATION_END,\n\tHYDRATION_ERROR,\n\tHYDRATION_START,\n\tHYDRATION_START_ELSE\n} from '../../../constants.js';\nimport * as w from '../warnings.js';\nimport { get_next_sibling } from './operations.js';\n\n/**\n * Use this variable to guard everything related to hydration code so it can be treeshaken out\n * if the user doesn't use the `hydrate` method and these code paths are therefore not needed.\n */\nexport let hydrating = false;\n\n/** @param {boolean} value */\nexport function set_hydrating(value) {\n\thydrating = value;\n}\n\n/**\n * The node that is currently being hydrated. This starts out as the first node inside the opening\n * <!--[--> comment, and updates each time a component calls `$.child(...)` or `$.sibling(...)`.\n * When entering a block (e.g. `{#if ...}`), `hydrate_node` is the block opening comment; by the\n * time we leave the block it is the closing comment, which serves as the block's anchor.\n * @type {TemplateNode}\n */\nexport let hydrate_node;\n\n/** @param {TemplateNode} node */\nexport function set_hydrate_node(node) {\n\tif (node === null) {\n\t\tw.hydration_mismatch();\n\t\tthrow HYDRATION_ERROR;\n\t}\n\n\treturn (hydrate_node = node);\n}\n\nexport function hydrate_next() {\n\treturn set_hydrate_node(/** @type {TemplateNode} */ (get_next_sibling(hydrate_node)));\n}\n\n/** @param {TemplateNode} node */\nexport function reset(node) {\n\tif (!hydrating) return;\n\n\t// If the node has remaining siblings, something has gone wrong\n\tif (get_next_sibling(hydrate_node) !== null) {\n\t\tw.hydration_mismatch();\n\t\tthrow HYDRATION_ERROR;\n\t}\n\n\thydrate_node = node;\n}\n\n/**\n * @param {HTMLTemplateElement} template\n */\nexport function hydrate_template(template) {\n\tif (hydrating) {\n\t\t// @ts-expect-error TemplateNode doesn't include DocumentFragment, but it's actually fine\n\t\thydrate_node = template.content;\n\t}\n}\n\nexport function next(count = 1) {\n\tif (hydrating) {\n\t\tvar i = count;\n\t\tvar node = hydrate_node;\n\n\t\twhile (i--) {\n\t\t\tnode = /** @type {TemplateNode} */ (get_next_sibling(node));\n\t\t}\n\n\t\thydrate_node = node;\n\t}\n}\n\n/**\n * Skips or removes (depending on {@link remove}) all nodes starting at `hydrate_node` up until the next hydration end comment\n * @param {boolean} remove\n */\nexport function skip_nodes(remove = true) {\n\tvar depth = 0;\n\tvar node = hydrate_node;\n\n\twhile (true) {\n\t\tif (node.nodeType === COMMENT_NODE) {\n\t\t\tvar data = /** @type {Comment} */ (node).data;\n\n\t\t\tif (data === HYDRATION_END) {\n\t\t\t\tif (depth === 0) return node;\n\t\t\t\tdepth -= 1;\n\t\t\t} else if (data === HYDRATION_START || data === HYDRATION_START_ELSE) {\n\t\t\t\tdepth += 1;\n\t\t\t}\n\t\t}\n\n\t\tvar next = /** @type {TemplateNode} */ (get_next_sibling(node));\n\t\tif (remove) node.remove();\n\t\tnode = next;\n\t}\n}\n\n/**\n *\n * @param {TemplateNode} node\n */\nexport function read_hydration_instruction(node) {\n\tif (!node || node.nodeType !== COMMENT_NODE) {\n\t\tw.hydration_mismatch();\n\t\tthrow HYDRATION_ERROR;\n\t}\n\n\treturn /** @type {Comment} */ (node).data;\n}\n","/** @import { Equals } from '#client' */\n\n/** @type {Equals} */\nexport function equals(value) {\n\treturn value === this.v;\n}\n\n/**\n * @param {unknown} a\n * @param {unknown} b\n * @returns {boolean}\n */\nexport function safe_not_equal(a, b) {\n\treturn a != a\n\t\t? b == b\n\t\t: a !== b || (a !== null && typeof a === 'object') || typeof a === 'function';\n}\n\n/**\n * @param {unknown} a\n * @param {unknown} b\n * @returns {boolean}\n */\nexport function not_equal(a, b) {\n\treturn a !== b;\n}\n\n/** @type {Equals} */\nexport function safe_equals(value) {\n\treturn !safe_not_equal(value, this.v);\n}\n","export let async_mode_flag = false;\nexport let legacy_mode_flag = false;\nexport let tracing_mode_flag = false;\n\nexport function enable_async_mode_flag() {\n\tasync_mode_flag = true;\n}\n\n/** ONLY USE THIS DURING TESTING */\nexport function disable_async_mode_flag() {\n\tasync_mode_flag = false;\n}\n\nexport function enable_legacy_mode_flag() {\n\tlegacy_mode_flag = true;\n}\n\nexport function enable_tracing_mode_flag() {\n\ttracing_mode_flag = true;\n}\n","/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\nvar bold = 'font-weight: bold';\nvar normal = 'font-weight: normal';\n\n/**\n * `<svelte:element this=\"%tag%\">` is a void element  it cannot have content\n * @param {string} tag\n */\nexport function dynamic_void_element_content(tag) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] dynamic_void_element_content\\n%c\\`<svelte:element this=\"${tag}\">\\` is a void element  it cannot have content\\nhttps://svelte.dev/e/dynamic_void_element_content`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/dynamic_void_element_content`);\n\t}\n}\n\n/**\n * The following properties cannot be cloned with `$state.snapshot`  the return value contains the originals:\n * \n * %properties%\n * @param {string | undefined | null} [properties]\n */\nexport function state_snapshot_uncloneable(properties) {\n\tif (DEV) {\n\t\tconsole.warn(\n\t\t\t`%c[svelte] state_snapshot_uncloneable\\n%c${properties\n\t\t\t\t? `The following properties cannot be cloned with \\`$state.snapshot\\`  the return value contains the originals:\n\n${properties}`\n\t\t\t\t: 'Value cannot be cloned with `$state.snapshot`  the original value was returned'}\\nhttps://svelte.dev/e/state_snapshot_uncloneable`,\n\t\t\tbold,\n\t\t\tnormal\n\t\t);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/state_snapshot_uncloneable`);\n\t}\n}","/** @import { Snapshot } from './types' */\nimport { DEV } from 'esm-env';\nimport * as w from './warnings.js';\nimport { get_prototype_of, is_array, object_prototype } from './utils.js';\n\n/**\n * In dev, we keep track of which properties could not be cloned. In prod\n * we don't bother, but we keep a dummy array around so that the\n * signature stays the same\n * @type {string[]}\n */\nconst empty = [];\n\n/**\n * @template T\n * @param {T} value\n * @param {boolean} [skip_warning]\n * @param {boolean} [no_tojson]\n * @returns {Snapshot<T>}\n */\nexport function snapshot(value, skip_warning = false, no_tojson = false) {\n\tif (DEV && !skip_warning) {\n\t\t/** @type {string[]} */\n\t\tconst paths = [];\n\n\t\tconst copy = clone(value, new Map(), '', paths, null, no_tojson);\n\t\tif (paths.length === 1 && paths[0] === '') {\n\t\t\t// value could not be cloned\n\t\t\tw.state_snapshot_uncloneable();\n\t\t} else if (paths.length > 0) {\n\t\t\t// some properties could not be cloned\n\t\t\tconst slice = paths.length > 10 ? paths.slice(0, 7) : paths.slice(0, 10);\n\t\t\tconst excess = paths.length - slice.length;\n\n\t\t\tlet uncloned = slice.map((path) => `- <value>${path}`).join('\\n');\n\t\t\tif (excess > 0) uncloned += `\\n- ...and ${excess} more`;\n\n\t\t\tw.state_snapshot_uncloneable(uncloned);\n\t\t}\n\n\t\treturn copy;\n\t}\n\n\treturn clone(value, new Map(), '', empty, null, no_tojson);\n}\n\n/**\n * @template T\n * @param {T} value\n * @param {Map<T, Snapshot<T>>} cloned\n * @param {string} path\n * @param {string[]} paths\n * @param {null | T} [original] The original value, if `value` was produced from a `toJSON` call\n * @param {boolean} [no_tojson]\n * @returns {Snapshot<T>}\n */\nfunction clone(value, cloned, path, paths, original = null, no_tojson = false) {\n\tif (typeof value === 'object' && value !== null) {\n\t\tvar unwrapped = cloned.get(value);\n\t\tif (unwrapped !== undefined) return unwrapped;\n\n\t\tif (value instanceof Map) return /** @type {Snapshot<T>} */ (new Map(value));\n\t\tif (value instanceof Set) return /** @type {Snapshot<T>} */ (new Set(value));\n\n\t\tif (is_array(value)) {\n\t\t\tvar copy = /** @type {Snapshot<any>} */ (Array(value.length));\n\t\t\tcloned.set(value, copy);\n\n\t\t\tif (original !== null) {\n\t\t\t\tcloned.set(original, copy);\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < value.length; i += 1) {\n\t\t\t\tvar element = value[i];\n\t\t\t\tif (i in value) {\n\t\t\t\t\tcopy[i] = clone(element, cloned, DEV ? `${path}[${i}]` : path, paths, null, no_tojson);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn copy;\n\t\t}\n\n\t\tif (get_prototype_of(value) === object_prototype) {\n\t\t\t/** @type {Snapshot<any>} */\n\t\t\tcopy = {};\n\t\t\tcloned.set(value, copy);\n\n\t\t\tif (original !== null) {\n\t\t\t\tcloned.set(original, copy);\n\t\t\t}\n\n\t\t\tfor (var key in value) {\n\t\t\t\tcopy[key] = clone(\n\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\tvalue[key],\n\t\t\t\t\tcloned,\n\t\t\t\t\tDEV ? `${path}.${key}` : path,\n\t\t\t\t\tpaths,\n\t\t\t\t\tnull,\n\t\t\t\t\tno_tojson\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn copy;\n\t\t}\n\n\t\tif (value instanceof Date) {\n\t\t\treturn /** @type {Snapshot<T>} */ (structuredClone(value));\n\t\t}\n\n\t\tif (typeof (/** @type {T & { toJSON?: any } } */ (value).toJSON) === 'function' && !no_tojson) {\n\t\t\treturn clone(\n\t\t\t\t/** @type {T & { toJSON(): any } } */ (value).toJSON(),\n\t\t\t\tcloned,\n\t\t\t\tDEV ? `${path}.toJSON()` : path,\n\t\t\t\tpaths,\n\t\t\t\t// Associate the instance with the toJSON clone\n\t\t\t\tvalue\n\t\t\t);\n\t\t}\n\t}\n\n\tif (value instanceof EventTarget) {\n\t\t// can't be cloned\n\t\treturn /** @type {Snapshot<T>} */ (value);\n\t}\n\n\ttry {\n\t\treturn /** @type {Snapshot<T>} */ (structuredClone(value));\n\t} catch (e) {\n\t\tif (DEV) {\n\t\t\tpaths.push(path);\n\t\t}\n\n\t\treturn /** @type {Snapshot<T>} */ (value);\n\t}\n}\n","/** @import { Derived, Reaction, Value } from '#client' */\nimport { UNINITIALIZED } from '../../../constants.js';\nimport { snapshot } from '../../shared/clone.js';\nimport { define_property } from '../../shared/utils.js';\nimport { DERIVED, ASYNC, PROXY_PATH_SYMBOL, STATE_SYMBOL } from '#client/constants';\nimport { effect_tracking } from '../reactivity/effects.js';\nimport { active_reaction, untrack } from '../runtime.js';\n\n/**\n * @typedef {{\n *   traces: Error[];\n * }} TraceEntry\n */\n\n/** @type {{ reaction: Reaction | null, entries: Map<Value, TraceEntry> } | null} */\nexport let tracing_expressions = null;\n\n/**\n * @param {Value} signal\n * @param {TraceEntry} [entry]\n */\nfunction log_entry(signal, entry) {\n\tconst value = signal.v;\n\n\tif (value === UNINITIALIZED) {\n\t\treturn;\n\t}\n\n\tconst type = get_type(signal);\n\tconst current_reaction = /** @type {Reaction} */ (active_reaction);\n\tconst dirty = signal.wv > current_reaction.wv || current_reaction.wv === 0;\n\tconst style = dirty\n\t\t? 'color: CornflowerBlue; font-weight: bold'\n\t\t: 'color: grey; font-weight: normal';\n\n\t// eslint-disable-next-line no-console\n\tconsole.groupCollapsed(\n\t\tsignal.label ? `%c${type}%c ${signal.label}` : `%c${type}%c`,\n\t\tstyle,\n\t\tdirty ? 'font-weight: normal' : style,\n\t\ttypeof value === 'object' && value !== null && STATE_SYMBOL in value\n\t\t\t? snapshot(value, true)\n\t\t\t: value\n\t);\n\n\tif (type === '$derived') {\n\t\tconst deps = new Set(/** @type {Derived} */ (signal).deps);\n\t\tfor (const dep of deps) {\n\t\t\tlog_entry(dep);\n\t\t}\n\t}\n\n\tif (signal.created) {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.log(signal.created);\n\t}\n\n\tif (dirty && signal.updated) {\n\t\tfor (const updated of signal.updated.values()) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log(updated.error);\n\t\t}\n\t}\n\n\tif (entry) {\n\t\tfor (var trace of entry.traces) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log(trace);\n\t\t}\n\t}\n\n\t// eslint-disable-next-line no-console\n\tconsole.groupEnd();\n}\n\n/**\n * @param {Value} signal\n * @returns {'$state' | '$derived' | 'store'}\n */\nfunction get_type(signal) {\n\tif ((signal.f & (DERIVED | ASYNC)) !== 0) return '$derived';\n\treturn signal.label?.startsWith('$') ? 'store' : '$state';\n}\n\n/**\n * @template T\n * @param {() => string} label\n * @param {() => T} fn\n */\nexport function trace(label, fn) {\n\tvar previously_tracing_expressions = tracing_expressions;\n\n\ttry {\n\t\ttracing_expressions = { entries: new Map(), reaction: active_reaction };\n\n\t\tvar start = performance.now();\n\t\tvar value = fn();\n\t\tvar time = (performance.now() - start).toFixed(2);\n\n\t\tvar prefix = untrack(label);\n\n\t\tif (!effect_tracking()) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log(`${prefix} %cran outside of an effect (${time}ms)`, 'color: grey');\n\t\t} else if (tracing_expressions.entries.size === 0) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log(`${prefix} %cno reactive dependencies (${time}ms)`, 'color: grey');\n\t\t} else {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.group(`${prefix} %c(${time}ms)`, 'color: grey');\n\n\t\t\tvar entries = tracing_expressions.entries;\n\n\t\t\tuntrack(() => {\n\t\t\t\tfor (const [signal, traces] of entries) {\n\t\t\t\t\tlog_entry(signal, traces);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\ttracing_expressions = null;\n\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.groupEnd();\n\t\t}\n\n\t\treturn value;\n\t} finally {\n\t\ttracing_expressions = previously_tracing_expressions;\n\t}\n}\n\n/**\n * @param {string} label\n * @returns {Error & { stack: string } | null}\n */\nexport function get_stack(label) {\n\t// @ts-ignore stackTraceLimit doesn't exist everywhere\n\tconst limit = Error.stackTraceLimit;\n\n\t// @ts-ignore\n\tError.stackTraceLimit = Infinity;\n\tlet error = Error();\n\n\t// @ts-ignore\n\tError.stackTraceLimit = limit;\n\n\tconst stack = error.stack;\n\n\tif (!stack) return null;\n\n\tconst lines = stack.split('\\n');\n\tconst new_lines = ['\\n'];\n\n\tfor (let i = 0; i < lines.length; i++) {\n\t\tconst line = lines[i];\n\t\tconst posixified = line.replaceAll('\\\\', '/');\n\n\t\tif (line === 'Error') {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (line.includes('validate_each_keys')) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (posixified.includes('svelte/src/internal') || posixified.includes('node_modules/.vite')) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tnew_lines.push(line);\n\t}\n\n\tif (new_lines.length === 1) {\n\t\treturn null;\n\t}\n\n\tdefine_property(error, 'stack', {\n\t\tvalue: new_lines.join('\\n')\n\t});\n\n\tdefine_property(error, 'name', {\n\t\t// 'Error' suffix is required for stack traces to be rendered properly\n\t\tvalue: `${label}Error`\n\t});\n\n\treturn /** @type {Error & { stack: string }} */ (error);\n}\n\n/**\n * @param {Value} source\n * @param {string} label\n */\nexport function tag(source, label) {\n\tsource.label = label;\n\ttag_proxy(source.v, label);\n\n\treturn source;\n}\n\n/**\n * @param {unknown} value\n * @param {string} label\n */\nexport function tag_proxy(value, label) {\n\t// @ts-expect-error\n\tvalue?.[PROXY_PATH_SYMBOL]?.(label);\n\treturn value;\n}\n\n/**\n * @param {unknown} value\n */\nexport function label(value) {\n\tif (typeof value === 'symbol') return `Symbol(${value.description})`;\n\tif (typeof value === 'function') return '<function>';\n\tif (typeof value === 'object' && value) return '<object>';\n\treturn String(value);\n}\n","/** @import { ComponentContext, DevStackEntry, Effect } from '#client' */\nimport { DEV } from 'esm-env';\nimport * as e from './errors.js';\nimport { active_effect, active_reaction } from './runtime.js';\nimport { create_user_effect } from './reactivity/effects.js';\nimport { async_mode_flag, legacy_mode_flag } from '../flags/index.js';\nimport { FILENAME } from '../../constants.js';\nimport { BRANCH_EFFECT, EFFECT_RAN } from './constants.js';\n\n/** @type {ComponentContext | null} */\nexport let component_context = null;\n\n/** @param {ComponentContext | null} context */\nexport function set_component_context(context) {\n\tcomponent_context = context;\n}\n\n/** @type {DevStackEntry | null} */\nexport let dev_stack = null;\n\n/** @param {DevStackEntry | null} stack */\nexport function set_dev_stack(stack) {\n\tdev_stack = stack;\n}\n\n/**\n * Execute a callback with a new dev stack entry\n * @param {() => any} callback - Function to execute\n * @param {DevStackEntry['type']} type - Type of block/component\n * @param {any} component - Component function\n * @param {number} line - Line number\n * @param {number} column - Column number\n * @param {Record<string, any>} [additional] - Any additional properties to add to the dev stack entry\n * @returns {any}\n */\nexport function add_svelte_meta(callback, type, component, line, column, additional) {\n\tconst parent = dev_stack;\n\n\tdev_stack = {\n\t\ttype,\n\t\tfile: component[FILENAME],\n\t\tline,\n\t\tcolumn,\n\t\tparent,\n\t\t...additional\n\t};\n\n\ttry {\n\t\treturn callback();\n\t} finally {\n\t\tdev_stack = parent;\n\t}\n}\n\n/**\n * The current component function. Different from current component context:\n * ```html\n * <!-- App.svelte -->\n * <Foo>\n *   <Bar /> <!-- context == Foo.svelte, function == App.svelte -->\n * </Foo>\n * ```\n * @type {ComponentContext['function']}\n */\nexport let dev_current_component_function = null;\n\n/** @param {ComponentContext['function']} fn */\nexport function set_dev_current_component_function(fn) {\n\tdev_current_component_function = fn;\n}\n\n/**\n * Returns a `[get, set]` pair of functions for working with context in a type-safe way.\n *\n * `get` will throw an error if no parent component called `set`.\n *\n * @template T\n * @returns {[() => T, (context: T) => T]}\n * @since 5.40.0\n */\nexport function createContext() {\n\tconst key = {};\n\n\treturn [\n\t\t() => {\n\t\t\tif (!hasContext(key)) {\n\t\t\t\te.missing_context();\n\t\t\t}\n\n\t\t\treturn getContext(key);\n\t\t},\n\t\t(context) => setContext(key, context)\n\t];\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * [`createContext`](https://svelte.dev/docs/svelte/svelte#createContext) is a type-safe alternative.\n *\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\tconst context_map = get_or_init_context_map('getContext');\n\tconst result = /** @type {T} */ (context_map.get(key));\n\treturn result;\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * [`createContext`](https://svelte.dev/docs/svelte/svelte#createContext) is a type-safe alternative.\n *\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tconst context_map = get_or_init_context_map('setContext');\n\n\tif (async_mode_flag) {\n\t\tvar flags = /** @type {Effect} */ (active_effect).f;\n\t\tvar valid = !active_reaction && (flags & BRANCH_EFFECT) !== 0 && (flags & EFFECT_RAN) === 0;\n\n\t\tif (!valid) {\n\t\t\te.set_context_after_init();\n\t\t}\n\t}\n\n\tcontext_map.set(key, context);\n\treturn context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\tconst context_map = get_or_init_context_map('hasContext');\n\treturn context_map.has(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\tconst context_map = get_or_init_context_map('getAllContexts');\n\treturn /** @type {T} */ (context_map);\n}\n\n/**\n * @param {Record<string, unknown>} props\n * @param {any} runes\n * @param {Function} [fn]\n * @returns {void}\n */\nexport function push(props, runes = false, fn) {\n\tcomponent_context = {\n\t\tp: component_context,\n\t\tc: null,\n\t\te: null,\n\t\ts: props,\n\t\tx: null,\n\t\tl: legacy_mode_flag && !runes ? { s: null, u: null, $: [] } : null\n\t};\n\n\tif (DEV) {\n\t\t// component function\n\t\tcomponent_context.function = fn;\n\t\tdev_current_component_function = fn;\n\t}\n}\n\n/**\n * @template {Record<string, any>} T\n * @param {T} [component]\n * @returns {T}\n */\nexport function pop(component) {\n\tvar context = /** @type {ComponentContext} */ (component_context);\n\tvar effects = context.e;\n\n\tif (effects !== null) {\n\t\tcontext.e = null;\n\n\t\tfor (var fn of effects) {\n\t\t\tcreate_user_effect(fn);\n\t\t}\n\t}\n\n\tif (component !== undefined) {\n\t\tcontext.x = component;\n\t}\n\n\tcomponent_context = context.p;\n\n\tif (DEV) {\n\t\tdev_current_component_function = component_context?.function ?? null;\n\t}\n\n\treturn component ?? /** @type {T} */ ({});\n}\n\n/** @returns {boolean} */\nexport function is_runes() {\n\treturn !legacy_mode_flag || (component_context !== null && component_context.l === null);\n}\n\n/**\n * @param {string} name\n * @returns {Map<unknown, unknown>}\n */\nfunction get_or_init_context_map(name) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component(name);\n\t}\n\n\treturn (component_context.c ??= new Map(get_parent_context(component_context) || undefined));\n}\n\n/**\n * @param {ComponentContext} component_context\n * @returns {Map<unknown, unknown> | null}\n */\nfunction get_parent_context(component_context) {\n\tlet parent = component_context.p;\n\twhile (parent !== null) {\n\t\tconst context_map = parent.c;\n\t\tif (context_map !== null) {\n\t\t\treturn context_map;\n\t\t}\n\t\tparent = parent.p;\n\t}\n\treturn null;\n}\n","import { run_all } from '../../shared/utils.js';\nimport { is_flushing_sync } from '../reactivity/batch.js';\n\n/** @type {Array<() => void>} */\nlet micro_tasks = [];\n\nfunction run_micro_tasks() {\n\tvar tasks = micro_tasks;\n\tmicro_tasks = [];\n\trun_all(tasks);\n}\n\n/**\n * @param {() => void} fn\n */\nexport function queue_micro_task(fn) {\n\tif (micro_tasks.length === 0 && !is_flushing_sync) {\n\t\tvar tasks = micro_tasks;\n\t\tqueueMicrotask(() => {\n\t\t\t// If this is false, a flushSync happened in the meantime. Do _not_ run new scheduled microtasks in that case\n\t\t\t// as the ordering of microtasks would be broken at that point - consider this case:\n\t\t\t// - queue_micro_task schedules microtask A to flush task X\n\t\t\t// - synchronously after, flushSync runs, processing task X\n\t\t\t// - synchronously after, some other microtask B is scheduled, but not through queue_micro_task but for example a Promise.resolve() in user code\n\t\t\t// - synchronously after, queue_micro_task schedules microtask C to flush task Y\n\t\t\t// - one tick later, microtask A now resolves, flushing task Y before microtask B, which is incorrect\n\t\t\t// This if check prevents that race condition (that realistically will only happen in tests)\n\t\t\tif (tasks === micro_tasks) run_micro_tasks();\n\t\t});\n\t}\n\n\tmicro_tasks.push(fn);\n}\n\n/**\n * Synchronously run any queued tasks.\n */\nexport function flush_tasks() {\n\twhile (micro_tasks.length > 0) {\n\t\trun_micro_tasks();\n\t}\n}\n","/** @import { Derived, Effect } from '#client' */\n/** @import { Boundary } from './dom/blocks/boundary.js' */\nimport { DEV } from 'esm-env';\nimport { FILENAME } from '../../constants.js';\nimport { is_firefox } from './dom/operations.js';\nimport { ERROR_VALUE, BOUNDARY_EFFECT, EFFECT_RAN } from './constants.js';\nimport { define_property, get_descriptor } from '../shared/utils.js';\nimport { active_effect, active_reaction } from './runtime.js';\n\nconst adjustments = new WeakMap();\n\n/**\n * @param {unknown} error\n */\nexport function handle_error(error) {\n\tvar effect = active_effect;\n\n\t// for unowned deriveds, don't throw until we read the value\n\tif (effect === null) {\n\t\t/** @type {Derived} */ (active_reaction).f |= ERROR_VALUE;\n\t\treturn error;\n\t}\n\n\tif (DEV && error instanceof Error && !adjustments.has(error)) {\n\t\tadjustments.set(error, get_adjustments(error, effect));\n\t}\n\n\tif ((effect.f & EFFECT_RAN) === 0) {\n\t\t// if the error occurred while creating this subtree, we let it\n\t\t// bubble up until it hits a boundary that can handle it\n\t\tif ((effect.f & BOUNDARY_EFFECT) === 0) {\n\t\t\tif (!effect.parent && error instanceof Error) {\n\t\t\t\tapply_adjustments(error);\n\t\t\t}\n\n\t\t\tthrow error;\n\t\t}\n\n\t\t/** @type {Boundary} */ (effect.b).error(error);\n\t} else {\n\t\t// otherwise we bubble up the effect tree ourselves\n\t\tinvoke_error_boundary(error, effect);\n\t}\n}\n\n/**\n * @param {unknown} error\n * @param {Effect | null} effect\n */\nexport function invoke_error_boundary(error, effect) {\n\twhile (effect !== null) {\n\t\tif ((effect.f & BOUNDARY_EFFECT) !== 0) {\n\t\t\ttry {\n\t\t\t\t/** @type {Boundary} */ (effect.b).error(error);\n\t\t\t\treturn;\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\n\t\teffect = effect.parent;\n\t}\n\n\tif (error instanceof Error) {\n\t\tapply_adjustments(error);\n\t}\n\n\tthrow error;\n}\n\n/**\n * Add useful information to the error message/stack in development\n * @param {Error} error\n * @param {Effect} effect\n */\nfunction get_adjustments(error, effect) {\n\tconst message_descriptor = get_descriptor(error, 'message');\n\n\t// if the message was already changed and it's not configurable we can't change it\n\t// or it will throw a different error swallowing the original error\n\tif (message_descriptor && !message_descriptor.configurable) return;\n\n\tvar indent = is_firefox ? '  ' : '\\t';\n\tvar component_stack = `\\n${indent}in ${effect.fn?.name || '<unknown>'}`;\n\tvar context = effect.ctx;\n\n\twhile (context !== null) {\n\t\tcomponent_stack += `\\n${indent}in ${context.function?.[FILENAME].split('/').pop()}`;\n\t\tcontext = context.p;\n\t}\n\n\treturn {\n\t\tmessage: error.message + `\\n${component_stack}\\n`,\n\t\tstack: error.stack\n\t\t\t?.split('\\n')\n\t\t\t.filter((line) => !line.includes('svelte/src/internal'))\n\t\t\t.join('\\n')\n\t};\n}\n\n/**\n * @param {Error} error\n */\nfunction apply_adjustments(error) {\n\tconst adjusted = adjustments.get(error);\n\n\tif (adjusted) {\n\t\tdefine_property(error, 'message', {\n\t\t\tvalue: adjusted.message\n\t\t});\n\n\t\tdefine_property(error, 'stack', {\n\t\t\tvalue: adjusted.stack\n\t\t});\n\t}\n}\n","/** @import { Derived, Effect, Reaction, Source, Value } from '#client' */\nimport {\n\tBLOCK_EFFECT,\n\tBRANCH_EFFECT,\n\tCLEAN,\n\tDESTROYED,\n\tDIRTY,\n\tEFFECT,\n\tASYNC,\n\tINERT,\n\tRENDER_EFFECT,\n\tROOT_EFFECT,\n\tMAYBE_DIRTY,\n\tDERIVED,\n\tBOUNDARY_EFFECT\n} from '#client/constants';\nimport { async_mode_flag } from '../../flags/index.js';\nimport { deferred, define_property } from '../../shared/utils.js';\nimport {\n\tactive_effect,\n\tget,\n\tis_dirty,\n\tis_updating_effect,\n\tset_is_updating_effect,\n\tset_signal_status,\n\tupdate_effect\n} from '../runtime.js';\nimport * as e from '../errors.js';\nimport { flush_tasks, queue_micro_task } from '../dom/task.js';\nimport { DEV } from 'esm-env';\nimport { invoke_error_boundary } from '../error-handling.js';\nimport { old_values, source, update } from './sources.js';\nimport { inspect_effect, unlink_effect } from './effects.js';\n\n/**\n * @typedef {{\n *   parent: EffectTarget | null;\n *   effect: Effect | null;\n *   effects: Effect[];\n *   render_effects: Effect[];\n *   block_effects: Effect[];\n * }} EffectTarget\n */\n\n/** @type {Set<Batch>} */\nconst batches = new Set();\n\n/** @type {Batch | null} */\nexport let current_batch = null;\n\n/**\n * This is needed to avoid overwriting inputs in non-async mode\n * TODO 6.0 remove this, as non-async mode will go away\n * @type {Batch | null}\n */\nexport let previous_batch = null;\n\n/**\n * When time travelling (i.e. working in one batch, while other batches\n * still have ongoing work), we ignore the real values of affected\n * signals in favour of their values within the batch\n * @type {Map<Value, any> | null}\n */\nexport let batch_values = null;\n\n/** @type {Set<() => void>} */\nexport let effect_pending_updates = new Set();\n\n/** @type {Effect[]} */\nlet queued_root_effects = [];\n\n/** @type {Effect | null} */\nlet last_scheduled_effect = null;\n\nlet is_flushing = false;\nexport let is_flushing_sync = false;\n\nexport class Batch {\n\tcommitted = false;\n\n\t/**\n\t * The current values of any sources that are updated in this batch\n\t * They keys of this map are identical to `this.#previous`\n\t * @type {Map<Source, any>}\n\t */\n\tcurrent = new Map();\n\n\t/**\n\t * The values of any sources that are updated in this batch _before_ those updates took place.\n\t * They keys of this map are identical to `this.#current`\n\t * @type {Map<Source, any>}\n\t */\n\t#previous = new Map();\n\n\t/**\n\t * When the batch is committed (and the DOM is updated), we need to remove old branches\n\t * and append new ones by calling the functions added inside (if/each/key/etc) blocks\n\t * @type {Set<() => void>}\n\t */\n\t#callbacks = new Set();\n\n\t/**\n\t * The number of async effects that are currently in flight\n\t */\n\t#pending = 0;\n\n\t/**\n\t * The number of async effects that are currently in flight, _not_ inside a pending boundary\n\t */\n\t#blocking_pending = 0;\n\n\t/**\n\t * A deferred that resolves when the batch is committed, used with `settled()`\n\t * TODO replace with Promise.withResolvers once supported widely enough\n\t * @type {{ promise: Promise<void>, resolve: (value?: any) => void, reject: (reason: unknown) => void } | null}\n\t */\n\t#deferred = null;\n\n\t/**\n\t * Deferred effects (which run after async work has completed) that are DIRTY\n\t * @type {Effect[]}\n\t */\n\t#dirty_effects = [];\n\n\t/**\n\t * Deferred effects that are MAYBE_DIRTY\n\t * @type {Effect[]}\n\t */\n\t#maybe_dirty_effects = [];\n\n\t/**\n\t * A set of branches that still exist, but will be destroyed when this batch\n\t * is committed  we skip over these during `process`\n\t * @type {Set<Effect>}\n\t */\n\tskipped_effects = new Set();\n\n\t/**\n\t *\n\t * @param {Effect[]} root_effects\n\t */\n\tprocess(root_effects) {\n\t\tqueued_root_effects = [];\n\n\t\tprevious_batch = null;\n\n\t\tthis.apply();\n\n\t\t/** @type {EffectTarget} */\n\t\tvar target = {\n\t\t\tparent: null,\n\t\t\teffect: null,\n\t\t\teffects: [],\n\t\t\trender_effects: [],\n\t\t\tblock_effects: []\n\t\t};\n\n\t\tfor (const root of root_effects) {\n\t\t\tthis.#traverse_effect_tree(root, target);\n\t\t}\n\n\t\tthis.#resolve();\n\n\t\tif (this.#blocking_pending > 0) {\n\t\t\tthis.#defer_effects(target.effects);\n\t\t\tthis.#defer_effects(target.render_effects);\n\t\t\tthis.#defer_effects(target.block_effects);\n\t\t} else {\n\t\t\t// TODO append/detach blocks here, not in #commit\n\n\t\t\t// If sources are written to, then work needs to happen in a separate batch, else prior sources would be mixed with\n\t\t\t// newly updated sources, which could lead to infinite loops when effects run over and over again.\n\t\t\tprevious_batch = this;\n\t\t\tcurrent_batch = null;\n\n\t\t\tflush_queued_effects(target.render_effects);\n\t\t\tflush_queued_effects(target.effects);\n\n\t\t\tprevious_batch = null;\n\t\t}\n\n\t\tbatch_values = null;\n\t}\n\n\t/**\n\t * Traverse the effect tree, executing effects or stashing\n\t * them for later execution as appropriate\n\t * @param {Effect} root\n\t * @param {EffectTarget} target\n\t */\n\t#traverse_effect_tree(root, target) {\n\t\troot.f ^= CLEAN;\n\n\t\tvar effect = root.first;\n\n\t\twhile (effect !== null) {\n\t\t\tvar flags = effect.f;\n\t\t\tvar is_branch = (flags & (BRANCH_EFFECT | ROOT_EFFECT)) !== 0;\n\t\t\tvar is_skippable_branch = is_branch && (flags & CLEAN) !== 0;\n\n\t\t\tvar skip = is_skippable_branch || (flags & INERT) !== 0 || this.skipped_effects.has(effect);\n\n\t\t\tif ((effect.f & BOUNDARY_EFFECT) !== 0 && effect.b?.is_pending()) {\n\t\t\t\ttarget = {\n\t\t\t\t\tparent: target,\n\t\t\t\t\teffect,\n\t\t\t\t\teffects: [],\n\t\t\t\t\trender_effects: [],\n\t\t\t\t\tblock_effects: []\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (!skip && effect.fn !== null) {\n\t\t\t\tif (is_branch) {\n\t\t\t\t\teffect.f ^= CLEAN;\n\t\t\t\t} else if ((flags & EFFECT) !== 0) {\n\t\t\t\t\ttarget.effects.push(effect);\n\t\t\t\t} else if (async_mode_flag && (flags & RENDER_EFFECT) !== 0) {\n\t\t\t\t\ttarget.render_effects.push(effect);\n\t\t\t\t} else if (is_dirty(effect)) {\n\t\t\t\t\tif ((effect.f & BLOCK_EFFECT) !== 0) target.block_effects.push(effect);\n\t\t\t\t\tupdate_effect(effect);\n\t\t\t\t}\n\n\t\t\t\tvar child = effect.first;\n\n\t\t\t\tif (child !== null) {\n\t\t\t\t\teffect = child;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar parent = effect.parent;\n\t\t\teffect = effect.next;\n\n\t\t\twhile (effect === null && parent !== null) {\n\t\t\t\tif (parent === target.effect) {\n\t\t\t\t\t// TODO rather than traversing into pending boundaries and deferring the effects,\n\t\t\t\t\t// could we just attach the effects _to_ the pending boundary and schedule them\n\t\t\t\t\t// once the boundary is ready?\n\t\t\t\t\tthis.#defer_effects(target.effects);\n\t\t\t\t\tthis.#defer_effects(target.render_effects);\n\t\t\t\t\tthis.#defer_effects(target.block_effects);\n\n\t\t\t\t\ttarget = /** @type {EffectTarget} */ (target.parent);\n\t\t\t\t}\n\n\t\t\t\teffect = parent.next;\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {Effect[]} effects\n\t */\n\t#defer_effects(effects) {\n\t\tfor (const e of effects) {\n\t\t\tconst target = (e.f & DIRTY) !== 0 ? this.#dirty_effects : this.#maybe_dirty_effects;\n\t\t\ttarget.push(e);\n\n\t\t\t// mark as clean so they get scheduled if they depend on pending async state\n\t\t\tset_signal_status(e, CLEAN);\n\t\t}\n\t}\n\n\t/**\n\t * Associate a change to a given source with the current\n\t * batch, noting its previous and current values\n\t * @param {Source} source\n\t * @param {any} value\n\t */\n\tcapture(source, value) {\n\t\tif (!this.#previous.has(source)) {\n\t\t\tthis.#previous.set(source, value);\n\t\t}\n\n\t\tthis.current.set(source, source.v);\n\t\tbatch_values?.set(source, source.v);\n\t}\n\n\tactivate() {\n\t\tcurrent_batch = this;\n\t}\n\n\tdeactivate() {\n\t\tcurrent_batch = null;\n\t\tbatch_values = null;\n\t}\n\n\tflush() {\n\t\tif (queued_root_effects.length > 0) {\n\t\t\tthis.activate();\n\t\t\tflush_effects();\n\n\t\t\tif (current_batch !== null && current_batch !== this) {\n\t\t\t\t// this can happen if a new batch was created during `flush_effects()`\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.#resolve();\n\t\t}\n\n\t\tthis.deactivate();\n\n\t\tfor (const update of effect_pending_updates) {\n\t\t\teffect_pending_updates.delete(update);\n\t\t\tupdate();\n\n\t\t\tif (current_batch !== null) {\n\t\t\t\t// only do one at a time\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t#resolve() {\n\t\tif (this.#blocking_pending === 0) {\n\t\t\t// append/remove branches\n\t\t\tfor (const fn of this.#callbacks) fn();\n\t\t\tthis.#callbacks.clear();\n\t\t}\n\n\t\tif (this.#pending === 0) {\n\t\t\tthis.#commit();\n\t\t}\n\t}\n\n\t#commit() {\n\t\t// If there are other pending batches, they now need to be 'rebased' \n\t\t// in other words, we re-run block/async effects with the newly\n\t\t// committed state, unless the batch in question has a more\n\t\t// recent value for a given source\n\t\tif (batches.size > 1) {\n\t\t\tthis.#previous.clear();\n\n\t\t\tvar previous_batch_values = batch_values;\n\t\t\tvar is_earlier = true;\n\n\t\t\t/** @type {EffectTarget} */\n\t\t\tvar dummy_target = {\n\t\t\t\tparent: null,\n\t\t\t\teffect: null,\n\t\t\t\teffects: [],\n\t\t\t\trender_effects: [],\n\t\t\t\tblock_effects: []\n\t\t\t};\n\n\t\t\tfor (const batch of batches) {\n\t\t\t\tif (batch === this) {\n\t\t\t\t\tis_earlier = false;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t/** @type {Source[]} */\n\t\t\t\tconst sources = [];\n\n\t\t\t\tfor (const [source, value] of this.current) {\n\t\t\t\t\tif (batch.current.has(source)) {\n\t\t\t\t\t\tif (is_earlier && value !== batch.current.get(source)) {\n\t\t\t\t\t\t\t// bring the value up to date\n\t\t\t\t\t\t\tbatch.current.set(source, value);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// same value or later batch has more recent value,\n\t\t\t\t\t\t\t// no need to re-run these effects\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tsources.push(source);\n\t\t\t\t}\n\n\t\t\t\tif (sources.length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Re-run async/block effects that depend on distinct values changed in both batches\n\t\t\t\tconst others = [...batch.current.keys()].filter((s) => !this.current.has(s));\n\t\t\t\tif (others.length > 0) {\n\t\t\t\t\t/** @type {Set<Value>} */\n\t\t\t\t\tconst marked = new Set();\n\t\t\t\t\t/** @type {Map<Reaction, boolean>} */\n\t\t\t\t\tconst checked = new Map();\n\t\t\t\t\tfor (const source of sources) {\n\t\t\t\t\t\tmark_effects(source, others, marked, checked);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (queued_root_effects.length > 0) {\n\t\t\t\t\t\tcurrent_batch = batch;\n\t\t\t\t\t\tbatch.apply();\n\n\t\t\t\t\t\tfor (const root of queued_root_effects) {\n\t\t\t\t\t\t\tbatch.#traverse_effect_tree(root, dummy_target);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// TODO do we need to do anything with `target`? defer block effects?\n\n\t\t\t\t\t\tqueued_root_effects = [];\n\t\t\t\t\t\tbatch.deactivate();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcurrent_batch = null;\n\t\t\tbatch_values = previous_batch_values;\n\t\t}\n\n\t\tthis.committed = true;\n\t\tbatches.delete(this);\n\n\t\tthis.#deferred?.resolve();\n\t}\n\n\t/**\n\t *\n\t * @param {boolean} blocking\n\t */\n\tincrement(blocking) {\n\t\tthis.#pending += 1;\n\t\tif (blocking) this.#blocking_pending += 1;\n\t}\n\n\t/**\n\t *\n\t * @param {boolean} blocking\n\t */\n\tdecrement(blocking) {\n\t\tthis.#pending -= 1;\n\t\tif (blocking) this.#blocking_pending -= 1;\n\n\t\tfor (const e of this.#dirty_effects) {\n\t\t\tset_signal_status(e, DIRTY);\n\t\t\tschedule_effect(e);\n\t\t}\n\n\t\tfor (const e of this.#maybe_dirty_effects) {\n\t\t\tset_signal_status(e, MAYBE_DIRTY);\n\t\t\tschedule_effect(e);\n\t\t}\n\n\t\tthis.#dirty_effects = [];\n\t\tthis.#maybe_dirty_effects = [];\n\n\t\tthis.flush();\n\t}\n\n\t/** @param {() => void} fn */\n\tadd_callback(fn) {\n\t\tthis.#callbacks.add(fn);\n\t}\n\n\tsettled() {\n\t\treturn (this.#deferred ??= deferred()).promise;\n\t}\n\n\tstatic ensure() {\n\t\tif (current_batch === null) {\n\t\t\tconst batch = (current_batch = new Batch());\n\t\t\tbatches.add(current_batch);\n\n\t\t\tif (!is_flushing_sync) {\n\t\t\t\tBatch.enqueue(() => {\n\t\t\t\t\tif (current_batch !== batch) {\n\t\t\t\t\t\t// a flushSync happened in the meantime\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tbatch.flush();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn current_batch;\n\t}\n\n\t/** @param {() => void} task */\n\tstatic enqueue(task) {\n\t\tqueue_micro_task(task);\n\t}\n\n\tapply() {\n\t\tif (!async_mode_flag || batches.size === 1) return;\n\n\t\t// if there are multiple batches, we are 'time travelling' \n\t\t// we need to override values with the ones in this batch...\n\t\tbatch_values = new Map(this.current);\n\n\t\t// ...and undo changes belonging to other batches\n\t\tfor (const batch of batches) {\n\t\t\tif (batch === this) continue;\n\n\t\t\tfor (const [source, previous] of batch.#previous) {\n\t\t\t\tif (!batch_values.has(source)) {\n\t\t\t\t\tbatch_values.set(source, previous);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Synchronously flush any pending updates.\n * Returns void if no callback is provided, otherwise returns the result of calling the callback.\n * @template [T=void]\n * @param {(() => T) | undefined} [fn]\n * @returns {T}\n */\nexport function flushSync(fn) {\n\tif (async_mode_flag && active_effect !== null) {\n\t\t// We disallow this because it creates super-hard to reason about stack trace and because it's generally a bad idea\n\t\te.flush_sync_in_effect();\n\t}\n\n\tvar was_flushing_sync = is_flushing_sync;\n\tis_flushing_sync = true;\n\n\ttry {\n\t\tvar result;\n\n\t\tif (fn) {\n\t\t\tif (current_batch !== null) {\n\t\t\t\tflush_effects();\n\t\t\t}\n\n\t\t\tresult = fn();\n\t\t}\n\n\t\twhile (true) {\n\t\t\tflush_tasks();\n\n\t\t\tif (queued_root_effects.length === 0) {\n\t\t\t\tcurrent_batch?.flush();\n\n\t\t\t\t// we need to check again, in case we just updated an `$effect.pending()`\n\t\t\t\tif (queued_root_effects.length === 0) {\n\t\t\t\t\t// this would be reset in `flush_effects()` but since we are early returning here,\n\t\t\t\t\t// we need to reset it here as well in case the first time there's 0 queued root effects\n\t\t\t\t\tlast_scheduled_effect = null;\n\n\t\t\t\t\treturn /** @type {T} */ (result);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tflush_effects();\n\t\t}\n\t} finally {\n\t\tis_flushing_sync = was_flushing_sync;\n\t}\n}\n\nfunction flush_effects() {\n\tvar was_updating_effect = is_updating_effect;\n\tis_flushing = true;\n\n\ttry {\n\t\tvar flush_count = 0;\n\t\tset_is_updating_effect(true);\n\n\t\twhile (queued_root_effects.length > 0) {\n\t\t\tvar batch = Batch.ensure();\n\n\t\t\tif (flush_count++ > 1000) {\n\t\t\t\tif (DEV) {\n\t\t\t\t\tvar updates = new Map();\n\n\t\t\t\t\tfor (const source of batch.current.keys()) {\n\t\t\t\t\t\tfor (const [stack, update] of source.updated ?? []) {\n\t\t\t\t\t\t\tvar entry = updates.get(stack);\n\n\t\t\t\t\t\t\tif (!entry) {\n\t\t\t\t\t\t\t\tentry = { error: update.error, count: 0 };\n\t\t\t\t\t\t\t\tupdates.set(stack, entry);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tentry.count += update.count;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (const update of updates.values()) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error(update.error);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tinfinite_loop_guard();\n\t\t\t}\n\n\t\t\tbatch.process(queued_root_effects);\n\t\t\told_values.clear();\n\t\t}\n\t} finally {\n\t\tis_flushing = false;\n\t\tset_is_updating_effect(was_updating_effect);\n\n\t\tlast_scheduled_effect = null;\n\t}\n}\n\nfunction infinite_loop_guard() {\n\ttry {\n\t\te.effect_update_depth_exceeded();\n\t} catch (error) {\n\t\tif (DEV) {\n\t\t\t// stack contains no useful information, replace it\n\t\t\tdefine_property(error, 'stack', { value: '' });\n\t\t}\n\n\t\t// Best effort: invoke the boundary nearest the most recent\n\t\t// effect and hope that it's relevant to the infinite loop\n\t\tinvoke_error_boundary(error, last_scheduled_effect);\n\t}\n}\n\n/** @type {Set<Effect> | null} */\nexport let eager_block_effects = null;\n\n/**\n * @param {Array<Effect>} effects\n * @returns {void}\n */\nfunction flush_queued_effects(effects) {\n\tvar length = effects.length;\n\tif (length === 0) return;\n\n\tvar i = 0;\n\n\twhile (i < length) {\n\t\tvar effect = effects[i++];\n\n\t\tif ((effect.f & (DESTROYED | INERT)) === 0 && is_dirty(effect)) {\n\t\t\teager_block_effects = new Set();\n\n\t\t\tupdate_effect(effect);\n\n\t\t\t// Effects with no dependencies or teardown do not get added to the effect tree.\n\t\t\t// Deferred effects (e.g. `$effect(...)`) _are_ added to the tree because we\n\t\t\t// don't know if we need to keep them until they are executed. Doing the check\n\t\t\t// here (rather than in `update_effect`) allows us to skip the work for\n\t\t\t// immediate effects.\n\t\t\tif (effect.deps === null && effect.first === null && effect.nodes_start === null) {\n\t\t\t\t// if there's no teardown or abort controller we completely unlink\n\t\t\t\t// the effect from the graph\n\t\t\t\tif (effect.teardown === null && effect.ac === null) {\n\t\t\t\t\t// remove this effect from the graph\n\t\t\t\t\tunlink_effect(effect);\n\t\t\t\t} else {\n\t\t\t\t\t// keep the effect in the graph, but free up some memory\n\t\t\t\t\teffect.fn = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If update_effect() has a flushSync() in it, we may have flushed another flush_queued_effects(),\n\t\t\t// which already handled this logic and did set eager_block_effects to null.\n\t\t\tif (eager_block_effects?.size > 0) {\n\t\t\t\told_values.clear();\n\n\t\t\t\tfor (const e of eager_block_effects) {\n\t\t\t\t\t// Skip eager effects that have already been unmounted\n\t\t\t\t\tif ((e.f & (DESTROYED | INERT)) !== 0) continue;\n\n\t\t\t\t\t// Run effects in order from ancestor to descendant, else we could run into nullpointers\n\t\t\t\t\t/** @type {Effect[]} */\n\t\t\t\t\tconst ordered_effects = [e];\n\t\t\t\t\tlet ancestor = e.parent;\n\t\t\t\t\twhile (ancestor !== null) {\n\t\t\t\t\t\tif (eager_block_effects.has(ancestor)) {\n\t\t\t\t\t\t\teager_block_effects.delete(ancestor);\n\t\t\t\t\t\t\tordered_effects.push(ancestor);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tancestor = ancestor.parent;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let j = ordered_effects.length - 1; j >= 0; j--) {\n\t\t\t\t\t\tconst e = ordered_effects[j];\n\t\t\t\t\t\t// Skip eager effects that have already been unmounted\n\t\t\t\t\t\tif ((e.f & (DESTROYED | INERT)) !== 0) continue;\n\t\t\t\t\t\tupdate_effect(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\teager_block_effects.clear();\n\t\t\t}\n\t\t}\n\t}\n\n\teager_block_effects = null;\n}\n\n/**\n * This is similar to `mark_reactions`, but it only marks async/block effects\n * depending on `value` and at least one of the other `sources`, so that\n * these effects can re-run after another batch has been committed\n * @param {Value} value\n * @param {Source[]} sources\n * @param {Set<Value>} marked\n * @param {Map<Reaction, boolean>} checked\n */\nfunction mark_effects(value, sources, marked, checked) {\n\tif (marked.has(value)) return;\n\tmarked.add(value);\n\n\tif (value.reactions !== null) {\n\t\tfor (const reaction of value.reactions) {\n\t\t\tconst flags = reaction.f;\n\n\t\t\tif ((flags & DERIVED) !== 0) {\n\t\t\t\tmark_effects(/** @type {Derived} */ (reaction), sources, marked, checked);\n\t\t\t} else if (\n\t\t\t\t(flags & (ASYNC | BLOCK_EFFECT)) !== 0 &&\n\t\t\t\t(flags & DIRTY) === 0 && // we may have scheduled this one already\n\t\t\t\tdepends_on(reaction, sources, checked)\n\t\t\t) {\n\t\t\t\tset_signal_status(reaction, DIRTY);\n\t\t\t\tschedule_effect(/** @type {Effect} */ (reaction));\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * @param {Reaction} reaction\n * @param {Source[]} sources\n * @param {Map<Reaction, boolean>} checked\n */\nfunction depends_on(reaction, sources, checked) {\n\tconst depends = checked.get(reaction);\n\tif (depends !== undefined) return depends;\n\n\tif (reaction.deps !== null) {\n\t\tfor (const dep of reaction.deps) {\n\t\t\tif (sources.includes(dep)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ((dep.f & DERIVED) !== 0 && depends_on(/** @type {Derived} */ (dep), sources, checked)) {\n\t\t\t\tchecked.set(/** @type {Derived} */ (dep), true);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\tchecked.set(reaction, false);\n\n\treturn false;\n}\n\n/**\n * @param {Effect} signal\n * @returns {void}\n */\nexport function schedule_effect(signal) {\n\tvar effect = (last_scheduled_effect = signal);\n\n\twhile (effect.parent !== null) {\n\t\teffect = effect.parent;\n\t\tvar flags = effect.f;\n\n\t\t// if the effect is being scheduled because a parent (each/await/etc) block\n\t\t// updated an internal source, bail out or we'll cause a second flush\n\t\tif (is_flushing && effect === active_effect && (flags & BLOCK_EFFECT) !== 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ((flags & (ROOT_EFFECT | BRANCH_EFFECT)) !== 0) {\n\t\t\tif ((flags & CLEAN) === 0) return;\n\t\t\teffect.f ^= CLEAN;\n\t\t}\n\t}\n\n\tqueued_root_effects.push(effect);\n}\n\n/** @type {Source<number>[]} */\nlet eager_versions = [];\n\nfunction eager_flush() {\n\ttry {\n\t\tflushSync(() => {\n\t\t\tfor (const version of eager_versions) {\n\t\t\t\tupdate(version);\n\t\t\t}\n\t\t});\n\t} finally {\n\t\teager_versions = [];\n\t}\n}\n\n/**\n * Implementation of `$state.eager(fn())`\n * @template T\n * @param {() => T} fn\n * @returns {T}\n */\nexport function eager(fn) {\n\tvar version = source(0);\n\tvar initial = true;\n\tvar value = /** @type {T} */ (undefined);\n\n\tget(version);\n\n\tinspect_effect(() => {\n\t\tif (initial) {\n\t\t\t// the first time this runs, we create an inspect effect\n\t\t\t// that will run eagerly whenever the expression changes\n\t\t\tvar previous_batch_values = batch_values;\n\n\t\t\ttry {\n\t\t\t\tbatch_values = null;\n\t\t\t\tvalue = fn();\n\t\t\t} finally {\n\t\t\t\tbatch_values = previous_batch_values;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// the second time this effect runs, it's to schedule a\n\t\t// `version` update. since this will recreate the effect,\n\t\t// we don't need to evaluate the expression here\n\t\tif (eager_versions.length === 0) {\n\t\t\tqueue_micro_task(eager_flush);\n\t\t}\n\n\t\teager_versions.push(version);\n\t});\n\n\tinitial = false;\n\n\treturn value;\n}\n\n/**\n * Forcibly remove all current batches, to prevent cross-talk between tests\n */\nexport function clear() {\n\tbatches.clear();\n}\n","import { get, tick, untrack } from '../internal/client/runtime.js';\nimport { effect_tracking, render_effect } from '../internal/client/reactivity/effects.js';\nimport { source, increment } from '../internal/client/reactivity/sources.js';\nimport { tag } from '../internal/client/dev/tracing.js';\nimport { DEV } from 'esm-env';\nimport { queue_micro_task } from '../internal/client/dom/task.js';\n\n/**\n * Returns a `subscribe` function that integrates external event-based systems with Svelte's reactivity.\n * It's particularly useful for integrating with web APIs like `MediaQuery`, `IntersectionObserver`, or `WebSocket`.\n *\n * If `subscribe` is called inside an effect (including indirectly, for example inside a getter),\n * the `start` callback will be called with an `update` function. Whenever `update` is called, the effect re-runs.\n *\n * If `start` returns a cleanup function, it will be called when the effect is destroyed.\n *\n * If `subscribe` is called in multiple effects, `start` will only be called once as long as the effects\n * are active, and the returned teardown function will only be called when all effects are destroyed.\n *\n * It's best understood with an example. Here's an implementation of [`MediaQuery`](https://svelte.dev/docs/svelte/svelte-reactivity#MediaQuery):\n *\n * ```js\n * import { createSubscriber } from 'svelte/reactivity';\n * import { on } from 'svelte/events';\n *\n * export class MediaQuery {\n * \t#query;\n * \t#subscribe;\n *\n * \tconstructor(query) {\n * \t\tthis.#query = window.matchMedia(`(${query})`);\n *\n * \t\tthis.#subscribe = createSubscriber((update) => {\n * \t\t\t// when the `change` event occurs, re-run any effects that read `this.current`\n * \t\t\tconst off = on(this.#query, 'change', update);\n *\n * \t\t\t// stop listening when all the effects are destroyed\n * \t\t\treturn () => off();\n * \t\t});\n * \t}\n *\n * \tget current() {\n * \t\t// This makes the getter reactive, if read in an effect\n * \t\tthis.#subscribe();\n *\n * \t\t// Return the current state of the query, whether or not we're in an effect\n * \t\treturn this.#query.matches;\n * \t}\n * }\n * ```\n * @param {(update: () => void) => (() => void) | void} start\n * @since 5.7.0\n */\nexport function createSubscriber(start) {\n\tlet subscribers = 0;\n\tlet version = source(0);\n\t/** @type {(() => void) | void} */\n\tlet stop;\n\n\tif (DEV) {\n\t\ttag(version, 'createSubscriber version');\n\t}\n\n\treturn () => {\n\t\tif (effect_tracking()) {\n\t\t\tget(version);\n\n\t\t\trender_effect(() => {\n\t\t\t\tif (subscribers === 0) {\n\t\t\t\t\tstop = untrack(() => start(() => increment(version)));\n\t\t\t\t}\n\n\t\t\t\tsubscribers += 1;\n\n\t\t\t\treturn () => {\n\t\t\t\t\tqueue_micro_task(() => {\n\t\t\t\t\t\t// Only count down after a microtask, else we would reach 0 before our own render effect reruns,\n\t\t\t\t\t\t// but reach 1 again when the tick callback of the prior teardown runs. That would mean we\n\t\t\t\t\t\t// re-subcribe unnecessarily and create a memory leak because the old subscription is never cleaned up.\n\t\t\t\t\t\tsubscribers -= 1;\n\n\t\t\t\t\t\tif (subscribers === 0) {\n\t\t\t\t\t\t\tstop?.();\n\t\t\t\t\t\t\tstop = undefined;\n\t\t\t\t\t\t\t// Increment the version to ensure any dependent deriveds are marked dirty when the subscription is picked up again later.\n\t\t\t\t\t\t\t// If we didn't do this then the comparison of write versions would determine that the derived has a later version than\n\t\t\t\t\t\t\t// the subscriber, and it would not be re-run.\n\t\t\t\t\t\t\tincrement(version);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n}\n","/** @import { Effect, Source, TemplateNode, } from '#client' */\nimport {\n\tBOUNDARY_EFFECT,\n\tCOMMENT_NODE,\n\tEFFECT_PRESERVED,\n\tEFFECT_TRANSPARENT\n} from '#client/constants';\nimport { HYDRATION_START_ELSE } from '../../../../constants.js';\nimport { component_context, set_component_context } from '../../context.js';\nimport { handle_error, invoke_error_boundary } from '../../error-handling.js';\nimport {\n\tblock,\n\tbranch,\n\tdestroy_effect,\n\tmove_effect,\n\tpause_effect\n} from '../../reactivity/effects.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tget,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../runtime.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tnext,\n\tskip_nodes,\n\tset_hydrate_node\n} from '../hydration.js';\nimport { get_next_sibling } from '../operations.js';\nimport { queue_micro_task } from '../task.js';\nimport * as e from '../../errors.js';\nimport * as w from '../../warnings.js';\nimport { DEV } from 'esm-env';\nimport { Batch, effect_pending_updates } from '../../reactivity/batch.js';\nimport { internal_set, source } from '../../reactivity/sources.js';\nimport { tag } from '../../dev/tracing.js';\nimport { createSubscriber } from '../../../../reactivity/create-subscriber.js';\n\n/**\n * @typedef {{\n * \t onerror?: (error: unknown, reset: () => void) => void;\n *   failed?: (anchor: Node, error: () => unknown, reset: () => () => void) => void;\n *   pending?: (anchor: Node) => void;\n * }} BoundaryProps\n */\n\nvar flags = EFFECT_TRANSPARENT | EFFECT_PRESERVED | BOUNDARY_EFFECT;\n\n/**\n * @param {TemplateNode} node\n * @param {BoundaryProps} props\n * @param {((anchor: Node) => void)} children\n * @returns {void}\n */\nexport function boundary(node, props, children) {\n\tnew Boundary(node, props, children);\n}\n\nexport class Boundary {\n\t/** @type {Boundary | null} */\n\tparent;\n\n\t#pending = false;\n\n\t/** @type {TemplateNode} */\n\t#anchor;\n\n\t/** @type {TemplateNode | null} */\n\t#hydrate_open = hydrating ? hydrate_node : null;\n\n\t/** @type {BoundaryProps} */\n\t#props;\n\n\t/** @type {((anchor: Node) => void)} */\n\t#children;\n\n\t/** @type {Effect} */\n\t#effect;\n\n\t/** @type {Effect | null} */\n\t#main_effect = null;\n\n\t/** @type {Effect | null} */\n\t#pending_effect = null;\n\n\t/** @type {Effect | null} */\n\t#failed_effect = null;\n\n\t/** @type {DocumentFragment | null} */\n\t#offscreen_fragment = null;\n\n\t#local_pending_count = 0;\n\t#pending_count = 0;\n\n\t#is_creating_fallback = false;\n\n\t/**\n\t * A source containing the number of pending async deriveds/expressions.\n\t * Only created if `$effect.pending()` is used inside the boundary,\n\t * otherwise updating the source results in needless `Batch.ensure()`\n\t * calls followed by no-op flushes\n\t * @type {Source<number> | null}\n\t */\n\t#effect_pending = null;\n\n\t#effect_pending_update = () => {\n\t\tif (this.#effect_pending) {\n\t\t\tinternal_set(this.#effect_pending, this.#local_pending_count);\n\t\t}\n\t};\n\n\t#effect_pending_subscriber = createSubscriber(() => {\n\t\tthis.#effect_pending = source(this.#local_pending_count);\n\n\t\tif (DEV) {\n\t\t\ttag(this.#effect_pending, '$effect.pending()');\n\t\t}\n\n\t\treturn () => {\n\t\t\tthis.#effect_pending = null;\n\t\t};\n\t});\n\n\t/**\n\t * @param {TemplateNode} node\n\t * @param {BoundaryProps} props\n\t * @param {((anchor: Node) => void)} children\n\t */\n\tconstructor(node, props, children) {\n\t\tthis.#anchor = node;\n\t\tthis.#props = props;\n\t\tthis.#children = children;\n\n\t\tthis.parent = /** @type {Effect} */ (active_effect).b;\n\n\t\tthis.#pending = !!this.#props.pending;\n\n\t\tthis.#effect = block(() => {\n\t\t\t/** @type {Effect} */ (active_effect).b = this;\n\n\t\t\tif (hydrating) {\n\t\t\t\tconst comment = this.#hydrate_open;\n\t\t\t\thydrate_next();\n\n\t\t\t\tconst server_rendered_pending =\n\t\t\t\t\t/** @type {Comment} */ (comment).nodeType === COMMENT_NODE &&\n\t\t\t\t\t/** @type {Comment} */ (comment).data === HYDRATION_START_ELSE;\n\n\t\t\t\tif (server_rendered_pending) {\n\t\t\t\t\tthis.#hydrate_pending_content();\n\t\t\t\t} else {\n\t\t\t\t\tthis.#hydrate_resolved_content();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tthis.#main_effect = branch(() => children(this.#anchor));\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthis.error(error);\n\t\t\t\t}\n\n\t\t\t\tif (this.#pending_count > 0) {\n\t\t\t\t\tthis.#show_pending_snippet();\n\t\t\t\t} else {\n\t\t\t\t\tthis.#pending = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}, flags);\n\n\t\tif (hydrating) {\n\t\t\tthis.#anchor = hydrate_node;\n\t\t}\n\t}\n\n\t#hydrate_resolved_content() {\n\t\ttry {\n\t\t\tthis.#main_effect = branch(() => this.#children(this.#anchor));\n\t\t} catch (error) {\n\t\t\tthis.error(error);\n\t\t}\n\n\t\t// Since server rendered resolved content, we never show pending state\n\t\t// Even if client-side async operations are still running, the content is already displayed\n\t\tthis.#pending = false;\n\t}\n\n\t#hydrate_pending_content() {\n\t\tconst pending = this.#props.pending;\n\t\tif (!pending) {\n\t\t\treturn;\n\t\t}\n\t\tthis.#pending_effect = branch(() => pending(this.#anchor));\n\n\t\tBatch.enqueue(() => {\n\t\t\tthis.#main_effect = this.#run(() => {\n\t\t\t\tBatch.ensure();\n\t\t\t\treturn branch(() => this.#children(this.#anchor));\n\t\t\t});\n\n\t\t\tif (this.#pending_count > 0) {\n\t\t\t\tthis.#show_pending_snippet();\n\t\t\t} else {\n\t\t\t\tpause_effect(/** @type {Effect} */ (this.#pending_effect), () => {\n\t\t\t\t\tthis.#pending_effect = null;\n\t\t\t\t});\n\n\t\t\t\tthis.#pending = false;\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Returns `true` if the effect exists inside a boundary whose pending snippet is shown\n\t * @returns {boolean}\n\t */\n\tis_pending() {\n\t\treturn this.#pending || (!!this.parent && this.parent.is_pending());\n\t}\n\n\thas_pending_snippet() {\n\t\treturn !!this.#props.pending;\n\t}\n\n\t/**\n\t * @param {() => Effect | null} fn\n\t */\n\t#run(fn) {\n\t\tvar previous_effect = active_effect;\n\t\tvar previous_reaction = active_reaction;\n\t\tvar previous_ctx = component_context;\n\n\t\tset_active_effect(this.#effect);\n\t\tset_active_reaction(this.#effect);\n\t\tset_component_context(this.#effect.ctx);\n\n\t\ttry {\n\t\t\treturn fn();\n\t\t} catch (e) {\n\t\t\thandle_error(e);\n\t\t\treturn null;\n\t\t} finally {\n\t\t\tset_active_effect(previous_effect);\n\t\t\tset_active_reaction(previous_reaction);\n\t\t\tset_component_context(previous_ctx);\n\t\t}\n\t}\n\n\t#show_pending_snippet() {\n\t\tconst pending = /** @type {(anchor: Node) => void} */ (this.#props.pending);\n\n\t\tif (this.#main_effect !== null) {\n\t\t\tthis.#offscreen_fragment = document.createDocumentFragment();\n\t\t\tmove_effect(this.#main_effect, this.#offscreen_fragment);\n\t\t}\n\n\t\tif (this.#pending_effect === null) {\n\t\t\tthis.#pending_effect = branch(() => pending(this.#anchor));\n\t\t}\n\t}\n\n\t/**\n\t * Updates the pending count associated with the currently visible pending snippet,\n\t * if any, such that we can replace the snippet with content once work is done\n\t * @param {1 | -1} d\n\t */\n\t#update_pending_count(d) {\n\t\tif (!this.has_pending_snippet()) {\n\t\t\tif (this.parent) {\n\t\t\t\tthis.parent.#update_pending_count(d);\n\t\t\t}\n\n\t\t\t// if there's no parent, we're in a scope with no pending snippet\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#pending_count += d;\n\n\t\tif (this.#pending_count === 0) {\n\t\t\tthis.#pending = false;\n\n\t\t\tif (this.#pending_effect) {\n\t\t\t\tpause_effect(this.#pending_effect, () => {\n\t\t\t\t\tthis.#pending_effect = null;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this.#offscreen_fragment) {\n\t\t\t\tthis.#anchor.before(this.#offscreen_fragment);\n\t\t\t\tthis.#offscreen_fragment = null;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Update the source that powers `$effect.pending()` inside this boundary,\n\t * and controls when the current `pending` snippet (if any) is removed.\n\t * Do not call from inside the class\n\t * @param {1 | -1} d\n\t */\n\tupdate_pending_count(d) {\n\t\tthis.#update_pending_count(d);\n\n\t\tthis.#local_pending_count += d;\n\t\teffect_pending_updates.add(this.#effect_pending_update);\n\t}\n\n\tget_effect_pending() {\n\t\tthis.#effect_pending_subscriber();\n\t\treturn get(/** @type {Source<number>} */ (this.#effect_pending));\n\t}\n\n\t/** @param {unknown} error */\n\terror(error) {\n\t\tvar onerror = this.#props.onerror;\n\t\tlet failed = this.#props.failed;\n\n\t\t// If we have nothing to capture the error, or if we hit an error while\n\t\t// rendering the fallback, re-throw for another boundary to handle\n\t\tif (this.#is_creating_fallback || (!onerror && !failed)) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (this.#main_effect) {\n\t\t\tdestroy_effect(this.#main_effect);\n\t\t\tthis.#main_effect = null;\n\t\t}\n\n\t\tif (this.#pending_effect) {\n\t\t\tdestroy_effect(this.#pending_effect);\n\t\t\tthis.#pending_effect = null;\n\t\t}\n\n\t\tif (this.#failed_effect) {\n\t\t\tdestroy_effect(this.#failed_effect);\n\t\t\tthis.#failed_effect = null;\n\t\t}\n\n\t\tif (hydrating) {\n\t\t\tset_hydrate_node(/** @type {TemplateNode} */ (this.#hydrate_open));\n\t\t\tnext();\n\t\t\tset_hydrate_node(skip_nodes());\n\t\t}\n\n\t\tvar did_reset = false;\n\t\tvar calling_on_error = false;\n\n\t\tconst reset = () => {\n\t\t\tif (did_reset) {\n\t\t\t\tw.svelte_boundary_reset_noop();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdid_reset = true;\n\n\t\t\tif (calling_on_error) {\n\t\t\t\te.svelte_boundary_reset_onerror();\n\t\t\t}\n\n\t\t\t// If the failure happened while flushing effects, current_batch can be null\n\t\t\tBatch.ensure();\n\n\t\t\tthis.#local_pending_count = 0;\n\n\t\t\tif (this.#failed_effect !== null) {\n\t\t\t\tpause_effect(this.#failed_effect, () => {\n\t\t\t\t\tthis.#failed_effect = null;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// we intentionally do not try to find the nearest pending boundary. If this boundary has one, we'll render it on reset\n\t\t\t// but it would be really weird to show the parent's boundary on a child reset.\n\t\t\tthis.#pending = this.has_pending_snippet();\n\n\t\t\tthis.#main_effect = this.#run(() => {\n\t\t\t\tthis.#is_creating_fallback = false;\n\t\t\t\treturn branch(() => this.#children(this.#anchor));\n\t\t\t});\n\n\t\t\tif (this.#pending_count > 0) {\n\t\t\t\tthis.#show_pending_snippet();\n\t\t\t} else {\n\t\t\t\tthis.#pending = false;\n\t\t\t}\n\t\t};\n\n\t\tvar previous_reaction = active_reaction;\n\n\t\ttry {\n\t\t\tset_active_reaction(null);\n\t\t\tcalling_on_error = true;\n\t\t\tonerror?.(error, reset);\n\t\t\tcalling_on_error = false;\n\t\t} catch (error) {\n\t\t\tinvoke_error_boundary(error, this.#effect && this.#effect.parent);\n\t\t} finally {\n\t\t\tset_active_reaction(previous_reaction);\n\t\t}\n\n\t\tif (failed) {\n\t\t\tqueue_micro_task(() => {\n\t\t\t\tthis.#failed_effect = this.#run(() => {\n\t\t\t\t\tthis.#is_creating_fallback = true;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn branch(() => {\n\t\t\t\t\t\t\tfailed(\n\t\t\t\t\t\t\t\tthis.#anchor,\n\t\t\t\t\t\t\t\t() => error,\n\t\t\t\t\t\t\t\t() => reset\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tinvoke_error_boundary(error, /** @type {Effect} */ (this.#effect.parent));\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.#is_creating_fallback = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport function get_boundary() {\n\treturn /** @type {Boundary} */ (/** @type {Effect} */ (active_effect).b);\n}\n\nexport function pending() {\n\tif (active_effect === null) {\n\t\te.effect_pending_outside_reaction();\n\t}\n\n\tvar boundary = active_effect.b;\n\n\tif (boundary === null) {\n\t\treturn 0; // TODO eventually we will need this to be global\n\t}\n\n\treturn boundary.get_effect_pending();\n}\n","/** @import { Effect, TemplateNode, Value } from '#client' */\nimport { DESTROYED } from '#client/constants';\nimport { DEV } from 'esm-env';\nimport {\n\tcomponent_context,\n\tdev_stack,\n\tis_runes,\n\tset_component_context,\n\tset_dev_stack\n} from '../context.js';\nimport { get_boundary } from '../dom/blocks/boundary.js';\nimport { invoke_error_boundary } from '../error-handling.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction\n} from '../runtime.js';\nimport { Batch, current_batch } from './batch.js';\nimport {\n\tasync_derived,\n\tcurrent_async_effect,\n\tderived,\n\tderived_safe_equal,\n\tset_from_async_derived\n} from './deriveds.js';\nimport { aborted } from './effects.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tset_hydrate_node,\n\tset_hydrating,\n\tskip_nodes\n} from '../dom/hydration.js';\nimport { create_text } from '../dom/operations.js';\n\n/**\n *\n * @param {Array<() => any>} sync\n * @param {Array<() => Promise<any>>} async\n * @param {(values: Value[]) => any} fn\n */\nexport function flatten(sync, async, fn) {\n\tconst d = is_runes() ? derived : derived_safe_equal;\n\n\tif (async.length === 0) {\n\t\tfn(sync.map(d));\n\t\treturn;\n\t}\n\n\tvar batch = current_batch;\n\tvar parent = /** @type {Effect} */ (active_effect);\n\n\tvar restore = capture();\n\n\tvar was_hydrating = hydrating;\n\n\tPromise.all(async.map((expression) => async_derived(expression)))\n\t\t.then((result) => {\n\t\t\trestore();\n\n\t\t\ttry {\n\t\t\t\tfn([...sync.map(d), ...result]);\n\t\t\t} catch (error) {\n\t\t\t\t// ignore errors in blocks that have already been destroyed\n\t\t\t\tif ((parent.f & DESTROYED) === 0) {\n\t\t\t\t\tinvoke_error_boundary(error, parent);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (was_hydrating) {\n\t\t\t\tset_hydrating(false);\n\t\t\t}\n\n\t\t\tbatch?.deactivate();\n\t\t\tunset_context();\n\t\t})\n\t\t.catch((error) => {\n\t\t\tinvoke_error_boundary(error, parent);\n\t\t});\n}\n\n/**\n * Captures the current effect context so that we can restore it after\n * some asynchronous work has happened (so that e.g. `await a + b`\n * causes `b` to be registered as a dependency).\n */\nexport function capture() {\n\tvar previous_effect = active_effect;\n\tvar previous_reaction = active_reaction;\n\tvar previous_component_context = component_context;\n\tvar previous_batch = current_batch;\n\n\tvar was_hydrating = hydrating;\n\n\tif (was_hydrating) {\n\t\tvar previous_hydrate_node = hydrate_node;\n\t}\n\n\tif (DEV) {\n\t\tvar previous_dev_stack = dev_stack;\n\t}\n\n\treturn function restore() {\n\t\tset_active_effect(previous_effect);\n\t\tset_active_reaction(previous_reaction);\n\t\tset_component_context(previous_component_context);\n\t\tprevious_batch?.activate();\n\n\t\tif (was_hydrating) {\n\t\t\tset_hydrating(true);\n\t\t\tset_hydrate_node(previous_hydrate_node);\n\t\t}\n\n\t\tif (DEV) {\n\t\t\tset_from_async_derived(null);\n\t\t\tset_dev_stack(previous_dev_stack);\n\t\t}\n\t};\n}\n\n/**\n * Wraps an `await` expression in such a way that the effect context that was\n * active before the expression evaluated can be reapplied afterwards \n * `await a + b` becomes `(await $.save(a))() + b`\n * @template T\n * @param {Promise<T>} promise\n * @returns {Promise<() => T>}\n */\nexport async function save(promise) {\n\tvar restore = capture();\n\tvar value = await promise;\n\n\treturn () => {\n\t\trestore();\n\t\treturn value;\n\t};\n}\n\n/**\n * Reset `current_async_effect` after the `promise` resolves, so\n * that we can emit `await_reactivity_loss` warnings\n * @template T\n * @param {Promise<T>} promise\n * @returns {Promise<() => T>}\n */\nexport async function track_reactivity_loss(promise) {\n\tvar previous_async_effect = current_async_effect;\n\tvar value = await promise;\n\n\treturn () => {\n\t\tset_from_async_derived(previous_async_effect);\n\t\treturn value;\n\t};\n}\n\n/**\n * Used in `for await` loops in DEV, so\n * that we can emit `await_reactivity_loss` warnings\n * after each `async_iterator` result resolves and\n * after the `async_iterator` return resolves (if it runs)\n * @template T\n * @template TReturn\n * @param {Iterable<T> | AsyncIterable<T>} iterable\n * @returns {AsyncGenerator<T, TReturn | undefined>}\n */\nexport async function* for_await_track_reactivity_loss(iterable) {\n\t// This is based on the algorithms described in ECMA-262:\n\t// ForIn/OfBodyEvaluation\n\t// https://tc39.es/ecma262/multipage/ecmascript-language-statements-and-declarations.html#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset\n\t// AsyncIteratorClose\n\t// https://tc39.es/ecma262/multipage/abstract-operations.html#sec-asynciteratorclose\n\n\t/** @type {AsyncIterator<T, TReturn>} */\n\t// @ts-ignore\n\tconst iterator = iterable[Symbol.asyncIterator]?.() ?? iterable[Symbol.iterator]?.();\n\n\tif (iterator === undefined) {\n\t\tthrow new TypeError('value is not async iterable');\n\t}\n\n\t/** Whether the completion of the iterator was \"normal\", meaning it wasn't ended via `break` or a similar method */\n\tlet normal_completion = false;\n\ttry {\n\t\twhile (true) {\n\t\t\tconst { done, value } = (await track_reactivity_loss(iterator.next()))();\n\t\t\tif (done) {\n\t\t\t\tnormal_completion = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tyield value;\n\t\t}\n\t} finally {\n\t\t// If the iterator had a normal completion and `return` is defined on the iterator, call it and return the value\n\t\tif (normal_completion && iterator.return !== undefined) {\n\t\t\t// eslint-disable-next-line no-unsafe-finally\n\t\t\treturn /** @type {TReturn} */ ((await track_reactivity_loss(iterator.return()))().value);\n\t\t}\n\t}\n}\n\nexport function unset_context() {\n\tset_active_effect(null);\n\tset_active_reaction(null);\n\tset_component_context(null);\n\n\tif (DEV) {\n\t\tset_from_async_derived(null);\n\t\tset_dev_stack(null);\n\t}\n}\n\n/**\n * @param {TemplateNode} anchor\n * @param {(target: TemplateNode) => Promise<void>} fn\n */\nexport async function async_body(anchor, fn) {\n\tvar boundary = get_boundary();\n\tvar batch = /** @type {Batch} */ (current_batch);\n\tvar blocking = !boundary.is_pending();\n\n\tboundary.update_pending_count(1);\n\tbatch.increment(blocking);\n\n\tvar active = /** @type {Effect} */ (active_effect);\n\n\tvar was_hydrating = hydrating;\n\tvar next_hydrate_node = undefined;\n\n\tif (was_hydrating) {\n\t\thydrate_next();\n\t\tnext_hydrate_node = skip_nodes(false);\n\t}\n\n\ttry {\n\t\tvar promise = fn(anchor);\n\t} finally {\n\t\tif (next_hydrate_node) {\n\t\t\tset_hydrate_node(next_hydrate_node);\n\t\t\thydrate_next();\n\t\t}\n\t}\n\n\ttry {\n\t\tawait promise;\n\t} catch (error) {\n\t\tif (!aborted(active)) {\n\t\t\tinvoke_error_boundary(error, active);\n\t\t}\n\t} finally {\n\t\tif (was_hydrating) {\n\t\t\tset_hydrating(false);\n\t\t}\n\n\t\tboundary.update_pending_count(-1);\n\t\tbatch.decrement(blocking);\n\n\t\tunset_context();\n\t}\n}\n","/** @import { Derived, Effect, Source } from '#client' */\n/** @import { Batch } from './batch.js'; */\nimport { DEV } from 'esm-env';\nimport {\n\tERROR_VALUE,\n\tCLEAN,\n\tDERIVED,\n\tDIRTY,\n\tEFFECT_PRESERVED,\n\tMAYBE_DIRTY,\n\tSTALE_REACTION,\n\tUNOWNED,\n\tASYNC,\n\tWAS_MARKED\n} from '#client/constants';\nimport {\n\tactive_reaction,\n\tactive_effect,\n\tset_signal_status,\n\tskip_reaction,\n\tupdate_reaction,\n\tincrement_write_version,\n\tset_active_effect,\n\tpush_reaction_value,\n\tis_destroying_effect\n} from '../runtime.js';\nimport { equals, safe_equals } from './equality.js';\nimport * as e from '../errors.js';\nimport * as w from '../warnings.js';\nimport { async_effect, destroy_effect, teardown } from './effects.js';\nimport { inspect_effects, internal_set, set_inspect_effects, source } from './sources.js';\nimport { get_stack } from '../dev/tracing.js';\nimport { async_mode_flag, tracing_mode_flag } from '../../flags/index.js';\nimport { Boundary } from '../dom/blocks/boundary.js';\nimport { component_context } from '../context.js';\nimport { UNINITIALIZED } from '../../../constants.js';\nimport { batch_values, current_batch } from './batch.js';\nimport { unset_context } from './async.js';\nimport { deferred } from '../../shared/utils.js';\n\n/** @type {Effect | null} */\nexport let current_async_effect = null;\n\n/** @param {Effect | null} v */\nexport function set_from_async_derived(v) {\n\tcurrent_async_effect = v;\n}\n\nexport const recent_async_deriveds = new Set();\n\n/**\n * @template V\n * @param {() => V} fn\n * @returns {Derived<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function derived(fn) {\n\tvar flags = DERIVED | DIRTY;\n\tvar parent_derived =\n\t\tactive_reaction !== null && (active_reaction.f & DERIVED) !== 0\n\t\t\t? /** @type {Derived} */ (active_reaction)\n\t\t\t: null;\n\n\tif (active_effect === null || (parent_derived !== null && (parent_derived.f & UNOWNED) !== 0)) {\n\t\tflags |= UNOWNED;\n\t} else {\n\t\t// Since deriveds are evaluated lazily, any effects created inside them are\n\t\t// created too late to ensure that the parent effect is added to the tree\n\t\tactive_effect.f |= EFFECT_PRESERVED;\n\t}\n\n\t/** @type {Derived<V>} */\n\tconst signal = {\n\t\tctx: component_context,\n\t\tdeps: null,\n\t\teffects: null,\n\t\tequals,\n\t\tf: flags,\n\t\tfn,\n\t\treactions: null,\n\t\trv: 0,\n\t\tv: /** @type {V} */ (UNINITIALIZED),\n\t\twv: 0,\n\t\tparent: parent_derived ?? active_effect,\n\t\tac: null\n\t};\n\n\tif (DEV && tracing_mode_flag) {\n\t\tsignal.created = get_stack('CreatedAt');\n\t}\n\n\treturn signal;\n}\n\n/**\n * @template V\n * @param {() => V | Promise<V>} fn\n * @param {string} [location] If provided, print a warning if the value is not read immediately after update\n * @returns {Promise<Source<V>>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function async_derived(fn, location) {\n\tlet parent = /** @type {Effect | null} */ (active_effect);\n\n\tif (parent === null) {\n\t\te.async_derived_orphan();\n\t}\n\n\tvar boundary = /** @type {Boundary} */ (parent.b);\n\n\tvar promise = /** @type {Promise<V>} */ (/** @type {unknown} */ (undefined));\n\tvar signal = source(/** @type {V} */ (UNINITIALIZED));\n\n\t// only suspend in async deriveds created on initialisation\n\tvar should_suspend = !active_reaction;\n\n\t/** @type {Map<Batch, ReturnType<typeof deferred<V>>>} */\n\tvar deferreds = new Map();\n\n\tasync_effect(() => {\n\t\tif (DEV) current_async_effect = active_effect;\n\n\t\t/** @type {ReturnType<typeof deferred<V>>} */\n\t\tvar d = deferred();\n\t\tpromise = d.promise;\n\n\t\ttry {\n\t\t\t// If this code is changed at some point, make sure to still access the then property\n\t\t\t// of fn() to read any signals it might access, so that we track them as dependencies.\n\t\t\t// We call `unset_context` to undo any `save` calls that happen inside `fn()`\n\t\t\tPromise.resolve(fn())\n\t\t\t\t.then(d.resolve, d.reject)\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (batch === current_batch && batch.committed) {\n\t\t\t\t\t\t// if the batch was rejected as stale, we need to cleanup\n\t\t\t\t\t\t// after any `$.save(...)` calls inside `fn()`\n\t\t\t\t\t\tbatch.deactivate();\n\t\t\t\t\t}\n\n\t\t\t\t\tunset_context();\n\t\t\t\t});\n\t\t} catch (error) {\n\t\t\td.reject(error);\n\t\t\tunset_context();\n\t\t}\n\n\t\tif (DEV) current_async_effect = null;\n\n\t\tvar batch = /** @type {Batch} */ (current_batch);\n\n\t\tif (should_suspend) {\n\t\t\tvar blocking = !boundary.is_pending();\n\n\t\t\tboundary.update_pending_count(1);\n\t\t\tbatch.increment(blocking);\n\n\t\t\tdeferreds.get(batch)?.reject(STALE_REACTION);\n\t\t\tdeferreds.delete(batch); // delete to ensure correct order in Map iteration below\n\t\t\tdeferreds.set(batch, d);\n\t\t}\n\n\t\t/**\n\t\t * @param {any} value\n\t\t * @param {unknown} error\n\t\t */\n\t\tconst handler = (value, error = undefined) => {\n\t\t\tcurrent_async_effect = null;\n\n\t\t\tbatch.activate();\n\n\t\t\tif (error) {\n\t\t\t\tif (error !== STALE_REACTION) {\n\t\t\t\t\tsignal.f |= ERROR_VALUE;\n\n\t\t\t\t\t// @ts-expect-error the error is the wrong type, but we don't care\n\t\t\t\t\tinternal_set(signal, error);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ((signal.f & ERROR_VALUE) !== 0) {\n\t\t\t\t\tsignal.f ^= ERROR_VALUE;\n\t\t\t\t}\n\n\t\t\t\tinternal_set(signal, value);\n\n\t\t\t\t// All prior async derived runs are now stale\n\t\t\t\tfor (const [b, d] of deferreds) {\n\t\t\t\t\tdeferreds.delete(b);\n\t\t\t\t\tif (b === batch) break;\n\t\t\t\t\td.reject(STALE_REACTION);\n\t\t\t\t}\n\n\t\t\t\tif (DEV && location !== undefined) {\n\t\t\t\t\trecent_async_deriveds.add(signal);\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tif (recent_async_deriveds.has(signal)) {\n\t\t\t\t\t\t\tw.await_waterfall(/** @type {string} */ (signal.label), location);\n\t\t\t\t\t\t\trecent_async_deriveds.delete(signal);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (should_suspend) {\n\t\t\t\tboundary.update_pending_count(-1);\n\t\t\t\tbatch.decrement(blocking);\n\t\t\t}\n\t\t};\n\n\t\td.promise.then(handler, (e) => handler(null, e || 'unknown'));\n\t});\n\n\tteardown(() => {\n\t\tfor (const d of deferreds.values()) {\n\t\t\td.reject(STALE_REACTION);\n\t\t}\n\t});\n\n\tif (DEV) {\n\t\t// add a flag that lets this be printed as a derived\n\t\t// when using `$inspect.trace()`\n\t\tsignal.f |= ASYNC;\n\t}\n\n\treturn new Promise((fulfil) => {\n\t\t/** @param {Promise<V>} p */\n\t\tfunction next(p) {\n\t\t\tfunction go() {\n\t\t\t\tif (p === promise) {\n\t\t\t\t\tfulfil(signal);\n\t\t\t\t} else {\n\t\t\t\t\t// if the effect re-runs before the initial promise\n\t\t\t\t\t// resolves, delay resolution until we have a value\n\t\t\t\t\tnext(promise);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tp.then(go, go);\n\t\t}\n\n\t\tnext(promise);\n\t});\n}\n\n/**\n * @template V\n * @param {() => V} fn\n * @returns {Derived<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function user_derived(fn) {\n\tconst d = derived(fn);\n\n\tif (!async_mode_flag) push_reaction_value(d);\n\n\treturn d;\n}\n\n/**\n * @template V\n * @param {() => V} fn\n * @returns {Derived<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function derived_safe_equal(fn) {\n\tconst signal = derived(fn);\n\tsignal.equals = safe_equals;\n\treturn signal;\n}\n\n/**\n * @param {Derived} derived\n * @returns {void}\n */\nexport function destroy_derived_effects(derived) {\n\tvar effects = derived.effects;\n\n\tif (effects !== null) {\n\t\tderived.effects = null;\n\n\t\tfor (var i = 0; i < effects.length; i += 1) {\n\t\t\tdestroy_effect(/** @type {Effect} */ (effects[i]));\n\t\t}\n\t}\n}\n\n/**\n * The currently updating deriveds, used to detect infinite recursion\n * in dev mode and provide a nicer error than 'too much recursion'\n * @type {Derived[]}\n */\nlet stack = [];\n\n/**\n * @param {Derived} derived\n * @returns {Effect | null}\n */\nfunction get_derived_parent_effect(derived) {\n\tvar parent = derived.parent;\n\twhile (parent !== null) {\n\t\tif ((parent.f & DERIVED) === 0) {\n\t\t\treturn /** @type {Effect} */ (parent);\n\t\t}\n\t\tparent = parent.parent;\n\t}\n\treturn null;\n}\n\n/**\n * @template T\n * @param {Derived} derived\n * @returns {T}\n */\nexport function execute_derived(derived) {\n\tvar value;\n\tvar prev_active_effect = active_effect;\n\n\tset_active_effect(get_derived_parent_effect(derived));\n\n\tif (DEV) {\n\t\tlet prev_inspect_effects = inspect_effects;\n\t\tset_inspect_effects(new Set());\n\t\ttry {\n\t\t\tif (stack.includes(derived)) {\n\t\t\t\te.derived_references_self();\n\t\t\t}\n\n\t\t\tstack.push(derived);\n\n\t\t\tderived.f &= ~WAS_MARKED;\n\t\t\tdestroy_derived_effects(derived);\n\t\t\tvalue = update_reaction(derived);\n\t\t} finally {\n\t\t\tset_active_effect(prev_active_effect);\n\t\t\tset_inspect_effects(prev_inspect_effects);\n\t\t\tstack.pop();\n\t\t}\n\t} else {\n\t\ttry {\n\t\t\tderived.f &= ~WAS_MARKED;\n\t\t\tdestroy_derived_effects(derived);\n\t\t\tvalue = update_reaction(derived);\n\t\t} finally {\n\t\t\tset_active_effect(prev_active_effect);\n\t\t}\n\t}\n\n\treturn value;\n}\n\n/**\n * @param {Derived} derived\n * @returns {void}\n */\nexport function update_derived(derived) {\n\tvar value = execute_derived(derived);\n\n\tif (!derived.equals(value)) {\n\t\t// TODO can we avoid setting `derived.v` when `batch_values !== null`,\n\t\t// without causing the value to be stale later?\n\t\tderived.v = value;\n\t\tderived.wv = increment_write_version();\n\t}\n\n\t// don't mark derived clean if we're reading it inside a\n\t// cleanup function, or it will cache a stale value\n\tif (is_destroying_effect) {\n\t\treturn;\n\t}\n\n\tif (batch_values !== null) {\n\t\tbatch_values.set(derived, derived.v);\n\t} else {\n\t\tvar status =\n\t\t\t(skip_reaction || (derived.f & UNOWNED) !== 0) && derived.deps !== null ? MAYBE_DIRTY : CLEAN;\n\n\t\tset_signal_status(derived, status);\n\t}\n}\n","/** @import { Derived, Effect, Source, Value } from '#client' */\nimport { DEV } from 'esm-env';\nimport {\n\tactive_reaction,\n\tactive_effect,\n\tuntracked_writes,\n\tget,\n\tset_untracked_writes,\n\tset_signal_status,\n\tuntrack,\n\tincrement_write_version,\n\tupdate_effect,\n\tcurrent_sources,\n\tis_dirty,\n\tuntracking,\n\tis_destroying_effect,\n\tpush_reaction_value\n} from '../runtime.js';\nimport { equals, safe_equals } from './equality.js';\nimport {\n\tCLEAN,\n\tDERIVED,\n\tDIRTY,\n\tBRANCH_EFFECT,\n\tINSPECT_EFFECT,\n\tUNOWNED,\n\tMAYBE_DIRTY,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT,\n\tASYNC,\n\tWAS_MARKED\n} from '#client/constants';\nimport * as e from '../errors.js';\nimport { legacy_mode_flag, tracing_mode_flag } from '../../flags/index.js';\nimport { get_stack, tag_proxy } from '../dev/tracing.js';\nimport { component_context, is_runes } from '../context.js';\nimport { Batch, eager_block_effects, schedule_effect } from './batch.js';\nimport { proxy } from '../proxy.js';\nimport { execute_derived } from './deriveds.js';\n\n/** @type {Set<any>} */\nexport let inspect_effects = new Set();\n\n/** @type {Map<Source, any>} */\nexport const old_values = new Map();\n\n/**\n * @param {Set<any>} v\n */\nexport function set_inspect_effects(v) {\n\tinspect_effects = v;\n}\n\nlet inspect_effects_deferred = false;\n\nexport function set_inspect_effects_deferred() {\n\tinspect_effects_deferred = true;\n}\n\n/**\n * @template V\n * @param {V} v\n * @param {Error | null} [stack]\n * @returns {Source<V>}\n */\n// TODO rename this to `state` throughout the codebase\nexport function source(v, stack) {\n\t/** @type {Value} */\n\tvar signal = {\n\t\tf: 0, // TODO ideally we could skip this altogether, but it causes type errors\n\t\tv,\n\t\treactions: null,\n\t\tequals,\n\t\trv: 0,\n\t\twv: 0\n\t};\n\n\tif (DEV && tracing_mode_flag) {\n\t\tsignal.created = stack ?? get_stack('CreatedAt');\n\t\tsignal.updated = null;\n\t\tsignal.set_during_effect = false;\n\t\tsignal.trace = null;\n\t}\n\n\treturn signal;\n}\n\n/**\n * @template V\n * @param {V} v\n * @param {Error | null} [stack]\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function state(v, stack) {\n\tconst s = source(v, stack);\n\n\tpush_reaction_value(s);\n\n\treturn s;\n}\n\n/**\n * @template V\n * @param {V} initial_value\n * @param {boolean} [immutable]\n * @returns {Source<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function mutable_source(initial_value, immutable = false, trackable = true) {\n\tconst s = source(initial_value);\n\tif (!immutable) {\n\t\ts.equals = safe_equals;\n\t}\n\n\t// bind the signal to the component context, in case we need to\n\t// track updates to trigger beforeUpdate/afterUpdate callbacks\n\tif (legacy_mode_flag && trackable && component_context !== null && component_context.l !== null) {\n\t\t(component_context.l.s ??= []).push(s);\n\t}\n\n\treturn s;\n}\n\n/**\n * @template V\n * @param {Value<V>} source\n * @param {V} value\n */\nexport function mutate(source, value) {\n\tset(\n\t\tsource,\n\t\tuntrack(() => get(source))\n\t);\n\treturn value;\n}\n\n/**\n * @template V\n * @param {Source<V>} source\n * @param {V} value\n * @param {boolean} [should_proxy]\n * @returns {V}\n */\nexport function set(source, value, should_proxy = false) {\n\tif (\n\t\tactive_reaction !== null &&\n\t\t// since we are untracking the function inside `$inspect.with` we need to add this check\n\t\t// to ensure we error if state is set inside an inspect effect\n\t\t(!untracking || (active_reaction.f & INSPECT_EFFECT) !== 0) &&\n\t\tis_runes() &&\n\t\t(active_reaction.f & (DERIVED | BLOCK_EFFECT | ASYNC | INSPECT_EFFECT)) !== 0 &&\n\t\t!current_sources?.includes(source)\n\t) {\n\t\te.state_unsafe_mutation();\n\t}\n\n\tlet new_value = should_proxy ? proxy(value) : value;\n\n\tif (DEV) {\n\t\ttag_proxy(new_value, /** @type {string} */ (source.label));\n\t}\n\n\treturn internal_set(source, new_value);\n}\n\n/**\n * @template V\n * @param {Source<V>} source\n * @param {V} value\n * @returns {V}\n */\nexport function internal_set(source, value) {\n\tif (!source.equals(value)) {\n\t\tvar old_value = source.v;\n\n\t\tif (is_destroying_effect) {\n\t\t\told_values.set(source, value);\n\t\t} else {\n\t\t\told_values.set(source, old_value);\n\t\t}\n\n\t\tsource.v = value;\n\n\t\tvar batch = Batch.ensure();\n\t\tbatch.capture(source, old_value);\n\n\t\tif (DEV) {\n\t\t\tif (tracing_mode_flag || active_effect !== null) {\n\t\t\t\tconst error = get_stack('UpdatedAt');\n\n\t\t\t\tif (error !== null) {\n\t\t\t\t\tsource.updated ??= new Map();\n\t\t\t\t\tlet entry = source.updated.get(error.stack);\n\n\t\t\t\t\tif (!entry) {\n\t\t\t\t\t\tentry = { error, count: 0 };\n\t\t\t\t\t\tsource.updated.set(error.stack, entry);\n\t\t\t\t\t}\n\n\t\t\t\t\tentry.count++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (active_effect !== null) {\n\t\t\t\tsource.set_during_effect = true;\n\t\t\t}\n\t\t}\n\n\t\tif ((source.f & DERIVED) !== 0) {\n\t\t\t// if we are assigning to a dirty derived we set it to clean/maybe dirty but we also eagerly execute it to track the dependencies\n\t\t\tif ((source.f & DIRTY) !== 0) {\n\t\t\t\texecute_derived(/** @type {Derived} */ (source));\n\t\t\t}\n\t\t\tset_signal_status(source, (source.f & UNOWNED) === 0 ? CLEAN : MAYBE_DIRTY);\n\t\t}\n\n\t\tsource.wv = increment_write_version();\n\n\t\tmark_reactions(source, DIRTY);\n\n\t\t// It's possible that the current reaction might not have up-to-date dependencies\n\t\t// whilst it's actively running. So in the case of ensuring it registers the reaction\n\t\t// properly for itself, we need to ensure the current effect actually gets\n\t\t// scheduled. i.e: `$effect(() => x++)`\n\t\tif (\n\t\t\tis_runes() &&\n\t\t\tactive_effect !== null &&\n\t\t\t(active_effect.f & CLEAN) !== 0 &&\n\t\t\t(active_effect.f & (BRANCH_EFFECT | ROOT_EFFECT)) === 0\n\t\t) {\n\t\t\tif (untracked_writes === null) {\n\t\t\t\tset_untracked_writes([source]);\n\t\t\t} else {\n\t\t\t\tuntracked_writes.push(source);\n\t\t\t}\n\t\t}\n\n\t\tif (DEV && inspect_effects.size > 0 && !inspect_effects_deferred) {\n\t\t\tflush_inspect_effects();\n\t\t}\n\t}\n\n\treturn value;\n}\n\nexport function flush_inspect_effects() {\n\tinspect_effects_deferred = false;\n\n\tconst inspects = Array.from(inspect_effects);\n\n\tfor (const effect of inspects) {\n\t\t// Mark clean inspect-effects as maybe dirty and then check their dirtiness\n\t\t// instead of just updating the effects - this way we avoid overfiring.\n\t\tif ((effect.f & CLEAN) !== 0) {\n\t\t\tset_signal_status(effect, MAYBE_DIRTY);\n\t\t}\n\n\t\tif (is_dirty(effect)) {\n\t\t\tupdate_effect(effect);\n\t\t}\n\t}\n\n\tinspect_effects.clear();\n}\n\n/**\n * @template {number | bigint} T\n * @param {Source<T>} source\n * @param {1 | -1} [d]\n * @returns {T}\n */\nexport function update(source, d = 1) {\n\tvar value = get(source);\n\tvar result = d === 1 ? value++ : value--;\n\n\tset(source, value);\n\n\t// @ts-expect-error\n\treturn result;\n}\n\n/**\n * @template {number | bigint} T\n * @param {Source<T>} source\n * @param {1 | -1} [d]\n * @returns {T}\n */\nexport function update_pre(source, d = 1) {\n\tvar value = get(source);\n\n\t// @ts-expect-error\n\treturn set(source, d === 1 ? ++value : --value);\n}\n\n/**\n * Silently (without using `get`) increment a source\n * @param {Source<number>} source\n */\nexport function increment(source) {\n\tset(source, source.v + 1);\n}\n\n/**\n * @param {Value} signal\n * @param {number} status should be DIRTY or MAYBE_DIRTY\n * @returns {void}\n */\nfunction mark_reactions(signal, status) {\n\tvar reactions = signal.reactions;\n\tif (reactions === null) return;\n\n\tvar runes = is_runes();\n\tvar length = reactions.length;\n\n\tfor (var i = 0; i < length; i++) {\n\t\tvar reaction = reactions[i];\n\t\tvar flags = reaction.f;\n\n\t\t// In legacy mode, skip the current effect to prevent infinite loops\n\t\tif (!runes && reaction === active_effect) continue;\n\n\t\t// Inspect effects need to run immediately, so that the stack trace makes sense\n\t\tif (DEV && (flags & INSPECT_EFFECT) !== 0) {\n\t\t\tinspect_effects.add(reaction);\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar not_dirty = (flags & DIRTY) === 0;\n\n\t\t// don't set a DIRTY reaction to MAYBE_DIRTY\n\t\tif (not_dirty) {\n\t\t\tset_signal_status(reaction, status);\n\t\t}\n\n\t\tif ((flags & DERIVED) !== 0) {\n\t\t\tif ((flags & WAS_MARKED) === 0) {\n\t\t\t\treaction.f |= WAS_MARKED;\n\t\t\t\tmark_reactions(/** @type {Derived} */ (reaction), MAYBE_DIRTY);\n\t\t\t}\n\t\t} else if (not_dirty) {\n\t\t\tif ((flags & BLOCK_EFFECT) !== 0) {\n\t\t\t\tif (eager_block_effects !== null) {\n\t\t\t\t\teager_block_effects.add(/** @type {Effect} */ (reaction));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tschedule_effect(/** @type {Effect} */ (reaction));\n\t\t}\n\t}\n}\n","/** @import { Source } from '#client' */\nimport { DEV } from 'esm-env';\nimport {\n\tget,\n\tactive_effect,\n\tupdate_version,\n\tactive_reaction,\n\tset_update_version,\n\tset_active_reaction\n} from './runtime.js';\nimport {\n\tarray_prototype,\n\tget_descriptor,\n\tget_prototype_of,\n\tis_array,\n\tobject_prototype\n} from '../shared/utils.js';\nimport {\n\tstate as source,\n\tset,\n\tincrement,\n\tflush_inspect_effects,\n\tset_inspect_effects_deferred\n} from './reactivity/sources.js';\nimport { PROXY_PATH_SYMBOL, STATE_SYMBOL } from '#client/constants';\nimport { UNINITIALIZED } from '../../constants.js';\nimport * as e from './errors.js';\nimport { get_stack, tag } from './dev/tracing.js';\nimport { tracing_mode_flag } from '../flags/index.js';\n\n// TODO move all regexes into shared module?\nconst regex_is_valid_identifier = /^[a-zA-Z_$][a-zA-Z_$0-9]*$/;\n\n/**\n * @template T\n * @param {T} value\n * @returns {T}\n */\nexport function proxy(value) {\n\t// if non-proxyable, or is already a proxy, return `value`\n\tif (typeof value !== 'object' || value === null || STATE_SYMBOL in value) {\n\t\treturn value;\n\t}\n\n\tconst prototype = get_prototype_of(value);\n\n\tif (prototype !== object_prototype && prototype !== array_prototype) {\n\t\treturn value;\n\t}\n\n\t/** @type {Map<any, Source<any>>} */\n\tvar sources = new Map();\n\tvar is_proxied_array = is_array(value);\n\tvar version = source(0);\n\n\tvar stack = DEV && tracing_mode_flag ? get_stack('CreatedAt') : null;\n\tvar parent_version = update_version;\n\n\t/**\n\t * Executes the proxy in the context of the reaction it was originally created in, if any\n\t * @template T\n\t * @param {() => T} fn\n\t */\n\tvar with_parent = (fn) => {\n\t\tif (update_version === parent_version) {\n\t\t\treturn fn();\n\t\t}\n\n\t\t// child source is being created after the initial proxy \n\t\t// prevent it from being associated with the current reaction\n\t\tvar reaction = active_reaction;\n\t\tvar version = update_version;\n\n\t\tset_active_reaction(null);\n\t\tset_update_version(parent_version);\n\n\t\tvar result = fn();\n\n\t\tset_active_reaction(reaction);\n\t\tset_update_version(version);\n\n\t\treturn result;\n\t};\n\n\tif (is_proxied_array) {\n\t\t// We need to create the length source eagerly to ensure that\n\t\t// mutations to the array are properly synced with our proxy\n\t\tsources.set('length', source(/** @type {any[]} */ (value).length, stack));\n\t\tif (DEV) {\n\t\t\tvalue = /** @type {any} */ (inspectable_array(/** @type {any[]} */ (value)));\n\t\t}\n\t}\n\n\t/** Used in dev for $inspect.trace() */\n\tvar path = '';\n\tlet updating = false;\n\t/** @param {string} new_path */\n\tfunction update_path(new_path) {\n\t\tif (updating) return;\n\t\tupdating = true;\n\t\tpath = new_path;\n\n\t\ttag(version, `${path} version`);\n\n\t\t// rename all child sources and child proxies\n\t\tfor (const [prop, source] of sources) {\n\t\t\ttag(source, get_label(path, prop));\n\t\t}\n\t\tupdating = false;\n\t}\n\n\treturn new Proxy(/** @type {any} */ (value), {\n\t\tdefineProperty(_, prop, descriptor) {\n\t\t\tif (\n\t\t\t\t!('value' in descriptor) ||\n\t\t\t\tdescriptor.configurable === false ||\n\t\t\t\tdescriptor.enumerable === false ||\n\t\t\t\tdescriptor.writable === false\n\t\t\t) {\n\t\t\t\t// we disallow non-basic descriptors, because unless they are applied to the\n\t\t\t\t// target object  which we avoid, so that state can be forked  we will run\n\t\t\t\t// afoul of the various invariants\n\t\t\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/getOwnPropertyDescriptor#invariants\n\t\t\t\te.state_descriptors_fixed();\n\t\t\t}\n\t\t\tvar s = sources.get(prop);\n\t\t\tif (s === undefined) {\n\t\t\t\ts = with_parent(() => {\n\t\t\t\t\tvar s = source(descriptor.value, stack);\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t\tif (DEV && typeof prop === 'string') {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\t\t\t\t\treturn s;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tset(s, descriptor.value, true);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tdeleteProperty(target, prop) {\n\t\t\tvar s = sources.get(prop);\n\n\t\t\tif (s === undefined) {\n\t\t\t\tif (prop in target) {\n\t\t\t\t\tconst s = with_parent(() => source(UNINITIALIZED, stack));\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t\tincrement(version);\n\n\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tset(s, UNINITIALIZED);\n\t\t\t\tincrement(version);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tget(target, prop, receiver) {\n\t\t\tif (prop === STATE_SYMBOL) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (DEV && prop === PROXY_PATH_SYMBOL) {\n\t\t\t\treturn update_path;\n\t\t\t}\n\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar exists = prop in target;\n\n\t\t\t// create a source, but only if it's an own property and not a prototype property\n\t\t\tif (s === undefined && (!exists || get_descriptor(target, prop)?.writable)) {\n\t\t\t\ts = with_parent(() => {\n\t\t\t\t\tvar p = proxy(exists ? target[prop] : UNINITIALIZED);\n\t\t\t\t\tvar s = source(p, stack);\n\n\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn s;\n\t\t\t\t});\n\n\t\t\t\tsources.set(prop, s);\n\t\t\t}\n\n\t\t\tif (s !== undefined) {\n\t\t\t\tvar v = get(s);\n\t\t\t\treturn v === UNINITIALIZED ? undefined : v;\n\t\t\t}\n\n\t\t\treturn Reflect.get(target, prop, receiver);\n\t\t},\n\n\t\tgetOwnPropertyDescriptor(target, prop) {\n\t\t\tvar descriptor = Reflect.getOwnPropertyDescriptor(target, prop);\n\n\t\t\tif (descriptor && 'value' in descriptor) {\n\t\t\t\tvar s = sources.get(prop);\n\t\t\t\tif (s) descriptor.value = get(s);\n\t\t\t} else if (descriptor === undefined) {\n\t\t\t\tvar source = sources.get(prop);\n\t\t\t\tvar value = source?.v;\n\n\t\t\t\tif (source !== undefined && value !== UNINITIALIZED) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\tconfigurable: true,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\twritable: true\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn descriptor;\n\t\t},\n\n\t\thas(target, prop) {\n\t\t\tif (prop === STATE_SYMBOL) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar has = (s !== undefined && s.v !== UNINITIALIZED) || Reflect.has(target, prop);\n\n\t\t\tif (\n\t\t\t\ts !== undefined ||\n\t\t\t\t(active_effect !== null && (!has || get_descriptor(target, prop)?.writable))\n\t\t\t) {\n\t\t\t\tif (s === undefined) {\n\t\t\t\t\ts = with_parent(() => {\n\t\t\t\t\t\tvar p = has ? proxy(target[prop]) : UNINITIALIZED;\n\t\t\t\t\t\tvar s = source(p, stack);\n\n\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn s;\n\t\t\t\t\t});\n\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t}\n\n\t\t\t\tvar value = get(s);\n\t\t\t\tif (value === UNINITIALIZED) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn has;\n\t\t},\n\n\t\tset(target, prop, value, receiver) {\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar has = prop in target;\n\n\t\t\t// variable.length = value -> clear all signals with index >= value\n\t\t\tif (is_proxied_array && prop === 'length') {\n\t\t\t\tfor (var i = value; i < /** @type {Source<number>} */ (s).v; i += 1) {\n\t\t\t\t\tvar other_s = sources.get(i + '');\n\t\t\t\t\tif (other_s !== undefined) {\n\t\t\t\t\t\tset(other_s, UNINITIALIZED);\n\t\t\t\t\t} else if (i in target) {\n\t\t\t\t\t\t// If the item exists in the original, we need to create a uninitialized source,\n\t\t\t\t\t\t// else a later read of the property would result in a source being created with\n\t\t\t\t\t\t// the value of the original item at that index.\n\t\t\t\t\t\tother_s = with_parent(() => source(UNINITIALIZED, stack));\n\t\t\t\t\t\tsources.set(i + '', other_s);\n\n\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\ttag(other_s, get_label(path, i));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we haven't yet created a source for this property, we need to ensure\n\t\t\t// we do so otherwise if we read it later, then the write won't be tracked and\n\t\t\t// the heuristics of effects will be different vs if we had read the proxied\n\t\t\t// object property before writing to that property.\n\t\t\tif (s === undefined) {\n\t\t\t\tif (!has || get_descriptor(target, prop)?.writable) {\n\t\t\t\t\ts = with_parent(() => source(undefined, stack));\n\n\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\t\t\t\t\tset(s, proxy(value));\n\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\thas = s.v !== UNINITIALIZED;\n\n\t\t\t\tvar p = with_parent(() => proxy(value));\n\t\t\t\tset(s, p);\n\t\t\t}\n\n\t\t\tvar descriptor = Reflect.getOwnPropertyDescriptor(target, prop);\n\n\t\t\t// Set the new value before updating any signals so that any listeners get the new value\n\t\t\tif (descriptor?.set) {\n\t\t\t\tdescriptor.set.call(receiver, value);\n\t\t\t}\n\n\t\t\tif (!has) {\n\t\t\t\t// If we have mutated an array directly, we might need to\n\t\t\t\t// signal that length has also changed. Do it before updating metadata\n\t\t\t\t// to ensure that iterating over the array as a result of a metadata update\n\t\t\t\t// will not cause the length to be out of sync.\n\t\t\t\tif (is_proxied_array && typeof prop === 'string') {\n\t\t\t\t\tvar ls = /** @type {Source<number>} */ (sources.get('length'));\n\t\t\t\t\tvar n = Number(prop);\n\n\t\t\t\t\tif (Number.isInteger(n) && n >= ls.v) {\n\t\t\t\t\t\tset(ls, n + 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tincrement(version);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\townKeys(target) {\n\t\t\tget(version);\n\n\t\t\tvar own_keys = Reflect.ownKeys(target).filter((key) => {\n\t\t\t\tvar source = sources.get(key);\n\t\t\t\treturn source === undefined || source.v !== UNINITIALIZED;\n\t\t\t});\n\n\t\t\tfor (var [key, source] of sources) {\n\t\t\t\tif (source.v !== UNINITIALIZED && !(key in target)) {\n\t\t\t\t\town_keys.push(key);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn own_keys;\n\t\t},\n\n\t\tsetPrototypeOf() {\n\t\t\te.state_prototype_fixed();\n\t\t}\n\t});\n}\n\n/**\n * @param {string} path\n * @param {string | symbol} prop\n */\nfunction get_label(path, prop) {\n\tif (typeof prop === 'symbol') return `${path}[Symbol(${prop.description ?? ''})]`;\n\tif (regex_is_valid_identifier.test(prop)) return `${path}.${prop}`;\n\treturn /^\\d+$/.test(prop) ? `${path}[${prop}]` : `${path}['${prop}']`;\n}\n\n/**\n * @param {any} value\n */\nexport function get_proxied_value(value) {\n\ttry {\n\t\tif (value !== null && typeof value === 'object' && STATE_SYMBOL in value) {\n\t\t\treturn value[STATE_SYMBOL];\n\t\t}\n\t} catch {\n\t\t// the above if check can throw an error if the value in question\n\t\t// is the contentWindow of an iframe on another domain, in which\n\t\t// case we want to just return the value (because it's definitely\n\t\t// not a proxied value) so we don't break any JavaScript interacting\n\t\t// with that iframe (such as various payment companies client side\n\t\t// JavaScript libraries interacting with their iframes on the same\n\t\t// domain)\n\t}\n\n\treturn value;\n}\n\n/**\n * @param {any} a\n * @param {any} b\n */\nexport function is(a, b) {\n\treturn Object.is(get_proxied_value(a), get_proxied_value(b));\n}\n\nconst ARRAY_MUTATING_METHODS = new Set([\n\t'copyWithin',\n\t'fill',\n\t'pop',\n\t'push',\n\t'reverse',\n\t'shift',\n\t'sort',\n\t'splice',\n\t'unshift'\n]);\n\n/**\n * Wrap array mutating methods so $inspect is triggered only once and\n * to prevent logging an array in intermediate state (e.g. with an empty slot)\n * @param {any[]} array\n */\nfunction inspectable_array(array) {\n\treturn new Proxy(array, {\n\t\tget(target, prop, receiver) {\n\t\t\tvar value = Reflect.get(target, prop, receiver);\n\t\t\tif (!ARRAY_MUTATING_METHODS.has(/** @type {string} */ (prop))) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * @this {any[]}\n\t\t\t * @param {any[]} args\n\t\t\t */\n\t\t\treturn function (...args) {\n\t\t\t\tset_inspect_effects_deferred();\n\t\t\t\tvar result = value.apply(this, args);\n\t\t\t\tflush_inspect_effects();\n\t\t\t\treturn result;\n\t\t\t};\n\t\t}\n\t});\n}\n","import * as w from '../warnings.js';\nimport { get_proxied_value } from '../proxy.js';\n\nexport function init_array_prototype_warnings() {\n\tconst array_prototype = Array.prototype;\n\t// The REPL ends up here over and over, and this prevents it from adding more and more patches\n\t// of the same kind to the prototype, which would slow down everything over time.\n\t// @ts-expect-error\n\tconst cleanup = Array.__svelte_cleanup;\n\tif (cleanup) {\n\t\tcleanup();\n\t}\n\n\tconst { indexOf, lastIndexOf, includes } = array_prototype;\n\n\tarray_prototype.indexOf = function (item, from_index) {\n\t\tconst index = indexOf.call(this, item, from_index);\n\n\t\tif (index === -1) {\n\t\t\tfor (let i = from_index ?? 0; i < this.length; i += 1) {\n\t\t\t\tif (get_proxied_value(this[i]) === item) {\n\t\t\t\t\tw.state_proxy_equality_mismatch('array.indexOf(...)');\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t};\n\n\tarray_prototype.lastIndexOf = function (item, from_index) {\n\t\t// we need to specify this.length - 1 because it's probably using something like\n\t\t// `arguments` inside so passing undefined is different from not passing anything\n\t\tconst index = lastIndexOf.call(this, item, from_index ?? this.length - 1);\n\n\t\tif (index === -1) {\n\t\t\tfor (let i = 0; i <= (from_index ?? this.length - 1); i += 1) {\n\t\t\t\tif (get_proxied_value(this[i]) === item) {\n\t\t\t\t\tw.state_proxy_equality_mismatch('array.lastIndexOf(...)');\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t};\n\n\tarray_prototype.includes = function (item, from_index) {\n\t\tconst has = includes.call(this, item, from_index);\n\n\t\tif (!has) {\n\t\t\tfor (let i = 0; i < this.length; i += 1) {\n\t\t\t\tif (get_proxied_value(this[i]) === item) {\n\t\t\t\t\tw.state_proxy_equality_mismatch('array.includes(...)');\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn has;\n\t};\n\n\t// @ts-expect-error\n\tArray.__svelte_cleanup = () => {\n\t\tarray_prototype.indexOf = indexOf;\n\t\tarray_prototype.lastIndexOf = lastIndexOf;\n\t\tarray_prototype.includes = includes;\n\t};\n}\n\n/**\n * @param {any} a\n * @param {any} b\n * @param {boolean} equal\n * @returns {boolean}\n */\nexport function strict_equals(a, b, equal = true) {\n\t// try-catch needed because this tries to read properties of `a` and `b`,\n\t// which could be disallowed for example in a secure context\n\ttry {\n\t\tif ((a === b) !== (get_proxied_value(a) === get_proxied_value(b))) {\n\t\t\tw.state_proxy_equality_mismatch(equal ? '===' : '!==');\n\t\t}\n\t} catch {}\n\n\treturn (a === b) === equal;\n}\n\n/**\n * @param {any} a\n * @param {any} b\n * @param {boolean} equal\n * @returns {boolean}\n */\nexport function equals(a, b, equal = true) {\n\tif ((a == b) !== (get_proxied_value(a) == get_proxied_value(b))) {\n\t\tw.state_proxy_equality_mismatch(equal ? '==' : '!=');\n\t}\n\n\treturn (a == b) === equal;\n}\n","/** @import { Effect, TemplateNode } from '#client' */\nimport { hydrate_node, hydrating, set_hydrate_node } from './hydration.js';\nimport { DEV } from 'esm-env';\nimport { init_array_prototype_warnings } from '../dev/equality.js';\nimport { get_descriptor, is_extensible } from '../../shared/utils.js';\nimport { active_effect } from '../runtime.js';\nimport { async_mode_flag } from '../../flags/index.js';\nimport { TEXT_NODE, EFFECT_RAN } from '#client/constants';\nimport { eager_block_effects } from '../reactivity/batch.js';\n\n// export these for reference in the compiled code, making global name deduplication unnecessary\n/** @type {Window} */\nexport var $window;\n\n/** @type {Document} */\nexport var $document;\n\n/** @type {boolean} */\nexport var is_firefox;\n\n/** @type {() => Node | null} */\nvar first_child_getter;\n/** @type {() => Node | null} */\nvar next_sibling_getter;\n\n/**\n * Initialize these lazily to avoid issues when using the runtime in a server context\n * where these globals are not available while avoiding a separate server entry point\n */\nexport function init_operations() {\n\tif ($window !== undefined) {\n\t\treturn;\n\t}\n\n\t$window = window;\n\t$document = document;\n\tis_firefox = /Firefox/.test(navigator.userAgent);\n\n\tvar element_prototype = Element.prototype;\n\tvar node_prototype = Node.prototype;\n\tvar text_prototype = Text.prototype;\n\n\t// @ts-ignore\n\tfirst_child_getter = get_descriptor(node_prototype, 'firstChild').get;\n\t// @ts-ignore\n\tnext_sibling_getter = get_descriptor(node_prototype, 'nextSibling').get;\n\n\tif (is_extensible(element_prototype)) {\n\t\t// the following assignments improve perf of lookups on DOM nodes\n\t\t// @ts-expect-error\n\t\telement_prototype.__click = undefined;\n\t\t// @ts-expect-error\n\t\telement_prototype.__className = undefined;\n\t\t// @ts-expect-error\n\t\telement_prototype.__attributes = null;\n\t\t// @ts-expect-error\n\t\telement_prototype.__style = undefined;\n\t\t// @ts-expect-error\n\t\telement_prototype.__e = undefined;\n\t}\n\n\tif (is_extensible(text_prototype)) {\n\t\t// @ts-expect-error\n\t\ttext_prototype.__t = undefined;\n\t}\n\n\tif (DEV) {\n\t\t// @ts-expect-error\n\t\telement_prototype.__svelte_meta = null;\n\n\t\tinit_array_prototype_warnings();\n\t}\n}\n\n/**\n * @param {string} value\n * @returns {Text}\n */\nexport function create_text(value = '') {\n\treturn document.createTextNode(value);\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n * @returns {Node | null}\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function get_first_child(node) {\n\treturn first_child_getter.call(node);\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n * @returns {Node | null}\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function get_next_sibling(node) {\n\treturn next_sibling_getter.call(node);\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @template {Node} N\n * @param {N} node\n * @param {boolean} is_text\n * @returns {Node | null}\n */\nexport function child(node, is_text) {\n\tif (!hydrating) {\n\t\treturn get_first_child(node);\n\t}\n\n\tvar child = /** @type {TemplateNode} */ (get_first_child(hydrate_node));\n\n\t// Child can be null if we have an element with a single child, like `<p>{text}</p>`, where `text` is empty\n\tif (child === null) {\n\t\tchild = hydrate_node.appendChild(create_text());\n\t} else if (is_text && child.nodeType !== TEXT_NODE) {\n\t\tvar text = create_text();\n\t\tchild?.before(text);\n\t\tset_hydrate_node(text);\n\t\treturn text;\n\t}\n\n\tset_hydrate_node(child);\n\treturn child;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {DocumentFragment | TemplateNode | TemplateNode[]} fragment\n * @param {boolean} [is_text]\n * @returns {Node | null}\n */\nexport function first_child(fragment, is_text = false) {\n\tif (!hydrating) {\n\t\t// when not hydrating, `fragment` is a `DocumentFragment` (the result of calling `open_frag`)\n\t\tvar first = /** @type {DocumentFragment} */ (get_first_child(/** @type {Node} */ (fragment)));\n\n\t\t// TODO prevent user comments with the empty string when preserveComments is true\n\t\tif (first instanceof Comment && first.data === '') return get_next_sibling(first);\n\n\t\treturn first;\n\t}\n\n\t// if an {expression} is empty during SSR, there might be no\n\t// text node to hydrate  we must therefore create one\n\tif (is_text && hydrate_node?.nodeType !== TEXT_NODE) {\n\t\tvar text = create_text();\n\n\t\thydrate_node?.before(text);\n\t\tset_hydrate_node(text);\n\t\treturn text;\n\t}\n\n\treturn hydrate_node;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {TemplateNode} node\n * @param {number} count\n * @param {boolean} is_text\n * @returns {Node | null}\n */\nexport function sibling(node, count = 1, is_text = false) {\n\tlet next_sibling = hydrating ? hydrate_node : node;\n\tvar last_sibling;\n\n\twhile (count--) {\n\t\tlast_sibling = next_sibling;\n\t\tnext_sibling = /** @type {TemplateNode} */ (get_next_sibling(next_sibling));\n\t}\n\n\tif (!hydrating) {\n\t\treturn next_sibling;\n\t}\n\n\t// if a sibling {expression} is empty during SSR, there might be no\n\t// text node to hydrate  we must therefore create one\n\tif (is_text && next_sibling?.nodeType !== TEXT_NODE) {\n\t\tvar text = create_text();\n\t\t// If the next sibling is `null` and we're handling text then it's because\n\t\t// the SSR content was empty for the text, so we need to generate a new text\n\t\t// node and insert it after the last sibling\n\t\tif (next_sibling === null) {\n\t\t\tlast_sibling?.after(text);\n\t\t} else {\n\t\t\tnext_sibling.before(text);\n\t\t}\n\t\tset_hydrate_node(text);\n\t\treturn text;\n\t}\n\n\tset_hydrate_node(next_sibling);\n\treturn /** @type {TemplateNode} */ (next_sibling);\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n * @returns {void}\n */\nexport function clear_text_content(node) {\n\tnode.textContent = '';\n}\n\n/**\n * Returns `true` if we're updating the current block, for example `condition` in\n * an `{#if condition}` block just changed. In this case, the branch should be\n * appended (or removed) at the same time as other updates within the\n * current `<svelte:boundary>`\n */\nexport function should_defer_append() {\n\tif (!async_mode_flag) return false;\n\tif (eager_block_effects !== null) return false;\n\n\tvar flags = /** @type {Effect} */ (active_effect).f;\n\treturn (flags & EFFECT_RAN) !== 0;\n}\n\n/**\n *\n * @param {string} tag\n * @param {string} [namespace]\n * @param {string} [is]\n * @returns\n */\nexport function create_element(tag, namespace, is) {\n\tlet options = is ? { is } : undefined;\n\tif (namespace) {\n\t\treturn document.createElementNS(namespace, tag, options);\n\t}\n\treturn document.createElement(tag, options);\n}\n\nexport function create_fragment() {\n\treturn document.createDocumentFragment();\n}\n\n/**\n * @param {string} data\n * @returns\n */\nexport function create_comment(data = '') {\n\treturn document.createComment(data);\n}\n\n/**\n * @param {Element} element\n * @param {string} key\n * @param {string} value\n * @returns\n */\nexport function set_attribute(element, key, value = '') {\n\tif (key.startsWith('xlink:')) {\n\t\telement.setAttributeNS('http://www.w3.org/1999/xlink', key, value);\n\t\treturn;\n\t}\n\treturn element.setAttribute(key, value);\n}\n","import { hydrating } from '../hydration.js';\nimport { clear_text_content, get_first_child } from '../operations.js';\nimport { queue_micro_task } from '../task.js';\n\n/**\n * @param {HTMLElement} dom\n * @param {boolean} value\n * @returns {void}\n */\nexport function autofocus(dom, value) {\n\tif (value) {\n\t\tconst body = document.body;\n\t\tdom.autofocus = true;\n\n\t\tqueue_micro_task(() => {\n\t\t\tif (document.activeElement === body) {\n\t\t\t\tdom.focus();\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * The child of a textarea actually corresponds to the defaultValue property, so we need\n * to remove it upon hydration to avoid a bug when someone resets the form value.\n * @param {HTMLTextAreaElement} dom\n * @returns {void}\n */\nexport function remove_textarea_child(dom) {\n\tif (hydrating && get_first_child(dom) !== null) {\n\t\tclear_text_content(dom);\n\t}\n}\n\nlet listening_to_form_reset = false;\n\nexport function add_form_reset_listener() {\n\tif (!listening_to_form_reset) {\n\t\tlistening_to_form_reset = true;\n\t\tdocument.addEventListener(\n\t\t\t'reset',\n\t\t\t(evt) => {\n\t\t\t\t// Needs to happen one tick later or else the dom properties of the form\n\t\t\t\t// elements have not updated to their reset values yet\n\t\t\t\tPromise.resolve().then(() => {\n\t\t\t\t\tif (!evt.defaultPrevented) {\n\t\t\t\t\t\tfor (const e of /**@type {HTMLFormElement} */ (evt.target).elements) {\n\t\t\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\t\t\te.__on_r?.();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// In the capture phase to guarantee we get noticed of it (no possiblity of stopPropagation)\n\t\t\t{ capture: true }\n\t\t);\n\t}\n}\n","import { teardown } from '../../../reactivity/effects.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../../runtime.js';\nimport { add_form_reset_listener } from '../misc.js';\n\n/**\n * Fires the handler once immediately (unless corresponding arg is set to `false`),\n * then listens to the given events until the render effect context is destroyed\n * @param {EventTarget} target\n * @param {Array<string>} events\n * @param {(event?: Event) => void} handler\n * @param {any} call_handler_immediately\n */\nexport function listen(target, events, handler, call_handler_immediately = true) {\n\tif (call_handler_immediately) {\n\t\thandler();\n\t}\n\n\tfor (var name of events) {\n\t\ttarget.addEventListener(name, handler);\n\t}\n\n\tteardown(() => {\n\t\tfor (var name of events) {\n\t\t\ttarget.removeEventListener(name, handler);\n\t\t}\n\t});\n}\n\n/**\n * @template T\n * @param {() => T} fn\n */\nexport function without_reactive_context(fn) {\n\tvar previous_reaction = active_reaction;\n\tvar previous_effect = active_effect;\n\tset_active_reaction(null);\n\tset_active_effect(null);\n\ttry {\n\t\treturn fn();\n\t} finally {\n\t\tset_active_reaction(previous_reaction);\n\t\tset_active_effect(previous_effect);\n\t}\n}\n\n/**\n * Listen to the given event, and then instantiate a global form reset listener if not already done,\n * to notify all bindings when the form is reset\n * @param {HTMLElement} element\n * @param {string} event\n * @param {(is_reset?: true) => void} handler\n * @param {(is_reset?: true) => void} [on_reset]\n */\nexport function listen_to_event_and_reset_event(element, event, handler, on_reset = handler) {\n\telement.addEventListener(event, () => without_reactive_context(handler));\n\t// @ts-expect-error\n\tconst prev = element.__on_r;\n\tif (prev) {\n\t\t// special case for checkbox that can have multiple binds (group & checked)\n\t\t// @ts-expect-error\n\t\telement.__on_r = () => {\n\t\t\tprev();\n\t\t\ton_reset(true);\n\t\t};\n\t} else {\n\t\t// @ts-expect-error\n\t\telement.__on_r = () => on_reset(true);\n\t}\n\n\tadd_form_reset_listener();\n}\n","/** @import { ComponentContext, ComponentContextLegacy, Derived, Effect, TemplateNode, TransitionManager } from '#client' */\nimport {\n\tis_dirty,\n\tactive_effect,\n\tactive_reaction,\n\tupdate_effect,\n\tget,\n\tis_destroying_effect,\n\tremove_reactions,\n\tset_active_reaction,\n\tset_is_destroying_effect,\n\tset_signal_status,\n\tuntrack,\n\tuntracking\n} from '../runtime.js';\nimport {\n\tDIRTY,\n\tBRANCH_EFFECT,\n\tRENDER_EFFECT,\n\tEFFECT,\n\tDESTROYED,\n\tINERT,\n\tEFFECT_RAN,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT,\n\tEFFECT_TRANSPARENT,\n\tDERIVED,\n\tUNOWNED,\n\tCLEAN,\n\tINSPECT_EFFECT,\n\tHEAD_EFFECT,\n\tMAYBE_DIRTY,\n\tEFFECT_PRESERVED,\n\tSTALE_REACTION,\n\tUSER_EFFECT,\n\tASYNC\n} from '#client/constants';\nimport * as e from '../errors.js';\nimport { DEV } from 'esm-env';\nimport { define_property } from '../../shared/utils.js';\nimport { get_next_sibling } from '../dom/operations.js';\nimport { component_context, dev_current_component_function, dev_stack } from '../context.js';\nimport { Batch, schedule_effect } from './batch.js';\nimport { flatten } from './async.js';\nimport { without_reactive_context } from '../dom/elements/bindings/shared.js';\n\n/**\n * @param {'$effect' | '$effect.pre' | '$inspect'} rune\n */\nexport function validate_effect(rune) {\n\tif (active_effect === null && active_reaction === null) {\n\t\te.effect_orphan(rune);\n\t}\n\n\tif (active_reaction !== null && (active_reaction.f & UNOWNED) !== 0 && active_effect === null) {\n\t\te.effect_in_unowned_derived();\n\t}\n\n\tif (is_destroying_effect) {\n\t\te.effect_in_teardown(rune);\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {Effect} parent_effect\n */\nfunction push_effect(effect, parent_effect) {\n\tvar parent_last = parent_effect.last;\n\tif (parent_last === null) {\n\t\tparent_effect.last = parent_effect.first = effect;\n\t} else {\n\t\tparent_last.next = effect;\n\t\teffect.prev = parent_last;\n\t\tparent_effect.last = effect;\n\t}\n}\n\n/**\n * @param {number} type\n * @param {null | (() => void | (() => void))} fn\n * @param {boolean} sync\n * @param {boolean} push\n * @returns {Effect}\n */\nfunction create_effect(type, fn, sync, push = true) {\n\tvar parent = active_effect;\n\n\tif (DEV) {\n\t\t// Ensure the parent is never an inspect effect\n\t\twhile (parent !== null && (parent.f & INSPECT_EFFECT) !== 0) {\n\t\t\tparent = parent.parent;\n\t\t}\n\t}\n\n\tif (parent !== null && (parent.f & INERT) !== 0) {\n\t\ttype |= INERT;\n\t}\n\n\t/** @type {Effect} */\n\tvar effect = {\n\t\tctx: component_context,\n\t\tdeps: null,\n\t\tnodes_start: null,\n\t\tnodes_end: null,\n\t\tf: type | DIRTY,\n\t\tfirst: null,\n\t\tfn,\n\t\tlast: null,\n\t\tnext: null,\n\t\tparent,\n\t\tb: parent && parent.b,\n\t\tprev: null,\n\t\tteardown: null,\n\t\ttransitions: null,\n\t\twv: 0,\n\t\tac: null\n\t};\n\n\tif (DEV) {\n\t\teffect.component_function = dev_current_component_function;\n\t}\n\n\tif (sync) {\n\t\ttry {\n\t\t\tupdate_effect(effect);\n\t\t\teffect.f |= EFFECT_RAN;\n\t\t} catch (e) {\n\t\t\tdestroy_effect(effect);\n\t\t\tthrow e;\n\t\t}\n\t} else if (fn !== null) {\n\t\tschedule_effect(effect);\n\t}\n\n\tif (push) {\n\t\t/** @type {Effect | null} */\n\t\tvar e = effect;\n\n\t\t// if an effect has already ran and doesn't need to be kept in the tree\n\t\t// (because it won't re-run, has no DOM, and has no teardown etc)\n\t\t// then we skip it and go to its child (if any)\n\t\tif (\n\t\t\tsync &&\n\t\t\te.deps === null &&\n\t\t\te.teardown === null &&\n\t\t\te.nodes_start === null &&\n\t\t\te.first === e.last && // either `null`, or a singular child\n\t\t\t(e.f & EFFECT_PRESERVED) === 0\n\t\t) {\n\t\t\te = e.first;\n\t\t}\n\n\t\tif (e !== null) {\n\t\t\te.parent = parent;\n\n\t\t\tif (parent !== null) {\n\t\t\t\tpush_effect(e, parent);\n\t\t\t}\n\n\t\t\t// if we're in a derived, add the effect there too\n\t\t\tif (\n\t\t\t\tactive_reaction !== null &&\n\t\t\t\t(active_reaction.f & DERIVED) !== 0 &&\n\t\t\t\t(type & ROOT_EFFECT) === 0\n\t\t\t) {\n\t\t\t\tvar derived = /** @type {Derived} */ (active_reaction);\n\t\t\t\t(derived.effects ??= []).push(e);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn effect;\n}\n\n/**\n * Internal representation of `$effect.tracking()`\n * @returns {boolean}\n */\nexport function effect_tracking() {\n\treturn active_reaction !== null && !untracking;\n}\n\n/**\n * @param {() => void} fn\n */\nexport function teardown(fn) {\n\tconst effect = create_effect(RENDER_EFFECT, null, false);\n\tset_signal_status(effect, CLEAN);\n\teffect.teardown = fn;\n\treturn effect;\n}\n\n/**\n * Internal representation of `$effect(...)`\n * @param {() => void | (() => void)} fn\n */\nexport function user_effect(fn) {\n\tvalidate_effect('$effect');\n\n\tif (DEV) {\n\t\tdefine_property(fn, 'name', {\n\t\t\tvalue: '$effect'\n\t\t});\n\t}\n\n\t// Non-nested `$effect(...)` in a component should be deferred\n\t// until the component is mounted\n\tvar flags = /** @type {Effect} */ (active_effect).f;\n\tvar defer = !active_reaction && (flags & BRANCH_EFFECT) !== 0 && (flags & EFFECT_RAN) === 0;\n\n\tif (defer) {\n\t\t// Top-level `$effect(...)` in an unmounted component  defer until mount\n\t\tvar context = /** @type {ComponentContext} */ (component_context);\n\t\t(context.e ??= []).push(fn);\n\t} else {\n\t\t// Everything else  create immediately\n\t\treturn create_user_effect(fn);\n\t}\n}\n\n/**\n * @param {() => void | (() => void)} fn\n */\nexport function create_user_effect(fn) {\n\treturn create_effect(EFFECT | USER_EFFECT, fn, false);\n}\n\n/**\n * Internal representation of `$effect.pre(...)`\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function user_pre_effect(fn) {\n\tvalidate_effect('$effect.pre');\n\tif (DEV) {\n\t\tdefine_property(fn, 'name', {\n\t\t\tvalue: '$effect.pre'\n\t\t});\n\t}\n\treturn create_effect(RENDER_EFFECT | USER_EFFECT, fn, true);\n}\n\n/** @param {() => void | (() => void)} fn */\nexport function inspect_effect(fn) {\n\treturn create_effect(INSPECT_EFFECT, fn, true);\n}\n\n/**\n * Internal representation of `$effect.root(...)`\n * @param {() => void | (() => void)} fn\n * @returns {() => void}\n */\nexport function effect_root(fn) {\n\tBatch.ensure();\n\tconst effect = create_effect(ROOT_EFFECT | EFFECT_PRESERVED, fn, true);\n\n\treturn () => {\n\t\tdestroy_effect(effect);\n\t};\n}\n\n/**\n * An effect root whose children can transition out\n * @param {() => void} fn\n * @returns {(options?: { outro?: boolean }) => Promise<void>}\n */\nexport function component_root(fn) {\n\tBatch.ensure();\n\tconst effect = create_effect(ROOT_EFFECT | EFFECT_PRESERVED, fn, true);\n\n\treturn (options = {}) => {\n\t\treturn new Promise((fulfil) => {\n\t\t\tif (options.outro) {\n\t\t\t\tpause_effect(effect, () => {\n\t\t\t\t\tdestroy_effect(effect);\n\t\t\t\t\tfulfil(undefined);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdestroy_effect(effect);\n\t\t\t\tfulfil(undefined);\n\t\t\t}\n\t\t});\n\t};\n}\n\n/**\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function effect(fn) {\n\treturn create_effect(EFFECT, fn, false);\n}\n\n/**\n * Internal representation of `$: ..`\n * @param {() => any} deps\n * @param {() => void | (() => void)} fn\n */\nexport function legacy_pre_effect(deps, fn) {\n\tvar context = /** @type {ComponentContextLegacy} */ (component_context);\n\n\t/** @type {{ effect: null | Effect, ran: boolean, deps: () => any }} */\n\tvar token = { effect: null, ran: false, deps };\n\n\tcontext.l.$.push(token);\n\n\ttoken.effect = render_effect(() => {\n\t\tdeps();\n\n\t\t// If this legacy pre effect has already run before the end of the reset, then\n\t\t// bail out to emulate the same behavior.\n\t\tif (token.ran) return;\n\n\t\ttoken.ran = true;\n\t\tuntrack(fn);\n\t});\n}\n\nexport function legacy_pre_effect_reset() {\n\tvar context = /** @type {ComponentContextLegacy} */ (component_context);\n\n\trender_effect(() => {\n\t\t// Run dirty `$:` statements\n\t\tfor (var token of context.l.$) {\n\t\t\ttoken.deps();\n\n\t\t\tvar effect = token.effect;\n\n\t\t\t// If the effect is CLEAN, then make it MAYBE_DIRTY. This ensures we traverse through\n\t\t\t// the effects dependencies and correctly ensure each dependency is up-to-date.\n\t\t\tif ((effect.f & CLEAN) !== 0) {\n\t\t\t\tset_signal_status(effect, MAYBE_DIRTY);\n\t\t\t}\n\n\t\t\tif (is_dirty(effect)) {\n\t\t\t\tupdate_effect(effect);\n\t\t\t}\n\n\t\t\ttoken.ran = false;\n\t\t}\n\t});\n}\n\n/**\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function async_effect(fn) {\n\treturn create_effect(ASYNC | EFFECT_PRESERVED, fn, true);\n}\n\n/**\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function render_effect(fn, flags = 0) {\n\treturn create_effect(RENDER_EFFECT | flags, fn, true);\n}\n\n/**\n * @param {(...expressions: any) => void | (() => void)} fn\n * @param {Array<() => any>} sync\n * @param {Array<() => Promise<any>>} async\n */\nexport function template_effect(fn, sync = [], async = []) {\n\tflatten(sync, async, (values) => {\n\t\tcreate_effect(RENDER_EFFECT, () => fn(...values.map(get)), true);\n\t});\n}\n\n/**\n * @param {(() => void)} fn\n * @param {number} flags\n */\nexport function block(fn, flags = 0) {\n\tvar effect = create_effect(BLOCK_EFFECT | flags, fn, true);\n\tif (DEV) {\n\t\teffect.dev_stack = dev_stack;\n\t}\n\treturn effect;\n}\n\n/**\n * @param {(() => void)} fn\n * @param {boolean} [push]\n */\nexport function branch(fn, push = true) {\n\treturn create_effect(BRANCH_EFFECT | EFFECT_PRESERVED, fn, true, push);\n}\n\n/**\n * @param {Effect} effect\n */\nexport function execute_effect_teardown(effect) {\n\tvar teardown = effect.teardown;\n\tif (teardown !== null) {\n\t\tconst previously_destroying_effect = is_destroying_effect;\n\t\tconst previous_reaction = active_reaction;\n\t\tset_is_destroying_effect(true);\n\t\tset_active_reaction(null);\n\t\ttry {\n\t\t\tteardown.call(null);\n\t\t} finally {\n\t\t\tset_is_destroying_effect(previously_destroying_effect);\n\t\t\tset_active_reaction(previous_reaction);\n\t\t}\n\t}\n}\n\n/**\n * @param {Effect} signal\n * @param {boolean} remove_dom\n * @returns {void}\n */\nexport function destroy_effect_children(signal, remove_dom = false) {\n\tvar effect = signal.first;\n\tsignal.first = signal.last = null;\n\n\twhile (effect !== null) {\n\t\tconst controller = effect.ac;\n\n\t\tif (controller !== null) {\n\t\t\twithout_reactive_context(() => {\n\t\t\t\tcontroller.abort(STALE_REACTION);\n\t\t\t});\n\t\t}\n\n\t\tvar next = effect.next;\n\n\t\tif ((effect.f & ROOT_EFFECT) !== 0) {\n\t\t\t// this is now an independent root\n\t\t\teffect.parent = null;\n\t\t} else {\n\t\t\tdestroy_effect(effect, remove_dom);\n\t\t}\n\n\t\teffect = next;\n\t}\n}\n\n/**\n * @param {Effect} signal\n * @returns {void}\n */\nexport function destroy_block_effect_children(signal) {\n\tvar effect = signal.first;\n\n\twhile (effect !== null) {\n\t\tvar next = effect.next;\n\t\tif ((effect.f & BRANCH_EFFECT) === 0) {\n\t\t\tdestroy_effect(effect);\n\t\t}\n\t\teffect = next;\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {boolean} [remove_dom]\n * @returns {void}\n */\nexport function destroy_effect(effect, remove_dom = true) {\n\tvar removed = false;\n\n\tif (\n\t\t(remove_dom || (effect.f & HEAD_EFFECT) !== 0) &&\n\t\teffect.nodes_start !== null &&\n\t\teffect.nodes_end !== null\n\t) {\n\t\tremove_effect_dom(effect.nodes_start, /** @type {TemplateNode} */ (effect.nodes_end));\n\t\tremoved = true;\n\t}\n\n\tdestroy_effect_children(effect, remove_dom && !removed);\n\tremove_reactions(effect, 0);\n\tset_signal_status(effect, DESTROYED);\n\n\tvar transitions = effect.transitions;\n\n\tif (transitions !== null) {\n\t\tfor (const transition of transitions) {\n\t\t\ttransition.stop();\n\t\t}\n\t}\n\n\texecute_effect_teardown(effect);\n\n\tvar parent = effect.parent;\n\n\t// If the parent doesn't have any children, then skip this work altogether\n\tif (parent !== null && parent.first !== null) {\n\t\tunlink_effect(effect);\n\t}\n\n\tif (DEV) {\n\t\teffect.component_function = null;\n\t}\n\n\t// `first` and `child` are nulled out in destroy_effect_children\n\t// we don't null out `parent` so that error propagation can work correctly\n\teffect.next =\n\t\teffect.prev =\n\t\teffect.teardown =\n\t\teffect.ctx =\n\t\teffect.deps =\n\t\teffect.fn =\n\t\teffect.nodes_start =\n\t\teffect.nodes_end =\n\t\teffect.ac =\n\t\t\tnull;\n}\n\n/**\n *\n * @param {TemplateNode | null} node\n * @param {TemplateNode} end\n */\nexport function remove_effect_dom(node, end) {\n\twhile (node !== null) {\n\t\t/** @type {TemplateNode | null} */\n\t\tvar next = node === end ? null : /** @type {TemplateNode} */ (get_next_sibling(node));\n\n\t\tnode.remove();\n\t\tnode = next;\n\t}\n}\n\n/**\n * Detach an effect from the effect tree, freeing up memory and\n * reducing the amount of work that happens on subsequent traversals\n * @param {Effect} effect\n */\nexport function unlink_effect(effect) {\n\tvar parent = effect.parent;\n\tvar prev = effect.prev;\n\tvar next = effect.next;\n\n\tif (prev !== null) prev.next = next;\n\tif (next !== null) next.prev = prev;\n\n\tif (parent !== null) {\n\t\tif (parent.first === effect) parent.first = next;\n\t\tif (parent.last === effect) parent.last = prev;\n\t}\n}\n\n/**\n * When a block effect is removed, we don't immediately destroy it or yank it\n * out of the DOM, because it might have transitions. Instead, we 'pause' it.\n * It stays around (in memory, and in the DOM) until outro transitions have\n * completed, and if the state change is reversed then we _resume_ it.\n * A paused effect does not update, and the DOM subtree becomes inert.\n * @param {Effect} effect\n * @param {() => void} [callback]\n * @param {boolean} [destroy]\n */\nexport function pause_effect(effect, callback, destroy = true) {\n\t/** @type {TransitionManager[]} */\n\tvar transitions = [];\n\n\tpause_children(effect, transitions, true);\n\n\trun_out_transitions(transitions, () => {\n\t\tif (destroy) destroy_effect(effect);\n\t\tif (callback) callback();\n\t});\n}\n\n/**\n * @param {TransitionManager[]} transitions\n * @param {() => void} fn\n */\nexport function run_out_transitions(transitions, fn) {\n\tvar remaining = transitions.length;\n\tif (remaining > 0) {\n\t\tvar check = () => --remaining || fn();\n\t\tfor (var transition of transitions) {\n\t\t\ttransition.out(check);\n\t\t}\n\t} else {\n\t\tfn();\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {TransitionManager[]} transitions\n * @param {boolean} local\n */\nexport function pause_children(effect, transitions, local) {\n\tif ((effect.f & INERT) !== 0) return;\n\teffect.f ^= INERT;\n\n\tif (effect.transitions !== null) {\n\t\tfor (const transition of effect.transitions) {\n\t\t\tif (transition.is_global || local) {\n\t\t\t\ttransitions.push(transition);\n\t\t\t}\n\t\t}\n\t}\n\n\tvar child = effect.first;\n\n\twhile (child !== null) {\n\t\tvar sibling = child.next;\n\t\tvar transparent = (child.f & EFFECT_TRANSPARENT) !== 0 || (child.f & BRANCH_EFFECT) !== 0;\n\t\t// TODO we don't need to call pause_children recursively with a linked list in place\n\t\t// it's slightly more involved though as we have to account for `transparent` changing\n\t\t// through the tree.\n\t\tpause_children(child, transitions, transparent ? local : false);\n\t\tchild = sibling;\n\t}\n}\n\n/**\n * The opposite of `pause_effect`. We call this if (for example)\n * `x` becomes falsy then truthy: `{#if x}...{/if}`\n * @param {Effect} effect\n */\nexport function resume_effect(effect) {\n\tresume_children(effect, true);\n}\n\n/**\n * @param {Effect} effect\n * @param {boolean} local\n */\nfunction resume_children(effect, local) {\n\tif ((effect.f & INERT) === 0) return;\n\teffect.f ^= INERT;\n\n\t// If a dependency of this effect changed while it was paused,\n\t// schedule the effect to update. we don't use `is_dirty`\n\t// here because we don't want to eagerly recompute a derived like\n\t// `{#if foo}{foo.bar()}{/if}` if `foo` is now `undefined\n\tif ((effect.f & CLEAN) === 0) {\n\t\tset_signal_status(effect, DIRTY);\n\t\tschedule_effect(effect);\n\t}\n\n\tvar child = effect.first;\n\n\twhile (child !== null) {\n\t\tvar sibling = child.next;\n\t\tvar transparent = (child.f & EFFECT_TRANSPARENT) !== 0 || (child.f & BRANCH_EFFECT) !== 0;\n\t\t// TODO we don't need to call resume_children recursively with a linked list in place\n\t\t// it's slightly more involved though as we have to account for `transparent` changing\n\t\t// through the tree.\n\t\tresume_children(child, transparent ? local : false);\n\t\tchild = sibling;\n\t}\n\n\tif (effect.transitions !== null) {\n\t\tfor (const transition of effect.transitions) {\n\t\t\tif (transition.is_global || local) {\n\t\t\t\ttransition.in();\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function aborted(effect = /** @type {Effect} */ (active_effect)) {\n\treturn (effect.f & DESTROYED) !== 0;\n}\n\n/**\n * @param {Effect} effect\n * @param {DocumentFragment} fragment\n */\nexport function move_effect(effect, fragment) {\n\tvar node = effect.nodes_start;\n\tvar end = effect.nodes_end;\n\n\twhile (node !== null) {\n\t\t/** @type {TemplateNode | null} */\n\t\tvar next = node === end ? null : /** @type {TemplateNode} */ (get_next_sibling(node));\n\n\t\tfragment.append(node);\n\t\tnode = next;\n\t}\n}\n","/** @import { Derived, Effect, Reaction, Signal, Source, Value } from '#client' */\nimport { DEV } from 'esm-env';\nimport { get_descriptors, get_prototype_of, index_of } from '../shared/utils.js';\nimport {\n\tdestroy_block_effect_children,\n\tdestroy_effect_children,\n\texecute_effect_teardown\n} from './reactivity/effects.js';\nimport {\n\tDIRTY,\n\tMAYBE_DIRTY,\n\tCLEAN,\n\tDERIVED,\n\tUNOWNED,\n\tDESTROYED,\n\tBRANCH_EFFECT,\n\tSTATE_SYMBOL,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT,\n\tDISCONNECTED,\n\tREACTION_IS_UPDATING,\n\tSTALE_REACTION,\n\tERROR_VALUE,\n\tWAS_MARKED\n} from './constants.js';\nimport { old_values } from './reactivity/sources.js';\nimport {\n\tdestroy_derived_effects,\n\texecute_derived,\n\tcurrent_async_effect,\n\trecent_async_deriveds,\n\tupdate_derived\n} from './reactivity/deriveds.js';\nimport { async_mode_flag, tracing_mode_flag } from '../flags/index.js';\nimport { tracing_expressions, get_stack } from './dev/tracing.js';\nimport {\n\tcomponent_context,\n\tdev_current_component_function,\n\tdev_stack,\n\tis_runes,\n\tset_component_context,\n\tset_dev_current_component_function,\n\tset_dev_stack\n} from './context.js';\nimport * as w from './warnings.js';\nimport { Batch, batch_values, flushSync, schedule_effect } from './reactivity/batch.js';\nimport { handle_error } from './error-handling.js';\nimport { UNINITIALIZED } from '../../constants.js';\nimport { captured_signals } from './legacy.js';\nimport { without_reactive_context } from './dom/elements/bindings/shared.js';\n\nexport let is_updating_effect = false;\n\n/** @param {boolean} value */\nexport function set_is_updating_effect(value) {\n\tis_updating_effect = value;\n}\n\nexport let is_destroying_effect = false;\n\n/** @param {boolean} value */\nexport function set_is_destroying_effect(value) {\n\tis_destroying_effect = value;\n}\n\n/** @type {null | Reaction} */\nexport let active_reaction = null;\n\nexport let untracking = false;\n\n/** @param {null | Reaction} reaction */\nexport function set_active_reaction(reaction) {\n\tactive_reaction = reaction;\n}\n\n/** @type {null | Effect} */\nexport let active_effect = null;\n\n/** @param {null | Effect} effect */\nexport function set_active_effect(effect) {\n\tactive_effect = effect;\n}\n\n/**\n * When sources are created within a reaction, reading and writing\n * them within that reaction should not cause a re-run\n * @type {null | Source[]}\n */\nexport let current_sources = null;\n\n/** @param {Value} value */\nexport function push_reaction_value(value) {\n\tif (active_reaction !== null && (!async_mode_flag || (active_reaction.f & DERIVED) !== 0)) {\n\t\tif (current_sources === null) {\n\t\t\tcurrent_sources = [value];\n\t\t} else {\n\t\t\tcurrent_sources.push(value);\n\t\t}\n\t}\n}\n\n/**\n * The dependencies of the reaction that is currently being executed. In many cases,\n * the dependencies are unchanged between runs, and so this will be `null` unless\n * and until a new dependency is accessed  we track this via `skipped_deps`\n * @type {null | Value[]}\n */\nlet new_deps = null;\n\nlet skipped_deps = 0;\n\n/**\n * Tracks writes that the effect it's executed in doesn't listen to yet,\n * so that the dependency can be added to the effect later on if it then reads it\n * @type {null | Source[]}\n */\nexport let untracked_writes = null;\n\n/** @param {null | Source[]} value */\nexport function set_untracked_writes(value) {\n\tuntracked_writes = value;\n}\n\n/**\n * @type {number} Used by sources and deriveds for handling updates.\n * Version starts from 1 so that unowned deriveds differentiate between a created effect and a run one for tracing\n **/\nexport let write_version = 1;\n\n/** @type {number} Used to version each read of a source of derived to avoid duplicating depedencies inside a reaction */\nlet read_version = 0;\n\nexport let update_version = read_version;\n\n/** @param {number} value */\nexport function set_update_version(value) {\n\tupdate_version = value;\n}\n\n// If we are working with a get() chain that has no active container,\n// to prevent memory leaks, we skip adding the reaction.\nexport let skip_reaction = false;\n\nexport function increment_write_version() {\n\treturn ++write_version;\n}\n\n/**\n * Determines whether a derived or effect is dirty.\n * If it is MAYBE_DIRTY, will set the status to CLEAN\n * @param {Reaction} reaction\n * @returns {boolean}\n */\nexport function is_dirty(reaction) {\n\tvar flags = reaction.f;\n\n\tif ((flags & DIRTY) !== 0) {\n\t\treturn true;\n\t}\n\n\tif ((flags & MAYBE_DIRTY) !== 0) {\n\t\tvar dependencies = reaction.deps;\n\t\tvar is_unowned = (flags & UNOWNED) !== 0;\n\n\t\tif (flags & DERIVED) {\n\t\t\treaction.f &= ~WAS_MARKED;\n\t\t}\n\n\t\tif (dependencies !== null) {\n\t\t\tvar i;\n\t\t\tvar dependency;\n\t\t\tvar is_disconnected = (flags & DISCONNECTED) !== 0;\n\t\t\tvar is_unowned_connected = is_unowned && active_effect !== null && !skip_reaction;\n\t\t\tvar length = dependencies.length;\n\n\t\t\t// If we are working with a disconnected or an unowned signal that is now connected (due to an active effect)\n\t\t\t// then we need to re-connect the reaction to the dependency, unless the effect has already been destroyed\n\t\t\t// (which can happen if the derived is read by an async derived)\n\t\t\tif (\n\t\t\t\t(is_disconnected || is_unowned_connected) &&\n\t\t\t\t(active_effect === null || (active_effect.f & DESTROYED) === 0)\n\t\t\t) {\n\t\t\t\tvar derived = /** @type {Derived} */ (reaction);\n\t\t\t\tvar parent = derived.parent;\n\n\t\t\t\tfor (i = 0; i < length; i++) {\n\t\t\t\t\tdependency = dependencies[i];\n\n\t\t\t\t\t// We always re-add all reactions (even duplicates) if the derived was\n\t\t\t\t\t// previously disconnected, however we don't if it was unowned as we\n\t\t\t\t\t// de-duplicate dependencies in that case\n\t\t\t\t\tif (is_disconnected || !dependency?.reactions?.includes(derived)) {\n\t\t\t\t\t\t(dependency.reactions ??= []).push(derived);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (is_disconnected) {\n\t\t\t\t\tderived.f ^= DISCONNECTED;\n\t\t\t\t}\n\t\t\t\t// If the unowned derived is now fully connected to the graph again (it's unowned and reconnected, has a parent\n\t\t\t\t// and the parent is not unowned), then we can mark it as connected again, removing the need for the unowned\n\t\t\t\t// flag\n\t\t\t\tif (is_unowned_connected && parent !== null && (parent.f & UNOWNED) === 0) {\n\t\t\t\t\tderived.f ^= UNOWNED;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (i = 0; i < length; i++) {\n\t\t\t\tdependency = dependencies[i];\n\n\t\t\t\tif (is_dirty(/** @type {Derived} */ (dependency))) {\n\t\t\t\t\tupdate_derived(/** @type {Derived} */ (dependency));\n\t\t\t\t}\n\n\t\t\t\tif (dependency.wv > reaction.wv) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Unowned signals should never be marked as clean unless they\n\t\t// are used within an active_effect without skip_reaction\n\t\tif (!is_unowned || (active_effect !== null && !skip_reaction)) {\n\t\t\tset_signal_status(reaction, CLEAN);\n\t\t}\n\t}\n\n\treturn false;\n}\n\n/**\n * @param {Value} signal\n * @param {Effect} effect\n * @param {boolean} [root]\n */\nfunction schedule_possible_effect_self_invalidation(signal, effect, root = true) {\n\tvar reactions = signal.reactions;\n\tif (reactions === null) return;\n\n\tif (!async_mode_flag && current_sources?.includes(signal)) {\n\t\treturn;\n\t}\n\n\tfor (var i = 0; i < reactions.length; i++) {\n\t\tvar reaction = reactions[i];\n\n\t\tif ((reaction.f & DERIVED) !== 0) {\n\t\t\tschedule_possible_effect_self_invalidation(/** @type {Derived} */ (reaction), effect, false);\n\t\t} else if (effect === reaction) {\n\t\t\tif (root) {\n\t\t\t\tset_signal_status(reaction, DIRTY);\n\t\t\t} else if ((reaction.f & CLEAN) !== 0) {\n\t\t\t\tset_signal_status(reaction, MAYBE_DIRTY);\n\t\t\t}\n\t\t\tschedule_effect(/** @type {Effect} */ (reaction));\n\t\t}\n\t}\n}\n\n/** @param {Reaction} reaction */\nexport function update_reaction(reaction) {\n\tvar previous_deps = new_deps;\n\tvar previous_skipped_deps = skipped_deps;\n\tvar previous_untracked_writes = untracked_writes;\n\tvar previous_reaction = active_reaction;\n\tvar previous_skip_reaction = skip_reaction;\n\tvar previous_sources = current_sources;\n\tvar previous_component_context = component_context;\n\tvar previous_untracking = untracking;\n\tvar previous_update_version = update_version;\n\n\tvar flags = reaction.f;\n\n\tnew_deps = /** @type {null | Value[]} */ (null);\n\tskipped_deps = 0;\n\tuntracked_writes = null;\n\tskip_reaction =\n\t\t(flags & UNOWNED) !== 0 && (untracking || !is_updating_effect || active_reaction === null);\n\tactive_reaction = (flags & (BRANCH_EFFECT | ROOT_EFFECT)) === 0 ? reaction : null;\n\n\tcurrent_sources = null;\n\tset_component_context(reaction.ctx);\n\tuntracking = false;\n\tupdate_version = ++read_version;\n\n\tif (reaction.ac !== null) {\n\t\twithout_reactive_context(() => {\n\t\t\t/** @type {AbortController} */ (reaction.ac).abort(STALE_REACTION);\n\t\t});\n\n\t\treaction.ac = null;\n\t}\n\n\ttry {\n\t\treaction.f |= REACTION_IS_UPDATING;\n\t\tvar fn = /** @type {Function} */ (reaction.fn);\n\t\tvar result = fn();\n\t\tvar deps = reaction.deps;\n\n\t\tif (new_deps !== null) {\n\t\t\tvar i;\n\n\t\t\tremove_reactions(reaction, skipped_deps);\n\n\t\t\tif (deps !== null && skipped_deps > 0) {\n\t\t\t\tdeps.length = skipped_deps + new_deps.length;\n\t\t\t\tfor (i = 0; i < new_deps.length; i++) {\n\t\t\t\t\tdeps[skipped_deps + i] = new_deps[i];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treaction.deps = deps = new_deps;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t!skip_reaction ||\n\t\t\t\t// Deriveds that already have reactions can cleanup, so we still add them as reactions\n\t\t\t\t((flags & DERIVED) !== 0 &&\n\t\t\t\t\t/** @type {import('#client').Derived} */ (reaction).reactions !== null)\n\t\t\t) {\n\t\t\t\tfor (i = skipped_deps; i < deps.length; i++) {\n\t\t\t\t\t(deps[i].reactions ??= []).push(reaction);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (deps !== null && skipped_deps < deps.length) {\n\t\t\tremove_reactions(reaction, skipped_deps);\n\t\t\tdeps.length = skipped_deps;\n\t\t}\n\n\t\t// If we're inside an effect and we have untracked writes, then we need to\n\t\t// ensure that if any of those untracked writes result in re-invalidation\n\t\t// of the current effect, then that happens accordingly\n\t\tif (\n\t\t\tis_runes() &&\n\t\t\tuntracked_writes !== null &&\n\t\t\t!untracking &&\n\t\t\tdeps !== null &&\n\t\t\t(reaction.f & (DERIVED | MAYBE_DIRTY | DIRTY)) === 0\n\t\t) {\n\t\t\tfor (i = 0; i < /** @type {Source[]} */ (untracked_writes).length; i++) {\n\t\t\t\tschedule_possible_effect_self_invalidation(\n\t\t\t\t\tuntracked_writes[i],\n\t\t\t\t\t/** @type {Effect} */ (reaction)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// If we are returning to an previous reaction then\n\t\t// we need to increment the read version to ensure that\n\t\t// any dependencies in this reaction aren't marked with\n\t\t// the same version\n\t\tif (previous_reaction !== null && previous_reaction !== reaction) {\n\t\t\tread_version++;\n\n\t\t\tif (untracked_writes !== null) {\n\t\t\t\tif (previous_untracked_writes === null) {\n\t\t\t\t\tprevious_untracked_writes = untracked_writes;\n\t\t\t\t} else {\n\t\t\t\t\tprevious_untracked_writes.push(.../** @type {Source[]} */ (untracked_writes));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ((reaction.f & ERROR_VALUE) !== 0) {\n\t\t\treaction.f ^= ERROR_VALUE;\n\t\t}\n\n\t\treturn result;\n\t} catch (error) {\n\t\treturn handle_error(error);\n\t} finally {\n\t\treaction.f ^= REACTION_IS_UPDATING;\n\t\tnew_deps = previous_deps;\n\t\tskipped_deps = previous_skipped_deps;\n\t\tuntracked_writes = previous_untracked_writes;\n\t\tactive_reaction = previous_reaction;\n\t\tskip_reaction = previous_skip_reaction;\n\t\tcurrent_sources = previous_sources;\n\t\tset_component_context(previous_component_context);\n\t\tuntracking = previous_untracking;\n\t\tupdate_version = previous_update_version;\n\t}\n}\n\n/**\n * @template V\n * @param {Reaction} signal\n * @param {Value<V>} dependency\n * @returns {void}\n */\nfunction remove_reaction(signal, dependency) {\n\tlet reactions = dependency.reactions;\n\tif (reactions !== null) {\n\t\tvar index = index_of.call(reactions, signal);\n\t\tif (index !== -1) {\n\t\t\tvar new_length = reactions.length - 1;\n\t\t\tif (new_length === 0) {\n\t\t\t\treactions = dependency.reactions = null;\n\t\t\t} else {\n\t\t\t\t// Swap with last element and then remove.\n\t\t\t\treactions[index] = reactions[new_length];\n\t\t\t\treactions.pop();\n\t\t\t}\n\t\t}\n\t}\n\n\t// If the derived has no reactions, then we can disconnect it from the graph,\n\t// allowing it to either reconnect in the future, or be GC'd by the VM.\n\tif (\n\t\treactions === null &&\n\t\t(dependency.f & DERIVED) !== 0 &&\n\t\t// Destroying a child effect while updating a parent effect can cause a dependency to appear\n\t\t// to be unused, when in fact it is used by the currently-updating parent. Checking `new_deps`\n\t\t// allows us to skip the expensive work of disconnecting and immediately reconnecting it\n\t\t(new_deps === null || !new_deps.includes(dependency))\n\t) {\n\t\tset_signal_status(dependency, MAYBE_DIRTY);\n\t\t// If we are working with a derived that is owned by an effect, then mark it as being\n\t\t// disconnected.\n\t\tif ((dependency.f & (UNOWNED | DISCONNECTED)) === 0) {\n\t\t\tdependency.f ^= DISCONNECTED;\n\t\t}\n\t\t// Disconnect any reactions owned by this reaction\n\t\tdestroy_derived_effects(/** @type {Derived} **/ (dependency));\n\t\tremove_reactions(/** @type {Derived} **/ (dependency), 0);\n\t}\n}\n\n/**\n * @param {Reaction} signal\n * @param {number} start_index\n * @returns {void}\n */\nexport function remove_reactions(signal, start_index) {\n\tvar dependencies = signal.deps;\n\tif (dependencies === null) return;\n\n\tfor (var i = start_index; i < dependencies.length; i++) {\n\t\tremove_reaction(signal, dependencies[i]);\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @returns {void}\n */\nexport function update_effect(effect) {\n\tvar flags = effect.f;\n\n\tif ((flags & DESTROYED) !== 0) {\n\t\treturn;\n\t}\n\n\tset_signal_status(effect, CLEAN);\n\n\tvar previous_effect = active_effect;\n\tvar was_updating_effect = is_updating_effect;\n\n\tactive_effect = effect;\n\tis_updating_effect = true;\n\n\tif (DEV) {\n\t\tvar previous_component_fn = dev_current_component_function;\n\t\tset_dev_current_component_function(effect.component_function);\n\t\tvar previous_stack = /** @type {any} */ (dev_stack);\n\t\t// only block effects have a dev stack, keep the current one otherwise\n\t\tset_dev_stack(effect.dev_stack ?? dev_stack);\n\t}\n\n\ttry {\n\t\tif ((flags & BLOCK_EFFECT) !== 0) {\n\t\t\tdestroy_block_effect_children(effect);\n\t\t} else {\n\t\t\tdestroy_effect_children(effect);\n\t\t}\n\n\t\texecute_effect_teardown(effect);\n\t\tvar teardown = update_reaction(effect);\n\t\teffect.teardown = typeof teardown === 'function' ? teardown : null;\n\t\teffect.wv = write_version;\n\n\t\t// In DEV, increment versions of any sources that were written to during the effect,\n\t\t// so that they are correctly marked as dirty when the effect re-runs\n\t\tif (DEV && tracing_mode_flag && (effect.f & DIRTY) !== 0 && effect.deps !== null) {\n\t\t\tfor (var dep of effect.deps) {\n\t\t\t\tif (dep.set_during_effect) {\n\t\t\t\t\tdep.wv = increment_write_version();\n\t\t\t\t\tdep.set_during_effect = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} finally {\n\t\tis_updating_effect = was_updating_effect;\n\t\tactive_effect = previous_effect;\n\n\t\tif (DEV) {\n\t\t\tset_dev_current_component_function(previous_component_fn);\n\t\t\tset_dev_stack(previous_stack);\n\t\t}\n\t}\n}\n\n/**\n * Returns a promise that resolves once any pending state changes have been applied.\n * @returns {Promise<void>}\n */\nexport async function tick() {\n\tif (async_mode_flag) {\n\t\treturn new Promise((f) => {\n\t\t\t// Race them against each other - in almost all cases requestAnimationFrame will fire first,\n\t\t\t// but e.g. in case the window is not focused or a view transition happens, requestAnimationFrame\n\t\t\t// will be delayed and setTimeout helps us resolve fast enough in that case\n\t\t\trequestAnimationFrame(() => f());\n\t\t\tsetTimeout(() => f());\n\t\t});\n\t}\n\n\tawait Promise.resolve();\n\n\t// By calling flushSync we guarantee that any pending state changes are applied after one tick.\n\t// TODO look into whether we can make flushing subsequent updates synchronously in the future.\n\tflushSync();\n}\n\n/**\n * Returns a promise that resolves once any state changes, and asynchronous work resulting from them,\n * have resolved and the DOM has been updated\n * @returns {Promise<void>}\n * @since 5.36\n */\nexport function settled() {\n\treturn Batch.ensure().settled();\n}\n\n/**\n * @template V\n * @param {Value<V>} signal\n * @returns {V}\n */\nexport function get(signal) {\n\tvar flags = signal.f;\n\tvar is_derived = (flags & DERIVED) !== 0;\n\n\tcaptured_signals?.add(signal);\n\n\t// Register the dependency on the current reaction signal.\n\tif (active_reaction !== null && !untracking) {\n\t\t// if we're in a derived that is being read inside an _async_ derived,\n\t\t// it's possible that the effect was already destroyed. In this case,\n\t\t// we don't add the dependency, because that would create a memory leak\n\t\tvar destroyed = active_effect !== null && (active_effect.f & DESTROYED) !== 0;\n\n\t\tif (!destroyed && !current_sources?.includes(signal)) {\n\t\t\tvar deps = active_reaction.deps;\n\n\t\t\tif ((active_reaction.f & REACTION_IS_UPDATING) !== 0) {\n\t\t\t\t// we're in the effect init/update cycle\n\t\t\t\tif (signal.rv < read_version) {\n\t\t\t\t\tsignal.rv = read_version;\n\n\t\t\t\t\t// If the signal is accessing the same dependencies in the same\n\t\t\t\t\t// order as it did last time, increment `skipped_deps`\n\t\t\t\t\t// rather than updating `new_deps`, which creates GC cost\n\t\t\t\t\tif (new_deps === null && deps !== null && deps[skipped_deps] === signal) {\n\t\t\t\t\t\tskipped_deps++;\n\t\t\t\t\t} else if (new_deps === null) {\n\t\t\t\t\t\tnew_deps = [signal];\n\t\t\t\t\t} else if (!skip_reaction || !new_deps.includes(signal)) {\n\t\t\t\t\t\t// Normally we can push duplicated dependencies to `new_deps`, but if we're inside\n\t\t\t\t\t\t// an unowned derived because skip_reaction is true, then we need to ensure that\n\t\t\t\t\t\t// we don't have duplicates\n\t\t\t\t\t\tnew_deps.push(signal);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// we're adding a dependency outside the init/update cycle\n\t\t\t\t// (i.e. after an `await`)\n\t\t\t\t(active_reaction.deps ??= []).push(signal);\n\n\t\t\t\tvar reactions = signal.reactions;\n\n\t\t\t\tif (reactions === null) {\n\t\t\t\t\tsignal.reactions = [active_reaction];\n\t\t\t\t} else if (!reactions.includes(active_reaction)) {\n\t\t\t\t\treactions.push(active_reaction);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else if (\n\t\tis_derived &&\n\t\t/** @type {Derived} */ (signal).deps === null &&\n\t\t/** @type {Derived} */ (signal).effects === null\n\t) {\n\t\tvar derived = /** @type {Derived} */ (signal);\n\t\tvar parent = derived.parent;\n\n\t\tif (parent !== null && (parent.f & UNOWNED) === 0) {\n\t\t\t// If the derived is owned by another derived then mark it as unowned\n\t\t\t// as the derived value might have been referenced in a different context\n\t\t\t// since and thus its parent might not be its true owner anymore\n\t\t\tderived.f ^= UNOWNED;\n\t\t}\n\t}\n\n\tif (DEV) {\n\t\tif (current_async_effect) {\n\t\t\tvar tracking = (current_async_effect.f & REACTION_IS_UPDATING) !== 0;\n\t\t\tvar was_read = current_async_effect.deps?.includes(signal);\n\n\t\t\tif (!tracking && !untracking && !was_read) {\n\t\t\t\tw.await_reactivity_loss(/** @type {string} */ (signal.label));\n\n\t\t\t\tvar trace = get_stack('TracedAt');\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tif (trace) console.warn(trace);\n\t\t\t}\n\t\t}\n\n\t\trecent_async_deriveds.delete(signal);\n\n\t\tif (\n\t\t\ttracing_mode_flag &&\n\t\t\t!untracking &&\n\t\t\ttracing_expressions !== null &&\n\t\t\tactive_reaction !== null &&\n\t\t\ttracing_expressions.reaction === active_reaction\n\t\t) {\n\t\t\t// Used when mapping state between special blocks like `each`\n\t\t\tif (signal.trace) {\n\t\t\t\tsignal.trace();\n\t\t\t} else {\n\t\t\t\ttrace = get_stack('TracedAt');\n\n\t\t\t\tif (trace) {\n\t\t\t\t\tvar entry = tracing_expressions.entries.get(signal);\n\n\t\t\t\t\tif (entry === undefined) {\n\t\t\t\t\t\tentry = { traces: [] };\n\t\t\t\t\t\ttracing_expressions.entries.set(signal, entry);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar last = entry.traces[entry.traces.length - 1];\n\n\t\t\t\t\t// traces can be duplicated, e.g. by `snapshot` invoking both\n\t\t\t\t\t// both `getOwnPropertyDescriptor` and `get` traps at once\n\t\t\t\t\tif (trace.stack !== last?.stack) {\n\t\t\t\t\t\tentry.traces.push(trace);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (is_destroying_effect) {\n\t\tif (old_values.has(signal)) {\n\t\t\treturn old_values.get(signal);\n\t\t}\n\n\t\tif (is_derived) {\n\t\t\tderived = /** @type {Derived} */ (signal);\n\n\t\t\tvar value = derived.v;\n\n\t\t\t// if the derived is dirty and has reactions, or depends on the values that just changed, re-execute\n\t\t\t// (a derived can be maybe_dirty due to the effect destroy removing its last reaction)\n\t\t\tif (\n\t\t\t\t((derived.f & CLEAN) === 0 && derived.reactions !== null) ||\n\t\t\t\tdepends_on_old_values(derived)\n\t\t\t) {\n\t\t\t\tvalue = execute_derived(derived);\n\t\t\t}\n\n\t\t\told_values.set(derived, value);\n\n\t\t\treturn value;\n\t\t}\n\t} else if (is_derived) {\n\t\tderived = /** @type {Derived} */ (signal);\n\n\t\tif (batch_values?.has(derived)) {\n\t\t\treturn batch_values.get(derived);\n\t\t}\n\n\t\tif (is_dirty(derived)) {\n\t\t\tupdate_derived(derived);\n\t\t}\n\t}\n\n\tif (batch_values?.has(signal)) {\n\t\treturn batch_values.get(signal);\n\t}\n\n\tif ((signal.f & ERROR_VALUE) !== 0) {\n\t\tthrow signal.v;\n\t}\n\n\treturn signal.v;\n}\n\n/** @param {Derived} derived */\nfunction depends_on_old_values(derived) {\n\tif (derived.v === UNINITIALIZED) return true; // we don't know, so assume the worst\n\tif (derived.deps === null) return false;\n\n\tfor (const dep of derived.deps) {\n\t\tif (old_values.has(dep)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ((dep.f & DERIVED) !== 0 && depends_on_old_values(/** @type {Derived} */ (dep))) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\n/**\n * Like `get`, but checks for `undefined`. Used for `var` declarations because they can be accessed before being declared\n * @template V\n * @param {Value<V> | undefined} signal\n * @returns {V | undefined}\n */\nexport function safe_get(signal) {\n\treturn signal && get(signal);\n}\n\n/**\n * When used inside a [`$derived`](https://svelte.dev/docs/svelte/$derived) or [`$effect`](https://svelte.dev/docs/svelte/$effect),\n * any state read inside `fn` will not be treated as a dependency.\n *\n * ```ts\n * $effect(() => {\n *   // this will run when `data` changes, but not when `time` changes\n *   save(data, {\n *     timestamp: untrack(() => time)\n *   });\n * });\n * ```\n * @template T\n * @param {() => T} fn\n * @returns {T}\n */\nexport function untrack(fn) {\n\tvar previous_untracking = untracking;\n\ttry {\n\t\tuntracking = true;\n\t\treturn fn();\n\t} finally {\n\t\tuntracking = previous_untracking;\n\t}\n}\n\nconst STATUS_MASK = ~(DIRTY | MAYBE_DIRTY | CLEAN);\n\n/**\n * @param {Signal} signal\n * @param {number} status\n * @returns {void}\n */\nexport function set_signal_status(signal, status) {\n\tsignal.f = (signal.f & STATUS_MASK) | status;\n}\n\n/**\n * @param {Record<string, unknown>} obj\n * @param {string[]} keys\n * @returns {Record<string, unknown>}\n */\nexport function exclude_from_object(obj, keys) {\n\t/** @type {Record<string, unknown>} */\n\tvar result = {};\n\n\tfor (var key in obj) {\n\t\tif (!keys.includes(key)) {\n\t\t\tresult[key] = obj[key];\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Possibly traverse an object and read all its properties so that they're all reactive in case this is `$state`.\n * Does only check first level of an object for performance reasons (heuristic should be good for 99% of all cases).\n * @param {any} value\n * @returns {void}\n */\nexport function deep_read_state(value) {\n\tif (typeof value !== 'object' || !value || value instanceof EventTarget) {\n\t\treturn;\n\t}\n\n\tif (STATE_SYMBOL in value) {\n\t\tdeep_read(value);\n\t} else if (!Array.isArray(value)) {\n\t\tfor (let key in value) {\n\t\t\tconst prop = value[key];\n\t\t\tif (typeof prop === 'object' && prop && STATE_SYMBOL in prop) {\n\t\t\t\tdeep_read(prop);\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Deeply traverse an object and read all its properties\n * so that they're all reactive in case this is `$state`\n * @param {any} value\n * @param {Set<any>} visited\n * @returns {void}\n */\nexport function deep_read(value, visited = new Set()) {\n\tif (\n\t\ttypeof value === 'object' &&\n\t\tvalue !== null &&\n\t\t// We don't want to traverse DOM elements\n\t\t!(value instanceof EventTarget) &&\n\t\t!visited.has(value)\n\t) {\n\t\tvisited.add(value);\n\t\t// When working with a possible SvelteDate, this\n\t\t// will ensure we capture changes to it.\n\t\tif (value instanceof Date) {\n\t\t\tvalue.getTime();\n\t\t}\n\t\tfor (let key in value) {\n\t\t\ttry {\n\t\t\t\tdeep_read(value[key], visited);\n\t\t\t} catch (e) {\n\t\t\t\t// continue\n\t\t\t}\n\t\t}\n\t\tconst proto = get_prototype_of(value);\n\t\tif (\n\t\t\tproto !== Object.prototype &&\n\t\t\tproto !== Array.prototype &&\n\t\t\tproto !== Map.prototype &&\n\t\t\tproto !== Set.prototype &&\n\t\t\tproto !== Date.prototype\n\t\t) {\n\t\t\tconst descriptors = get_descriptors(proto);\n\t\t\tfor (let key in descriptors) {\n\t\t\t\tconst get = descriptors[key].get;\n\t\t\t\tif (get) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tget.call(value);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// continue\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","import { teardown } from '../../reactivity/effects.js';\nimport { define_property, is_array } from '../../../shared/utils.js';\nimport { hydrating } from '../hydration.js';\nimport { queue_micro_task } from '../task.js';\nimport { FILENAME } from '../../../../constants.js';\nimport * as w from '../../warnings.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../runtime.js';\nimport { without_reactive_context } from './bindings/shared.js';\n\n/** @type {Set<string>} */\nexport const all_registered_events = new Set();\n\n/** @type {Set<(events: Array<string>) => void>} */\nexport const root_event_handles = new Set();\n\n/**\n * SSR adds onload and onerror attributes to catch those events before the hydration.\n * This function detects those cases, removes the attributes and replays the events.\n * @param {HTMLElement} dom\n */\nexport function replay_events(dom) {\n\tif (!hydrating) return;\n\n\tdom.removeAttribute('onload');\n\tdom.removeAttribute('onerror');\n\t// @ts-expect-error\n\tconst event = dom.__e;\n\tif (event !== undefined) {\n\t\t// @ts-expect-error\n\t\tdom.__e = undefined;\n\t\tqueueMicrotask(() => {\n\t\t\tif (dom.isConnected) {\n\t\t\t\tdom.dispatchEvent(event);\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * @param {string} event_name\n * @param {EventTarget} dom\n * @param {EventListener} [handler]\n * @param {AddEventListenerOptions} [options]\n */\nexport function create_event(event_name, dom, handler, options = {}) {\n\t/**\n\t * @this {EventTarget}\n\t */\n\tfunction target_handler(/** @type {Event} */ event) {\n\t\tif (!options.capture) {\n\t\t\t// Only call in the bubble phase, else delegated events would be called before the capturing events\n\t\t\thandle_event_propagation.call(dom, event);\n\t\t}\n\t\tif (!event.cancelBubble) {\n\t\t\treturn without_reactive_context(() => {\n\t\t\t\treturn handler?.call(this, event);\n\t\t\t});\n\t\t}\n\t}\n\n\t// Chrome has a bug where pointer events don't work when attached to a DOM element that has been cloned\n\t// with cloneNode() and the DOM element is disconnected from the document. To ensure the event works, we\n\t// defer the attachment till after it's been appended to the document. TODO: remove this once Chrome fixes\n\t// this bug. The same applies to wheel events and touch events.\n\tif (\n\t\tevent_name.startsWith('pointer') ||\n\t\tevent_name.startsWith('touch') ||\n\t\tevent_name === 'wheel'\n\t) {\n\t\tqueue_micro_task(() => {\n\t\t\tdom.addEventListener(event_name, target_handler, options);\n\t\t});\n\t} else {\n\t\tdom.addEventListener(event_name, target_handler, options);\n\t}\n\n\treturn target_handler;\n}\n\n/**\n * Attaches an event handler to an element and returns a function that removes the handler. Using this\n * rather than `addEventListener` will preserve the correct order relative to handlers added declaratively\n * (with attributes like `onclick`), which use event delegation for performance reasons\n *\n * @param {EventTarget} element\n * @param {string} type\n * @param {EventListener} handler\n * @param {AddEventListenerOptions} [options]\n */\nexport function on(element, type, handler, options = {}) {\n\tvar target_handler = create_event(type, element, handler, options);\n\n\treturn () => {\n\t\telement.removeEventListener(type, target_handler, options);\n\t};\n}\n\n/**\n * @param {string} event_name\n * @param {Element} dom\n * @param {EventListener} [handler]\n * @param {boolean} [capture]\n * @param {boolean} [passive]\n * @returns {void}\n */\nexport function event(event_name, dom, handler, capture, passive) {\n\tvar options = { capture, passive };\n\tvar target_handler = create_event(event_name, dom, handler, options);\n\n\tif (\n\t\tdom === document.body ||\n\t\t// @ts-ignore\n\t\tdom === window ||\n\t\t// @ts-ignore\n\t\tdom === document ||\n\t\t// Firefox has quirky behavior, it can happen that we still get \"canplay\" events when the element is already removed\n\t\tdom instanceof HTMLMediaElement\n\t) {\n\t\tteardown(() => {\n\t\t\tdom.removeEventListener(event_name, target_handler, options);\n\t\t});\n\t}\n}\n\n/**\n * @param {Array<string>} events\n * @returns {void}\n */\nexport function delegate(events) {\n\tfor (var i = 0; i < events.length; i++) {\n\t\tall_registered_events.add(events[i]);\n\t}\n\n\tfor (var fn of root_event_handles) {\n\t\tfn(events);\n\t}\n}\n\n// used to store the reference to the currently propagated event\n// to prevent garbage collection between microtasks in Firefox\n// If the event object is GCed too early, the expando __root property\n// set on the event object is lost, causing the event delegation\n// to process the event twice\nlet last_propagated_event = null;\n\n/**\n * @this {EventTarget}\n * @param {Event} event\n * @returns {void}\n */\nexport function handle_event_propagation(event) {\n\tvar handler_element = this;\n\tvar owner_document = /** @type {Node} */ (handler_element).ownerDocument;\n\tvar event_name = event.type;\n\tvar path = event.composedPath?.() || [];\n\tvar current_target = /** @type {null | Element} */ (path[0] || event.target);\n\n\tlast_propagated_event = event;\n\n\t// composedPath contains list of nodes the event has propagated through.\n\t// We check __root to skip all nodes below it in case this is a\n\t// parent of the __root node, which indicates that there's nested\n\t// mounted apps. In this case we don't want to trigger events multiple times.\n\tvar path_idx = 0;\n\n\t// the `last_propagated_event === event` check is redundant, but\n\t// without it the variable will be DCE'd and things will\n\t// fail mysteriously in Firefox\n\t// @ts-expect-error is added below\n\tvar handled_at = last_propagated_event === event && event.__root;\n\n\tif (handled_at) {\n\t\tvar at_idx = path.indexOf(handled_at);\n\t\tif (\n\t\t\tat_idx !== -1 &&\n\t\t\t(handler_element === document || handler_element === /** @type {any} */ (window))\n\t\t) {\n\t\t\t// This is the fallback document listener or a window listener, but the event was already handled\n\t\t\t// -> ignore, but set handle_at to document/window so that we're resetting the event\n\t\t\t// chain in case someone manually dispatches the same event object again.\n\t\t\t// @ts-expect-error\n\t\t\tevent.__root = handler_element;\n\t\t\treturn;\n\t\t}\n\n\t\t// We're deliberately not skipping if the index is higher, because\n\t\t// someone could create an event programmatically and emit it multiple times,\n\t\t// in which case we want to handle the whole propagation chain properly each time.\n\t\t// (this will only be a false negative if the event is dispatched multiple times and\n\t\t// the fallback document listener isn't reached in between, but that's super rare)\n\t\tvar handler_idx = path.indexOf(handler_element);\n\t\tif (handler_idx === -1) {\n\t\t\t// handle_idx can theoretically be -1 (happened in some JSDOM testing scenarios with an event listener on the window object)\n\t\t\t// so guard against that, too, and assume that everything was handled at this point.\n\t\t\treturn;\n\t\t}\n\n\t\tif (at_idx <= handler_idx) {\n\t\t\tpath_idx = at_idx;\n\t\t}\n\t}\n\n\tcurrent_target = /** @type {Element} */ (path[path_idx] || event.target);\n\t// there can only be one delegated event per element, and we either already handled the current target,\n\t// or this is the very first target in the chain which has a non-delegated listener, in which case it's safe\n\t// to handle a possible delegated event on it later (through the root delegation listener for example).\n\tif (current_target === handler_element) return;\n\n\t// Proxy currentTarget to correct target\n\tdefine_property(event, 'currentTarget', {\n\t\tconfigurable: true,\n\t\tget() {\n\t\t\treturn current_target || owner_document;\n\t\t}\n\t});\n\n\t// This started because of Chromium issue https://chromestatus.com/feature/5128696823545856,\n\t// where removal or moving of of the DOM can cause sync `blur` events to fire, which can cause logic\n\t// to run inside the current `active_reaction`, which isn't what we want at all. However, on reflection,\n\t// it's probably best that all event handled by Svelte have this behaviour, as we don't really want\n\t// an event handler to run in the context of another reaction or effect.\n\tvar previous_reaction = active_reaction;\n\tvar previous_effect = active_effect;\n\tset_active_reaction(null);\n\tset_active_effect(null);\n\n\ttry {\n\t\t/**\n\t\t * @type {unknown}\n\t\t */\n\t\tvar throw_error;\n\t\t/**\n\t\t * @type {unknown[]}\n\t\t */\n\t\tvar other_errors = [];\n\n\t\twhile (current_target !== null) {\n\t\t\t/** @type {null | Element} */\n\t\t\tvar parent_element =\n\t\t\t\tcurrent_target.assignedSlot ||\n\t\t\t\tcurrent_target.parentNode ||\n\t\t\t\t/** @type {any} */ (current_target).host ||\n\t\t\t\tnull;\n\n\t\t\ttry {\n\t\t\t\t// @ts-expect-error\n\t\t\t\tvar delegated = current_target['__' + event_name];\n\n\t\t\t\tif (\n\t\t\t\t\tdelegated != null &&\n\t\t\t\t\t(!(/** @type {any} */ (current_target).disabled) ||\n\t\t\t\t\t\t// DOM could've been updated already by the time this is reached, so we check this as well\n\t\t\t\t\t\t// -> the target could not have been disabled because it emits the event in the first place\n\t\t\t\t\t\tevent.target === current_target)\n\t\t\t\t) {\n\t\t\t\t\tif (is_array(delegated)) {\n\t\t\t\t\t\tvar [fn, ...data] = delegated;\n\t\t\t\t\t\tfn.apply(current_target, [event, ...data]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelegated.call(current_target, event);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tif (throw_error) {\n\t\t\t\t\tother_errors.push(error);\n\t\t\t\t} else {\n\t\t\t\t\tthrow_error = error;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (event.cancelBubble || parent_element === handler_element || parent_element === null) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcurrent_target = parent_element;\n\t\t}\n\n\t\tif (throw_error) {\n\t\t\tfor (let error of other_errors) {\n\t\t\t\t// Throw the rest of the errors, one-by-one on a microtask\n\t\t\t\tqueueMicrotask(() => {\n\t\t\t\t\tthrow error;\n\t\t\t\t});\n\t\t\t}\n\t\t\tthrow throw_error;\n\t\t}\n\t} finally {\n\t\t// @ts-expect-error is used above\n\t\tevent.__root = handler_element;\n\t\t// @ts-ignore remove proxy on currentTarget\n\t\tdelete event.currentTarget;\n\t\tset_active_reaction(previous_reaction);\n\t\tset_active_effect(previous_effect);\n\t}\n}\n\n/**\n * In dev, warn if an event handler is not a function, as it means the\n * user probably called the handler or forgot to add a `() =>`\n * @param {() => (event: Event, ...args: any) => void} thunk\n * @param {EventTarget} element\n * @param {[Event, ...any]} args\n * @param {any} component\n * @param {[number, number]} [loc]\n * @param {boolean} [remove_parens]\n */\nexport function apply(\n\tthunk,\n\telement,\n\targs,\n\tcomponent,\n\tloc,\n\thas_side_effects = false,\n\tremove_parens = false\n) {\n\tlet handler;\n\tlet error;\n\n\ttry {\n\t\thandler = thunk();\n\t} catch (e) {\n\t\terror = e;\n\t}\n\n\tif (typeof handler !== 'function' && (has_side_effects || handler != null || error)) {\n\t\tconst filename = component?.[FILENAME];\n\t\tconst location = loc ? ` at ${filename}:${loc[0]}:${loc[1]}` : ` in ${filename}`;\n\t\tconst phase = args[0]?.eventPhase < Event.BUBBLING_PHASE ? 'capture' : '';\n\t\tconst event_name = args[0]?.type + phase;\n\t\tconst description = `\\`${event_name}\\` handler${location}`;\n\t\tconst suggestion = remove_parens ? 'remove the trailing `()`' : 'add a leading `() =>`';\n\n\t\tw.event_handler_invalid(description, suggestion);\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\t}\n\thandler?.apply(element, args);\n}\n","/** @import { TemplateNode } from '#client' */\nimport { hydrate_node, hydrating, set_hydrate_node, set_hydrating } from '../hydration.js';\nimport { create_text, get_first_child, get_next_sibling } from '../operations.js';\nimport { block } from '../../reactivity/effects.js';\nimport { COMMENT_NODE, HEAD_EFFECT } from '#client/constants';\nimport { HYDRATION_START } from '../../../../constants.js';\n\n/**\n * @type {Node | undefined}\n */\nlet head_anchor;\n\nexport function reset_head_anchor() {\n\thead_anchor = undefined;\n}\n\n/**\n * @param {(anchor: Node) => void} render_fn\n * @returns {void}\n */\nexport function head(render_fn) {\n\t// The head function may be called after the first hydration pass and ssr comment nodes may still be present,\n\t// therefore we need to skip that when we detect that we're not in hydration mode.\n\tlet previous_hydrate_node = null;\n\tlet was_hydrating = hydrating;\n\n\t/** @type {Comment | Text} */\n\tvar anchor;\n\n\tif (hydrating) {\n\t\tprevious_hydrate_node = hydrate_node;\n\n\t\t// There might be multiple head blocks in our app, so we need to account for each one needing independent hydration.\n\t\tif (head_anchor === undefined) {\n\t\t\thead_anchor = /** @type {TemplateNode} */ (get_first_child(document.head));\n\t\t}\n\n\t\twhile (\n\t\t\thead_anchor !== null &&\n\t\t\t(head_anchor.nodeType !== COMMENT_NODE ||\n\t\t\t\t/** @type {Comment} */ (head_anchor).data !== HYDRATION_START)\n\t\t) {\n\t\t\thead_anchor = /** @type {TemplateNode} */ (get_next_sibling(head_anchor));\n\t\t}\n\n\t\t// If we can't find an opening hydration marker, skip hydration (this can happen\n\t\t// if a framework rendered body but not head content)\n\t\tif (head_anchor === null) {\n\t\t\tset_hydrating(false);\n\t\t} else {\n\t\t\thead_anchor = set_hydrate_node(/** @type {TemplateNode} */ (get_next_sibling(head_anchor)));\n\t\t}\n\t}\n\n\tif (!hydrating) {\n\t\tanchor = document.head.appendChild(create_text());\n\t}\n\n\ttry {\n\t\tblock(() => render_fn(anchor), HEAD_EFFECT);\n\t} finally {\n\t\tif (was_hydrating) {\n\t\t\tset_hydrating(true);\n\t\t\thead_anchor = hydrate_node; // so that next head block starts from the correct node\n\t\t\tset_hydrate_node(/** @type {TemplateNode} */ (previous_hydrate_node));\n\t\t}\n\t}\n}\n","/** @param {string} html */\nexport function create_fragment_from_html(html) {\n\tvar elem = document.createElement('template');\n\telem.innerHTML = html.replaceAll('<!>', '<!---->'); // XHTML compliance\n\treturn elem.content;\n}\n","/** @import { Effect, TemplateNode } from '#client' */\n/** @import { TemplateStructure } from './types' */\nimport { hydrate_next, hydrate_node, hydrating, set_hydrate_node } from './hydration.js';\nimport {\n\tcreate_text,\n\tget_first_child,\n\tis_firefox,\n\tcreate_element,\n\tcreate_fragment,\n\tcreate_comment,\n\tset_attribute\n} from './operations.js';\nimport { create_fragment_from_html } from './reconciler.js';\nimport { active_effect } from '../runtime.js';\nimport {\n\tNAMESPACE_MATHML,\n\tNAMESPACE_SVG,\n\tTEMPLATE_FRAGMENT,\n\tTEMPLATE_USE_IMPORT_NODE,\n\tTEMPLATE_USE_MATHML,\n\tTEMPLATE_USE_SVG\n} from '../../../constants.js';\nimport { COMMENT_NODE, DOCUMENT_FRAGMENT_NODE, TEXT_NODE } from '#client/constants';\n\n/**\n * @param {TemplateNode} start\n * @param {TemplateNode | null} end\n */\nexport function assign_nodes(start, end) {\n\tvar effect = /** @type {Effect} */ (active_effect);\n\tif (effect.nodes_start === null) {\n\t\teffect.nodes_start = start;\n\t\teffect.nodes_end = end;\n\t}\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_html(content, flags) {\n\tvar is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;\n\tvar use_import_node = (flags & TEMPLATE_USE_IMPORT_NODE) !== 0;\n\n\t/** @type {Node} */\n\tvar node;\n\n\t/**\n\t * Whether or not the first item is a text/element node. If not, we need to\n\t * create an additional comment node to act as `effect.nodes.start`\n\t */\n\tvar has_start = !content.startsWith('<!>');\n\n\treturn () => {\n\t\tif (hydrating) {\n\t\t\tassign_nodes(hydrate_node, null);\n\t\t\treturn hydrate_node;\n\t\t}\n\n\t\tif (node === undefined) {\n\t\t\tnode = create_fragment_from_html(has_start ? content : '<!>' + content);\n\t\t\tif (!is_fragment) node = /** @type {Node} */ (get_first_child(node));\n\t\t}\n\n\t\tvar clone = /** @type {TemplateNode} */ (\n\t\t\tuse_import_node || is_firefox ? document.importNode(node, true) : node.cloneNode(true)\n\t\t);\n\n\t\tif (is_fragment) {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_first_child(clone));\n\t\t\tvar end = /** @type {TemplateNode} */ (clone.lastChild);\n\n\t\t\tassign_nodes(start, end);\n\t\t} else {\n\t\t\tassign_nodes(clone, clone);\n\t\t}\n\n\t\treturn clone;\n\t};\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n * @param {'svg' | 'math'} ns\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nfunction from_namespace(content, flags, ns = 'svg') {\n\t/**\n\t * Whether or not the first item is a text/element node. If not, we need to\n\t * create an additional comment node to act as `effect.nodes.start`\n\t */\n\tvar has_start = !content.startsWith('<!>');\n\n\tvar is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;\n\tvar wrapped = `<${ns}>${has_start ? content : '<!>' + content}</${ns}>`;\n\n\t/** @type {Element | DocumentFragment} */\n\tvar node;\n\n\treturn () => {\n\t\tif (hydrating) {\n\t\t\tassign_nodes(hydrate_node, null);\n\t\t\treturn hydrate_node;\n\t\t}\n\n\t\tif (!node) {\n\t\t\tvar fragment = /** @type {DocumentFragment} */ (create_fragment_from_html(wrapped));\n\t\t\tvar root = /** @type {Element} */ (get_first_child(fragment));\n\n\t\t\tif (is_fragment) {\n\t\t\t\tnode = document.createDocumentFragment();\n\t\t\t\twhile (get_first_child(root)) {\n\t\t\t\t\tnode.appendChild(/** @type {Node} */ (get_first_child(root)));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode = /** @type {Element} */ (get_first_child(root));\n\t\t\t}\n\t\t}\n\n\t\tvar clone = /** @type {TemplateNode} */ (node.cloneNode(true));\n\n\t\tif (is_fragment) {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_first_child(clone));\n\t\t\tvar end = /** @type {TemplateNode} */ (clone.lastChild);\n\n\t\t\tassign_nodes(start, end);\n\t\t} else {\n\t\t\tassign_nodes(clone, clone);\n\t\t}\n\n\t\treturn clone;\n\t};\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_svg(content, flags) {\n\treturn from_namespace(content, flags, 'svg');\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_mathml(content, flags) {\n\treturn from_namespace(content, flags, 'math');\n}\n\n/**\n * @param {TemplateStructure[]} structure\n * @param {typeof NAMESPACE_SVG | typeof NAMESPACE_MATHML | undefined} [ns]\n */\nfunction fragment_from_tree(structure, ns) {\n\tvar fragment = create_fragment();\n\n\tfor (var item of structure) {\n\t\tif (typeof item === 'string') {\n\t\t\tfragment.append(create_text(item));\n\t\t\tcontinue;\n\t\t}\n\n\t\t// if `preserveComments === true`, comments are represented as `['// <data>']`\n\t\tif (item === undefined || item[0][0] === '/') {\n\t\t\tfragment.append(create_comment(item ? item[0].slice(3) : ''));\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst [name, attributes, ...children] = item;\n\n\t\tconst namespace = name === 'svg' ? NAMESPACE_SVG : name === 'math' ? NAMESPACE_MATHML : ns;\n\n\t\tvar element = create_element(name, namespace, attributes?.is);\n\n\t\tfor (var key in attributes) {\n\t\t\tset_attribute(element, key, attributes[key]);\n\t\t}\n\n\t\tif (children.length > 0) {\n\t\t\tvar target =\n\t\t\t\telement.tagName === 'TEMPLATE'\n\t\t\t\t\t? /** @type {HTMLTemplateElement} */ (element).content\n\t\t\t\t\t: element;\n\n\t\t\ttarget.append(\n\t\t\t\tfragment_from_tree(children, element.tagName === 'foreignObject' ? undefined : namespace)\n\t\t\t);\n\t\t}\n\n\t\tfragment.append(element);\n\t}\n\n\treturn fragment;\n}\n\n/**\n * @param {TemplateStructure[]} structure\n * @param {number} flags\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_tree(structure, flags) {\n\tvar is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;\n\tvar use_import_node = (flags & TEMPLATE_USE_IMPORT_NODE) !== 0;\n\n\t/** @type {Node} */\n\tvar node;\n\n\treturn () => {\n\t\tif (hydrating) {\n\t\t\tassign_nodes(hydrate_node, null);\n\t\t\treturn hydrate_node;\n\t\t}\n\n\t\tif (node === undefined) {\n\t\t\tconst ns =\n\t\t\t\t(flags & TEMPLATE_USE_SVG) !== 0\n\t\t\t\t\t? NAMESPACE_SVG\n\t\t\t\t\t: (flags & TEMPLATE_USE_MATHML) !== 0\n\t\t\t\t\t\t? NAMESPACE_MATHML\n\t\t\t\t\t\t: undefined;\n\n\t\t\tnode = fragment_from_tree(structure, ns);\n\t\t\tif (!is_fragment) node = /** @type {Node} */ (get_first_child(node));\n\t\t}\n\n\t\tvar clone = /** @type {TemplateNode} */ (\n\t\t\tuse_import_node || is_firefox ? document.importNode(node, true) : node.cloneNode(true)\n\t\t);\n\n\t\tif (is_fragment) {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_first_child(clone));\n\t\t\tvar end = /** @type {TemplateNode} */ (clone.lastChild);\n\n\t\t\tassign_nodes(start, end);\n\t\t} else {\n\t\t\tassign_nodes(clone, clone);\n\t\t}\n\n\t\treturn clone;\n\t};\n}\n\n/**\n * @param {() => Element | DocumentFragment} fn\n */\nexport function with_script(fn) {\n\treturn () => run_scripts(fn());\n}\n\n/**\n * Creating a document fragment from HTML that contains script tags will not execute\n * the scripts. We need to replace the script tags with new ones so that they are executed.\n * @param {Element | DocumentFragment} node\n * @returns {Node | Node[]}\n */\nfunction run_scripts(node) {\n\t// scripts were SSR'd, in which case they will run\n\tif (hydrating) return node;\n\n\tconst is_fragment = node.nodeType === DOCUMENT_FRAGMENT_NODE;\n\tconst scripts =\n\t\t/** @type {HTMLElement} */ (node).tagName === 'SCRIPT'\n\t\t\t? [/** @type {HTMLScriptElement} */ (node)]\n\t\t\t: node.querySelectorAll('script');\n\tconst effect = /** @type {Effect} */ (active_effect);\n\n\tfor (const script of scripts) {\n\t\tconst clone = document.createElement('script');\n\t\tfor (var attribute of script.attributes) {\n\t\t\tclone.setAttribute(attribute.name, attribute.value);\n\t\t}\n\n\t\tclone.textContent = script.textContent;\n\n\t\t// The script has changed - if it's at the edges, the effect now points at dead nodes\n\t\tif (is_fragment ? node.firstChild === script : node === script) {\n\t\t\teffect.nodes_start = clone;\n\t\t}\n\t\tif (is_fragment ? node.lastChild === script : node === script) {\n\t\t\teffect.nodes_end = clone;\n\t\t}\n\n\t\tscript.replaceWith(clone);\n\t}\n\treturn node;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {any} value\n */\nexport function text(value = '') {\n\tif (!hydrating) {\n\t\tvar t = create_text(value + '');\n\t\tassign_nodes(t, t);\n\t\treturn t;\n\t}\n\n\tvar node = hydrate_node;\n\n\tif (node.nodeType !== TEXT_NODE) {\n\t\t// if an {expression} is empty during SSR, we need to insert an empty text node\n\t\tnode.before((node = create_text()));\n\t\tset_hydrate_node(node);\n\t}\n\n\tassign_nodes(node, node);\n\treturn node;\n}\n\n/**\n * @returns {TemplateNode | DocumentFragment}\n */\nexport function comment() {\n\t// we're not delegating to `template` here for performance reasons\n\tif (hydrating) {\n\t\tassign_nodes(hydrate_node, null);\n\t\treturn hydrate_node;\n\t}\n\n\tvar frag = document.createDocumentFragment();\n\tvar start = document.createComment('');\n\tvar anchor = create_text();\n\tfrag.append(start, anchor);\n\n\tassign_nodes(start, anchor);\n\n\treturn frag;\n}\n\n/**\n * Assign the created (or in hydration mode, traversed) dom elements to the current block\n * and insert the elements into the dom (in client mode).\n * @param {Text | Comment | Element} anchor\n * @param {DocumentFragment | Element} dom\n */\nexport function append(anchor, dom) {\n\tif (hydrating) {\n\t\t/** @type {Effect} */ (active_effect).nodes_end = hydrate_node;\n\t\thydrate_next();\n\t\treturn;\n\t}\n\n\tif (anchor === null) {\n\t\t// edge case  void `<svelte:element>` with content\n\t\treturn;\n\t}\n\n\tanchor.before(/** @type {Node} */ (dom));\n}\n\n/**\n * Create (or hydrate) an unique UID for the component instance.\n */\nexport function props_id() {\n\tif (\n\t\thydrating &&\n\t\thydrate_node &&\n\t\thydrate_node.nodeType === COMMENT_NODE &&\n\t\thydrate_node.textContent?.startsWith(`$`)\n\t) {\n\t\tconst id = hydrate_node.textContent.substring(1);\n\t\thydrate_next();\n\t\treturn id;\n\t}\n\n\t// @ts-expect-error This way we ensure the id is unique even across Svelte runtimes\n\t(window.__svelte ??= {}).uid ??= 1;\n\n\t// @ts-expect-error\n\treturn `c${window.__svelte.uid++}`;\n}\n","const regex_return_characters = /\\r/g;\n\n/**\n * @param {string} str\n * @returns {string}\n */\nexport function hash(str) {\n\tstr = str.replace(regex_return_characters, '');\n\tlet hash = 5381;\n\tlet i = str.length;\n\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn (hash >>> 0).toString(36);\n}\n\nconst VOID_ELEMENT_NAMES = [\n\t'area',\n\t'base',\n\t'br',\n\t'col',\n\t'command',\n\t'embed',\n\t'hr',\n\t'img',\n\t'input',\n\t'keygen',\n\t'link',\n\t'meta',\n\t'param',\n\t'source',\n\t'track',\n\t'wbr'\n];\n\n/**\n * Returns `true` if `name` is of a void element\n * @param {string} name\n */\nexport function is_void(name) {\n\treturn VOID_ELEMENT_NAMES.includes(name) || name.toLowerCase() === '!doctype';\n}\n\nconst RESERVED_WORDS = [\n\t'arguments',\n\t'await',\n\t'break',\n\t'case',\n\t'catch',\n\t'class',\n\t'const',\n\t'continue',\n\t'debugger',\n\t'default',\n\t'delete',\n\t'do',\n\t'else',\n\t'enum',\n\t'eval',\n\t'export',\n\t'extends',\n\t'false',\n\t'finally',\n\t'for',\n\t'function',\n\t'if',\n\t'implements',\n\t'import',\n\t'in',\n\t'instanceof',\n\t'interface',\n\t'let',\n\t'new',\n\t'null',\n\t'package',\n\t'private',\n\t'protected',\n\t'public',\n\t'return',\n\t'static',\n\t'super',\n\t'switch',\n\t'this',\n\t'throw',\n\t'true',\n\t'try',\n\t'typeof',\n\t'var',\n\t'void',\n\t'while',\n\t'with',\n\t'yield'\n];\n\n/**\n * Returns `true` if `word` is a reserved JavaScript keyword\n * @param {string} word\n */\nexport function is_reserved(word) {\n\treturn RESERVED_WORDS.includes(word);\n}\n\n/**\n * @param {string} name\n */\nexport function is_capture_event(name) {\n\treturn name.endsWith('capture') && name !== 'gotpointercapture' && name !== 'lostpointercapture';\n}\n\n/** List of Element events that will be delegated */\nconst DELEGATED_EVENTS = [\n\t'beforeinput',\n\t'click',\n\t'change',\n\t'dblclick',\n\t'contextmenu',\n\t'focusin',\n\t'focusout',\n\t'input',\n\t'keydown',\n\t'keyup',\n\t'mousedown',\n\t'mousemove',\n\t'mouseout',\n\t'mouseover',\n\t'mouseup',\n\t'pointerdown',\n\t'pointermove',\n\t'pointerout',\n\t'pointerover',\n\t'pointerup',\n\t'touchend',\n\t'touchmove',\n\t'touchstart'\n];\n\n/**\n * Returns `true` if `event_name` is a delegated event\n * @param {string} event_name\n */\nexport function is_delegated(event_name) {\n\treturn DELEGATED_EVENTS.includes(event_name);\n}\n\n/**\n * Attributes that are boolean, i.e. they are present or not present.\n */\nconst DOM_BOOLEAN_ATTRIBUTES = [\n\t'allowfullscreen',\n\t'async',\n\t'autofocus',\n\t'autoplay',\n\t'checked',\n\t'controls',\n\t'default',\n\t'disabled',\n\t'formnovalidate',\n\t'indeterminate',\n\t'inert',\n\t'ismap',\n\t'loop',\n\t'multiple',\n\t'muted',\n\t'nomodule',\n\t'novalidate',\n\t'open',\n\t'playsinline',\n\t'readonly',\n\t'required',\n\t'reversed',\n\t'seamless',\n\t'selected',\n\t'webkitdirectory',\n\t'defer',\n\t'disablepictureinpicture',\n\t'disableremoteplayback'\n];\n\n/**\n * Returns `true` if `name` is a boolean attribute\n * @param {string} name\n */\nexport function is_boolean_attribute(name) {\n\treturn DOM_BOOLEAN_ATTRIBUTES.includes(name);\n}\n\n/**\n * @type {Record<string, string>}\n * List of attribute names that should be aliased to their property names\n * because they behave differently between setting them as an attribute and\n * setting them as a property.\n */\nconst ATTRIBUTE_ALIASES = {\n\t// no `class: 'className'` because we handle that separately\n\tformnovalidate: 'formNoValidate',\n\tismap: 'isMap',\n\tnomodule: 'noModule',\n\tplaysinline: 'playsInline',\n\treadonly: 'readOnly',\n\tdefaultvalue: 'defaultValue',\n\tdefaultchecked: 'defaultChecked',\n\tsrcobject: 'srcObject',\n\tnovalidate: 'noValidate',\n\tallowfullscreen: 'allowFullscreen',\n\tdisablepictureinpicture: 'disablePictureInPicture',\n\tdisableremoteplayback: 'disableRemotePlayback'\n};\n\n/**\n * @param {string} name\n */\nexport function normalize_attribute(name) {\n\tname = name.toLowerCase();\n\treturn ATTRIBUTE_ALIASES[name] ?? name;\n}\n\nconst DOM_PROPERTIES = [\n\t...DOM_BOOLEAN_ATTRIBUTES,\n\t'formNoValidate',\n\t'isMap',\n\t'noModule',\n\t'playsInline',\n\t'readOnly',\n\t'value',\n\t'volume',\n\t'defaultValue',\n\t'defaultChecked',\n\t'srcObject',\n\t'noValidate',\n\t'allowFullscreen',\n\t'disablePictureInPicture',\n\t'disableRemotePlayback'\n];\n\n/**\n * @param {string} name\n */\nexport function is_dom_property(name) {\n\treturn DOM_PROPERTIES.includes(name);\n}\n\nconst NON_STATIC_PROPERTIES = ['autofocus', 'muted', 'defaultValue', 'defaultChecked'];\n\n/**\n * Returns `true` if the given attribute cannot be set through the template\n * string, i.e. needs some kind of JavaScript handling to work.\n * @param {string} name\n */\nexport function cannot_be_set_statically(name) {\n\treturn NON_STATIC_PROPERTIES.includes(name);\n}\n\n/**\n * Subset of delegated events which should be passive by default.\n * These two are already passive via browser defaults on window, document and body.\n * But since\n * - we're delegating them\n * - they happen often\n * - they apply to mobile which is generally less performant\n * we're marking them as passive by default for other elements, too.\n */\nconst PASSIVE_EVENTS = ['touchstart', 'touchmove'];\n\n/**\n * Returns `true` if `name` is a passive event\n * @param {string} name\n */\nexport function is_passive_event(name) {\n\treturn PASSIVE_EVENTS.includes(name);\n}\n\nconst CONTENT_EDITABLE_BINDINGS = ['textContent', 'innerHTML', 'innerText'];\n\n/** @param {string} name */\nexport function is_content_editable_binding(name) {\n\treturn CONTENT_EDITABLE_BINDINGS.includes(name);\n}\n\nconst LOAD_ERROR_ELEMENTS = [\n\t'body',\n\t'embed',\n\t'iframe',\n\t'img',\n\t'link',\n\t'object',\n\t'script',\n\t'style',\n\t'track'\n];\n\n/**\n * Returns `true` if the element emits `load` and `error` events\n * @param {string} name\n */\nexport function is_load_error_element(name) {\n\treturn LOAD_ERROR_ELEMENTS.includes(name);\n}\n\nconst SVG_ELEMENTS = [\n\t'altGlyph',\n\t'altGlyphDef',\n\t'altGlyphItem',\n\t'animate',\n\t'animateColor',\n\t'animateMotion',\n\t'animateTransform',\n\t'circle',\n\t'clipPath',\n\t'color-profile',\n\t'cursor',\n\t'defs',\n\t'desc',\n\t'discard',\n\t'ellipse',\n\t'feBlend',\n\t'feColorMatrix',\n\t'feComponentTransfer',\n\t'feComposite',\n\t'feConvolveMatrix',\n\t'feDiffuseLighting',\n\t'feDisplacementMap',\n\t'feDistantLight',\n\t'feDropShadow',\n\t'feFlood',\n\t'feFuncA',\n\t'feFuncB',\n\t'feFuncG',\n\t'feFuncR',\n\t'feGaussianBlur',\n\t'feImage',\n\t'feMerge',\n\t'feMergeNode',\n\t'feMorphology',\n\t'feOffset',\n\t'fePointLight',\n\t'feSpecularLighting',\n\t'feSpotLight',\n\t'feTile',\n\t'feTurbulence',\n\t'filter',\n\t'font',\n\t'font-face',\n\t'font-face-format',\n\t'font-face-name',\n\t'font-face-src',\n\t'font-face-uri',\n\t'foreignObject',\n\t'g',\n\t'glyph',\n\t'glyphRef',\n\t'hatch',\n\t'hatchpath',\n\t'hkern',\n\t'image',\n\t'line',\n\t'linearGradient',\n\t'marker',\n\t'mask',\n\t'mesh',\n\t'meshgradient',\n\t'meshpatch',\n\t'meshrow',\n\t'metadata',\n\t'missing-glyph',\n\t'mpath',\n\t'path',\n\t'pattern',\n\t'polygon',\n\t'polyline',\n\t'radialGradient',\n\t'rect',\n\t'set',\n\t'solidcolor',\n\t'stop',\n\t'svg',\n\t'switch',\n\t'symbol',\n\t'text',\n\t'textPath',\n\t'tref',\n\t'tspan',\n\t'unknown',\n\t'use',\n\t'view',\n\t'vkern'\n];\n\n/** @param {string} name */\nexport function is_svg(name) {\n\treturn SVG_ELEMENTS.includes(name);\n}\n\nconst MATHML_ELEMENTS = [\n\t'annotation',\n\t'annotation-xml',\n\t'maction',\n\t'math',\n\t'merror',\n\t'mfrac',\n\t'mi',\n\t'mmultiscripts',\n\t'mn',\n\t'mo',\n\t'mover',\n\t'mpadded',\n\t'mphantom',\n\t'mprescripts',\n\t'mroot',\n\t'mrow',\n\t'ms',\n\t'mspace',\n\t'msqrt',\n\t'mstyle',\n\t'msub',\n\t'msubsup',\n\t'msup',\n\t'mtable',\n\t'mtd',\n\t'mtext',\n\t'mtr',\n\t'munder',\n\t'munderover',\n\t'semantics'\n];\n\n/** @param {string} name */\nexport function is_mathml(name) {\n\treturn MATHML_ELEMENTS.includes(name);\n}\n\nconst STATE_CREATION_RUNES = /** @type {const} */ ([\n\t'$state',\n\t'$state.raw',\n\t'$derived',\n\t'$derived.by'\n]);\n\nconst RUNES = /** @type {const} */ ([\n\t...STATE_CREATION_RUNES,\n\t'$state.eager',\n\t'$state.snapshot',\n\t'$props',\n\t'$props.id',\n\t'$bindable',\n\t'$effect',\n\t'$effect.pre',\n\t'$effect.tracking',\n\t'$effect.root',\n\t'$effect.pending',\n\t'$inspect',\n\t'$inspect().with',\n\t'$inspect.trace',\n\t'$host'\n]);\n\n/** @typedef {typeof RUNES[number]} RuneName */\n\n/**\n * @param {string} name\n * @returns {name is RuneName}\n */\nexport function is_rune(name) {\n\treturn RUNES.includes(/** @type {RuneName} */ (name));\n}\n\n/** @typedef {typeof STATE_CREATION_RUNES[number]} StateCreationRuneName */\n\n/**\n * @param {string} name\n * @returns {name is StateCreationRuneName}\n */\nexport function is_state_creation_rune(name) {\n\treturn STATE_CREATION_RUNES.includes(/** @type {StateCreationRuneName} */ (name));\n}\n\n/** List of elements that require raw contents and should not have SSR comments put in them */\nconst RAW_TEXT_ELEMENTS = /** @type {const} */ (['textarea', 'script', 'style', 'title']);\n\n/** @param {string} name */\nexport function is_raw_text_element(name) {\n\treturn RAW_TEXT_ELEMENTS.includes(/** @type {typeof RAW_TEXT_ELEMENTS[number]} */ (name));\n}\n\n/**\n * Prevent devtools trying to make `location` a clickable link by inserting a zero-width space\n * @template {string | undefined} T\n * @param {T} location\n * @returns {T};\n */\nexport function sanitize_location(location) {\n\treturn /** @type {T} */ (location?.replace(/\\//g, '/\\u200b'));\n}\n","/** @import { ComponentContext, Effect, TemplateNode } from '#client' */\n/** @import { Component, ComponentType, SvelteComponent, MountOptions } from '../../index.js' */\nimport { DEV } from 'esm-env';\nimport {\n\tclear_text_content,\n\tcreate_text,\n\tget_first_child,\n\tget_next_sibling,\n\tinit_operations\n} from './dom/operations.js';\nimport { HYDRATION_END, HYDRATION_ERROR, HYDRATION_START } from '../../constants.js';\nimport { active_effect } from './runtime.js';\nimport { push, pop, component_context } from './context.js';\nimport { component_root } from './reactivity/effects.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tset_hydrate_node,\n\tset_hydrating\n} from './dom/hydration.js';\nimport { array_from } from '../shared/utils.js';\nimport {\n\tall_registered_events,\n\thandle_event_propagation,\n\troot_event_handles\n} from './dom/elements/events.js';\nimport { reset_head_anchor } from './dom/blocks/svelte-head.js';\nimport * as w from './warnings.js';\nimport * as e from './errors.js';\nimport { assign_nodes } from './dom/template.js';\nimport { is_passive_event } from '../../utils.js';\nimport { COMMENT_NODE, STATE_SYMBOL } from './constants.js';\nimport { boundary } from './dom/blocks/boundary.js';\n\n/**\n * This is normally true  block effects should run their intro transitions \n * but is false during hydration (unless `options.intro` is `true`) and\n * when creating the children of a `<svelte:element>` that just changed tag\n */\nexport let should_intro = true;\n\n/** @param {boolean} value */\nexport function set_should_intro(value) {\n\tshould_intro = value;\n}\n\n/**\n * @param {Element} text\n * @param {string} value\n * @returns {void}\n */\nexport function set_text(text, value) {\n\t// For objects, we apply string coercion (which might make things like $state array references in the template reactive) before diffing\n\tvar str = value == null ? '' : typeof value === 'object' ? value + '' : value;\n\t// @ts-expect-error\n\tif (str !== (text.__t ??= text.nodeValue)) {\n\t\t// @ts-expect-error\n\t\ttext.__t = str;\n\t\ttext.nodeValue = str + '';\n\t}\n}\n\n/**\n * Mounts a component to the given target and returns the exports and potentially the props (if compiled with `accessors: true`) of the component.\n * Transitions will play during the initial render unless the `intro` option is set to `false`.\n *\n * @template {Record<string, any>} Props\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<Props>> | Component<Props, Exports, any>} component\n * @param {MountOptions<Props>} options\n * @returns {Exports}\n */\nexport function mount(component, options) {\n\treturn _mount(component, options);\n}\n\n/**\n * Hydrates a component on the given target and returns the exports and potentially the props (if compiled with `accessors: true`) of the component\n *\n * @template {Record<string, any>} Props\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<Props>> | Component<Props, Exports, any>} component\n * @param {{} extends Props ? {\n * \t\ttarget: Document | Element | ShadowRoot;\n * \t\tprops?: Props;\n * \t\tevents?: Record<string, (e: any) => any>;\n *  \tcontext?: Map<any, any>;\n * \t\tintro?: boolean;\n * \t\trecover?: boolean;\n * \t} : {\n * \t\ttarget: Document | Element | ShadowRoot;\n * \t\tprops: Props;\n * \t\tevents?: Record<string, (e: any) => any>;\n *  \tcontext?: Map<any, any>;\n * \t\tintro?: boolean;\n * \t\trecover?: boolean;\n * \t}} options\n * @returns {Exports}\n */\nexport function hydrate(component, options) {\n\tinit_operations();\n\toptions.intro = options.intro ?? false;\n\tconst target = options.target;\n\tconst was_hydrating = hydrating;\n\tconst previous_hydrate_node = hydrate_node;\n\n\ttry {\n\t\tvar anchor = /** @type {TemplateNode} */ (get_first_child(target));\n\t\twhile (\n\t\t\tanchor &&\n\t\t\t(anchor.nodeType !== COMMENT_NODE || /** @type {Comment} */ (anchor).data !== HYDRATION_START)\n\t\t) {\n\t\t\tanchor = /** @type {TemplateNode} */ (get_next_sibling(anchor));\n\t\t}\n\n\t\tif (!anchor) {\n\t\t\tthrow HYDRATION_ERROR;\n\t\t}\n\n\t\tset_hydrating(true);\n\t\tset_hydrate_node(/** @type {Comment} */ (anchor));\n\n\t\tconst instance = _mount(component, { ...options, anchor });\n\n\t\tset_hydrating(false);\n\n\t\treturn /**  @type {Exports} */ (instance);\n\t} catch (error) {\n\t\t// re-throw Svelte errors - they are certainly not related to hydration\n\t\tif (\n\t\t\terror instanceof Error &&\n\t\t\terror.message.split('\\n').some((line) => line.startsWith('https://svelte.dev/e/'))\n\t\t) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error !== HYDRATION_ERROR) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn('Failed to hydrate: ', error);\n\t\t}\n\n\t\tif (options.recover === false) {\n\t\t\te.hydration_failed();\n\t\t}\n\n\t\t// If an error occurred above, the operations might not yet have been initialised.\n\t\tinit_operations();\n\t\tclear_text_content(target);\n\n\t\tset_hydrating(false);\n\t\treturn mount(component, options);\n\t} finally {\n\t\tset_hydrating(was_hydrating);\n\t\tset_hydrate_node(previous_hydrate_node);\n\t\treset_head_anchor();\n\t}\n}\n\n/** @type {Map<string, number>} */\nconst document_listeners = new Map();\n\n/**\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<any>> | Component<any>} Component\n * @param {MountOptions} options\n * @returns {Exports}\n */\nfunction _mount(Component, { target, anchor, props = {}, events, context, intro = true }) {\n\tinit_operations();\n\n\t/** @type {Set<string>} */\n\tvar registered_events = new Set();\n\n\t/** @param {Array<string>} events */\n\tvar event_handle = (events) => {\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\tvar event_name = events[i];\n\n\t\t\tif (registered_events.has(event_name)) continue;\n\t\t\tregistered_events.add(event_name);\n\n\t\t\tvar passive = is_passive_event(event_name);\n\n\t\t\t// Add the event listener to both the container and the document.\n\t\t\t// The container listener ensures we catch events from within in case\n\t\t\t// the outer content stops propagation of the event.\n\t\t\ttarget.addEventListener(event_name, handle_event_propagation, { passive });\n\n\t\t\tvar n = document_listeners.get(event_name);\n\n\t\t\tif (n === undefined) {\n\t\t\t\t// The document listener ensures we catch events that originate from elements that were\n\t\t\t\t// manually moved outside of the container (e.g. via manual portals).\n\t\t\t\tdocument.addEventListener(event_name, handle_event_propagation, { passive });\n\t\t\t\tdocument_listeners.set(event_name, 1);\n\t\t\t} else {\n\t\t\t\tdocument_listeners.set(event_name, n + 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tevent_handle(array_from(all_registered_events));\n\troot_event_handles.add(event_handle);\n\n\t/** @type {Exports} */\n\t// @ts-expect-error will be defined because the render effect runs synchronously\n\tvar component = undefined;\n\n\tvar unmount = component_root(() => {\n\t\tvar anchor_node = anchor ?? target.appendChild(create_text());\n\n\t\tboundary(\n\t\t\t/** @type {TemplateNode} */ (anchor_node),\n\t\t\t{\n\t\t\t\tpending: () => {}\n\t\t\t},\n\t\t\t(anchor_node) => {\n\t\t\t\tif (context) {\n\t\t\t\t\tpush({});\n\t\t\t\t\tvar ctx = /** @type {ComponentContext} */ (component_context);\n\t\t\t\t\tctx.c = context;\n\t\t\t\t}\n\n\t\t\t\tif (events) {\n\t\t\t\t\t// We can't spread the object or else we'd lose the state proxy stuff, if it is one\n\t\t\t\t\t/** @type {any} */ (props).$$events = events;\n\t\t\t\t}\n\n\t\t\t\tif (hydrating) {\n\t\t\t\t\tassign_nodes(/** @type {TemplateNode} */ (anchor_node), null);\n\t\t\t\t}\n\n\t\t\t\tshould_intro = intro;\n\t\t\t\t// @ts-expect-error the public typings are not what the actual function looks like\n\t\t\t\tcomponent = Component(anchor_node, props) || {};\n\t\t\t\tshould_intro = true;\n\n\t\t\t\tif (hydrating) {\n\t\t\t\t\t/** @type {Effect} */ (active_effect).nodes_end = hydrate_node;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\thydrate_node === null ||\n\t\t\t\t\t\thydrate_node.nodeType !== COMMENT_NODE ||\n\t\t\t\t\t\t/** @type {Comment} */ (hydrate_node).data !== HYDRATION_END\n\t\t\t\t\t) {\n\t\t\t\t\t\tw.hydration_mismatch();\n\t\t\t\t\t\tthrow HYDRATION_ERROR;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (context) {\n\t\t\t\t\tpop();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\treturn () => {\n\t\t\tfor (var event_name of registered_events) {\n\t\t\t\ttarget.removeEventListener(event_name, handle_event_propagation);\n\n\t\t\t\tvar n = /** @type {number} */ (document_listeners.get(event_name));\n\n\t\t\t\tif (--n === 0) {\n\t\t\t\t\tdocument.removeEventListener(event_name, handle_event_propagation);\n\t\t\t\t\tdocument_listeners.delete(event_name);\n\t\t\t\t} else {\n\t\t\t\t\tdocument_listeners.set(event_name, n);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\troot_event_handles.delete(event_handle);\n\n\t\t\tif (anchor_node !== anchor) {\n\t\t\t\tanchor_node.parentNode?.removeChild(anchor_node);\n\t\t\t}\n\t\t};\n\t});\n\n\tmounted_components.set(component, unmount);\n\treturn component;\n}\n\n/**\n * References of the components that were mounted or hydrated.\n * Uses a `WeakMap` to avoid memory leaks.\n */\nlet mounted_components = new WeakMap();\n\n/**\n * Unmounts a component that was previously mounted using `mount` or `hydrate`.\n *\n * Since 5.13.0, if `options.outro` is `true`, [transitions](https://svelte.dev/docs/svelte/transition) will play before the component is removed from the DOM.\n *\n * Returns a `Promise` that resolves after transitions have completed if `options.outro` is true, or immediately otherwise (prior to 5.13.0, returns `void`).\n *\n * ```js\n * import { mount, unmount } from 'svelte';\n * import App from './App.svelte';\n *\n * const app = mount(App, { target: document.body });\n *\n * // later...\n * unmount(app, { outro: true });\n * ```\n * @param {Record<string, any>} component\n * @param {{ outro?: boolean }} [options]\n * @returns {Promise<void>}\n */\nexport function unmount(component, options) {\n\tconst fn = mounted_components.get(component);\n\n\tif (fn) {\n\t\tmounted_components.delete(component);\n\t\treturn fn(options);\n\t}\n\n\tif (DEV) {\n\t\tif (STATE_SYMBOL in component) {\n\t\t\tw.state_proxy_unmount();\n\t\t} else {\n\t\t\tw.lifecycle_double_unmount();\n\t\t}\n\t}\n\n\treturn Promise.resolve();\n}\n","/** @import { Effect, TemplateNode } from '#client' */\nimport { is_runes } from '../../context.js';\nimport { Batch, current_batch } from '../../reactivity/batch.js';\nimport {\n\tbranch,\n\tdestroy_effect,\n\tmove_effect,\n\tpause_effect,\n\tresume_effect\n} from '../../reactivity/effects.js';\nimport { set_should_intro, should_intro } from '../../render.js';\nimport { hydrate_node, hydrating } from '../hydration.js';\nimport { create_text, should_defer_append } from '../operations.js';\n\n/**\n * @typedef {{ effect: Effect, fragment: DocumentFragment }} Branch\n */\n\n/**\n * @template Key\n */\nexport class BranchManager {\n\t/** @type {TemplateNode} */\n\tanchor;\n\n\t/** @type {Map<Batch, Key>} */\n\t#batches = new Map();\n\n\t/** @type {Map<Key, Effect>} */\n\t#onscreen = new Map();\n\n\t/** @type {Map<Key, Branch>} */\n\t#offscreen = new Map();\n\n\t/**\n\t * Whether to pause (i.e. outro) on change, or destroy immediately.\n\t * This is necessary for `<svelte:element>`\n\t */\n\t#transition = true;\n\n\t/**\n\t * @param {TemplateNode} anchor\n\t * @param {boolean} transition\n\t */\n\tconstructor(anchor, transition = true) {\n\t\tthis.anchor = anchor;\n\t\tthis.#transition = transition;\n\t}\n\n\t#commit = () => {\n\t\tvar batch = /** @type {Batch} */ (current_batch);\n\n\t\t// if this batch was made obsolete, bail\n\t\tif (!this.#batches.has(batch)) return;\n\n\t\tvar key = /** @type {Key} */ (this.#batches.get(batch));\n\n\t\tvar onscreen = this.#onscreen.get(key);\n\n\t\tif (onscreen) {\n\t\t\t// effect is already in the DOM  abort any current outro\n\t\t\tresume_effect(onscreen);\n\t\t} else {\n\t\t\t// effect is currently offscreen. put it in the DOM\n\t\t\tvar offscreen = this.#offscreen.get(key);\n\n\t\t\tif (offscreen) {\n\t\t\t\tthis.#onscreen.set(key, offscreen.effect);\n\t\t\t\tthis.#offscreen.delete(key);\n\n\t\t\t\t// remove the anchor...\n\t\t\t\t/** @type {TemplateNode} */ (offscreen.fragment.lastChild).remove();\n\n\t\t\t\t// ...and append the fragment\n\t\t\t\tthis.anchor.before(offscreen.fragment);\n\t\t\t\tonscreen = offscreen.effect;\n\t\t\t}\n\t\t}\n\n\t\tfor (const [b, k] of this.#batches) {\n\t\t\tthis.#batches.delete(b);\n\n\t\t\tif (b === batch) {\n\t\t\t\t// keep values for newer batches\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst offscreen = this.#offscreen.get(k);\n\n\t\t\tif (offscreen) {\n\t\t\t\t// for older batches, destroy offscreen effects\n\t\t\t\t// as they will never be committed\n\t\t\t\tdestroy_effect(offscreen.effect);\n\t\t\t\tthis.#offscreen.delete(k);\n\t\t\t}\n\t\t}\n\n\t\t// outro/destroy all onscreen effects...\n\t\tfor (const [k, effect] of this.#onscreen) {\n\t\t\t// ...except the one that was just committed\n\t\t\tif (k === key) continue;\n\n\t\t\tconst on_destroy = () => {\n\t\t\t\tconst keys = Array.from(this.#batches.values());\n\n\t\t\t\tif (keys.includes(k)) {\n\t\t\t\t\t// keep the effect offscreen, as another batch will need it\n\t\t\t\t\tvar fragment = document.createDocumentFragment();\n\t\t\t\t\tmove_effect(effect, fragment);\n\n\t\t\t\t\tfragment.append(create_text()); // TODO can we avoid this?\n\n\t\t\t\t\tthis.#offscreen.set(k, { effect, fragment });\n\t\t\t\t} else {\n\t\t\t\t\tdestroy_effect(effect);\n\t\t\t\t}\n\n\t\t\t\tthis.#onscreen.delete(k);\n\t\t\t};\n\n\t\t\tif (this.#transition || !onscreen) {\n\t\t\t\tpause_effect(effect, on_destroy, false);\n\t\t\t} else {\n\t\t\t\ton_destroy();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t *\n\t * @param {any} key\n\t * @param {null | ((target: TemplateNode) => void)} fn\n\t */\n\tensure(key, fn) {\n\t\tvar batch = /** @type {Batch} */ (current_batch);\n\t\tvar defer = should_defer_append();\n\n\t\tif (fn && !this.#onscreen.has(key) && !this.#offscreen.has(key)) {\n\t\t\tif (defer) {\n\t\t\t\tvar fragment = document.createDocumentFragment();\n\t\t\t\tvar target = create_text();\n\n\t\t\t\tfragment.append(target);\n\n\t\t\t\tthis.#offscreen.set(key, {\n\t\t\t\t\teffect: branch(() => fn(target)),\n\t\t\t\t\tfragment\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.#onscreen.set(\n\t\t\t\t\tkey,\n\t\t\t\t\tbranch(() => fn(this.anchor))\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.#batches.set(batch, key);\n\n\t\tif (defer) {\n\t\t\tfor (const [k, effect] of this.#onscreen) {\n\t\t\t\tif (k === key) {\n\t\t\t\t\tbatch.skipped_effects.delete(effect);\n\t\t\t\t} else {\n\t\t\t\t\tbatch.skipped_effects.add(effect);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const [k, branch] of this.#offscreen) {\n\t\t\t\tif (k === key) {\n\t\t\t\t\tbatch.skipped_effects.delete(branch.effect);\n\t\t\t\t} else {\n\t\t\t\t\tbatch.skipped_effects.add(branch.effect);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tbatch.add_callback(this.#commit);\n\t\t} else {\n\t\t\tif (hydrating) {\n\t\t\t\tthis.anchor = hydrate_node;\n\t\t\t}\n\n\t\t\tthis.#commit();\n\t\t}\n\t}\n}\n","/** @import { Snippet } from 'svelte' */\n/** @import { TemplateNode } from '#client' */\n/** @import { Getters } from '#shared' */\nimport { EFFECT_TRANSPARENT, ELEMENT_NODE } from '#client/constants';\nimport { block, teardown } from '../../reactivity/effects.js';\nimport {\n\tdev_current_component_function,\n\tset_dev_current_component_function\n} from '../../context.js';\nimport { hydrate_next, hydrate_node, hydrating } from '../hydration.js';\nimport { create_fragment_from_html } from '../reconciler.js';\nimport { assign_nodes } from '../template.js';\nimport * as w from '../../warnings.js';\nimport * as e from '../../errors.js';\nimport { DEV } from 'esm-env';\nimport { get_first_child, get_next_sibling } from '../operations.js';\nimport { prevent_snippet_stringification } from '../../../shared/validate.js';\nimport { BranchManager } from './branches.js';\n\n/**\n * @template {(node: TemplateNode, ...args: any[]) => void} SnippetFn\n * @param {TemplateNode} node\n * @param {() => SnippetFn | null | undefined} get_snippet\n * @param {(() => any)[]} args\n * @returns {void}\n */\nexport function snippet(node, get_snippet, ...args) {\n\tvar branches = new BranchManager(node);\n\n\tblock(() => {\n\t\tconst snippet = get_snippet() ?? null;\n\n\t\tif (DEV && snippet == null) {\n\t\t\te.invalid_snippet();\n\t\t}\n\n\t\tbranches.ensure(snippet, snippet && ((anchor) => snippet(anchor, ...args)));\n\t}, EFFECT_TRANSPARENT);\n}\n\n/**\n * In development, wrap the snippet function so that it passes validation, and so that the\n * correct component context is set for ownership checks\n * @param {any} component\n * @param {(node: TemplateNode, ...args: any[]) => void} fn\n */\nexport function wrap_snippet(component, fn) {\n\tconst snippet = (/** @type {TemplateNode} */ node, /** @type {any[]} */ ...args) => {\n\t\tvar previous_component_function = dev_current_component_function;\n\t\tset_dev_current_component_function(component);\n\n\t\ttry {\n\t\t\treturn fn(node, ...args);\n\t\t} finally {\n\t\t\tset_dev_current_component_function(previous_component_function);\n\t\t}\n\t};\n\n\tprevent_snippet_stringification(snippet);\n\n\treturn snippet;\n}\n\n/**\n * Create a snippet programmatically\n * @template {unknown[]} Params\n * @param {(...params: Getters<Params>) => {\n *   render: () => string\n *   setup?: (element: Element) => void | (() => void)\n * }} fn\n * @returns {Snippet<Params>}\n */\nexport function createRawSnippet(fn) {\n\t// @ts-expect-error the types are a lie\n\treturn (/** @type {TemplateNode} */ anchor, /** @type {Getters<Params>} */ ...params) => {\n\t\tvar snippet = fn(...params);\n\n\t\t/** @type {Element} */\n\t\tvar element;\n\n\t\tif (hydrating) {\n\t\t\telement = /** @type {Element} */ (hydrate_node);\n\t\t\thydrate_next();\n\t\t} else {\n\t\t\tvar html = snippet.render().trim();\n\t\t\tvar fragment = create_fragment_from_html(html);\n\t\t\telement = /** @type {Element} */ (get_first_child(fragment));\n\n\t\t\tif (DEV && (get_next_sibling(element) !== null || element.nodeType !== ELEMENT_NODE)) {\n\t\t\t\tw.invalid_raw_snippet_render();\n\t\t\t}\n\n\t\t\tanchor.before(element);\n\t\t}\n\n\t\tconst result = snippet.setup?.(element);\n\t\tassign_nodes(element, element);\n\n\t\tif (typeof result === 'function') {\n\t\t\tteardown(result);\n\t\t}\n\t};\n}\n","/** @import { ComponentContext, ComponentContextLegacy } from '#client' */\n/** @import { EventDispatcher } from './index.js' */\n/** @import { NotFunction } from './internal/types.js' */\nimport { active_reaction, untrack } from './internal/client/runtime.js';\nimport { is_array } from './internal/shared/utils.js';\nimport { user_effect } from './internal/client/index.js';\nimport * as e from './internal/client/errors.js';\nimport { legacy_mode_flag } from './internal/flags/index.js';\nimport { component_context } from './internal/client/context.js';\nimport { DEV } from 'esm-env';\n\nif (DEV) {\n\t/**\n\t * @param {string} rune\n\t */\n\tfunction throw_rune_error(rune) {\n\t\tif (!(rune in globalThis)) {\n\t\t\t// TODO if people start adjusting the \"this can contain runes\" config through v-p-s more, adjust this message\n\t\t\t/** @type {any} */\n\t\t\tlet value; // let's hope noone modifies this global, but belts and braces\n\t\t\tObject.defineProperty(globalThis, rune, {\n\t\t\t\tconfigurable: true,\n\t\t\t\t// eslint-disable-next-line getter-return\n\t\t\t\tget: () => {\n\t\t\t\t\tif (value !== undefined) {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\n\t\t\t\t\te.rune_outside_svelte(rune);\n\t\t\t\t},\n\t\t\t\tset: (v) => {\n\t\t\t\t\tvalue = v;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tthrow_rune_error('$state');\n\tthrow_rune_error('$effect');\n\tthrow_rune_error('$derived');\n\tthrow_rune_error('$inspect');\n\tthrow_rune_error('$props');\n\tthrow_rune_error('$bindable');\n}\n\n/**\n * Returns an [`AbortSignal`](https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal) that aborts when the current [derived](https://svelte.dev/docs/svelte/$derived) or [effect](https://svelte.dev/docs/svelte/$effect) re-runs or is destroyed.\n *\n * Must be called while a derived or effect is running.\n *\n * ```svelte\n * <script>\n * \timport { getAbortSignal } from 'svelte';\n *\n * \tlet { id } = $props();\n *\n * \tasync function getData(id) {\n * \t\tconst response = await fetch(`/items/${id}`, {\n * \t\t\tsignal: getAbortSignal()\n * \t\t});\n *\n * \t\treturn await response.json();\n * \t}\n *\n * \tconst data = $derived(await getData(id));\n * </script>\n * ```\n */\nexport function getAbortSignal() {\n\tif (active_reaction === null) {\n\t\te.get_abort_signal_outside_reaction();\n\t}\n\n\treturn (active_reaction.ac ??= new AbortController()).signal;\n}\n\n/**\n * `onMount`, like [`$effect`](https://svelte.dev/docs/svelte/$effect), schedules a function to run as soon as the component has been mounted to the DOM.\n * Unlike `$effect`, the provided function only runs once.\n *\n * It must be called during the component's initialisation (but doesn't need to live _inside_ the component;\n * it can be called from an external module). If a function is returned _synchronously_ from `onMount`,\n * it will be called when the component is unmounted.\n *\n * `onMount` functions do not run during [server-side rendering](https://svelte.dev/docs/svelte/svelte-server#render).\n *\n * @template T\n * @param {() => NotFunction<T> | Promise<NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component('onMount');\n\t}\n\n\tif (legacy_mode_flag && component_context.l !== null) {\n\t\tinit_update_callbacks(component_context).m.push(fn);\n\t} else {\n\t\tuser_effect(() => {\n\t\t\tconst cleanup = untrack(fn);\n\t\t\tif (typeof cleanup === 'function') return /** @type {() => void} */ (cleanup);\n\t\t});\n\t}\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component('onDestroy');\n\t}\n\n\tonMount(() => () => untrack(fn));\n}\n\n/**\n * @template [T=any]\n * @param {string} type\n * @param {T} [detail]\n * @param {any}params_0\n * @returns {CustomEvent<T>}\n */\nfunction create_custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](https://svelte.dev/docs/svelte/legacy-on#Component-events).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: null; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * @deprecated Use callback props and/or the `$host()` rune instead  see [migration guide](https://svelte.dev/docs/svelte/v5-migration-guide#Event-changes-Component-events)\n * @template {Record<string, any>} [EventMap = any]\n * @returns {EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst active_component_context = component_context;\n\tif (active_component_context === null) {\n\t\te.lifecycle_outside_component('createEventDispatcher');\n\t}\n\n\t/**\n\t * @param [detail]\n\t * @param [options]\n\t */\n\treturn (type, detail, options) => {\n\t\tconst events = /** @type {Record<string, Function | Function[]>} */ (\n\t\t\tactive_component_context.s.$$events\n\t\t)?.[/** @type {string} */ (type)];\n\n\t\tif (events) {\n\t\t\tconst callbacks = is_array(events) ? events.slice() : [events];\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = create_custom_event(/** @type {string} */ (type), detail, options);\n\t\t\tfor (const fn of callbacks) {\n\t\t\t\tfn.call(active_component_context.x, event);\n\t\t\t}\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\n\t\treturn true;\n\t};\n}\n\n// TODO mark beforeUpdate and afterUpdate as deprecated in Svelte 6\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`.\n *\n * In runes mode use `$effect.pre` instead.\n *\n * @deprecated Use [`$effect.pre`](https://svelte.dev/docs/svelte/$effect#$effect.pre) instead\n * @param {() => void} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component('beforeUpdate');\n\t}\n\n\tif (component_context.l === null) {\n\t\te.lifecycle_legacy_only('beforeUpdate');\n\t}\n\n\tinit_update_callbacks(component_context).b.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`.\n *\n * In runes mode use `$effect` instead.\n *\n * @deprecated Use [`$effect`](https://svelte.dev/docs/svelte/$effect) instead\n * @param {() => void} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component('afterUpdate');\n\t}\n\n\tif (component_context.l === null) {\n\t\te.lifecycle_legacy_only('afterUpdate');\n\t}\n\n\tinit_update_callbacks(component_context).a.push(fn);\n}\n\n/**\n * Legacy-mode: Init callbacks object for onMount/beforeUpdate/afterUpdate\n * @param {ComponentContext} context\n */\nfunction init_update_callbacks(context) {\n\tvar l = /** @type {ComponentContextLegacy} */ (context).l;\n\treturn (l.u ??= { a: [], b: [], m: [] });\n}\n\nexport { flushSync } from './internal/client/reactivity/batch.js';\nexport {\n\tcreateContext,\n\tgetContext,\n\tgetAllContexts,\n\thasContext,\n\tsetContext\n} from './internal/client/context.js';\nexport { hydrate, mount, unmount } from './internal/client/render.js';\nexport { tick, untrack, settled } from './internal/client/runtime.js';\nexport { createRawSnippet } from './internal/client/dom/blocks/snippet.js';\n","/** @import { TemplateNode } from '#client' */\nimport { EFFECT_TRANSPARENT } from '#client/constants';\nimport {\n\thydrate_next,\n\thydrating,\n\tread_hydration_instruction,\n\tskip_nodes,\n\tset_hydrate_node,\n\tset_hydrating\n} from '../hydration.js';\nimport { block } from '../../reactivity/effects.js';\nimport { HYDRATION_START_ELSE } from '../../../../constants.js';\nimport { BranchManager } from './branches.js';\n\n// TODO reinstate https://github.com/sveltejs/svelte/pull/15250\n\n/**\n * @param {TemplateNode} node\n * @param {(branch: (fn: (anchor: Node) => void, flag?: boolean) => void) => void} fn\n * @param {boolean} [elseif] True if this is an `{:else if ...}` block rather than an `{#if ...}`, as that affects which transitions are considered 'local'\n * @returns {void}\n */\nexport function if_block(node, fn, elseif = false) {\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\tvar branches = new BranchManager(node);\n\tvar flags = elseif ? EFFECT_TRANSPARENT : 0;\n\n\t/**\n\t * @param {boolean} condition,\n\t * @param {null | ((anchor: Node) => void)} fn\n\t */\n\tfunction update_branch(condition, fn) {\n\t\tif (hydrating) {\n\t\t\tconst is_else = read_hydration_instruction(node) === HYDRATION_START_ELSE;\n\n\t\t\tif (condition === is_else) {\n\t\t\t\t// Hydration mismatch: remove everything inside the anchor and start fresh.\n\t\t\t\t// This could happen with `{#if browser}...{/if}`, for example\n\t\t\t\tvar anchor = skip_nodes();\n\n\t\t\t\tset_hydrate_node(anchor);\n\t\t\t\tbranches.anchor = anchor;\n\n\t\t\t\tset_hydrating(false);\n\t\t\t\tbranches.ensure(condition, fn);\n\t\t\t\tset_hydrating(true);\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tbranches.ensure(condition, fn);\n\t}\n\n\tblock(() => {\n\t\tvar has_branch = false;\n\n\t\tfn((fn, flag = true) => {\n\t\t\thas_branch = true;\n\t\t\tupdate_branch(flag, fn);\n\t\t});\n\n\t\tif (!has_branch) {\n\t\t\tupdate_branch(false, null);\n\t\t}\n\t}, flags);\n}\n","/** @import { TemplateNode } from '#client' */\nimport { render_effect, teardown } from '../../reactivity/effects.js';\nimport { hydrating, set_hydrate_node } from '../hydration.js';\nimport { get_first_child } from '../operations.js';\n\n/**\n * @param {HTMLDivElement | SVGGElement} element\n * @param {() => Record<string, string>} get_styles\n * @returns {void}\n */\nexport function css_props(element, get_styles) {\n\tif (hydrating) {\n\t\tset_hydrate_node(/** @type {TemplateNode} */ (get_first_child(element)));\n\t}\n\n\trender_effect(() => {\n\t\tvar styles = get_styles();\n\n\t\tfor (var key in styles) {\n\t\t\tvar value = styles[key];\n\n\t\t\tif (value) {\n\t\t\t\telement.style.setProperty(key, value);\n\t\t\t} else {\n\t\t\t\telement.style.removeProperty(key);\n\t\t\t}\n\t\t}\n\t});\n}\n","/** @import { EachItem, EachState, Effect, MaybeSource, Source, TemplateNode, TransitionManager, Value } from '#client' */\n/** @import { Batch } from '../../reactivity/batch.js'; */\nimport {\n\tEACH_INDEX_REACTIVE,\n\tEACH_IS_ANIMATED,\n\tEACH_IS_CONTROLLED,\n\tEACH_ITEM_IMMUTABLE,\n\tEACH_ITEM_REACTIVE,\n\tHYDRATION_END,\n\tHYDRATION_START_ELSE\n} from '../../../../constants.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tread_hydration_instruction,\n\tskip_nodes,\n\tset_hydrate_node,\n\tset_hydrating\n} from '../hydration.js';\nimport {\n\tclear_text_content,\n\tcreate_text,\n\tget_first_child,\n\tget_next_sibling,\n\tshould_defer_append\n} from '../operations.js';\nimport {\n\tblock,\n\tbranch,\n\tdestroy_effect,\n\trun_out_transitions,\n\tpause_children,\n\tpause_effect,\n\tresume_effect\n} from '../../reactivity/effects.js';\nimport { source, mutable_source, internal_set } from '../../reactivity/sources.js';\nimport { array_from, is_array } from '../../../shared/utils.js';\nimport { COMMENT_NODE, INERT } from '#client/constants';\nimport { queue_micro_task } from '../task.js';\nimport { active_effect, get } from '../../runtime.js';\nimport { DEV } from 'esm-env';\nimport { derived_safe_equal } from '../../reactivity/deriveds.js';\nimport { current_batch } from '../../reactivity/batch.js';\n\n/**\n * The row of a keyed each block that is currently updating. We track this\n * so that `animate:` directives have something to attach themselves to\n * @type {EachItem | null}\n */\nexport let current_each_item = null;\n\n/** @param {EachItem | null} item */\nexport function set_current_each_item(item) {\n\tcurrent_each_item = item;\n}\n\n/**\n * @param {any} _\n * @param {number} i\n */\nexport function index(_, i) {\n\treturn i;\n}\n\n/**\n * Pause multiple effects simultaneously, and coordinate their\n * subsequent destruction. Used in each blocks\n * @param {EachState} state\n * @param {EachItem[]} items\n * @param {null | Node} controlled_anchor\n */\nfunction pause_effects(state, items, controlled_anchor) {\n\tvar items_map = state.items;\n\n\t/** @type {TransitionManager[]} */\n\tvar transitions = [];\n\tvar length = items.length;\n\n\tfor (var i = 0; i < length; i++) {\n\t\tpause_children(items[i].e, transitions, true);\n\t}\n\n\tvar is_controlled = length > 0 && transitions.length === 0 && controlled_anchor !== null;\n\t// If we have a controlled anchor, it means that the each block is inside a single\n\t// DOM element, so we can apply a fast-path for clearing the contents of the element.\n\tif (is_controlled) {\n\t\tvar parent_node = /** @type {Element} */ (\n\t\t\t/** @type {Element} */ (controlled_anchor).parentNode\n\t\t);\n\t\tclear_text_content(parent_node);\n\t\tparent_node.append(/** @type {Element} */ (controlled_anchor));\n\t\titems_map.clear();\n\t\tlink(state, items[0].prev, items[length - 1].next);\n\t}\n\n\trun_out_transitions(transitions, () => {\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tvar item = items[i];\n\t\t\tif (!is_controlled) {\n\t\t\t\titems_map.delete(item.k);\n\t\t\t\tlink(state, item.prev, item.next);\n\t\t\t}\n\t\t\tdestroy_effect(item.e, !is_controlled);\n\t\t}\n\t});\n}\n\n/**\n * @template V\n * @param {Element | Comment} node The next sibling node, or the parent node if this is a 'controlled' block\n * @param {number} flags\n * @param {() => V[]} get_collection\n * @param {(value: V, index: number) => any} get_key\n * @param {(anchor: Node, item: MaybeSource<V>, index: MaybeSource<number>) => void} render_fn\n * @param {null | ((anchor: Node) => void)} fallback_fn\n * @returns {void}\n */\nexport function each(node, flags, get_collection, get_key, render_fn, fallback_fn = null) {\n\tvar anchor = node;\n\n\t/** @type {EachState} */\n\tvar state = { flags, items: new Map(), first: null };\n\n\tvar is_controlled = (flags & EACH_IS_CONTROLLED) !== 0;\n\n\tif (is_controlled) {\n\t\tvar parent_node = /** @type {Element} */ (node);\n\n\t\tanchor = hydrating\n\t\t\t? set_hydrate_node(/** @type {Comment | Text} */ (get_first_child(parent_node)))\n\t\t\t: parent_node.appendChild(create_text());\n\t}\n\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\t/** @type {Effect | null} */\n\tvar fallback = null;\n\n\tvar was_empty = false;\n\n\t/** @type {Map<any, EachItem>} */\n\tvar offscreen_items = new Map();\n\n\t// TODO: ideally we could use derived for runes mode but because of the ability\n\t// to use a store which can be mutated, we can't do that here as mutating a store\n\t// will still result in the collection array being the same from the store\n\tvar each_array = derived_safe_equal(() => {\n\t\tvar collection = get_collection();\n\n\t\treturn is_array(collection) ? collection : collection == null ? [] : array_from(collection);\n\t});\n\n\t/** @type {V[]} */\n\tvar array;\n\n\t/** @type {Effect} */\n\tvar each_effect;\n\n\tfunction commit() {\n\t\treconcile(\n\t\t\teach_effect,\n\t\t\tarray,\n\t\t\tstate,\n\t\t\toffscreen_items,\n\t\t\tanchor,\n\t\t\trender_fn,\n\t\t\tflags,\n\t\t\tget_key,\n\t\t\tget_collection\n\t\t);\n\n\t\tif (fallback_fn !== null) {\n\t\t\tif (array.length === 0) {\n\t\t\t\tif (fallback) {\n\t\t\t\t\tresume_effect(fallback);\n\t\t\t\t} else {\n\t\t\t\t\tfallback = branch(() => fallback_fn(anchor));\n\t\t\t\t}\n\t\t\t} else if (fallback !== null) {\n\t\t\t\tpause_effect(fallback, () => {\n\t\t\t\t\tfallback = null;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tblock(() => {\n\t\t// store a reference to the effect so that we can update the start/end nodes in reconciliation\n\t\teach_effect ??= /** @type {Effect} */ (active_effect);\n\n\t\tarray = /** @type {V[]} */ (get(each_array));\n\t\tvar length = array.length;\n\n\t\tif (was_empty && length === 0) {\n\t\t\t// ignore updates if the array is empty,\n\t\t\t// and it already was empty on previous run\n\t\t\treturn;\n\t\t}\n\t\twas_empty = length === 0;\n\n\t\t/** `true` if there was a hydration mismatch. Needs to be a `let` or else it isn't treeshaken out */\n\t\tlet mismatch = false;\n\n\t\tif (hydrating) {\n\t\t\tvar is_else = read_hydration_instruction(anchor) === HYDRATION_START_ELSE;\n\n\t\t\tif (is_else !== (length === 0)) {\n\t\t\t\t// hydration mismatch  remove the server-rendered DOM and start over\n\t\t\t\tanchor = skip_nodes();\n\n\t\t\t\tset_hydrate_node(anchor);\n\t\t\t\tset_hydrating(false);\n\t\t\t\tmismatch = true;\n\t\t\t}\n\t\t}\n\n\t\t// this is separate to the previous block because `hydrating` might change\n\t\tif (hydrating) {\n\t\t\t/** @type {EachItem | null} */\n\t\t\tvar prev = null;\n\n\t\t\t/** @type {EachItem} */\n\t\t\tvar item;\n\n\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\tif (\n\t\t\t\t\thydrate_node.nodeType === COMMENT_NODE &&\n\t\t\t\t\t/** @type {Comment} */ (hydrate_node).data === HYDRATION_END\n\t\t\t\t) {\n\t\t\t\t\t// The server rendered fewer items than expected,\n\t\t\t\t\t// so break out and continue appending non-hydrated items\n\t\t\t\t\tanchor = /** @type {Comment} */ (hydrate_node);\n\t\t\t\t\tmismatch = true;\n\t\t\t\t\tset_hydrating(false);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tvar value = array[i];\n\t\t\t\tvar key = get_key(value, i);\n\t\t\t\titem = create_item(\n\t\t\t\t\thydrate_node,\n\t\t\t\t\tstate,\n\t\t\t\t\tprev,\n\t\t\t\t\tnull,\n\t\t\t\t\tvalue,\n\t\t\t\t\tkey,\n\t\t\t\t\ti,\n\t\t\t\t\trender_fn,\n\t\t\t\t\tflags,\n\t\t\t\t\tget_collection\n\t\t\t\t);\n\t\t\t\tstate.items.set(key, item);\n\n\t\t\t\tprev = item;\n\t\t\t}\n\n\t\t\t// remove excess nodes\n\t\t\tif (length > 0) {\n\t\t\t\tset_hydrate_node(skip_nodes());\n\t\t\t}\n\t\t}\n\n\t\tif (hydrating) {\n\t\t\tif (length === 0 && fallback_fn) {\n\t\t\t\tfallback = branch(() => fallback_fn(anchor));\n\t\t\t}\n\t\t} else {\n\t\t\tif (should_defer_append()) {\n\t\t\t\tvar keys = new Set();\n\t\t\t\tvar batch = /** @type {Batch} */ (current_batch);\n\n\t\t\t\tfor (i = 0; i < length; i += 1) {\n\t\t\t\t\tvalue = array[i];\n\t\t\t\t\tkey = get_key(value, i);\n\n\t\t\t\t\tvar existing = state.items.get(key) ?? offscreen_items.get(key);\n\n\t\t\t\t\tif (existing) {\n\t\t\t\t\t\t// update before reconciliation, to trigger any async updates\n\t\t\t\t\t\tif ((flags & (EACH_ITEM_REACTIVE | EACH_INDEX_REACTIVE)) !== 0) {\n\t\t\t\t\t\t\tupdate_item(existing, value, i, flags);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\titem = create_item(\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\ti,\n\t\t\t\t\t\t\trender_fn,\n\t\t\t\t\t\t\tflags,\n\t\t\t\t\t\t\tget_collection,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\toffscreen_items.set(key, item);\n\t\t\t\t\t}\n\n\t\t\t\t\tkeys.add(key);\n\t\t\t\t}\n\n\t\t\t\tfor (const [key, item] of state.items) {\n\t\t\t\t\tif (!keys.has(key)) {\n\t\t\t\t\t\tbatch.skipped_effects.add(item.e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbatch.add_callback(commit);\n\t\t\t} else {\n\t\t\t\tcommit();\n\t\t\t}\n\t\t}\n\n\t\tif (mismatch) {\n\t\t\t// continue in hydration mode\n\t\t\tset_hydrating(true);\n\t\t}\n\n\t\t// When we mount the each block for the first time, the collection won't be\n\t\t// connected to this effect as the effect hasn't finished running yet and its deps\n\t\t// won't be assigned. However, it's possible that when reconciling the each block\n\t\t// that a mutation occurred and it's made the collection MAYBE_DIRTY, so reading the\n\t\t// collection again can provide consistency to the reactive graph again as the deriveds\n\t\t// will now be `CLEAN`.\n\t\tget(each_array);\n\t});\n\n\tif (hydrating) {\n\t\tanchor = hydrate_node;\n\t}\n}\n\n/**\n * Add, remove, or reorder items output by an each block as its input changes\n * @template V\n * @param {Effect} each_effect\n * @param {Array<V>} array\n * @param {EachState} state\n * @param {Map<any, EachItem>} offscreen_items\n * @param {Element | Comment | Text} anchor\n * @param {(anchor: Node, item: MaybeSource<V>, index: number | Source<number>, collection: () => V[]) => void} render_fn\n * @param {number} flags\n * @param {(value: V, index: number) => any} get_key\n * @param {() => V[]} get_collection\n * @returns {void}\n */\nfunction reconcile(\n\teach_effect,\n\tarray,\n\tstate,\n\toffscreen_items,\n\tanchor,\n\trender_fn,\n\tflags,\n\tget_key,\n\tget_collection\n) {\n\tvar is_animated = (flags & EACH_IS_ANIMATED) !== 0;\n\tvar should_update = (flags & (EACH_ITEM_REACTIVE | EACH_INDEX_REACTIVE)) !== 0;\n\n\tvar length = array.length;\n\tvar items = state.items;\n\tvar first = state.first;\n\tvar current = first;\n\n\t/** @type {undefined | Set<EachItem>} */\n\tvar seen;\n\n\t/** @type {EachItem | null} */\n\tvar prev = null;\n\n\t/** @type {undefined | Set<EachItem>} */\n\tvar to_animate;\n\n\t/** @type {EachItem[]} */\n\tvar matched = [];\n\n\t/** @type {EachItem[]} */\n\tvar stashed = [];\n\n\t/** @type {V} */\n\tvar value;\n\n\t/** @type {any} */\n\tvar key;\n\n\t/** @type {EachItem | undefined} */\n\tvar item;\n\n\t/** @type {number} */\n\tvar i;\n\n\tif (is_animated) {\n\t\tfor (i = 0; i < length; i += 1) {\n\t\t\tvalue = array[i];\n\t\t\tkey = get_key(value, i);\n\t\t\titem = items.get(key);\n\n\t\t\tif (item !== undefined) {\n\t\t\t\titem.a?.measure();\n\t\t\t\t(to_animate ??= new Set()).add(item);\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (i = 0; i < length; i += 1) {\n\t\tvalue = array[i];\n\t\tkey = get_key(value, i);\n\n\t\titem = items.get(key);\n\n\t\tif (item === undefined) {\n\t\t\tvar pending = offscreen_items.get(key);\n\n\t\t\tif (pending !== undefined) {\n\t\t\t\toffscreen_items.delete(key);\n\t\t\t\titems.set(key, pending);\n\n\t\t\t\tvar next = prev ? prev.next : current;\n\n\t\t\t\tlink(state, prev, pending);\n\t\t\t\tlink(state, pending, next);\n\n\t\t\t\tmove(pending, next, anchor);\n\t\t\t\tprev = pending;\n\t\t\t} else {\n\t\t\t\tvar child_anchor = current ? /** @type {TemplateNode} */ (current.e.nodes_start) : anchor;\n\n\t\t\t\tprev = create_item(\n\t\t\t\t\tchild_anchor,\n\t\t\t\t\tstate,\n\t\t\t\t\tprev,\n\t\t\t\t\tprev === null ? state.first : prev.next,\n\t\t\t\t\tvalue,\n\t\t\t\t\tkey,\n\t\t\t\t\ti,\n\t\t\t\t\trender_fn,\n\t\t\t\t\tflags,\n\t\t\t\t\tget_collection\n\t\t\t\t);\n\t\t\t}\n\n\t\t\titems.set(key, prev);\n\n\t\t\tmatched = [];\n\t\t\tstashed = [];\n\n\t\t\tcurrent = prev.next;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (should_update) {\n\t\t\tupdate_item(item, value, i, flags);\n\t\t}\n\n\t\tif ((item.e.f & INERT) !== 0) {\n\t\t\tresume_effect(item.e);\n\t\t\tif (is_animated) {\n\t\t\t\titem.a?.unfix();\n\t\t\t\t(to_animate ??= new Set()).delete(item);\n\t\t\t}\n\t\t}\n\n\t\tif (item !== current) {\n\t\t\tif (seen !== undefined && seen.has(item)) {\n\t\t\t\tif (matched.length < stashed.length) {\n\t\t\t\t\t// more efficient to move later items to the front\n\t\t\t\t\tvar start = stashed[0];\n\t\t\t\t\tvar j;\n\n\t\t\t\t\tprev = start.prev;\n\n\t\t\t\t\tvar a = matched[0];\n\t\t\t\t\tvar b = matched[matched.length - 1];\n\n\t\t\t\t\tfor (j = 0; j < matched.length; j += 1) {\n\t\t\t\t\t\tmove(matched[j], start, anchor);\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (j = 0; j < stashed.length; j += 1) {\n\t\t\t\t\t\tseen.delete(stashed[j]);\n\t\t\t\t\t}\n\n\t\t\t\t\tlink(state, a.prev, b.next);\n\t\t\t\t\tlink(state, prev, a);\n\t\t\t\t\tlink(state, b, start);\n\n\t\t\t\t\tcurrent = start;\n\t\t\t\t\tprev = b;\n\t\t\t\t\ti -= 1;\n\n\t\t\t\t\tmatched = [];\n\t\t\t\t\tstashed = [];\n\t\t\t\t} else {\n\t\t\t\t\t// more efficient to move earlier items to the back\n\t\t\t\t\tseen.delete(item);\n\t\t\t\t\tmove(item, current, anchor);\n\n\t\t\t\t\tlink(state, item.prev, item.next);\n\t\t\t\t\tlink(state, item, prev === null ? state.first : prev.next);\n\t\t\t\t\tlink(state, prev, item);\n\n\t\t\t\t\tprev = item;\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tmatched = [];\n\t\t\tstashed = [];\n\n\t\t\twhile (current !== null && current.k !== key) {\n\t\t\t\t// If the each block isn't inert and an item has an effect that is already inert,\n\t\t\t\t// skip over adding it to our seen Set as the item is already being handled\n\t\t\t\tif ((current.e.f & INERT) === 0) {\n\t\t\t\t\t(seen ??= new Set()).add(current);\n\t\t\t\t}\n\t\t\t\tstashed.push(current);\n\t\t\t\tcurrent = current.next;\n\t\t\t}\n\n\t\t\tif (current === null) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\titem = current;\n\t\t}\n\n\t\tmatched.push(item);\n\t\tprev = item;\n\t\tcurrent = item.next;\n\t}\n\n\tif (current !== null || seen !== undefined) {\n\t\tvar to_destroy = seen === undefined ? [] : array_from(seen);\n\n\t\twhile (current !== null) {\n\t\t\t// If the each block isn't inert, then inert effects are currently outroing and will be removed once the transition is finished\n\t\t\tif ((current.e.f & INERT) === 0) {\n\t\t\t\tto_destroy.push(current);\n\t\t\t}\n\t\t\tcurrent = current.next;\n\t\t}\n\n\t\tvar destroy_length = to_destroy.length;\n\n\t\tif (destroy_length > 0) {\n\t\t\tvar controlled_anchor = (flags & EACH_IS_CONTROLLED) !== 0 && length === 0 ? anchor : null;\n\n\t\t\tif (is_animated) {\n\t\t\t\tfor (i = 0; i < destroy_length; i += 1) {\n\t\t\t\t\tto_destroy[i].a?.measure();\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < destroy_length; i += 1) {\n\t\t\t\t\tto_destroy[i].a?.fix();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tpause_effects(state, to_destroy, controlled_anchor);\n\t\t}\n\t}\n\n\tif (is_animated) {\n\t\tqueue_micro_task(() => {\n\t\t\tif (to_animate === undefined) return;\n\t\t\tfor (item of to_animate) {\n\t\t\t\titem.a?.apply();\n\t\t\t}\n\t\t});\n\t}\n\n\teach_effect.first = state.first && state.first.e;\n\teach_effect.last = prev && prev.e;\n\n\tfor (var unused of offscreen_items.values()) {\n\t\tdestroy_effect(unused.e);\n\t}\n\n\toffscreen_items.clear();\n}\n\n/**\n * @param {EachItem} item\n * @param {any} value\n * @param {number} index\n * @param {number} type\n * @returns {void}\n */\nfunction update_item(item, value, index, type) {\n\tif ((type & EACH_ITEM_REACTIVE) !== 0) {\n\t\tinternal_set(item.v, value);\n\t}\n\n\tif ((type & EACH_INDEX_REACTIVE) !== 0) {\n\t\tinternal_set(/** @type {Value<number>} */ (item.i), index);\n\t} else {\n\t\titem.i = index;\n\t}\n}\n\n/**\n * @template V\n * @param {Node | null} anchor\n * @param {EachState} state\n * @param {EachItem | null} prev\n * @param {EachItem | null} next\n * @param {V} value\n * @param {unknown} key\n * @param {number} index\n * @param {(anchor: Node, item: V | Source<V>, index: number | Value<number>, collection: () => V[]) => void} render_fn\n * @param {number} flags\n * @param {() => V[]} get_collection\n * @param {boolean} [deferred]\n * @returns {EachItem}\n */\nfunction create_item(\n\tanchor,\n\tstate,\n\tprev,\n\tnext,\n\tvalue,\n\tkey,\n\tindex,\n\trender_fn,\n\tflags,\n\tget_collection,\n\tdeferred\n) {\n\tvar previous_each_item = current_each_item;\n\tvar reactive = (flags & EACH_ITEM_REACTIVE) !== 0;\n\tvar mutable = (flags & EACH_ITEM_IMMUTABLE) === 0;\n\n\tvar v = reactive ? (mutable ? mutable_source(value, false, false) : source(value)) : value;\n\tvar i = (flags & EACH_INDEX_REACTIVE) === 0 ? index : source(index);\n\n\tif (DEV && reactive) {\n\t\t// For tracing purposes, we need to link the source signal we create with the\n\t\t// collection + index so that tracing works as intended\n\t\t/** @type {Value} */ (v).trace = () => {\n\t\t\tvar collection_index = typeof i === 'number' ? index : i.v;\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unused-expressions\n\t\t\tget_collection()[collection_index];\n\t\t};\n\t}\n\n\t/** @type {EachItem} */\n\tvar item = {\n\t\ti,\n\t\tv,\n\t\tk: key,\n\t\ta: null,\n\t\t// @ts-expect-error\n\t\te: null,\n\t\tprev,\n\t\tnext\n\t};\n\n\tcurrent_each_item = item;\n\n\ttry {\n\t\tif (anchor === null) {\n\t\t\tvar fragment = document.createDocumentFragment();\n\t\t\tfragment.append((anchor = create_text()));\n\t\t}\n\n\t\titem.e = branch(() => render_fn(/** @type {Node} */ (anchor), v, i, get_collection), hydrating);\n\n\t\titem.e.prev = prev && prev.e;\n\t\titem.e.next = next && next.e;\n\n\t\tif (prev === null) {\n\t\t\tif (!deferred) {\n\t\t\t\tstate.first = item;\n\t\t\t}\n\t\t} else {\n\t\t\tprev.next = item;\n\t\t\tprev.e.next = item.e;\n\t\t}\n\n\t\tif (next !== null) {\n\t\t\tnext.prev = item;\n\t\t\tnext.e.prev = item.e;\n\t\t}\n\n\t\treturn item;\n\t} finally {\n\t\tcurrent_each_item = previous_each_item;\n\t}\n}\n\n/**\n * @param {EachItem} item\n * @param {EachItem | null} next\n * @param {Text | Element | Comment} anchor\n */\nfunction move(item, next, anchor) {\n\tvar end = item.next ? /** @type {TemplateNode} */ (item.next.e.nodes_start) : anchor;\n\n\tvar dest = next ? /** @type {TemplateNode} */ (next.e.nodes_start) : anchor;\n\tvar node = /** @type {TemplateNode} */ (item.e.nodes_start);\n\n\twhile (node !== null && node !== end) {\n\t\tvar next_node = /** @type {TemplateNode} */ (get_next_sibling(node));\n\t\tdest.before(node);\n\t\tnode = next_node;\n\t}\n}\n\n/**\n * @param {EachState} state\n * @param {EachItem | null} prev\n * @param {EachItem | null} next\n */\nfunction link(state, prev, next) {\n\tif (prev === null) {\n\t\tstate.first = next;\n\t} else {\n\t\tprev.next = next;\n\t\tprev.e.next = next && next.e;\n\t}\n\n\tif (next !== null) {\n\t\tnext.prev = prev;\n\t\tnext.e.prev = prev && prev.e;\n\t}\n}\n","/** @import { Effect, TemplateNode } from '#client' */\nimport { FILENAME, HYDRATION_ERROR } from '../../../../constants.js';\nimport { remove_effect_dom, template_effect } from '../../reactivity/effects.js';\nimport { hydrate_next, hydrate_node, hydrating, set_hydrate_node } from '../hydration.js';\nimport { create_fragment_from_html } from '../reconciler.js';\nimport { assign_nodes } from '../template.js';\nimport * as w from '../../warnings.js';\nimport { hash, sanitize_location } from '../../../../utils.js';\nimport { DEV } from 'esm-env';\nimport { dev_current_component_function } from '../../context.js';\nimport { get_first_child, get_next_sibling } from '../operations.js';\nimport { active_effect } from '../../runtime.js';\nimport { COMMENT_NODE } from '#client/constants';\n\n/**\n * @param {Element} element\n * @param {string | null} server_hash\n * @param {string} value\n */\nfunction check_hash(element, server_hash, value) {\n\tif (!server_hash || server_hash === hash(String(value ?? ''))) return;\n\n\tlet location;\n\n\t// @ts-expect-error\n\tconst loc = element.__svelte_meta?.loc;\n\tif (loc) {\n\t\tlocation = `near ${loc.file}:${loc.line}:${loc.column}`;\n\t} else if (dev_current_component_function?.[FILENAME]) {\n\t\tlocation = `in ${dev_current_component_function[FILENAME]}`;\n\t}\n\n\tw.hydration_html_changed(sanitize_location(location));\n}\n\n/**\n * @param {Element | Text | Comment} node\n * @param {() => string} get_value\n * @param {boolean} [svg]\n * @param {boolean} [mathml]\n * @param {boolean} [skip_warning]\n * @returns {void}\n */\nexport function html(node, get_value, svg = false, mathml = false, skip_warning = false) {\n\tvar anchor = node;\n\n\tvar value = '';\n\n\ttemplate_effect(() => {\n\t\tvar effect = /** @type {Effect} */ (active_effect);\n\n\t\tif (value === (value = get_value() ?? '')) {\n\t\t\tif (hydrating) hydrate_next();\n\t\t\treturn;\n\t\t}\n\n\t\tif (effect.nodes_start !== null) {\n\t\t\tremove_effect_dom(effect.nodes_start, /** @type {TemplateNode} */ (effect.nodes_end));\n\t\t\teffect.nodes_start = effect.nodes_end = null;\n\t\t}\n\n\t\tif (value === '') return;\n\n\t\tif (hydrating) {\n\t\t\t// We're deliberately not trying to repair mismatches between server and client,\n\t\t\t// as it's costly and error-prone (and it's an edge case to have a mismatch anyway)\n\t\t\tvar hash = /** @type {Comment} */ (hydrate_node).data;\n\t\t\tvar next = hydrate_next();\n\t\t\tvar last = next;\n\n\t\t\twhile (\n\t\t\t\tnext !== null &&\n\t\t\t\t(next.nodeType !== COMMENT_NODE || /** @type {Comment} */ (next).data !== '')\n\t\t\t) {\n\t\t\t\tlast = next;\n\t\t\t\tnext = /** @type {TemplateNode} */ (get_next_sibling(next));\n\t\t\t}\n\n\t\t\tif (next === null) {\n\t\t\t\tw.hydration_mismatch();\n\t\t\t\tthrow HYDRATION_ERROR;\n\t\t\t}\n\n\t\t\tif (DEV && !skip_warning) {\n\t\t\t\tcheck_hash(/** @type {Element} */ (next.parentNode), hash, value);\n\t\t\t}\n\n\t\t\tassign_nodes(hydrate_node, last);\n\t\t\tanchor = set_hydrate_node(next);\n\t\t\treturn;\n\t\t}\n\n\t\tvar html = value + '';\n\t\tif (svg) html = `<svg>${html}</svg>`;\n\t\telse if (mathml) html = `<math>${html}</math>`;\n\n\t\t// Don't use create_fragment_with_script_from_html here because that would mean script tags are executed.\n\t\t// @html is basically `.innerHTML = ...` and that doesn't execute scripts either due to security reasons.\n\t\t/** @type {DocumentFragment | Element} */\n\t\tvar node = create_fragment_from_html(html);\n\n\t\tif (svg || mathml) {\n\t\t\tnode = /** @type {Element} */ (get_first_child(node));\n\t\t}\n\n\t\tassign_nodes(\n\t\t\t/** @type {TemplateNode} */ (get_first_child(node)),\n\t\t\t/** @type {TemplateNode} */ (node.lastChild)\n\t\t);\n\n\t\tif (svg || mathml) {\n\t\t\twhile (get_first_child(node)) {\n\t\t\t\tanchor.before(/** @type {Node} */ (get_first_child(node)));\n\t\t\t}\n\t\t} else {\n\t\t\tanchor.before(node);\n\t\t}\n\t});\n}\n","/** @import { TemplateNode, Dom } from '#client' */\nimport { EFFECT_TRANSPARENT } from '#client/constants';\nimport { block } from '../../reactivity/effects.js';\nimport { hydrate_next, hydrating } from '../hydration.js';\nimport { BranchManager } from './branches.js';\n\n/**\n * @template P\n * @template {(props: P) => void} C\n * @param {TemplateNode} node\n * @param {() => C} get_component\n * @param {(anchor: TemplateNode, component: C) => Dom | void} render_fn\n * @returns {void}\n */\nexport function component(node, get_component, render_fn) {\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\tvar branches = new BranchManager(node);\n\n\tblock(() => {\n\t\tvar component = get_component() ?? null;\n\t\tbranches.ensure(component, component && ((target) => render_fn(target, component)));\n\t}, EFFECT_TRANSPARENT);\n}\n","/** @import { ActionPayload } from '#client' */\nimport { effect, render_effect } from '../../reactivity/effects.js';\nimport { safe_not_equal } from '../../reactivity/equality.js';\nimport { deep_read_state, untrack } from '../../runtime.js';\n\n/**\n * @template P\n * @param {Element} dom\n * @param {(dom: Element, value?: P) => ActionPayload<P>} action\n * @param {() => P} [get_value]\n * @returns {void}\n */\nexport function action(dom, action, get_value) {\n\teffect(() => {\n\t\tvar payload = untrack(() => action(dom, get_value?.()) || {});\n\n\t\tif (get_value && payload?.update) {\n\t\t\tvar inited = false;\n\t\t\t/** @type {P} */\n\t\t\tvar prev = /** @type {any} */ ({}); // initialize with something so it's never equal on first run\n\n\t\t\trender_effect(() => {\n\t\t\t\tvar value = get_value();\n\n\t\t\t\t// Action's update method is coarse-grained, i.e. when anything in the passed value changes, update.\n\t\t\t\t// This works in legacy mode because of mutable_source being updated as a whole, but when using $state\n\t\t\t\t// together with actions and mutation, it wouldn't notice the change without a deep read.\n\t\t\t\tdeep_read_state(value);\n\n\t\t\t\tif (inited && safe_not_equal(prev, value)) {\n\t\t\t\t\tprev = value;\n\t\t\t\t\t/** @type {Function} */ (payload.update)(value);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinited = true;\n\t\t}\n\n\t\tif (payload?.destroy) {\n\t\t\treturn () => /** @type {Function} */ (payload.destroy)();\n\t\t}\n\t});\n}\n","/** @import { Effect } from '#client' */\nimport { block, branch, effect, destroy_effect } from '../../reactivity/effects.js';\n\n// TODO in 6.0 or 7.0, when we remove legacy mode, we can simplify this by\n// getting rid of the block/branch stuff and just letting the effect rip.\n// see https://github.com/sveltejs/svelte/pull/15962\n\n/**\n * @param {Element} node\n * @param {() => (node: Element) => void} get_fn\n */\nexport function attach(node, get_fn) {\n\t/** @type {false | undefined | ((node: Element) => void)} */\n\tvar fn = undefined;\n\n\t/** @type {Effect | null} */\n\tvar e;\n\n\tblock(() => {\n\t\tif (fn !== (fn = get_fn())) {\n\t\t\tif (e) {\n\t\t\t\tdestroy_effect(e);\n\t\t\t\te = null;\n\t\t\t}\n\n\t\t\tif (fn) {\n\t\t\t\te = branch(() => {\n\t\t\t\t\teffect(() => /** @type {(node: Element) => void} */ (fn)(node));\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n}\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import { escape_html } from '../../escaping.js';\nimport { clsx as _clsx } from 'clsx';\n\n/**\n * `<div translate={false}>` should be rendered as `<div translate=\"no\">` and _not_\n * `<div translate=\"false\">`, which is equivalent to `<div translate=\"yes\">`. There\n * may be other odd cases that need to be added to this list in future\n * @type {Record<string, Map<any, string>>}\n */\nconst replacements = {\n\ttranslate: new Map([\n\t\t[true, 'yes'],\n\t\t[false, 'no']\n\t])\n};\n\n/**\n * @template V\n * @param {string} name\n * @param {V} value\n * @param {boolean} [is_boolean]\n * @returns {string}\n */\nexport function attr(name, value, is_boolean = false) {\n\t// attribute hidden for values other than \"until-found\" behaves like a boolean attribute\n\tif (name === 'hidden' && value !== 'until-found') {\n\t\tis_boolean = true;\n\t}\n\tif (value == null || (!value && is_boolean)) return '';\n\tconst normalized = (name in replacements && replacements[name].get(value)) || value;\n\tconst assignment = is_boolean ? '' : `=\"${escape_html(normalized, true)}\"`;\n\treturn ` ${name}${assignment}`;\n}\n\n/**\n * Small wrapper around clsx to preserve Svelte's (weird) handling of falsy values.\n * TODO Svelte 6 revisit this, and likely turn all falsy values into the empty string (what clsx also does)\n * @param  {any} value\n */\nexport function clsx(value) {\n\tif (typeof value === 'object') {\n\t\treturn _clsx(value);\n\t} else {\n\t\treturn value ?? '';\n\t}\n}\n\nconst whitespace = [...' \\t\\n\\r\\f\\u00a0\\u000b\\ufeff'];\n\n/**\n * @param {any} value\n * @param {string | null} [hash]\n * @param {Record<string, boolean>} [directives]\n * @returns {string | null}\n */\nexport function to_class(value, hash, directives) {\n\tvar classname = value == null ? '' : '' + value;\n\n\tif (hash) {\n\t\tclassname = classname ? classname + ' ' + hash : hash;\n\t}\n\n\tif (directives) {\n\t\tfor (var key in directives) {\n\t\t\tif (directives[key]) {\n\t\t\t\tclassname = classname ? classname + ' ' + key : key;\n\t\t\t} else if (classname.length) {\n\t\t\t\tvar len = key.length;\n\t\t\t\tvar a = 0;\n\n\t\t\t\twhile ((a = classname.indexOf(key, a)) >= 0) {\n\t\t\t\t\tvar b = a + len;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t(a === 0 || whitespace.includes(classname[a - 1])) &&\n\t\t\t\t\t\t(b === classname.length || whitespace.includes(classname[b]))\n\t\t\t\t\t) {\n\t\t\t\t\t\tclassname = (a === 0 ? '' : classname.substring(0, a)) + classname.substring(b + 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ta = b;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn classname === '' ? null : classname;\n}\n\n/**\n *\n * @param {Record<string,any>} styles\n * @param {boolean} important\n */\nfunction append_styles(styles, important = false) {\n\tvar separator = important ? ' !important;' : ';';\n\tvar css = '';\n\n\tfor (var key in styles) {\n\t\tvar value = styles[key];\n\t\tif (value != null && value !== '') {\n\t\t\tcss += ' ' + key + ': ' + value + separator;\n\t\t}\n\t}\n\n\treturn css;\n}\n\n/**\n * @param {string} name\n * @returns {string}\n */\nfunction to_css_name(name) {\n\tif (name[0] !== '-' || name[1] !== '-') {\n\t\treturn name.toLowerCase();\n\t}\n\treturn name;\n}\n\n/**\n * @param {any} value\n * @param {Record<string, any> | [Record<string, any>, Record<string, any>]} [styles]\n * @returns {string | null}\n */\nexport function to_style(value, styles) {\n\tif (styles) {\n\t\tvar new_style = '';\n\n\t\t/** @type {Record<string,any> | undefined} */\n\t\tvar normal_styles;\n\n\t\t/** @type {Record<string,any> | undefined} */\n\t\tvar important_styles;\n\n\t\tif (Array.isArray(styles)) {\n\t\t\tnormal_styles = styles[0];\n\t\t\timportant_styles = styles[1];\n\t\t} else {\n\t\t\tnormal_styles = styles;\n\t\t}\n\n\t\tif (value) {\n\t\t\tvalue = String(value)\n\t\t\t\t.replaceAll(/\\s*\\/\\*.*?\\*\\/\\s*/g, '')\n\t\t\t\t.trim();\n\n\t\t\t/** @type {boolean | '\"' | \"'\"} */\n\t\t\tvar in_str = false;\n\t\t\tvar in_apo = 0;\n\t\t\tvar in_comment = false;\n\n\t\t\tvar reserved_names = [];\n\n\t\t\tif (normal_styles) {\n\t\t\t\treserved_names.push(...Object.keys(normal_styles).map(to_css_name));\n\t\t\t}\n\t\t\tif (important_styles) {\n\t\t\t\treserved_names.push(...Object.keys(important_styles).map(to_css_name));\n\t\t\t}\n\n\t\t\tvar start_index = 0;\n\t\t\tvar name_index = -1;\n\n\t\t\tconst len = value.length;\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tvar c = value[i];\n\n\t\t\t\tif (in_comment) {\n\t\t\t\t\tif (c === '/' && value[i - 1] === '*') {\n\t\t\t\t\t\tin_comment = false;\n\t\t\t\t\t}\n\t\t\t\t} else if (in_str) {\n\t\t\t\t\tif (in_str === c) {\n\t\t\t\t\t\tin_str = false;\n\t\t\t\t\t}\n\t\t\t\t} else if (c === '/' && value[i + 1] === '*') {\n\t\t\t\t\tin_comment = true;\n\t\t\t\t} else if (c === '\"' || c === \"'\") {\n\t\t\t\t\tin_str = c;\n\t\t\t\t} else if (c === '(') {\n\t\t\t\t\tin_apo++;\n\t\t\t\t} else if (c === ')') {\n\t\t\t\t\tin_apo--;\n\t\t\t\t}\n\n\t\t\t\tif (!in_comment && in_str === false && in_apo === 0) {\n\t\t\t\t\tif (c === ':' && name_index === -1) {\n\t\t\t\t\t\tname_index = i;\n\t\t\t\t\t} else if (c === ';' || i === len - 1) {\n\t\t\t\t\t\tif (name_index !== -1) {\n\t\t\t\t\t\t\tvar name = to_css_name(value.substring(start_index, name_index).trim());\n\n\t\t\t\t\t\t\tif (!reserved_names.includes(name)) {\n\t\t\t\t\t\t\t\tif (c !== ';') {\n\t\t\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar property = value.substring(start_index, i).trim();\n\t\t\t\t\t\t\t\tnew_style += ' ' + property + ';';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart_index = i + 1;\n\t\t\t\t\t\tname_index = -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (normal_styles) {\n\t\t\tnew_style += append_styles(normal_styles);\n\t\t}\n\n\t\tif (important_styles) {\n\t\t\tnew_style += append_styles(important_styles, true);\n\t\t}\n\n\t\tnew_style = new_style.trim();\n\t\treturn new_style === '' ? null : new_style;\n\t}\n\n\treturn value == null ? null : String(value);\n}\n","import { to_class } from '../../../shared/attributes.js';\nimport { hydrating } from '../hydration.js';\n\n/**\n * @param {Element} dom\n * @param {boolean | number} is_html\n * @param {string | null} value\n * @param {string} [hash]\n * @param {Record<string, any>} [prev_classes]\n * @param {Record<string, any>} [next_classes]\n * @returns {Record<string, boolean> | undefined}\n */\nexport function set_class(dom, is_html, value, hash, prev_classes, next_classes) {\n\t// @ts-expect-error need to add __className to patched prototype\n\tvar prev = dom.__className;\n\n\tif (\n\t\thydrating ||\n\t\tprev !== value ||\n\t\tprev === undefined // for edge case of `class={undefined}`\n\t) {\n\t\tvar next_class_name = to_class(value, hash, next_classes);\n\n\t\tif (!hydrating || next_class_name !== dom.getAttribute('class')) {\n\t\t\t// Removing the attribute when the value is only an empty string causes\n\t\t\t// performance issues vs simply making the className an empty string. So\n\t\t\t// we should only remove the class if the value is nullish\n\t\t\t// and there no hash/directives :\n\t\t\tif (next_class_name == null) {\n\t\t\t\tdom.removeAttribute('class');\n\t\t\t} else if (is_html) {\n\t\t\t\tdom.className = next_class_name;\n\t\t\t} else {\n\t\t\t\tdom.setAttribute('class', next_class_name);\n\t\t\t}\n\t\t}\n\n\t\t// @ts-expect-error need to add __className to patched prototype\n\t\tdom.__className = value;\n\t} else if (next_classes && prev_classes !== next_classes) {\n\t\tfor (var key in next_classes) {\n\t\t\tvar is_present = !!next_classes[key];\n\n\t\t\tif (prev_classes == null || is_present !== !!prev_classes[key]) {\n\t\t\t\tdom.classList.toggle(key, is_present);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn next_classes;\n}\n","import { to_style } from '../../../shared/attributes.js';\nimport { hydrating } from '../hydration.js';\n\n/**\n * @param {Element & ElementCSSInlineStyle} dom\n * @param {Record<string, any>} prev\n * @param {Record<string, any>} next\n * @param {string} [priority]\n */\nfunction update_styles(dom, prev = {}, next, priority) {\n\tfor (var key in next) {\n\t\tvar value = next[key];\n\n\t\tif (prev[key] !== value) {\n\t\t\tif (next[key] == null) {\n\t\t\t\tdom.style.removeProperty(key);\n\t\t\t} else {\n\t\t\t\tdom.style.setProperty(key, value, priority);\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} dom\n * @param {string | null} value\n * @param {Record<string, any> | [Record<string, any>, Record<string, any>]} [prev_styles]\n * @param {Record<string, any> | [Record<string, any>, Record<string, any>]} [next_styles]\n */\nexport function set_style(dom, value, prev_styles, next_styles) {\n\t// @ts-expect-error\n\tvar prev = dom.__style;\n\n\tif (hydrating || prev !== value) {\n\t\tvar next_style_attr = to_style(value, next_styles);\n\n\t\tif (!hydrating || next_style_attr !== dom.getAttribute('style')) {\n\t\t\tif (next_style_attr == null) {\n\t\t\t\tdom.removeAttribute('style');\n\t\t\t} else {\n\t\t\t\tdom.style.cssText = next_style_attr;\n\t\t\t}\n\t\t}\n\n\t\t// @ts-expect-error\n\t\tdom.__style = value;\n\t} else if (next_styles) {\n\t\tif (Array.isArray(next_styles)) {\n\t\t\tupdate_styles(dom, prev_styles?.[0], next_styles[0]);\n\t\t\tupdate_styles(dom, prev_styles?.[1], next_styles[1], 'important');\n\t\t} else {\n\t\t\tupdate_styles(dom, prev_styles, next_styles);\n\t\t}\n\t}\n\n\treturn next_styles;\n}\n","import { effect, teardown } from '../../../reactivity/effects.js';\nimport { listen_to_event_and_reset_event } from './shared.js';\nimport { is } from '../../../proxy.js';\nimport { is_array } from '../../../../shared/utils.js';\nimport * as w from '../../../warnings.js';\nimport { Batch, current_batch, previous_batch } from '../../../reactivity/batch.js';\n\n/**\n * Selects the correct option(s) (depending on whether this is a multiple select)\n * @template V\n * @param {HTMLSelectElement} select\n * @param {V} value\n * @param {boolean} mounting\n */\nexport function select_option(select, value, mounting = false) {\n\tif (select.multiple) {\n\t\t// If value is null or undefined, keep the selection as is\n\t\tif (value == undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If not an array, warn and keep the selection as is\n\t\tif (!is_array(value)) {\n\t\t\treturn w.select_multiple_invalid_value();\n\t\t}\n\n\t\t// Otherwise, update the selection\n\t\tfor (var option of select.options) {\n\t\t\toption.selected = value.includes(get_option_value(option));\n\t\t}\n\n\t\treturn;\n\t}\n\n\tfor (option of select.options) {\n\t\tvar option_value = get_option_value(option);\n\t\tif (is(option_value, value)) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (!mounting || value !== undefined) {\n\t\tselect.selectedIndex = -1; // no option should be selected\n\t}\n}\n\n/**\n * Selects the correct option(s) if `value` is given,\n * and then sets up a mutation observer to sync the\n * current selection to the dom when it changes. Such\n * changes could for example occur when options are\n * inside an `#each` block.\n * @param {HTMLSelectElement} select\n */\nexport function init_select(select) {\n\tvar observer = new MutationObserver(() => {\n\t\t// @ts-ignore\n\t\tselect_option(select, select.__value);\n\t\t// Deliberately don't update the potential binding value,\n\t\t// the model should be preserved unless explicitly changed\n\t});\n\n\tobserver.observe(select, {\n\t\t// Listen to option element changes\n\t\tchildList: true,\n\t\tsubtree: true, // because of <optgroup>\n\t\t// Listen to option element value attribute changes\n\t\t// (doesn't get notified of select value changes,\n\t\t// because that property is not reflected as an attribute)\n\t\tattributes: true,\n\t\tattributeFilter: ['value']\n\t});\n\n\tteardown(() => {\n\t\tobserver.disconnect();\n\t});\n}\n\n/**\n * @param {HTMLSelectElement} select\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_select_value(select, get, set = get) {\n\tvar batches = new WeakSet();\n\tvar mounting = true;\n\n\tlisten_to_event_and_reset_event(select, 'change', (is_reset) => {\n\t\tvar query = is_reset ? '[selected]' : ':checked';\n\t\t/** @type {unknown} */\n\t\tvar value;\n\n\t\tif (select.multiple) {\n\t\t\tvalue = [].map.call(select.querySelectorAll(query), get_option_value);\n\t\t} else {\n\t\t\t/** @type {HTMLOptionElement | null} */\n\t\t\tvar selected_option =\n\t\t\t\tselect.querySelector(query) ??\n\t\t\t\t// will fall back to first non-disabled option if no option is selected\n\t\t\t\tselect.querySelector('option:not([disabled])');\n\t\t\tvalue = selected_option && get_option_value(selected_option);\n\t\t}\n\n\t\tset(value);\n\n\t\tif (current_batch !== null) {\n\t\t\tbatches.add(current_batch);\n\t\t}\n\t});\n\n\t// Needs to be an effect, not a render_effect, so that in case of each loops the logic runs after the each block has updated\n\teffect(() => {\n\t\tvar value = get();\n\n\t\tif (select === document.activeElement) {\n\t\t\t// we need both, because in non-async mode, render effects run before previous_batch is set\n\t\t\tvar batch = /** @type {Batch} */ (previous_batch ?? current_batch);\n\n\t\t\t// Don't update the <select> if it is focused. We can get here if, for example,\n\t\t\t// an update is deferred because of async work depending on the select:\n\t\t\t//\n\t\t\t// <select bind:value={selected}>...</select>\n\t\t\t// <p>{await find(selected)}</p>\n\t\t\tif (batches.has(batch)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tselect_option(select, value, mounting);\n\n\t\t// Mounting and value undefined -> take selection from dom\n\t\tif (mounting && value === undefined) {\n\t\t\t/** @type {HTMLOptionElement | null} */\n\t\t\tvar selected_option = select.querySelector(':checked');\n\t\t\tif (selected_option !== null) {\n\t\t\t\tvalue = get_option_value(selected_option);\n\t\t\t\tset(value);\n\t\t\t}\n\t\t}\n\n\t\t// @ts-ignore\n\t\tselect.__value = value;\n\t\tmounting = false;\n\t});\n\n\tinit_select(select);\n}\n\n/** @param {HTMLOptionElement} option */\nfunction get_option_value(option) {\n\t// __value only exists if the <option> has a value attribute\n\tif ('__value' in option) {\n\t\treturn option.__value;\n\t} else {\n\t\treturn option.value;\n\t}\n}\n","/** @import { Effect } from '#client' */\nimport { DEV } from 'esm-env';\nimport { hydrating, set_hydrating } from '../hydration.js';\nimport { get_descriptors, get_prototype_of } from '../../../shared/utils.js';\nimport { create_event, delegate } from './events.js';\nimport { add_form_reset_listener, autofocus } from './misc.js';\nimport * as w from '../../warnings.js';\nimport { LOADING_ATTR_SYMBOL } from '#client/constants';\nimport { queue_micro_task } from '../task.js';\nimport { is_capture_event, is_delegated, normalize_attribute } from '../../../../utils.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tget,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../runtime.js';\nimport { attach } from './attachments.js';\nimport { clsx } from '../../../shared/attributes.js';\nimport { set_class } from './class.js';\nimport { set_style } from './style.js';\nimport { ATTACHMENT_KEY, NAMESPACE_HTML, UNINITIALIZED } from '../../../../constants.js';\nimport { block, branch, destroy_effect, effect } from '../../reactivity/effects.js';\nimport { init_select, select_option } from './bindings/select.js';\nimport { flatten } from '../../reactivity/async.js';\n\nexport const CLASS = Symbol('class');\nexport const STYLE = Symbol('style');\n\nconst IS_CUSTOM_ELEMENT = Symbol('is custom element');\nconst IS_HTML = Symbol('is html');\n\n/**\n * The value/checked attribute in the template actually corresponds to the defaultValue property, so we need\n * to remove it upon hydration to avoid a bug when someone resets the form value.\n * @param {HTMLInputElement} input\n * @returns {void}\n */\nexport function remove_input_defaults(input) {\n\tif (!hydrating) return;\n\n\tvar already_removed = false;\n\n\t// We try and remove the default attributes later, rather than sync during hydration.\n\t// Doing it sync during hydration has a negative impact on performance, but deferring the\n\t// work in an idle task alleviates this greatly. If a form reset event comes in before\n\t// the idle callback, then we ensure the input defaults are cleared just before.\n\tvar remove_defaults = () => {\n\t\tif (already_removed) return;\n\t\talready_removed = true;\n\n\t\t// Remove the attributes but preserve the values\n\t\tif (input.hasAttribute('value')) {\n\t\t\tvar value = input.value;\n\t\t\tset_attribute(input, 'value', null);\n\t\t\tinput.value = value;\n\t\t}\n\n\t\tif (input.hasAttribute('checked')) {\n\t\t\tvar checked = input.checked;\n\t\t\tset_attribute(input, 'checked', null);\n\t\t\tinput.checked = checked;\n\t\t}\n\t};\n\n\t// @ts-expect-error\n\tinput.__on_r = remove_defaults;\n\tqueue_micro_task(remove_defaults);\n\tadd_form_reset_listener();\n}\n\n/**\n * @param {Element} element\n * @param {any} value\n */\nexport function set_value(element, value) {\n\tvar attributes = get_attributes(element);\n\n\tif (\n\t\tattributes.value ===\n\t\t\t(attributes.value =\n\t\t\t\t// treat null and undefined the same for the initial value\n\t\t\t\tvalue ?? undefined) ||\n\t\t// @ts-expect-error\n\t\t// `progress` elements always need their value set when it's `0`\n\t\t(element.value === value && (value !== 0 || element.nodeName !== 'PROGRESS'))\n\t) {\n\t\treturn;\n\t}\n\n\t// @ts-expect-error\n\telement.value = value ?? '';\n}\n\n/**\n * @param {Element} element\n * @param {boolean} checked\n */\nexport function set_checked(element, checked) {\n\tvar attributes = get_attributes(element);\n\n\tif (\n\t\tattributes.checked ===\n\t\t(attributes.checked =\n\t\t\t// treat null and undefined the same for the initial value\n\t\t\tchecked ?? undefined)\n\t) {\n\t\treturn;\n\t}\n\n\t// @ts-expect-error\n\telement.checked = checked;\n}\n\n/**\n * Sets the `selected` attribute on an `option` element.\n * Not set through the property because that doesn't reflect to the DOM,\n * which means it wouldn't be taken into account when a form is reset.\n * @param {HTMLOptionElement} element\n * @param {boolean} selected\n */\nexport function set_selected(element, selected) {\n\tif (selected) {\n\t\t// The selected option could've changed via user selection, and\n\t\t// setting the value without this check would set it back.\n\t\tif (!element.hasAttribute('selected')) {\n\t\t\telement.setAttribute('selected', '');\n\t\t}\n\t} else {\n\t\telement.removeAttribute('selected');\n\t}\n}\n\n/**\n * Applies the default checked property without influencing the current checked property.\n * @param {HTMLInputElement} element\n * @param {boolean} checked\n */\nexport function set_default_checked(element, checked) {\n\tconst existing_value = element.checked;\n\telement.defaultChecked = checked;\n\telement.checked = existing_value;\n}\n\n/**\n * Applies the default value property without influencing the current value property.\n * @param {HTMLInputElement | HTMLTextAreaElement} element\n * @param {string} value\n */\nexport function set_default_value(element, value) {\n\tconst existing_value = element.value;\n\telement.defaultValue = value;\n\telement.value = existing_value;\n}\n\n/**\n * @param {Element} element\n * @param {string} attribute\n * @param {string | null} value\n * @param {boolean} [skip_warning]\n */\nexport function set_attribute(element, attribute, value, skip_warning) {\n\tvar attributes = get_attributes(element);\n\n\tif (hydrating) {\n\t\tattributes[attribute] = element.getAttribute(attribute);\n\n\t\tif (\n\t\t\tattribute === 'src' ||\n\t\t\tattribute === 'srcset' ||\n\t\t\t(attribute === 'href' && element.nodeName === 'LINK')\n\t\t) {\n\t\t\tif (!skip_warning) {\n\t\t\t\tcheck_src_in_dev_hydration(element, attribute, value ?? '');\n\t\t\t}\n\n\t\t\t// If we reset these attributes, they would result in another network request, which we want to avoid.\n\t\t\t// We assume they are the same between client and server as checking if they are equal is expensive\n\t\t\t// (we can't just compare the strings as they can be different between client and server but result in the\n\t\t\t// same url, so we would need to create hidden anchor elements to compare them)\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (attributes[attribute] === (attributes[attribute] = value)) return;\n\n\tif (attribute === 'loading') {\n\t\t// @ts-expect-error\n\t\telement[LOADING_ATTR_SYMBOL] = value;\n\t}\n\n\tif (value == null) {\n\t\telement.removeAttribute(attribute);\n\t} else if (typeof value !== 'string' && get_setters(element).includes(attribute)) {\n\t\t// @ts-ignore\n\t\telement[attribute] = value;\n\t} else {\n\t\telement.setAttribute(attribute, value);\n\t}\n}\n\n/**\n * @param {Element} dom\n * @param {string} attribute\n * @param {string} value\n */\nexport function set_xlink_attribute(dom, attribute, value) {\n\tdom.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @param {string} prop\n * @param {any} value\n */\nexport function set_custom_element_data(node, prop, value) {\n\t// We need to ensure that setting custom element props, which can\n\t// invoke lifecycle methods on other custom elements, does not also\n\t// associate those lifecycle methods with the current active reaction\n\t// or effect\n\tvar previous_reaction = active_reaction;\n\tvar previous_effect = active_effect;\n\n\t// If we're hydrating but the custom element is from Svelte, and it already scaffolded,\n\t// then it might run block logic in hydration mode, which we have to prevent.\n\tlet was_hydrating = hydrating;\n\tif (hydrating) {\n\t\tset_hydrating(false);\n\t}\n\n\tset_active_reaction(null);\n\tset_active_effect(null);\n\n\ttry {\n\t\tif (\n\t\t\t// `style` should use `set_attribute` rather than the setter\n\t\t\tprop !== 'style' &&\n\t\t\t// Don't compute setters for custom elements while they aren't registered yet,\n\t\t\t// because during their upgrade/instantiation they might add more setters.\n\t\t\t// Instead, fall back to a simple \"an object, then set as property\" heuristic.\n\t\t\t(setters_cache.has(node.getAttribute('is') || node.nodeName) ||\n\t\t\t// customElements may not be available in browser extension contexts\n\t\t\t!customElements ||\n\t\t\tcustomElements.get(node.getAttribute('is') || node.tagName.toLowerCase())\n\t\t\t\t? get_setters(node).includes(prop)\n\t\t\t\t: value && typeof value === 'object')\n\t\t) {\n\t\t\t// @ts-expect-error\n\t\t\tnode[prop] = value;\n\t\t} else {\n\t\t\t// We did getters etc checks already, stringify before passing to set_attribute\n\t\t\t// to ensure it doesn't invoke the same logic again, and potentially populating\n\t\t\t// the setters cache too early.\n\t\t\tset_attribute(node, prop, value == null ? value : String(value));\n\t\t}\n\t} finally {\n\t\tset_active_reaction(previous_reaction);\n\t\tset_active_effect(previous_effect);\n\t\tif (was_hydrating) {\n\t\t\tset_hydrating(true);\n\t\t}\n\t}\n}\n\n/**\n * Spreads attributes onto a DOM element, taking into account the currently set attributes\n * @param {Element & ElementCSSInlineStyle} element\n * @param {Record<string | symbol, any> | undefined} prev\n * @param {Record<string | symbol, any>} next New attributes - this function mutates this object\n * @param {string} [css_hash]\n * @param {boolean} [should_remove_defaults]\n * @param {boolean} [skip_warning]\n * @returns {Record<string, any>}\n */\nfunction set_attributes(\n\telement,\n\tprev,\n\tnext,\n\tcss_hash,\n\tshould_remove_defaults = false,\n\tskip_warning = false\n) {\n\tif (hydrating && should_remove_defaults && element.tagName === 'INPUT') {\n\t\tvar input = /** @type {HTMLInputElement} */ (element);\n\t\tvar attribute = input.type === 'checkbox' ? 'defaultChecked' : 'defaultValue';\n\n\t\tif (!(attribute in next)) {\n\t\t\tremove_input_defaults(input);\n\t\t}\n\t}\n\n\tvar attributes = get_attributes(element);\n\n\tvar is_custom_element = attributes[IS_CUSTOM_ELEMENT];\n\tvar preserve_attribute_case = !attributes[IS_HTML];\n\n\t// If we're hydrating but the custom element is from Svelte, and it already scaffolded,\n\t// then it might run block logic in hydration mode, which we have to prevent.\n\tlet is_hydrating_custom_element = hydrating && is_custom_element;\n\tif (is_hydrating_custom_element) {\n\t\tset_hydrating(false);\n\t}\n\n\tvar current = prev || {};\n\tvar is_option_element = element.tagName === 'OPTION';\n\n\tfor (var key in prev) {\n\t\tif (!(key in next)) {\n\t\t\tnext[key] = null;\n\t\t}\n\t}\n\n\tif (next.class) {\n\t\tnext.class = clsx(next.class);\n\t} else if (css_hash || next[CLASS]) {\n\t\tnext.class = null; /* force call to set_class() */\n\t}\n\n\tif (next[STYLE]) {\n\t\tnext.style ??= null; /* force call to set_style() */\n\t}\n\n\tvar setters = get_setters(element);\n\n\t// since key is captured we use const\n\tfor (const key in next) {\n\t\t// let instead of var because referenced in a closure\n\t\tlet value = next[key];\n\n\t\t// Up here because we want to do this for the initial value, too, even if it's undefined,\n\t\t// and this wouldn't be reached in case of undefined because of the equality check below\n\t\tif (is_option_element && key === 'value' && value == null) {\n\t\t\t// The <option> element is a special case because removing the value attribute means\n\t\t\t// the value is set to the text content of the option element, and setting the value\n\t\t\t// to null or undefined means the value is set to the string \"null\" or \"undefined\".\n\t\t\t// To align with how we handle this case in non-spread-scenarios, this logic is needed.\n\t\t\t// There's a super-edge-case bug here that is left in in favor of smaller code size:\n\t\t\t// Because of the \"set missing props to null\" logic above, we can't differentiate\n\t\t\t// between a missing value and an explicitly set value of null or undefined. That means\n\t\t\t// that once set, the value attribute of an <option> element can't be removed. This is\n\t\t\t// a very rare edge case, and removing the attribute altogether isn't possible either\n\t\t\t// for the <option value={undefined}> case, so we're not losing any functionality here.\n\t\t\t// @ts-ignore\n\t\t\telement.value = element.__value = '';\n\t\t\tcurrent[key] = value;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (key === 'class') {\n\t\t\tvar is_html = element.namespaceURI === 'http://www.w3.org/1999/xhtml';\n\t\t\tset_class(element, is_html, value, css_hash, prev?.[CLASS], next[CLASS]);\n\t\t\tcurrent[key] = value;\n\t\t\tcurrent[CLASS] = next[CLASS];\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (key === 'style') {\n\t\t\tset_style(element, value, prev?.[STYLE], next[STYLE]);\n\t\t\tcurrent[key] = value;\n\t\t\tcurrent[STYLE] = next[STYLE];\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar prev_value = current[key];\n\n\t\t// Skip if value is unchanged, unless it's `undefined` and the element still has the attribute\n\t\tif (value === prev_value && !(value === undefined && element.hasAttribute(key))) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tcurrent[key] = value;\n\n\t\tvar prefix = key[0] + key[1]; // this is faster than key.slice(0, 2)\n\t\tif (prefix === '$$') continue;\n\n\t\tif (prefix === 'on') {\n\t\t\t/** @type {{ capture?: true }} */\n\t\t\tconst opts = {};\n\t\t\tconst event_handle_key = '$$' + key;\n\t\t\tlet event_name = key.slice(2);\n\t\t\tvar delegated = is_delegated(event_name);\n\n\t\t\tif (is_capture_event(event_name)) {\n\t\t\t\tevent_name = event_name.slice(0, -7);\n\t\t\t\topts.capture = true;\n\t\t\t}\n\n\t\t\tif (!delegated && prev_value) {\n\t\t\t\t// Listening to same event but different handler -> our handle function below takes care of this\n\t\t\t\t// If we were to remove and add listeners in this case, it could happen that the event is \"swallowed\"\n\t\t\t\t// (the browser seems to not know yet that a new one exists now) and doesn't reach the handler\n\t\t\t\t// https://github.com/sveltejs/svelte/issues/11903\n\t\t\t\tif (value != null) continue;\n\n\t\t\t\telement.removeEventListener(event_name, current[event_handle_key], opts);\n\t\t\t\tcurrent[event_handle_key] = null;\n\t\t\t}\n\n\t\t\tif (value != null) {\n\t\t\t\tif (!delegated) {\n\t\t\t\t\t/**\n\t\t\t\t\t * @this {any}\n\t\t\t\t\t * @param {Event} evt\n\t\t\t\t\t */\n\t\t\t\t\tfunction handle(evt) {\n\t\t\t\t\t\tcurrent[key].call(this, evt);\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrent[event_handle_key] = create_event(event_name, element, handle, opts);\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\telement[`__${event_name}`] = value;\n\t\t\t\t\tdelegate([event_name]);\n\t\t\t\t}\n\t\t\t} else if (delegated) {\n\t\t\t\t// @ts-ignore\n\t\t\t\telement[`__${event_name}`] = undefined;\n\t\t\t}\n\t\t} else if (key === 'style') {\n\t\t\t// avoid using the setter\n\t\t\tset_attribute(element, key, value);\n\t\t} else if (key === 'autofocus') {\n\t\t\tautofocus(/** @type {HTMLElement} */ (element), Boolean(value));\n\t\t} else if (!is_custom_element && (key === '__value' || (key === 'value' && value != null))) {\n\t\t\t// @ts-ignore We're not running this for custom elements because __value is actually\n\t\t\t// how Lit stores the current value on the element, and messing with that would break things.\n\t\t\telement.value = element.__value = value;\n\t\t} else if (key === 'selected' && is_option_element) {\n\t\t\tset_selected(/** @type {HTMLOptionElement} */ (element), value);\n\t\t} else {\n\t\t\tvar name = key;\n\t\t\tif (!preserve_attribute_case) {\n\t\t\t\tname = normalize_attribute(name);\n\t\t\t}\n\n\t\t\tvar is_default = name === 'defaultValue' || name === 'defaultChecked';\n\n\t\t\tif (value == null && !is_custom_element && !is_default) {\n\t\t\t\tattributes[key] = null;\n\n\t\t\t\tif (name === 'value' || name === 'checked') {\n\t\t\t\t\t// removing value/checked also removes defaultValue/defaultChecked  preserve\n\t\t\t\t\tlet input = /** @type {HTMLInputElement} */ (element);\n\t\t\t\t\tconst use_default = prev === undefined;\n\t\t\t\t\tif (name === 'value') {\n\t\t\t\t\t\tlet previous = input.defaultValue;\n\t\t\t\t\t\tinput.removeAttribute(name);\n\t\t\t\t\t\tinput.defaultValue = previous;\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tinput.value = input.__value = use_default ? previous : null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet previous = input.defaultChecked;\n\t\t\t\t\t\tinput.removeAttribute(name);\n\t\t\t\t\t\tinput.defaultChecked = previous;\n\t\t\t\t\t\tinput.checked = use_default ? previous : false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\telement.removeAttribute(key);\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tis_default ||\n\t\t\t\t(setters.includes(name) && (is_custom_element || typeof value !== 'string'))\n\t\t\t) {\n\t\t\t\t// @ts-ignore\n\t\t\t\telement[name] = value;\n\t\t\t\t// remove it from attributes's cache\n\t\t\t\tif (name in attributes) attributes[name] = UNINITIALIZED;\n\t\t\t} else if (typeof value !== 'function') {\n\t\t\t\tset_attribute(element, name, value, skip_warning);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (is_hydrating_custom_element) {\n\t\tset_hydrating(true);\n\t}\n\n\treturn current;\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} element\n * @param {(...expressions: any) => Record<string | symbol, any>} fn\n * @param {Array<() => any>} sync\n * @param {Array<() => Promise<any>>} async\n * @param {string} [css_hash]\n * @param {boolean} [should_remove_defaults]\n * @param {boolean} [skip_warning]\n */\nexport function attribute_effect(\n\telement,\n\tfn,\n\tsync = [],\n\tasync = [],\n\tcss_hash,\n\tshould_remove_defaults = false,\n\tskip_warning = false\n) {\n\tflatten(sync, async, (values) => {\n\t\t/** @type {Record<string | symbol, any> | undefined} */\n\t\tvar prev = undefined;\n\n\t\t/** @type {Record<symbol, Effect>} */\n\t\tvar effects = {};\n\n\t\tvar is_select = element.nodeName === 'SELECT';\n\t\tvar inited = false;\n\n\t\tblock(() => {\n\t\t\tvar next = fn(...values.map(get));\n\t\t\t/** @type {Record<string | symbol, any>} */\n\t\t\tvar current = set_attributes(\n\t\t\t\telement,\n\t\t\t\tprev,\n\t\t\t\tnext,\n\t\t\t\tcss_hash,\n\t\t\t\tshould_remove_defaults,\n\t\t\t\tskip_warning\n\t\t\t);\n\n\t\t\tif (inited && is_select && 'value' in next) {\n\t\t\t\tselect_option(/** @type {HTMLSelectElement} */ (element), next.value);\n\t\t\t}\n\n\t\t\tfor (let symbol of Object.getOwnPropertySymbols(effects)) {\n\t\t\t\tif (!next[symbol]) destroy_effect(effects[symbol]);\n\t\t\t}\n\n\t\t\tfor (let symbol of Object.getOwnPropertySymbols(next)) {\n\t\t\t\tvar n = next[symbol];\n\n\t\t\t\tif (symbol.description === ATTACHMENT_KEY && (!prev || n !== prev[symbol])) {\n\t\t\t\t\tif (effects[symbol]) destroy_effect(effects[symbol]);\n\t\t\t\t\teffects[symbol] = branch(() => attach(element, () => n));\n\t\t\t\t}\n\n\t\t\t\tcurrent[symbol] = n;\n\t\t\t}\n\n\t\t\tprev = current;\n\t\t});\n\n\t\tif (is_select) {\n\t\t\tvar select = /** @type {HTMLSelectElement} */ (element);\n\n\t\t\teffect(() => {\n\t\t\t\tselect_option(select, /** @type {Record<string | symbol, any>} */ (prev).value, true);\n\t\t\t\tinit_select(select);\n\t\t\t});\n\t\t}\n\n\t\tinited = true;\n\t});\n}\n\n/**\n *\n * @param {Element} element\n */\nfunction get_attributes(element) {\n\treturn /** @type {Record<string | symbol, unknown>} **/ (\n\t\t// @ts-expect-error\n\t\telement.__attributes ??= {\n\t\t\t[IS_CUSTOM_ELEMENT]: element.nodeName.includes('-'),\n\t\t\t[IS_HTML]: element.namespaceURI === NAMESPACE_HTML\n\t\t}\n\t);\n}\n\n/** @type {Map<string, string[]>} */\nvar setters_cache = new Map();\n\n/** @param {Element} element */\nfunction get_setters(element) {\n\tvar cache_key = element.getAttribute('is') || element.nodeName;\n\tvar setters = setters_cache.get(cache_key);\n\tif (setters) return setters;\n\tsetters_cache.set(cache_key, (setters = []));\n\n\tvar descriptors;\n\tvar proto = element; // In the case of custom elements there might be setters on the instance\n\tvar element_proto = Element.prototype;\n\n\t// Stop at Element, from there on there's only unnecessary setters we're not interested in\n\t// Do not use contructor.name here as that's unreliable in some browser environments\n\twhile (element_proto !== proto) {\n\t\tdescriptors = get_descriptors(proto);\n\n\t\tfor (var key in descriptors) {\n\t\t\tif (descriptors[key].set) {\n\t\t\t\tsetters.push(key);\n\t\t\t}\n\t\t}\n\n\t\tproto = get_prototype_of(proto);\n\t}\n\n\treturn setters;\n}\n\n/**\n * @param {any} element\n * @param {string} attribute\n * @param {string} value\n */\nfunction check_src_in_dev_hydration(element, attribute, value) {\n\tif (!DEV) return;\n\tif (attribute === 'srcset' && srcset_url_equal(element, value)) return;\n\tif (src_url_equal(element.getAttribute(attribute) ?? '', value)) return;\n\n\tw.hydration_attribute_changed(\n\t\tattribute,\n\t\telement.outerHTML.replace(element.innerHTML, element.innerHTML && '...'),\n\t\tString(value)\n\t);\n}\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nfunction src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\treturn new URL(element_src, document.baseURI).href === new URL(url, document.baseURI).href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element\n * @param {string} srcset\n * @returns {boolean}\n */\nfunction srcset_url_equal(element, srcset) {\n\tvar element_urls = split_srcset(element.srcset);\n\tvar urls = split_srcset(srcset);\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n","/** @import { Batch } from '../../../reactivity/batch.js' */\nimport { DEV } from 'esm-env';\nimport { render_effect, teardown } from '../../../reactivity/effects.js';\nimport { listen_to_event_and_reset_event } from './shared.js';\nimport * as e from '../../../errors.js';\nimport { is } from '../../../proxy.js';\nimport { queue_micro_task } from '../../task.js';\nimport { hydrating } from '../../hydration.js';\nimport { tick, untrack } from '../../../runtime.js';\nimport { is_runes } from '../../../context.js';\nimport { current_batch, previous_batch } from '../../../reactivity/batch.js';\n\n/**\n * @param {HTMLInputElement} input\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_value(input, get, set = get) {\n\tvar batches = new WeakSet();\n\n\tlisten_to_event_and_reset_event(input, 'input', async (is_reset) => {\n\t\tif (DEV && input.type === 'checkbox') {\n\t\t\t// TODO should this happen in prod too?\n\t\t\te.bind_invalid_checkbox_value();\n\t\t}\n\n\t\t/** @type {any} */\n\t\tvar value = is_reset ? input.defaultValue : input.value;\n\t\tvalue = is_numberlike_input(input) ? to_number(value) : value;\n\t\tset(value);\n\n\t\tif (current_batch !== null) {\n\t\t\tbatches.add(current_batch);\n\t\t}\n\n\t\t// Because `{#each ...}` blocks work by updating sources inside the flush,\n\t\t// we need to wait a tick before checking to see if we should forcibly\n\t\t// update the input and reset the selection state\n\t\tawait tick();\n\n\t\t// Respect any validation in accessors\n\t\tif (value !== (value = get())) {\n\t\t\tvar start = input.selectionStart;\n\t\t\tvar end = input.selectionEnd;\n\t\t\tvar length = input.value.length;\n\n\t\t\t// the value is coerced on assignment\n\t\t\tinput.value = value ?? '';\n\n\t\t\t// Restore selection\n\t\t\tif (end !== null) {\n\t\t\t\tvar new_length = input.value.length;\n\t\t\t\t// If cursor was at end and new input is longer, move cursor to new end\n\t\t\t\tif (start === end && end === length && new_length > length) {\n\t\t\t\t\tinput.selectionStart = new_length;\n\t\t\t\t\tinput.selectionEnd = new_length;\n\t\t\t\t} else {\n\t\t\t\t\tinput.selectionStart = start;\n\t\t\t\t\tinput.selectionEnd = Math.min(end, new_length);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tif (\n\t\t// If we are hydrating and the value has since changed,\n\t\t// then use the updated value from the input instead.\n\t\t(hydrating && input.defaultValue !== input.value) ||\n\t\t// If defaultValue is set, then value == defaultValue\n\t\t// TODO Svelte 6: remove input.value check and set to empty string?\n\t\t(untrack(get) == null && input.value)\n\t) {\n\t\tset(is_numberlike_input(input) ? to_number(input.value) : input.value);\n\n\t\tif (current_batch !== null) {\n\t\t\tbatches.add(current_batch);\n\t\t}\n\t}\n\n\trender_effect(() => {\n\t\tif (DEV && input.type === 'checkbox') {\n\t\t\t// TODO should this happen in prod too?\n\t\t\te.bind_invalid_checkbox_value();\n\t\t}\n\n\t\tvar value = get();\n\n\t\tif (input === document.activeElement) {\n\t\t\t// we need both, because in non-async mode, render effects run before previous_batch is set\n\t\t\tvar batch = /** @type {Batch} */ (previous_batch ?? current_batch);\n\n\t\t\t// Never rewrite the contents of a focused input. We can get here if, for example,\n\t\t\t// an update is deferred because of async work depending on the input:\n\t\t\t//\n\t\t\t// <input bind:value={query}>\n\t\t\t// <p>{await find(query)}</p>\n\t\t\tif (batches.has(batch)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (is_numberlike_input(input) && value === to_number(input.value)) {\n\t\t\t// handles 0 vs 00 case (see https://github.com/sveltejs/svelte/issues/9959)\n\t\t\treturn;\n\t\t}\n\n\t\tif (input.type === 'date' && !value && !input.value) {\n\t\t\t// Handles the case where a temporarily invalid date is set (while typing, for example with a leading 0 for the day)\n\t\t\t// and prevents this state from clearing the other parts of the date input (see https://github.com/sveltejs/svelte/issues/7897)\n\t\t\treturn;\n\t\t}\n\n\t\t// don't set the value of the input if it's the same to allow\n\t\t// minlength to work properly\n\t\tif (value !== input.value) {\n\t\t\t// @ts-expect-error the value is coerced on assignment\n\t\t\tinput.value = value ?? '';\n\t\t}\n\t});\n}\n\n/** @type {Set<HTMLInputElement[]>} */\nconst pending = new Set();\n\n/**\n * @param {HTMLInputElement[]} inputs\n * @param {null | [number]} group_index\n * @param {HTMLInputElement} input\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_group(inputs, group_index, input, get, set = get) {\n\tvar is_checkbox = input.getAttribute('type') === 'checkbox';\n\tvar binding_group = inputs;\n\n\t// needs to be let or related code isn't treeshaken out if it's always false\n\tlet hydration_mismatch = false;\n\n\tif (group_index !== null) {\n\t\tfor (var index of group_index) {\n\t\t\t// @ts-expect-error\n\t\t\tbinding_group = binding_group[index] ??= [];\n\t\t}\n\t}\n\n\tbinding_group.push(input);\n\n\tlisten_to_event_and_reset_event(\n\t\tinput,\n\t\t'change',\n\t\t() => {\n\t\t\t// @ts-ignore\n\t\t\tvar value = input.__value;\n\n\t\t\tif (is_checkbox) {\n\t\t\t\tvalue = get_binding_group_value(binding_group, value, input.checked);\n\t\t\t}\n\n\t\t\tset(value);\n\t\t},\n\t\t// TODO better default value handling\n\t\t() => set(is_checkbox ? [] : null)\n\t);\n\n\trender_effect(() => {\n\t\tvar value = get();\n\n\t\t// If we are hydrating and the value has since changed, then use the update value\n\t\t// from the input instead.\n\t\tif (hydrating && input.defaultChecked !== input.checked) {\n\t\t\thydration_mismatch = true;\n\t\t\treturn;\n\t\t}\n\n\t\tif (is_checkbox) {\n\t\t\tvalue = value || [];\n\t\t\t// @ts-ignore\n\t\t\tinput.checked = value.includes(input.__value);\n\t\t} else {\n\t\t\t// @ts-ignore\n\t\t\tinput.checked = is(input.__value, value);\n\t\t}\n\t});\n\n\tteardown(() => {\n\t\tvar index = binding_group.indexOf(input);\n\n\t\tif (index !== -1) {\n\t\t\tbinding_group.splice(index, 1);\n\t\t}\n\t});\n\n\tif (!pending.has(binding_group)) {\n\t\tpending.add(binding_group);\n\n\t\tqueue_micro_task(() => {\n\t\t\t// necessary to maintain binding group order in all insertion scenarios\n\t\t\tbinding_group.sort((a, b) => (a.compareDocumentPosition(b) === 4 ? -1 : 1));\n\t\t\tpending.delete(binding_group);\n\t\t});\n\t}\n\n\tqueue_micro_task(() => {\n\t\tif (hydration_mismatch) {\n\t\t\tvar value;\n\n\t\t\tif (is_checkbox) {\n\t\t\t\tvalue = get_binding_group_value(binding_group, value, input.checked);\n\t\t\t} else {\n\t\t\t\tvar hydration_input = binding_group.find((input) => input.checked);\n\t\t\t\t// @ts-ignore\n\t\t\t\tvalue = hydration_input?.__value;\n\t\t\t}\n\n\t\t\tset(value);\n\t\t}\n\t});\n}\n\n/**\n * @param {HTMLInputElement} input\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_checked(input, get, set = get) {\n\tlisten_to_event_and_reset_event(input, 'change', (is_reset) => {\n\t\tvar value = is_reset ? input.defaultChecked : input.checked;\n\t\tset(value);\n\t});\n\n\tif (\n\t\t// If we are hydrating and the value has since changed,\n\t\t// then use the update value from the input instead.\n\t\t(hydrating && input.defaultChecked !== input.checked) ||\n\t\t// If defaultChecked is set, then checked == defaultChecked\n\t\tuntrack(get) == null\n\t) {\n\t\tset(input.checked);\n\t}\n\n\trender_effect(() => {\n\t\tvar value = get();\n\t\tinput.checked = Boolean(value);\n\t});\n}\n\n/**\n * @template V\n * @param {Array<HTMLInputElement>} group\n * @param {V} __value\n * @param {boolean} checked\n * @returns {V[]}\n */\nfunction get_binding_group_value(group, __value, checked) {\n\t/** @type {Set<V>} */\n\tvar value = new Set();\n\n\tfor (var i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) {\n\t\t\t// @ts-ignore\n\t\t\tvalue.add(group[i].__value);\n\t\t}\n\t}\n\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement} input\n */\nfunction is_numberlike_input(input) {\n\tvar type = input.type;\n\treturn type === 'number' || type === 'range';\n}\n\n/**\n * @param {string} value\n */\nfunction to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/**\n * @param {HTMLInputElement} input\n * @param {() => FileList | null} get\n * @param {(value: FileList | null) => void} set\n */\nexport function bind_files(input, get, set = get) {\n\tlisten_to_event_and_reset_event(input, 'change', () => {\n\t\tset(input.files);\n\t});\n\n\tif (\n\t\t// If we are hydrating and the value has since changed,\n\t\t// then use the updated value from the input instead.\n\t\thydrating &&\n\t\tinput.files\n\t) {\n\t\tset(input.files);\n\t}\n\n\trender_effect(() => {\n\t\tinput.files = get();\n\t});\n}\n","import { effect, teardown } from '../../../reactivity/effects.js';\nimport { untrack } from '../../../runtime.js';\n\n/**\n * Resize observer singleton.\n * One listener per element only!\n * https://groups.google.com/a/chromium.org/g/blink-dev/c/z6ienONUb5A/m/F5-VcUZtBAAJ\n */\nclass ResizeObserverSingleton {\n\t/** */\n\t#listeners = new WeakMap();\n\n\t/** @type {ResizeObserver | undefined} */\n\t#observer;\n\n\t/** @type {ResizeObserverOptions} */\n\t#options;\n\n\t/** @static */\n\tstatic entries = new WeakMap();\n\n\t/** @param {ResizeObserverOptions} options */\n\tconstructor(options) {\n\t\tthis.#options = options;\n\t}\n\n\t/**\n\t * @param {Element} element\n\t * @param {(entry: ResizeObserverEntry) => any} listener\n\t */\n\tobserve(element, listener) {\n\t\tvar listeners = this.#listeners.get(element) || new Set();\n\t\tlisteners.add(listener);\n\n\t\tthis.#listeners.set(element, listeners);\n\t\tthis.#getObserver().observe(element, this.#options);\n\n\t\treturn () => {\n\t\t\tvar listeners = this.#listeners.get(element);\n\t\t\tlisteners.delete(listener);\n\n\t\t\tif (listeners.size === 0) {\n\t\t\t\tthis.#listeners.delete(element);\n\t\t\t\t/** @type {ResizeObserver} */ (this.#observer).unobserve(element);\n\t\t\t}\n\t\t};\n\t}\n\n\t#getObserver() {\n\t\treturn (\n\t\t\tthis.#observer ??\n\t\t\t(this.#observer = new ResizeObserver(\n\t\t\t\t/** @param {any} entries */ (entries) => {\n\t\t\t\t\tfor (var entry of entries) {\n\t\t\t\t\t\tResizeObserverSingleton.entries.set(entry.target, entry);\n\t\t\t\t\t\tfor (var listener of this.#listeners.get(entry.target) || []) {\n\t\t\t\t\t\t\tlistener(entry);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t))\n\t\t);\n\t}\n}\n\nvar resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'content-box'\n});\n\nvar resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'border-box'\n});\n\nvar resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'device-pixel-content-box'\n});\n\n/**\n * @param {Element} element\n * @param {'contentRect' | 'contentBoxSize' | 'borderBoxSize' | 'devicePixelContentBoxSize'} type\n * @param {(entry: keyof ResizeObserverEntry) => void} set\n */\nexport function bind_resize_observer(element, type, set) {\n\tvar observer =\n\t\ttype === 'contentRect' || type === 'contentBoxSize'\n\t\t\t? resize_observer_content_box\n\t\t\t: type === 'borderBoxSize'\n\t\t\t\t? resize_observer_border_box\n\t\t\t\t: resize_observer_device_pixel_content_box;\n\n\tvar unsub = observer.observe(element, /** @param {any} entry */ (entry) => set(entry[type]));\n\tteardown(unsub);\n}\n\n/**\n * @param {HTMLElement} element\n * @param {'clientWidth' | 'clientHeight' | 'offsetWidth' | 'offsetHeight'} type\n * @param {(size: number) => void} set\n */\nexport function bind_element_size(element, type, set) {\n\tvar unsub = resize_observer_border_box.observe(element, () => set(element[type]));\n\n\teffect(() => {\n\t\t// The update could contain reads which should be ignored\n\t\tuntrack(() => set(element[type]));\n\t\treturn unsub;\n\t});\n}\n","import { STATE_SYMBOL } from '#client/constants';\nimport { effect, render_effect } from '../../../reactivity/effects.js';\nimport { untrack } from '../../../runtime.js';\nimport { queue_micro_task } from '../../task.js';\n\n/**\n * @param {any} bound_value\n * @param {Element} element_or_component\n * @returns {boolean}\n */\nfunction is_bound_this(bound_value, element_or_component) {\n\treturn (\n\t\tbound_value === element_or_component || bound_value?.[STATE_SYMBOL] === element_or_component\n\t);\n}\n\n/**\n * @param {any} element_or_component\n * @param {(value: unknown, ...parts: unknown[]) => void} update\n * @param {(...parts: unknown[]) => unknown} get_value\n * @param {() => unknown[]} [get_parts] Set if the this binding is used inside an each block,\n * \t\t\t\t\t\t\t\t\t\treturns all the parts of the each block context that are used in the expression\n * @returns {void}\n */\nexport function bind_this(element_or_component = {}, update, get_value, get_parts) {\n\teffect(() => {\n\t\t/** @type {unknown[]} */\n\t\tvar old_parts;\n\n\t\t/** @type {unknown[]} */\n\t\tvar parts;\n\n\t\trender_effect(() => {\n\t\t\told_parts = parts;\n\t\t\t// We only track changes to the parts, not the value itself to avoid unnecessary reruns.\n\t\t\tparts = get_parts?.() || [];\n\n\t\t\tuntrack(() => {\n\t\t\t\tif (element_or_component !== get_value(...parts)) {\n\t\t\t\t\tupdate(element_or_component, ...parts);\n\t\t\t\t\t// If this is an effect rerun (cause: each block context changes), then nullfiy the binding at\n\t\t\t\t\t// the previous position if it isn't already taken over by a different effect.\n\t\t\t\t\tif (old_parts && is_bound_this(get_value(...old_parts), element_or_component)) {\n\t\t\t\t\t\tupdate(null, ...old_parts);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\treturn () => {\n\t\t\t// We cannot use effects in the teardown phase, we we use a microtask instead.\n\t\t\tqueue_micro_task(() => {\n\t\t\t\tif (parts && is_bound_this(get_value(...parts), element_or_component)) {\n\t\t\t\t\tupdate(null, ...parts);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t});\n\n\treturn element_or_component;\n}\n","/** @import { Readable } from './public' */\nimport { untrack } from '../index-client.js';\nimport { noop } from '../internal/shared/utils.js';\n\n/**\n * @template T\n * @param {Readable<T> | null | undefined} store\n * @param {(value: T) => void} run\n * @param {(value: T) => void} [invalidate]\n * @returns {() => void}\n */\nexport function subscribe_to_store(store, run, invalidate) {\n\tif (store == null) {\n\t\t// @ts-expect-error\n\t\trun(undefined);\n\n\t\t// @ts-expect-error\n\t\tif (invalidate) invalidate(undefined);\n\n\t\treturn noop;\n\t}\n\n\t// Svelte store takes a private second argument\n\t// StartStopNotifier could mutate state, and we want to silence the corresponding validation error\n\tconst unsub = untrack(() =>\n\t\tstore.subscribe(\n\t\t\trun,\n\t\t\t// @ts-expect-error\n\t\t\tinvalidate\n\t\t)\n\t);\n\n\t// Also support RxJS\n\t// @ts-expect-error TODO fix this in the types?\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n","/** @import { Readable, StartStopNotifier, Subscriber, Unsubscriber, Updater, Writable } from '../public.js' */\n/** @import { Stores, StoresValues, SubscribeInvalidateTuple } from '../private.js' */\nimport { noop, run_all } from '../../internal/shared/utils.js';\nimport { safe_not_equal } from '../../internal/client/reactivity/equality.js';\nimport { subscribe_to_store } from '../utils.js';\n\n/**\n * @type {Array<SubscribeInvalidateTuple<any> | any>}\n */\nconst subscriber_queue = [];\n\n/**\n * Creates a `Readable` store that allows reading by subscription.\n *\n * @template T\n * @param {T} [value] initial value\n * @param {StartStopNotifier<T>} [start]\n * @returns {Readable<T>}\n */\nexport function readable(value, start) {\n\treturn {\n\t\tsubscribe: writable(value, start).subscribe\n\t};\n}\n\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n *\n * @template T\n * @param {T} [value] initial value\n * @param {StartStopNotifier<T>} [start]\n * @returns {Writable<T>}\n */\nexport function writable(value, start = noop) {\n\t/** @type {Unsubscriber | null} */\n\tlet stop = null;\n\n\t/** @type {Set<SubscribeInvalidateTuple<T>>} */\n\tconst subscribers = new Set();\n\n\t/**\n\t * @param {T} new_value\n\t * @returns {void}\n\t */\n\tfunction set(new_value) {\n\t\tif (safe_not_equal(value, new_value)) {\n\t\t\tvalue = new_value;\n\t\t\tif (stop) {\n\t\t\t\t// store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (const subscriber of subscribers) {\n\t\t\t\t\tsubscriber[1]();\n\t\t\t\t\tsubscriber_queue.push(subscriber, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {Updater<T>} fn\n\t * @returns {void}\n\t */\n\tfunction update(fn) {\n\t\tset(fn(/** @type {T} */ (value)));\n\t}\n\n\t/**\n\t * @param {Subscriber<T>} run\n\t * @param {() => void} [invalidate]\n\t * @returns {Unsubscriber}\n\t */\n\tfunction subscribe(run, invalidate = noop) {\n\t\t/** @type {SubscribeInvalidateTuple<T>} */\n\t\tconst subscriber = [run, invalidate];\n\t\tsubscribers.add(subscriber);\n\t\tif (subscribers.size === 1) {\n\t\t\tstop = start(set, update) || noop;\n\t\t}\n\t\trun(/** @type {T} */ (value));\n\t\treturn () => {\n\t\t\tsubscribers.delete(subscriber);\n\t\t\tif (subscribers.size === 0 && stop) {\n\t\t\t\tstop();\n\t\t\t\tstop = null;\n\t\t\t}\n\t\t};\n\t}\n\treturn { set, update, subscribe };\n}\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * @template {Stores} S\n * @template T\n * @overload\n * @param {S} stores\n * @param {(values: StoresValues<S>, set: (value: T) => void, update: (fn: Updater<T>) => void) => Unsubscriber | void} fn\n * @param {T} [initial_value]\n * @returns {Readable<T>}\n */\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * @template {Stores} S\n * @template T\n * @overload\n * @param {S} stores\n * @param {(values: StoresValues<S>) => T} fn\n * @param {T} [initial_value]\n * @returns {Readable<T>}\n */\n/**\n * @template {Stores} S\n * @template T\n * @param {S} stores\n * @param {Function} fn\n * @param {T} [initial_value]\n * @returns {Readable<T>}\n */\nexport function derived(stores, fn, initial_value) {\n\tconst single = !Array.isArray(stores);\n\t/** @type {Array<Readable<any>>} */\n\tconst stores_array = single ? [stores] : stores;\n\tif (!stores_array.every(Boolean)) {\n\t\tthrow new Error('derived() expects stores as input, got a falsy value');\n\t}\n\tconst auto = fn.length < 2;\n\treturn readable(initial_value, (set, update) => {\n\t\tlet started = false;\n\t\t/** @type {T[]} */\n\t\tconst values = [];\n\t\tlet pending = 0;\n\t\tlet cleanup = noop;\n\t\tconst sync = () => {\n\t\t\tif (pending) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcleanup();\n\t\t\tconst result = fn(single ? values[0] : values, set, update);\n\t\t\tif (auto) {\n\t\t\t\tset(result);\n\t\t\t} else {\n\t\t\t\tcleanup = typeof result === 'function' ? result : noop;\n\t\t\t}\n\t\t};\n\t\tconst unsubscribers = stores_array.map((store, i) =>\n\t\t\tsubscribe_to_store(\n\t\t\t\tstore,\n\t\t\t\t(value) => {\n\t\t\t\t\tvalues[i] = value;\n\t\t\t\t\tpending &= ~(1 << i);\n\t\t\t\t\tif (started) {\n\t\t\t\t\t\tsync();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tpending |= 1 << i;\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tstarted = true;\n\t\tsync();\n\t\treturn function stop() {\n\t\t\trun_all(unsubscribers);\n\t\t\tcleanup();\n\t\t\t// We need to set this to false because callbacks can still happen despite having unsubscribed:\n\t\t\t// Callbacks might already be placed in the queue which doesn't know it should no longer\n\t\t\t// invoke this derived store.\n\t\t\tstarted = false;\n\t\t};\n\t});\n}\n\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * @template T\n * @param {Readable<T>} store  - store to make readonly\n * @returns {Readable<T>}\n */\nexport function readonly(store) {\n\treturn {\n\t\t// @ts-expect-error TODO i suspect the bind is unnecessary\n\t\tsubscribe: store.subscribe.bind(store)\n\t};\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * @template T\n * @param {Readable<T>} store\n * @returns {T}\n */\nexport function get(store) {\n\tlet value;\n\tsubscribe_to_store(store, (_) => (value = _))();\n\t// @ts-expect-error\n\treturn value;\n}\n","/** @import { StoreReferencesContainer } from '#client' */\n/** @import { Store } from '#shared' */\nimport { subscribe_to_store } from '../../../store/utils.js';\nimport { get as get_store } from '../../../store/shared/index.js';\nimport { define_property, noop } from '../../shared/utils.js';\nimport { get } from '../runtime.js';\nimport { teardown } from './effects.js';\nimport { mutable_source, set } from './sources.js';\nimport { DEV } from 'esm-env';\n\n/**\n * Whether or not the prop currently being read is a store binding, as in\n * `<Child bind:x={$y} />`. If it is, we treat the prop as mutable even in\n * runes mode, and skip `binding_property_non_reactive` validation\n */\nlet is_store_binding = false;\n\nlet IS_UNMOUNTED = Symbol();\n\n/**\n * Gets the current value of a store. If the store isn't subscribed to yet, it will create a proxy\n * signal that will be updated when the store is. The store references container is needed to\n * track reassignments to stores and to track the correct component context.\n * @template V\n * @param {Store<V> | null | undefined} store\n * @param {string} store_name\n * @param {StoreReferencesContainer} stores\n * @returns {V}\n */\nexport function store_get(store, store_name, stores) {\n\tconst entry = (stores[store_name] ??= {\n\t\tstore: null,\n\t\tsource: mutable_source(undefined),\n\t\tunsubscribe: noop\n\t});\n\n\tif (DEV) {\n\t\tentry.source.label = store_name;\n\t}\n\n\t// if the component that setup this is already unmounted we don't want to register a subscription\n\tif (entry.store !== store && !(IS_UNMOUNTED in stores)) {\n\t\tentry.unsubscribe();\n\t\tentry.store = store ?? null;\n\n\t\tif (store == null) {\n\t\t\tentry.source.v = undefined; // see synchronous callback comment below\n\t\t\tentry.unsubscribe = noop;\n\t\t} else {\n\t\t\tvar is_synchronous_callback = true;\n\n\t\t\tentry.unsubscribe = subscribe_to_store(store, (v) => {\n\t\t\t\tif (is_synchronous_callback) {\n\t\t\t\t\t// If the first updates to the store value (possibly multiple of them) are synchronously\n\t\t\t\t\t// inside a derived, we will hit the `state_unsafe_mutation` error if we `set` the value\n\t\t\t\t\tentry.source.v = v;\n\t\t\t\t} else {\n\t\t\t\t\tset(entry.source, v);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tis_synchronous_callback = false;\n\t\t}\n\t}\n\n\t// if the component that setup this stores is already unmounted the source will be out of sync\n\t// so we just use the `get` for the stores, less performant but it avoids to create a memory leak\n\t// and it will keep the value consistent\n\tif (store && IS_UNMOUNTED in stores) {\n\t\treturn get_store(store);\n\t}\n\n\treturn get(entry.source);\n}\n\n/**\n * Unsubscribe from a store if it's not the same as the one in the store references container.\n * We need this in addition to `store_get` because someone could unsubscribe from a store but\n * then never subscribe to the new one (if any), causing the subscription to stay open wrongfully.\n * @param {Store<any> | null | undefined} store\n * @param {string} store_name\n * @param {StoreReferencesContainer} stores\n */\nexport function store_unsub(store, store_name, stores) {\n\t/** @type {StoreReferencesContainer[''] | undefined} */\n\tlet entry = stores[store_name];\n\n\tif (entry && entry.store !== store) {\n\t\t// Don't reset store yet, so that store_get above can resubscribe to new store if necessary\n\t\tentry.unsubscribe();\n\t\tentry.unsubscribe = noop;\n\t}\n\n\treturn store;\n}\n\n/**\n * Sets the new value of a store and returns that value.\n * @template V\n * @param {Store<V>} store\n * @param {V} value\n * @returns {V}\n */\nexport function store_set(store, value) {\n\tstore.set(value);\n\treturn value;\n}\n\n/**\n * @param {StoreReferencesContainer} stores\n * @param {string} store_name\n */\nexport function invalidate_store(stores, store_name) {\n\tvar entry = stores[store_name];\n\tif (entry.store !== null) {\n\t\tstore_set(entry.store, entry.source.v);\n\t}\n}\n\n/**\n * Unsubscribes from all auto-subscribed stores on destroy\n * @returns {[StoreReferencesContainer, ()=>void]}\n */\nexport function setup_stores() {\n\t/** @type {StoreReferencesContainer} */\n\tconst stores = {};\n\n\tfunction cleanup() {\n\t\tteardown(() => {\n\t\t\tfor (var store_name in stores) {\n\t\t\t\tconst ref = stores[store_name];\n\t\t\t\tref.unsubscribe();\n\t\t\t}\n\t\t\tdefine_property(stores, IS_UNMOUNTED, {\n\t\t\t\tenumerable: false,\n\t\t\t\tvalue: true\n\t\t\t});\n\t\t});\n\t}\n\n\treturn [stores, cleanup];\n}\n\n/**\n * Updates a store with a new value.\n * @param {Store<V>} store  the store to update\n * @param {any} expression  the expression that mutates the store\n * @param {V} new_value  the new store value\n * @template V\n */\nexport function store_mutate(store, expression, new_value) {\n\tstore.set(new_value);\n\treturn expression;\n}\n\n/**\n * @param {Store<number>} store\n * @param {number} store_value\n * @param {1 | -1} [d]\n * @returns {number}\n */\nexport function update_store(store, store_value, d = 1) {\n\tstore.set(store_value + d);\n\treturn store_value;\n}\n\n/**\n * @param {Store<number>} store\n * @param {number} store_value\n * @param {1 | -1} [d]\n * @returns {number}\n */\nexport function update_pre_store(store, store_value, d = 1) {\n\tconst value = store_value + d;\n\tstore.set(value);\n\treturn value;\n}\n\n/**\n * Called inside prop getters to communicate that the prop is a store binding\n */\nexport function mark_store_binding() {\n\tis_store_binding = true;\n}\n\n/**\n * Returns a tuple that indicates whether `fn()` reads a prop that is a store binding.\n * Used to prevent `binding_property_non_reactive` validation false positives and\n * ensure that these props are treated as mutable even in runes mode\n * @template T\n * @param {() => T} fn\n * @returns {[T, boolean]}\n */\nexport function capture_store_binding(fn) {\n\tvar previous_is_store_binding = is_store_binding;\n\n\ttry {\n\t\tis_store_binding = false;\n\t\treturn [fn(), is_store_binding];\n\t} finally {\n\t\tis_store_binding = previous_is_store_binding;\n\t}\n}\n","/** @import { Effect, Source } from './types.js' */\nimport { DEV } from 'esm-env';\nimport {\n\tPROPS_IS_BINDABLE,\n\tPROPS_IS_IMMUTABLE,\n\tPROPS_IS_LAZY_INITIAL,\n\tPROPS_IS_RUNES,\n\tPROPS_IS_UPDATED\n} from '../../../constants.js';\nimport { get_descriptor, is_function } from '../../shared/utils.js';\nimport { set, source, update } from './sources.js';\nimport { derived, derived_safe_equal } from './deriveds.js';\nimport {\n\tactive_effect,\n\tget,\n\tis_destroying_effect,\n\tset_active_effect,\n\tuntrack\n} from '../runtime.js';\nimport * as e from '../errors.js';\nimport { DESTROYED, LEGACY_PROPS, STATE_SYMBOL } from '#client/constants';\nimport { proxy } from '../proxy.js';\nimport { capture_store_binding } from './store.js';\nimport { legacy_mode_flag } from '../../flags/index.js';\n\n/**\n * @param {((value?: number) => number)} fn\n * @param {1 | -1} [d]\n * @returns {number}\n */\nexport function update_prop(fn, d = 1) {\n\tconst value = fn();\n\tfn(value + d);\n\treturn value;\n}\n\n/**\n * @param {((value?: number) => number)} fn\n * @param {1 | -1} [d]\n * @returns {number}\n */\nexport function update_pre_prop(fn, d = 1) {\n\tconst value = fn() + d;\n\tfn(value);\n\treturn value;\n}\n\n/**\n * The proxy handler for rest props (i.e. `const { x, ...rest } = $props()`).\n * Is passed the full `$$props` object and excludes the named props.\n * @type {ProxyHandler<{ props: Record<string | symbol, unknown>, exclude: Array<string | symbol>, name?: string }>}}\n */\nconst rest_props_handler = {\n\tget(target, key) {\n\t\tif (target.exclude.includes(key)) return;\n\t\treturn target.props[key];\n\t},\n\tset(target, key) {\n\t\tif (DEV) {\n\t\t\t// TODO should this happen in prod too?\n\t\t\te.props_rest_readonly(`${target.name}.${String(key)}`);\n\t\t}\n\n\t\treturn false;\n\t},\n\tgetOwnPropertyDescriptor(target, key) {\n\t\tif (target.exclude.includes(key)) return;\n\t\tif (key in target.props) {\n\t\t\treturn {\n\t\t\t\tenumerable: true,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: target.props[key]\n\t\t\t};\n\t\t}\n\t},\n\thas(target, key) {\n\t\tif (target.exclude.includes(key)) return false;\n\t\treturn key in target.props;\n\t},\n\townKeys(target) {\n\t\treturn Reflect.ownKeys(target.props).filter((key) => !target.exclude.includes(key));\n\t}\n};\n\n/**\n * @param {Record<string, unknown>} props\n * @param {string[]} exclude\n * @param {string} [name]\n * @returns {Record<string, unknown>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function rest_props(props, exclude, name) {\n\treturn new Proxy(\n\t\tDEV ? { props, exclude, name, other: {}, to_proxy: [] } : { props, exclude },\n\t\trest_props_handler\n\t);\n}\n\n/**\n * The proxy handler for legacy $$restProps and $$props\n * @type {ProxyHandler<{ props: Record<string | symbol, unknown>, exclude: Array<string | symbol>, special: Record<string | symbol, (v?: unknown) => unknown>, version: Source<number>, parent_effect: Effect }>}}\n */\nconst legacy_rest_props_handler = {\n\tget(target, key) {\n\t\tif (target.exclude.includes(key)) return;\n\t\tget(target.version);\n\t\treturn key in target.special ? target.special[key]() : target.props[key];\n\t},\n\tset(target, key, value) {\n\t\tif (!(key in target.special)) {\n\t\t\tvar previous_effect = active_effect;\n\n\t\t\ttry {\n\t\t\t\tset_active_effect(target.parent_effect);\n\n\t\t\t\t// Handle props that can temporarily get out of sync with the parent\n\t\t\t\t/** @type {Record<string, (v?: unknown) => unknown>} */\n\t\t\t\ttarget.special[key] = prop(\n\t\t\t\t\t{\n\t\t\t\t\t\tget [key]() {\n\t\t\t\t\t\t\treturn target.props[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t/** @type {string} */ (key),\n\t\t\t\t\tPROPS_IS_UPDATED\n\t\t\t\t);\n\t\t\t} finally {\n\t\t\t\tset_active_effect(previous_effect);\n\t\t\t}\n\t\t}\n\n\t\ttarget.special[key](value);\n\t\tupdate(target.version); // $$props is coarse-grained: when $$props.x is updated, usages of $$props.y etc are also rerun\n\t\treturn true;\n\t},\n\tgetOwnPropertyDescriptor(target, key) {\n\t\tif (target.exclude.includes(key)) return;\n\t\tif (key in target.props) {\n\t\t\treturn {\n\t\t\t\tenumerable: true,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: target.props[key]\n\t\t\t};\n\t\t}\n\t},\n\tdeleteProperty(target, key) {\n\t\t// Svelte 4 allowed for deletions on $$restProps\n\t\tif (target.exclude.includes(key)) return true;\n\t\ttarget.exclude.push(key);\n\t\tupdate(target.version);\n\t\treturn true;\n\t},\n\thas(target, key) {\n\t\tif (target.exclude.includes(key)) return false;\n\t\treturn key in target.props;\n\t},\n\townKeys(target) {\n\t\treturn Reflect.ownKeys(target.props).filter((key) => !target.exclude.includes(key));\n\t}\n};\n\n/**\n * @param {Record<string, unknown>} props\n * @param {string[]} exclude\n * @returns {Record<string, unknown>}\n */\nexport function legacy_rest_props(props, exclude) {\n\treturn new Proxy(\n\t\t{\n\t\t\tprops,\n\t\t\texclude,\n\t\t\tspecial: {},\n\t\t\tversion: source(0),\n\t\t\t// TODO this is only necessary because we need to track component\n\t\t\t// destruction inside `prop`, because of `bind:this`, but it\n\t\t\t// seems likely that we can simplify `bind:this` instead\n\t\t\tparent_effect: /** @type {Effect} */ (active_effect)\n\t\t},\n\t\tlegacy_rest_props_handler\n\t);\n}\n\n/**\n * The proxy handler for spread props. Handles the incoming array of props\n * that looks like `() => { dynamic: props }, { static: prop }, ..` and wraps\n * them so that the whole thing is passed to the component as the `$$props` argument.\n * @type {ProxyHandler<{ props: Array<Record<string | symbol, unknown> | (() => Record<string | symbol, unknown>)> }>}}\n */\nconst spread_props_handler = {\n\tget(target, key) {\n\t\tlet i = target.props.length;\n\t\twhile (i--) {\n\t\t\tlet p = target.props[i];\n\t\t\tif (is_function(p)) p = p();\n\t\t\tif (typeof p === 'object' && p !== null && key in p) return p[key];\n\t\t}\n\t},\n\tset(target, key, value) {\n\t\tlet i = target.props.length;\n\t\twhile (i--) {\n\t\t\tlet p = target.props[i];\n\t\t\tif (is_function(p)) p = p();\n\t\t\tconst desc = get_descriptor(p, key);\n\t\t\tif (desc && desc.set) {\n\t\t\t\tdesc.set(value);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\tgetOwnPropertyDescriptor(target, key) {\n\t\tlet i = target.props.length;\n\t\twhile (i--) {\n\t\t\tlet p = target.props[i];\n\t\t\tif (is_function(p)) p = p();\n\t\t\tif (typeof p === 'object' && p !== null && key in p) {\n\t\t\t\tconst descriptor = get_descriptor(p, key);\n\t\t\t\tif (descriptor && !descriptor.configurable) {\n\t\t\t\t\t// Prevent a \"Non-configurability Report Error\": The target is an array, it does\n\t\t\t\t\t// not actually contain this property. If it is now described as non-configurable,\n\t\t\t\t\t// the proxy throws a validation error. Setting it to true avoids that.\n\t\t\t\t\tdescriptor.configurable = true;\n\t\t\t\t}\n\t\t\t\treturn descriptor;\n\t\t\t}\n\t\t}\n\t},\n\thas(target, key) {\n\t\t// To prevent a false positive `is_entry_props` in the `prop` function\n\t\tif (key === STATE_SYMBOL || key === LEGACY_PROPS) return false;\n\n\t\tfor (let p of target.props) {\n\t\t\tif (is_function(p)) p = p();\n\t\t\tif (p != null && key in p) return true;\n\t\t}\n\n\t\treturn false;\n\t},\n\townKeys(target) {\n\t\t/** @type {Array<string | symbol>} */\n\t\tconst keys = [];\n\n\t\tfor (let p of target.props) {\n\t\t\tif (is_function(p)) p = p();\n\t\t\tif (!p) continue;\n\n\t\t\tfor (const key in p) {\n\t\t\t\tif (!keys.includes(key)) keys.push(key);\n\t\t\t}\n\n\t\t\tfor (const key of Object.getOwnPropertySymbols(p)) {\n\t\t\t\tif (!keys.includes(key)) keys.push(key);\n\t\t\t}\n\t\t}\n\n\t\treturn keys;\n\t}\n};\n\n/**\n * @param {Array<Record<string, unknown> | (() => Record<string, unknown>)>} props\n * @returns {any}\n */\nexport function spread_props(...props) {\n\treturn new Proxy({ props }, spread_props_handler);\n}\n\n/**\n * This function is responsible for synchronizing a possibly bound prop with the inner component state.\n * It is used whenever the compiler sees that the component writes to the prop, or when it has a default prop_value.\n * @template V\n * @param {Record<string, unknown>} props\n * @param {string} key\n * @param {number} flags\n * @param {V | (() => V)} [fallback]\n * @returns {(() => V | ((arg: V) => V) | ((arg: V, mutation: boolean) => V))}\n */\nexport function prop(props, key, flags, fallback) {\n\tvar runes = !legacy_mode_flag || (flags & PROPS_IS_RUNES) !== 0;\n\tvar bindable = (flags & PROPS_IS_BINDABLE) !== 0;\n\tvar lazy = (flags & PROPS_IS_LAZY_INITIAL) !== 0;\n\n\tvar fallback_value = /** @type {V} */ (fallback);\n\tvar fallback_dirty = true;\n\n\tvar get_fallback = () => {\n\t\tif (fallback_dirty) {\n\t\t\tfallback_dirty = false;\n\n\t\t\tfallback_value = lazy\n\t\t\t\t? untrack(/** @type {() => V} */ (fallback))\n\t\t\t\t: /** @type {V} */ (fallback);\n\t\t}\n\n\t\treturn fallback_value;\n\t};\n\n\t/** @type {((v: V) => void) | undefined} */\n\tvar setter;\n\n\tif (bindable) {\n\t\t// Can be the case when someone does `mount(Component, props)` with `let props = $state({...})`\n\t\t// or `createClassComponent(Component, props)`\n\t\tvar is_entry_props = STATE_SYMBOL in props || LEGACY_PROPS in props;\n\n\t\tsetter =\n\t\t\tget_descriptor(props, key)?.set ??\n\t\t\t(is_entry_props && key in props ? (v) => (props[key] = v) : undefined);\n\t}\n\n\tvar initial_value;\n\tvar is_store_sub = false;\n\n\tif (bindable) {\n\t\t[initial_value, is_store_sub] = capture_store_binding(() => /** @type {V} */ (props[key]));\n\t} else {\n\t\tinitial_value = /** @type {V} */ (props[key]);\n\t}\n\n\tif (initial_value === undefined && fallback !== undefined) {\n\t\tinitial_value = get_fallback();\n\n\t\tif (setter) {\n\t\t\tif (runes) e.props_invalid_value(key);\n\t\t\tsetter(initial_value);\n\t\t}\n\t}\n\n\t/** @type {() => V} */\n\tvar getter;\n\n\tif (runes) {\n\t\tgetter = () => {\n\t\t\tvar value = /** @type {V} */ (props[key]);\n\t\t\tif (value === undefined) return get_fallback();\n\t\t\tfallback_dirty = true;\n\t\t\treturn value;\n\t\t};\n\t} else {\n\t\tgetter = () => {\n\t\t\tvar value = /** @type {V} */ (props[key]);\n\n\t\t\tif (value !== undefined) {\n\t\t\t\t// in legacy mode, we don't revert to the fallback value\n\t\t\t\t// if the prop goes from defined to undefined. The easiest\n\t\t\t\t// way to model this is to make the fallback undefined\n\t\t\t\t// as soon as the prop has a value\n\t\t\t\tfallback_value = /** @type {V} */ (undefined);\n\t\t\t}\n\n\t\t\treturn value === undefined ? fallback_value : value;\n\t\t};\n\t}\n\n\t// prop is never written to  we only need a getter\n\tif (runes && (flags & PROPS_IS_UPDATED) === 0) {\n\t\treturn getter;\n\t}\n\n\t// prop is written to, but the parent component had `bind:foo` which\n\t// means we can just call `$$props.foo = value` directly\n\tif (setter) {\n\t\tvar legacy_parent = props.$$legacy;\n\t\treturn /** @type {() => V} */ (\n\t\t\tfunction (/** @type {V} */ value, /** @type {boolean} */ mutation) {\n\t\t\t\tif (arguments.length > 0) {\n\t\t\t\t\t// We don't want to notify if the value was mutated and the parent is in runes mode.\n\t\t\t\t\t// In that case the state proxy (if it exists) should take care of the notification.\n\t\t\t\t\t// If the parent is not in runes mode, we need to notify on mutation, too, that the prop\n\t\t\t\t\t// has changed because the parent will not be able to detect the change otherwise.\n\t\t\t\t\tif (!runes || !mutation || legacy_parent || is_store_sub) {\n\t\t\t\t\t\t/** @type {Function} */ (setter)(mutation ? getter() : value);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\n\t\t\t\treturn getter();\n\t\t\t}\n\t\t);\n\t}\n\n\t// Either prop is written to, but there's no binding, which means we\n\t// create a derived that we can write to locally.\n\t// Or we are in legacy mode where we always create a derived to replicate that\n\t// Svelte 4 did not trigger updates when a primitive value was updated to the same value.\n\tvar overridden = false;\n\n\tvar d = ((flags & PROPS_IS_IMMUTABLE) !== 0 ? derived : derived_safe_equal)(() => {\n\t\toverridden = false;\n\t\treturn getter();\n\t});\n\n\tif (DEV) {\n\t\td.label = key;\n\t}\n\n\t// Capture the initial value if it's bindable\n\tif (bindable) get(d);\n\n\tvar parent_effect = /** @type {Effect} */ (active_effect);\n\n\treturn /** @type {() => V} */ (\n\t\tfunction (/** @type {any} */ value, /** @type {boolean} */ mutation) {\n\t\t\tif (arguments.length > 0) {\n\t\t\t\tconst new_value = mutation ? get(d) : runes && bindable ? proxy(value) : value;\n\n\t\t\t\tset(d, new_value);\n\t\t\t\toverridden = true;\n\n\t\t\t\tif (fallback_value !== undefined) {\n\t\t\t\t\tfallback_value = new_value;\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\t// special case  avoid recalculating the derived if we're in a\n\t\t\t// teardown function and the prop was overridden locally, or the\n\t\t\t// component was already destroyed (this latter part is necessary\n\t\t\t// because `bind:this` can read props after the component has\n\t\t\t// been destroyed. TODO simplify `bind:this`\n\t\t\tif ((is_destroying_effect && overridden) || (parent_effect.f & DESTROYED) !== 0) {\n\t\t\t\treturn d.v;\n\t\t\t}\n\n\t\t\treturn get(d);\n\t\t}\n\t);\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we dont ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnt worried about live collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// dont; wed rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default x => () => x;\n","export default function DragEvent(type, {\n  sourceEvent,\n  subject,\n  target,\n  identifier,\n  active,\n  x, y, dx, dy,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    subject: {value: subject, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    identifier: {value: identifier, enumerable: true, configurable: true},\n    active: {value: active, enumerable: true, configurable: true},\n    x: {value: x, enumerable: true, configurable: true},\n    y: {value: y, enumerable: true, configurable: true},\n    dx: {value: dx, enumerable: true, configurable: true},\n    dy: {value: dy, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {dispatch} from \"d3-dispatch\";\nimport {select, pointer} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nonpassive, nonpassivecapture, nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(event, d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved, nonpassive)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned(event, d) {\n    if (touchending || !filter.call(this, event, d)) return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture) return;\n    select(event.view)\n      .on(\"mousemove.drag\", mousemoved, nonpassivecapture)\n      .on(\"mouseup.drag\", mouseupped, nonpassivecapture);\n    nodrag(event.view);\n    nopropagation(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n\n  function mousemoved(event) {\n    noevent(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent(event);\n    gestures.mouse(\"end\", event);\n  }\n\n  function touchstarted(event, d) {\n    if (!filter.call(this, event, d)) return;\n    var touches = event.changedTouches,\n        c = container.call(this, event, d),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchmoved(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchended(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n\n  function beforestart(that, container, event, d, identifier, touch) {\n    var dispatch = listeners.copy(),\n        p = pointer(touch || event, container), dx, dy,\n        s;\n\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n        sourceEvent: event,\n        target: drag,\n        identifier,\n        active,\n        x: p[0],\n        y: p[1],\n        dx: 0,\n        dy: 0,\n        dispatch\n      }), d)) == null) return;\n\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n\n    return function gesture(type, event, touch) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[identifier] = gesture, n = active++; break;\n        case \"end\": delete gestures[identifier], --active; // falls through\n        case \"drag\": p = pointer(touch || event, container), n = active; break;\n      }\n      dispatch.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event,\n          subject: s,\n          target: drag,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch\n        }),\n        d\n      );\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0  u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","export default x => () => x;\n","export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event wont trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n","import { drag } from 'd3-drag';\nimport { select, pointer } from 'd3-selection';\nimport { zoom, zoomIdentity, zoomTransform } from 'd3-zoom';\nimport { interpolateZoom, interpolate } from 'd3-interpolate';\n\nconst errorMessages = {\n    error001: () => '[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001',\n    error002: () => \"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.\",\n    error003: (nodeType) => `Node type \"${nodeType}\" not found. Using fallback type \"default\".`,\n    error004: () => 'The React Flow parent container needs a width and a height to render the graph.',\n    error005: () => 'Only child nodes can use a parent extent.',\n    error006: () => \"Can't create edge. An edge needs a source and a target.\",\n    error007: (id) => `The old edge with id=${id} does not exist.`,\n    error009: (type) => `Marker type \"${type}\" doesn't exist.`,\n    error008: (handleType, { id, sourceHandle, targetHandle }) => `Couldn't create edge for ${handleType} handle id: \"${handleType === 'source' ? sourceHandle : targetHandle}\", edge id: ${id}.`,\n    error010: () => 'Handle: No node id found. Make sure to only use a Handle inside a custom Node.',\n    error011: (edgeType) => `Edge type \"${edgeType}\" not found. Using fallback type \"default\".`,\n    error012: (id) => `Node with id \"${id}\" does not exist, it may have been removed. This can happen when a node is deleted before the \"onNodeClick\" handler is called.`,\n    error013: (lib = 'react') => `It seems that you haven't loaded the styles. Please import '@xyflow/${lib}/dist/style.css' or base.css to make sure everything is working properly.`,\n    error014: () => 'useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.',\n    error015: () => 'It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs.',\n};\nconst infiniteExtent = [\n    [Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY],\n    [Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY],\n];\nconst elementSelectionKeys = ['Enter', ' ', 'Escape'];\nconst defaultAriaLabelConfig = {\n    'node.a11yDescription.default': 'Press enter or space to select a node. Press delete to remove it and escape to cancel.',\n    'node.a11yDescription.keyboardDisabled': 'Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.',\n    'node.a11yDescription.ariaLiveMessage': ({ direction, x, y }) => `Moved selected node ${direction}. New position, x: ${x}, y: ${y}`,\n    'edge.a11yDescription.default': 'Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.',\n    // Control elements\n    'controls.ariaLabel': 'Control Panel',\n    'controls.zoomIn.ariaLabel': 'Zoom In',\n    'controls.zoomOut.ariaLabel': 'Zoom Out',\n    'controls.fitView.ariaLabel': 'Fit View',\n    'controls.interactive.ariaLabel': 'Toggle Interactivity',\n    // Mini map\n    'minimap.ariaLabel': 'Mini Map',\n    // Handle\n    'handle.ariaLabel': 'Handle',\n};\n\n/**\n * The `ConnectionMode` is used to set the mode of connection between nodes.\n * The `Strict` mode is the default one and only allows source to target edges.\n * `Loose` mode allows source to source and target to target edges as well.\n *\n * @public\n */\nvar ConnectionMode;\n(function (ConnectionMode) {\n    ConnectionMode[\"Strict\"] = \"strict\";\n    ConnectionMode[\"Loose\"] = \"loose\";\n})(ConnectionMode || (ConnectionMode = {}));\n/**\n * This enum is used to set the different modes of panning the viewport when the\n * user scrolls. The `Free` mode allows the user to pan in any direction by scrolling\n * with a device like a trackpad. The `Vertical` and `Horizontal` modes restrict\n * scroll panning to only the vertical or horizontal axis, respectively.\n *\n * @public\n */\nvar PanOnScrollMode;\n(function (PanOnScrollMode) {\n    PanOnScrollMode[\"Free\"] = \"free\";\n    PanOnScrollMode[\"Vertical\"] = \"vertical\";\n    PanOnScrollMode[\"Horizontal\"] = \"horizontal\";\n})(PanOnScrollMode || (PanOnScrollMode = {}));\nvar SelectionMode;\n(function (SelectionMode) {\n    SelectionMode[\"Partial\"] = \"partial\";\n    SelectionMode[\"Full\"] = \"full\";\n})(SelectionMode || (SelectionMode = {}));\nconst initialConnection = {\n    inProgress: false,\n    isValid: null,\n    from: null,\n    fromHandle: null,\n    fromPosition: null,\n    fromNode: null,\n    to: null,\n    toHandle: null,\n    toPosition: null,\n    toNode: null,\n};\n\n/**\n * If you set the `connectionLineType` prop on your [`<ReactFlow />`](/api-reference/react-flow#connection-connectionLineType)\n *component, it will dictate the style of connection line rendered when creating\n *new edges.\n *\n * @public\n *\n * @remarks If you choose to render a custom connection line component, this value will be\n *passed to your component as part of its [`ConnectionLineComponentProps`](/api-reference/types/connection-line-component-props).\n */\nvar ConnectionLineType;\n(function (ConnectionLineType) {\n    ConnectionLineType[\"Bezier\"] = \"default\";\n    ConnectionLineType[\"Straight\"] = \"straight\";\n    ConnectionLineType[\"Step\"] = \"step\";\n    ConnectionLineType[\"SmoothStep\"] = \"smoothstep\";\n    ConnectionLineType[\"SimpleBezier\"] = \"simplebezier\";\n})(ConnectionLineType || (ConnectionLineType = {}));\n/**\n * Edges may optionally have a marker on either end. The MarkerType type enumerates\n * the options available to you when configuring a given marker.\n *\n * @public\n */\nvar MarkerType;\n(function (MarkerType) {\n    MarkerType[\"Arrow\"] = \"arrow\";\n    MarkerType[\"ArrowClosed\"] = \"arrowclosed\";\n})(MarkerType || (MarkerType = {}));\n\n/**\n * While [`PanelPosition`](/api-reference/types/panel-position) can be used to place a\n * component in the corners of a container, the `Position` enum is less precise and used\n * primarily in relation to edges and handles.\n *\n * @public\n */\nvar Position;\n(function (Position) {\n    Position[\"Left\"] = \"left\";\n    Position[\"Top\"] = \"top\";\n    Position[\"Right\"] = \"right\";\n    Position[\"Bottom\"] = \"bottom\";\n})(Position || (Position = {}));\nconst oppositePosition = {\n    [Position.Left]: Position.Right,\n    [Position.Right]: Position.Left,\n    [Position.Top]: Position.Bottom,\n    [Position.Bottom]: Position.Top,\n};\n\n/**\n * @internal\n */\nfunction areConnectionMapsEqual(a, b) {\n    if (!a && !b) {\n        return true;\n    }\n    if (!a || !b || a.size !== b.size) {\n        return false;\n    }\n    if (!a.size && !b.size) {\n        return true;\n    }\n    for (const key of a.keys()) {\n        if (!b.has(key)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * We call the callback for all connections in a that are not in b\n *\n * @internal\n */\nfunction handleConnectionChange(a, b, cb) {\n    if (!cb) {\n        return;\n    }\n    const diff = [];\n    a.forEach((connection, key) => {\n        if (!b?.has(key)) {\n            diff.push(connection);\n        }\n    });\n    if (diff.length) {\n        cb(diff);\n    }\n}\nfunction getConnectionStatus(isValid) {\n    return isValid === null ? null : isValid ? 'valid' : 'invalid';\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Test whether an object is usable as an Edge\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Edge if it returns true\n * @param element - The element to test\n * @returns A boolean indicating whether the element is an Edge\n */\nconst isEdgeBase = (element) => 'id' in element && 'source' in element && 'target' in element;\n/**\n * Test whether an object is usable as a Node\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Node if it returns true\n * @param element - The element to test\n * @returns A boolean indicating whether the element is an Node\n */\nconst isNodeBase = (element) => 'id' in element && 'position' in element && !('source' in element) && !('target' in element);\nconst isInternalNodeBase = (element) => 'id' in element && 'internals' in element && !('source' in element) && !('target' in element);\n/**\n * This util is used to tell you what nodes, if any, are connected to the given node\n * as the _target_ of an edge.\n * @public\n * @param node - The node to get the connected nodes from.\n * @param nodes - The array of all nodes.\n * @param edges - The array of all edges.\n * @returns An array of nodes that are connected over edges where the source is the given node.\n *\n * @example\n * ```ts\n *import { getOutgoers } from '@xyflow/react';\n *\n *const nodes = [];\n *const edges = [];\n *\n *const outgoers = getOutgoers(\n *  { id: '1', position: { x: 0, y: 0 }, data: { label: 'node' } },\n *  nodes,\n *  edges,\n *);\n *```\n */\nconst getOutgoers = (node, nodes, edges) => {\n    if (!node.id) {\n        return [];\n    }\n    const outgoerIds = new Set();\n    edges.forEach((edge) => {\n        if (edge.source === node.id) {\n            outgoerIds.add(edge.target);\n        }\n    });\n    return nodes.filter((n) => outgoerIds.has(n.id));\n};\n/**\n * This util is used to tell you what nodes, if any, are connected to the given node\n * as the _source_ of an edge.\n * @public\n * @param node - The node to get the connected nodes from.\n * @param nodes - The array of all nodes.\n * @param edges - The array of all edges.\n * @returns An array of nodes that are connected over edges where the target is the given node.\n *\n * @example\n * ```ts\n *import { getIncomers } from '@xyflow/react';\n *\n *const nodes = [];\n *const edges = [];\n *\n *const incomers = getIncomers(\n *  { id: '1', position: { x: 0, y: 0 }, data: { label: 'node' } },\n *  nodes,\n *  edges,\n *);\n *```\n */\nconst getIncomers = (node, nodes, edges) => {\n    if (!node.id) {\n        return [];\n    }\n    const incomersIds = new Set();\n    edges.forEach((edge) => {\n        if (edge.target === node.id) {\n            incomersIds.add(edge.source);\n        }\n    });\n    return nodes.filter((n) => incomersIds.has(n.id));\n};\nconst getNodePositionWithOrigin = (node, nodeOrigin = [0, 0]) => {\n    const { width, height } = getNodeDimensions(node);\n    const origin = node.origin ?? nodeOrigin;\n    const offsetX = width * origin[0];\n    const offsetY = height * origin[1];\n    return {\n        x: node.position.x - offsetX,\n        y: node.position.y - offsetY,\n    };\n};\n/**\n * Returns the bounding box that contains all the given nodes in an array. This can\n * be useful when combined with [`getViewportForBounds`](/api-reference/utils/get-viewport-for-bounds)\n * to calculate the correct transform to fit the given nodes in a viewport.\n * @public\n * @remarks Useful when combined with {@link getViewportForBounds} to calculate the correct transform to fit the given nodes in a viewport.\n * @param nodes - Nodes to calculate the bounds for.\n * @returns Bounding box enclosing all nodes.\n *\n * @remarks This function was previously called `getRectOfNodes`\n *\n * @example\n * ```js\n *import { getNodesBounds } from '@xyflow/react';\n *\n *const nodes = [\n *  {\n *    id: 'a',\n *    position: { x: 0, y: 0 },\n *    data: { label: 'a' },\n *    width: 50,\n *    height: 25,\n *  },\n *  {\n *    id: 'b',\n *    position: { x: 100, y: 100 },\n *    data: { label: 'b' },\n *    width: 50,\n *    height: 25,\n *  },\n *];\n *\n *const bounds = getNodesBounds(nodes);\n *```\n */\nconst getNodesBounds = (nodes, params = { nodeOrigin: [0, 0] }) => {\n    if (process.env.NODE_ENV === 'development' && !params.nodeLookup) {\n        console.warn('Please use `getNodesBounds` from `useReactFlow`/`useSvelteFlow` hook to ensure correct values for sub flows. If not possible, you have to provide a nodeLookup to support sub flows.');\n    }\n    if (nodes.length === 0) {\n        return { x: 0, y: 0, width: 0, height: 0 };\n    }\n    const box = nodes.reduce((currBox, nodeOrId) => {\n        const isId = typeof nodeOrId === 'string';\n        let currentNode = !params.nodeLookup && !isId ? nodeOrId : undefined;\n        if (params.nodeLookup) {\n            currentNode = isId\n                ? params.nodeLookup.get(nodeOrId)\n                : !isInternalNodeBase(nodeOrId)\n                    ? params.nodeLookup.get(nodeOrId.id)\n                    : nodeOrId;\n        }\n        const nodeBox = currentNode ? nodeToBox(currentNode, params.nodeOrigin) : { x: 0, y: 0, x2: 0, y2: 0 };\n        return getBoundsOfBoxes(currBox, nodeBox);\n    }, { x: Infinity, y: Infinity, x2: -Infinity, y2: -Infinity });\n    return boxToRect(box);\n};\n/**\n * Determines a bounding box that contains all given nodes in an array\n * @internal\n */\nconst getInternalNodesBounds = (nodeLookup, params = {}) => {\n    if (nodeLookup.size === 0) {\n        return { x: 0, y: 0, width: 0, height: 0 };\n    }\n    let box = { x: Infinity, y: Infinity, x2: -Infinity, y2: -Infinity };\n    nodeLookup.forEach((node) => {\n        if (params.filter === undefined || params.filter(node)) {\n            const nodeBox = nodeToBox(node);\n            box = getBoundsOfBoxes(box, nodeBox);\n        }\n    });\n    return boxToRect(box);\n};\nconst getNodesInside = (nodes, rect, [tx, ty, tScale] = [0, 0, 1], partially = false, \n// set excludeNonSelectableNodes if you want to pay attention to the nodes \"selectable\" attribute\nexcludeNonSelectableNodes = false) => {\n    const paneRect = {\n        ...pointToRendererPoint(rect, [tx, ty, tScale]),\n        width: rect.width / tScale,\n        height: rect.height / tScale,\n    };\n    const visibleNodes = [];\n    for (const node of nodes.values()) {\n        const { measured, selectable = true, hidden = false } = node;\n        if ((excludeNonSelectableNodes && !selectable) || hidden) {\n            continue;\n        }\n        const width = measured.width ?? node.width ?? node.initialWidth ?? null;\n        const height = measured.height ?? node.height ?? node.initialHeight ?? null;\n        const overlappingArea = getOverlappingArea(paneRect, nodeToRect(node));\n        const area = (width ?? 0) * (height ?? 0);\n        const partiallyVisible = partially && overlappingArea > 0;\n        const forceInitialRender = !node.internals.handleBounds;\n        const isVisible = forceInitialRender || partiallyVisible || overlappingArea >= area;\n        if (isVisible || node.dragging) {\n            visibleNodes.push(node);\n        }\n    }\n    return visibleNodes;\n};\n/**\n * This utility filters an array of edges, keeping only those where either the source or target\n * node is present in the given array of nodes.\n * @public\n * @param nodes - Nodes you want to get the connected edges for.\n * @param edges - All edges.\n * @returns Array of edges that connect any of the given nodes with each other.\n *\n * @example\n * ```js\n *import { getConnectedEdges } from '@xyflow/react';\n *\n *const nodes = [\n *  { id: 'a', position: { x: 0, y: 0 } },\n *  { id: 'b', position: { x: 100, y: 0 } },\n *];\n *\n *const edges = [\n *  { id: 'a->c', source: 'a', target: 'c' },\n *  { id: 'c->d', source: 'c', target: 'd' },\n *];\n *\n *const connectedEdges = getConnectedEdges(nodes, edges);\n * // => [{ id: 'a->c', source: 'a', target: 'c' }]\n *```\n */\nconst getConnectedEdges = (nodes, edges) => {\n    const nodeIds = new Set();\n    nodes.forEach((node) => {\n        nodeIds.add(node.id);\n    });\n    return edges.filter((edge) => nodeIds.has(edge.source) || nodeIds.has(edge.target));\n};\nfunction getFitViewNodes(nodeLookup, options) {\n    const fitViewNodes = new Map();\n    const optionNodeIds = options?.nodes ? new Set(options.nodes.map((node) => node.id)) : null;\n    nodeLookup.forEach((n) => {\n        const isVisible = n.measured.width && n.measured.height && (options?.includeHiddenNodes || !n.hidden);\n        if (isVisible && (!optionNodeIds || optionNodeIds.has(n.id))) {\n            fitViewNodes.set(n.id, n);\n        }\n    });\n    return fitViewNodes;\n}\nasync function fitViewport({ nodes, width, height, panZoom, minZoom, maxZoom }, options) {\n    if (nodes.size === 0) {\n        return Promise.resolve(true);\n    }\n    const nodesToFit = getFitViewNodes(nodes, options);\n    const bounds = getInternalNodesBounds(nodesToFit);\n    const viewport = getViewportForBounds(bounds, width, height, options?.minZoom ?? minZoom, options?.maxZoom ?? maxZoom, options?.padding ?? 0.1);\n    await panZoom.setViewport(viewport, {\n        duration: options?.duration,\n        ease: options?.ease,\n        interpolate: options?.interpolate,\n    });\n    return Promise.resolve(true);\n}\n/**\n * This function calculates the next position of a node, taking into account the node's extent, parent node, and origin.\n *\n * @internal\n * @returns position, positionAbsolute\n */\nfunction calculateNodePosition({ nodeId, nextPosition, nodeLookup, nodeOrigin = [0, 0], nodeExtent, onError, }) {\n    const node = nodeLookup.get(nodeId);\n    const parentNode = node.parentId ? nodeLookup.get(node.parentId) : undefined;\n    const { x: parentX, y: parentY } = parentNode ? parentNode.internals.positionAbsolute : { x: 0, y: 0 };\n    const origin = node.origin ?? nodeOrigin;\n    let extent = node.extent || nodeExtent;\n    if (node.extent === 'parent' && !node.expandParent) {\n        if (!parentNode) {\n            onError?.('005', errorMessages['error005']());\n        }\n        else {\n            const parentWidth = parentNode.measured.width;\n            const parentHeight = parentNode.measured.height;\n            if (parentWidth && parentHeight) {\n                extent = [\n                    [parentX, parentY],\n                    [parentX + parentWidth, parentY + parentHeight],\n                ];\n            }\n        }\n    }\n    else if (parentNode && isCoordinateExtent(node.extent)) {\n        extent = [\n            [node.extent[0][0] + parentX, node.extent[0][1] + parentY],\n            [node.extent[1][0] + parentX, node.extent[1][1] + parentY],\n        ];\n    }\n    const positionAbsolute = isCoordinateExtent(extent)\n        ? clampPosition(nextPosition, extent, node.measured)\n        : nextPosition;\n    if (node.measured.width === undefined || node.measured.height === undefined) {\n        onError?.('015', errorMessages['error015']());\n    }\n    return {\n        position: {\n            x: positionAbsolute.x - parentX + (node.measured.width ?? 0) * origin[0],\n            y: positionAbsolute.y - parentY + (node.measured.height ?? 0) * origin[1],\n        },\n        positionAbsolute,\n    };\n}\n/**\n * Pass in nodes & edges to delete, get arrays of nodes and edges that actually can be deleted\n * @internal\n * @param param.nodesToRemove - The nodes to remove\n * @param param.edgesToRemove - The edges to remove\n * @param param.nodes - All nodes\n * @param param.edges - All edges\n * @param param.onBeforeDelete - Callback to check which nodes and edges can be deleted\n * @returns nodes: nodes that can be deleted, edges: edges that can be deleted\n */\nasync function getElementsToRemove({ nodesToRemove = [], edgesToRemove = [], nodes, edges, onBeforeDelete, }) {\n    const nodeIds = new Set(nodesToRemove.map((node) => node.id));\n    const matchingNodes = [];\n    for (const node of nodes) {\n        if (node.deletable === false) {\n            continue;\n        }\n        const isIncluded = nodeIds.has(node.id);\n        const parentHit = !isIncluded && node.parentId && matchingNodes.find((n) => n.id === node.parentId);\n        if (isIncluded || parentHit) {\n            matchingNodes.push(node);\n        }\n    }\n    const edgeIds = new Set(edgesToRemove.map((edge) => edge.id));\n    const deletableEdges = edges.filter((edge) => edge.deletable !== false);\n    const connectedEdges = getConnectedEdges(matchingNodes, deletableEdges);\n    const matchingEdges = connectedEdges;\n    for (const edge of deletableEdges) {\n        const isIncluded = edgeIds.has(edge.id);\n        if (isIncluded && !matchingEdges.find((e) => e.id === edge.id)) {\n            matchingEdges.push(edge);\n        }\n    }\n    if (!onBeforeDelete) {\n        return {\n            edges: matchingEdges,\n            nodes: matchingNodes,\n        };\n    }\n    const onBeforeDeleteResult = await onBeforeDelete({\n        nodes: matchingNodes,\n        edges: matchingEdges,\n    });\n    if (typeof onBeforeDeleteResult === 'boolean') {\n        return onBeforeDeleteResult ? { edges: matchingEdges, nodes: matchingNodes } : { edges: [], nodes: [] };\n    }\n    return onBeforeDeleteResult;\n}\n\nconst clamp = (val, min = 0, max = 1) => Math.min(Math.max(val, min), max);\nconst clampPosition = (position = { x: 0, y: 0 }, extent, dimensions) => ({\n    x: clamp(position.x, extent[0][0], extent[1][0] - (dimensions?.width ?? 0)),\n    y: clamp(position.y, extent[0][1], extent[1][1] - (dimensions?.height ?? 0)),\n});\nfunction clampPositionToParent(childPosition, childDimensions, parent) {\n    const { width: parentWidth, height: parentHeight } = getNodeDimensions(parent);\n    const { x: parentX, y: parentY } = parent.internals.positionAbsolute;\n    return clampPosition(childPosition, [\n        [parentX, parentY],\n        [parentX + parentWidth, parentY + parentHeight],\n    ], childDimensions);\n}\n/**\n * Calculates the velocity of panning when the mouse is close to the edge of the canvas\n * @internal\n * @param value - One dimensional poition of the mouse (x or y)\n * @param min - Minimal position on canvas before panning starts\n * @param max - Maximal position on canvas before panning starts\n * @returns - A number between 0 and 1 that represents the velocity of panning\n */\nconst calcAutoPanVelocity = (value, min, max) => {\n    if (value < min) {\n        return clamp(Math.abs(value - min), 1, min) / min;\n    }\n    else if (value > max) {\n        return -clamp(Math.abs(value - max), 1, min) / min;\n    }\n    return 0;\n};\nconst calcAutoPan = (pos, bounds, speed = 15, distance = 40) => {\n    const xMovement = calcAutoPanVelocity(pos.x, distance, bounds.width - distance) * speed;\n    const yMovement = calcAutoPanVelocity(pos.y, distance, bounds.height - distance) * speed;\n    return [xMovement, yMovement];\n};\nconst getBoundsOfBoxes = (box1, box2) => ({\n    x: Math.min(box1.x, box2.x),\n    y: Math.min(box1.y, box2.y),\n    x2: Math.max(box1.x2, box2.x2),\n    y2: Math.max(box1.y2, box2.y2),\n});\nconst rectToBox = ({ x, y, width, height }) => ({\n    x,\n    y,\n    x2: x + width,\n    y2: y + height,\n});\nconst boxToRect = ({ x, y, x2, y2 }) => ({\n    x,\n    y,\n    width: x2 - x,\n    height: y2 - y,\n});\nconst nodeToRect = (node, nodeOrigin = [0, 0]) => {\n    const { x, y } = isInternalNodeBase(node)\n        ? node.internals.positionAbsolute\n        : getNodePositionWithOrigin(node, nodeOrigin);\n    return {\n        x,\n        y,\n        width: node.measured?.width ?? node.width ?? node.initialWidth ?? 0,\n        height: node.measured?.height ?? node.height ?? node.initialHeight ?? 0,\n    };\n};\nconst nodeToBox = (node, nodeOrigin = [0, 0]) => {\n    const { x, y } = isInternalNodeBase(node)\n        ? node.internals.positionAbsolute\n        : getNodePositionWithOrigin(node, nodeOrigin);\n    return {\n        x,\n        y,\n        x2: x + (node.measured?.width ?? node.width ?? node.initialWidth ?? 0),\n        y2: y + (node.measured?.height ?? node.height ?? node.initialHeight ?? 0),\n    };\n};\nconst getBoundsOfRects = (rect1, rect2) => boxToRect(getBoundsOfBoxes(rectToBox(rect1), rectToBox(rect2)));\nconst getOverlappingArea = (rectA, rectB) => {\n    const xOverlap = Math.max(0, Math.min(rectA.x + rectA.width, rectB.x + rectB.width) - Math.max(rectA.x, rectB.x));\n    const yOverlap = Math.max(0, Math.min(rectA.y + rectA.height, rectB.y + rectB.height) - Math.max(rectA.y, rectB.y));\n    return Math.ceil(xOverlap * yOverlap);\n};\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst isRectObject = (obj) => isNumeric(obj.width) && isNumeric(obj.height) && isNumeric(obj.x) && isNumeric(obj.y);\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\nconst isNumeric = (n) => !isNaN(n) && isFinite(n);\n// used for a11y key board controls for nodes and edges\nconst devWarn = (id, message) => {\n    if (process.env.NODE_ENV === 'development') {\n        console.warn(`[React Flow]: ${message} Help: https://reactflow.dev/error#${id}`);\n    }\n};\nconst snapPosition = (position, snapGrid = [1, 1]) => {\n    return {\n        x: snapGrid[0] * Math.round(position.x / snapGrid[0]),\n        y: snapGrid[1] * Math.round(position.y / snapGrid[1]),\n    };\n};\nconst pointToRendererPoint = ({ x, y }, [tx, ty, tScale], snapToGrid = false, snapGrid = [1, 1]) => {\n    const position = {\n        x: (x - tx) / tScale,\n        y: (y - ty) / tScale,\n    };\n    return snapToGrid ? snapPosition(position, snapGrid) : position;\n};\nconst rendererPointToPoint = ({ x, y }, [tx, ty, tScale]) => {\n    return {\n        x: x * tScale + tx,\n        y: y * tScale + ty,\n    };\n};\n/**\n * Parses a single padding value to a number\n * @internal\n * @param padding - Padding to parse\n * @param viewport - Width or height of the viewport\n * @returns The padding in pixels\n */\nfunction parsePadding(padding, viewport) {\n    if (typeof padding === 'number') {\n        return Math.floor((viewport - viewport / (1 + padding)) * 0.5);\n    }\n    if (typeof padding === 'string' && padding.endsWith('px')) {\n        const paddingValue = parseFloat(padding);\n        if (!Number.isNaN(paddingValue)) {\n            return Math.floor(paddingValue);\n        }\n    }\n    if (typeof padding === 'string' && padding.endsWith('%')) {\n        const paddingValue = parseFloat(padding);\n        if (!Number.isNaN(paddingValue)) {\n            return Math.floor(viewport * paddingValue * 0.01);\n        }\n    }\n    console.error(`[React Flow] The padding value \"${padding}\" is invalid. Please provide a number or a string with a valid unit (px or %).`);\n    return 0;\n}\n/**\n * Parses the paddings to an object with top, right, bottom, left, x and y paddings\n * @internal\n * @param padding - Padding to parse\n * @param width - Width of the viewport\n * @param height - Height of the viewport\n * @returns An object with the paddings in pixels\n */\nfunction parsePaddings(padding, width, height) {\n    if (typeof padding === 'string' || typeof padding === 'number') {\n        const paddingY = parsePadding(padding, height);\n        const paddingX = parsePadding(padding, width);\n        return {\n            top: paddingY,\n            right: paddingX,\n            bottom: paddingY,\n            left: paddingX,\n            x: paddingX * 2,\n            y: paddingY * 2,\n        };\n    }\n    if (typeof padding === 'object') {\n        const top = parsePadding(padding.top ?? padding.y ?? 0, height);\n        const bottom = parsePadding(padding.bottom ?? padding.y ?? 0, height);\n        const left = parsePadding(padding.left ?? padding.x ?? 0, width);\n        const right = parsePadding(padding.right ?? padding.x ?? 0, width);\n        return { top, right, bottom, left, x: left + right, y: top + bottom };\n    }\n    return { top: 0, right: 0, bottom: 0, left: 0, x: 0, y: 0 };\n}\n/**\n * Calculates the resulting paddings if the new viewport is applied\n * @internal\n * @param bounds - Bounds to fit inside viewport\n * @param x - X position of the viewport\n * @param y - Y position of the viewport\n * @param zoom - Zoom level of the viewport\n * @param width - Width of the viewport\n * @param height - Height of the viewport\n * @returns An object with the minimum padding required to fit the bounds inside the viewport\n */\nfunction calculateAppliedPaddings(bounds, x, y, zoom, width, height) {\n    const { x: left, y: top } = rendererPointToPoint(bounds, [x, y, zoom]);\n    const { x: boundRight, y: boundBottom } = rendererPointToPoint({ x: bounds.x + bounds.width, y: bounds.y + bounds.height }, [x, y, zoom]);\n    const right = width - boundRight;\n    const bottom = height - boundBottom;\n    return {\n        left: Math.floor(left),\n        top: Math.floor(top),\n        right: Math.floor(right),\n        bottom: Math.floor(bottom),\n    };\n}\n/**\n * Returns a viewport that encloses the given bounds with padding.\n * @public\n * @remarks You can determine bounds of nodes with {@link getNodesBounds} and {@link getBoundsOfRects}\n * @param bounds - Bounds to fit inside viewport.\n * @param width - Width of the viewport.\n * @param height  - Height of the viewport.\n * @param minZoom - Minimum zoom level of the resulting viewport.\n * @param maxZoom - Maximum zoom level of the resulting viewport.\n * @param padding - Padding around the bounds.\n * @returns A transformed {@link Viewport} that encloses the given bounds which you can pass to e.g. {@link setViewport}.\n * @example\n * const { x, y, zoom } = getViewportForBounds(\n * { x: 0, y: 0, width: 100, height: 100},\n * 1200, 800, 0.5, 2);\n */\nconst getViewportForBounds = (bounds, width, height, minZoom, maxZoom, padding) => {\n    // First we resolve all the paddings to actual pixel values\n    const p = parsePaddings(padding, width, height);\n    const xZoom = (width - p.x) / bounds.width;\n    const yZoom = (height - p.y) / bounds.height;\n    // We calculate the new x, y, zoom for a centered view\n    const zoom = Math.min(xZoom, yZoom);\n    const clampedZoom = clamp(zoom, minZoom, maxZoom);\n    const boundsCenterX = bounds.x + bounds.width / 2;\n    const boundsCenterY = bounds.y + bounds.height / 2;\n    const x = width / 2 - boundsCenterX * clampedZoom;\n    const y = height / 2 - boundsCenterY * clampedZoom;\n    // Then we calculate the minimum padding, to respect asymmetric paddings\n    const newPadding = calculateAppliedPaddings(bounds, x, y, clampedZoom, width, height);\n    // We only want to have an offset if the newPadding is smaller than the required padding\n    const offset = {\n        left: Math.min(newPadding.left - p.left, 0),\n        top: Math.min(newPadding.top - p.top, 0),\n        right: Math.min(newPadding.right - p.right, 0),\n        bottom: Math.min(newPadding.bottom - p.bottom, 0),\n    };\n    return {\n        x: x - offset.left + offset.right,\n        y: y - offset.top + offset.bottom,\n        zoom: clampedZoom,\n    };\n};\nconst isMacOs = () => typeof navigator !== 'undefined' && navigator?.userAgent?.indexOf('Mac') >= 0;\nfunction isCoordinateExtent(extent) {\n    return extent !== undefined && extent !== null && extent !== 'parent';\n}\nfunction getNodeDimensions(node) {\n    return {\n        width: node.measured?.width ?? node.width ?? node.initialWidth ?? 0,\n        height: node.measured?.height ?? node.height ?? node.initialHeight ?? 0,\n    };\n}\nfunction nodeHasDimensions(node) {\n    return ((node.measured?.width ?? node.width ?? node.initialWidth) !== undefined &&\n        (node.measured?.height ?? node.height ?? node.initialHeight) !== undefined);\n}\n/**\n * Convert child position to aboslute position\n *\n * @internal\n * @param position\n * @param parentId\n * @param nodeLookup\n * @param nodeOrigin\n * @returns an internal node with an absolute position\n */\nfunction evaluateAbsolutePosition(position, dimensions = { width: 0, height: 0 }, parentId, nodeLookup, nodeOrigin) {\n    const positionAbsolute = { ...position };\n    const parent = nodeLookup.get(parentId);\n    if (parent) {\n        const origin = parent.origin || nodeOrigin;\n        positionAbsolute.x += parent.internals.positionAbsolute.x - (dimensions.width ?? 0) * origin[0];\n        positionAbsolute.y += parent.internals.positionAbsolute.y - (dimensions.height ?? 0) * origin[1];\n    }\n    return positionAbsolute;\n}\nfunction areSetsEqual(a, b) {\n    if (a.size !== b.size) {\n        return false;\n    }\n    for (const item of a) {\n        if (!b.has(item)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Polyfill for Promise.withResolvers until we can use it in all browsers\n * @internal\n */\nfunction withResolvers() {\n    let resolve;\n    let reject;\n    const promise = new Promise((res, rej) => {\n        resolve = res;\n        reject = rej;\n    });\n    return { promise, resolve, reject };\n}\nfunction mergeAriaLabelConfig(partial) {\n    return { ...defaultAriaLabelConfig, ...(partial || {}) };\n}\n\nfunction getPointerPosition(event, { snapGrid = [0, 0], snapToGrid = false, transform, containerBounds }) {\n    const { x, y } = getEventPosition(event);\n    const pointerPos = pointToRendererPoint({ x: x - (containerBounds?.left ?? 0), y: y - (containerBounds?.top ?? 0) }, transform);\n    const { x: xSnapped, y: ySnapped } = snapToGrid ? snapPosition(pointerPos, snapGrid) : pointerPos;\n    // we need the snapped position in order to be able to skip unnecessary drag events\n    return {\n        xSnapped,\n        ySnapped,\n        ...pointerPos,\n    };\n}\nconst getDimensions = (node) => ({\n    width: node.offsetWidth,\n    height: node.offsetHeight,\n});\nconst getHostForElement = (element) => element?.getRootNode?.() || window?.document;\nconst inputTags = ['INPUT', 'SELECT', 'TEXTAREA'];\nfunction isInputDOMNode(event) {\n    // using composed path for handling shadow dom\n    const target = (event.composedPath?.()?.[0] || event.target);\n    if (target?.nodeType !== 1 /* Node.ELEMENT_NODE */)\n        return false;\n    const isInput = inputTags.includes(target.nodeName) || target.hasAttribute('contenteditable');\n    // when an input field is focused we don't want to trigger deletion or movement of nodes\n    return isInput || !!target.closest('.nokey');\n}\nconst isMouseEvent = (event) => 'clientX' in event;\nconst getEventPosition = (event, bounds) => {\n    const isMouse = isMouseEvent(event);\n    const evtX = isMouse ? event.clientX : event.touches?.[0].clientX;\n    const evtY = isMouse ? event.clientY : event.touches?.[0].clientY;\n    return {\n        x: evtX - (bounds?.left ?? 0),\n        y: evtY - (bounds?.top ?? 0),\n    };\n};\n/*\n * The handle bounds are calculated relative to the node element.\n * We store them in the internals object of the node in order to avoid\n * unnecessary recalculations.\n */\nconst getHandleBounds = (type, nodeElement, nodeBounds, zoom, nodeId) => {\n    const handles = nodeElement.querySelectorAll(`.${type}`);\n    if (!handles || !handles.length) {\n        return null;\n    }\n    return Array.from(handles).map((handle) => {\n        const handleBounds = handle.getBoundingClientRect();\n        return {\n            id: handle.getAttribute('data-handleid'),\n            type,\n            nodeId,\n            position: handle.getAttribute('data-handlepos'),\n            x: (handleBounds.left - nodeBounds.left) / zoom,\n            y: (handleBounds.top - nodeBounds.top) / zoom,\n            ...getDimensions(handle),\n        };\n    });\n};\n\nfunction getBezierEdgeCenter({ sourceX, sourceY, targetX, targetY, sourceControlX, sourceControlY, targetControlX, targetControlY, }) {\n    /*\n     * cubic bezier t=0.5 mid point, not the actual mid point, but easy to calculate\n     * https://stackoverflow.com/questions/67516101/how-to-find-distance-mid-point-of-bezier-curve\n     */\n    const centerX = sourceX * 0.125 + sourceControlX * 0.375 + targetControlX * 0.375 + targetX * 0.125;\n    const centerY = sourceY * 0.125 + sourceControlY * 0.375 + targetControlY * 0.375 + targetY * 0.125;\n    const offsetX = Math.abs(centerX - sourceX);\n    const offsetY = Math.abs(centerY - sourceY);\n    return [centerX, centerY, offsetX, offsetY];\n}\nfunction calculateControlOffset(distance, curvature) {\n    if (distance >= 0) {\n        return 0.5 * distance;\n    }\n    return curvature * 25 * Math.sqrt(-distance);\n}\nfunction getControlWithCurvature({ pos, x1, y1, x2, y2, c }) {\n    switch (pos) {\n        case Position.Left:\n            return [x1 - calculateControlOffset(x1 - x2, c), y1];\n        case Position.Right:\n            return [x1 + calculateControlOffset(x2 - x1, c), y1];\n        case Position.Top:\n            return [x1, y1 - calculateControlOffset(y1 - y2, c)];\n        case Position.Bottom:\n            return [x1, y1 + calculateControlOffset(y2 - y1, c)];\n    }\n}\n/**\n * The `getBezierPath` util returns everything you need to render a bezier edge\n *between two nodes.\n * @public\n * @returns A path string you can use in an SVG, the `labelX` and `labelY` position (center of path)\n * and `offsetX`, `offsetY` between source handle and label.\n * - `path`: the path to use in an SVG `<path>` element.\n * - `labelX`: the `x` position you can use to render a label for this edge.\n * - `labelY`: the `y` position you can use to render a label for this edge.\n * - `offsetX`: the absolute difference between the source `x` position and the `x` position of the\n * middle of this path.\n * - `offsetY`: the absolute difference between the source `y` position and the `y` position of the\n * middle of this path.\n * @example\n * ```js\n *  const source = { x: 0, y: 20 };\n *  const target = { x: 150, y: 100 };\n *\n *  const [path, labelX, labelY, offsetX, offsetY] = getBezierPath({\n *    sourceX: source.x,\n *    sourceY: source.y,\n *    sourcePosition: Position.Right,\n *    targetX: target.x,\n *    targetY: target.y,\n *    targetPosition: Position.Left,\n *});\n *```\n *\n * @remarks This function returns a tuple (aka a fixed-size array) to make it easier to\n *work with multiple edge paths at once.\n */\nfunction getBezierPath({ sourceX, sourceY, sourcePosition = Position.Bottom, targetX, targetY, targetPosition = Position.Top, curvature = 0.25, }) {\n    const [sourceControlX, sourceControlY] = getControlWithCurvature({\n        pos: sourcePosition,\n        x1: sourceX,\n        y1: sourceY,\n        x2: targetX,\n        y2: targetY,\n        c: curvature,\n    });\n    const [targetControlX, targetControlY] = getControlWithCurvature({\n        pos: targetPosition,\n        x1: targetX,\n        y1: targetY,\n        x2: sourceX,\n        y2: sourceY,\n        c: curvature,\n    });\n    const [labelX, labelY, offsetX, offsetY] = getBezierEdgeCenter({\n        sourceX,\n        sourceY,\n        targetX,\n        targetY,\n        sourceControlX,\n        sourceControlY,\n        targetControlX,\n        targetControlY,\n    });\n    return [\n        `M${sourceX},${sourceY} C${sourceControlX},${sourceControlY} ${targetControlX},${targetControlY} ${targetX},${targetY}`,\n        labelX,\n        labelY,\n        offsetX,\n        offsetY,\n    ];\n}\n\n// this is used for straight edges and simple smoothstep edges (LTR, RTL, BTT, TTB)\nfunction getEdgeCenter({ sourceX, sourceY, targetX, targetY, }) {\n    const xOffset = Math.abs(targetX - sourceX) / 2;\n    const centerX = targetX < sourceX ? targetX + xOffset : targetX - xOffset;\n    const yOffset = Math.abs(targetY - sourceY) / 2;\n    const centerY = targetY < sourceY ? targetY + yOffset : targetY - yOffset;\n    return [centerX, centerY, xOffset, yOffset];\n}\n/**\n * Returns the z-index for an edge based on the node it connects and whether it is selected.\n * By default, edges are rendered below nodes. This behaviour is different for edges that are\n * connected to nodes with a parent, as they are rendered above the parent node.\n */\nfunction getElevatedEdgeZIndex({ sourceNode, targetNode, selected = false, zIndex, elevateOnSelect = false, }) {\n    if (zIndex !== undefined) {\n        return zIndex;\n    }\n    const edgeZ = elevateOnSelect && selected ? 1000 : 0;\n    const nodeZ = Math.max(sourceNode.parentId ? sourceNode.internals.z : 0, targetNode.parentId ? targetNode.internals.z : 0);\n    return edgeZ + nodeZ;\n}\nfunction isEdgeVisible({ sourceNode, targetNode, width, height, transform }) {\n    const edgeBox = getBoundsOfBoxes(nodeToBox(sourceNode), nodeToBox(targetNode));\n    if (edgeBox.x === edgeBox.x2) {\n        edgeBox.x2 += 1;\n    }\n    if (edgeBox.y === edgeBox.y2) {\n        edgeBox.y2 += 1;\n    }\n    const viewRect = {\n        x: -transform[0] / transform[2],\n        y: -transform[1] / transform[2],\n        width: width / transform[2],\n        height: height / transform[2],\n    };\n    return getOverlappingArea(viewRect, boxToRect(edgeBox)) > 0;\n}\nconst getEdgeId = ({ source, sourceHandle, target, targetHandle }) => `xy-edge__${source}${sourceHandle || ''}-${target}${targetHandle || ''}`;\nconst connectionExists = (edge, edges) => {\n    return edges.some((el) => el.source === edge.source &&\n        el.target === edge.target &&\n        (el.sourceHandle === edge.sourceHandle || (!el.sourceHandle && !edge.sourceHandle)) &&\n        (el.targetHandle === edge.targetHandle || (!el.targetHandle && !edge.targetHandle)));\n};\n/**\n * This util is a convenience function to add a new Edge to an array of edges. It also performs some validation to make sure you don't add an invalid edge or duplicate an existing one.\n * @public\n * @param edgeParams - Either an `Edge` or a `Connection` you want to add.\n * @param edges - The array of all current edges.\n * @returns A new array of edges with the new edge added.\n *\n * @remarks If an edge with the same `target` and `source` already exists (and the same\n *`targetHandle` and `sourceHandle` if those are set), then this util won't add\n *a new edge even if the `id` property is different.\n *\n */\nconst addEdge = (edgeParams, edges) => {\n    if (!edgeParams.source || !edgeParams.target) {\n        devWarn('006', errorMessages['error006']());\n        return edges;\n    }\n    let edge;\n    if (isEdgeBase(edgeParams)) {\n        edge = { ...edgeParams };\n    }\n    else {\n        edge = {\n            ...edgeParams,\n            id: getEdgeId(edgeParams),\n        };\n    }\n    if (connectionExists(edge, edges)) {\n        return edges;\n    }\n    if (edge.sourceHandle === null) {\n        delete edge.sourceHandle;\n    }\n    if (edge.targetHandle === null) {\n        delete edge.targetHandle;\n    }\n    return edges.concat(edge);\n};\n/**\n * A handy utility to update an existing [`Edge`](/api-reference/types/edge) with new properties.\n *This searches your edge array for an edge with a matching `id` and updates its\n *properties with the connection you provide.\n * @public\n * @param oldEdge - The edge you want to update.\n * @param newConnection - The new connection you want to update the edge with.\n * @param edges - The array of all current edges.\n * @returns The updated edges array.\n *\n * @example\n * ```js\n *const onReconnect = useCallback(\n *  (oldEdge: Edge, newConnection: Connection) => setEdges((els) => reconnectEdge(oldEdge, newConnection, els)),[]);\n *```\n */\nconst reconnectEdge = (oldEdge, newConnection, edges, options = { shouldReplaceId: true }) => {\n    const { id: oldEdgeId, ...rest } = oldEdge;\n    if (!newConnection.source || !newConnection.target) {\n        devWarn('006', errorMessages['error006']());\n        return edges;\n    }\n    const foundEdge = edges.find((e) => e.id === oldEdge.id);\n    if (!foundEdge) {\n        devWarn('007', errorMessages['error007'](oldEdgeId));\n        return edges;\n    }\n    // Remove old edge and create the new edge with parameters of old edge.\n    const edge = {\n        ...rest,\n        id: options.shouldReplaceId ? getEdgeId(newConnection) : oldEdgeId,\n        source: newConnection.source,\n        target: newConnection.target,\n        sourceHandle: newConnection.sourceHandle,\n        targetHandle: newConnection.targetHandle,\n    };\n    return edges.filter((e) => e.id !== oldEdgeId).concat(edge);\n};\n\n/**\n * Calculates the straight line path between two points.\n * @public\n * @returns A path string you can use in an SVG, the `labelX` and `labelY` position (center of path)\n * and `offsetX`, `offsetY` between source handle and label.\n *\n * - `path`: the path to use in an SVG `<path>` element.\n * - `labelX`: the `x` position you can use to render a label for this edge.\n * - `labelY`: the `y` position you can use to render a label for this edge.\n * - `offsetX`: the absolute difference between the source `x` position and the `x` position of the\n * middle of this path.\n * - `offsetY`: the absolute difference between the source `y` position and the `y` position of the\n * middle of this path.\n * @example\n * ```js\n *  const source = { x: 0, y: 20 };\n *  const target = { x: 150, y: 100 };\n *\n *  const [path, labelX, labelY, offsetX, offsetY] = getStraightPath({\n *    sourceX: source.x,\n *    sourceY: source.y,\n *    sourcePosition: Position.Right,\n *    targetX: target.x,\n *    targetY: target.y,\n *    targetPosition: Position.Left,\n *  });\n * ```\n * @remarks This function returns a tuple (aka a fixed-size array) to make it easier to work with multiple edge paths at once.\n */\nfunction getStraightPath({ sourceX, sourceY, targetX, targetY, }) {\n    const [labelX, labelY, offsetX, offsetY] = getEdgeCenter({\n        sourceX,\n        sourceY,\n        targetX,\n        targetY,\n    });\n    return [`M ${sourceX},${sourceY}L ${targetX},${targetY}`, labelX, labelY, offsetX, offsetY];\n}\n\nconst handleDirections = {\n    [Position.Left]: { x: -1, y: 0 },\n    [Position.Right]: { x: 1, y: 0 },\n    [Position.Top]: { x: 0, y: -1 },\n    [Position.Bottom]: { x: 0, y: 1 },\n};\nconst getDirection = ({ source, sourcePosition = Position.Bottom, target, }) => {\n    if (sourcePosition === Position.Left || sourcePosition === Position.Right) {\n        return source.x < target.x ? { x: 1, y: 0 } : { x: -1, y: 0 };\n    }\n    return source.y < target.y ? { x: 0, y: 1 } : { x: 0, y: -1 };\n};\nconst distance = (a, b) => Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2));\n/*\n * With this function we try to mimic an orthogonal edge routing behaviour\n * It's not as good as a real orthogonal edge routing, but it's faster and good enough as a default for step and smooth step edges\n */\nfunction getPoints({ source, sourcePosition = Position.Bottom, target, targetPosition = Position.Top, center, offset, stepPosition, }) {\n    const sourceDir = handleDirections[sourcePosition];\n    const targetDir = handleDirections[targetPosition];\n    const sourceGapped = { x: source.x + sourceDir.x * offset, y: source.y + sourceDir.y * offset };\n    const targetGapped = { x: target.x + targetDir.x * offset, y: target.y + targetDir.y * offset };\n    const dir = getDirection({\n        source: sourceGapped,\n        sourcePosition,\n        target: targetGapped,\n    });\n    const dirAccessor = dir.x !== 0 ? 'x' : 'y';\n    const currDir = dir[dirAccessor];\n    let points = [];\n    let centerX, centerY;\n    const sourceGapOffset = { x: 0, y: 0 };\n    const targetGapOffset = { x: 0, y: 0 };\n    const [, , defaultOffsetX, defaultOffsetY] = getEdgeCenter({\n        sourceX: source.x,\n        sourceY: source.y,\n        targetX: target.x,\n        targetY: target.y,\n    });\n    // opposite handle positions, default case\n    if (sourceDir[dirAccessor] * targetDir[dirAccessor] === -1) {\n        if (dirAccessor === 'x') {\n            // Primary direction is horizontal, so stepPosition affects X coordinate\n            centerX = center.x ?? (sourceGapped.x + (targetGapped.x - sourceGapped.x) * stepPosition);\n            centerY = center.y ?? (sourceGapped.y + targetGapped.y) / 2;\n        }\n        else {\n            // Primary direction is vertical, so stepPosition affects Y coordinate  \n            centerX = center.x ?? (sourceGapped.x + targetGapped.x) / 2;\n            centerY = center.y ?? (sourceGapped.y + (targetGapped.y - sourceGapped.y) * stepPosition);\n        }\n        /*\n         *    --->\n         *    |\n         * >---\n         */\n        const verticalSplit = [\n            { x: centerX, y: sourceGapped.y },\n            { x: centerX, y: targetGapped.y },\n        ];\n        /*\n         *    |\n         *  ---\n         *  |\n         */\n        const horizontalSplit = [\n            { x: sourceGapped.x, y: centerY },\n            { x: targetGapped.x, y: centerY },\n        ];\n        if (sourceDir[dirAccessor] === currDir) {\n            points = dirAccessor === 'x' ? verticalSplit : horizontalSplit;\n        }\n        else {\n            points = dirAccessor === 'x' ? horizontalSplit : verticalSplit;\n        }\n    }\n    else {\n        // sourceTarget means we take x from source and y from target, targetSource is the opposite\n        const sourceTarget = [{ x: sourceGapped.x, y: targetGapped.y }];\n        const targetSource = [{ x: targetGapped.x, y: sourceGapped.y }];\n        // this handles edges with same handle positions\n        if (dirAccessor === 'x') {\n            points = sourceDir.x === currDir ? targetSource : sourceTarget;\n        }\n        else {\n            points = sourceDir.y === currDir ? sourceTarget : targetSource;\n        }\n        if (sourcePosition === targetPosition) {\n            const diff = Math.abs(source[dirAccessor] - target[dirAccessor]);\n            // if an edge goes from right to right for example (sourcePosition === targetPosition) and the distance between source.x and target.x is less than the offset, the added point and the gapped source/target will overlap. This leads to a weird edge path. To avoid this we add a gapOffset to the source/target\n            if (diff <= offset) {\n                const gapOffset = Math.min(offset - 1, offset - diff);\n                if (sourceDir[dirAccessor] === currDir) {\n                    sourceGapOffset[dirAccessor] = (sourceGapped[dirAccessor] > source[dirAccessor] ? -1 : 1) * gapOffset;\n                }\n                else {\n                    targetGapOffset[dirAccessor] = (targetGapped[dirAccessor] > target[dirAccessor] ? -1 : 1) * gapOffset;\n                }\n            }\n        }\n        // these are conditions for handling mixed handle positions like Right -> Bottom for example\n        if (sourcePosition !== targetPosition) {\n            const dirAccessorOpposite = dirAccessor === 'x' ? 'y' : 'x';\n            const isSameDir = sourceDir[dirAccessor] === targetDir[dirAccessorOpposite];\n            const sourceGtTargetOppo = sourceGapped[dirAccessorOpposite] > targetGapped[dirAccessorOpposite];\n            const sourceLtTargetOppo = sourceGapped[dirAccessorOpposite] < targetGapped[dirAccessorOpposite];\n            const flipSourceTarget = (sourceDir[dirAccessor] === 1 && ((!isSameDir && sourceGtTargetOppo) || (isSameDir && sourceLtTargetOppo))) ||\n                (sourceDir[dirAccessor] !== 1 && ((!isSameDir && sourceLtTargetOppo) || (isSameDir && sourceGtTargetOppo)));\n            if (flipSourceTarget) {\n                points = dirAccessor === 'x' ? sourceTarget : targetSource;\n            }\n        }\n        const sourceGapPoint = { x: sourceGapped.x + sourceGapOffset.x, y: sourceGapped.y + sourceGapOffset.y };\n        const targetGapPoint = { x: targetGapped.x + targetGapOffset.x, y: targetGapped.y + targetGapOffset.y };\n        const maxXDistance = Math.max(Math.abs(sourceGapPoint.x - points[0].x), Math.abs(targetGapPoint.x - points[0].x));\n        const maxYDistance = Math.max(Math.abs(sourceGapPoint.y - points[0].y), Math.abs(targetGapPoint.y - points[0].y));\n        // we want to place the label on the longest segment of the edge\n        if (maxXDistance >= maxYDistance) {\n            centerX = (sourceGapPoint.x + targetGapPoint.x) / 2;\n            centerY = points[0].y;\n        }\n        else {\n            centerX = points[0].x;\n            centerY = (sourceGapPoint.y + targetGapPoint.y) / 2;\n        }\n    }\n    const pathPoints = [\n        source,\n        { x: sourceGapped.x + sourceGapOffset.x, y: sourceGapped.y + sourceGapOffset.y },\n        ...points,\n        { x: targetGapped.x + targetGapOffset.x, y: targetGapped.y + targetGapOffset.y },\n        target,\n    ];\n    return [pathPoints, centerX, centerY, defaultOffsetX, defaultOffsetY];\n}\nfunction getBend(a, b, c, size) {\n    const bendSize = Math.min(distance(a, b) / 2, distance(b, c) / 2, size);\n    const { x, y } = b;\n    // no bend\n    if ((a.x === x && x === c.x) || (a.y === y && y === c.y)) {\n        return `L${x} ${y}`;\n    }\n    // first segment is horizontal\n    if (a.y === y) {\n        const xDir = a.x < c.x ? -1 : 1;\n        const yDir = a.y < c.y ? 1 : -1;\n        return `L ${x + bendSize * xDir},${y}Q ${x},${y} ${x},${y + bendSize * yDir}`;\n    }\n    const xDir = a.x < c.x ? 1 : -1;\n    const yDir = a.y < c.y ? -1 : 1;\n    return `L ${x},${y + bendSize * yDir}Q ${x},${y} ${x + bendSize * xDir},${y}`;\n}\n/**\n * The `getSmoothStepPath` util returns everything you need to render a stepped path\n * between two nodes. The `borderRadius` property can be used to choose how rounded\n * the corners of those steps are.\n * @public\n * @returns A path string you can use in an SVG, the `labelX` and `labelY` position (center of path)\n * and `offsetX`, `offsetY` between source handle and label.\n *\n * - `path`: the path to use in an SVG `<path>` element.\n * - `labelX`: the `x` position you can use to render a label for this edge.\n * - `labelY`: the `y` position you can use to render a label for this edge.\n * - `offsetX`: the absolute difference between the source `x` position and the `x` position of the\n * middle of this path.\n * - `offsetY`: the absolute difference between the source `y` position and the `y` position of the\n * middle of this path.\n * @example\n * ```js\n *  const source = { x: 0, y: 20 };\n *  const target = { x: 150, y: 100 };\n *\n *  const [path, labelX, labelY, offsetX, offsetY] = getSmoothStepPath({\n *    sourceX: source.x,\n *    sourceY: source.y,\n *    sourcePosition: Position.Right,\n *    targetX: target.x,\n *    targetY: target.y,\n *    targetPosition: Position.Left,\n *  });\n * ```\n * @remarks This function returns a tuple (aka a fixed-size array) to make it easier to work with multiple edge paths at once.\n */\nfunction getSmoothStepPath({ sourceX, sourceY, sourcePosition = Position.Bottom, targetX, targetY, targetPosition = Position.Top, borderRadius = 5, centerX, centerY, offset = 20, stepPosition = 0.5, }) {\n    const [points, labelX, labelY, offsetX, offsetY] = getPoints({\n        source: { x: sourceX, y: sourceY },\n        sourcePosition,\n        target: { x: targetX, y: targetY },\n        targetPosition,\n        center: { x: centerX, y: centerY },\n        offset,\n        stepPosition,\n    });\n    const path = points.reduce((res, p, i) => {\n        let segment = '';\n        if (i > 0 && i < points.length - 1) {\n            segment = getBend(points[i - 1], p, points[i + 1], borderRadius);\n        }\n        else {\n            segment = `${i === 0 ? 'M' : 'L'}${p.x} ${p.y}`;\n        }\n        res += segment;\n        return res;\n    }, '');\n    return [path, labelX, labelY, offsetX, offsetY];\n}\n\nfunction isNodeInitialized(node) {\n    return (node &&\n        !!(node.internals.handleBounds || node.handles?.length) &&\n        !!(node.measured.width || node.width || node.initialWidth));\n}\nfunction getEdgePosition(params) {\n    const { sourceNode, targetNode } = params;\n    if (!isNodeInitialized(sourceNode) || !isNodeInitialized(targetNode)) {\n        return null;\n    }\n    const sourceHandleBounds = sourceNode.internals.handleBounds || toHandleBounds(sourceNode.handles);\n    const targetHandleBounds = targetNode.internals.handleBounds || toHandleBounds(targetNode.handles);\n    const sourceHandle = getHandle$1(sourceHandleBounds?.source ?? [], params.sourceHandle);\n    const targetHandle = getHandle$1(\n    // when connection type is loose we can define all handles as sources and connect source -> source\n    params.connectionMode === ConnectionMode.Strict\n        ? targetHandleBounds?.target ?? []\n        : (targetHandleBounds?.target ?? []).concat(targetHandleBounds?.source ?? []), params.targetHandle);\n    if (!sourceHandle || !targetHandle) {\n        params.onError?.('008', errorMessages['error008'](!sourceHandle ? 'source' : 'target', {\n            id: params.id,\n            sourceHandle: params.sourceHandle,\n            targetHandle: params.targetHandle,\n        }));\n        return null;\n    }\n    const sourcePosition = sourceHandle?.position || Position.Bottom;\n    const targetPosition = targetHandle?.position || Position.Top;\n    const source = getHandlePosition(sourceNode, sourceHandle, sourcePosition);\n    const target = getHandlePosition(targetNode, targetHandle, targetPosition);\n    return {\n        sourceX: source.x,\n        sourceY: source.y,\n        targetX: target.x,\n        targetY: target.y,\n        sourcePosition,\n        targetPosition,\n    };\n}\nfunction toHandleBounds(handles) {\n    if (!handles) {\n        return null;\n    }\n    const source = [];\n    const target = [];\n    for (const handle of handles) {\n        handle.width = handle.width ?? 1;\n        handle.height = handle.height ?? 1;\n        if (handle.type === 'source') {\n            source.push(handle);\n        }\n        else if (handle.type === 'target') {\n            target.push(handle);\n        }\n    }\n    return {\n        source,\n        target,\n    };\n}\nfunction getHandlePosition(node, handle, fallbackPosition = Position.Left, center = false) {\n    const x = (handle?.x ?? 0) + node.internals.positionAbsolute.x;\n    const y = (handle?.y ?? 0) + node.internals.positionAbsolute.y;\n    const { width, height } = handle ?? getNodeDimensions(node);\n    if (center) {\n        return { x: x + width / 2, y: y + height / 2 };\n    }\n    const position = handle?.position ?? fallbackPosition;\n    switch (position) {\n        case Position.Top:\n            return { x: x + width / 2, y };\n        case Position.Right:\n            return { x: x + width, y: y + height / 2 };\n        case Position.Bottom:\n            return { x: x + width / 2, y: y + height };\n        case Position.Left:\n            return { x, y: y + height / 2 };\n    }\n}\nfunction getHandle$1(bounds, handleId) {\n    if (!bounds) {\n        return null;\n    }\n    // if no handleId is given, we use the first handle, otherwise we check for the id\n    return (!handleId ? bounds[0] : bounds.find((d) => d.id === handleId)) || null;\n}\n\nfunction getMarkerId(marker, id) {\n    if (!marker) {\n        return '';\n    }\n    if (typeof marker === 'string') {\n        return marker;\n    }\n    const idPrefix = id ? `${id}__` : '';\n    return `${idPrefix}${Object.keys(marker)\n        .sort()\n        .map((key) => `${key}=${marker[key]}`)\n        .join('&')}`;\n}\nfunction createMarkerIds(edges, { id, defaultColor, defaultMarkerStart, defaultMarkerEnd, }) {\n    const ids = new Set();\n    return edges\n        .reduce((markers, edge) => {\n        [edge.markerStart || defaultMarkerStart, edge.markerEnd || defaultMarkerEnd].forEach((marker) => {\n            if (marker && typeof marker === 'object') {\n                const markerId = getMarkerId(marker, id);\n                if (!ids.has(markerId)) {\n                    markers.push({ id: markerId, color: marker.color || defaultColor, ...marker });\n                    ids.add(markerId);\n                }\n            }\n        });\n        return markers;\n    }, [])\n        .sort((a, b) => a.id.localeCompare(b.id));\n}\n\nfunction getNodeToolbarTransform(nodeRect, viewport, position, offset, align) {\n    let alignmentOffset = 0.5;\n    if (align === 'start') {\n        alignmentOffset = 0;\n    }\n    else if (align === 'end') {\n        alignmentOffset = 1;\n    }\n    /*\n     * position === Position.Top\n     * we set the x any y position of the toolbar based on the nodes position\n     */\n    let pos = [\n        (nodeRect.x + nodeRect.width * alignmentOffset) * viewport.zoom + viewport.x,\n        nodeRect.y * viewport.zoom + viewport.y - offset,\n    ];\n    // and than shift it based on the alignment. The shift values are in %.\n    let shift = [-100 * alignmentOffset, -100];\n    switch (position) {\n        case Position.Right:\n            pos = [\n                (nodeRect.x + nodeRect.width) * viewport.zoom + viewport.x + offset,\n                (nodeRect.y + nodeRect.height * alignmentOffset) * viewport.zoom + viewport.y,\n            ];\n            shift = [0, -100 * alignmentOffset];\n            break;\n        case Position.Bottom:\n            pos[1] = (nodeRect.y + nodeRect.height) * viewport.zoom + viewport.y + offset;\n            shift[1] = 0;\n            break;\n        case Position.Left:\n            pos = [\n                nodeRect.x * viewport.zoom + viewport.x - offset,\n                (nodeRect.y + nodeRect.height * alignmentOffset) * viewport.zoom + viewport.y,\n            ];\n            shift = [-100, -100 * alignmentOffset];\n            break;\n    }\n    return `translate(${pos[0]}px, ${pos[1]}px) translate(${shift[0]}%, ${shift[1]}%)`;\n}\n\nconst defaultOptions = {\n    nodeOrigin: [0, 0],\n    nodeExtent: infiniteExtent,\n    elevateNodesOnSelect: true,\n    defaults: {},\n};\nconst adoptUserNodesDefaultOptions = {\n    ...defaultOptions,\n    checkEquality: true,\n};\nfunction mergeObjects(base, incoming) {\n    const result = { ...base };\n    for (const key in incoming) {\n        if (incoming[key] !== undefined) {\n            // typecast is safe here, because we check for undefined\n            result[key] = incoming[key];\n        }\n    }\n    return result;\n}\nfunction updateAbsolutePositions(nodeLookup, parentLookup, options) {\n    const _options = mergeObjects(defaultOptions, options);\n    for (const node of nodeLookup.values()) {\n        if (node.parentId) {\n            updateChildNode(node, nodeLookup, parentLookup, _options);\n        }\n        else {\n            const positionWithOrigin = getNodePositionWithOrigin(node, _options.nodeOrigin);\n            const extent = isCoordinateExtent(node.extent) ? node.extent : _options.nodeExtent;\n            const clampedPosition = clampPosition(positionWithOrigin, extent, getNodeDimensions(node));\n            node.internals.positionAbsolute = clampedPosition;\n        }\n    }\n}\nfunction adoptUserNodes(nodes, nodeLookup, parentLookup, options) {\n    const _options = mergeObjects(adoptUserNodesDefaultOptions, options);\n    let nodesInitialized = nodes.length > 0;\n    const tmpLookup = new Map(nodeLookup);\n    const selectedNodeZ = _options?.elevateNodesOnSelect ? 1000 : 0;\n    nodeLookup.clear();\n    parentLookup.clear();\n    for (const userNode of nodes) {\n        let internalNode = tmpLookup.get(userNode.id);\n        if (_options.checkEquality && userNode === internalNode?.internals.userNode) {\n            nodeLookup.set(userNode.id, internalNode);\n        }\n        else {\n            const positionWithOrigin = getNodePositionWithOrigin(userNode, _options.nodeOrigin);\n            const extent = isCoordinateExtent(userNode.extent) ? userNode.extent : _options.nodeExtent;\n            const clampedPosition = clampPosition(positionWithOrigin, extent, getNodeDimensions(userNode));\n            internalNode = {\n                ..._options.defaults,\n                ...userNode,\n                measured: {\n                    width: userNode.measured?.width,\n                    height: userNode.measured?.height,\n                },\n                internals: {\n                    positionAbsolute: clampedPosition,\n                    // if user re-initializes the node or removes `measured` for whatever reason, we reset the handleBounds so that the node gets re-measured\n                    handleBounds: !userNode.measured ? undefined : internalNode?.internals.handleBounds,\n                    z: calculateZ(userNode, selectedNodeZ),\n                    userNode,\n                },\n            };\n            nodeLookup.set(userNode.id, internalNode);\n        }\n        if ((internalNode.measured === undefined ||\n            internalNode.measured.width === undefined ||\n            internalNode.measured.height === undefined) &&\n            !internalNode.hidden) {\n            nodesInitialized = false;\n        }\n        if (userNode.parentId) {\n            updateChildNode(internalNode, nodeLookup, parentLookup, options);\n        }\n    }\n    return nodesInitialized;\n}\nfunction updateParentLookup(node, parentLookup) {\n    if (!node.parentId) {\n        return;\n    }\n    const childNodes = parentLookup.get(node.parentId);\n    if (childNodes) {\n        childNodes.set(node.id, node);\n    }\n    else {\n        parentLookup.set(node.parentId, new Map([[node.id, node]]));\n    }\n}\n/**\n * Updates positionAbsolute and zIndex of a child node and the parentLookup.\n */\nfunction updateChildNode(node, nodeLookup, parentLookup, options) {\n    const { elevateNodesOnSelect, nodeOrigin, nodeExtent } = mergeObjects(defaultOptions, options);\n    const parentId = node.parentId;\n    const parentNode = nodeLookup.get(parentId);\n    if (!parentNode) {\n        console.warn(`Parent node ${parentId} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);\n        return;\n    }\n    updateParentLookup(node, parentLookup);\n    const selectedNodeZ = elevateNodesOnSelect ? 1000 : 0;\n    const { x, y, z } = calculateChildXYZ(node, parentNode, nodeOrigin, nodeExtent, selectedNodeZ);\n    const { positionAbsolute } = node.internals;\n    const positionChanged = x !== positionAbsolute.x || y !== positionAbsolute.y;\n    if (positionChanged || z !== node.internals.z) {\n        // we create a new object to mark the node as updated\n        nodeLookup.set(node.id, {\n            ...node,\n            internals: {\n                ...node.internals,\n                positionAbsolute: positionChanged ? { x, y } : positionAbsolute,\n                z,\n            },\n        });\n    }\n}\nfunction calculateZ(node, selectedNodeZ) {\n    return (isNumeric(node.zIndex) ? node.zIndex : 0) + (node.selected ? selectedNodeZ : 0);\n}\nfunction calculateChildXYZ(childNode, parentNode, nodeOrigin, nodeExtent, selectedNodeZ) {\n    const { x: parentX, y: parentY } = parentNode.internals.positionAbsolute;\n    const childDimensions = getNodeDimensions(childNode);\n    const positionWithOrigin = getNodePositionWithOrigin(childNode, nodeOrigin);\n    const clampedPosition = isCoordinateExtent(childNode.extent)\n        ? clampPosition(positionWithOrigin, childNode.extent, childDimensions)\n        : positionWithOrigin;\n    let absolutePosition = clampPosition({ x: parentX + clampedPosition.x, y: parentY + clampedPosition.y }, nodeExtent, childDimensions);\n    if (childNode.extent === 'parent') {\n        absolutePosition = clampPositionToParent(absolutePosition, childDimensions, parentNode);\n    }\n    const childZ = calculateZ(childNode, selectedNodeZ);\n    const parentZ = parentNode.internals.z ?? 0;\n    return {\n        x: absolutePosition.x,\n        y: absolutePosition.y,\n        z: parentZ >= childZ ? parentZ + 1 : childZ,\n    };\n}\nfunction handleExpandParent(children, nodeLookup, parentLookup, nodeOrigin = [0, 0]) {\n    const changes = [];\n    const parentExpansions = new Map();\n    // determine the expanded rectangle the child nodes would take for each parent\n    for (const child of children) {\n        const parent = nodeLookup.get(child.parentId);\n        if (!parent) {\n            continue;\n        }\n        const parentRect = parentExpansions.get(child.parentId)?.expandedRect ?? nodeToRect(parent);\n        const expandedRect = getBoundsOfRects(parentRect, child.rect);\n        parentExpansions.set(child.parentId, { expandedRect, parent });\n    }\n    if (parentExpansions.size > 0) {\n        parentExpansions.forEach(({ expandedRect, parent }, parentId) => {\n            // determine the position & dimensions of the parent\n            const positionAbsolute = parent.internals.positionAbsolute;\n            const dimensions = getNodeDimensions(parent);\n            const origin = parent.origin ?? nodeOrigin;\n            // determine how much the parent expands in width and position\n            const xChange = expandedRect.x < positionAbsolute.x ? Math.round(Math.abs(positionAbsolute.x - expandedRect.x)) : 0;\n            const yChange = expandedRect.y < positionAbsolute.y ? Math.round(Math.abs(positionAbsolute.y - expandedRect.y)) : 0;\n            const newWidth = Math.max(dimensions.width, Math.round(expandedRect.width));\n            const newHeight = Math.max(dimensions.height, Math.round(expandedRect.height));\n            const widthChange = (newWidth - dimensions.width) * origin[0];\n            const heightChange = (newHeight - dimensions.height) * origin[1];\n            // We need to correct the position of the parent node if the origin is not [0,0]\n            if (xChange > 0 || yChange > 0 || widthChange || heightChange) {\n                changes.push({\n                    id: parentId,\n                    type: 'position',\n                    position: {\n                        x: parent.position.x - xChange + widthChange,\n                        y: parent.position.y - yChange + heightChange,\n                    },\n                });\n                /*\n                 * We move all child nodes in the oppsite direction\n                 * so the x,y changes of the parent do not move the children\n                 */\n                parentLookup.get(parentId)?.forEach((childNode) => {\n                    if (!children.some((child) => child.id === childNode.id)) {\n                        changes.push({\n                            id: childNode.id,\n                            type: 'position',\n                            position: {\n                                x: childNode.position.x + xChange,\n                                y: childNode.position.y + yChange,\n                            },\n                        });\n                    }\n                });\n            }\n            // We need to correct the dimensions of the parent node if the origin is not [0,0]\n            if (dimensions.width < expandedRect.width || dimensions.height < expandedRect.height || xChange || yChange) {\n                changes.push({\n                    id: parentId,\n                    type: 'dimensions',\n                    setAttributes: true,\n                    dimensions: {\n                        width: newWidth + (xChange ? origin[0] * xChange - widthChange : 0),\n                        height: newHeight + (yChange ? origin[1] * yChange - heightChange : 0),\n                    },\n                });\n            }\n        });\n    }\n    return changes;\n}\nfunction updateNodeInternals(updates, nodeLookup, parentLookup, domNode, nodeOrigin, nodeExtent) {\n    const viewportNode = domNode?.querySelector('.xyflow__viewport');\n    let updatedInternals = false;\n    if (!viewportNode) {\n        return { changes: [], updatedInternals };\n    }\n    const changes = [];\n    const style = window.getComputedStyle(viewportNode);\n    const { m22: zoom } = new window.DOMMatrixReadOnly(style.transform);\n    // in this array we collect nodes, that might trigger changes (like expanding parent)\n    const parentExpandChildren = [];\n    for (const update of updates.values()) {\n        const node = nodeLookup.get(update.id);\n        if (!node) {\n            continue;\n        }\n        if (node.hidden) {\n            nodeLookup.set(node.id, {\n                ...node,\n                internals: {\n                    ...node.internals,\n                    handleBounds: undefined,\n                },\n            });\n            updatedInternals = true;\n            continue;\n        }\n        const dimensions = getDimensions(update.nodeElement);\n        const dimensionChanged = node.measured.width !== dimensions.width || node.measured.height !== dimensions.height;\n        const doUpdate = !!(dimensions.width &&\n            dimensions.height &&\n            (dimensionChanged || !node.internals.handleBounds || update.force));\n        if (doUpdate) {\n            const nodeBounds = update.nodeElement.getBoundingClientRect();\n            const extent = isCoordinateExtent(node.extent) ? node.extent : nodeExtent;\n            let { positionAbsolute } = node.internals;\n            if (node.parentId && node.extent === 'parent') {\n                positionAbsolute = clampPositionToParent(positionAbsolute, dimensions, nodeLookup.get(node.parentId));\n            }\n            else if (extent) {\n                positionAbsolute = clampPosition(positionAbsolute, extent, dimensions);\n            }\n            const newNode = {\n                ...node,\n                measured: dimensions,\n                internals: {\n                    ...node.internals,\n                    positionAbsolute,\n                    handleBounds: {\n                        source: getHandleBounds('source', update.nodeElement, nodeBounds, zoom, node.id),\n                        target: getHandleBounds('target', update.nodeElement, nodeBounds, zoom, node.id),\n                    },\n                },\n            };\n            nodeLookup.set(node.id, newNode);\n            if (node.parentId) {\n                updateChildNode(newNode, nodeLookup, parentLookup, { nodeOrigin });\n            }\n            updatedInternals = true;\n            if (dimensionChanged) {\n                changes.push({\n                    id: node.id,\n                    type: 'dimensions',\n                    dimensions,\n                });\n                if (node.expandParent && node.parentId) {\n                    parentExpandChildren.push({\n                        id: node.id,\n                        parentId: node.parentId,\n                        rect: nodeToRect(newNode, nodeOrigin),\n                    });\n                }\n            }\n        }\n    }\n    if (parentExpandChildren.length > 0) {\n        const parentExpandChanges = handleExpandParent(parentExpandChildren, nodeLookup, parentLookup, nodeOrigin);\n        changes.push(...parentExpandChanges);\n    }\n    return { changes, updatedInternals };\n}\nasync function panBy({ delta, panZoom, transform, translateExtent, width, height, }) {\n    if (!panZoom || (!delta.x && !delta.y)) {\n        return Promise.resolve(false);\n    }\n    const nextViewport = await panZoom.setViewportConstrained({\n        x: transform[0] + delta.x,\n        y: transform[1] + delta.y,\n        zoom: transform[2],\n    }, [\n        [0, 0],\n        [width, height],\n    ], translateExtent);\n    const transformChanged = !!nextViewport &&\n        (nextViewport.x !== transform[0] || nextViewport.y !== transform[1] || nextViewport.k !== transform[2]);\n    return Promise.resolve(transformChanged);\n}\n/**\n * this function adds the connection to the connectionLookup\n * at the following keys: nodeId-type-handleId, nodeId-type and nodeId\n * @param type type of the connection\n * @param connection connection that should be added to the lookup\n * @param connectionKey at which key the connection should be added\n * @param connectionLookup reference to the connection lookup\n * @param nodeId nodeId of the connection\n * @param handleId handleId of the conneciton\n */\nfunction addConnectionToLookup(type, connection, connectionKey, connectionLookup, nodeId, handleId) {\n    /*\n     * We add the connection to the connectionLookup at the following keys\n     * 1. nodeId, 2. nodeId-type, 3. nodeId-type-handleId\n     * If the key already exists, we add the connection to the existing map\n     */\n    let key = nodeId;\n    const nodeMap = connectionLookup.get(key) || new Map();\n    connectionLookup.set(key, nodeMap.set(connectionKey, connection));\n    key = `${nodeId}-${type}`;\n    const typeMap = connectionLookup.get(key) || new Map();\n    connectionLookup.set(key, typeMap.set(connectionKey, connection));\n    if (handleId) {\n        key = `${nodeId}-${type}-${handleId}`;\n        const handleMap = connectionLookup.get(key) || new Map();\n        connectionLookup.set(key, handleMap.set(connectionKey, connection));\n    }\n}\nfunction updateConnectionLookup(connectionLookup, edgeLookup, edges) {\n    connectionLookup.clear();\n    edgeLookup.clear();\n    for (const edge of edges) {\n        const { source: sourceNode, target: targetNode, sourceHandle = null, targetHandle = null } = edge;\n        const connection = { edgeId: edge.id, source: sourceNode, target: targetNode, sourceHandle, targetHandle };\n        const sourceKey = `${sourceNode}-${sourceHandle}--${targetNode}-${targetHandle}`;\n        const targetKey = `${targetNode}-${targetHandle}--${sourceNode}-${sourceHandle}`;\n        addConnectionToLookup('source', connection, targetKey, connectionLookup, sourceNode, sourceHandle);\n        addConnectionToLookup('target', connection, sourceKey, connectionLookup, targetNode, targetHandle);\n        edgeLookup.set(edge.id, edge);\n    }\n}\n\nfunction shallowNodeData(a, b) {\n    if (a === null || b === null) {\n        return false;\n    }\n    const _a = Array.isArray(a) ? a : [a];\n    const _b = Array.isArray(b) ? b : [b];\n    if (_a.length !== _b.length) {\n        return false;\n    }\n    for (let i = 0; i < _a.length; i++) {\n        if (_a[i].id !== _b[i].id || _a[i].type !== _b[i].type || !Object.is(_a[i].data, _b[i].data)) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction isParentSelected(node, nodeLookup) {\n    if (!node.parentId) {\n        return false;\n    }\n    const parentNode = nodeLookup.get(node.parentId);\n    if (!parentNode) {\n        return false;\n    }\n    if (parentNode.selected) {\n        return true;\n    }\n    return isParentSelected(parentNode, nodeLookup);\n}\nfunction hasSelector(target, selector, domNode) {\n    let current = target;\n    do {\n        if (current?.matches?.(selector))\n            return true;\n        if (current === domNode)\n            return false;\n        current = current?.parentElement;\n    } while (current);\n    return false;\n}\n// looks for all selected nodes and created a NodeDragItem for each of them\nfunction getDragItems(nodeLookup, nodesDraggable, mousePos, nodeId) {\n    const dragItems = new Map();\n    for (const [id, node] of nodeLookup) {\n        if ((node.selected || node.id === nodeId) &&\n            (!node.parentId || !isParentSelected(node, nodeLookup)) &&\n            (node.draggable || (nodesDraggable && typeof node.draggable === 'undefined'))) {\n            const internalNode = nodeLookup.get(id);\n            if (internalNode) {\n                dragItems.set(id, {\n                    id,\n                    position: internalNode.position || { x: 0, y: 0 },\n                    distance: {\n                        x: mousePos.x - internalNode.internals.positionAbsolute.x,\n                        y: mousePos.y - internalNode.internals.positionAbsolute.y,\n                    },\n                    extent: internalNode.extent,\n                    parentId: internalNode.parentId,\n                    origin: internalNode.origin,\n                    expandParent: internalNode.expandParent,\n                    internals: {\n                        positionAbsolute: internalNode.internals.positionAbsolute || { x: 0, y: 0 },\n                    },\n                    measured: {\n                        width: internalNode.measured.width ?? 0,\n                        height: internalNode.measured.height ?? 0,\n                    },\n                });\n            }\n        }\n    }\n    return dragItems;\n}\n/*\n * returns two params:\n * 1. the dragged node (or the first of the list, if we are dragging a node selection)\n * 2. array of selected nodes (for multi selections)\n */\nfunction getEventHandlerParams({ nodeId, dragItems, nodeLookup, dragging = true, }) {\n    const nodesFromDragItems = [];\n    for (const [id, dragItem] of dragItems) {\n        const node = nodeLookup.get(id)?.internals.userNode;\n        if (node) {\n            nodesFromDragItems.push({\n                ...node,\n                position: dragItem.position,\n                dragging,\n            });\n        }\n    }\n    if (!nodeId) {\n        return [nodesFromDragItems[0], nodesFromDragItems];\n    }\n    const node = nodeLookup.get(nodeId)?.internals.userNode;\n    return [\n        !node\n            ? nodesFromDragItems[0]\n            : {\n                ...node,\n                position: dragItems.get(nodeId)?.position || node.position,\n                dragging,\n            },\n        nodesFromDragItems,\n    ];\n}\n/**\n * If a selection is being dragged we want to apply the same snap offset to all nodes in the selection.\n * This function calculates the snap offset based on the first node in the selection.\n */\nfunction calculateSnapOffset({ dragItems, snapGrid, x, y, }) {\n    const refDragItem = dragItems.values().next().value;\n    if (!refDragItem) {\n        return null;\n    }\n    const refPos = {\n        x: x - refDragItem.distance.x,\n        y: y - refDragItem.distance.y,\n    };\n    const refPosSnapped = snapPosition(refPos, snapGrid);\n    return {\n        x: refPosSnapped.x - refPos.x,\n        y: refPosSnapped.y - refPos.y,\n    };\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction XYDrag({ onNodeMouseDown, getStoreItems, onDragStart, onDrag, onDragStop, }) {\n    let lastPos = { x: null, y: null };\n    let autoPanId = 0;\n    let dragItems = new Map();\n    let autoPanStarted = false;\n    let mousePosition = { x: 0, y: 0 };\n    let containerBounds = null;\n    let dragStarted = false;\n    let d3Selection = null;\n    let abortDrag = false; // prevents unintentional dragging on multitouch\n    let nodePositionsChanged = false;\n    // we store the last drag event to be able to use it in the update function\n    let dragEvent = null;\n    // public functions\n    function update({ noDragClassName, handleSelector, domNode, isSelectable, nodeId, nodeClickDistance = 0, }) {\n        d3Selection = select(domNode);\n        function updateNodes({ x, y }) {\n            const { nodeLookup, nodeExtent, snapGrid, snapToGrid, nodeOrigin, onNodeDrag, onSelectionDrag, onError, updateNodePositions, } = getStoreItems();\n            lastPos = { x, y };\n            let hasChange = false;\n            const isMultiDrag = dragItems.size > 1;\n            const nodesBox = isMultiDrag && nodeExtent ? rectToBox(getInternalNodesBounds(dragItems)) : null;\n            const multiDragSnapOffset = isMultiDrag && snapToGrid\n                ? calculateSnapOffset({\n                    dragItems,\n                    snapGrid,\n                    x,\n                    y,\n                })\n                : null;\n            for (const [id, dragItem] of dragItems) {\n                /*\n                 * if the node is not in the nodeLookup anymore, it was probably deleted while dragging\n                 */\n                if (!nodeLookup.has(id)) {\n                    continue;\n                }\n                let nextPosition = { x: x - dragItem.distance.x, y: y - dragItem.distance.y };\n                if (snapToGrid) {\n                    nextPosition = multiDragSnapOffset\n                        ? {\n                            x: Math.round(nextPosition.x + multiDragSnapOffset.x),\n                            y: Math.round(nextPosition.y + multiDragSnapOffset.y),\n                        }\n                        : snapPosition(nextPosition, snapGrid);\n                }\n                let adjustedNodeExtent = null;\n                if (isMultiDrag && nodeExtent && !dragItem.extent && nodesBox) {\n                    const { positionAbsolute } = dragItem.internals;\n                    const x1 = positionAbsolute.x - nodesBox.x + nodeExtent[0][0];\n                    const x2 = positionAbsolute.x + dragItem.measured.width - nodesBox.x2 + nodeExtent[1][0];\n                    const y1 = positionAbsolute.y - nodesBox.y + nodeExtent[0][1];\n                    const y2 = positionAbsolute.y + dragItem.measured.height - nodesBox.y2 + nodeExtent[1][1];\n                    adjustedNodeExtent = [\n                        [x1, y1],\n                        [x2, y2],\n                    ];\n                }\n                const { position, positionAbsolute } = calculateNodePosition({\n                    nodeId: id,\n                    nextPosition,\n                    nodeLookup,\n                    nodeExtent: adjustedNodeExtent ? adjustedNodeExtent : nodeExtent,\n                    nodeOrigin,\n                    onError,\n                });\n                // we want to make sure that we only fire a change event when there is a change\n                hasChange = hasChange || dragItem.position.x !== position.x || dragItem.position.y !== position.y;\n                dragItem.position = position;\n                dragItem.internals.positionAbsolute = positionAbsolute;\n            }\n            nodePositionsChanged = nodePositionsChanged || hasChange;\n            if (!hasChange) {\n                return;\n            }\n            updateNodePositions(dragItems, true);\n            if (dragEvent && (onDrag || onNodeDrag || (!nodeId && onSelectionDrag))) {\n                const [currentNode, currentNodes] = getEventHandlerParams({\n                    nodeId,\n                    dragItems,\n                    nodeLookup,\n                });\n                onDrag?.(dragEvent, dragItems, currentNode, currentNodes);\n                onNodeDrag?.(dragEvent, currentNode, currentNodes);\n                if (!nodeId) {\n                    onSelectionDrag?.(dragEvent, currentNodes);\n                }\n            }\n        }\n        async function autoPan() {\n            if (!containerBounds) {\n                return;\n            }\n            const { transform, panBy, autoPanSpeed, autoPanOnNodeDrag } = getStoreItems();\n            if (!autoPanOnNodeDrag) {\n                autoPanStarted = false;\n                cancelAnimationFrame(autoPanId);\n                return;\n            }\n            const [xMovement, yMovement] = calcAutoPan(mousePosition, containerBounds, autoPanSpeed);\n            if (xMovement !== 0 || yMovement !== 0) {\n                lastPos.x = (lastPos.x ?? 0) - xMovement / transform[2];\n                lastPos.y = (lastPos.y ?? 0) - yMovement / transform[2];\n                if (await panBy({ x: xMovement, y: yMovement })) {\n                    updateNodes(lastPos);\n                }\n            }\n            autoPanId = requestAnimationFrame(autoPan);\n        }\n        function startDrag(event) {\n            const { nodeLookup, multiSelectionActive, nodesDraggable, transform, snapGrid, snapToGrid, selectNodesOnDrag, onNodeDragStart, onSelectionDragStart, unselectNodesAndEdges, } = getStoreItems();\n            dragStarted = true;\n            if ((!selectNodesOnDrag || !isSelectable) && !multiSelectionActive && nodeId) {\n                if (!nodeLookup.get(nodeId)?.selected) {\n                    // we need to reset selected nodes when selectNodesOnDrag=false\n                    unselectNodesAndEdges();\n                }\n            }\n            if (isSelectable && selectNodesOnDrag && nodeId) {\n                onNodeMouseDown?.(nodeId);\n            }\n            const pointerPos = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid, containerBounds });\n            lastPos = pointerPos;\n            dragItems = getDragItems(nodeLookup, nodesDraggable, pointerPos, nodeId);\n            if (dragItems.size > 0 && (onDragStart || onNodeDragStart || (!nodeId && onSelectionDragStart))) {\n                const [currentNode, currentNodes] = getEventHandlerParams({\n                    nodeId,\n                    dragItems,\n                    nodeLookup,\n                });\n                onDragStart?.(event.sourceEvent, dragItems, currentNode, currentNodes);\n                onNodeDragStart?.(event.sourceEvent, currentNode, currentNodes);\n                if (!nodeId) {\n                    onSelectionDragStart?.(event.sourceEvent, currentNodes);\n                }\n            }\n        }\n        const d3DragInstance = drag()\n            .clickDistance(nodeClickDistance)\n            .on('start', (event) => {\n            const { domNode, nodeDragThreshold, transform, snapGrid, snapToGrid } = getStoreItems();\n            containerBounds = domNode?.getBoundingClientRect() || null;\n            abortDrag = false;\n            nodePositionsChanged = false;\n            dragEvent = event.sourceEvent;\n            if (nodeDragThreshold === 0) {\n                startDrag(event);\n            }\n            const pointerPos = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid, containerBounds });\n            lastPos = pointerPos;\n            mousePosition = getEventPosition(event.sourceEvent, containerBounds);\n        })\n            .on('drag', (event) => {\n            const { autoPanOnNodeDrag, transform, snapGrid, snapToGrid, nodeDragThreshold, nodeLookup } = getStoreItems();\n            const pointerPos = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid, containerBounds });\n            dragEvent = event.sourceEvent;\n            if ((event.sourceEvent.type === 'touchmove' && event.sourceEvent.touches.length > 1) ||\n                // if user deletes a node while dragging, we need to abort the drag to prevent errors\n                (nodeId && !nodeLookup.has(nodeId))) {\n                abortDrag = true;\n            }\n            if (abortDrag) {\n                return;\n            }\n            if (!autoPanStarted && autoPanOnNodeDrag && dragStarted) {\n                autoPanStarted = true;\n                autoPan();\n            }\n            if (!dragStarted) {\n                const x = pointerPos.xSnapped - (lastPos.x ?? 0);\n                const y = pointerPos.ySnapped - (lastPos.y ?? 0);\n                const distance = Math.sqrt(x * x + y * y);\n                if (distance > nodeDragThreshold) {\n                    startDrag(event);\n                }\n            }\n            // skip events without movement\n            if ((lastPos.x !== pointerPos.xSnapped || lastPos.y !== pointerPos.ySnapped) && dragItems && dragStarted) {\n                mousePosition = getEventPosition(event.sourceEvent, containerBounds);\n                updateNodes(pointerPos);\n            }\n        })\n            .on('end', (event) => {\n            if (!dragStarted || abortDrag) {\n                return;\n            }\n            autoPanStarted = false;\n            dragStarted = false;\n            cancelAnimationFrame(autoPanId);\n            if (dragItems.size > 0) {\n                const { nodeLookup, updateNodePositions, onNodeDragStop, onSelectionDragStop } = getStoreItems();\n                if (nodePositionsChanged) {\n                    updateNodePositions(dragItems, false);\n                    nodePositionsChanged = false;\n                }\n                if (onDragStop || onNodeDragStop || (!nodeId && onSelectionDragStop)) {\n                    const [currentNode, currentNodes] = getEventHandlerParams({\n                        nodeId,\n                        dragItems,\n                        nodeLookup,\n                        dragging: false,\n                    });\n                    onDragStop?.(event.sourceEvent, dragItems, currentNode, currentNodes);\n                    onNodeDragStop?.(event.sourceEvent, currentNode, currentNodes);\n                    if (!nodeId) {\n                        onSelectionDragStop?.(event.sourceEvent, currentNodes);\n                    }\n                }\n            }\n        })\n            .filter((event) => {\n            const target = event.target;\n            const isDraggable = !event.button &&\n                (!noDragClassName || !hasSelector(target, `.${noDragClassName}`, domNode)) &&\n                (!handleSelector || hasSelector(target, handleSelector, domNode));\n            return isDraggable;\n        });\n        d3Selection.call(d3DragInstance);\n    }\n    function destroy() {\n        d3Selection?.on('.drag', null);\n    }\n    return {\n        update,\n        destroy,\n    };\n}\n\nfunction getNodesWithinDistance(position, nodeLookup, distance) {\n    const nodes = [];\n    const rect = {\n        x: position.x - distance,\n        y: position.y - distance,\n        width: distance * 2,\n        height: distance * 2,\n    };\n    for (const node of nodeLookup.values()) {\n        if (getOverlappingArea(rect, nodeToRect(node)) > 0) {\n            nodes.push(node);\n        }\n    }\n    return nodes;\n}\n/*\n * this distance is used for the area around the user pointer\n * while doing a connection for finding the closest nodes\n */\nconst ADDITIONAL_DISTANCE = 250;\nfunction getClosestHandle(position, connectionRadius, nodeLookup, fromHandle) {\n    let closestHandles = [];\n    let minDistance = Infinity;\n    const closeNodes = getNodesWithinDistance(position, nodeLookup, connectionRadius + ADDITIONAL_DISTANCE);\n    for (const node of closeNodes) {\n        const allHandles = [...(node.internals.handleBounds?.source ?? []), ...(node.internals.handleBounds?.target ?? [])];\n        for (const handle of allHandles) {\n            // if the handle is the same as the fromHandle we skip it\n            if (fromHandle.nodeId === handle.nodeId && fromHandle.type === handle.type && fromHandle.id === handle.id) {\n                continue;\n            }\n            // determine absolute position of the handle\n            const { x, y } = getHandlePosition(node, handle, handle.position, true);\n            const distance = Math.sqrt(Math.pow(x - position.x, 2) + Math.pow(y - position.y, 2));\n            if (distance > connectionRadius) {\n                continue;\n            }\n            if (distance < minDistance) {\n                closestHandles = [{ ...handle, x, y }];\n                minDistance = distance;\n            }\n            else if (distance === minDistance) {\n                // when multiple handles are on the same distance we collect all of them\n                closestHandles.push({ ...handle, x, y });\n            }\n        }\n    }\n    if (!closestHandles.length) {\n        return null;\n    }\n    // when multiple handles overlay each other we prefer the opposite handle\n    if (closestHandles.length > 1) {\n        const oppositeHandleType = fromHandle.type === 'source' ? 'target' : 'source';\n        return closestHandles.find((handle) => handle.type === oppositeHandleType) ?? closestHandles[0];\n    }\n    return closestHandles[0];\n}\nfunction getHandle(nodeId, handleType, handleId, nodeLookup, connectionMode, withAbsolutePosition = false) {\n    const node = nodeLookup.get(nodeId);\n    if (!node) {\n        return null;\n    }\n    const handles = connectionMode === 'strict'\n        ? node.internals.handleBounds?.[handleType]\n        : [...(node.internals.handleBounds?.source ?? []), ...(node.internals.handleBounds?.target ?? [])];\n    const handle = (handleId ? handles?.find((h) => h.id === handleId) : handles?.[0]) ?? null;\n    return handle && withAbsolutePosition\n        ? { ...handle, ...getHandlePosition(node, handle, handle.position, true) }\n        : handle;\n}\nfunction getHandleType(edgeUpdaterType, handleDomNode) {\n    if (edgeUpdaterType) {\n        return edgeUpdaterType;\n    }\n    else if (handleDomNode?.classList.contains('target')) {\n        return 'target';\n    }\n    else if (handleDomNode?.classList.contains('source')) {\n        return 'source';\n    }\n    return null;\n}\nfunction isConnectionValid(isInsideConnectionRadius, isHandleValid) {\n    let isValid = null;\n    if (isHandleValid) {\n        isValid = true;\n    }\n    else if (isInsideConnectionRadius && !isHandleValid) {\n        isValid = false;\n    }\n    return isValid;\n}\n\nconst alwaysValid = () => true;\nfunction onPointerDown(event, { connectionMode, connectionRadius, handleId, nodeId, edgeUpdaterType, isTarget, domNode, nodeLookup, lib, autoPanOnConnect, flowId, panBy, cancelConnection, onConnectStart, onConnect, onConnectEnd, isValidConnection = alwaysValid, onReconnectEnd, updateConnection, getTransform, getFromHandle, autoPanSpeed, dragThreshold = 1, handleDomNode, }) {\n    // when xyflow is used inside a shadow root we can't use document\n    const doc = getHostForElement(event.target);\n    let autoPanId = 0;\n    let closestHandle;\n    const { x, y } = getEventPosition(event);\n    const handleType = getHandleType(edgeUpdaterType, handleDomNode);\n    const containerBounds = domNode?.getBoundingClientRect();\n    let connectionStarted = false;\n    if (!containerBounds || !handleType) {\n        return;\n    }\n    const fromHandleInternal = getHandle(nodeId, handleType, handleId, nodeLookup, connectionMode);\n    if (!fromHandleInternal) {\n        return;\n    }\n    let position = getEventPosition(event, containerBounds);\n    let autoPanStarted = false;\n    let connection = null;\n    let isValid = false;\n    let resultHandleDomNode = null;\n    // when the user is moving the mouse close to the edge of the canvas while connecting we move the canvas\n    function autoPan() {\n        if (!autoPanOnConnect || !containerBounds) {\n            return;\n        }\n        const [x, y] = calcAutoPan(position, containerBounds, autoPanSpeed);\n        panBy({ x, y });\n        autoPanId = requestAnimationFrame(autoPan);\n    }\n    // Stays the same for all consecutive pointermove events\n    const fromHandle = {\n        ...fromHandleInternal,\n        nodeId,\n        type: handleType,\n        position: fromHandleInternal.position,\n    };\n    const fromNodeInternal = nodeLookup.get(nodeId);\n    const from = getHandlePosition(fromNodeInternal, fromHandle, Position.Left, true);\n    let previousConnection = {\n        inProgress: true,\n        isValid: null,\n        from,\n        fromHandle,\n        fromPosition: fromHandle.position,\n        fromNode: fromNodeInternal,\n        to: position,\n        toHandle: null,\n        toPosition: oppositePosition[fromHandle.position],\n        toNode: null,\n    };\n    function startConnection() {\n        connectionStarted = true;\n        updateConnection(previousConnection);\n        onConnectStart?.(event, { nodeId, handleId, handleType });\n    }\n    if (dragThreshold === 0) {\n        startConnection();\n    }\n    function onPointerMove(event) {\n        if (!connectionStarted) {\n            const { x: evtX, y: evtY } = getEventPosition(event);\n            const dx = evtX - x;\n            const dy = evtY - y;\n            const nextConnectionStarted = dx * dx + dy * dy > dragThreshold * dragThreshold;\n            if (!nextConnectionStarted) {\n                return;\n            }\n            startConnection();\n        }\n        if (!getFromHandle() || !fromHandle) {\n            onPointerUp(event);\n            return;\n        }\n        const transform = getTransform();\n        position = getEventPosition(event, containerBounds);\n        closestHandle = getClosestHandle(pointToRendererPoint(position, transform, false, [1, 1]), connectionRadius, nodeLookup, fromHandle);\n        if (!autoPanStarted) {\n            autoPan();\n            autoPanStarted = true;\n        }\n        const result = isValidHandle(event, {\n            handle: closestHandle,\n            connectionMode,\n            fromNodeId: nodeId,\n            fromHandleId: handleId,\n            fromType: isTarget ? 'target' : 'source',\n            isValidConnection,\n            doc,\n            lib,\n            flowId,\n            nodeLookup,\n        });\n        resultHandleDomNode = result.handleDomNode;\n        connection = result.connection;\n        isValid = isConnectionValid(!!closestHandle, result.isValid);\n        const newConnection = {\n            // from stays the same\n            ...previousConnection,\n            isValid,\n            to: result.toHandle && isValid\n                ? rendererPointToPoint({ x: result.toHandle.x, y: result.toHandle.y }, transform)\n                : position,\n            toHandle: result.toHandle,\n            toPosition: isValid && result.toHandle ? result.toHandle.position : oppositePosition[fromHandle.position],\n            toNode: result.toHandle ? nodeLookup.get(result.toHandle.nodeId) : null,\n        };\n        /*\n         * we don't want to trigger an update when the connection\n         * is snapped to the same handle as before\n         */\n        if (isValid &&\n            closestHandle &&\n            previousConnection.toHandle &&\n            newConnection.toHandle &&\n            previousConnection.toHandle.type === newConnection.toHandle.type &&\n            previousConnection.toHandle.nodeId === newConnection.toHandle.nodeId &&\n            previousConnection.toHandle.id === newConnection.toHandle.id &&\n            previousConnection.to.x === newConnection.to.x &&\n            previousConnection.to.y === newConnection.to.y) {\n            return;\n        }\n        updateConnection(newConnection);\n        previousConnection = newConnection;\n    }\n    function onPointerUp(event) {\n        if (connectionStarted) {\n            if ((closestHandle || resultHandleDomNode) && connection && isValid) {\n                onConnect?.(connection);\n            }\n            /*\n             * it's important to get a fresh reference from the store here\n             * in order to get the latest state of onConnectEnd\n             */\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            const { inProgress, ...connectionState } = previousConnection;\n            const finalConnectionState = {\n                ...connectionState,\n                toPosition: previousConnection.toHandle ? previousConnection.toPosition : null,\n            };\n            onConnectEnd?.(event, finalConnectionState);\n            if (edgeUpdaterType) {\n                onReconnectEnd?.(event, finalConnectionState);\n            }\n        }\n        cancelConnection();\n        cancelAnimationFrame(autoPanId);\n        autoPanStarted = false;\n        isValid = false;\n        connection = null;\n        resultHandleDomNode = null;\n        doc.removeEventListener('mousemove', onPointerMove);\n        doc.removeEventListener('mouseup', onPointerUp);\n        doc.removeEventListener('touchmove', onPointerMove);\n        doc.removeEventListener('touchend', onPointerUp);\n    }\n    doc.addEventListener('mousemove', onPointerMove);\n    doc.addEventListener('mouseup', onPointerUp);\n    doc.addEventListener('touchmove', onPointerMove);\n    doc.addEventListener('touchend', onPointerUp);\n}\n// checks if  and returns connection in fom of an object { source: 123, target: 312 }\nfunction isValidHandle(event, { handle, connectionMode, fromNodeId, fromHandleId, fromType, doc, lib, flowId, isValidConnection = alwaysValid, nodeLookup, }) {\n    const isTarget = fromType === 'target';\n    const handleDomNode = handle\n        ? doc.querySelector(`.${lib}-flow__handle[data-id=\"${flowId}-${handle?.nodeId}-${handle?.id}-${handle?.type}\"]`)\n        : null;\n    const { x, y } = getEventPosition(event);\n    const handleBelow = doc.elementFromPoint(x, y);\n    /*\n     * we always want to prioritize the handle below the mouse cursor over the closest distance handle,\n     * because it could be that the center of another handle is closer to the mouse pointer than the handle below the cursor\n     */\n    const handleToCheck = handleBelow?.classList.contains(`${lib}-flow__handle`) ? handleBelow : handleDomNode;\n    const result = {\n        handleDomNode: handleToCheck,\n        isValid: false,\n        connection: null,\n        toHandle: null,\n    };\n    if (handleToCheck) {\n        const handleType = getHandleType(undefined, handleToCheck);\n        const handleNodeId = handleToCheck.getAttribute('data-nodeid');\n        const handleId = handleToCheck.getAttribute('data-handleid');\n        const connectable = handleToCheck.classList.contains('connectable');\n        const connectableEnd = handleToCheck.classList.contains('connectableend');\n        if (!handleNodeId || !handleType) {\n            return result;\n        }\n        const connection = {\n            source: isTarget ? handleNodeId : fromNodeId,\n            sourceHandle: isTarget ? handleId : fromHandleId,\n            target: isTarget ? fromNodeId : handleNodeId,\n            targetHandle: isTarget ? fromHandleId : handleId,\n        };\n        result.connection = connection;\n        const isConnectable = connectable && connectableEnd;\n        // in strict mode we don't allow target to target or source to source connections\n        const isValid = isConnectable &&\n            (connectionMode === ConnectionMode.Strict\n                ? (isTarget && handleType === 'source') || (!isTarget && handleType === 'target')\n                : handleNodeId !== fromNodeId || handleId !== fromHandleId);\n        result.isValid = isValid && isValidConnection(connection);\n        result.toHandle = getHandle(handleNodeId, handleType, handleId, nodeLookup, connectionMode, true);\n    }\n    return result;\n}\nconst XYHandle = {\n    onPointerDown,\n    isValid: isValidHandle,\n};\n\nfunction XYMinimap({ domNode, panZoom, getTransform, getViewScale }) {\n    const selection = select(domNode);\n    function update({ translateExtent, width, height, zoomStep = 1, pannable = true, zoomable = true, inversePan = false, }) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const zoomHandler = (event) => {\n            if (event.sourceEvent.type !== 'wheel' || !panZoom) {\n                return;\n            }\n            const transform = getTransform();\n            const factor = event.sourceEvent.ctrlKey && isMacOs() ? 10 : 1;\n            const pinchDelta = -event.sourceEvent.deltaY *\n                (event.sourceEvent.deltaMode === 1 ? 0.05 : event.sourceEvent.deltaMode ? 1 : 0.002) *\n                zoomStep;\n            const nextZoom = transform[2] * Math.pow(2, pinchDelta * factor);\n            panZoom.scaleTo(nextZoom);\n        };\n        let panStart = [0, 0];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const panStartHandler = (event) => {\n            if (event.sourceEvent.type === 'mousedown' || event.sourceEvent.type === 'touchstart') {\n                panStart = [\n                    event.sourceEvent.clientX ?? event.sourceEvent.touches[0].clientX,\n                    event.sourceEvent.clientY ?? event.sourceEvent.touches[0].clientY,\n                ];\n            }\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const panHandler = (event) => {\n            const transform = getTransform();\n            if ((event.sourceEvent.type !== 'mousemove' && event.sourceEvent.type !== 'touchmove') || !panZoom) {\n                return;\n            }\n            const panCurrent = [\n                event.sourceEvent.clientX ?? event.sourceEvent.touches[0].clientX,\n                event.sourceEvent.clientY ?? event.sourceEvent.touches[0].clientY,\n            ];\n            const panDelta = [panCurrent[0] - panStart[0], panCurrent[1] - panStart[1]];\n            panStart = panCurrent;\n            const moveScale = getViewScale() * Math.max(transform[2], Math.log(transform[2])) * (inversePan ? -1 : 1);\n            const position = {\n                x: transform[0] - panDelta[0] * moveScale,\n                y: transform[1] - panDelta[1] * moveScale,\n            };\n            const extent = [\n                [0, 0],\n                [width, height],\n            ];\n            panZoom.setViewportConstrained({\n                x: position.x,\n                y: position.y,\n                zoom: transform[2],\n            }, extent, translateExtent);\n        };\n        const zoomAndPanHandler = zoom()\n            .on('start', panStartHandler)\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            .on('zoom', pannable ? panHandler : null)\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            .on('zoom.wheel', zoomable ? zoomHandler : null);\n        selection.call(zoomAndPanHandler, {});\n    }\n    function destroy() {\n        selection.on('zoom', null);\n    }\n    return {\n        update,\n        destroy,\n        pointer,\n    };\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nconst viewChanged = (prevViewport, eventViewport) => prevViewport.x !== eventViewport.x || prevViewport.y !== eventViewport.y || prevViewport.zoom !== eventViewport.k;\nconst transformToViewport = (transform) => ({\n    x: transform.x,\n    y: transform.y,\n    zoom: transform.k,\n});\nconst viewportToTransform = ({ x, y, zoom }) => zoomIdentity.translate(x, y).scale(zoom);\nconst isWrappedWithClass = (event, className) => event.target.closest(`.${className}`);\nconst isRightClickPan = (panOnDrag, usedButton) => usedButton === 2 && Array.isArray(panOnDrag) && panOnDrag.includes(2);\n// taken from d3-ease: https://github.com/d3/d3-ease/blob/main/src/cubic.js\nconst defaultEase = (t) => ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\nconst getD3Transition = (selection, duration = 0, ease = defaultEase, onEnd = () => { }) => {\n    const hasDuration = typeof duration === 'number' && duration > 0;\n    if (!hasDuration) {\n        onEnd();\n    }\n    return hasDuration ? selection.transition().duration(duration).ease(ease).on('end', onEnd) : selection;\n};\nconst wheelDelta = (event) => {\n    const factor = event.ctrlKey && isMacOs() ? 10 : 1;\n    return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * factor;\n};\n\nfunction createPanOnScrollHandler({ zoomPanValues, noWheelClassName, d3Selection, d3Zoom, panOnScrollMode, panOnScrollSpeed, zoomOnPinch, onPanZoomStart, onPanZoom, onPanZoomEnd, }) {\n    return (event) => {\n        if (isWrappedWithClass(event, noWheelClassName)) {\n            return false;\n        }\n        event.preventDefault();\n        event.stopImmediatePropagation();\n        const currentZoom = d3Selection.property('__zoom').k || 1;\n        // macos sets ctrlKey=true for pinch gesture on a trackpad\n        if (event.ctrlKey && zoomOnPinch) {\n            const point = pointer(event);\n            const pinchDelta = wheelDelta(event);\n            const zoom = currentZoom * Math.pow(2, pinchDelta);\n            // @ts-ignore\n            d3Zoom.scaleTo(d3Selection, zoom, point, event);\n            return;\n        }\n        /*\n         * increase scroll speed in firefox\n         * firefox: deltaMode === 1; chrome: deltaMode === 0\n         */\n        const deltaNormalize = event.deltaMode === 1 ? 20 : 1;\n        let deltaX = panOnScrollMode === PanOnScrollMode.Vertical ? 0 : event.deltaX * deltaNormalize;\n        let deltaY = panOnScrollMode === PanOnScrollMode.Horizontal ? 0 : event.deltaY * deltaNormalize;\n        // this enables vertical scrolling with shift + scroll on windows\n        if (!isMacOs() && event.shiftKey && panOnScrollMode !== PanOnScrollMode.Vertical) {\n            deltaX = event.deltaY * deltaNormalize;\n            deltaY = 0;\n        }\n        d3Zoom.translateBy(d3Selection, -(deltaX / currentZoom) * panOnScrollSpeed, -(deltaY / currentZoom) * panOnScrollSpeed, \n        // @ts-ignore\n        { internal: true });\n        const nextViewport = transformToViewport(d3Selection.property('__zoom'));\n        clearTimeout(zoomPanValues.panScrollTimeout);\n        /*\n         * for pan on scroll we need to handle the event calls on our own\n         * we can't use the start, zoom and end events from d3-zoom\n         * because start and move gets called on every scroll event and not once at the beginning\n         */\n        if (!zoomPanValues.isPanScrolling) {\n            zoomPanValues.isPanScrolling = true;\n            onPanZoomStart?.(event, nextViewport);\n        }\n        if (zoomPanValues.isPanScrolling) {\n            onPanZoom?.(event, nextViewport);\n            zoomPanValues.panScrollTimeout = setTimeout(() => {\n                onPanZoomEnd?.(event, nextViewport);\n                zoomPanValues.isPanScrolling = false;\n            }, 150);\n        }\n    };\n}\nfunction createZoomOnScrollHandler({ noWheelClassName, preventScrolling, d3ZoomHandler }) {\n    return function (event, d) {\n        const isWheel = event.type === 'wheel';\n        // we still want to enable pinch zooming even if preventScrolling is set to false\n        const preventZoom = !preventScrolling && isWheel && !event.ctrlKey;\n        const hasNoWheelClass = isWrappedWithClass(event, noWheelClassName);\n        // if user is pinch zooming above a nowheel element, we don't want the browser to zoom\n        if (event.ctrlKey && isWheel && hasNoWheelClass) {\n            event.preventDefault();\n        }\n        if (preventZoom || hasNoWheelClass) {\n            return null;\n        }\n        event.preventDefault();\n        d3ZoomHandler.call(this, event, d);\n    };\n}\nfunction createPanZoomStartHandler({ zoomPanValues, onDraggingChange, onPanZoomStart }) {\n    return (event) => {\n        if (event.sourceEvent?.internal) {\n            return;\n        }\n        const viewport = transformToViewport(event.transform);\n        // we need to remember it here, because it's always 0 in the \"zoom\" event\n        zoomPanValues.mouseButton = event.sourceEvent?.button || 0;\n        zoomPanValues.isZoomingOrPanning = true;\n        zoomPanValues.prevViewport = viewport;\n        if (event.sourceEvent?.type === 'mousedown') {\n            onDraggingChange(true);\n        }\n        if (onPanZoomStart) {\n            onPanZoomStart?.(event.sourceEvent, viewport);\n        }\n    };\n}\nfunction createPanZoomHandler({ zoomPanValues, panOnDrag, onPaneContextMenu, onTransformChange, onPanZoom, }) {\n    return (event) => {\n        zoomPanValues.usedRightMouseButton = !!(onPaneContextMenu && isRightClickPan(panOnDrag, zoomPanValues.mouseButton ?? 0));\n        if (!event.sourceEvent?.sync) {\n            onTransformChange([event.transform.x, event.transform.y, event.transform.k]);\n        }\n        if (onPanZoom && !event.sourceEvent?.internal) {\n            onPanZoom?.(event.sourceEvent, transformToViewport(event.transform));\n        }\n    };\n}\nfunction createPanZoomEndHandler({ zoomPanValues, panOnDrag, panOnScroll, onDraggingChange, onPanZoomEnd, onPaneContextMenu, }) {\n    return (event) => {\n        if (event.sourceEvent?.internal) {\n            return;\n        }\n        zoomPanValues.isZoomingOrPanning = false;\n        if (onPaneContextMenu &&\n            isRightClickPan(panOnDrag, zoomPanValues.mouseButton ?? 0) &&\n            !zoomPanValues.usedRightMouseButton &&\n            event.sourceEvent) {\n            onPaneContextMenu(event.sourceEvent);\n        }\n        zoomPanValues.usedRightMouseButton = false;\n        onDraggingChange(false);\n        if (onPanZoomEnd && viewChanged(zoomPanValues.prevViewport, event.transform)) {\n            const viewport = transformToViewport(event.transform);\n            zoomPanValues.prevViewport = viewport;\n            clearTimeout(zoomPanValues.timerId);\n            zoomPanValues.timerId = setTimeout(() => {\n                onPanZoomEnd?.(event.sourceEvent, viewport);\n            }, \n            // we need a setTimeout for panOnScroll to supress multiple end events fired during scroll\n            panOnScroll ? 150 : 0);\n        }\n    };\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nfunction createFilter({ zoomActivationKeyPressed, zoomOnScroll, zoomOnPinch, panOnDrag, panOnScroll, zoomOnDoubleClick, userSelectionActive, noWheelClassName, noPanClassName, lib, }) {\n    return (event) => {\n        const zoomScroll = zoomActivationKeyPressed || zoomOnScroll;\n        const pinchZoom = zoomOnPinch && event.ctrlKey;\n        if (event.button === 1 &&\n            event.type === 'mousedown' &&\n            (isWrappedWithClass(event, `${lib}-flow__node`) || isWrappedWithClass(event, `${lib}-flow__edge`))) {\n            return true;\n        }\n        // if all interactions are disabled, we prevent all zoom events\n        if (!panOnDrag && !zoomScroll && !panOnScroll && !zoomOnDoubleClick && !zoomOnPinch) {\n            return false;\n        }\n        // during a selection we prevent all other interactions\n        if (userSelectionActive) {\n            return false;\n        }\n        // if the target element is inside an element with the nowheel class, we prevent zooming\n        if (isWrappedWithClass(event, noWheelClassName) && event.type === 'wheel') {\n            return false;\n        }\n        // if the target element is inside an element with the nopan class, we prevent panning\n        if (isWrappedWithClass(event, noPanClassName) &&\n            (event.type !== 'wheel' || (panOnScroll && event.type === 'wheel' && !zoomActivationKeyPressed))) {\n            return false;\n        }\n        if (!zoomOnPinch && event.ctrlKey && event.type === 'wheel') {\n            return false;\n        }\n        if (!zoomOnPinch && event.type === 'touchstart' && event.touches?.length > 1) {\n            event.preventDefault(); // if you manage to start with 2 touches, we prevent native zoom\n            return false;\n        }\n        // when there is no scroll handling enabled, we prevent all wheel events\n        if (!zoomScroll && !panOnScroll && !pinchZoom && event.type === 'wheel') {\n            return false;\n        }\n        // if the pane is not movable, we prevent dragging it with mousestart or touchstart\n        if (!panOnDrag && (event.type === 'mousedown' || event.type === 'touchstart')) {\n            return false;\n        }\n        // if the pane is only movable using allowed clicks\n        if (Array.isArray(panOnDrag) && !panOnDrag.includes(event.button) && event.type === 'mousedown') {\n            return false;\n        }\n        // We only allow right clicks if pan on drag is set to right click\n        const buttonAllowed = (Array.isArray(panOnDrag) && panOnDrag.includes(event.button)) || !event.button || event.button <= 1;\n        // default filter for d3-zoom\n        return (!event.ctrlKey || event.type === 'wheel') && buttonAllowed;\n    };\n}\n\nfunction XYPanZoom({ domNode, minZoom, maxZoom, paneClickDistance, translateExtent, viewport, onPanZoom, onPanZoomStart, onPanZoomEnd, onDraggingChange, }) {\n    const zoomPanValues = {\n        isZoomingOrPanning: false,\n        usedRightMouseButton: false,\n        prevViewport: { x: 0, y: 0, zoom: 0 },\n        mouseButton: 0,\n        timerId: undefined,\n        panScrollTimeout: undefined,\n        isPanScrolling: false,\n    };\n    const bbox = domNode.getBoundingClientRect();\n    const d3ZoomInstance = zoom()\n        .clickDistance(!isNumeric(paneClickDistance) || paneClickDistance < 0 ? 0 : paneClickDistance)\n        .scaleExtent([minZoom, maxZoom])\n        .translateExtent(translateExtent);\n    const d3Selection = select(domNode).call(d3ZoomInstance);\n    setViewportConstrained({\n        x: viewport.x,\n        y: viewport.y,\n        zoom: clamp(viewport.zoom, minZoom, maxZoom),\n    }, [\n        [0, 0],\n        [bbox.width, bbox.height],\n    ], translateExtent);\n    const d3ZoomHandler = d3Selection.on('wheel.zoom');\n    const d3DblClickZoomHandler = d3Selection.on('dblclick.zoom');\n    d3ZoomInstance.wheelDelta(wheelDelta);\n    function setTransform(transform, options) {\n        if (d3Selection) {\n            return new Promise((resolve) => {\n                d3ZoomInstance?.interpolate(options?.interpolate === 'linear' ? interpolate : interpolateZoom).transform(getD3Transition(d3Selection, options?.duration, options?.ease, () => resolve(true)), transform);\n            });\n        }\n        return Promise.resolve(false);\n    }\n    // public functions\n    function update({ noWheelClassName, noPanClassName, onPaneContextMenu, userSelectionActive, panOnScroll, panOnDrag, panOnScrollMode, panOnScrollSpeed, preventScrolling, zoomOnPinch, zoomOnScroll, zoomOnDoubleClick, zoomActivationKeyPressed, lib, onTransformChange, }) {\n        if (userSelectionActive && !zoomPanValues.isZoomingOrPanning) {\n            destroy();\n        }\n        const isPanOnScroll = panOnScroll && !zoomActivationKeyPressed && !userSelectionActive;\n        const wheelHandler = isPanOnScroll\n            ? createPanOnScrollHandler({\n                zoomPanValues,\n                noWheelClassName,\n                d3Selection,\n                d3Zoom: d3ZoomInstance,\n                panOnScrollMode,\n                panOnScrollSpeed,\n                zoomOnPinch,\n                onPanZoomStart,\n                onPanZoom,\n                onPanZoomEnd,\n            })\n            : createZoomOnScrollHandler({\n                noWheelClassName,\n                preventScrolling,\n                d3ZoomHandler,\n            });\n        d3Selection.on('wheel.zoom', wheelHandler, { passive: false });\n        if (!userSelectionActive) {\n            // pan zoom start\n            const startHandler = createPanZoomStartHandler({\n                zoomPanValues,\n                onDraggingChange,\n                onPanZoomStart,\n            });\n            d3ZoomInstance.on('start', startHandler);\n            // pan zoom\n            const panZoomHandler = createPanZoomHandler({\n                zoomPanValues,\n                panOnDrag,\n                onPaneContextMenu: !!onPaneContextMenu,\n                onPanZoom,\n                onTransformChange,\n            });\n            d3ZoomInstance.on('zoom', panZoomHandler);\n            // pan zoom end\n            const panZoomEndHandler = createPanZoomEndHandler({\n                zoomPanValues,\n                panOnDrag,\n                panOnScroll,\n                onPaneContextMenu,\n                onPanZoomEnd,\n                onDraggingChange,\n            });\n            d3ZoomInstance.on('end', panZoomEndHandler);\n        }\n        const filter = createFilter({\n            zoomActivationKeyPressed,\n            panOnDrag,\n            zoomOnScroll,\n            panOnScroll,\n            zoomOnDoubleClick,\n            zoomOnPinch,\n            userSelectionActive,\n            noPanClassName,\n            noWheelClassName,\n            lib,\n        });\n        d3ZoomInstance.filter(filter);\n        /*\n         * We cannot add zoomOnDoubleClick to the filter above because\n         * double tapping on touch screens circumvents the filter and\n         * dblclick.zoom is fired on the selection directly\n         */\n        if (zoomOnDoubleClick) {\n            d3Selection.on('dblclick.zoom', d3DblClickZoomHandler);\n        }\n        else {\n            d3Selection.on('dblclick.zoom', null);\n        }\n    }\n    function destroy() {\n        d3ZoomInstance.on('zoom', null);\n    }\n    async function setViewportConstrained(viewport, extent, translateExtent) {\n        const nextTransform = viewportToTransform(viewport);\n        const contrainedTransform = d3ZoomInstance?.constrain()(nextTransform, extent, translateExtent);\n        if (contrainedTransform) {\n            await setTransform(contrainedTransform);\n        }\n        return new Promise((resolve) => resolve(contrainedTransform));\n    }\n    async function setViewport(viewport, options) {\n        const nextTransform = viewportToTransform(viewport);\n        await setTransform(nextTransform, options);\n        return new Promise((resolve) => resolve(nextTransform));\n    }\n    function syncViewport(viewport) {\n        if (d3Selection) {\n            const nextTransform = viewportToTransform(viewport);\n            const currentTransform = d3Selection.property('__zoom');\n            if (currentTransform.k !== viewport.zoom ||\n                currentTransform.x !== viewport.x ||\n                currentTransform.y !== viewport.y) {\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore\n                d3ZoomInstance?.transform(d3Selection, nextTransform, null, { sync: true });\n            }\n        }\n    }\n    function getViewport() {\n        const transform = d3Selection ? zoomTransform(d3Selection.node()) : { x: 0, y: 0, k: 1 };\n        return { x: transform.x, y: transform.y, zoom: transform.k };\n    }\n    function scaleTo(zoom, options) {\n        if (d3Selection) {\n            return new Promise((resolve) => {\n                d3ZoomInstance?.interpolate(options?.interpolate === 'linear' ? interpolate : interpolateZoom).scaleTo(getD3Transition(d3Selection, options?.duration, options?.ease, () => resolve(true)), zoom);\n            });\n        }\n        return Promise.resolve(false);\n    }\n    function scaleBy(factor, options) {\n        if (d3Selection) {\n            return new Promise((resolve) => {\n                d3ZoomInstance?.interpolate(options?.interpolate === 'linear' ? interpolate : interpolateZoom).scaleBy(getD3Transition(d3Selection, options?.duration, options?.ease, () => resolve(true)), factor);\n            });\n        }\n        return Promise.resolve(false);\n    }\n    function setScaleExtent(scaleExtent) {\n        d3ZoomInstance?.scaleExtent(scaleExtent);\n    }\n    function setTranslateExtent(translateExtent) {\n        d3ZoomInstance?.translateExtent(translateExtent);\n    }\n    function setClickDistance(distance) {\n        const validDistance = !isNumeric(distance) || distance < 0 ? 0 : distance;\n        d3ZoomInstance?.clickDistance(validDistance);\n    }\n    return {\n        update,\n        destroy,\n        setViewport,\n        setViewportConstrained,\n        getViewport,\n        scaleTo,\n        scaleBy,\n        setScaleExtent,\n        setTranslateExtent,\n        syncViewport,\n        setClickDistance,\n    };\n}\n\n/**\n * Used to determine the variant of the resize control\n *\n * @public\n */\nvar ResizeControlVariant;\n(function (ResizeControlVariant) {\n    ResizeControlVariant[\"Line\"] = \"line\";\n    ResizeControlVariant[\"Handle\"] = \"handle\";\n})(ResizeControlVariant || (ResizeControlVariant = {}));\nconst XY_RESIZER_HANDLE_POSITIONS = ['top-left', 'top-right', 'bottom-left', 'bottom-right'];\nconst XY_RESIZER_LINE_POSITIONS = ['top', 'right', 'bottom', 'left'];\n\n/**\n * Get all connecting edges for a given set of nodes\n * @param width - new width of the node\n * @param prevWidth - previous width of the node\n * @param height - new height of the node\n * @param prevHeight - previous height of the node\n * @param affectsX - whether to invert the resize direction for the x axis\n * @param affectsY - whether to invert the resize direction for the y axis\n * @returns array of two numbers representing the direction of the resize for each axis, 0 = no change, 1 = increase, -1 = decrease\n */\nfunction getResizeDirection({ width, prevWidth, height, prevHeight, affectsX, affectsY, }) {\n    const deltaWidth = width - prevWidth;\n    const deltaHeight = height - prevHeight;\n    const direction = [deltaWidth > 0 ? 1 : deltaWidth < 0 ? -1 : 0, deltaHeight > 0 ? 1 : deltaHeight < 0 ? -1 : 0];\n    if (deltaWidth && affectsX) {\n        direction[0] = direction[0] * -1;\n    }\n    if (deltaHeight && affectsY) {\n        direction[1] = direction[1] * -1;\n    }\n    return direction;\n}\n/**\n * Parses the control position that is being dragged to dimensions that are being resized\n * @param controlPosition - position of the control that is being dragged\n * @returns isHorizontal, isVertical, affectsX, affectsY,\n */\nfunction getControlDirection(controlPosition) {\n    const isHorizontal = controlPosition.includes('right') || controlPosition.includes('left');\n    const isVertical = controlPosition.includes('bottom') || controlPosition.includes('top');\n    const affectsX = controlPosition.includes('left');\n    const affectsY = controlPosition.includes('top');\n    return {\n        isHorizontal,\n        isVertical,\n        affectsX,\n        affectsY,\n    };\n}\nfunction getLowerExtentClamp(lowerExtent, lowerBound) {\n    return Math.max(0, lowerBound - lowerExtent);\n}\nfunction getUpperExtentClamp(upperExtent, upperBound) {\n    return Math.max(0, upperExtent - upperBound);\n}\nfunction getSizeClamp(size, minSize, maxSize) {\n    return Math.max(0, minSize - size, size - maxSize);\n}\nfunction xor(a, b) {\n    return a ? !b : b;\n}\n/**\n * Calculates new width & height and x & y of node after resize based on pointer position\n * @description - Buckle up, this is a chunky one... If you want to determine the new dimensions of a node after a resize,\n * you have to account for all possible restrictions: min/max width/height of the node, the maximum extent the node is allowed\n * to move in (in this case: resize into) determined by the parent node, the minimal extent determined by child nodes\n * with expandParent or extent: 'parent' set and oh yeah, these things also have to work with keepAspectRatio!\n * The way this is done is by determining how much each of these restricting actually restricts the resize and then applying the\n * strongest restriction. Because the resize affects x, y and width, height and width, height of a opposing side with keepAspectRatio,\n * the resize amount is always kept in distX & distY amount (the distance in mouse movement)\n * Instead of clamping each value, we first calculate the biggest 'clamp' (for the lack of a better name) and then apply it to all values.\n * To complicate things nodeOrigin has to be taken into account as well. This is done by offsetting the nodes as if their origin is [0, 0],\n * then calculating the restrictions as usual\n * @param startValues - starting values of resize\n * @param controlDirection - dimensions affected by the resize\n * @param pointerPosition - the current pointer position corrected for snapping\n * @param boundaries - minimum and maximum dimensions of the node\n * @param keepAspectRatio - prevent changes of asprect ratio\n * @returns x, y, width and height of the node after resize\n */\nfunction getDimensionsAfterResize(startValues, controlDirection, pointerPosition, boundaries, keepAspectRatio, nodeOrigin, extent, childExtent) {\n    let { affectsX, affectsY } = controlDirection;\n    const { isHorizontal, isVertical } = controlDirection;\n    const isDiagonal = isHorizontal && isVertical;\n    const { xSnapped, ySnapped } = pointerPosition;\n    const { minWidth, maxWidth, minHeight, maxHeight } = boundaries;\n    const { x: startX, y: startY, width: startWidth, height: startHeight, aspectRatio } = startValues;\n    let distX = Math.floor(isHorizontal ? xSnapped - startValues.pointerX : 0);\n    let distY = Math.floor(isVertical ? ySnapped - startValues.pointerY : 0);\n    const newWidth = startWidth + (affectsX ? -distX : distX);\n    const newHeight = startHeight + (affectsY ? -distY : distY);\n    const originOffsetX = -nodeOrigin[0] * startWidth;\n    const originOffsetY = -nodeOrigin[1] * startHeight;\n    // Check if maxWidth, minWWidth, maxHeight, minHeight are restricting the resize\n    let clampX = getSizeClamp(newWidth, minWidth, maxWidth);\n    let clampY = getSizeClamp(newHeight, minHeight, maxHeight);\n    // Check if extent is restricting the resize\n    if (extent) {\n        let xExtentClamp = 0;\n        let yExtentClamp = 0;\n        if (affectsX && distX < 0) {\n            xExtentClamp = getLowerExtentClamp(startX + distX + originOffsetX, extent[0][0]);\n        }\n        else if (!affectsX && distX > 0) {\n            xExtentClamp = getUpperExtentClamp(startX + newWidth + originOffsetX, extent[1][0]);\n        }\n        if (affectsY && distY < 0) {\n            yExtentClamp = getLowerExtentClamp(startY + distY + originOffsetY, extent[0][1]);\n        }\n        else if (!affectsY && distY > 0) {\n            yExtentClamp = getUpperExtentClamp(startY + newHeight + originOffsetY, extent[1][1]);\n        }\n        clampX = Math.max(clampX, xExtentClamp);\n        clampY = Math.max(clampY, yExtentClamp);\n    }\n    // Check if the child extent is restricting the resize\n    if (childExtent) {\n        let xExtentClamp = 0;\n        let yExtentClamp = 0;\n        if (affectsX && distX > 0) {\n            xExtentClamp = getUpperExtentClamp(startX + distX, childExtent[0][0]);\n        }\n        else if (!affectsX && distX < 0) {\n            xExtentClamp = getLowerExtentClamp(startX + newWidth, childExtent[1][0]);\n        }\n        if (affectsY && distY > 0) {\n            yExtentClamp = getUpperExtentClamp(startY + distY, childExtent[0][1]);\n        }\n        else if (!affectsY && distY < 0) {\n            yExtentClamp = getLowerExtentClamp(startY + newHeight, childExtent[1][1]);\n        }\n        clampX = Math.max(clampX, xExtentClamp);\n        clampY = Math.max(clampY, yExtentClamp);\n    }\n    // Check if the aspect ratio resizing of the other side is restricting the resize\n    if (keepAspectRatio) {\n        if (isHorizontal) {\n            // Check if the max dimensions might be restricting the resize\n            const aspectHeightClamp = getSizeClamp(newWidth / aspectRatio, minHeight, maxHeight) * aspectRatio;\n            clampX = Math.max(clampX, aspectHeightClamp);\n            // Check if the extent is restricting the resize\n            if (extent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsX && !affectsY && isDiagonal)) {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startY + originOffsetY + newWidth / aspectRatio, extent[1][1]) * aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getLowerExtentClamp(startY + originOffsetY + (affectsX ? distX : -distX) / aspectRatio, extent[0][1]) *\n                            aspectRatio;\n                }\n                clampX = Math.max(clampX, aspectExtentClamp);\n            }\n            // Check if the child extent is restricting the resize\n            if (childExtent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsX && !affectsY && isDiagonal)) {\n                    aspectExtentClamp = getLowerExtentClamp(startY + newWidth / aspectRatio, childExtent[1][1]) * aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startY + (affectsX ? distX : -distX) / aspectRatio, childExtent[0][1]) * aspectRatio;\n                }\n                clampX = Math.max(clampX, aspectExtentClamp);\n            }\n        }\n        // Do the same thing for vertical resizing\n        if (isVertical) {\n            const aspectWidthClamp = getSizeClamp(newHeight * aspectRatio, minWidth, maxWidth) / aspectRatio;\n            clampY = Math.max(clampY, aspectWidthClamp);\n            if (extent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsY && !affectsX && isDiagonal)) {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startX + newHeight * aspectRatio + originOffsetX, extent[1][0]) / aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getLowerExtentClamp(startX + (affectsY ? distY : -distY) * aspectRatio + originOffsetX, extent[0][0]) /\n                            aspectRatio;\n                }\n                clampY = Math.max(clampY, aspectExtentClamp);\n            }\n            if (childExtent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsY && !affectsX && isDiagonal)) {\n                    aspectExtentClamp = getLowerExtentClamp(startX + newHeight * aspectRatio, childExtent[1][0]) / aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startX + (affectsY ? distY : -distY) * aspectRatio, childExtent[0][0]) / aspectRatio;\n                }\n                clampY = Math.max(clampY, aspectExtentClamp);\n            }\n        }\n    }\n    distY = distY + (distY < 0 ? clampY : -clampY);\n    distX = distX + (distX < 0 ? clampX : -clampX);\n    if (keepAspectRatio) {\n        if (isDiagonal) {\n            if (newWidth > newHeight * aspectRatio) {\n                distY = (xor(affectsX, affectsY) ? -distX : distX) / aspectRatio;\n            }\n            else {\n                distX = (xor(affectsX, affectsY) ? -distY : distY) * aspectRatio;\n            }\n        }\n        else {\n            if (isHorizontal) {\n                distY = distX / aspectRatio;\n                affectsY = affectsX;\n            }\n            else {\n                distX = distY * aspectRatio;\n                affectsX = affectsY;\n            }\n        }\n    }\n    const x = affectsX ? startX + distX : startX;\n    const y = affectsY ? startY + distY : startY;\n    return {\n        width: startWidth + (affectsX ? -distX : distX),\n        height: startHeight + (affectsY ? -distY : distY),\n        x: nodeOrigin[0] * distX * (!affectsX ? 1 : -1) + x,\n        y: nodeOrigin[1] * distY * (!affectsY ? 1 : -1) + y,\n    };\n}\n\nconst initPrevValues = { width: 0, height: 0, x: 0, y: 0 };\nconst initStartValues = {\n    ...initPrevValues,\n    pointerX: 0,\n    pointerY: 0,\n    aspectRatio: 1,\n};\nfunction nodeToParentExtent(node) {\n    return [\n        [0, 0],\n        [node.measured.width, node.measured.height],\n    ];\n}\nfunction nodeToChildExtent(child, parent, nodeOrigin) {\n    const x = parent.position.x + child.position.x;\n    const y = parent.position.y + child.position.y;\n    const width = child.measured.width ?? 0;\n    const height = child.measured.height ?? 0;\n    const originOffsetX = nodeOrigin[0] * width;\n    const originOffsetY = nodeOrigin[1] * height;\n    return [\n        [x - originOffsetX, y - originOffsetY],\n        [x + width - originOffsetX, y + height - originOffsetY],\n    ];\n}\nfunction XYResizer({ domNode, nodeId, getStoreItems, onChange, onEnd }) {\n    const selection = select(domNode);\n    function update({ controlPosition, boundaries, keepAspectRatio, resizeDirection, onResizeStart, onResize, onResizeEnd, shouldResize, }) {\n        let prevValues = { ...initPrevValues };\n        let startValues = { ...initStartValues };\n        const controlDirection = getControlDirection(controlPosition);\n        let node = undefined;\n        let containerBounds = null;\n        let childNodes = [];\n        let parentNode = undefined; // Needed to fix expandParent\n        let parentExtent = undefined;\n        let childExtent = undefined;\n        const dragHandler = drag()\n            .on('start', (event) => {\n            const { nodeLookup, transform, snapGrid, snapToGrid, nodeOrigin, paneDomNode } = getStoreItems();\n            node = nodeLookup.get(nodeId);\n            if (!node) {\n                return;\n            }\n            containerBounds = paneDomNode?.getBoundingClientRect() ?? null;\n            const { xSnapped, ySnapped } = getPointerPosition(event.sourceEvent, {\n                transform,\n                snapGrid,\n                snapToGrid,\n                containerBounds,\n            });\n            prevValues = {\n                width: node.measured.width ?? 0,\n                height: node.measured.height ?? 0,\n                x: node.position.x ?? 0,\n                y: node.position.y ?? 0,\n            };\n            startValues = {\n                ...prevValues,\n                pointerX: xSnapped,\n                pointerY: ySnapped,\n                aspectRatio: prevValues.width / prevValues.height,\n            };\n            parentNode = undefined;\n            if (node.parentId && (node.extent === 'parent' || node.expandParent)) {\n                parentNode = nodeLookup.get(node.parentId);\n                parentExtent = parentNode && node.extent === 'parent' ? nodeToParentExtent(parentNode) : undefined;\n            }\n            /*\n             * Collect all child nodes to correct their relative positions when top/left changes\n             * Determine largest minimal extent the parent node is allowed to resize to\n             */\n            childNodes = [];\n            childExtent = undefined;\n            for (const [childId, child] of nodeLookup) {\n                if (child.parentId === nodeId) {\n                    childNodes.push({\n                        id: childId,\n                        position: { ...child.position },\n                        extent: child.extent,\n                    });\n                    if (child.extent === 'parent' || child.expandParent) {\n                        const extent = nodeToChildExtent(child, node, child.origin ?? nodeOrigin);\n                        if (childExtent) {\n                            childExtent = [\n                                [Math.min(extent[0][0], childExtent[0][0]), Math.min(extent[0][1], childExtent[0][1])],\n                                [Math.max(extent[1][0], childExtent[1][0]), Math.max(extent[1][1], childExtent[1][1])],\n                            ];\n                        }\n                        else {\n                            childExtent = extent;\n                        }\n                    }\n                }\n            }\n            onResizeStart?.(event, { ...prevValues });\n        })\n            .on('drag', (event) => {\n            const { transform, snapGrid, snapToGrid, nodeOrigin: storeNodeOrigin } = getStoreItems();\n            const pointerPosition = getPointerPosition(event.sourceEvent, {\n                transform,\n                snapGrid,\n                snapToGrid,\n                containerBounds,\n            });\n            const childChanges = [];\n            if (!node) {\n                return;\n            }\n            const { x: prevX, y: prevY, width: prevWidth, height: prevHeight } = prevValues;\n            const change = {};\n            const nodeOrigin = node.origin ?? storeNodeOrigin;\n            const { width, height, x, y } = getDimensionsAfterResize(startValues, controlDirection, pointerPosition, boundaries, keepAspectRatio, nodeOrigin, parentExtent, childExtent);\n            const isWidthChange = width !== prevWidth;\n            const isHeightChange = height !== prevHeight;\n            const isXPosChange = x !== prevX && isWidthChange;\n            const isYPosChange = y !== prevY && isHeightChange;\n            if (!isXPosChange && !isYPosChange && !isWidthChange && !isHeightChange) {\n                return;\n            }\n            if (isXPosChange || isYPosChange || nodeOrigin[0] === 1 || nodeOrigin[1] === 1) {\n                change.x = isXPosChange ? x : prevValues.x;\n                change.y = isYPosChange ? y : prevValues.y;\n                prevValues.x = change.x;\n                prevValues.y = change.y;\n                /*\n                 * when top/left changes, correct the relative positions of child nodes\n                 * so that they stay in the same position\n                 */\n                if (childNodes.length > 0) {\n                    const xChange = x - prevX;\n                    const yChange = y - prevY;\n                    for (const childNode of childNodes) {\n                        childNode.position = {\n                            x: childNode.position.x - xChange + nodeOrigin[0] * (width - prevWidth),\n                            y: childNode.position.y - yChange + nodeOrigin[1] * (height - prevHeight),\n                        };\n                        childChanges.push(childNode);\n                    }\n                }\n            }\n            if (isWidthChange || isHeightChange) {\n                change.width =\n                    isWidthChange && (!resizeDirection || resizeDirection === 'horizontal') ? width : prevValues.width;\n                change.height =\n                    isHeightChange && (!resizeDirection || resizeDirection === 'vertical') ? height : prevValues.height;\n                prevValues.width = change.width;\n                prevValues.height = change.height;\n            }\n            // Fix expandParent when resizing from top/left\n            if (parentNode && node.expandParent) {\n                const xLimit = nodeOrigin[0] * (change.width ?? 0);\n                if (change.x && change.x < xLimit) {\n                    prevValues.x = xLimit;\n                    startValues.x = startValues.x - (change.x - xLimit);\n                }\n                const yLimit = nodeOrigin[1] * (change.height ?? 0);\n                if (change.y && change.y < yLimit) {\n                    prevValues.y = yLimit;\n                    startValues.y = startValues.y - (change.y - yLimit);\n                }\n            }\n            const direction = getResizeDirection({\n                width: prevValues.width,\n                prevWidth,\n                height: prevValues.height,\n                prevHeight,\n                affectsX: controlDirection.affectsX,\n                affectsY: controlDirection.affectsY,\n            });\n            const nextValues = { ...prevValues, direction };\n            const callResize = shouldResize?.(event, nextValues);\n            if (callResize === false) {\n                return;\n            }\n            onResize?.(event, nextValues);\n            onChange(change, childChanges);\n        })\n            .on('end', (event) => {\n            onResizeEnd?.(event, { ...prevValues });\n            onEnd?.({ ...prevValues });\n        });\n        selection.call(dragHandler);\n    }\n    function destroy() {\n        selection.on('.drag', null);\n    }\n    return {\n        update,\n        destroy,\n    };\n}\n\nexport { ConnectionLineType, ConnectionMode, MarkerType, PanOnScrollMode, Position, ResizeControlVariant, SelectionMode, XYDrag, XYHandle, XYMinimap, XYPanZoom, XYResizer, XY_RESIZER_HANDLE_POSITIONS, XY_RESIZER_LINE_POSITIONS, addEdge, adoptUserNodes, areConnectionMapsEqual, areSetsEqual, boxToRect, calcAutoPan, calculateNodePosition, clamp, clampPosition, clampPositionToParent, createMarkerIds, defaultAriaLabelConfig, devWarn, elementSelectionKeys, errorMessages, evaluateAbsolutePosition, fitViewport, getBezierEdgeCenter, getBezierPath, getBoundsOfBoxes, getBoundsOfRects, getConnectedEdges, getConnectionStatus, getDimensions, getEdgeCenter, getEdgePosition, getElementsToRemove, getElevatedEdgeZIndex, getEventPosition, getHandleBounds, getHandlePosition, getHostForElement, getIncomers, getInternalNodesBounds, getMarkerId, getNodeDimensions, getNodePositionWithOrigin, getNodeToolbarTransform, getNodesBounds, getNodesInside, getOutgoers, getOverlappingArea, getPointerPosition, getSmoothStepPath, getStraightPath, getViewportForBounds, handleConnectionChange, handleExpandParent, infiniteExtent, initialConnection, isCoordinateExtent, isEdgeBase, isEdgeVisible, isInputDOMNode, isInternalNodeBase, isMacOs, isMouseEvent, isNodeBase, isNumeric, isRectObject, mergeAriaLabelConfig, nodeHasDimensions, nodeToBox, nodeToRect, oppositePosition, panBy, pointToRendererPoint, reconnectEdge, rectToBox, rendererPointToPoint, shallowNodeData, snapPosition, updateAbsolutePositions, updateConnectionLookup, updateNodeInternals, withResolvers };\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import {\n    Position,\n    XYHandle,\n    isMouseEvent,\n    areConnectionMapsEqual,\n    handleConnectionChange,\n    ConnectionMode,\n    getHostForElement,\n    type HandleConnection,\n    type Optional,\n    type ConnectionState,\n    type Connection\n  } from '@xyflow/system';\n\n  import { useStore } from '../../store';\n\n  import type { ConnectableContext } from '../NodeWrapper/types';\n  import type { HandleProps } from './types';\n\n  let {\n    id: handleId = null,\n    type = 'source',\n    position = Position.Top,\n    style,\n    class: className,\n    isConnectable: isConnectableProp,\n    isConnectableStart = true,\n    isConnectableEnd = true,\n    isValidConnection,\n    onconnect,\n    ondisconnect,\n    children,\n    ...rest\n  }: HandleProps = $props();\n\n  const nodeId = getContext<string>('svelteflow__node_id');\n  const isConnectableContext = getContext<ConnectableContext>('svelteflow__node_connectable');\n\n  let isTarget = $derived(type === 'target');\n  let isConnectable = $derived(\n    isConnectableProp !== undefined ? isConnectableProp : isConnectableContext.value\n  );\n\n  let store = useStore();\n  let ariaLabelConfig = $derived(store.ariaLabelConfig);\n\n  let prevConnections: Map<string, HandleConnection> | null = null;\n  $effect.pre(() => {\n    if (onconnect || ondisconnect) {\n      // connectionLookup is not reactive, so we use edges to get notified about updates\n      // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n      store.edges;\n      let connections = store.connectionLookup.get(\n        `${nodeId}-${type}${handleId ? `-${handleId}` : ''}`\n      );\n\n      if (prevConnections && !areConnectionMapsEqual(connections, prevConnections)) {\n        const _connections = connections ?? new Map();\n\n        handleConnectionChange(prevConnections, _connections, ondisconnect);\n        handleConnectionChange(_connections, prevConnections, onconnect);\n      }\n\n      prevConnections = new Map(connections);\n    }\n  });\n\n  let [connectionInProgress, connectingFrom, connectingTo, isPossibleTargetHandle, valid] =\n    $derived.by(() => {\n      if (!store.connection.inProgress) {\n        return [false, false, false, false, null];\n      }\n\n      const { fromHandle, toHandle, isValid } = store.connection;\n\n      const connectingFrom =\n        fromHandle &&\n        fromHandle.nodeId === nodeId &&\n        fromHandle.type === type &&\n        fromHandle.id === handleId;\n\n      const connectingTo =\n        toHandle &&\n        toHandle.nodeId === nodeId &&\n        toHandle.type === type &&\n        toHandle.id === handleId;\n\n      const isPossibleTargetHandle =\n        store.connectionMode === ConnectionMode.Strict\n          ? fromHandle?.type !== type\n          : nodeId !== fromHandle?.nodeId || handleId !== fromHandle?.id;\n\n      const valid = connectingTo && isValid;\n\n      return [true, connectingFrom, connectingTo, isPossibleTargetHandle, valid];\n    });\n\n  function onConnectExtended(connection: Connection) {\n    const edge = store.onbeforeconnect ? store.onbeforeconnect(connection) : connection;\n\n    if (!edge) {\n      return;\n    }\n\n    store.addEdge(edge);\n    store.onconnect?.(connection);\n  }\n\n  function onpointerdown(event: MouseEvent | TouchEvent) {\n    const isMouseTriggered = isMouseEvent(event);\n\n    if (event.currentTarget && ((isMouseTriggered && event.button === 0) || !isMouseTriggered)) {\n      XYHandle.onPointerDown(event, {\n        handleId,\n        nodeId,\n        isTarget,\n        connectionRadius: store.connectionRadius,\n        domNode: store.domNode,\n        nodeLookup: store.nodeLookup,\n        connectionMode: store.connectionMode,\n        lib: 'svelte',\n        autoPanOnConnect: store.autoPanOnConnect,\n        flowId: store.flowId,\n        isValidConnection: isValidConnection ?? store.isValidConnection,\n        updateConnection: store.updateConnection,\n        cancelConnection: store.cancelConnection,\n        panBy: store.panBy,\n        onConnect: onConnectExtended,\n        onConnectStart: (event, startParams) => {\n          store.onconnectstart?.(event, {\n            nodeId: startParams.nodeId,\n            handleId: startParams.handleId,\n            handleType: startParams.handleType\n          });\n        },\n        onConnectEnd: (event, connectionState) => {\n          store.onconnectend?.(event, connectionState);\n        },\n        getTransform: () => [store.viewport.x, store.viewport.y, store.viewport.zoom],\n        getFromHandle: () => store.connection.fromHandle,\n        dragThreshold: store.connectionDragThreshold,\n        handleDomNode: event.currentTarget as HTMLElement\n      });\n    }\n  }\n\n  function onclick(event: MouseEvent) {\n    if (!nodeId || (!store.clickConnectStartHandle && !isConnectableStart)) {\n      return;\n    }\n\n    if (!store.clickConnectStartHandle) {\n      store.onclickconnectstart?.(event, { nodeId, handleId, handleType: type });\n      store.clickConnectStartHandle = { nodeId, type, id: handleId };\n      return;\n    }\n\n    const doc = getHostForElement(event.target);\n    const isValidConnectionHandler = isValidConnection ?? store.isValidConnection;\n\n    const { connectionMode, clickConnectStartHandle, flowId, nodeLookup } = store;\n    const { connection, isValid } = XYHandle.isValid(event, {\n      handle: {\n        nodeId,\n        id: handleId,\n        type\n      },\n      connectionMode,\n      fromNodeId: clickConnectStartHandle.nodeId,\n      fromHandleId: clickConnectStartHandle.id ?? null,\n      fromType: clickConnectStartHandle.type,\n      isValidConnection: isValidConnectionHandler,\n      flowId,\n      doc,\n      lib: 'svelte',\n      nodeLookup\n    });\n\n    if (isValid && connection) {\n      onConnectExtended(connection);\n    }\n\n    const connectionClone = structuredClone($state.snapshot(store.connection)) as Optional<\n      ConnectionState,\n      'inProgress'\n    >;\n    delete connectionClone.inProgress;\n    connectionClone.toPosition = connectionClone.toHandle\n      ? connectionClone.toHandle.position\n      : null;\n    store.onclickconnectend?.(event, connectionClone);\n\n    store.clickConnectStartHandle = null;\n  }\n</script>\n\n<!--\n@component\nThe Handle component is the part of a node that can be used to connect nodes.\n-->\n<div\n  data-handleid={handleId}\n  data-nodeid={nodeId}\n  data-handlepos={position}\n  data-id=\"{store.flowId}-{nodeId}-{handleId ?? 'null'}-{type}\"\n  class={[\n    'svelte-flow__handle',\n    `svelte-flow__handle-${position}`,\n    store.noDragClass,\n    store.noPanClass,\n    position,\n    className\n  ]}\n  class:valid\n  class:connectingto={connectingTo}\n  class:connectingfrom={connectingFrom}\n  class:source={!isTarget}\n  class:target={isTarget}\n  class:connectablestart={isConnectableStart}\n  class:connectableend={isConnectableEnd}\n  class:connectable={isConnectable}\n  class:connectionindicator={isConnectable &&\n    (!connectionInProgress || isPossibleTargetHandle) &&\n    (connectionInProgress || store.clickConnectStartHandle ? isConnectableEnd : isConnectableStart)}\n  onmousedown={onpointerdown}\n  ontouchstart={onpointerdown}\n  onclick={store.clickConnect ? onclick : undefined}\n  onkeypress={() => {}}\n  {style}\n  role=\"button\"\n  aria-label={ariaLabelConfig[`handle.ariaLabel`]}\n  tabindex=\"-1\"\n  {...rest}\n>\n  {@render children?.()}\n</div>\n","<script lang=\"ts\">\n  import { Position } from '@xyflow/system';\n\n  import { Handle } from '../Handle';\n  import type { NodeProps } from '../../types';\n\n  let {\n    data,\n    targetPosition = Position.Top,\n    sourcePosition = Position.Bottom\n  }: NodeProps = $props();\n</script>\n\n<Handle type=\"target\" position={targetPosition} />\n{data?.label}\n<Handle type=\"source\" position={sourcePosition} />\n","<script lang=\"ts\">\n  import { Position } from '@xyflow/system';\n  import type { NodeProps } from '../../types';\n\n  import { Handle } from '../Handle';\n\n  let { data = { label: 'Node' }, sourcePosition = Position.Bottom }: NodeProps = $props();\n</script>\n\n{data?.label}\n<Handle type=\"source\" position={sourcePosition} />\n","<script lang=\"ts\">\n  import { Position } from '@xyflow/system';\n  import type { NodeProps } from '../../types';\n\n  import { Handle } from '../Handle';\n\n  let { data = { label: 'Node' }, targetPosition = Position.Top }: NodeProps = $props();\n</script>\n\n{data?.label}\n<Handle type=\"target\" position={targetPosition} />\n","<script lang=\"ts\">\n  import type { NodeProps } from '../../types';\n\n  // eslint-disable-next-line no-empty-pattern\n  let {}: NodeProps = $props();\n</script>\n","import { useStore } from '../../store';\nfunction tryToMount(node, domNode, target) {\n    if (!target || !domNode) {\n        return;\n    }\n    const targetEl = target === 'root' ? domNode : domNode.querySelector(`.svelte-flow__${target}`);\n    if (targetEl) {\n        targetEl.appendChild(node);\n    }\n}\nexport function portal(node, target) {\n    const { domNode } = $derived(useStore());\n    let destroyEffect;\n    // svelte-ignore state_referenced_locally\n    if (domNode) {\n        // if the domNode is already mounted, we can directly try to mount the node\n        tryToMount(node, domNode, target);\n    }\n    else {\n        // if the domNode is not mounted yet, we need to wait for it to be ready\n        destroyEffect = $effect.root(() => {\n            $effect(() => {\n                tryToMount(node, domNode, target);\n                destroyEffect?.();\n            });\n        });\n    }\n    return {\n        async update(target) {\n            tryToMount(node, domNode, target);\n        },\n        destroy() {\n            if (node.parentNode) {\n                node.parentNode.removeChild(node);\n            }\n            destroyEffect?.();\n        }\n    };\n}\n","export function hideOnSSR() {\n    let hide = $state(typeof window === 'undefined');\n    if (hide) {\n        const destroyEffect = $effect.root(() => {\n            $effect(() => {\n                hide = false;\n                destroyEffect?.();\n            });\n        });\n    }\n    return {\n        get value() {\n            return hide;\n        }\n    };\n}\n","import { isNodeBase, isEdgeBase } from '@xyflow/system';\n/**\n * Test whether an object is usable as a Node\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Node if it returns true\n * @param element - The element to test\n * @returns A boolean indicating whether the element is an Node\n */\nexport const isNode = (element) => isNodeBase(element);\n/**\n * Test whether an object is usable as an Edge\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Edge if it returns true\n * @param element - The element to test\n * @returns A boolean indicating whether the element is an Edge\n */\nexport const isEdge = (element) => isEdgeBase(element);\nexport function toPxString(value) {\n    return value === undefined ? undefined : `${value}px`;\n}\nexport const arrowKeyDiffs = {\n    ArrowUp: { x: 0, y: -1 },\n    ArrowDown: { x: 0, y: 1 },\n    ArrowLeft: { x: -1, y: 0 },\n    ArrowRight: { x: 1, y: 0 }\n};\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import { hideOnSSR, portal } from '../../actions/portal';\n\n  import { useStore } from '../../store';\n  import type { EdgeLabelProps } from './types';\n  import { toPxString } from '../../utils';\n\n  let {\n    x = 0,\n    y = 0,\n    width,\n    height,\n    selectEdgeOnClick = false,\n    transparent = false,\n    class: className,\n    children,\n    ...rest\n  }: EdgeLabelProps = $props();\n\n  const store = useStore();\n\n  const id = getContext<string>('svelteflow__edge_id');\n\n  let z = $derived.by(() => {\n    return store.visible.edges.get(id)?.zIndex;\n  });\n</script>\n\n<div\n  use:portal={'edge-labels'}\n  style:display={hideOnSSR().value ? 'none' : undefined}\n  class={['svelte-flow__edge-label', { transparent }, className]}\n  style:cursor={selectEdgeOnClick ? 'pointer' : undefined}\n  style:transform=\"translate(-50%, -50%) translate({x}px,{y}px)\"\n  style:pointer-events=\"all\"\n  style:width={toPxString(width)}\n  style:height={toPxString(height)}\n  style:z-index={z}\n  tabindex=\"-1\"\n  onclick={() => {\n    if (selectEdgeOnClick && id) store.handleEdgeSelection(id);\n  }}\n  {...rest}\n>\n  {@render children?.()}\n</div>\n\n<style>\n  .transparent {\n    background: transparent;\n  }\n</style>\n","<script lang=\"ts\">\n  import type { BaseEdgeProps } from '../../types';\n  import EdgeLabel from '../EdgeLabel/EdgeLabel.svelte';\n\n  let {\n    id,\n    path,\n    label,\n    labelX,\n    labelY,\n    labelStyle,\n    markerStart,\n    markerEnd,\n    style,\n    interactionWidth = 20,\n    class: className,\n    ...rest\n  }: BaseEdgeProps = $props();\n</script>\n\n<path\n  {id}\n  d={path}\n  class={['svelte-flow__edge-path', className]}\n  marker-start={markerStart}\n  marker-end={markerEnd}\n  fill=\"none\"\n  {style}\n/>\n\n{#if interactionWidth > 0}\n  <path\n    d={path}\n    stroke-opacity={0}\n    stroke-width={interactionWidth}\n    fill=\"none\"\n    class=\"svelte-flow__edge-interaction\"\n    {...rest}\n  />\n{/if}\n\n{#if label}\n  <EdgeLabel x={labelX} y={labelY} style={labelStyle} selectEdgeOnClick>\n    {label}\n  </EdgeLabel>\n{/if}\n","<script lang=\"ts\">\n  import { getBezierPath } from '@xyflow/system';\n\n  import BaseEdge from './BaseEdge.svelte';\n  import type { BezierEdgeProps } from '../../types';\n\n  let {\n    id,\n    interactionWidth,\n    label,\n    labelStyle,\n    markerEnd,\n    markerStart,\n    pathOptions,\n    sourcePosition,\n    sourceX,\n    sourceY,\n    style,\n    targetPosition,\n    targetX,\n    targetY\n  }: BezierEdgeProps = $props();\n\n  let [path, labelX, labelY] = $derived(\n    getBezierPath({\n      sourceX,\n      sourceY,\n      targetX,\n      targetY,\n      sourcePosition,\n      targetPosition,\n      curvature: pathOptions?.curvature\n    })\n  );\n</script>\n\n<BaseEdge\n  {id}\n  {path}\n  {labelX}\n  {labelY}\n  {label}\n  {labelStyle}\n  {markerStart}\n  {markerEnd}\n  {interactionWidth}\n  {style}\n/>\n","<script lang=\"ts\">\n  import { getSmoothStepPath } from '@xyflow/system';\n\n  import BaseEdge from './BaseEdge.svelte';\n  import type { EdgeProps } from '../../types';\n\n  let {\n    interactionWidth,\n    label,\n    labelStyle,\n    style,\n    markerEnd,\n    markerStart,\n    sourcePosition,\n    sourceX,\n    sourceY,\n    targetPosition,\n    targetX,\n    targetY\n  }: EdgeProps = $props();\n\n  let [path, labelX, labelY] = $derived(\n    getSmoothStepPath({\n      sourceX,\n      sourceY,\n      targetX,\n      targetY,\n      sourcePosition,\n      targetPosition\n    })\n  );\n</script>\n\n<BaseEdge\n  {path}\n  {labelX}\n  {labelY}\n  {label}\n  {labelStyle}\n  {markerStart}\n  {markerEnd}\n  {interactionWidth}\n  {style}\n/>\n","<script lang=\"ts\">\n  import { getStraightPath } from '@xyflow/system';\n\n  import BaseEdge from './BaseEdge.svelte';\n  import type { EdgeProps } from '../../types';\n\n  let {\n    sourceX,\n    sourceY,\n    targetX,\n    targetY,\n    label,\n    labelStyle,\n    markerStart,\n    markerEnd,\n    interactionWidth,\n    style\n  }: EdgeProps = $props();\n\n  let [path, labelX, labelY] = $derived(\n    getStraightPath({\n      sourceX,\n      sourceY,\n      targetX,\n      targetY\n    })\n  );\n</script>\n\n<BaseEdge\n  {path}\n  {labelX}\n  {labelY}\n  {label}\n  {labelStyle}\n  {markerStart}\n  {markerEnd}\n  {interactionWidth}\n  {style}\n/>\n","<script lang=\"ts\">\n  import { getSmoothStepPath } from '@xyflow/system';\n\n  import BaseEdge from './BaseEdge.svelte';\n  import type { EdgeProps } from '../../types';\n\n  let {\n    sourceX,\n    sourceY,\n    sourcePosition,\n    targetX,\n    targetY,\n    targetPosition,\n    label,\n    labelStyle,\n    markerStart,\n    markerEnd,\n    interactionWidth,\n    style\n  }: EdgeProps = $props();\n\n  let [path, labelX, labelY] = $derived(\n    getSmoothStepPath({\n      sourceX,\n      sourceY,\n      targetX,\n      targetY,\n      sourcePosition,\n      targetPosition,\n      borderRadius: 0\n    })\n  );\n</script>\n\n<BaseEdge\n  {path}\n  {labelX}\n  {labelY}\n  {label}\n  {labelStyle}\n  {markerStart}\n  {markerEnd}\n  {interactionWidth}\n  {style}\n/>\n","/** @import { Source } from '#client' */\nimport { DEV } from 'esm-env';\nimport { source, set, state, increment } from '../internal/client/reactivity/sources.js';\nimport { label, tag } from '../internal/client/dev/tracing.js';\nimport { get, update_version } from '../internal/client/runtime.js';\n\nvar read_methods = ['forEach', 'isDisjointFrom', 'isSubsetOf', 'isSupersetOf'];\nvar set_like_methods = ['difference', 'intersection', 'symmetricDifference', 'union'];\n\nvar inited = false;\n\n/**\n * A reactive version of the built-in [`Set`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set) object.\n * Reading contents of the set (by iterating, or by reading `set.size` or calling `set.has(...)` as in the [example](https://svelte.dev/playground/53438b51194b4882bcc18cddf9f96f15) below) in an [effect](https://svelte.dev/docs/svelte/$effect) or [derived](https://svelte.dev/docs/svelte/$derived)\n * will cause it to be re-evaluated as necessary when the set is updated.\n *\n * Note that values in a reactive set are _not_ made [deeply reactive](https://svelte.dev/docs/svelte/$state#Deep-state).\n *\n * ```svelte\n * <script>\n * \timport { SvelteSet } from 'svelte/reactivity';\n * \tlet monkeys = new SvelteSet();\n *\n * \tfunction toggle(monkey) {\n * \t\tif (monkeys.has(monkey)) {\n * \t\t\tmonkeys.delete(monkey);\n * \t\t} else {\n * \t\t\tmonkeys.add(monkey);\n * \t\t}\n * \t}\n * </script>\n *\n * {#each ['', '', ''] as monkey}\n * \t<button onclick={() => toggle(monkey)}>{monkey}</button>\n * {/each}\n *\n * <button onclick={() => monkeys.clear()}>clear</button>\n *\n * {#if monkeys.has('')}<p>see no evil</p>{/if}\n * {#if monkeys.has('')}<p>hear no evil</p>{/if}\n * {#if monkeys.has('')}<p>speak no evil</p>{/if}\n * ```\n *\n * @template T\n * @extends {Set<T>}\n */\nexport class SvelteSet extends Set {\n\t/** @type {Map<T, Source<boolean>>} */\n\t#sources = new Map();\n\t#version = state(0);\n\t#size = state(0);\n\t#update_version = update_version || -1;\n\n\t/**\n\t * @param {Iterable<T> | null | undefined} [value]\n\t */\n\tconstructor(value) {\n\t\tsuper();\n\n\t\tif (DEV) {\n\t\t\t// If the value is invalid then the native exception will fire here\n\t\t\tvalue = new Set(value);\n\n\t\t\ttag(this.#version, 'SvelteSet version');\n\t\t\ttag(this.#size, 'SvelteSet.size');\n\t\t}\n\n\t\tif (value) {\n\t\t\tfor (var element of value) {\n\t\t\t\tsuper.add(element);\n\t\t\t}\n\t\t\tthis.#size.v = super.size;\n\t\t}\n\n\t\tif (!inited) this.#init();\n\t}\n\n\t/**\n\t * If the source is being created inside the same reaction as the SvelteSet instance,\n\t * we use `state` so that it will not be a dependency of the reaction. Otherwise we\n\t * use `source` so it will be.\n\t *\n\t * @template T\n\t * @param {T} value\n\t * @returns {Source<T>}\n\t */\n\t#source(value) {\n\t\treturn update_version === this.#update_version ? state(value) : source(value);\n\t}\n\n\t// We init as part of the first instance so that we can treeshake this class\n\t#init() {\n\t\tinited = true;\n\n\t\tvar proto = SvelteSet.prototype;\n\t\tvar set_proto = Set.prototype;\n\n\t\tfor (const method of read_methods) {\n\t\t\t// @ts-ignore\n\t\t\tproto[method] = function (...v) {\n\t\t\t\tget(this.#version);\n\t\t\t\t// @ts-ignore\n\t\t\t\treturn set_proto[method].apply(this, v);\n\t\t\t};\n\t\t}\n\n\t\tfor (const method of set_like_methods) {\n\t\t\t// @ts-ignore\n\t\t\tproto[method] = function (...v) {\n\t\t\t\tget(this.#version);\n\t\t\t\t// @ts-ignore\n\t\t\t\tvar set = /** @type {Set<T>} */ (set_proto[method].apply(this, v));\n\t\t\t\treturn new SvelteSet(set);\n\t\t\t};\n\t\t}\n\t}\n\n\t/** @param {T} value */\n\thas(value) {\n\t\tvar has = super.has(value);\n\t\tvar sources = this.#sources;\n\t\tvar s = sources.get(value);\n\n\t\tif (s === undefined) {\n\t\t\tif (!has) {\n\t\t\t\t// If the value doesn't exist, track the version in case it's added later\n\t\t\t\t// but don't create sources willy-nilly to track all possible values\n\t\t\t\tget(this.#version);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\ts = this.#source(true);\n\n\t\t\tif (DEV) {\n\t\t\t\ttag(s, `SvelteSet has(${label(value)})`);\n\t\t\t}\n\n\t\t\tsources.set(value, s);\n\t\t}\n\n\t\tget(s);\n\t\treturn has;\n\t}\n\n\t/** @param {T} value */\n\tadd(value) {\n\t\tif (!super.has(value)) {\n\t\t\tsuper.add(value);\n\t\t\tset(this.#size, super.size);\n\t\t\tincrement(this.#version);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/** @param {T} value */\n\tdelete(value) {\n\t\tvar deleted = super.delete(value);\n\t\tvar sources = this.#sources;\n\t\tvar s = sources.get(value);\n\n\t\tif (s !== undefined) {\n\t\t\tsources.delete(value);\n\t\t\tset(s, false);\n\t\t}\n\n\t\tif (deleted) {\n\t\t\tset(this.#size, super.size);\n\t\t\tincrement(this.#version);\n\t\t}\n\n\t\treturn deleted;\n\t}\n\n\tclear() {\n\t\tif (super.size === 0) {\n\t\t\treturn;\n\t\t}\n\t\t// Clear first, so we get nice console.log outputs with $inspect\n\t\tsuper.clear();\n\t\tvar sources = this.#sources;\n\n\t\tfor (var s of sources.values()) {\n\t\t\tset(s, false);\n\t\t}\n\n\t\tsources.clear();\n\t\tset(this.#size, 0);\n\t\tincrement(this.#version);\n\t}\n\n\tkeys() {\n\t\treturn this.values();\n\t}\n\n\tvalues() {\n\t\tget(this.#version);\n\t\treturn super.values();\n\t}\n\n\tentries() {\n\t\tget(this.#version);\n\t\treturn super.entries();\n\t}\n\n\t[Symbol.iterator]() {\n\t\treturn this.keys();\n\t}\n\n\tget size() {\n\t\treturn get(this.#size);\n\t}\n}\n","import { createSubscriber } from './create-subscriber.js';\n\n/**\n * @template T\n */\nexport class ReactiveValue {\n\t#fn;\n\t#subscribe;\n\n\t/**\n\t *\n\t * @param {() => T} fn\n\t * @param {(update: () => void) => void} onsubscribe\n\t */\n\tconstructor(fn, onsubscribe) {\n\t\tthis.#fn = fn;\n\t\tthis.#subscribe = createSubscriber(onsubscribe);\n\t}\n\n\tget current() {\n\t\tthis.#subscribe();\n\t\treturn this.#fn();\n\t}\n}\n","import { on } from '../events/index.js';\nimport { ReactiveValue } from './reactive-value.js';\n\nconst parenthesis_regex = /\\(.+\\)/;\n\n// these keywords are valid media queries but they need to be without parenthesis\n//\n// eg: new MediaQuery('screen')\n//\n// however because of the auto-parenthesis logic in the constructor since there's no parentehesis\n// in the media query they'll be surrounded by parenthesis\n//\n// however we can check if the media query is only composed of these keywords\n// and skip the auto-parenthesis\n//\n// https://github.com/sveltejs/svelte/issues/15930\nconst non_parenthesized_keywords = new Set(['all', 'print', 'screen', 'and', 'or', 'not', 'only']);\n\n/**\n * Creates a media query and provides a `current` property that reflects whether or not it matches.\n *\n * Use it carefully  during server-side rendering, there is no way to know what the correct value should be, potentially causing content to change upon hydration.\n * If you can use the media query in CSS to achieve the same effect, do that.\n *\n * ```svelte\n * <script>\n * \timport { MediaQuery } from 'svelte/reactivity';\n *\n * \tconst large = new MediaQuery('min-width: 800px');\n * </script>\n *\n * <h1>{large.current ? 'large screen' : 'small screen'}</h1>\n * ```\n * @extends {ReactiveValue<boolean>}\n * @since 5.7.0\n */\nexport class MediaQuery extends ReactiveValue {\n\t/**\n\t * @param {string} query A media query string\n\t * @param {boolean} [fallback] Fallback value for the server\n\t */\n\tconstructor(query, fallback) {\n\t\tlet final_query =\n\t\t\tparenthesis_regex.test(query) ||\n\t\t\t// we need to use `some` here because technically this `window.matchMedia('random,screen')` still returns true\n\t\t\tquery.split(/[\\s,]+/).some((keyword) => non_parenthesized_keywords.has(keyword.trim()))\n\t\t\t\t? query\n\t\t\t\t: `(${query})`;\n\t\tconst q = window.matchMedia(final_query);\n\t\tsuper(\n\t\t\t() => q.matches,\n\t\t\t(update) => on(q, 'change', update)\n\t\t);\n\t}\n}\n","import { ConnectionMode, getEdgePosition, getElevatedEdgeZIndex, getNodesInside, isEdgeVisible } from '@xyflow/system';\nexport function getVisibleNodes(nodeLookup, transform, width, height) {\n    const visibleNodes = new Map();\n    getNodesInside(nodeLookup, { x: 0, y: 0, width: width, height: height }, transform, true).forEach((node) => {\n        visibleNodes.set(node.id, node);\n    });\n    return visibleNodes;\n}\nexport function getLayoutedEdges(options) {\n    const { edges, defaultEdgeOptions, nodeLookup, previousEdges, connectionMode, onerror, onlyRenderVisible, elevateEdgesOnSelect } = options;\n    const layoutedEdges = new Map();\n    for (const edge of edges) {\n        const sourceNode = nodeLookup.get(edge.source);\n        const targetNode = nodeLookup.get(edge.target);\n        if (!sourceNode || !targetNode) {\n            continue;\n        }\n        if (onlyRenderVisible) {\n            const { visibleNodes, transform, width, height } = options;\n            if (isEdgeVisible({\n                sourceNode,\n                targetNode,\n                width: width,\n                height: height,\n                transform: transform\n            })) {\n                visibleNodes.set(sourceNode.id, sourceNode);\n                visibleNodes.set(targetNode.id, targetNode);\n            }\n            else {\n                continue;\n            }\n        }\n        // we reuse the previous edge object if\n        // the current and previous edge are the same\n        // and the source and target node are the same\n        // and references to internalNodes are the same\n        const previous = previousEdges.get(edge.id);\n        if (previous &&\n            edge === previous.edge &&\n            sourceNode == previous.sourceNode &&\n            targetNode == previous.targetNode) {\n            layoutedEdges.set(edge.id, previous);\n            continue;\n        }\n        const edgePosition = getEdgePosition({\n            id: edge.id,\n            sourceNode,\n            targetNode,\n            sourceHandle: edge.sourceHandle || null,\n            targetHandle: edge.targetHandle || null,\n            connectionMode,\n            onError: onerror\n        });\n        if (edgePosition) {\n            layoutedEdges.set(edge.id, {\n                ...defaultEdgeOptions,\n                ...edge,\n                ...edgePosition,\n                zIndex: getElevatedEdgeZIndex({\n                    selected: edge.selected,\n                    zIndex: edge.zIndex ?? defaultEdgeOptions.zIndex,\n                    sourceNode,\n                    targetNode,\n                    elevateOnSelect: elevateEdgesOnSelect\n                }),\n                sourceNode,\n                targetNode,\n                edge\n            });\n        }\n    }\n    return layoutedEdges;\n}\n","import { infiniteExtent, SelectionMode, ConnectionMode, devWarn, adoptUserNodes, getViewportForBounds, updateConnectionLookup, initialConnection, mergeAriaLabelConfig, getInternalNodesBounds, createMarkerIds, pointToRendererPoint, fitViewport } from '@xyflow/system';\nimport DefaultNode from '../components/nodes/DefaultNode.svelte';\nimport InputNode from '../components/nodes/InputNode.svelte';\nimport OutputNode from '../components/nodes/OutputNode.svelte';\nimport GroupNode from '../components/nodes/GroupNode.svelte';\nimport { BezierEdgeInternal, SmoothStepEdgeInternal, StraightEdgeInternal, StepEdgeInternal } from '../components/edges';\nimport { MediaQuery } from 'svelte/reactivity';\nimport { getLayoutedEdges, getVisibleNodes } from './visibleElements';\nexport const initialNodeTypes = {\n    input: InputNode,\n    output: OutputNode,\n    default: DefaultNode,\n    group: GroupNode\n};\nexport const initialEdgeTypes = {\n    straight: StraightEdgeInternal,\n    smoothstep: SmoothStepEdgeInternal,\n    default: BezierEdgeInternal,\n    step: StepEdgeInternal\n};\nfunction getInitialViewport(\n// This is just used to make sure adoptUserNodes is called before we calculate the viewport\n_nodesInitialized, fitView, initialViewport, width, height, nodeLookup) {\n    if (fitView && !initialViewport && width && height) {\n        const bounds = getInternalNodesBounds(nodeLookup, {\n            filter: (node) => !!((node.width || node.initialWidth) && (node.height || node.initialHeight))\n        });\n        return getViewportForBounds(bounds, width, height, 0.5, 2, 0.1);\n    }\n    else {\n        return initialViewport ?? { x: 0, y: 0, zoom: 1 };\n    }\n}\nexport function getInitialStore(signals) {\n    // We use a class here, because Svelte adds getters & setter for us.\n    // Inline classes have some performance implications but we just call it once (max twice).\n    class SvelteFlowStore {\n        flowId = $derived(signals.props.id ?? '1');\n        domNode = $state.raw(null);\n        panZoom = $state.raw(null);\n        width = $state.raw(signals.width ?? 0);\n        height = $state.raw(signals.height ?? 0);\n        nodesInitialized = $derived.by(() => {\n            const nodesInitialized = adoptUserNodes(signals.nodes, this.nodeLookup, this.parentLookup, {\n                nodeExtent: this.nodeExtent,\n                nodeOrigin: this.nodeOrigin,\n                elevateNodesOnSelect: signals.props.elevateNodesOnSelect ?? true,\n                checkEquality: true\n            });\n            if (this.fitViewQueued && nodesInitialized) {\n                if (this.fitViewOptions?.duration) {\n                    this.resolveFitView();\n                }\n                else {\n                    /**\n                     * When no duration is set, viewport is set immediately which prevents an update\n                     * I do not understand why, however we are setting state in a derived which is a no-go\n                     */\n                    queueMicrotask(() => {\n                        this.resolveFitView();\n                    });\n                }\n            }\n            return nodesInitialized;\n        });\n        viewportInitialized = $derived(this.panZoom !== null);\n        _edges = $derived.by(() => {\n            updateConnectionLookup(this.connectionLookup, this.edgeLookup, signals.edges);\n            return signals.edges;\n        });\n        get nodes() {\n            // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n            this.nodesInitialized;\n            return signals.nodes;\n        }\n        set nodes(nodes) {\n            signals.nodes = nodes;\n        }\n        get edges() {\n            return this._edges;\n        }\n        set edges(edges) {\n            signals.edges = edges;\n        }\n        _prevSelectedNodes = [];\n        _prevSelectedNodeIds = new Set();\n        selectedNodes = $derived.by(() => {\n            const selectedNodesCount = this._prevSelectedNodeIds.size;\n            const selectedNodeIds = new Set();\n            const selectedNodes = this.nodes.filter((node) => {\n                if (node.selected) {\n                    selectedNodeIds.add(node.id);\n                    this._prevSelectedNodeIds.delete(node.id);\n                }\n                return node.selected;\n            });\n            // Either the number of selected nodes has changed or two nodes changed their selection state\n            // at the same time. However then the previously selected node will be inside _prevSelectedNodeIds\n            if (selectedNodesCount !== selectedNodeIds.size || this._prevSelectedNodeIds.size > 0) {\n                this._prevSelectedNodes = selectedNodes;\n            }\n            this._prevSelectedNodeIds = selectedNodeIds;\n            return this._prevSelectedNodes;\n        });\n        _prevSelectedEdges = [];\n        _prevSelectedEdgeIds = new Set();\n        selectedEdges = $derived.by(() => {\n            const selectedEdgesCount = this._prevSelectedEdgeIds.size;\n            const selectedEdgeIds = new Set();\n            const selectedEdges = this.edges.filter((edge) => {\n                if (edge.selected) {\n                    selectedEdgeIds.add(edge.id);\n                    this._prevSelectedEdgeIds.delete(edge.id);\n                }\n                return edge.selected;\n            });\n            // Either the number of selected edges has changed or two edges changed their selection state\n            // at the same time. However then the previously selected edge will be inside _prevSelectedEdgeIds\n            if (selectedEdgesCount !== selectedEdgeIds.size || this._prevSelectedEdgeIds.size > 0) {\n                this._prevSelectedEdges = selectedEdges;\n            }\n            this._prevSelectedEdgeIds = selectedEdgeIds;\n            return this._prevSelectedEdges;\n        });\n        selectionChangeHandlers = new Map();\n        nodeLookup = new Map();\n        parentLookup = new Map();\n        connectionLookup = new Map();\n        edgeLookup = new Map();\n        _prevVisibleEdges = new Map();\n        visible = $derived.by(() => {\n            const { \n            // We need to access this._nodes to trigger on changes\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            nodes, _edges: edges, _prevVisibleEdges: previousEdges, nodeLookup, connectionMode, onerror, onlyRenderVisibleElements, defaultEdgeOptions } = this;\n            let visibleNodes;\n            let visibleEdges;\n            const options = {\n                edges,\n                defaultEdgeOptions,\n                previousEdges,\n                nodeLookup,\n                connectionMode,\n                elevateEdgesOnSelect: signals.props.elevateEdgesOnSelect ?? true,\n                onerror\n            };\n            if (onlyRenderVisibleElements) {\n                // We only subscribe to viewport, width, height if onlyRenderVisibleElements is true\n                const { viewport, width, height } = this;\n                const transform = [viewport.x, viewport.y, viewport.zoom];\n                visibleNodes = getVisibleNodes(nodeLookup, transform, width, height);\n                visibleEdges = getLayoutedEdges({\n                    ...options,\n                    onlyRenderVisible: true,\n                    visibleNodes,\n                    transform,\n                    width,\n                    height\n                });\n            }\n            else {\n                visibleNodes = this.nodeLookup;\n                visibleEdges = getLayoutedEdges(options);\n            }\n            return {\n                nodes: visibleNodes,\n                edges: visibleEdges\n            };\n        });\n        nodesDraggable = $derived(signals.props.nodesDraggable ?? true);\n        nodesConnectable = $derived(signals.props.nodesConnectable ?? true);\n        elementsSelectable = $derived(signals.props.elementsSelectable ?? true);\n        nodesFocusable = $derived(signals.props.nodesFocusable ?? true);\n        edgesFocusable = $derived(signals.props.edgesFocusable ?? true);\n        disableKeyboardA11y = $derived(signals.props.disableKeyboardA11y ?? false);\n        minZoom = $derived(signals.props.minZoom ?? 0.5);\n        maxZoom = $derived(signals.props.maxZoom ?? 2);\n        nodeOrigin = $derived(signals.props.nodeOrigin ?? [0, 0]);\n        nodeExtent = $derived(signals.props.nodeExtent ?? infiniteExtent);\n        translateExtent = $derived(signals.props.translateExtent ?? infiniteExtent);\n        defaultEdgeOptions = $derived(signals.props.defaultEdgeOptions ?? {});\n        nodeDragThreshold = $derived(signals.props.nodeDragThreshold ?? 1);\n        autoPanOnNodeDrag = $derived(signals.props.autoPanOnNodeDrag ?? true);\n        autoPanOnConnect = $derived(signals.props.autoPanOnConnect ?? true);\n        autoPanOnNodeFocus = $derived(signals.props.autoPanOnNodeFocus ?? true);\n        connectionDragThreshold = $derived(signals.props.connectionDragThreshold ?? 1);\n        fitViewQueued = signals.props.fitView ?? false;\n        fitViewOptions = signals.props.fitViewOptions;\n        fitViewResolver = null;\n        snapGrid = $derived(signals.props.snapGrid ?? null);\n        dragging = $state.raw(false);\n        selectionRect = $state.raw(null);\n        selectionKeyPressed = $state.raw(false);\n        multiselectionKeyPressed = $state.raw(false);\n        deleteKeyPressed = $state.raw(false);\n        panActivationKeyPressed = $state.raw(false);\n        zoomActivationKeyPressed = $state.raw(false);\n        selectionRectMode = $state.raw(null);\n        ariaLiveMessage = $state.raw('');\n        selectionMode = $derived(signals.props.selectionMode ?? SelectionMode.Partial);\n        nodeTypes = $derived({ ...initialNodeTypes, ...signals.props.nodeTypes });\n        edgeTypes = $derived({ ...initialEdgeTypes, ...signals.props.edgeTypes });\n        noPanClass = $derived(signals.props.noPanClass ?? 'nopan');\n        noDragClass = $derived(signals.props.noDragClass ?? 'nodrag');\n        noWheelClass = $derived(signals.props.noWheelClass ?? 'nowheel');\n        ariaLabelConfig = $derived(mergeAriaLabelConfig(signals.props.ariaLabelConfig));\n        // _viewport is the internal viewport.\n        // when binding to viewport, we operate on signals.viewport instead\n        _viewport = $state.raw(getInitialViewport(this.nodesInitialized, signals.props.fitView, signals.props.initialViewport, this.width, this.height, this.nodeLookup));\n        get viewport() {\n            return signals.viewport ?? this._viewport;\n        }\n        set viewport(newViewport) {\n            if (signals.viewport) {\n                signals.viewport = newViewport;\n            }\n            this._viewport = newViewport;\n        }\n        // _connection is viewport independent and originating from XYHandle\n        _connection = $state.raw(initialConnection);\n        // We derive a viewport dependent connection here\n        connection = $derived.by(() => {\n            if (!this._connection.inProgress) {\n                return this._connection;\n            }\n            return {\n                ...this._connection,\n                to: pointToRendererPoint(this._connection.to, [\n                    this.viewport.x,\n                    this.viewport.y,\n                    this.viewport.zoom\n                ])\n            };\n        });\n        connectionMode = $derived(signals.props.connectionMode ?? ConnectionMode.Strict);\n        connectionRadius = $derived(signals.props.connectionRadius ?? 20);\n        isValidConnection = $derived(signals.props.isValidConnection ?? (() => true));\n        selectNodesOnDrag = $derived(signals.props.selectNodesOnDrag ?? true);\n        defaultMarkerColor = $derived(signals.props.defaultMarkerColor === undefined ? '#b1b1b7' : signals.props.defaultMarkerColor);\n        markers = $derived.by(() => {\n            return createMarkerIds(signals.edges, {\n                defaultColor: this.defaultMarkerColor,\n                id: this.flowId,\n                defaultMarkerStart: this.defaultEdgeOptions.markerStart,\n                defaultMarkerEnd: this.defaultEdgeOptions.markerEnd\n            });\n        });\n        onlyRenderVisibleElements = $derived(signals.props.onlyRenderVisibleElements ?? false);\n        onerror = $derived(signals.props.onflowerror ?? devWarn);\n        ondelete = $derived(signals.props.ondelete);\n        onbeforedelete = $derived(signals.props.onbeforedelete);\n        onbeforeconnect = $derived(signals.props.onbeforeconnect);\n        onconnect = $derived(signals.props.onconnect);\n        onconnectstart = $derived(signals.props.onconnectstart);\n        onconnectend = $derived(signals.props.onconnectend);\n        onbeforereconnect = $derived(signals.props.onbeforereconnect);\n        onreconnect = $derived(signals.props.onreconnect);\n        onreconnectstart = $derived(signals.props.onreconnectstart);\n        onreconnectend = $derived(signals.props.onreconnectend);\n        clickConnect = $derived(signals.props.clickConnect ?? true);\n        onclickconnectstart = $derived(signals.props.onclickconnectstart);\n        onclickconnectend = $derived(signals.props.onclickconnectend);\n        clickConnectStartHandle = $state.raw(null);\n        onselectiondrag = $derived(signals.props.onselectiondrag);\n        onselectiondragstart = $derived(signals.props.onselectiondragstart);\n        onselectiondragstop = $derived(signals.props.onselectiondragstop);\n        resolveFitView = async () => {\n            if (!this.panZoom) {\n                return;\n            }\n            await fitViewport({\n                nodes: this.nodeLookup,\n                width: this.width,\n                height: this.height,\n                panZoom: this.panZoom,\n                minZoom: this.minZoom,\n                maxZoom: this.maxZoom\n            }, this.fitViewOptions);\n            this.fitViewResolver?.resolve(true);\n            /**\n             * wait for the fitViewport to resolve before deleting the resolver,\n             * we want to reuse the old resolver if the user calls fitView again in the mean time\n             */\n            this.fitViewQueued = false;\n            this.fitViewOptions = undefined;\n            this.fitViewResolver = null;\n        };\n        _prefersDark = new MediaQuery('(prefers-color-scheme: dark)', signals.props.colorModeSSR === 'dark');\n        colorMode = $derived(signals.props.colorMode === 'system'\n            ? this._prefersDark.current\n                ? 'dark'\n                : 'light'\n            : (signals.props.colorMode ?? 'light'));\n        constructor() {\n            if (process.env.NODE_ENV === 'development') {\n                warnIfDeeplyReactive(signals.nodes, 'nodes');\n                warnIfDeeplyReactive(signals.edges, 'edges');\n            }\n        }\n        resetStoreValues() {\n            this.dragging = false;\n            this.selectionRect = null;\n            this.selectionRectMode = null;\n            this.selectionKeyPressed = false;\n            this.multiselectionKeyPressed = false;\n            this.deleteKeyPressed = false;\n            this.panActivationKeyPressed = false;\n            this.zoomActivationKeyPressed = false;\n            this._connection = initialConnection;\n            this.clickConnectStartHandle = null;\n            this.viewport = signals.props.initialViewport ?? { x: 0, y: 0, zoom: 1 };\n            this.ariaLiveMessage = '';\n        }\n    }\n    return new SvelteFlowStore();\n}\n// Only way to check if an object is a proxy\n// is to see if is failes to perform a structured clone\nfunction warnIfDeeplyReactive(array, name) {\n    try {\n        if (array && array.length > 0) {\n            structuredClone(array[0]);\n        }\n    }\n    catch {\n        console.warn(`Use $state.raw for ${name} to prevent performance issues.`);\n    }\n}\n","import { getContext } from 'svelte';\nimport { key } from '../store';\nimport { derivedWarning } from './derivedWarning.svelte';\nexport function useStore() {\n    const storeContext = getContext(key);\n    if (!storeContext) {\n        throw new Error('To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />');\n    }\n    if (process.env.NODE_ENV === 'development') {\n        derivedWarning('useStore');\n    }\n    return storeContext.getStore();\n}\n","import { panBy as panBySystem, updateNodeInternals as updateNodeInternalsSystem, addEdge as addEdgeUtil, initialConnection, errorMessages, updateAbsolutePositions, snapPosition, calculateNodePosition } from '@xyflow/system';\nimport { initialEdgeTypes, initialNodeTypes, getInitialStore } from './initial-store.svelte';\nimport {} from './types';\nexport const key = Symbol();\nexport { useStore } from '../hooks/useStore';\nexport function createStore(signals) {\n    const store = getInitialStore(signals);\n    function setNodeTypes(nodeTypes) {\n        store.nodeTypes = {\n            ...initialNodeTypes,\n            ...nodeTypes\n        };\n    }\n    function setEdgeTypes(edgeTypes) {\n        store.edgeTypes = {\n            ...initialEdgeTypes,\n            ...edgeTypes\n        };\n    }\n    function addEdge(edgeParams) {\n        store.edges = addEdgeUtil(edgeParams, store.edges);\n    }\n    const updateNodePositions = (nodeDragItems, dragging = false) => {\n        store.nodes = store.nodes.map((node) => {\n            const dragItem = nodeDragItems.get(node.id);\n            return dragItem ? { ...node, position: dragItem.position, dragging } : node;\n        });\n    };\n    function updateNodeInternals(updates) {\n        const { changes, updatedInternals } = updateNodeInternalsSystem(updates, store.nodeLookup, store.parentLookup, store.domNode, store.nodeOrigin);\n        if (!updatedInternals) {\n            return;\n        }\n        updateAbsolutePositions(store.nodeLookup, store.parentLookup, {\n            nodeOrigin: store.nodeOrigin,\n            nodeExtent: store.nodeExtent\n        });\n        if (store.fitViewQueued) {\n            store.resolveFitView();\n        }\n        const newNodes = new Map();\n        for (const change of changes) {\n            const userNode = store.nodeLookup.get(change.id)?.internals.userNode;\n            if (!userNode) {\n                continue;\n            }\n            const node = { ...userNode };\n            switch (change.type) {\n                case 'dimensions': {\n                    const measured = { ...node.measured, ...change.dimensions };\n                    if (change.setAttributes) {\n                        node.width = change.dimensions?.width ?? node.width;\n                        node.height = change.dimensions?.height ?? node.height;\n                    }\n                    node.measured = measured;\n                    break;\n                }\n                case 'position':\n                    node.position = change.position ?? node.position;\n                    break;\n            }\n            newNodes.set(change.id, node);\n        }\n        store.nodes = store.nodes.map((node) => newNodes.get(node.id) ?? node);\n    }\n    function fitView(options) {\n        // We either create a new Promise or reuse the existing one\n        // Even if fitView is called multiple times in a row, we only end up with a single Promise\n        const fitViewResolver = store.fitViewResolver ?? Promise.withResolvers();\n        // We schedule a fitView by setting fitViewQueued and triggering a setNodes\n        store.fitViewQueued = true;\n        store.fitViewOptions = options;\n        store.fitViewResolver = fitViewResolver;\n        // We need to update the nodes so that adoptUserNodes is triggered\n        store.nodes = [...store.nodes];\n        return fitViewResolver.promise;\n    }\n    async function setCenter(x, y, options) {\n        const nextZoom = typeof options?.zoom !== 'undefined' ? options.zoom : store.maxZoom;\n        const currentPanZoom = store.panZoom;\n        if (!currentPanZoom) {\n            return Promise.resolve(false);\n        }\n        await currentPanZoom.setViewport({\n            x: store.width / 2 - x * nextZoom,\n            y: store.height / 2 - y * nextZoom,\n            zoom: nextZoom\n        }, { duration: options?.duration, ease: options?.ease, interpolate: options?.interpolate });\n        return Promise.resolve(true);\n    }\n    function zoomBy(factor, options) {\n        const panZoom = store.panZoom;\n        if (!panZoom) {\n            return Promise.resolve(false);\n        }\n        return panZoom.scaleBy(factor, options);\n    }\n    function zoomIn(options) {\n        return zoomBy(1.2, options);\n    }\n    function zoomOut(options) {\n        return zoomBy(1 / 1.2, options);\n    }\n    function setMinZoom(minZoom) {\n        const panZoom = store.panZoom;\n        if (panZoom) {\n            panZoom.setScaleExtent([minZoom, store.maxZoom]);\n            store.minZoom = minZoom;\n        }\n    }\n    function setMaxZoom(maxZoom) {\n        const panZoom = store.panZoom;\n        if (panZoom) {\n            panZoom.setScaleExtent([store.minZoom, maxZoom]);\n            store.maxZoom = maxZoom;\n        }\n    }\n    function setTranslateExtent(extent) {\n        const panZoom = store.panZoom;\n        if (panZoom) {\n            panZoom.setTranslateExtent(extent);\n            store.translateExtent = extent;\n        }\n    }\n    function setPaneClickDistance(distance) {\n        store.panZoom?.setClickDistance(distance);\n    }\n    function deselect(elements, elementsToDeselect = null) {\n        let deselected = false;\n        const newElements = elements.map((element) => {\n            const shouldDeselect = elementsToDeselect ? elementsToDeselect.has(element.id) : true;\n            if (shouldDeselect && element.selected) {\n                deselected = true;\n                return { ...element, selected: false };\n            }\n            return element;\n        });\n        return [deselected, newElements];\n    }\n    function unselectNodesAndEdges(params) {\n        const nodesToDeselect = params?.nodes ? new Set(params.nodes.map((node) => node.id)) : null;\n        const [nodesDeselected, newNodes] = deselect(store.nodes, nodesToDeselect);\n        if (nodesDeselected) {\n            store.nodes = newNodes;\n        }\n        const edgesToDeselect = params?.edges ? new Set(params.edges.map((node) => node.id)) : null;\n        const [edgesDeselected, newEdges] = deselect(store.edges, edgesToDeselect);\n        if (edgesDeselected) {\n            store.edges = newEdges;\n        }\n    }\n    function addSelectedNodes(ids) {\n        const isMultiSelection = store.multiselectionKeyPressed;\n        store.nodes = store.nodes.map((node) => {\n            const nodeWillBeSelected = ids.includes(node.id);\n            const selected = isMultiSelection ? node.selected || nodeWillBeSelected : nodeWillBeSelected;\n            if (node.selected !== selected) {\n                // we need to mutate the node here in order to have the correct selected state in the drag handler\n                const internalNode = store.nodeLookup.get(node.id);\n                if (internalNode)\n                    internalNode.selected = selected;\n                node.selected = selected;\n                return { ...node };\n            }\n            return node;\n        });\n        if (!isMultiSelection) {\n            unselectNodesAndEdges({ nodes: [] });\n        }\n    }\n    function addSelectedEdges(ids) {\n        const isMultiSelection = store.multiselectionKeyPressed;\n        store.edges = store.edges.map((edge) => {\n            const edgeWillBeSelected = ids.includes(edge.id);\n            const selected = isMultiSelection ? edge.selected || edgeWillBeSelected : edgeWillBeSelected;\n            if (edge.selected !== selected) {\n                return { ...edge, selected };\n            }\n            return edge;\n        });\n        if (!isMultiSelection) {\n            unselectNodesAndEdges({ edges: [] });\n        }\n    }\n    function handleNodeSelection(id, unselect, nodeRef) {\n        const node = store.nodeLookup.get(id);\n        if (!node) {\n            console.warn('012', errorMessages['error012'](id));\n            return;\n        }\n        store.selectionRect = null;\n        store.selectionRectMode = null;\n        if (!node.selected) {\n            addSelectedNodes([id]);\n        }\n        else if (unselect || (node.selected && store.multiselectionKeyPressed)) {\n            unselectNodesAndEdges({ nodes: [node], edges: [] });\n            requestAnimationFrame(() => nodeRef?.blur());\n        }\n    }\n    function handleEdgeSelection(id) {\n        const edge = store.edgeLookup.get(id);\n        if (!edge) {\n            console.warn('012', errorMessages['error012'](id));\n            return;\n        }\n        const selectable = edge.selectable || (store.elementsSelectable && typeof edge.selectable === 'undefined');\n        if (selectable) {\n            store.selectionRect = null;\n            store.selectionRectMode = null;\n            if (!edge.selected) {\n                addSelectedEdges([id]);\n            }\n            else if (edge.selected && store.multiselectionKeyPressed) {\n                unselectNodesAndEdges({ nodes: [], edges: [edge] });\n            }\n        }\n    }\n    function moveSelectedNodes(direction, factor) {\n        const { nodeExtent, snapGrid, nodeOrigin, nodeLookup, nodesDraggable, onerror } = store;\n        const nodeUpdates = new Map();\n        /*\n         * by default a node moves 5px on each key press\n         * if snap grid is enabled, we use that for the velocity\n         */\n        const xVelo = snapGrid?.[0] ?? 5;\n        const yVelo = snapGrid?.[1] ?? 5;\n        const xDiff = direction.x * xVelo * factor;\n        const yDiff = direction.y * yVelo * factor;\n        for (const node of nodeLookup.values()) {\n            const isSelected = node.selected &&\n                (node.draggable || (nodesDraggable && typeof node.draggable === 'undefined'));\n            if (!isSelected) {\n                continue;\n            }\n            let nextPosition = {\n                x: node.internals.positionAbsolute.x + xDiff,\n                y: node.internals.positionAbsolute.y + yDiff\n            };\n            if (snapGrid) {\n                nextPosition = snapPosition(nextPosition, snapGrid);\n            }\n            const { position, positionAbsolute } = calculateNodePosition({\n                nodeId: node.id,\n                nextPosition,\n                nodeLookup,\n                nodeExtent,\n                nodeOrigin,\n                onError: onerror\n            });\n            node.position = position;\n            node.internals.positionAbsolute = positionAbsolute;\n            nodeUpdates.set(node.id, node);\n        }\n        updateNodePositions(nodeUpdates);\n    }\n    function panBy(delta) {\n        return panBySystem({\n            delta,\n            panZoom: store.panZoom,\n            transform: [store.viewport.x, store.viewport.y, store.viewport.zoom],\n            translateExtent: store.translateExtent,\n            width: store.width,\n            height: store.height\n        });\n    }\n    const updateConnection = (newConnection) => {\n        store._connection = { ...newConnection };\n    };\n    function cancelConnection() {\n        store._connection = initialConnection;\n    }\n    function reset() {\n        store.resetStoreValues();\n        unselectNodesAndEdges();\n    }\n    const storeWithActions = Object.assign(store, {\n        setNodeTypes,\n        setEdgeTypes,\n        addEdge,\n        updateNodePositions,\n        updateNodeInternals,\n        zoomIn,\n        zoomOut,\n        fitView,\n        setCenter,\n        setMinZoom,\n        setMaxZoom,\n        setTranslateExtent,\n        setPaneClickDistance,\n        unselectNodesAndEdges,\n        addSelectedNodes,\n        addSelectedEdges,\n        handleNodeSelection,\n        handleEdgeSelection,\n        moveSelectedNodes,\n        panBy,\n        updateConnection,\n        cancelConnection,\n        reset\n    });\n    return storeWithActions;\n}\n","import { PanOnScrollMode, XYPanZoom } from '@xyflow/system';\nexport default function zoom(domNode, params) {\n    const { minZoom, maxZoom, initialViewport, onPanZoomStart, onPanZoom, onPanZoomEnd, translateExtent, paneClickDistance, setPanZoomInstance, onDraggingChange, onTransformChange } = params;\n    const panZoomInstance = XYPanZoom({\n        domNode,\n        minZoom,\n        maxZoom,\n        translateExtent,\n        viewport: initialViewport,\n        paneClickDistance,\n        onPanZoom,\n        onPanZoomStart,\n        onPanZoomEnd,\n        onDraggingChange\n    });\n    const viewport = panZoomInstance.getViewport();\n    if (initialViewport.x !== viewport.x ||\n        initialViewport.y !== viewport.y ||\n        initialViewport.zoom !== viewport.zoom) {\n        onTransformChange([viewport.x, viewport.y, viewport.zoom]);\n    }\n    setPanZoomInstance(panZoomInstance);\n    panZoomInstance.update(params);\n    return {\n        update(params) {\n            panZoomInstance.update(params);\n        }\n    };\n}\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import { PanOnScrollMode, type PanZoomInstance, type Transform } from '@xyflow/system';\n\n  import zoom from '../../actions/zoom';\n  import type { ZoomProps } from './types';\n  import type { Node, Edge } from '../../types';\n\n  let {\n    store = $bindable(),\n    panOnScrollMode = PanOnScrollMode.Free,\n    preventScrolling = true,\n    zoomOnScroll = true,\n    zoomOnDoubleClick = true,\n    zoomOnPinch = true,\n    panOnDrag = true,\n    panOnScroll = false,\n    paneClickDistance = 1,\n    onmovestart,\n    onmove,\n    onmoveend,\n    oninit,\n    children\n  }: ZoomProps<NodeType, EdgeType> = $props();\n\n  let panOnDragActive = $derived(store.panActivationKeyPressed || panOnDrag);\n  let panOnScrollActive = $derived(store.panActivationKeyPressed || panOnScroll);\n\n  // We extract the initial value by destructuring\n  const { viewport: initialViewport } = store;\n\n  let onInitCalled = false;\n  $effect(() => {\n    if (!onInitCalled && store.viewportInitialized) {\n      oninit?.();\n      onInitCalled = true;\n    }\n  });\n</script>\n\n<div\n  class=\"svelte-flow__zoom svelte-flow__container\"\n  use:zoom={{\n    viewport: store.viewport,\n    minZoom: store.minZoom,\n    maxZoom: store.maxZoom,\n    initialViewport,\n    onDraggingChange: (dragging: boolean) => {\n      store.dragging = dragging;\n    },\n    setPanZoomInstance: (instance: PanZoomInstance) => {\n      store.panZoom = instance;\n    },\n    onPanZoomStart: onmovestart,\n    onPanZoom: onmove,\n    onPanZoomEnd: onmoveend,\n    zoomOnScroll,\n    zoomOnDoubleClick,\n    zoomOnPinch,\n    panOnScroll: panOnScrollActive,\n    panOnDrag: panOnDragActive,\n    panOnScrollSpeed: 0.5,\n    panOnScrollMode: panOnScrollMode || PanOnScrollMode.Free,\n    zoomActivationKeyPressed: store.zoomActivationKeyPressed,\n    preventScrolling: typeof preventScrolling === 'boolean' ? preventScrolling : true,\n    noPanClassName: store.noPanClass,\n    noWheelClassName: store.noWheelClass,\n    userSelectionActive: !!store.selectionRect,\n    translateExtent: store.translateExtent,\n    lib: 'svelte',\n    paneClickDistance,\n    onTransformChange: (transform: Transform) => {\n      store.viewport = { x: transform[0], y: transform[1], zoom: transform[2] };\n    }\n  }}\n>\n  {@render children()}\n</div>\n","<script lang=\"ts\" module>\n  export function wrapHandler(\n    handler: (evt: MouseEvent) => void,\n    container: HTMLDivElement\n  ): (evt: MouseEvent) => void {\n    return (event: MouseEvent) => {\n      if (event.target !== container) {\n        return;\n      }\n      handler?.(event);\n    };\n  }\n\n  export function toggleSelected<Item extends Node | Edge>(ids: Set<string>) {\n    return (item: Item) => {\n      const isSelected = ids.has(item.id);\n\n      if (!!item.selected !== isSelected) {\n        return { ...item, selected: isSelected };\n      }\n\n      return item;\n    };\n  }\n\n  function isSetEqual(a: Set<string>, b: Set<string>) {\n    if (a.size !== b.size) {\n      return false;\n    }\n\n    for (const item of a) {\n      if (!b.has(item)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n</script>\n\n<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import { SelectionMode, getEventPosition, getNodesInside } from '@xyflow/system';\n\n  import type { Node, Edge } from '../../types';\n  import type { PaneProps } from './types';\n\n  let {\n    store = $bindable(),\n    panOnDrag = true,\n    selectionOnDrag,\n    onpaneclick,\n    onpanecontextmenu,\n    onselectionstart,\n    onselectionend,\n    children\n  }: PaneProps<NodeType, EdgeType> = $props();\n\n  // svelte-ignore non_reactive_update\n  let container: HTMLDivElement;\n  let containerBounds: DOMRect | null = null;\n\n  let selectedNodeIds: Set<string> = new Set();\n  let selectedEdgeIds: Set<string> = new Set();\n\n  let panOnDragActive = $derived(store.panActivationKeyPressed || panOnDrag);\n  let isSelecting = $derived(\n    store.selectionKeyPressed ||\n      store.selectionRect ||\n      (selectionOnDrag && panOnDragActive !== true)\n  );\n  let hasActiveSelection = $derived(\n    store.elementsSelectable && (isSelecting || store.selectionRectMode === 'user')\n  );\n\n  // Used to prevent click events when the user lets go of the selectionKey during a selection\n  let selectionInProgress = false;\n\n  function onClick(event: MouseEvent) {\n    // We prevent click events when the user let go of the selectionKey during a selection\n    // We also prevent click events when a connection is in progress\n    if (selectionInProgress || store.connection.inProgress) {\n      selectionInProgress = false;\n      return;\n    }\n\n    onpaneclick?.({ event });\n    store.unselectNodesAndEdges();\n    store.selectionRectMode = null;\n  }\n\n  // We start the selection process when the user clicks down on the pane\n  function onPointerDown(event: PointerEvent) {\n    containerBounds = container?.getBoundingClientRect();\n\n    if (\n      !store.elementsSelectable ||\n      !isSelecting ||\n      event.button !== 0 ||\n      event.target !== container ||\n      !containerBounds\n    ) {\n      return;\n    }\n\n    (event.target as Partial<Element> | null)?.setPointerCapture?.(event.pointerId);\n\n    const { x, y } = getEventPosition(event, containerBounds);\n\n    store.unselectNodesAndEdges();\n\n    store.selectionRect = {\n      width: 0,\n      height: 0,\n      startX: x,\n      startY: y,\n      x,\n      y\n    };\n\n    onselectionstart?.(event);\n  }\n\n  function onPointerMove(event: PointerEvent) {\n    if (!isSelecting || !containerBounds || !store.selectionRect) {\n      return;\n    }\n\n    selectionInProgress = true;\n\n    const mousePos = getEventPosition(event, containerBounds);\n    const { startX = 0, startY = 0 } = store.selectionRect;\n\n    const nextUserSelectRect = {\n      ...store.selectionRect,\n      x: mousePos.x < startX ? mousePos.x : startX,\n      y: mousePos.y < startY ? mousePos.y : startY,\n      width: Math.abs(mousePos.x - startX),\n      height: Math.abs(mousePos.y - startY)\n    };\n\n    const prevSelectedNodeIds = selectedNodeIds;\n    const prevSelectedEdgeIds = selectedEdgeIds;\n\n    selectedNodeIds = new Set(\n      getNodesInside(\n        store.nodeLookup,\n        nextUserSelectRect,\n        [store.viewport.x, store.viewport.y, store.viewport.zoom],\n        store.selectionMode === SelectionMode.Partial,\n        true\n      ).map((n) => n.id)\n    );\n\n    const edgesSelectable = store.defaultEdgeOptions.selectable ?? true;\n    selectedEdgeIds = new Set();\n\n    // We look for all edges connected to the selected nodes\n    for (const nodeId of selectedNodeIds) {\n      const connections = store.connectionLookup.get(nodeId);\n      if (!connections) continue;\n      for (const { edgeId } of connections.values()) {\n        const edge = store.edgeLookup.get(edgeId);\n        if (edge && (edge.selectable ?? edgesSelectable)) {\n          selectedEdgeIds.add(edgeId);\n        }\n      }\n    }\n\n    // this prevents unnecessary updates while updating the selection rectangle\n    if (!isSetEqual(prevSelectedNodeIds, selectedNodeIds)) {\n      store.nodes = store.nodes.map(toggleSelected(selectedNodeIds));\n    }\n\n    if (!isSetEqual(prevSelectedEdgeIds, selectedEdgeIds)) {\n      store.edges = store.edges.map(toggleSelected(selectedEdgeIds));\n    }\n\n    store.selectionRectMode = 'user';\n    store.selectionRect = nextUserSelectRect;\n  }\n\n  function onPointerUp(event: PointerEvent) {\n    if (event.button !== 0) {\n      return;\n    }\n\n    (event.target as Partial<Element> | null)?.releasePointerCapture?.(event.pointerId);\n\n    // We only want to trigger click functions when in selection mode if\n    // the user did not move the mouse.\n    if (!isSelecting && store.selectionRectMode === 'user' && event.target === container) {\n      onClick?.(event);\n    }\n    store.selectionRect = null;\n\n    if (selectedNodeIds.size > 0) {\n      store.selectionRectMode = 'nodes';\n    }\n\n    // If the user kept holding the selectionKey during the selection,\n    // we need to reset the selectionInProgress, so the next click event is not prevented\n    if (store.selectionKeyPressed) {\n      selectionInProgress = false;\n    }\n\n    onselectionend?.(event);\n  }\n\n  const onContextMenu = (event: MouseEvent) => {\n    if (Array.isArray(panOnDragActive) && panOnDragActive.includes(2)) {\n      event.preventDefault();\n      return;\n    }\n\n    onpanecontextmenu?.({ event });\n  };\n</script>\n\n<!-- svelte-ignore a11y_no_static_element_interactions -->\n<!-- svelte-ignore a11y_click_events_have_key_events -->\n<div\n  bind:this={container}\n  class=\"svelte-flow__pane svelte-flow__container\"\n  class:draggable={panOnDrag === true || (Array.isArray(panOnDrag) && panOnDrag.includes(0))}\n  class:dragging={store.dragging}\n  class:selection={isSelecting}\n  onclick={hasActiveSelection ? undefined : wrapHandler(onClick, container)}\n  onpointerdown={hasActiveSelection ? onPointerDown : undefined}\n  onpointermove={hasActiveSelection ? onPointerMove : undefined}\n  onpointerup={hasActiveSelection ? onPointerUp : undefined}\n  oncontextmenu={wrapHandler(onContextMenu, container)}\n>\n  {@render children()}\n</div>\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import type { SvelteFlowStore } from '../../store/types';\n  import type { Node, Edge } from '../../types';\n  import type { Snippet } from 'svelte';\n\n  let {\n    store = $bindable(),\n    children\n  }: { store: SvelteFlowStore<NodeType, EdgeType>; children: Snippet } = $props();\n</script>\n\n<div\n  class=\"svelte-flow__viewport xyflow__viewport svelte-flow__container\"\n  style:transform=\"translate({store.viewport.x}px, {store.viewport.y}px) scale({store.viewport\n    .zoom})\"\n>\n  {@render children()}\n</div>\n","import { XYDrag } from '@xyflow/system';\nexport default function drag(domNode, params) {\n    const { store, onDrag, onDragStart, onDragStop, onNodeMouseDown } = params;\n    const dragInstance = XYDrag({\n        onDrag,\n        onDragStart,\n        onDragStop,\n        onNodeMouseDown,\n        getStoreItems: () => {\n            const { snapGrid, viewport } = store;\n            return {\n                nodes: store.nodes,\n                nodeLookup: store.nodeLookup,\n                edges: store.edges,\n                nodeExtent: store.nodeExtent,\n                snapGrid: snapGrid ? snapGrid : [0, 0],\n                snapToGrid: !!snapGrid,\n                nodeOrigin: store.nodeOrigin,\n                multiSelectionActive: store.multiselectionKeyPressed,\n                domNode: store.domNode,\n                transform: [viewport.x, viewport.y, viewport.zoom],\n                autoPanOnNodeDrag: store.autoPanOnNodeDrag,\n                nodesDraggable: store.nodesDraggable,\n                selectNodesOnDrag: store.selectNodesOnDrag,\n                nodeDragThreshold: store.nodeDragThreshold,\n                unselectNodesAndEdges: store.unselectNodesAndEdges,\n                updateNodePositions: store.updateNodePositions,\n                onSelectionDrag: store.onselectiondrag,\n                onSelectionDragStart: store.onselectiondragstart,\n                onSelectionDragStop: store.onselectiondragstop,\n                panBy: store.panBy\n            };\n        }\n    });\n    function updateDrag(domNode, params) {\n        if (params.disabled) {\n            dragInstance.destroy();\n            return;\n        }\n        dragInstance.update({\n            domNode,\n            noDragClassName: params.noDragClass,\n            handleSelector: params.handleSelector,\n            nodeId: params.nodeId,\n            isSelectable: params.isSelectable,\n            nodeClickDistance: params.nodeClickDistance\n        });\n    }\n    updateDrag(domNode, params);\n    return {\n        update(params) {\n            updateDrag(domNode, params);\n        },\n        destroy() {\n            dragInstance.destroy();\n        }\n    };\n}\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import type { SvelteFlowStore } from '../../store/types';\n  import type { Node, Edge } from '../../types';\n  import { ARIA_EDGE_DESC_KEY, ARIA_LIVE_MESSAGE, ARIA_NODE_DESC_KEY } from '.';\n\n  let { store }: { store: SvelteFlowStore<NodeType, EdgeType> } = $props();\n</script>\n\n<div id={`${ARIA_NODE_DESC_KEY}-${store.flowId}`} class=\"a11y-hidden\">\n  {store.disableKeyboardA11y\n    ? store.ariaLabelConfig['node.a11yDescription.default']\n    : store.ariaLabelConfig['node.a11yDescription.keyboardDisabled']}\n</div>\n<div id={`${ARIA_EDGE_DESC_KEY}-${store.flowId}`} class=\"a11y-hidden\">\n  {store.ariaLabelConfig['edge.a11yDescription.default']}\n</div>\n\n{#if !store.disableKeyboardA11y}\n  <div\n    id={`${ARIA_LIVE_MESSAGE}-${store.flowId}`}\n    aria-live=\"assertive\"\n    aria-atomic=\"true\"\n    class=\"a11y-live-msg\"\n  >\n    {store.ariaLiveMessage}\n  </div>\n{/if}\n\n<style>\n  .a11y-hidden {\n    display: none;\n  }\n\n  .a11y-live-msg {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    margin: -1px;\n    border: 0;\n    padding: 0;\n    overflow: hidden;\n    clip: rect(0px, 0px, 0px, 0px);\n    clip-path: inset(100%);\n  }\n</style>\n","export { default as A11yDescriptions } from './A11yDescriptions.svelte';\nexport const ARIA_NODE_DESC_KEY = 'svelte-flow__node-desc';\nexport const ARIA_EDGE_DESC_KEY = 'svelte-flow__edge-desc';\nexport const ARIA_LIVE_MESSAGE = 'svelte-flow__aria-live';\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import { setContext, onDestroy } from 'svelte';\n  import {\n    elementSelectionKeys,\n    errorMessages,\n    isInputDOMNode,\n    nodeHasDimensions,\n    Position,\n    getNodesInside\n  } from '@xyflow/system';\n\n  import drag from '../../actions/drag';\n  import DefaultNode from '../nodes/DefaultNode.svelte';\n\n  import type { ConnectableContext, NodeWrapperProps } from './types';\n  import type { Node, Edge, NodeEvents } from '../../types';\n  import { arrowKeyDiffs, toPxString } from '../../utils';\n  import { ARIA_NODE_DESC_KEY } from '../A11yDescriptions';\n\n  let {\n    store = $bindable(),\n    node,\n    resizeObserver,\n    nodeClickDistance,\n    onnodeclick,\n    onnodedrag,\n    onnodedragstart,\n    onnodedragstop,\n    onnodepointerenter,\n    onnodepointerleave,\n    onnodepointermove,\n    onnodecontextmenu\n  }: NodeWrapperProps<NodeType, EdgeType> & NodeEvents<NodeType> = $props();\n\n  let {\n    data = {},\n    selected = false,\n    draggable: _draggable,\n    selectable: _selectable,\n    deletable = true,\n    connectable: _connectable,\n    focusable: _focusable,\n    hidden = false,\n    dragging = false,\n    style = '',\n    class: className,\n    type = 'default',\n    parentId,\n    sourcePosition,\n    targetPosition,\n    measured: { width: measuredWidth, height: measuredHeight } = { width: 0, height: 0 },\n    initialWidth,\n    initialHeight,\n    width,\n    height,\n    dragHandle,\n    internals: {\n      z: zIndex = 0,\n      positionAbsolute: { x: positionX, y: positionY },\n      userNode\n    }\n  } = $derived(node);\n\n  let { id } = node;\n\n  let draggable = $derived(_draggable ?? store.nodesDraggable);\n  let selectable = $derived(_selectable ?? store.elementsSelectable);\n  let connectable = $derived(_connectable ?? store.nodesConnectable);\n  let hasDimensions = $derived(nodeHasDimensions(node));\n  let hasHandleBounds = $derived(!!node.internals.handleBounds);\n  let isInitialized = $derived(hasDimensions && hasHandleBounds);\n  let focusable = $derived(_focusable ?? store.nodesFocusable);\n\n  function isInParentLookup(id: string) {\n    return store.parentLookup.has(id);\n  }\n\n  let isParent = $derived(isInParentLookup(id));\n\n  let nodeRef: HTMLDivElement | null = $state(null);\n  let prevNodeRef: HTMLDivElement | null = null;\n\n  // svelte-ignore state_referenced_locally\n  let prevType: string | undefined = type;\n  // svelte-ignore state_referenced_locally\n  let prevSourcePosition: Position | undefined = sourcePosition;\n  // svelte-ignore state_referenced_locally\n  let prevTargetPosition: Position | undefined = targetPosition;\n\n  let NodeComponent = $derived(store.nodeTypes[type] ?? DefaultNode);\n  let ariaLabelConfig = $derived(store.ariaLabelConfig);\n\n  let connectableContext: ConnectableContext = {\n    get value() {\n      return connectable;\n    }\n  };\n  setContext('svelteflow__node_connectable', connectableContext);\n  setContext('svelteflow__node_id', id);\n\n  if (process.env.NODE_ENV === 'development') {\n    $effect(() => {\n      const valid = !!store.nodeTypes[type];\n      if (!valid) {\n        console.warn('003', errorMessages['error003'](type!));\n      }\n    });\n  }\n\n  let nodeStyle = $derived.by(() => {\n    const w = measuredWidth === undefined ? (width ?? initialWidth) : width;\n    const h = measuredHeight === undefined ? (height ?? initialHeight) : height;\n\n    if (w === undefined && h === undefined && style === undefined) {\n      return undefined;\n    }\n\n    return `${style};${w ? `width:${toPxString(w)};` : ''}${h ? `height:${toPxString(h)};` : ''}`;\n  });\n\n  $effect(() => {\n    // if type, sourcePosition or targetPosition changes,\n    // we need to re-calculate the handle positions\n    const doUpdate =\n      type !== prevType ||\n      sourcePosition !== prevSourcePosition ||\n      targetPosition !== prevTargetPosition;\n\n    if (doUpdate && nodeRef !== null) {\n      requestAnimationFrame(() => {\n        if (nodeRef !== null) {\n          store.updateNodeInternals(\n            new Map([\n              [\n                id,\n                {\n                  id,\n                  nodeElement: nodeRef,\n                  force: true\n                }\n              ]\n            ])\n          );\n        }\n      });\n    }\n\n    prevType = type;\n    prevSourcePosition = sourcePosition;\n    prevTargetPosition = targetPosition;\n  });\n\n  $effect(() => {\n    /* eslint-disable @typescript-eslint/no-unused-expressions */\n    if (resizeObserver && (!isInitialized || nodeRef !== prevNodeRef)) {\n      prevNodeRef && resizeObserver.unobserve(prevNodeRef);\n      nodeRef && resizeObserver.observe(nodeRef);\n      prevNodeRef = nodeRef;\n    }\n    /* eslint-enable @typescript-eslint/no-unused-expressions */\n  });\n\n  onDestroy(() => {\n    if (prevNodeRef) {\n      resizeObserver?.unobserve(prevNodeRef);\n    }\n  });\n\n  function onSelectNodeHandler(event: MouseEvent | TouchEvent) {\n    if (selectable && (!store.selectNodesOnDrag || !draggable || store.nodeDragThreshold > 0)) {\n      // this handler gets called by XYDrag on drag start when selectNodesOnDrag=true\n      // here we only need to call it when selectNodesOnDrag=false\n      store.handleNodeSelection(id);\n    }\n\n    onnodeclick?.({ node: userNode, event });\n  }\n\n  function onKeyDown(event: KeyboardEvent) {\n    if (isInputDOMNode(event) || store.disableKeyboardA11y) {\n      return;\n    }\n\n    if (elementSelectionKeys.includes(event.key) && selectable) {\n      const unselect = event.key === 'Escape';\n\n      store.handleNodeSelection(id, unselect, nodeRef);\n    } else if (\n      draggable &&\n      node.selected &&\n      Object.prototype.hasOwnProperty.call(arrowKeyDiffs, event.key)\n    ) {\n      // prevent default scrolling behavior on arrow key press when node is moved\n      event.preventDefault();\n      store.ariaLiveMessage = ariaLabelConfig['node.a11yDescription.ariaLiveMessage']({\n        direction: event.key.replace('Arrow', '').toLowerCase(),\n        x: ~~node.internals.positionAbsolute.x,\n        y: ~~node.internals.positionAbsolute.y\n      });\n      store.moveSelectedNodes(arrowKeyDiffs[event.key], event.shiftKey ? 4 : 1);\n    }\n  }\n\n  const onFocus = () => {\n    if (\n      store.disableKeyboardA11y ||\n      !store.autoPanOnNodeFocus ||\n      !nodeRef?.matches(':focus-visible')\n    ) {\n      return;\n    }\n\n    const { width, height, viewport } = store;\n\n    const withinViewport =\n      getNodesInside(\n        new Map([[id, node]]),\n        { x: 0, y: 0, width, height },\n        [viewport.x, viewport.y, viewport.zoom],\n        true\n      ).length > 0;\n\n    if (!withinViewport) {\n      store.setCenter(\n        node.position.x + (node.measured.width ?? 0) / 2,\n        node.position.y + (node.measured.height ?? 0) / 2,\n        { zoom: viewport.zoom }\n      );\n    }\n  };\n</script>\n\n{#if !hidden}\n  <div\n    use:drag={{\n      nodeId: id,\n      isSelectable: selectable,\n      disabled: !draggable,\n      handleSelector: dragHandle,\n      noDragClass: store.noDragClass,\n      nodeClickDistance,\n      onNodeMouseDown: store.handleNodeSelection,\n      onDrag: (event, _, targetNode, nodes) => {\n        onnodedrag?.({ event, targetNode: targetNode as NodeType, nodes: nodes as NodeType[] });\n      },\n      onDragStart: (event, _, targetNode, nodes) => {\n        onnodedragstart?.({\n          event,\n          targetNode: targetNode as NodeType,\n          nodes: nodes as NodeType[]\n        });\n      },\n      onDragStop: (event, _, targetNode, nodes) => {\n        onnodedragstop?.({ event, targetNode: targetNode as NodeType, nodes: nodes as NodeType[] });\n      },\n      store\n    }}\n    bind:this={nodeRef}\n    data-id={id}\n    class={['svelte-flow__node', `svelte-flow__node-${type}`, className]}\n    class:dragging\n    class:selected\n    class:draggable\n    class:connectable\n    class:selectable\n    class:nopan={draggable}\n    class:parent={isParent}\n    style:z-index={zIndex}\n    style:transform=\"translate({positionX}px, {positionY}px)\"\n    style:visibility={hasDimensions ? 'visible' : 'hidden'}\n    style={nodeStyle}\n    onclick={onSelectNodeHandler}\n    onpointerenter={onnodepointerenter\n      ? (event) => onnodepointerenter({ node: userNode, event })\n      : undefined}\n    onpointerleave={onnodepointerleave\n      ? (event) => onnodepointerleave({ node: userNode, event })\n      : undefined}\n    onpointermove={onnodepointermove\n      ? (event) => onnodepointermove({ node: userNode, event })\n      : undefined}\n    oncontextmenu={onnodecontextmenu\n      ? (event) => onnodecontextmenu({ node: userNode, event })\n      : undefined}\n    onkeydown={focusable ? onKeyDown : undefined}\n    onfocus={focusable ? onFocus : undefined}\n    tabIndex={focusable ? 0 : undefined}\n    role={node.ariaRole ?? (focusable ? 'group' : undefined)}\n    aria-roledescription=\"node\"\n    aria-describedby={store.disableKeyboardA11y\n      ? undefined\n      : `${ARIA_NODE_DESC_KEY}-${store.flowId}`}\n    {...node.domAttributes}\n  >\n    <NodeComponent\n      {data}\n      {id}\n      {selected}\n      {selectable}\n      {deletable}\n      {sourcePosition}\n      {targetPosition}\n      {zIndex}\n      {dragging}\n      {draggable}\n      {dragHandle}\n      {parentId}\n      {type}\n      isConnectable={connectable}\n      positionAbsoluteX={positionX}\n      positionAbsoluteY={positionY}\n      {width}\n      {height}\n    />\n  </div>\n{/if}\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import { onDestroy } from 'svelte';\n\n  import { NodeWrapper } from '../../components/NodeWrapper';\n\n  import type { Node, Edge, NodeEvents } from '../../types';\n  import type { SvelteFlowStore } from '../../store/types';\n\n  let {\n    store = $bindable(),\n    nodeClickDistance,\n    onnodeclick,\n    onnodecontextmenu,\n    onnodepointerenter,\n    onnodepointermove,\n    onnodepointerleave,\n    onnodedrag,\n    onnodedragstart,\n    onnodedragstop\n  }: {\n    store: SvelteFlowStore<NodeType, EdgeType>;\n    nodeClickDistance?: number;\n  } & NodeEvents<NodeType> = $props();\n\n  const resizeObserver: ResizeObserver | null =\n    typeof ResizeObserver === 'undefined'\n      ? null\n      : new ResizeObserver((entries: ResizeObserverEntry[]) => {\n          const updates = new Map();\n\n          entries.forEach((entry: ResizeObserverEntry) => {\n            const id = entry.target.getAttribute('data-id') as string;\n\n            updates.set(id, {\n              id,\n              nodeElement: entry.target as HTMLDivElement,\n              force: true\n            });\n          });\n\n          store.updateNodeInternals(updates);\n        });\n\n  onDestroy(() => {\n    resizeObserver?.disconnect();\n  });\n</script>\n\n<div class=\"svelte-flow__nodes\">\n  {#each store.visible.nodes.values() as node (node.id)}\n    <NodeWrapper\n      bind:store\n      {node}\n      {resizeObserver}\n      {nodeClickDistance}\n      {onnodeclick}\n      {onnodepointerenter}\n      {onnodepointermove}\n      {onnodepointerleave}\n      {onnodedrag}\n      {onnodedragstart}\n      {onnodedragstop}\n      {onnodecontextmenu}\n    />\n  {/each}\n</div>\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import { setContext } from 'svelte';\n\n  import { elementSelectionKeys, getMarkerId } from '@xyflow/system';\n\n  import { BezierEdgeInternal } from '../edges';\n\n  import type { Node, EdgeLayouted, Edge, EdgeEvents } from '../../types';\n  import type { SvelteFlowStore } from '../../store/types';\n  import { ARIA_EDGE_DESC_KEY } from '../A11yDescriptions';\n\n  const {\n    edge,\n    store = $bindable(),\n    onedgeclick,\n    onedgecontextmenu,\n    onedgepointerenter,\n    onedgepointerleave\n  }: {\n    store: SvelteFlowStore<NodeType, EdgeType>;\n    edge: EdgeLayouted<EdgeType>;\n  } & EdgeEvents<EdgeType> = $props();\n\n  let {\n    source,\n    target,\n    sourceX,\n    sourceY,\n    targetX,\n    targetY,\n    sourcePosition,\n    targetPosition,\n    animated = false,\n    selected = false,\n    label,\n    labelStyle,\n    data = {},\n    style,\n    interactionWidth,\n    type = 'default',\n    sourceHandle,\n    targetHandle,\n    markerStart,\n    markerEnd,\n    selectable: _selectable,\n    focusable: _focusable,\n    deletable = true,\n    hidden,\n    zIndex,\n    class: className,\n    ariaLabel\n  } = $derived(edge);\n\n  // svelte-ignore non_reactive_update\n  let edgeRef: SVGGElement | null = null;\n\n  const { id } = edge;\n  setContext('svelteflow__edge_id', id);\n\n  let selectable = $derived(_selectable ?? store.elementsSelectable);\n  let focusable = $derived(_focusable ?? store.edgesFocusable);\n\n  let EdgeComponent = $derived(store.edgeTypes[type] ?? BezierEdgeInternal);\n\n  let markerStartUrl = $derived(\n    markerStart ? `url('#${getMarkerId(markerStart, store.flowId)}')` : undefined\n  );\n  let markerEndUrl = $derived(\n    markerEnd ? `url('#${getMarkerId(markerEnd, store.flowId)}')` : undefined\n  );\n\n  function onclick(event: MouseEvent) {\n    const edge = store.edgeLookup.get(id);\n\n    if (edge) {\n      if (selectable) store.handleEdgeSelection(id);\n      onedgeclick?.({ event, edge });\n    }\n  }\n\n  function onmouseevent<T = MouseEvent>(\n    event: T,\n    callback: ({ edge, event }: { edge: EdgeType; event: T }) => void\n  ) {\n    const edge = store.edgeLookup.get(id);\n\n    if (edge) {\n      callback({ event, edge });\n    }\n  }\n\n  function onkeydown(event: KeyboardEvent) {\n    if (!store.disableKeyboardA11y && elementSelectionKeys.includes(event.key) && selectable) {\n      const { unselectNodesAndEdges, addSelectedEdges } = store;\n      const unselect = event.key === 'Escape';\n\n      if (unselect) {\n        edgeRef?.blur();\n        unselectNodesAndEdges({ edges: [edge] });\n      } else {\n        addSelectedEdges([id]);\n      }\n    }\n  }\n</script>\n\n<!-- svelte-ignore a11y_no_noninteractive_tabindex -->\n{#if !hidden}\n  <svg style:z-index={zIndex} class=\"svelte-flow__edge-wrapper\">\n    <g\n      bind:this={edgeRef}\n      class={['svelte-flow__edge', className]}\n      class:animated\n      class:selected\n      class:selectable\n      data-id={id}\n      {onclick}\n      oncontextmenu={onedgecontextmenu\n        ? (e) => {\n            onmouseevent(e, onedgecontextmenu);\n          }\n        : undefined}\n      onpointerenter={onedgepointerenter\n        ? (e) => {\n            onmouseevent(e, onedgepointerenter);\n          }\n        : undefined}\n      onpointerleave={onedgepointerleave\n        ? (e) => {\n            onmouseevent(e, onedgepointerleave);\n          }\n        : undefined}\n      aria-label={ariaLabel === null\n        ? undefined\n        : ariaLabel\n          ? ariaLabel\n          : `Edge from ${source} to ${target}`}\n      aria-describedby={focusable ? `${ARIA_EDGE_DESC_KEY}-${store.flowId}` : undefined}\n      role={edge.ariaRole ?? (focusable ? 'group' : 'img')}\n      aria-roledescription=\"edge\"\n      onkeydown={focusable ? onkeydown : undefined}\n      tabindex={focusable ? 0 : undefined}\n      {...edge.domAttributes}\n    >\n      <EdgeComponent\n        {id}\n        {source}\n        {target}\n        {sourceX}\n        {sourceY}\n        {targetX}\n        {targetY}\n        {sourcePosition}\n        {targetPosition}\n        {animated}\n        {selected}\n        {label}\n        {labelStyle}\n        {data}\n        {style}\n        {interactionWidth}\n        {selectable}\n        {deletable}\n        {type}\n        sourceHandleId={sourceHandle}\n        targetHandleId={targetHandle}\n        markerStart={markerStartUrl}\n        markerEnd={markerEndUrl}\n      />\n    </g>\n  </svg>\n{/if}\n","<script lang=\"ts\">\n  import { useStore } from '../../../store';\n  import { Marker } from './';\n\n  const store = useStore();\n</script>\n\n<defs>\n  {#each store.markers as marker (marker.id)}\n    <Marker {...marker} />\n  {/each}\n</defs>\n","<script lang=\"ts\">\n  import { type MarkerProps, MarkerType } from '@xyflow/system';\n\n  let {\n    id,\n    type,\n    width = 12.5,\n    height = 12.5,\n    markerUnits = 'strokeWidth',\n    orient = 'auto-start-reverse',\n    color = 'none',\n    strokeWidth\n  }: MarkerProps = $props();\n</script>\n\n<marker\n  class=\"svelte-flow__arrowhead\"\n  {id}\n  markerWidth={`${width}`}\n  markerHeight={`${height}`}\n  viewBox=\"-10 -10 20 20\"\n  {markerUnits}\n  {orient}\n  refX=\"0\"\n  refY=\"0\"\n>\n  {#if type === MarkerType.Arrow}\n    <polyline\n      class=\"arrow\"\n      style:stroke={color}\n      fill=\"none\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n      stroke-width={strokeWidth}\n      points=\"-5,-4 0,0 -5,4\"\n    />\n  {:else if type === MarkerType.ArrowClosed}\n    <polyline\n      class=\"arrowclosed\"\n      style:stroke={color}\n      style:fill={color}\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n      stroke-width={strokeWidth}\n      points=\"-5,-4 0,0 -5,4 -5,-4\"\n    />\n  {/if}\n</marker>\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import { EdgeWrapper } from '../../components/EdgeWrapper';\n  import { MarkerDefinition } from './MarkerDefinition';\n  import type { Node, Edge, EdgeEvents } from '../../types';\n  import type { SvelteFlowStore } from '../../store/types';\n\n  let {\n    store = $bindable(),\n    onedgeclick,\n    onedgecontextmenu,\n    onedgepointerenter,\n    onedgepointerleave\n  }: { store: SvelteFlowStore<NodeType, EdgeType> } & EdgeEvents<EdgeType> = $props();\n</script>\n\n<div class=\"svelte-flow__edges\">\n  <svg class=\"svelte-flow__marker\">\n    <MarkerDefinition />\n  </svg>\n\n  {#each store.visible.edges.values() as edge (edge.id)}\n    <EdgeWrapper\n      bind:store\n      {edge}\n      {onedgeclick}\n      {onedgecontextmenu}\n      {onedgepointerenter}\n      {onedgepointerleave}\n    />\n  {/each}\n</div>\n","<script lang=\"ts\">\n  import { toPxString } from '../../utils';\n\n  let {\n    x = 0,\n    y = 0,\n    width = 0,\n    height = 0,\n    isVisible = true\n  }: {\n    x?: number;\n    y?: number;\n    width?: number | string;\n    height?: number | string;\n    isVisible?: boolean;\n  } = $props();\n</script>\n\n{#if isVisible}\n  <div\n    class=\"svelte-flow__selection\"\n    style:width={typeof width === 'string' ? width : toPxString(width)}\n    style:height={typeof height === 'string' ? height : toPxString(height)}\n    style:transform={`translate(${x}px, ${y}px)`}\n  ></div>\n{/if}\n\n<style>\n  .svelte-flow__selection {\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n</style>\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import { getInternalNodesBounds, isNumeric, type Rect } from '@xyflow/system';\n\n  import { Selection } from '../Selection';\n  import drag from '../../actions/drag';\n\n  import type { NodeSelectionProps } from './types';\n  import { arrowKeyDiffs, toPxString } from '../../utils';\n  import type { Node, Edge } from '../../types';\n\n  let {\n    store = $bindable(),\n    onnodedrag,\n    onnodedragstart,\n    onnodedragstop,\n    onselectionclick,\n    onselectioncontextmenu\n  }: NodeSelectionProps<NodeType, EdgeType> = $props();\n\n  let ref = $state<HTMLDivElement>();\n\n  $effect(() => {\n    if (!store.disableKeyboardA11y) {\n      ref?.focus({\n        preventScroll: true\n      });\n    }\n  });\n\n  let bounds: Rect | null = $derived.by(() => {\n    if (store.selectionRectMode === 'nodes') {\n      // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n      store.nodes;\n      return getInternalNodesBounds(store.nodeLookup, { filter: (node) => !!node.selected });\n    }\n    return null;\n  });\n\n  function oncontextmenu(event: MouseEvent) {\n    const selectedNodes = store.nodes.filter((n) => n.selected);\n    onselectioncontextmenu?.({ nodes: selectedNodes, event });\n  }\n\n  function onclick(event: MouseEvent) {\n    const selectedNodes = store.nodes.filter((n) => n.selected);\n    onselectionclick?.({ nodes: selectedNodes, event });\n  }\n\n  function onkeydown(event: KeyboardEvent) {\n    if (Object.prototype.hasOwnProperty.call(arrowKeyDiffs, event.key)) {\n      event.preventDefault();\n      store.moveSelectedNodes(arrowKeyDiffs[event.key], event.shiftKey ? 4 : 1);\n    }\n  }\n</script>\n\n{#if store.selectionRectMode === 'nodes' && bounds && isNumeric(bounds.x) && isNumeric(bounds.y)}\n  <div\n    class={['svelte-flow__selection-wrapper', store.noPanClass]}\n    style:width={toPxString(bounds.width)}\n    style:height={toPxString(bounds.height)}\n    style:transform=\"translate({bounds.x}px, {bounds.y}px)\"\n    use:drag={{\n      disabled: false,\n      store,\n      onDrag: (event, _, __, nodes) => {\n        onnodedrag?.({ event, targetNode: null, nodes: nodes as NodeType[] });\n      },\n      onDragStart: (event, _, __, nodes) => {\n        onnodedragstart?.({ event, targetNode: null, nodes: nodes as NodeType[] });\n      },\n      onDragStop: (event, _, __, nodes) => {\n        onnodedragstop?.({ event, targetNode: null, nodes: nodes as NodeType[] });\n      }\n    }}\n    {oncontextmenu}\n    {onclick}\n    role={store.disableKeyboardA11y ? undefined : 'button'}\n    tabIndex={store.disableKeyboardA11y ? undefined : -1}\n    onkeydown={store.disableKeyboardA11y ? undefined : onkeydown}\n    bind:this={ref}\n  >\n    <Selection width=\"100%\" height=\"100%\" x={0} y={0} />\n  </div>\n{/if}\n\n<style>\n  .svelte-flow__selection-wrapper {\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 2000;\n    pointer-events: all;\n  }\n</style>\n","import { on } from 'svelte/events';\n\n/**\n * @param {import('./types.public').ShortcutModifier} def\n * @returns {number}\n */\nfunction mapModifierToBitMask(def) {\n\tswitch (def) {\n\t\tcase 'ctrl':\n\t\t\treturn 0b1000;\n\t\tcase 'shift':\n\t\t\treturn 0b0100;\n\t\tcase 'alt':\n\t\t\treturn 0b0010;\n\t\tcase 'meta':\n\t\t\treturn 0b0001;\n\t}\n}\n\n/**\n * Listen for keyboard event and trigger `shortcut` {@link https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent | CustomEvent }\n * @example Typical usage\n *\n * ```svelte\n * <script lang=\"ts\">\n *  import { shortcut, type ShortcutEventDetail } from '@svelte-put/shortcut';\n *\n *  let commandPalette = false;\n *\n *  function onOpenCommandPalette() {\n *    commandPalette = true;\n *  }\n *  function onCloseCommandPalette() {\n *    commandPalette = false;\n *  }\n *\n *  function doSomethingElse(details: ShortcutEventDetail) {\n *    console.log('Action was placed on:', details.node);\n *    console.log('Trigger:', details.trigger);\n *  }\n *\n *  function onShortcut(event: CustomEvent<ShortcutEventDetail>) {\n *    if (event.detail.trigger.id === 'do-something-else') {\n *      console.log('Same as doSomethingElse()');\n *      // be careful here doSomethingElse would have been called too\n *   }\n * }\n * </script>\n *\n * <svelte:window\n *   use:shortcut={{\n *     trigger: [\n *       {\n *         key: 'k',\n *\n *         // trigger if either ctrl or meta is pressed\n *         modifier: ['ctrl', 'meta'],\n *\n *         callback: onOpenCommandPalette,\n *         preventDefault: true,\n *       },\n *       {\n *         key: 'Escape',\n *         modifier: false, // or any falsy value other than undefined to means 'expect no modifier'\n *\n *         // preferably avoid arrow functions here for better performance\n *         // with arrow functions the action has to be updated more frequently\n *         callback: onCloseCommandPalette,\n *\n *         enabled: commandPalette,\n *         preventDefault: true,\n *       },\n *      {\n *         key: 'k',\n *\n *         // trigger if both ctrl & shift are pressed\n *         modifier: [['ctrl', 'shift']],\n *         id: 'do-something-else',\n *         callback: doSomethingElse,\n *      },\n *     ],\n *   }}\n *   onshortcut={onShortcut}\n * />\n * ```\n * You can either:\n *\n * - pass multiple callbacks to their associated triggers, or\n *\n * - pass one single handler to the `onshortcut` event, in which case you should\n * provide an ID to each trigger to be able to distinguish what trigger was activated\n * in the event handler.\n *\n * Either way, only use `callback` or `onshortcut` and not both to\n * avoid handler duplication.\n * @param {HTMLElement} node - HTMLElement to add event listener to\n * @param {import('./types.public').ShortcutParameter} param - svelte action parameters\n * @returns {import('./types.public').ShortcutActionReturn}\n */\nexport function shortcut(node, param) {\n\tlet { enabled = true, trigger, type = 'keydown' } = param;\n\n\t/**\n\t * @param {KeyboardEvent} event\n\t */\n\tfunction handler(event) {\n\t\tconst normalizedTriggers = Array.isArray(trigger) ? trigger : [trigger];\n\t\tconst modifierMask = [event.metaKey, event.altKey, event.shiftKey, event.ctrlKey].reduce(\n\t\t\t(acc, value, index) => {\n\t\t\t\tif (value) {\n\t\t\t\t\treturn acc | (1 << index);\n\t\t\t\t}\n\t\t\t\treturn acc;\n\t\t\t},\n\t\t\t0b0000,\n\t\t);\n\t\tfor (const trigger of normalizedTriggers) {\n\t\t\tconst mergedTrigger = {\n\t\t\t\tpreventDefault: false,\n\t\t\t\tenabled: true,\n\t\t\t\t...trigger,\n\t\t\t};\n\t\t\tconst { modifier, key, callback, preventDefault, enabled: triggerEnabled } = mergedTrigger;\n\t\t\tif (triggerEnabled) {\n\t\t\t\tif (event.key !== key) continue;\n\n\t\t\t\tif (modifier === null || modifier === false) {\n\t\t\t\t\tif (modifierMask !== 0b0000) continue;\n\t\t\t\t} else if (\n\t\t\t\t\tmodifier !== undefined &&\n\t\t\t\t\tmodifier?.[0]?.length > 0\n\t\t\t\t) {\n\t\t\t\t\tconst orDefs = Array.isArray(modifier) ? modifier : [modifier];\n\t\t\t\t\tlet modified = false;\n\t\t\t\t\tfor (const orDef of orDefs) {\n\t\t\t\t\t\tconst mask = (Array.isArray(orDef) ? orDef : [orDef]).reduce(\n\t\t\t\t\t\t\t(acc, def) => acc | mapModifierToBitMask(def),\n\t\t\t\t\t\t\t0b0000,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (mask === modifierMask) {\n\t\t\t\t\t\t\tmodified = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!modified) continue;\n\t\t\t\t}\n\n\t\t\t\tif (preventDefault) event.preventDefault();\n\t\t\t\t/** @type {import('./types.public').ShortcutEventDetail} */\n\t\t\t\tconst detail = {\n\t\t\t\t\tnode,\n\t\t\t\t\ttrigger: mergedTrigger,\n\t\t\t\t\toriginalEvent: event,\n\t\t\t\t};\n\t\t\t\tnode.dispatchEvent(new CustomEvent('shortcut', { detail }));\n\t\t\t\tcallback?.(detail);\n\t\t\t}\n\t\t}\n\t}\n\n\t/** @type {undefined | (() => void)} */\n\tlet off;\n\tif (enabled) {\n\t\toff = on(node, type, handler);\n\t}\n\n\treturn {\n\t\tupdate: (update) => {\n\t\t\tconst { enabled: newEnabled = true, type: newType = 'keydown' } = update;\n\n\t\t\tif (enabled && (!newEnabled || type !== newType)) {\n\t\t\t\toff?.();\n\t\t\t} else if (!enabled && newEnabled) {\n\t\t\t\toff = on(node, newType, handler);\n\t\t\t}\n\n\t\t\tenabled = newEnabled;\n\t\t\ttype = newType;\n\t\t\ttrigger = update.trigger;\n\t\t},\n\t\tdestroy: () => {\n\t\t\toff?.();\n\t\t},\n\t};\n}\n","import { getOverlappingArea, isRectObject, nodeToRect, pointToRendererPoint, getViewportForBounds, getElementsToRemove, rendererPointToPoint, evaluateAbsolutePosition, getNodesBounds } from '@xyflow/system';\nimport { useStore } from '../store';\nimport { isEdge, isNode } from '../utils';\nimport { untrack } from 'svelte';\n/**\n * Hook for accessing the SvelteFlow instance.\n *\n * @public\n * @returns A set of helper functions\n */\nexport function useSvelteFlow() {\n    const store = $derived(useStore());\n    const getNodeRect = (node) => {\n        const nodeToUse = isNode(node) ? node : store.nodeLookup.get(node.id);\n        const position = nodeToUse.parentId\n            ? evaluateAbsolutePosition(nodeToUse.position, nodeToUse.measured, nodeToUse.parentId, store.nodeLookup, store.nodeOrigin)\n            : nodeToUse.position;\n        const nodeWithPosition = {\n            ...nodeToUse,\n            position,\n            width: nodeToUse.measured?.width ?? nodeToUse.width,\n            height: nodeToUse.measured?.height ?? nodeToUse.height\n        };\n        return nodeToRect(nodeWithPosition);\n    };\n    function updateNode(id, nodeUpdate, options = { replace: false }) {\n        store.nodes = untrack(() => store.nodes).map((node) => {\n            if (node.id === id) {\n                const nextNode = typeof nodeUpdate === 'function' ? nodeUpdate(node) : nodeUpdate;\n                return options?.replace && isNode(nextNode) ? nextNode : { ...node, ...nextNode };\n            }\n            return node;\n        });\n    }\n    function updateEdge(id, edgeUpdate, options = { replace: false }) {\n        store.edges = untrack(() => store.edges).map((edge) => {\n            if (edge.id === id) {\n                const nextEdge = typeof edgeUpdate === 'function' ? edgeUpdate(edge) : edgeUpdate;\n                return options.replace && isEdge(nextEdge) ? nextEdge : { ...edge, ...nextEdge };\n            }\n            return edge;\n        });\n    }\n    const getInternalNode = (id) => store.nodeLookup.get(id);\n    return {\n        zoomIn: store.zoomIn,\n        zoomOut: store.zoomOut,\n        getInternalNode,\n        getNode: (id) => getInternalNode(id)?.internals.userNode,\n        getNodes: (ids) => (ids === undefined ? store.nodes : getElements(store.nodeLookup, ids)),\n        getEdge: (id) => store.edgeLookup.get(id),\n        getEdges: (ids) => (ids === undefined ? store.edges : getElements(store.edgeLookup, ids)),\n        setZoom: (zoomLevel, options) => {\n            const panZoom = store.panZoom;\n            return panZoom\n                ? panZoom.scaleTo(zoomLevel, { duration: options?.duration })\n                : Promise.resolve(false);\n        },\n        getZoom: () => store.viewport.zoom,\n        setViewport: async (nextViewport, options) => {\n            const currentViewport = store.viewport;\n            if (!store.panZoom) {\n                return Promise.resolve(false);\n            }\n            await store.panZoom.setViewport({\n                x: nextViewport.x ?? currentViewport.x,\n                y: nextViewport.y ?? currentViewport.y,\n                zoom: nextViewport.zoom ?? currentViewport.zoom\n            }, options);\n            return Promise.resolve(true);\n        },\n        getViewport: () => $state.snapshot(store.viewport),\n        setCenter: async (x, y, options) => store.setCenter(x, y, options),\n        fitView: (options) => store.fitView(options),\n        fitBounds: async (bounds, options) => {\n            if (!store.panZoom) {\n                return Promise.resolve(false);\n            }\n            const viewport = getViewportForBounds(bounds, store.width, store.height, store.minZoom, store.maxZoom, options?.padding ?? 0.1);\n            await store.panZoom.setViewport(viewport, {\n                duration: options?.duration,\n                ease: options?.ease,\n                interpolate: options?.interpolate\n            });\n            return Promise.resolve(true);\n        },\n        getIntersectingNodes: (nodeOrRect, partially = true, nodesToIntersect) => {\n            const isRect = isRectObject(nodeOrRect);\n            const nodeRect = isRect ? nodeOrRect : getNodeRect(nodeOrRect);\n            if (!nodeRect) {\n                return [];\n            }\n            return (nodesToIntersect || store.nodes).filter((n) => {\n                const internalNode = store.nodeLookup.get(n.id);\n                if (!internalNode || (!isRect && n.id === nodeOrRect.id)) {\n                    return false;\n                }\n                const currNodeRect = nodeToRect(internalNode);\n                const overlappingArea = getOverlappingArea(currNodeRect, nodeRect);\n                const partiallyVisible = partially && overlappingArea > 0;\n                return (partiallyVisible ||\n                    overlappingArea >= currNodeRect.width * currNodeRect.height ||\n                    overlappingArea >= nodeRect.width * nodeRect.height);\n            });\n        },\n        isNodeIntersecting: (nodeOrRect, area, partially = true) => {\n            const isRect = isRectObject(nodeOrRect);\n            const nodeRect = isRect ? nodeOrRect : getNodeRect(nodeOrRect);\n            if (!nodeRect) {\n                return false;\n            }\n            const overlappingArea = getOverlappingArea(nodeRect, area);\n            const partiallyVisible = partially && overlappingArea > 0;\n            return partiallyVisible || overlappingArea >= nodeRect.width * nodeRect.height;\n        },\n        deleteElements: async ({ nodes: nodesToRemove = [], edges: edgesToRemove = [] }) => {\n            const { nodes: matchingNodes, edges: matchingEdges } = await getElementsToRemove({\n                nodesToRemove,\n                edgesToRemove,\n                nodes: store.nodes,\n                edges: store.edges,\n                onBeforeDelete: store.onbeforedelete\n            });\n            if (matchingNodes) {\n                store.nodes = untrack(() => store.nodes).filter((node) => !matchingNodes.some(({ id }) => id === node.id));\n            }\n            if (matchingEdges) {\n                store.edges = untrack(() => store.edges).filter((edge) => !matchingEdges.some(({ id }) => id === edge.id));\n            }\n            if (matchingNodes.length > 0 || matchingEdges.length > 0) {\n                store.ondelete?.({\n                    nodes: matchingNodes,\n                    edges: matchingEdges\n                });\n            }\n            return {\n                deletedNodes: matchingNodes,\n                deletedEdges: matchingEdges\n            };\n        },\n        screenToFlowPosition: (position, options = { snapToGrid: true }) => {\n            if (!store.domNode) {\n                return position;\n            }\n            const _snapGrid = options.snapToGrid ? store.snapGrid : false;\n            const { x, y, zoom } = store.viewport;\n            const { x: domX, y: domY } = store.domNode.getBoundingClientRect();\n            const correctedPosition = {\n                x: position.x - domX,\n                y: position.y - domY\n            };\n            return pointToRendererPoint(correctedPosition, [x, y, zoom], _snapGrid !== null, _snapGrid || [1, 1]);\n        },\n        /**\n         *\n         * @param position\n         * @returns\n         */\n        flowToScreenPosition: (position) => {\n            if (!store.domNode) {\n                return position;\n            }\n            const { x, y, zoom } = store.viewport;\n            const { x: domX, y: domY } = store.domNode.getBoundingClientRect();\n            const rendererPosition = rendererPointToPoint(position, [x, y, zoom]);\n            return {\n                x: rendererPosition.x + domX,\n                y: rendererPosition.y + domY\n            };\n        },\n        toObject: () => {\n            return structuredClone({\n                nodes: [...store.nodes],\n                edges: [...store.edges],\n                viewport: { ...store.viewport }\n            });\n        },\n        updateNode,\n        updateNodeData: (id, dataUpdate, options) => {\n            const node = store.nodeLookup.get(id)?.internals.userNode;\n            if (!node) {\n                return;\n            }\n            const nextData = typeof dataUpdate === 'function' ? dataUpdate(node) : dataUpdate;\n            updateNode(id, (node) => ({\n                ...node,\n                data: options?.replace ? nextData : { ...node.data, ...nextData }\n            }));\n        },\n        updateEdge,\n        getNodesBounds: (nodes) => {\n            return getNodesBounds(nodes, { nodeLookup: store.nodeLookup, nodeOrigin: store.nodeOrigin });\n        },\n        getHandleConnections: ({ type, id, nodeId }) => Array.from(store.connectionLookup.get(`${nodeId}-${type}-${id ?? null}`)?.values() ?? [])\n    };\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction getElements(lookup, ids) {\n    const result = [];\n    for (const id of ids) {\n        const item = lookup.get(id);\n        if (item) {\n            const element = 'internals' in item ? item.internals?.userNode : item;\n            result.push(element);\n        }\n    }\n    return result;\n}\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import {\n    shortcut,\n    type ShortcutEventDetail,\n    type ShortcutModifierDefinition\n  } from '@svelte-put/shortcut';\n  import { isInputDOMNode, isMacOs } from '@xyflow/system';\n\n  import type { KeyHandlerProps } from './types';\n  import type { Node, Edge, KeyDefinition, KeyDefinitionObject } from '../../types';\n  import { useSvelteFlow } from '../../hooks/useSvelteFlow.svelte';\n\n  let {\n    store = $bindable(),\n    selectionKey = 'Shift',\n    multiSelectionKey = isMacOs() ? 'Meta' : 'Control',\n    deleteKey = 'Backspace',\n    panActivationKey = ' ',\n    zoomActivationKey = isMacOs() ? 'Meta' : 'Control'\n  }: KeyHandlerProps<NodeType, EdgeType> = $props();\n\n  let { deleteElements } = useSvelteFlow<NodeType, EdgeType>();\n\n  function isKeyObject(key?: KeyDefinition | null): key is KeyDefinitionObject {\n    return key !== null && typeof key === 'object';\n  }\n\n  function getModifier(key?: KeyDefinition | null): ShortcutModifierDefinition {\n    return isKeyObject(key) ? key.modifier || [] : [];\n  }\n\n  function getKeyString(key?: KeyDefinition | null): string {\n    if (key === null || key === undefined) {\n      // this is a workaround to check if a key is set\n      // if not we won't call the callback\n      return '';\n    }\n\n    return isKeyObject(key) ? key.key : key;\n  }\n\n  function getShortcutTrigger(\n    key: KeyDefinition | KeyDefinition[] | null | undefined,\n    callback: (detail: ShortcutEventDetail) => void\n  ) {\n    const keys = Array.isArray(key) ? key : [key];\n    return keys.map((_key) => {\n      const keyString = getKeyString(_key);\n      return {\n        key: keyString,\n        modifier: getModifier(_key),\n        enabled: keyString !== null,\n        callback\n      };\n    });\n  }\n\n  function resetKeysAndSelection() {\n    store.selectionRect = null;\n    store.selectionKeyPressed = false;\n    store.multiselectionKeyPressed = false;\n    store.deleteKeyPressed = false;\n    store.panActivationKeyPressed = false;\n    store.zoomActivationKeyPressed = false;\n  }\n\n  function handleDelete() {\n    const selectedNodes = store.nodes.filter((node) => node.selected);\n    const selectedEdges = store.edges.filter((edge) => edge.selected);\n\n    deleteElements({\n      nodes: selectedNodes,\n      edges: selectedEdges\n    });\n  }\n</script>\n\n<svelte:window\n  on:blur={resetKeysAndSelection}\n  on:contextmenu={resetKeysAndSelection}\n  use:shortcut={{\n    trigger: getShortcutTrigger(selectionKey, () => (store.selectionKeyPressed = true)),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(selectionKey, () => (store.selectionKeyPressed = false)),\n    type: 'keyup'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(multiSelectionKey, () => {\n      store.multiselectionKeyPressed = true;\n    }),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(multiSelectionKey, () => (store.multiselectionKeyPressed = false)),\n    type: 'keyup'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(deleteKey, (detail) => {\n      const isModifierKey =\n        detail.originalEvent.ctrlKey ||\n        detail.originalEvent.metaKey ||\n        detail.originalEvent.shiftKey;\n      if (!isModifierKey && !isInputDOMNode(detail.originalEvent)) {\n        store.deleteKeyPressed = true;\n        handleDelete();\n      }\n    }),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(deleteKey, () => (store.deleteKeyPressed = false)),\n    type: 'keyup'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(panActivationKey, () => (store.panActivationKeyPressed = true)),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(panActivationKey, () => (store.panActivationKeyPressed = false)),\n    type: 'keyup'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(zoomActivationKey, () => (store.zoomActivationKeyPressed = true)),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(zoomActivationKey, () => (store.zoomActivationKeyPressed = false)),\n    type: 'keyup'\n  }}\n/>\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import type { Component } from 'svelte';\n  import {\n    ConnectionLineType,\n    getBezierPath,\n    getConnectionStatus,\n    getSmoothStepPath,\n    getStraightPath\n  } from '@xyflow/system';\n\n  import type { SvelteFlowStore } from '../../store/types';\n  import type { Node, Edge } from '../../types';\n\n  let {\n    store = $bindable(),\n    type,\n    containerStyle,\n    style,\n    LineComponent\n  }: {\n    store: SvelteFlowStore<NodeType, EdgeType>;\n    type: ConnectionLineType;\n    containerStyle?: string;\n    style?: string;\n    LineComponent?: Component;\n  } = $props();\n\n  let path = $derived.by(() => {\n    if (!store.connection.inProgress) {\n      return '';\n    }\n\n    const pathParams = {\n      sourceX: store.connection.from.x,\n      sourceY: store.connection.from.y,\n      sourcePosition: store.connection.fromPosition,\n      targetX: store.connection.to.x,\n      targetY: store.connection.to.y,\n      targetPosition: store.connection.toPosition\n    };\n\n    switch (type) {\n      case ConnectionLineType.Bezier: {\n        const [path] = getBezierPath(pathParams);\n        return path;\n      }\n      case ConnectionLineType.Straight: {\n        const [path] = getStraightPath(pathParams);\n        return path;\n      }\n      case ConnectionLineType.Step:\n      case ConnectionLineType.SmoothStep: {\n        const [path] = getSmoothStepPath({\n          ...pathParams,\n          borderRadius: type === ConnectionLineType.Step ? 0 : undefined\n        });\n        return path;\n      }\n    }\n  });\n</script>\n\n{#if store.connection.inProgress}\n  <svg\n    width={store.width}\n    height={store.height}\n    class=\"svelte-flow__connectionline\"\n    style={containerStyle}\n  >\n    <g class={['svelte-flow__connection', getConnectionStatus(store.connection.isValid)]}>\n      {#if LineComponent}\n        <LineComponent></LineComponent>\n      {:else}\n        <path d={path} {style} fill=\"none\" class=\"svelte-flow__connection-path\" />\n      {/if}\n    </g>\n  </svg>\n{/if}\n","<script lang=\"ts\">\n  import type { PanelProps } from './types';\n\n  let { position = 'top-right', style, class: className, children, ...rest }: PanelProps = $props();\n\n  let positionClasses = $derived(`${position}`.split('-'));\n</script>\n\n<div class={['svelte-flow__panel', className, ...positionClasses]} {style} {...rest}>\n  {@render children?.()}\n</div>\n","<script lang=\"ts\">\n  import { Panel } from '../../container/Panel';\n  import type { AttributionProps } from './types';\n\n  let { proOptions, position = 'bottom-right' }: AttributionProps = $props();\n</script>\n\n{#if !proOptions?.hideAttribution}\n  <Panel\n    {position}\n    class=\"svelte-flow__attribution\"\n    data-message=\"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us\"\n  >\n    <a\n      href=\"https://svelteflow.dev\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      aria-label=\"Svelte Flow attribution\"\n    >\n      Svelte Flow\n    </a>\n  </Panel>\n{/if}\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import type { HTMLAttributes } from 'svelte/elements';\n  import type { Snippet } from 'svelte';\n  import { type SvelteFlowRestProps } from '../../store/types';\n  import { toPxString } from '../../utils';\n  import type { Node, Edge } from '../../types';\n\n  let {\n    width,\n    height,\n    colorMode,\n    domNode = $bindable(),\n    clientWidth = $bindable(),\n    clientHeight = $bindable(),\n    children,\n    rest\n  }: {\n    width?: number;\n    height?: number;\n    colorMode?: string;\n    domNode: HTMLDivElement | null;\n    clientWidth?: number;\n    clientHeight?: number;\n    children?: Snippet;\n    rest: SvelteFlowRestProps<NodeType, EdgeType> &\n      Omit<HTMLAttributes<HTMLDivElement>, 'onselectionchange'>;\n  } = $props();\n\n  // Unfortunately we have to destructure the props here this way,\n  // so we don't pass all the props as attributes to the div element\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n  let {\n    id,\n    class: className,\n    nodeTypes,\n    edgeTypes,\n    colorMode: _colorMode,\n    isValidConnection,\n    onmove,\n    onmovestart,\n    onmoveend,\n    onflowerror,\n    ondelete,\n    onbeforedelete,\n    onbeforeconnect,\n    onconnect,\n    onconnectstart,\n    onconnectend,\n    onbeforereconnect,\n    onreconnect,\n    onreconnectstart,\n    onreconnectend,\n    onclickconnectstart,\n    onclickconnectend,\n    oninit,\n    onselectionchange,\n    onselectiondragstart,\n    onselectiondrag,\n    onselectiondragstop,\n    onselectionstart,\n    onselectionend,\n    clickConnect,\n    fitView,\n    fitViewOptions,\n    nodeOrigin,\n    nodeDragThreshold,\n    connectionDragThreshold,\n    minZoom,\n    maxZoom,\n    initialViewport,\n    connectionRadius,\n    connectionMode,\n    selectionMode,\n    selectNodesOnDrag,\n    snapGrid,\n    defaultMarkerColor,\n    translateExtent,\n    nodeExtent,\n    onlyRenderVisibleElements,\n    autoPanOnConnect,\n    autoPanOnNodeDrag,\n    colorModeSSR,\n    style,\n    defaultEdgeOptions,\n    elevateNodesOnSelect,\n    elevateEdgesOnSelect,\n    nodesDraggable,\n    autoPanOnNodeFocus,\n    nodesConnectable,\n    elementsSelectable,\n    nodesFocusable,\n    edgesFocusable,\n    disableKeyboardA11y,\n    noDragClass,\n    noPanClass,\n    noWheelClass,\n    ariaLabelConfig,\n    ...divAttributes\n  } = $derived(rest);\n  /* eslint-enable @typescript-eslint/no-unused-vars */\n\n  type OnlyDivAttributes<T> = {\n    [K in keyof T]: K extends keyof HTMLAttributes<HTMLDivElement> ? T[K] : never;\n  };\n\n  // Undo scroll events, preventing viewport from shifting when nodes outside of it are focused\n  function wrapperOnScroll(e: UIEvent & { currentTarget: EventTarget & HTMLDivElement }) {\n    e.currentTarget.scrollTo({ top: 0, left: 0, behavior: 'auto' });\n\n    // Forward the event to any existing onscroll handler if needed\n    if (rest.onscroll) {\n      rest.onscroll(e);\n    }\n  }\n</script>\n\n<div\n  bind:this={domNode}\n  bind:clientHeight\n  bind:clientWidth\n  style:width={toPxString(width)}\n  style:height={toPxString(height)}\n  class={['svelte-flow', 'svelte-flow__container', className, colorMode]}\n  data-testid=\"svelte-flow__wrapper\"\n  role=\"application\"\n  onscroll={wrapperOnScroll}\n  {...divAttributes satisfies OnlyDivAttributes<typeof divAttributes>}\n>\n  {@render children?.()}\n</div>\n\n<style>\n  .svelte-flow {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    position: relative;\n    z-index: 0;\n\n    background-color: var(--background-color, var(--background-color-default));\n  }\n\n  :root {\n    --background-color-default: #fff;\n    --background-pattern-color-default: #ddd;\n\n    --minimap-mask-color-default: rgb(240, 240, 240, 0.6);\n    --minimap-mask-stroke-color-default: none;\n    --minimap-mask-stroke-width-default: 1;\n\n    --controls-button-background-color-default: #fefefe;\n    --controls-button-background-color-hover-default: #f4f4f4;\n    --controls-button-color-default: inherit;\n    --controls-button-color-hover-default: inherit;\n    --controls-button-border-color-default: #eee;\n  }\n</style>\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import type { Edge, Node } from '../../types';\n  import { getContext, setContext, onDestroy, untrack } from 'svelte';\n  import type { HTMLAttributes } from 'svelte/elements';\n  import { ConnectionLineType, PanOnScrollMode } from '@xyflow/system';\n\n  import { key, createStore } from '../../store';\n  import { Zoom } from '../Zoom';\n  import { Pane } from '../Pane';\n  import { Viewport as ViewportComponent } from '../Viewport';\n  import { NodeRenderer } from '../NodeRenderer';\n  import { EdgeRenderer } from '../EdgeRenderer';\n  import { NodeSelection } from '../../components/NodeSelection';\n  import { Selection } from '../../components/Selection';\n  import { KeyHandler } from '../../components/KeyHandler';\n  import { ConnectionLine } from '../../components/ConnectionLine';\n  import { Attribution } from '../../components/Attribution';\n  import type { SvelteFlowProps } from './types';\n  import { type ProviderContext, type StoreContext } from '../../store/types';\n  import Wrapper from './Wrapper.svelte';\n  import { A11yDescriptions } from '../../components/A11yDescriptions';\n\n  let {\n    width,\n    height,\n    proOptions,\n    selectionKey,\n    deleteKey,\n    panActivationKey,\n    multiSelectionKey,\n    zoomActivationKey,\n    paneClickDistance = 1,\n    nodeClickDistance = 1,\n    onmovestart,\n    onmoveend,\n    onmove,\n    oninit,\n    onnodeclick,\n    onnodecontextmenu,\n    onnodedrag,\n    onnodedragstart,\n    onnodedragstop,\n    onnodepointerenter,\n    onnodepointermove,\n    onnodepointerleave,\n    onselectionclick,\n    onselectioncontextmenu,\n    onselectionstart,\n    onselectionend,\n    onedgeclick,\n    onedgecontextmenu,\n    onedgepointerenter,\n    onedgepointerleave,\n    onpaneclick,\n    onpanecontextmenu,\n    panOnScrollMode = PanOnScrollMode.Free,\n    preventScrolling = true,\n    zoomOnScroll = true,\n    zoomOnDoubleClick = true,\n    zoomOnPinch = true,\n    panOnScroll = false,\n    panOnDrag = true,\n    selectionOnDrag = true,\n    connectionLineComponent,\n    connectionLineStyle,\n    connectionLineContainerStyle,\n    connectionLineType = ConnectionLineType.Bezier,\n    attributionPosition,\n    children,\n    nodes = $bindable([]),\n    edges = $bindable([]),\n    viewport = $bindable(undefined),\n    ...props\n  }: SvelteFlowProps<NodeType, EdgeType> &\n    Omit<HTMLAttributes<HTMLDivElement>, 'onselectionchange'> = $props();\n\n  // svelte-ignore non_reactive_update\n  let store = createStore<NodeType, EdgeType>({\n    props,\n    width,\n    height,\n    get nodes() {\n      return nodes;\n    },\n    set nodes(newNodes) {\n      nodes = newNodes;\n    },\n    get edges() {\n      return edges;\n    },\n    set edges(newEdges) {\n      edges = newEdges;\n    },\n    get viewport() {\n      return viewport;\n    },\n    set viewport(newViewport) {\n      viewport = newViewport;\n    }\n  });\n\n  // Set store for provider context\n  const providerContext = getContext<ProviderContext<NodeType, EdgeType>>(key);\n  if (providerContext && providerContext.setStore) {\n    providerContext.setStore(store);\n  }\n\n  // Overwrite store context to give children direct access\n  setContext(key, {\n    provider: false,\n    getStore() {\n      return store;\n    }\n  } satisfies StoreContext<NodeType, EdgeType>);\n\n  // handle selection change\n  $effect(() => {\n    const params = { nodes: store.selectedNodes, edges: store.selectedEdges };\n    untrack(() => props.onselectionchange)?.(params);\n    for (const handler of store.selectionChangeHandlers.values()) {\n      handler(params);\n    }\n  });\n\n  onDestroy(() => {\n    store.reset();\n  });\n</script>\n\n<Wrapper\n  bind:domNode={store.domNode}\n  bind:clientWidth={store.width}\n  bind:clientHeight={store.height}\n  colorMode={store.colorMode}\n  {width}\n  {height}\n  rest={props}\n>\n  <KeyHandler\n    bind:store\n    {selectionKey}\n    {deleteKey}\n    {panActivationKey}\n    {multiSelectionKey}\n    {zoomActivationKey}\n  />\n  <Zoom\n    bind:store\n    {panOnScrollMode}\n    {preventScrolling}\n    {zoomOnScroll}\n    {zoomOnDoubleClick}\n    {zoomOnPinch}\n    {panOnScroll}\n    {panOnDrag}\n    {paneClickDistance}\n    {onmovestart}\n    {onmove}\n    {onmoveend}\n    {oninit}\n  >\n    <Pane\n      bind:store\n      {onpaneclick}\n      {onpanecontextmenu}\n      {onselectionstart}\n      {onselectionend}\n      {panOnDrag}\n      {selectionOnDrag}\n    >\n      <ViewportComponent bind:store>\n        <div class=\"svelte-flow__viewport-back svelte-flow__container\"></div>\n        <EdgeRenderer\n          bind:store\n          {onedgeclick}\n          {onedgecontextmenu}\n          {onedgepointerenter}\n          {onedgepointerleave}\n        />\n        <div class=\"svelte-flow__edge-labels svelte-flow__container\"></div>\n        <ConnectionLine\n          bind:store\n          type={connectionLineType}\n          LineComponent={connectionLineComponent}\n          containerStyle={connectionLineContainerStyle}\n          style={connectionLineStyle}\n        />\n        <NodeRenderer\n          bind:store\n          {nodeClickDistance}\n          {onnodeclick}\n          {onnodecontextmenu}\n          {onnodepointerenter}\n          {onnodepointermove}\n          {onnodepointerleave}\n          {onnodedrag}\n          {onnodedragstart}\n          {onnodedragstop}\n        />\n        <NodeSelection\n          bind:store\n          {onselectionclick}\n          {onselectioncontextmenu}\n          {onnodedrag}\n          {onnodedragstart}\n          {onnodedragstop}\n        />\n        <div class=\"svelte-flow__viewport-front svelte-flow__container\"></div>\n      </ViewportComponent>\n      <Selection\n        isVisible={!!(store.selectionRect && store.selectionRectMode === 'user')}\n        width={store.selectionRect?.width}\n        height={store.selectionRect?.height}\n        x={store.selectionRect?.x}\n        y={store.selectionRect?.y}\n      />\n    </Pane>\n  </Zoom>\n  <Attribution {proOptions} position={attributionPosition} />\n  <A11yDescriptions {store} />\n  {@render children?.()}\n</Wrapper>\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import { onDestroy, setContext } from 'svelte';\n\n  import { createStore, key } from '../../store';\n  import type { SvelteFlowProviderProps } from './types';\n  import type { ProviderContext, SvelteFlowStore } from '../../store/types';\n  import type { Node, Edge } from '../../types';\n\n  let { children }: SvelteFlowProviderProps = $props();\n\n  let store = $state.raw(\n    createStore<NodeType, EdgeType>({\n      props: {},\n      nodes: [],\n      edges: []\n    })\n  );\n\n  setContext(key, {\n    provider: true,\n    getStore() {\n      return store;\n    },\n    setStore: (newStore: SvelteFlowStore<NodeType, EdgeType>) => {\n      store = newStore;\n    }\n  } satisfies ProviderContext<NodeType, EdgeType>);\n\n  onDestroy(() => {\n    store.reset();\n  });\n</script>\n\n{@render children?.()}\n","<script lang=\"ts\">\n  import type { ControlButtonProps } from './types';\n\n  let {\n    class: className,\n    bgColor,\n    bgColorHover,\n    color,\n    colorHover,\n    borderColor,\n    onclick,\n    children,\n    ...restProps\n  }: ControlButtonProps = $props();\n</script>\n\n<button\n  type=\"button\"\n  {onclick}\n  class={['svelte-flow__controls-button', className]}\n  style:--xy-controls-button-background-color-props={bgColor}\n  style:--xy-controls-button-background-color-hover-props={bgColorHover}\n  style:--xy-controls-button-color-props={color}\n  style:--xy-controls-button-color-hover-props={colorHover}\n  style:--xy-controls-button-border-color-props={borderColor}\n  {...restProps}\n>\n  {@render children?.()}\n</button>\n","<script lang=\"ts\">\n  import { useStore } from '../../store';\n  import Panel from '../../container/Panel/Panel.svelte';\n  import ControlButton from './ControlButton.svelte';\n  import PlusIcon from './Icons/Plus.svelte';\n  import MinusIcon from './Icons/Minus.svelte';\n  import FitViewIcon from './Icons/Fit.svelte';\n  import LockIcon from './Icons/Lock.svelte';\n  import UnlockIcon from './Icons/Unlock.svelte';\n\n  import type { ControlsProps } from './types';\n\n  let {\n    position = 'bottom-left',\n    orientation = 'vertical',\n    showZoom = true,\n    showFitView = true,\n    showLock = true,\n    style,\n    class: className,\n    buttonBgColor,\n    buttonBgColorHover,\n    buttonColor,\n    buttonColorHover,\n    buttonBorderColor,\n    fitViewOptions,\n    children,\n    before,\n    after,\n    ...rest\n  }: ControlsProps = $props();\n\n  let store = $derived(useStore());\n\n  const buttonProps = {\n    bgColor: buttonBgColor,\n    bgColorHover: buttonBgColorHover,\n    color: buttonColor,\n    colorHover: buttonColorHover,\n    borderColor: buttonBorderColor\n  };\n\n  let isInteractive = $derived(\n    store.nodesDraggable || store.nodesConnectable || store.elementsSelectable\n  );\n  let minZoomReached = $derived(store.viewport.zoom <= store.minZoom);\n  let maxZoomReached = $derived(store.viewport.zoom >= store.maxZoom);\n  let ariaLabelConfig = $derived(store.ariaLabelConfig);\n  let orientationClass = $derived(orientation === 'horizontal' ? 'horizontal' : 'vertical');\n\n  const onZoomInHandler = () => {\n    store.zoomIn();\n  };\n\n  const onZoomOutHandler = () => {\n    store.zoomOut();\n  };\n\n  const onFitViewHandler = () => {\n    store.fitView(fitViewOptions);\n  };\n\n  const onToggleInteractivity = () => {\n    let interactive = !isInteractive;\n    store.nodesDraggable = interactive;\n    store.nodesConnectable = interactive;\n    store.elementsSelectable = interactive;\n  };\n</script>\n\n<Panel\n  class={['svelte-flow__controls', orientationClass, className]}\n  {position}\n  data-testid=\"svelte-flow__controls\"\n  aria-label={ariaLabelConfig['controls.ariaLabel']}\n  {style}\n  {...rest}\n>\n  {#if before}\n    {@render before()}\n  {/if}\n  {#if showZoom}\n    <ControlButton\n      onclick={onZoomInHandler}\n      class=\"svelte-flow__controls-zoomin\"\n      title={ariaLabelConfig['controls.zoomIn.ariaLabel']}\n      aria-label={ariaLabelConfig['controls.zoomIn.ariaLabel']}\n      disabled={maxZoomReached}\n      {...buttonProps}\n    >\n      <PlusIcon />\n    </ControlButton>\n    <ControlButton\n      onclick={onZoomOutHandler}\n      class=\"svelte-flow__controls-zoomout\"\n      title={ariaLabelConfig['controls.zoomOut.ariaLabel']}\n      aria-label={ariaLabelConfig['controls.zoomOut.ariaLabel']}\n      disabled={minZoomReached}\n      {...buttonProps}\n    >\n      <MinusIcon />\n    </ControlButton>\n  {/if}\n  {#if showFitView}\n    <ControlButton\n      class=\"svelte-flow__controls-fitview\"\n      onclick={onFitViewHandler}\n      title={ariaLabelConfig['controls.fitView.ariaLabel']}\n      aria-label={ariaLabelConfig['controls.fitView.ariaLabel']}\n      {...buttonProps}\n    >\n      <FitViewIcon />\n    </ControlButton>\n  {/if}\n  {#if showLock}\n    <ControlButton\n      class=\"svelte-flow__controls-interactive\"\n      onclick={onToggleInteractivity}\n      title={ariaLabelConfig['controls.interactive.ariaLabel']}\n      aria-label={ariaLabelConfig['controls.interactive.ariaLabel']}\n      {...buttonProps}\n    >\n      {#if isInteractive}<UnlockIcon />{:else}<LockIcon />{/if}\n    </ControlButton>\n  {/if}\n  {#if children}\n    {@render children()}\n  {/if}\n  {#if after}\n    {@render after()}\n  {/if}\n</Panel>\n","export var BackgroundVariant;\n(function (BackgroundVariant) {\n    BackgroundVariant[\"Lines\"] = \"lines\";\n    BackgroundVariant[\"Dots\"] = \"dots\";\n    BackgroundVariant[\"Cross\"] = \"cross\";\n})(BackgroundVariant || (BackgroundVariant = {}));\n","<script lang=\"ts\">\n  import type { ClassValue } from 'svelte/elements';\n\n  let { radius, class: className }: { radius: number; class?: ClassValue } = $props();\n</script>\n\n<circle\n  cx={radius}\n  cy={radius}\n  r={radius}\n  class={['svelte-flow__background-pattern', 'dots', className]}\n/>\n","<script lang=\"ts\">\n  import type { ClassValue } from 'svelte/elements';\n  import type { BackgroundVariant } from './types';\n\n  let {\n    lineWidth,\n    dimensions,\n    variant,\n    class: className\n  }: {\n    lineWidth: number;\n    dimensions: [number, number];\n    variant: BackgroundVariant;\n    class?: ClassValue;\n  } = $props();\n</script>\n\n<path\n  stroke-width={lineWidth}\n  d={`M${dimensions[0] / 2} 0 V${dimensions[1]} M0 ${dimensions[1] / 2} H${dimensions[0]}`}\n  class={['svelte-flow__background-pattern', variant, className]}\n/>\n","<script lang=\"ts\" module>\n  const defaultSize = {\n    [BackgroundVariant.Dots]: 1,\n    [BackgroundVariant.Lines]: 1,\n    [BackgroundVariant.Cross]: 6\n  };\n</script>\n\n<script lang=\"ts\">\n  import { useStore } from '../../store';\n  import { BackgroundVariant, type BackgroundProps } from './types';\n\n  import DotPattern from './DotPattern.svelte';\n  import LinePattern from './LinePattern.svelte';\n\n  let {\n    id,\n    variant = BackgroundVariant.Dots,\n    gap = 20,\n    size,\n    lineWidth = 1,\n    bgColor,\n    patternColor,\n    patternClass,\n    class: className\n  }: BackgroundProps = $props();\n\n  let store = $derived(useStore());\n\n  let isDots = $derived(variant === BackgroundVariant.Dots);\n  let isCross = $derived(variant === BackgroundVariant.Cross);\n  let gapXY: number[] = $derived(Array.isArray(gap) ? gap : [gap, gap]);\n\n  let patternId = $derived(`background-pattern-${store.flowId}-${id ?? ''}`);\n  let scaledGap = $derived([\n    gapXY[0] * store.viewport.zoom || 1,\n    gapXY[1] * store.viewport.zoom || 1\n  ]);\n  let scaledSize = $derived((size ?? defaultSize[variant]) * store.viewport.zoom);\n\n  let patternDimensions = $derived(\n    (isCross ? [scaledSize, scaledSize] : scaledGap) as [number, number]\n  );\n  let patternOffset = $derived(\n    isDots ? [scaledSize / 2, scaledSize / 2] : [patternDimensions[0] / 2, patternDimensions[1] / 2]\n  );\n</script>\n\n<svg\n  class={['svelte-flow__background', 'svelte-flow__container', className]}\n  data-testid=\"svelte-flow__background\"\n  style:--xy-background-color-props={bgColor}\n  style:--xy-background-pattern-color-props={patternColor}\n>\n  <pattern\n    id={patternId}\n    x={store.viewport.x % scaledGap[0]}\n    y={store.viewport.y % scaledGap[1]}\n    width={scaledGap[0]}\n    height={scaledGap[1]}\n    patternUnits=\"userSpaceOnUse\"\n    patternTransform={`translate(-${patternOffset[0]},-${patternOffset[1]})`}\n  >\n    {#if isDots}\n      <DotPattern radius={scaledSize / 2} class={patternClass} />\n    {:else}\n      <LinePattern dimensions={patternDimensions} {variant} {lineWidth} class={patternClass} />\n    {/if}\n  </pattern>\n  <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill={`url(#${patternId})`} />\n</svg>\n","<script lang=\"ts\">\n  import type { ClassValue } from 'svelte/elements';\n\n  let {\n    x,\n    y,\n    width,\n    height,\n    borderRadius = 5,\n    color,\n    shapeRendering,\n    strokeColor,\n    strokeWidth = 2,\n    selected,\n    class: className\n  }: {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    borderRadius?: number;\n    color?: string;\n    shapeRendering: string;\n    strokeColor?: string;\n    strokeWidth?: number;\n    selected?: boolean;\n    class?: ClassValue;\n  } = $props();\n</script>\n\n<rect\n  class={['svelte-flow__minimap-node', className]}\n  class:selected\n  {x}\n  {y}\n  rx={borderRadius}\n  ry={borderRadius}\n  {width}\n  {height}\n  style:fill={color}\n  style:stroke={strokeColor}\n  style:stroke-width={strokeWidth}\n  shape-rendering={shapeRendering}\n/>\n","import { XYMinimap } from '@xyflow/system';\nexport default function interactive(domNode, params) {\n    const minimap = XYMinimap({\n        domNode,\n        panZoom: params.panZoom,\n        getTransform: () => {\n            const { viewport } = params.store;\n            return [viewport.x, viewport.y, viewport.zoom];\n        },\n        getViewScale: params.getViewScale\n    });\n    minimap.update({\n        translateExtent: params.translateExtent,\n        width: params.width,\n        height: params.height,\n        inversePan: params.inversePan,\n        zoomStep: params.zoomStep,\n        pannable: params.pannable,\n        zoomable: params.zoomable\n    });\n    function update(params) {\n        minimap.update({\n            translateExtent: params.translateExtent,\n            width: params.width,\n            height: params.height,\n            inversePan: params.inversePan,\n            zoomStep: params.zoomStep,\n            pannable: params.pannable,\n            zoomable: params.zoomable\n        });\n    }\n    return {\n        update,\n        destroy() {\n            minimap.destroy();\n        }\n    };\n}\n","<script lang=\"ts\" module>\n  declare const window: Window | undefined;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const getAttrFunction = (func: any): GetMiniMapNodeAttribute =>\n    func instanceof Function ? func : () => func;\n</script>\n\n<script lang=\"ts\">\n  import {\n    getBoundsOfRects,\n    getInternalNodesBounds,\n    getNodeDimensions,\n    nodeHasDimensions\n  } from '@xyflow/system';\n\n  import { useStore } from '../../store';\n  import { Panel } from '../../container/Panel';\n  import MinimapNode from './MinimapNode.svelte';\n  import interactive from './interactive';\n  import type { GetMiniMapNodeAttribute, MiniMapProps } from './types';\n\n  let {\n    position = 'bottom-right',\n    ariaLabel,\n    nodeStrokeColor = 'transparent',\n    nodeColor,\n    nodeClass = '',\n    nodeBorderRadius = 5,\n    nodeStrokeWidth = 2,\n    bgColor,\n    maskColor,\n    maskStrokeColor,\n    maskStrokeWidth,\n    width = 200,\n    height = 150,\n    pannable = true,\n    zoomable = true,\n    inversePan,\n    zoomStep,\n    class: className,\n    ...rest\n  }: MiniMapProps = $props();\n\n  let store = $derived(useStore());\n  let ariaLabelConfig = $derived(store.ariaLabelConfig);\n\n  const nodeColorFunc = nodeColor === undefined ? undefined : getAttrFunction(nodeColor);\n  const nodeStrokeColorFunc = getAttrFunction(nodeStrokeColor);\n  const nodeClassFunc = getAttrFunction(nodeClass);\n  const shapeRendering =\n    // @ts-expect-error - TS doesn't know about chrome\n    typeof window === 'undefined' || !!window.chrome ? 'crispEdges' : 'geometricPrecision';\n\n  let labelledBy = $derived(`svelte-flow__minimap-desc-${store.flowId}`);\n\n  let viewBB = $derived({\n    x: -store.viewport.x / store.viewport.zoom,\n    y: -store.viewport.y / store.viewport.zoom,\n    width: store.width / store.viewport.zoom,\n    height: store.height / store.viewport.zoom\n  });\n  let boundingRect = $derived(\n    store.nodeLookup.size > 0\n      ? getBoundsOfRects(\n          getInternalNodesBounds(store.nodeLookup, { filter: (n) => !n.hidden }),\n          viewBB\n        )\n      : viewBB\n  );\n  let scaledWidth = $derived(boundingRect.width / width);\n  let scaledHeight = $derived(boundingRect.height / height);\n  let viewScale = $derived(Math.max(scaledWidth, scaledHeight));\n  let viewWidth = $derived(viewScale * width);\n  let viewHeight = $derived(viewScale * height);\n  let offset = $derived(5 * viewScale);\n  let x = $derived(boundingRect.x - (viewWidth - boundingRect.width) / 2 - offset);\n  let y = $derived(boundingRect.y - (viewHeight - boundingRect.height) / 2 - offset);\n  let viewboxWidth = $derived(viewWidth + offset * 2);\n  let viewboxHeight = $derived(viewHeight + offset * 2);\n\n  const getViewScale = () => viewScale;\n</script>\n\n<Panel\n  {position}\n  class={['svelte-flow__minimap', className]}\n  data-testid=\"svelte-flow__minimap\"\n  --xy-minimap-background-color-props={bgColor}\n  {...rest}\n>\n  {#if store.panZoom}\n    <svg\n      {width}\n      {height}\n      viewBox=\"{x} {y} {viewboxWidth} {viewboxHeight}\"\n      class=\"svelte-flow__minimap-svg\"\n      role=\"img\"\n      aria-labelledby={labelledBy}\n      style:--xy-minimap-mask-background-color-props={maskColor}\n      style:--xy-minimap-mask-stroke-color-props={maskStrokeColor}\n      style:--xy-minimap-mask-stroke-width-props={maskStrokeWidth\n        ? maskStrokeWidth * viewScale\n        : undefined}\n      use:interactive={{\n        store,\n        panZoom: store.panZoom,\n        getViewScale,\n        translateExtent: store.translateExtent,\n        width: store.width,\n        height: store.height,\n        inversePan,\n        zoomStep,\n        pannable,\n        zoomable\n      }}\n    >\n      {#if ariaLabel ?? ariaLabelConfig['minimap.ariaLabel']}\n        <title id={labelledBy}>{ariaLabel ?? ariaLabelConfig['minimap.ariaLabel']}</title>\n      {/if}\n\n      {#each store.nodes as userNode (userNode.id)}\n        {@const node = store.nodeLookup.get(userNode.id)}\n        {#if node && nodeHasDimensions(node)}\n          {@const nodeDimesions = getNodeDimensions(node)}\n          <MinimapNode\n            x={node.internals.positionAbsolute.x}\n            y={node.internals.positionAbsolute.y}\n            {...nodeDimesions}\n            selected={node.selected}\n            color={nodeColorFunc?.(node)}\n            borderRadius={nodeBorderRadius}\n            strokeColor={nodeStrokeColorFunc(node)}\n            strokeWidth={nodeStrokeWidth}\n            {shapeRendering}\n            class={nodeClassFunc(node)}\n          />\n        {/if}\n      {/each}\n      <path\n        class=\"svelte-flow__minimap-mask\"\n        d=\"M{x - offset},{y - offset}h{viewboxWidth + offset * 2}v{viewboxHeight +\n          offset * 2}h{-viewboxWidth - offset * 2}z\n      M{viewBB.x},{viewBB.y}h{viewBB.width}v{viewBB.height}h{-viewBB.width}z\"\n        fill-rule=\"evenodd\"\n        pointer-events=\"none\"\n      />\n    </svg>\n  {/if}\n</Panel>\n","import { useStore } from '../store';\n/**\n * Hook for receiving the current connection.\n *\n * @public\n * @returns Current connection as a signal\n */\nexport function useConnection() {\n    const { connection } = $derived(useStore());\n    return {\n        get current() {\n            return connection;\n        }\n    };\n}\n","/**\n* Expression to test part of icon name.\n*\n* Used when loading icons from Iconify API due to project naming convension.\n* Ignored when using custom icon sets - convension does not apply.\n*/\nconst matchIconName = /^[a-z0-9]+(-[a-z0-9]+)*$/;\n/**\n* Convert string icon name to IconifyIconName object.\n*/\nconst stringToIcon = (value, validate, allowSimpleName, provider = \"\") => {\n\tconst colonSeparated = value.split(\":\");\n\tif (value.slice(0, 1) === \"@\") {\n\t\tif (colonSeparated.length < 2 || colonSeparated.length > 3) return null;\n\t\tprovider = colonSeparated.shift().slice(1);\n\t}\n\tif (colonSeparated.length > 3 || !colonSeparated.length) return null;\n\tif (colonSeparated.length > 1) {\n\t\tconst name$1 = colonSeparated.pop();\n\t\tconst prefix = colonSeparated.pop();\n\t\tconst result = {\n\t\t\tprovider: colonSeparated.length > 0 ? colonSeparated[0] : provider,\n\t\t\tprefix,\n\t\t\tname: name$1\n\t\t};\n\t\treturn validate && !validateIconName(result) ? null : result;\n\t}\n\tconst name = colonSeparated[0];\n\tconst dashSeparated = name.split(\"-\");\n\tif (dashSeparated.length > 1) {\n\t\tconst result = {\n\t\t\tprovider,\n\t\t\tprefix: dashSeparated.shift(),\n\t\t\tname: dashSeparated.join(\"-\")\n\t\t};\n\t\treturn validate && !validateIconName(result) ? null : result;\n\t}\n\tif (allowSimpleName && provider === \"\") {\n\t\tconst result = {\n\t\t\tprovider,\n\t\t\tprefix: \"\",\n\t\t\tname\n\t\t};\n\t\treturn validate && !validateIconName(result, allowSimpleName) ? null : result;\n\t}\n\treturn null;\n};\n/**\n* Check if icon is valid.\n*\n* This function is not part of stringToIcon because validation is not needed for most code.\n*/\nconst validateIconName = (icon, allowSimpleName) => {\n\tif (!icon) return false;\n\treturn !!((allowSimpleName && icon.prefix === \"\" || !!icon.prefix) && !!icon.name);\n};\n\n/**\n* Resolve icon set icons\n*\n* Returns parent icon for each icon\n*/\nfunction getIconsTree(data, names) {\n\tconst icons = data.icons;\n\tconst aliases = data.aliases || Object.create(null);\n\tconst resolved = Object.create(null);\n\tfunction resolve(name) {\n\t\tif (icons[name]) return resolved[name] = [];\n\t\tif (!(name in resolved)) {\n\t\t\tresolved[name] = null;\n\t\t\tconst parent = aliases[name] && aliases[name].parent;\n\t\t\tconst value = parent && resolve(parent);\n\t\t\tif (value) resolved[name] = [parent].concat(value);\n\t\t}\n\t\treturn resolved[name];\n\t}\n\t(Object.keys(icons).concat(Object.keys(aliases))).forEach(resolve);\n\treturn resolved;\n}\n\n/** Default values for dimensions */\nconst defaultIconDimensions = Object.freeze({\n\tleft: 0,\n\ttop: 0,\n\twidth: 16,\n\theight: 16\n});\n/** Default values for transformations */\nconst defaultIconTransformations = Object.freeze({\n\trotate: 0,\n\tvFlip: false,\n\thFlip: false\n});\n/** Default values for all optional IconifyIcon properties */\nconst defaultIconProps = Object.freeze({\n\t...defaultIconDimensions,\n\t...defaultIconTransformations\n});\n/** Default values for all properties used in ExtendedIconifyIcon */\nconst defaultExtendedIconProps = Object.freeze({\n\t...defaultIconProps,\n\tbody: \"\",\n\thidden: false\n});\n\n/**\n* Merge transformations\n*/\nfunction mergeIconTransformations(obj1, obj2) {\n\tconst result = {};\n\tif (!obj1.hFlip !== !obj2.hFlip) result.hFlip = true;\n\tif (!obj1.vFlip !== !obj2.vFlip) result.vFlip = true;\n\tconst rotate = ((obj1.rotate || 0) + (obj2.rotate || 0)) % 4;\n\tif (rotate) result.rotate = rotate;\n\treturn result;\n}\n\n/**\n* Merge icon and alias\n*\n* Can also be used to merge default values and icon\n*/\nfunction mergeIconData(parent, child) {\n\tconst result = mergeIconTransformations(parent, child);\n\tfor (const key in defaultExtendedIconProps) if (key in defaultIconTransformations) {\n\t\tif (key in parent && !(key in result)) result[key] = defaultIconTransformations[key];\n\t} else if (key in child) result[key] = child[key];\n\telse if (key in parent) result[key] = parent[key];\n\treturn result;\n}\n\n/**\n* Get icon data, using prepared aliases tree\n*/\nfunction internalGetIconData(data, name, tree) {\n\tconst icons = data.icons;\n\tconst aliases = data.aliases || Object.create(null);\n\tlet currentProps = {};\n\tfunction parse(name$1) {\n\t\tcurrentProps = mergeIconData(icons[name$1] || aliases[name$1], currentProps);\n\t}\n\tparse(name);\n\ttree.forEach(parse);\n\treturn mergeIconData(data, currentProps);\n}\n\n/**\n* Extract icons from an icon set\n*\n* Returns list of icons that were found in icon set\n*/\nfunction parseIconSet(data, callback) {\n\tconst names = [];\n\tif (typeof data !== \"object\" || typeof data.icons !== \"object\") return names;\n\tif (data.not_found instanceof Array) data.not_found.forEach((name) => {\n\t\tcallback(name, null);\n\t\tnames.push(name);\n\t});\n\tconst tree = getIconsTree(data);\n\tfor (const name in tree) {\n\t\tconst item = tree[name];\n\t\tif (item) {\n\t\t\tcallback(name, internalGetIconData(data, name, item));\n\t\t\tnames.push(name);\n\t\t}\n\t}\n\treturn names;\n}\n\n/**\n* Optional properties\n*/\nconst optionalPropertyDefaults = {\n\tprovider: \"\",\n\taliases: {},\n\tnot_found: {},\n\t...defaultIconDimensions\n};\n/**\n* Check props\n*/\nfunction checkOptionalProps(item, defaults) {\n\tfor (const prop in defaults) if (prop in item && typeof item[prop] !== typeof defaults[prop]) return false;\n\treturn true;\n}\n/**\n* Validate icon set, return it as IconifyJSON on success, null on failure\n*\n* Unlike validateIconSet(), this function is very basic.\n* It does not throw exceptions, it does not check metadata, it does not fix stuff.\n*/\nfunction quicklyValidateIconSet(obj) {\n\tif (typeof obj !== \"object\" || obj === null) return null;\n\tconst data = obj;\n\tif (typeof data.prefix !== \"string\" || !obj.icons || typeof obj.icons !== \"object\") return null;\n\tif (!checkOptionalProps(obj, optionalPropertyDefaults)) return null;\n\tconst icons = data.icons;\n\tfor (const name in icons) {\n\t\tconst icon = icons[name];\n\t\tif (!name || typeof icon.body !== \"string\" || !checkOptionalProps(icon, defaultExtendedIconProps)) return null;\n\t}\n\tconst aliases = data.aliases || Object.create(null);\n\tfor (const name in aliases) {\n\t\tconst icon = aliases[name];\n\t\tconst parent = icon.parent;\n\t\tif (!name || typeof parent !== \"string\" || !icons[parent] && !aliases[parent] || !checkOptionalProps(icon, defaultExtendedIconProps)) return null;\n\t}\n\treturn data;\n}\n\n/**\n* Storage by provider and prefix\n*/\nconst dataStorage = Object.create(null);\n/**\n* Create new storage\n*/\nfunction newStorage(provider, prefix) {\n\treturn {\n\t\tprovider,\n\t\tprefix,\n\t\ticons: Object.create(null),\n\t\tmissing: /* @__PURE__ */ new Set()\n\t};\n}\n/**\n* Get storage for provider and prefix\n*/\nfunction getStorage(provider, prefix) {\n\tconst providerStorage = dataStorage[provider] || (dataStorage[provider] = Object.create(null));\n\treturn providerStorage[prefix] || (providerStorage[prefix] = newStorage(provider, prefix));\n}\n/**\n* Add icon set to storage\n*\n* Returns array of added icons\n*/\nfunction addIconSet(storage, data) {\n\tif (!quicklyValidateIconSet(data)) return [];\n\treturn parseIconSet(data, (name, icon) => {\n\t\tif (icon) storage.icons[name] = icon;\n\t\telse storage.missing.add(name);\n\t});\n}\n/**\n* Add icon to storage\n*/\nfunction addIconToStorage(storage, name, icon) {\n\ttry {\n\t\tif (typeof icon.body === \"string\") {\n\t\t\tstorage.icons[name] = { ...icon };\n\t\t\treturn true;\n\t\t}\n\t} catch (err) {}\n\treturn false;\n}\n/**\n* List available icons\n*/\nfunction listIcons(provider, prefix) {\n\tlet allIcons = [];\n\t(typeof provider === \"string\" ? [provider] : Object.keys(dataStorage)).forEach((provider$1) => {\n\t\t(typeof provider$1 === \"string\" && typeof prefix === \"string\" ? [prefix] : Object.keys(dataStorage[provider$1] || {})).forEach((prefix$1) => {\n\t\t\tconst storage = getStorage(provider$1, prefix$1);\n\t\t\tallIcons = allIcons.concat(Object.keys(storage.icons).map((name) => (provider$1 !== \"\" ? \"@\" + provider$1 + \":\" : \"\") + prefix$1 + \":\" + name));\n\t\t});\n\t});\n\treturn allIcons;\n}\n\n/**\n* Allow storing icons without provider or prefix, making it possible to store icons like \"home\"\n*/\nlet simpleNames = false;\nfunction allowSimpleNames(allow) {\n\tif (typeof allow === \"boolean\") simpleNames = allow;\n\treturn simpleNames;\n}\n/**\n* Get icon data\n*\n* Returns:\n* - IconifyIcon on success, object directly from storage so don't modify it\n* - null if icon is marked as missing (returned in `not_found` property from API, so don't bother sending API requests)\n* - undefined if icon is missing in storage\n*/\nfunction getIconData(name) {\n\tconst icon = typeof name === \"string\" ? stringToIcon(name, true, simpleNames) : name;\n\tif (icon) {\n\t\tconst storage = getStorage(icon.provider, icon.prefix);\n\t\tconst iconName = icon.name;\n\t\treturn storage.icons[iconName] || (storage.missing.has(iconName) ? null : void 0);\n\t}\n}\n/**\n* Add one icon\n*/\nfunction addIcon(name, data) {\n\tconst icon = stringToIcon(name, true, simpleNames);\n\tif (!icon) return false;\n\tconst storage = getStorage(icon.provider, icon.prefix);\n\tif (data) return addIconToStorage(storage, icon.name, data);\n\telse {\n\t\tstorage.missing.add(icon.name);\n\t\treturn true;\n\t}\n}\n/**\n* Add icon set\n*/\nfunction addCollection(data, provider) {\n\tif (typeof data !== \"object\") return false;\n\tif (typeof provider !== \"string\") provider = data.provider || \"\";\n\tif (simpleNames && !provider && !data.prefix) {\n\t\tlet added = false;\n\t\tif (quicklyValidateIconSet(data)) {\n\t\t\tdata.prefix = \"\";\n\t\t\tparseIconSet(data, (name, icon) => {\n\t\t\t\tif (addIcon(name, icon)) added = true;\n\t\t\t});\n\t\t}\n\t\treturn added;\n\t}\n\tconst prefix = data.prefix;\n\tif (!validateIconName({\n\t\tprefix,\n\t\tname: \"a\"\n\t})) return false;\n\treturn !!addIconSet(getStorage(provider, prefix), data);\n}\n/**\n* Check if icon data is available\n*/\nfunction iconLoaded(name) {\n\treturn !!getIconData(name);\n}\n/**\n* Get full icon\n*/\nfunction getIcon(name) {\n\tconst result = getIconData(name);\n\treturn result ? {\n\t\t...defaultIconProps,\n\t\t...result\n\t} : result;\n}\n\n/**\n* Default icon customisations values\n*/\nconst defaultIconSizeCustomisations = Object.freeze({\n\twidth: null,\n\theight: null\n});\nconst defaultIconCustomisations = Object.freeze({\n\t...defaultIconSizeCustomisations,\n\t...defaultIconTransformations\n});\n\n/**\n* Regular expressions for calculating dimensions\n*/\nconst unitsSplit = /(-?[0-9.]*[0-9]+[0-9.]*)/g;\nconst unitsTest = /^-?[0-9.]*[0-9]+[0-9.]*$/g;\nfunction calculateSize(size, ratio, precision) {\n\tif (ratio === 1) return size;\n\tprecision = precision || 100;\n\tif (typeof size === \"number\") return Math.ceil(size * ratio * precision) / precision;\n\tif (typeof size !== \"string\") return size;\n\tconst oldParts = size.split(unitsSplit);\n\tif (oldParts === null || !oldParts.length) return size;\n\tconst newParts = [];\n\tlet code = oldParts.shift();\n\tlet isNumber = unitsTest.test(code);\n\twhile (true) {\n\t\tif (isNumber) {\n\t\t\tconst num = parseFloat(code);\n\t\t\tif (isNaN(num)) newParts.push(code);\n\t\t\telse newParts.push(Math.ceil(num * ratio * precision) / precision);\n\t\t} else newParts.push(code);\n\t\tcode = oldParts.shift();\n\t\tif (code === void 0) return newParts.join(\"\");\n\t\tisNumber = !isNumber;\n\t}\n}\n\nfunction splitSVGDefs(content, tag = \"defs\") {\n\tlet defs = \"\";\n\tconst index = content.indexOf(\"<\" + tag);\n\twhile (index >= 0) {\n\t\tconst start = content.indexOf(\">\", index);\n\t\tconst end = content.indexOf(\"</\" + tag);\n\t\tif (start === -1 || end === -1) break;\n\t\tconst endEnd = content.indexOf(\">\", end);\n\t\tif (endEnd === -1) break;\n\t\tdefs += content.slice(start + 1, end).trim();\n\t\tcontent = content.slice(0, index).trim() + content.slice(endEnd + 1);\n\t}\n\treturn {\n\t\tdefs,\n\t\tcontent\n\t};\n}\n/**\n* Merge defs and content\n*/\nfunction mergeDefsAndContent(defs, content) {\n\treturn defs ? \"<defs>\" + defs + \"</defs>\" + content : content;\n}\n/**\n* Wrap SVG content, without wrapping definitions\n*/\nfunction wrapSVGContent(body, start, end) {\n\tconst split = splitSVGDefs(body);\n\treturn mergeDefsAndContent(split.defs, start + split.content + end);\n}\n\n/**\n* Check if value should be unset. Allows multiple keywords\n*/\nconst isUnsetKeyword = (value) => value === \"unset\" || value === \"undefined\" || value === \"none\";\n/**\n* Get SVG attributes and content from icon + customisations\n*\n* Does not generate style to make it compatible with frameworks that use objects for style, such as React.\n* Instead, it generates 'inline' value. If true, rendering engine should add verticalAlign: -0.125em to icon.\n*\n* Customisations should be normalised by platform specific parser.\n* Result should be converted to <svg> by platform specific parser.\n* Use replaceIDs to generate unique IDs for body.\n*/\nfunction iconToSVG(icon, customisations) {\n\tconst fullIcon = {\n\t\t...defaultIconProps,\n\t\t...icon\n\t};\n\tconst fullCustomisations = {\n\t\t...defaultIconCustomisations,\n\t\t...customisations\n\t};\n\tconst box = {\n\t\tleft: fullIcon.left,\n\t\ttop: fullIcon.top,\n\t\twidth: fullIcon.width,\n\t\theight: fullIcon.height\n\t};\n\tlet body = fullIcon.body;\n\t[fullIcon, fullCustomisations].forEach((props) => {\n\t\tconst transformations = [];\n\t\tconst hFlip = props.hFlip;\n\t\tconst vFlip = props.vFlip;\n\t\tlet rotation = props.rotate;\n\t\tif (hFlip) if (vFlip) rotation += 2;\n\t\telse {\n\t\t\ttransformations.push(\"translate(\" + (box.width + box.left).toString() + \" \" + (0 - box.top).toString() + \")\");\n\t\t\ttransformations.push(\"scale(-1 1)\");\n\t\t\tbox.top = box.left = 0;\n\t\t}\n\t\telse if (vFlip) {\n\t\t\ttransformations.push(\"translate(\" + (0 - box.left).toString() + \" \" + (box.height + box.top).toString() + \")\");\n\t\t\ttransformations.push(\"scale(1 -1)\");\n\t\t\tbox.top = box.left = 0;\n\t\t}\n\t\tlet tempValue;\n\t\tif (rotation < 0) rotation -= Math.floor(rotation / 4) * 4;\n\t\trotation = rotation % 4;\n\t\tswitch (rotation) {\n\t\t\tcase 1:\n\t\t\t\ttempValue = box.height / 2 + box.top;\n\t\t\t\ttransformations.unshift(\"rotate(90 \" + tempValue.toString() + \" \" + tempValue.toString() + \")\");\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\ttransformations.unshift(\"rotate(180 \" + (box.width / 2 + box.left).toString() + \" \" + (box.height / 2 + box.top).toString() + \")\");\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\ttempValue = box.width / 2 + box.left;\n\t\t\t\ttransformations.unshift(\"rotate(-90 \" + tempValue.toString() + \" \" + tempValue.toString() + \")\");\n\t\t\t\tbreak;\n\t\t}\n\t\tif (rotation % 2 === 1) {\n\t\t\tif (box.left !== box.top) {\n\t\t\t\ttempValue = box.left;\n\t\t\t\tbox.left = box.top;\n\t\t\t\tbox.top = tempValue;\n\t\t\t}\n\t\t\tif (box.width !== box.height) {\n\t\t\t\ttempValue = box.width;\n\t\t\t\tbox.width = box.height;\n\t\t\t\tbox.height = tempValue;\n\t\t\t}\n\t\t}\n\t\tif (transformations.length) body = wrapSVGContent(body, \"<g transform=\\\"\" + transformations.join(\" \") + \"\\\">\", \"</g>\");\n\t});\n\tconst customisationsWidth = fullCustomisations.width;\n\tconst customisationsHeight = fullCustomisations.height;\n\tconst boxWidth = box.width;\n\tconst boxHeight = box.height;\n\tlet width;\n\tlet height;\n\tif (customisationsWidth === null) {\n\t\theight = customisationsHeight === null ? \"1em\" : customisationsHeight === \"auto\" ? boxHeight : customisationsHeight;\n\t\twidth = calculateSize(height, boxWidth / boxHeight);\n\t} else {\n\t\twidth = customisationsWidth === \"auto\" ? boxWidth : customisationsWidth;\n\t\theight = customisationsHeight === null ? calculateSize(width, boxHeight / boxWidth) : customisationsHeight === \"auto\" ? boxHeight : customisationsHeight;\n\t}\n\tconst attributes = {};\n\tconst setAttr = (prop, value) => {\n\t\tif (!isUnsetKeyword(value)) attributes[prop] = value.toString();\n\t};\n\tsetAttr(\"width\", width);\n\tsetAttr(\"height\", height);\n\tconst viewBox = [\n\t\tbox.left,\n\t\tbox.top,\n\t\tboxWidth,\n\t\tboxHeight\n\t];\n\tattributes.viewBox = viewBox.join(\" \");\n\treturn {\n\t\tattributes,\n\t\tviewBox,\n\t\tbody\n\t};\n}\n\n/**\n* Regular expression for finding ids\n*/\nconst regex = /\\sid=\"(\\S+)\"/g;\n/**\n* Counters\n*/\nconst counters = /* @__PURE__ */ new Map();\n/**\n* Get unique new ID\n*/\nfunction nextID(id) {\n\tid = id.replace(/[0-9]+$/, \"\") || \"a\";\n\tconst count = counters.get(id) || 0;\n\tcounters.set(id, count + 1);\n\treturn count ? `${id}${count}` : id;\n}\n/**\n* Replace IDs in SVG output with unique IDs\n*/\nfunction replaceIDs(body) {\n\tconst ids = [];\n\tlet match;\n\twhile (match = regex.exec(body)) ids.push(match[1]);\n\tif (!ids.length) return body;\n\tconst suffix = \"suffix\" + (Math.random() * 16777216 | Date.now()).toString(16);\n\tids.forEach((id) => {\n\t\tconst newID = nextID(id);\n\t\tconst escapedID = id.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n\t\tbody = body.replace(new RegExp(\"([#;\\\"])(\" + escapedID + \")([\\\")]|\\\\.[a-z])\", \"g\"), \"$1\" + newID + suffix + \"$3\");\n\t});\n\tbody = body.replace(new RegExp(suffix, \"g\"), \"\");\n\treturn body;\n}\n/**\n* Clear ID cache\n*/\nfunction clearIDCache() {\n\tcounters.clear();\n}\n\n/**\n* Local storate types and entries\n*/\nconst storage = Object.create(null);\n/**\n* Set API module\n*/\nfunction setAPIModule(provider, item) {\n\tstorage[provider] = item;\n}\n/**\n* Get API module\n*/\nfunction getAPIModule(provider) {\n\treturn storage[provider] || storage[\"\"];\n}\n\n/**\n* Create full API configuration from partial data\n*/\nfunction createAPIConfig(source) {\n\tlet resources;\n\tif (typeof source.resources === \"string\") resources = [source.resources];\n\telse {\n\t\tresources = source.resources;\n\t\tif (!(resources instanceof Array) || !resources.length) return null;\n\t}\n\treturn {\n\t\tresources,\n\t\tpath: source.path || \"/\",\n\t\tmaxURL: source.maxURL || 500,\n\t\trotate: source.rotate || 750,\n\t\ttimeout: source.timeout || 5e3,\n\t\trandom: source.random === true,\n\t\tindex: source.index || 0,\n\t\tdataAfterTimeout: source.dataAfterTimeout !== false\n\t};\n}\n/**\n* Local storage\n*/\nconst configStorage = Object.create(null);\n/**\n* Redundancy for API servers.\n*\n* API should have very high uptime because of implemented redundancy at server level, but\n* sometimes bad things happen. On internet 100% uptime is not possible.\n*\n* There could be routing problems. Server might go down for whatever reason, but it takes\n* few minutes to detect that downtime, so during those few minutes API might not be accessible.\n*\n* This script has some redundancy to mitigate possible network issues.\n*\n* If one host cannot be reached in 'rotate' (750 by default) ms, script will try to retrieve\n* data from different host. Hosts have different configurations, pointing to different\n* API servers hosted at different providers.\n*/\nconst fallBackAPISources = [\"https://api.simplesvg.com\", \"https://api.unisvg.com\"];\nconst fallBackAPI = [];\nwhile (fallBackAPISources.length > 0) if (fallBackAPISources.length === 1) fallBackAPI.push(fallBackAPISources.shift());\nelse if (Math.random() > .5) fallBackAPI.push(fallBackAPISources.shift());\nelse fallBackAPI.push(fallBackAPISources.pop());\nconfigStorage[\"\"] = createAPIConfig({ resources: [\"https://api.iconify.design\"].concat(fallBackAPI) });\n/**\n* Add custom config for provider\n*/\nfunction addAPIProvider(provider, customConfig) {\n\tconst config = createAPIConfig(customConfig);\n\tif (config === null) return false;\n\tconfigStorage[provider] = config;\n\treturn true;\n}\n/**\n* Get API configuration\n*/\nfunction getAPIConfig(provider) {\n\treturn configStorage[provider];\n}\n/**\n* List API providers\n*/\nfunction listAPIProviders() {\n\treturn Object.keys(configStorage);\n}\n\nconst detectFetch = () => {\n\tlet callback;\n\ttry {\n\t\tcallback = fetch;\n\t\tif (typeof callback === \"function\") return callback;\n\t} catch (err) {}\n};\n/**\n* Fetch function\n*/\nlet fetchModule = detectFetch();\n/**\n* Set custom fetch() function\n*/\nfunction setFetch(fetch$1) {\n\tfetchModule = fetch$1;\n}\n/**\n* Get fetch() function. Used by Icon Finder Core\n*/\nfunction getFetch() {\n\treturn fetchModule;\n}\n/**\n* Calculate maximum icons list length for prefix\n*/\nfunction calculateMaxLength(provider, prefix) {\n\tconst config = getAPIConfig(provider);\n\tif (!config) return 0;\n\tlet result;\n\tif (!config.maxURL) result = 0;\n\telse {\n\t\tlet maxHostLength = 0;\n\t\tconfig.resources.forEach((item) => {\n\t\t\tconst host = item;\n\t\t\tmaxHostLength = Math.max(maxHostLength, host.length);\n\t\t});\n\t\tconst url = prefix + \".json?icons=\";\n\t\tresult = config.maxURL - maxHostLength - config.path.length - url.length;\n\t}\n\treturn result;\n}\n/**\n* Should query be aborted, based on last HTTP status\n*/\nfunction shouldAbort(status) {\n\treturn status === 404;\n}\n/**\n* Prepare params\n*/\nconst prepare = (provider, prefix, icons) => {\n\tconst results = [];\n\tconst maxLength = calculateMaxLength(provider, prefix);\n\tconst type = \"icons\";\n\tlet item = {\n\t\ttype,\n\t\tprovider,\n\t\tprefix,\n\t\ticons: []\n\t};\n\tlet length = 0;\n\ticons.forEach((name, index) => {\n\t\tlength += name.length + 1;\n\t\tif (length >= maxLength && index > 0) {\n\t\t\tresults.push(item);\n\t\t\titem = {\n\t\t\t\ttype,\n\t\t\t\tprovider,\n\t\t\t\tprefix,\n\t\t\t\ticons: []\n\t\t\t};\n\t\t\tlength = name.length;\n\t\t}\n\t\titem.icons.push(name);\n\t});\n\tresults.push(item);\n\treturn results;\n};\n/**\n* Get path\n*/\nfunction getPath(provider) {\n\tif (typeof provider === \"string\") {\n\t\tconst config = getAPIConfig(provider);\n\t\tif (config) return config.path;\n\t}\n\treturn \"/\";\n}\n/**\n* Load icons\n*/\nconst send = (host, params, callback) => {\n\tif (!fetchModule) {\n\t\tcallback(\"abort\", 424);\n\t\treturn;\n\t}\n\tlet path = getPath(params.provider);\n\tswitch (params.type) {\n\t\tcase \"icons\": {\n\t\t\tconst prefix = params.prefix;\n\t\t\tconst iconsList = params.icons.join(\",\");\n\t\t\tconst urlParams = new URLSearchParams({ icons: iconsList });\n\t\t\tpath += prefix + \".json?\" + urlParams.toString();\n\t\t\tbreak;\n\t\t}\n\t\tcase \"custom\": {\n\t\t\tconst uri = params.uri;\n\t\t\tpath += uri.slice(0, 1) === \"/\" ? uri.slice(1) : uri;\n\t\t\tbreak;\n\t\t}\n\t\tdefault:\n\t\t\tcallback(\"abort\", 400);\n\t\t\treturn;\n\t}\n\tlet defaultError = 503;\n\tfetchModule(host + path).then((response) => {\n\t\tconst status = response.status;\n\t\tif (status !== 200) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tcallback(shouldAbort(status) ? \"abort\" : \"next\", status);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tdefaultError = 501;\n\t\treturn response.json();\n\t}).then((data) => {\n\t\tif (typeof data !== \"object\" || data === null) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (data === 404) callback(\"abort\", data);\n\t\t\t\telse callback(\"next\", defaultError);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tsetTimeout(() => {\n\t\t\tcallback(\"success\", data);\n\t\t});\n\t}).catch(() => {\n\t\tcallback(\"next\", defaultError);\n\t});\n};\n/**\n* Export module\n*/\nconst fetchAPIModule = {\n\tprepare,\n\tsend\n};\n\n/**\n* Remove callback\n*/\nfunction removeCallback(storages, id) {\n\tstorages.forEach((storage) => {\n\t\tconst items = storage.loaderCallbacks;\n\t\tif (items) storage.loaderCallbacks = items.filter((row) => row.id !== id);\n\t});\n}\n/**\n* Update all callbacks for provider and prefix\n*/\nfunction updateCallbacks(storage) {\n\tif (!storage.pendingCallbacksFlag) {\n\t\tstorage.pendingCallbacksFlag = true;\n\t\tsetTimeout(() => {\n\t\t\tstorage.pendingCallbacksFlag = false;\n\t\t\tconst items = storage.loaderCallbacks ? storage.loaderCallbacks.slice(0) : [];\n\t\t\tif (!items.length) return;\n\t\t\tlet hasPending = false;\n\t\t\tconst provider = storage.provider;\n\t\t\tconst prefix = storage.prefix;\n\t\t\titems.forEach((item) => {\n\t\t\t\tconst icons = item.icons;\n\t\t\t\tconst oldLength = icons.pending.length;\n\t\t\t\ticons.pending = icons.pending.filter((icon) => {\n\t\t\t\t\tif (icon.prefix !== prefix) return true;\n\t\t\t\t\tconst name = icon.name;\n\t\t\t\t\tif (storage.icons[name]) icons.loaded.push({\n\t\t\t\t\t\tprovider,\n\t\t\t\t\t\tprefix,\n\t\t\t\t\t\tname\n\t\t\t\t\t});\n\t\t\t\t\telse if (storage.missing.has(name)) icons.missing.push({\n\t\t\t\t\t\tprovider,\n\t\t\t\t\t\tprefix,\n\t\t\t\t\t\tname\n\t\t\t\t\t});\n\t\t\t\t\telse {\n\t\t\t\t\t\thasPending = true;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t\tif (icons.pending.length !== oldLength) {\n\t\t\t\t\tif (!hasPending) removeCallback([storage], item.id);\n\t\t\t\t\titem.callback(icons.loaded.slice(0), icons.missing.slice(0), icons.pending.slice(0), item.abort);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\n/**\n* Unique id counter for callbacks\n*/\nlet idCounter = 0;\n/**\n* Add callback\n*/\nfunction storeCallback(callback, icons, pendingSources) {\n\tconst id = idCounter++;\n\tconst abort = removeCallback.bind(null, pendingSources, id);\n\tif (!icons.pending.length) return abort;\n\tconst item = {\n\t\tid,\n\t\ticons,\n\t\tcallback,\n\t\tabort\n\t};\n\tpendingSources.forEach((storage) => {\n\t\t(storage.loaderCallbacks || (storage.loaderCallbacks = [])).push(item);\n\t});\n\treturn abort;\n}\n\n/**\n* Check if icons have been loaded\n*/\nfunction sortIcons(icons) {\n\tconst result = {\n\t\tloaded: [],\n\t\tmissing: [],\n\t\tpending: []\n\t};\n\tconst storage = Object.create(null);\n\ticons.sort((a, b) => {\n\t\tif (a.provider !== b.provider) return a.provider.localeCompare(b.provider);\n\t\tif (a.prefix !== b.prefix) return a.prefix.localeCompare(b.prefix);\n\t\treturn a.name.localeCompare(b.name);\n\t});\n\tlet lastIcon = {\n\t\tprovider: \"\",\n\t\tprefix: \"\",\n\t\tname: \"\"\n\t};\n\ticons.forEach((icon) => {\n\t\tif (lastIcon.name === icon.name && lastIcon.prefix === icon.prefix && lastIcon.provider === icon.provider) return;\n\t\tlastIcon = icon;\n\t\tconst provider = icon.provider;\n\t\tconst prefix = icon.prefix;\n\t\tconst name = icon.name;\n\t\tconst providerStorage = storage[provider] || (storage[provider] = Object.create(null));\n\t\tconst localStorage = providerStorage[prefix] || (providerStorage[prefix] = getStorage(provider, prefix));\n\t\tlet list;\n\t\tif (name in localStorage.icons) list = result.loaded;\n\t\telse if (prefix === \"\" || localStorage.missing.has(name)) list = result.missing;\n\t\telse list = result.pending;\n\t\tconst item = {\n\t\t\tprovider,\n\t\t\tprefix,\n\t\t\tname\n\t\t};\n\t\tlist.push(item);\n\t});\n\treturn result;\n}\n\n/**\n* Convert icons list from string/icon mix to icons and validate them\n*/\nfunction listToIcons(list, validate = true, simpleNames = false) {\n\tconst result = [];\n\tlist.forEach((item) => {\n\t\tconst icon = typeof item === \"string\" ? stringToIcon(item, validate, simpleNames) : item;\n\t\tif (icon) result.push(icon);\n\t});\n\treturn result;\n}\n\n/**\n* Default RedundancyConfig for API calls\n*/\nconst defaultConfig = {\n\tresources: [],\n\tindex: 0,\n\ttimeout: 2e3,\n\trotate: 750,\n\trandom: false,\n\tdataAfterTimeout: false\n};\n\n/**\n* Send query\n*/\nfunction sendQuery(config, payload, query, done) {\n\tconst resourcesCount = config.resources.length;\n\tconst startIndex = config.random ? Math.floor(Math.random() * resourcesCount) : config.index;\n\tlet resources;\n\tif (config.random) {\n\t\tlet list = config.resources.slice(0);\n\t\tresources = [];\n\t\twhile (list.length > 1) {\n\t\t\tconst nextIndex = Math.floor(Math.random() * list.length);\n\t\t\tresources.push(list[nextIndex]);\n\t\t\tlist = list.slice(0, nextIndex).concat(list.slice(nextIndex + 1));\n\t\t}\n\t\tresources = resources.concat(list);\n\t} else resources = config.resources.slice(startIndex).concat(config.resources.slice(0, startIndex));\n\tconst startTime = Date.now();\n\tlet status = \"pending\";\n\tlet queriesSent = 0;\n\tlet lastError;\n\tlet timer = null;\n\tlet queue = [];\n\tlet doneCallbacks = [];\n\tif (typeof done === \"function\") doneCallbacks.push(done);\n\t/**\n\t* Reset timer\n\t*/\n\tfunction resetTimer() {\n\t\tif (timer) {\n\t\t\tclearTimeout(timer);\n\t\t\ttimer = null;\n\t\t}\n\t}\n\t/**\n\t* Abort everything\n\t*/\n\tfunction abort() {\n\t\tif (status === \"pending\") status = \"aborted\";\n\t\tresetTimer();\n\t\tqueue.forEach((item) => {\n\t\t\tif (item.status === \"pending\") item.status = \"aborted\";\n\t\t});\n\t\tqueue = [];\n\t}\n\t/**\n\t* Add / replace callback to call when execution is complete.\n\t* This can be used to abort pending query implementations when query is complete or aborted.\n\t*/\n\tfunction subscribe(callback, overwrite) {\n\t\tif (overwrite) doneCallbacks = [];\n\t\tif (typeof callback === \"function\") doneCallbacks.push(callback);\n\t}\n\t/**\n\t* Get query status\n\t*/\n\tfunction getQueryStatus() {\n\t\treturn {\n\t\t\tstartTime,\n\t\t\tpayload,\n\t\t\tstatus,\n\t\t\tqueriesSent,\n\t\t\tqueriesPending: queue.length,\n\t\t\tsubscribe,\n\t\t\tabort\n\t\t};\n\t}\n\t/**\n\t* Fail query\n\t*/\n\tfunction failQuery() {\n\t\tstatus = \"failed\";\n\t\tdoneCallbacks.forEach((callback) => {\n\t\t\tcallback(void 0, lastError);\n\t\t});\n\t}\n\t/**\n\t* Clear queue\n\t*/\n\tfunction clearQueue() {\n\t\tqueue.forEach((item) => {\n\t\t\tif (item.status === \"pending\") item.status = \"aborted\";\n\t\t});\n\t\tqueue = [];\n\t}\n\t/**\n\t* Got response from module\n\t*/\n\tfunction moduleResponse(item, response, data) {\n\t\tconst isError = response !== \"success\";\n\t\tqueue = queue.filter((queued) => queued !== item);\n\t\tswitch (status) {\n\t\t\tcase \"pending\": break;\n\t\t\tcase \"failed\":\n\t\t\t\tif (isError || !config.dataAfterTimeout) return;\n\t\t\t\tbreak;\n\t\t\tdefault: return;\n\t\t}\n\t\tif (response === \"abort\") {\n\t\t\tlastError = data;\n\t\t\tfailQuery();\n\t\t\treturn;\n\t\t}\n\t\tif (isError) {\n\t\t\tlastError = data;\n\t\t\tif (!queue.length) if (!resources.length) failQuery();\n\t\t\telse execNext();\n\t\t\treturn;\n\t\t}\n\t\tresetTimer();\n\t\tclearQueue();\n\t\tif (!config.random) {\n\t\t\tconst index = config.resources.indexOf(item.resource);\n\t\t\tif (index !== -1 && index !== config.index) config.index = index;\n\t\t}\n\t\tstatus = \"completed\";\n\t\tdoneCallbacks.forEach((callback) => {\n\t\t\tcallback(data);\n\t\t});\n\t}\n\t/**\n\t* Execute next query\n\t*/\n\tfunction execNext() {\n\t\tif (status !== \"pending\") return;\n\t\tresetTimer();\n\t\tconst resource = resources.shift();\n\t\tif (resource === void 0) {\n\t\t\tif (queue.length) {\n\t\t\t\ttimer = setTimeout(() => {\n\t\t\t\t\tresetTimer();\n\t\t\t\t\tif (status === \"pending\") {\n\t\t\t\t\t\tclearQueue();\n\t\t\t\t\t\tfailQuery();\n\t\t\t\t\t}\n\t\t\t\t}, config.timeout);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfailQuery();\n\t\t\treturn;\n\t\t}\n\t\tconst item = {\n\t\t\tstatus: \"pending\",\n\t\t\tresource,\n\t\t\tcallback: (status$1, data) => {\n\t\t\t\tmoduleResponse(item, status$1, data);\n\t\t\t}\n\t\t};\n\t\tqueue.push(item);\n\t\tqueriesSent++;\n\t\ttimer = setTimeout(execNext, config.rotate);\n\t\tquery(resource, payload, item.callback);\n\t}\n\tsetTimeout(execNext);\n\treturn getQueryStatus;\n}\n\n/**\n* Redundancy instance\n*/\nfunction initRedundancy(cfg) {\n\tconst config = {\n\t\t...defaultConfig,\n\t\t...cfg\n\t};\n\tlet queries = [];\n\t/**\n\t* Remove aborted and completed queries\n\t*/\n\tfunction cleanup() {\n\t\tqueries = queries.filter((item) => item().status === \"pending\");\n\t}\n\t/**\n\t* Send query\n\t*/\n\tfunction query(payload, queryCallback, doneCallback) {\n\t\tconst query$1 = sendQuery(config, payload, queryCallback, (data, error) => {\n\t\t\tcleanup();\n\t\t\tif (doneCallback) doneCallback(data, error);\n\t\t});\n\t\tqueries.push(query$1);\n\t\treturn query$1;\n\t}\n\t/**\n\t* Find instance\n\t*/\n\tfunction find(callback) {\n\t\treturn queries.find((value) => {\n\t\t\treturn callback(value);\n\t\t}) || null;\n\t}\n\treturn {\n\t\tquery,\n\t\tfind,\n\t\tsetIndex: (index) => {\n\t\t\tconfig.index = index;\n\t\t},\n\t\tgetIndex: () => config.index,\n\t\tcleanup\n\t};\n}\n\nfunction emptyCallback$1() {}\nconst redundancyCache = Object.create(null);\n/**\n* Get Redundancy instance for provider\n*/\nfunction getRedundancyCache(provider) {\n\tif (!redundancyCache[provider]) {\n\t\tconst config = getAPIConfig(provider);\n\t\tif (!config) return;\n\t\tredundancyCache[provider] = {\n\t\t\tconfig,\n\t\t\tredundancy: initRedundancy(config)\n\t\t};\n\t}\n\treturn redundancyCache[provider];\n}\n/**\n* Send API query\n*/\nfunction sendAPIQuery(target, query, callback) {\n\tlet redundancy;\n\tlet send;\n\tif (typeof target === \"string\") {\n\t\tconst api = getAPIModule(target);\n\t\tif (!api) {\n\t\t\tcallback(void 0, 424);\n\t\t\treturn emptyCallback$1;\n\t\t}\n\t\tsend = api.send;\n\t\tconst cached = getRedundancyCache(target);\n\t\tif (cached) redundancy = cached.redundancy;\n\t} else {\n\t\tconst config = createAPIConfig(target);\n\t\tif (config) {\n\t\t\tredundancy = initRedundancy(config);\n\t\t\tconst api = getAPIModule(target.resources ? target.resources[0] : \"\");\n\t\t\tif (api) send = api.send;\n\t\t}\n\t}\n\tif (!redundancy || !send) {\n\t\tcallback(void 0, 424);\n\t\treturn emptyCallback$1;\n\t}\n\treturn redundancy.query(query, send, callback)().abort;\n}\n\nfunction emptyCallback() {}\n/**\n* Function called when new icons have been loaded\n*/\nfunction loadedNewIcons(storage) {\n\tif (!storage.iconsLoaderFlag) {\n\t\tstorage.iconsLoaderFlag = true;\n\t\tsetTimeout(() => {\n\t\t\tstorage.iconsLoaderFlag = false;\n\t\t\tupdateCallbacks(storage);\n\t\t});\n\t}\n}\n/**\n* Check icon names for API\n*/\nfunction checkIconNamesForAPI(icons) {\n\tconst valid = [];\n\tconst invalid = [];\n\ticons.forEach((name) => {\n\t\t(name.match(matchIconName) ? valid : invalid).push(name);\n\t});\n\treturn {\n\t\tvalid,\n\t\tinvalid\n\t};\n}\n/**\n* Parse loader response\n*/\nfunction parseLoaderResponse(storage, icons, data) {\n\tfunction checkMissing() {\n\t\tconst pending = storage.pendingIcons;\n\t\ticons.forEach((name) => {\n\t\t\tif (pending) pending.delete(name);\n\t\t\tif (!storage.icons[name]) storage.missing.add(name);\n\t\t});\n\t}\n\tif (data && typeof data === \"object\") try {\n\t\tif (!addIconSet(storage, data).length) {\n\t\t\tcheckMissing();\n\t\t\treturn;\n\t\t}\n\t} catch (err) {\n\t\tconsole.error(err);\n\t}\n\tcheckMissing();\n\tloadedNewIcons(storage);\n}\n/**\n* Handle response that can be async\n*/\nfunction parsePossiblyAsyncResponse(response, callback) {\n\tif (response instanceof Promise) response.then((data) => {\n\t\tcallback(data);\n\t}).catch(() => {\n\t\tcallback(null);\n\t});\n\telse callback(response);\n}\n/**\n* Load icons\n*/\nfunction loadNewIcons(storage, icons) {\n\tif (!storage.iconsToLoad) storage.iconsToLoad = icons;\n\telse storage.iconsToLoad = storage.iconsToLoad.concat(icons).sort();\n\tif (!storage.iconsQueueFlag) {\n\t\tstorage.iconsQueueFlag = true;\n\t\tsetTimeout(() => {\n\t\t\tstorage.iconsQueueFlag = false;\n\t\t\tconst { provider, prefix } = storage;\n\t\t\tconst icons$1 = storage.iconsToLoad;\n\t\t\tdelete storage.iconsToLoad;\n\t\t\tif (!icons$1 || !icons$1.length) return;\n\t\t\tconst customIconLoader = storage.loadIcon;\n\t\t\tif (storage.loadIcons && (icons$1.length > 1 || !customIconLoader)) {\n\t\t\t\tparsePossiblyAsyncResponse(storage.loadIcons(icons$1, prefix, provider), (data) => {\n\t\t\t\t\tparseLoaderResponse(storage, icons$1, data);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (customIconLoader) {\n\t\t\t\ticons$1.forEach((name) => {\n\t\t\t\t\tparsePossiblyAsyncResponse(customIconLoader(name, prefix, provider), (data) => {\n\t\t\t\t\t\tparseLoaderResponse(storage, [name], data ? {\n\t\t\t\t\t\t\tprefix,\n\t\t\t\t\t\t\ticons: { [name]: data }\n\t\t\t\t\t\t} : null);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { valid, invalid } = checkIconNamesForAPI(icons$1);\n\t\t\tif (invalid.length) parseLoaderResponse(storage, invalid, null);\n\t\t\tif (!valid.length) return;\n\t\t\tconst api = prefix.match(matchIconName) ? getAPIModule(provider) : null;\n\t\t\tif (!api) {\n\t\t\t\tparseLoaderResponse(storage, valid, null);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tapi.prepare(provider, prefix, valid).forEach((item) => {\n\t\t\t\tsendAPIQuery(provider, item, (data) => {\n\t\t\t\t\tparseLoaderResponse(storage, item.icons, data);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n}\n/**\n* Load icons\n*/\nconst loadIcons = (icons, callback) => {\n\tconst sortedIcons = sortIcons(listToIcons(icons, true, allowSimpleNames()));\n\tif (!sortedIcons.pending.length) {\n\t\tlet callCallback = true;\n\t\tif (callback) setTimeout(() => {\n\t\t\tif (callCallback) callback(sortedIcons.loaded, sortedIcons.missing, sortedIcons.pending, emptyCallback);\n\t\t});\n\t\treturn () => {\n\t\t\tcallCallback = false;\n\t\t};\n\t}\n\tconst newIcons = Object.create(null);\n\tconst sources = [];\n\tlet lastProvider, lastPrefix;\n\tsortedIcons.pending.forEach((icon) => {\n\t\tconst { provider, prefix } = icon;\n\t\tif (prefix === lastPrefix && provider === lastProvider) return;\n\t\tlastProvider = provider;\n\t\tlastPrefix = prefix;\n\t\tsources.push(getStorage(provider, prefix));\n\t\tconst providerNewIcons = newIcons[provider] || (newIcons[provider] = Object.create(null));\n\t\tif (!providerNewIcons[prefix]) providerNewIcons[prefix] = [];\n\t});\n\tsortedIcons.pending.forEach((icon) => {\n\t\tconst { provider, prefix, name } = icon;\n\t\tconst storage = getStorage(provider, prefix);\n\t\tconst pendingQueue = storage.pendingIcons || (storage.pendingIcons = /* @__PURE__ */ new Set());\n\t\tif (!pendingQueue.has(name)) {\n\t\t\tpendingQueue.add(name);\n\t\t\tnewIcons[provider][prefix].push(name);\n\t\t}\n\t});\n\tsources.forEach((storage) => {\n\t\tconst list = newIcons[storage.provider][storage.prefix];\n\t\tif (list.length) loadNewIcons(storage, list);\n\t});\n\treturn callback ? storeCallback(callback, sortedIcons, sources) : emptyCallback;\n};\n/**\n* Load one icon using Promise\n*/\nconst loadIcon = (icon) => {\n\treturn new Promise((fulfill, reject) => {\n\t\tconst iconObj = typeof icon === \"string\" ? stringToIcon(icon, true) : icon;\n\t\tif (!iconObj) {\n\t\t\treject(icon);\n\t\t\treturn;\n\t\t}\n\t\tloadIcons([iconObj || icon], (loaded) => {\n\t\t\tif (loaded.length && iconObj) {\n\t\t\t\tconst data = getIconData(iconObj);\n\t\t\t\tif (data) {\n\t\t\t\t\tfulfill({\n\t\t\t\t\t\t...defaultIconProps,\n\t\t\t\t\t\t...data\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\treject(icon);\n\t\t});\n\t});\n};\n\n/**\n* Set custom loader for multiple icons\n*/\nfunction setCustomIconsLoader(loader, prefix, provider) {\n\tgetStorage(provider || \"\", prefix).loadIcons = loader;\n}\n/**\n* Set custom loader for one icon\n*/\nfunction setCustomIconLoader(loader, prefix, provider) {\n\tgetStorage(provider || \"\", prefix).loadIcon = loader;\n}\n\n/**\n* Convert IconifyIconCustomisations to FullIconCustomisations, checking value types\n*/\nfunction mergeCustomisations(defaults, item) {\n\tconst result = { ...defaults };\n\tfor (const key in item) {\n\t\tconst value = item[key];\n\t\tconst valueType = typeof value;\n\t\tif (key in defaultIconSizeCustomisations) {\n\t\t\tif (value === null || value && (valueType === \"string\" || valueType === \"number\")) result[key] = value;\n\t\t} else if (valueType === typeof result[key]) result[key] = key === \"rotate\" ? value % 4 : value;\n\t}\n\treturn result;\n}\n\nconst separator = /[\\s,]+/;\n/**\n* Apply \"flip\" string to icon customisations\n*/\nfunction flipFromString(custom, flip) {\n\tflip.split(separator).forEach((str) => {\n\t\tswitch (str.trim()) {\n\t\t\tcase \"horizontal\":\n\t\t\t\tcustom.hFlip = true;\n\t\t\t\tbreak;\n\t\t\tcase \"vertical\":\n\t\t\t\tcustom.vFlip = true;\n\t\t\t\tbreak;\n\t\t}\n\t});\n}\n\n/**\n* Get rotation value\n*/\nfunction rotateFromString(value, defaultValue = 0) {\n\tconst units = value.replace(/^-?[0-9.]*/, \"\");\n\tfunction cleanup(value$1) {\n\t\twhile (value$1 < 0) value$1 += 4;\n\t\treturn value$1 % 4;\n\t}\n\tif (units === \"\") {\n\t\tconst num = parseInt(value);\n\t\treturn isNaN(num) ? 0 : cleanup(num);\n\t} else if (units !== value) {\n\t\tlet split = 0;\n\t\tswitch (units) {\n\t\t\tcase \"%\":\n\t\t\t\tsplit = 25;\n\t\t\t\tbreak;\n\t\t\tcase \"deg\": split = 90;\n\t\t}\n\t\tif (split) {\n\t\t\tlet num = parseFloat(value.slice(0, value.length - units.length));\n\t\t\tif (isNaN(num)) return 0;\n\t\t\tnum = num / split;\n\t\t\treturn num % 1 === 0 ? cleanup(num) : 0;\n\t\t}\n\t}\n\treturn defaultValue;\n}\n\n/**\n* Generate <svg>\n*/\nfunction iconToHTML(body, attributes) {\n\tlet renderAttribsHTML = body.indexOf(\"xlink:\") === -1 ? \"\" : \" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\";\n\tfor (const attr in attributes) renderAttribsHTML += \" \" + attr + \"=\\\"\" + attributes[attr] + \"\\\"\";\n\treturn \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"\" + renderAttribsHTML + \">\" + body + \"</svg>\";\n}\n\n/**\n* Encode SVG for use in url()\n*\n* Short alternative to encodeURIComponent() that encodes only stuff used in SVG, generating\n* smaller code.\n*/\nfunction encodeSVGforURL(svg) {\n\treturn svg.replace(/\"/g, \"'\").replace(/%/g, \"%25\").replace(/#/g, \"%23\").replace(/</g, \"%3C\").replace(/>/g, \"%3E\").replace(/\\s+/g, \" \");\n}\n/**\n* Generate data: URL from SVG\n*/\nfunction svgToData(svg) {\n\treturn \"data:image/svg+xml,\" + encodeSVGforURL(svg);\n}\n/**\n* Generate url() from SVG\n*/\nfunction svgToURL(svg) {\n\treturn \"url(\\\"\" + svgToData(svg) + \"\\\")\";\n}\n\nconst defaultExtendedIconCustomisations = {\n    ...defaultIconCustomisations,\n    inline: false,\n};\n\n/**\n * Default SVG attributes\n */\nconst svgDefaults = {\n    'xmlns': 'http://www.w3.org/2000/svg',\n    'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n    'aria-hidden': true,\n    'role': 'img',\n};\n/**\n * Style modes\n */\nconst commonProps = {\n    display: 'inline-block',\n};\nconst monotoneProps = {\n    'background-color': 'currentColor',\n};\nconst coloredProps = {\n    'background-color': 'transparent',\n};\n// Dynamically add common props to variables above\nconst propsToAdd = {\n    image: 'var(--svg)',\n    repeat: 'no-repeat',\n    size: '100% 100%',\n};\nconst propsToAddTo = {\n    '-webkit-mask': monotoneProps,\n    'mask': monotoneProps,\n    'background': coloredProps,\n};\nfor (const prefix in propsToAddTo) {\n    const list = propsToAddTo[prefix];\n    for (const prop in propsToAdd) {\n        list[prefix + '-' + prop] = propsToAdd[prop];\n    }\n}\n/**\n * Fix size: add 'px' to numbers\n */\nfunction fixSize(value) {\n    return value + (value.match(/^[-0-9.]+$/) ? 'px' : '');\n}\n/**\n * Generate icon from properties\n */\nfunction render(\n// Icon must be validated before calling this function\nicon, \n// Properties\nprops) {\n    const customisations = mergeCustomisations(defaultExtendedIconCustomisations, props);\n    // Check mode\n    const mode = props.mode || 'svg';\n    const componentProps = (mode === 'svg' ? { ...svgDefaults } : {});\n    if (icon.body.indexOf('xlink:') === -1) {\n        delete componentProps['xmlns:xlink'];\n    }\n    // Create style if missing\n    let style = typeof props.style === 'string' ? props.style : '';\n    // Get element properties\n    for (let key in props) {\n        const value = props[key];\n        if (value === void 0) {\n            continue;\n        }\n        switch (key) {\n            // Properties to ignore\n            case 'icon':\n            case 'style':\n            case 'onLoad':\n            case 'mode':\n            case 'ssr':\n                break;\n            // Boolean attributes\n            case 'inline':\n            case 'hFlip':\n            case 'vFlip':\n                customisations[key] =\n                    value === true || value === 'true' || value === 1;\n                break;\n            // Flip as string: 'horizontal,vertical'\n            case 'flip':\n                if (typeof value === 'string') {\n                    flipFromString(customisations, value);\n                }\n                break;\n            // Color: copy to style, add extra ';' in case style is missing it\n            case 'color':\n                style =\n                    style +\n                        (style.length > 0 && style.trim().slice(-1) !== ';'\n                            ? ';'\n                            : '') +\n                        'color: ' +\n                        value +\n                        '; ';\n                break;\n            // Rotation as string\n            case 'rotate':\n                if (typeof value === 'string') {\n                    customisations[key] = rotateFromString(value);\n                }\n                else if (typeof value === 'number') {\n                    customisations[key] = value;\n                }\n                break;\n            // Remove aria-hidden\n            case 'ariaHidden':\n            case 'aria-hidden':\n                if (value !== true && value !== 'true') {\n                    delete componentProps['aria-hidden'];\n                }\n                break;\n            default:\n                if (key.slice(0, 3) === 'on:') {\n                    // Svelte event\n                    break;\n                }\n                // Copy missing property if it does not exist in customisations\n                if (defaultExtendedIconCustomisations[key] === void 0) {\n                    componentProps[key] = value;\n                }\n        }\n    }\n    // Generate icon\n    const item = iconToSVG(icon, customisations);\n    const renderAttribs = item.attributes;\n    // Inline display\n    if (customisations.inline) {\n        // Style overrides it\n        style = 'vertical-align: -0.125em; ' + style;\n    }\n    if (mode === 'svg') {\n        // Add icon stuff\n        Object.assign(componentProps, renderAttribs);\n        // Style\n        if (style !== '') {\n            componentProps.style = style;\n        }\n        // Generate HTML\n        return {\n            svg: true,\n            attributes: componentProps,\n            body: replaceIDs(item.body),\n        };\n    }\n    // Render <span> with style\n    const { body, width, height } = icon;\n    const useMask = mode === 'mask' ||\n        (mode === 'bg' ? false : body.indexOf('currentColor') !== -1);\n    // Generate SVG\n    const html = iconToHTML(body, {\n        ...renderAttribs,\n        width: width + '',\n        height: height + '',\n    });\n    // Generate style\n    const url = svgToURL(html);\n    const styles = {\n        '--svg': url,\n    };\n    const size = (prop) => {\n        const value = renderAttribs[prop];\n        if (value) {\n            styles[prop] = fixSize(value);\n        }\n    };\n    size('width');\n    size('height');\n    Object.assign(styles, commonProps, useMask ? monotoneProps : coloredProps);\n    let customStyle = '';\n    for (const key in styles) {\n        customStyle += key + ': ' + styles[key] + ';';\n    }\n    componentProps.style = customStyle + style;\n    return {\n        svg: false,\n        attributes: componentProps,\n    };\n}\n\n/**\n * Initialise stuff\n */\n// Enable short names\nallowSimpleNames(true);\n// Set API module\nsetAPIModule('', fetchAPIModule);\n/**\n * Browser stuff\n */\nif (typeof document !== 'undefined' && typeof window !== 'undefined') {\n    const _window = window;\n    // Load icons from global \"IconifyPreload\"\n    if (_window.IconifyPreload !== void 0) {\n        const preload = _window.IconifyPreload;\n        const err = 'Invalid IconifyPreload syntax.';\n        if (typeof preload === 'object' && preload !== null) {\n            (preload instanceof Array ? preload : [preload]).forEach((item) => {\n                try {\n                    if (\n                    // Check if item is an object and not null/array\n                    typeof item !== 'object' ||\n                        item === null ||\n                        item instanceof Array ||\n                        // Check for 'icons' and 'prefix'\n                        typeof item.icons !== 'object' ||\n                        typeof item.prefix !== 'string' ||\n                        // Add icon set\n                        !addCollection(item)) {\n                        console.error(err);\n                    }\n                }\n                catch (e) {\n                    console.error(err);\n                }\n            });\n        }\n    }\n    // Set API from global \"IconifyProviders\"\n    if (_window.IconifyProviders !== void 0) {\n        const providers = _window.IconifyProviders;\n        if (typeof providers === 'object' && providers !== null) {\n            for (let key in providers) {\n                const err = 'IconifyProviders[' + key + '] is invalid.';\n                try {\n                    const value = providers[key];\n                    if (typeof value !== 'object' ||\n                        !value ||\n                        value.resources === void 0) {\n                        continue;\n                    }\n                    if (!addAPIProvider(key, value)) {\n                        console.error(err);\n                    }\n                }\n                catch (e) {\n                    console.error(err);\n                }\n            }\n        }\n    }\n}\n/**\n * Check for SSR\n */\nfunction isSSR() {\n    try {\n        return typeof window !== 'object';\n    }\n    catch (err) {\n        return true;\n    }\n}\n/**\n * Check if component needs to be updated\n */\nfunction checkIconState(icon, state, callback, onload) {\n    // Abort loading icon\n    function abortLoading() {\n        if (state.loading) {\n            state.loading.abort();\n            state.loading = null;\n        }\n    }\n    // Icon is an object\n    if (typeof icon === 'object' &&\n        icon !== null &&\n        typeof icon.body === 'string') {\n        // Stop loading\n        state.name = '';\n        abortLoading();\n        return { data: { ...defaultIconProps, ...icon } };\n    }\n    // Invalid icon?\n    let iconName;\n    if (typeof icon !== 'string' ||\n        (iconName = stringToIcon(icon, false, true)) === null) {\n        abortLoading();\n        return null;\n    }\n    // Load icon\n    const data = getIconData(iconName);\n    if (!data) {\n        // Icon data is not available: load if not loading already\n        if (!isSSR() && (!state.loading || state.loading.name !== icon)) {\n            // New icon to load\n            abortLoading();\n            state.name = '';\n            state.loading = {\n                name: icon,\n                abort: loadIcons([iconName], callback),\n            };\n        }\n        return null;\n    }\n    // Icon data is available\n    abortLoading();\n    if (state.name !== icon) {\n        state.name = icon;\n        if (onload && !state.destroyed) {\n            setTimeout(() => {\n                onload(icon);\n            });\n        }\n    }\n    // Add classes\n    const classes = ['iconify'];\n    if (iconName.prefix !== '') {\n        classes.push('iconify--' + iconName.prefix);\n    }\n    if (iconName.provider !== '') {\n        classes.push('iconify--' + iconName.provider);\n    }\n    return { data, classes };\n}\n/**\n * Generate icon\n */\nfunction generateIcon(icon, props) {\n    return icon\n        ? render({\n            ...defaultIconProps,\n            ...icon,\n        }, props)\n        : null;\n}\n/**\n * Internal API\n */\nconst _api = {\n    getAPIConfig,\n    setAPIModule,\n    sendAPIQuery,\n    setFetch,\n    getFetch,\n    listAPIProviders,\n};\n\nexport { _api, addAPIProvider, addCollection, addIcon, iconToSVG as buildIcon, calculateSize, checkIconState, clearIDCache, generateIcon, getIcon, iconLoaded, listIcons, loadIcon, loadIcons, replaceIDs, setCustomIconLoader, setCustomIconsLoader };\n","<script module>\n\t// Export stuff.\n\t// Important: duplicate of iconify.ts. When changing exports, they must be changed in both files.\n\timport { \n\t\ticonLoaded,\n\t\tgetIcon,\n\t\tlistIcons,\n\t\taddIcon,\n\t\taddCollection,\n\t\tcalculateSize,\n\t\treplaceIDs,\n\t\tclearIDCache,\n\t\tbuildIcon,\n\t\tloadIcons,\n\t\tloadIcon,\n\t\tsetCustomIconLoader,\n\t\tsetCustomIconsLoader,\n\t\taddAPIProvider,\n\t\t_api\n\t} from './functions';\n\t\n\texport { \n\t\ticonLoaded,\n\t\tgetIcon,\n\t\tlistIcons,\n\t\taddIcon,\n\t\taddCollection,\n\t\tcalculateSize,\n\t\treplaceIDs,\n\t\tclearIDCache,\n\t\tbuildIcon,\n\t\tloadIcons,\n\t\tloadIcon,\n\t\tsetCustomIconLoader,\n\t\tsetCustomIconsLoader,\n\t\taddAPIProvider,\n\t\t_api\n\t}\n\t\n</script>\n<script>\n\timport { onDestroy } from 'svelte';\n\timport { checkIconState, generateIcon } from './functions';\n\n\t// State\n\tconst iconState = {\n\t\t// Last icon name\n\t\tname: '',\n\n\t\t// Loading status\n\t\tloading: null,\n\n\t\t// Destroyed status\n\t\tdestroyed: false,\n\t};\n\n\t// Props\n\tconst props = $props();\n\n\t// Callback counter\n\tlet counter = $state(0);\n\n\t// Get icon data\n\tlet iconData = $derived.by(() => {\n\t\tcounter;\n\t\treturn checkIconState(props.icon, iconState, loaded, props.onload);\n\t});\n\n\t// Generate data to render\n\tlet data = $derived.by(() => {\n\t\tconst generatedData = iconData ? generateIcon(iconData.data, props) : null;\n\t\tif (generatedData && iconData.classes) {\n\t\t\t// Add classes\n\t\t\tgeneratedData.attributes['class'] = (typeof props['class'] === 'string' ? props['class'] + ' ' : '') + iconData.classes.join(' ');\n\t\t}\n\t\treturn generatedData;\n\t});\n\n\t// Increase counter when loaded to force re-calculation of data\n\tfunction loaded() {\n\t\tcounter ++;\n\t}\n\n\t// Abort loading when component is destroyed\n\tonDestroy(() => {\n\t\ticonState.destroyed = true;\n\t\tif (iconState.loading) {\n\t\t\ticonState.loading.abort();\n\t\t\ticonState.loading = null;\n\t\t}\n\t})\n</script>\n\n{#if data}\n\t{#if data.svg}\n\t\t<svg {...data.attributes}>\n\t\t\t{@html data.body}\n\t\t</svg>\n\t{:else}\n\t\t<span {...data.attributes}></span>\n\t{/if}\n{/if}","<script lang=\"ts\">\n\timport Icon from '@iconify/svelte';\n\tlet {\n\t\ttitle,\n\t\tdescription,\n\t\ticonName\n\t}: {\n\t\ttitle: string;\n\t\tdescription: string;\n\t\ticonName?: string;\n\t} = $props();\n</script>\n\n<div class=\"flowdrop-canvas-banner\">\n\t<div class=\"flowdrop-card\">\n\t\t<div class=\"flowdrop-card__body flowdrop-text--center\">\n\t\t\t<div class=\"flowdrop-canvas-banner__icon\">\n\t\t\t\t{#if iconName}\n\t\t\t\t\t<Icon icon={iconName} class=\"flowdrop-canvas-banner__icon-svg\" />\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t\t<h3 class=\"flowdrop-canvas-banner__title\">{title}</h3>\n\t\t\t<p class=\"flowdrop-canvas-banner__description\">{description}</p>\n\t\t</div>\n\t</div>\n</div>\n\n<style>\n\t.flowdrop-canvas-banner {\n\t\tposition: absolute;\n\t\tinset: 0;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpointer-events: none;\n\t}\n\n\t.flowdrop-canvas-banner__icon {\n\t\tfont-size: 3.75rem;\n\t\tmargin-bottom: 1rem;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-canvas-banner__title {\n\t\tfont-size: 1.125rem;\n\t\tfont-weight: 700;\n\t\tmargin-bottom: 0.5rem;\n\t\tcolor: #111827;\n\t}\n\n\t.flowdrop-canvas-banner__description {\n\t\tfont-size: 0.875rem;\n\t\tcolor: #6b7280;\n\t}\n</style>\n","<!--\n  Flow Drop Zone Component\n  Handles drag and drop with proper coordinate transformation\n  Must be used inside SvelteFlowProvider\n-->\n\n<script lang=\"ts\">\n\timport { useSvelteFlow } from \"@xyflow/svelte\";\n\timport type { Snippet } from \"svelte\";\n\n\tinterface Props {\n\t\tondrop: (nodeTypeData: string, position: { x: number; y: number }) => void;\n\t\tchildren: Snippet;\n\t}\n\n\tlet props: Props = $props();\n\n\t// Access SvelteFlow instance for coordinate transformation\n\tconst { screenToFlowPosition } = useSvelteFlow();\n\n\t/**\n\t * Handle drag over event\n\t */\n\tfunction handleDragOver(e: DragEvent): void {\n\t\te.preventDefault();\n\t\tif (e.dataTransfer) {\n\t\t\te.dataTransfer.dropEffect = \"copy\";\n\t\t}\n\t}\n\n\t/**\n\t * Handle drop event with proper coordinate transformation\n\t */\n\tfunction handleDrop(e: DragEvent): void {\n\t\te.preventDefault();\n\n\t\t// Get the data from the drag event\n\t\tconst nodeTypeData = e.dataTransfer?.getData(\"application/json\");\n\t\tif (nodeTypeData) {\n\t\t\t// Convert screen coordinates to flow coordinates (accounts for zoom and pan)\n\t\t\tconst position = screenToFlowPosition({\n\t\t\t\tx: e.clientX,\n\t\t\t\ty: e.clientY\n\t\t\t});\n\n\t\t\t// Call the parent handler with the converted position\n\t\t\tprops.ondrop(nodeTypeData, position);\n\t\t}\n\t}\n</script>\n\n<div\n\tclass=\"flow-drop-zone\"\n\trole=\"application\"\n\taria-label=\"Workflow canvas\"\n\tondragover={handleDragOver}\n\tondrop={handleDrop}\n>\n\t{@render props.children()}\n</div>\n\n<style>\n\t.flow-drop-zone {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n</style>\n\n","/**\n * Connection validation utilities for FlowDrop\n */\n/**\n * Configurable port compatibility checker\n */\nexport class PortCompatibilityChecker {\n    portConfig;\n    compatibilityMap;\n    constructor(portConfig) {\n        this.portConfig = portConfig;\n        this.compatibilityMap = new Map();\n        this.buildCompatibilityMap();\n    }\n    /**\n     * Build the compatibility map from configuration rules\n     */\n    buildCompatibilityMap() {\n        this.compatibilityMap.clear();\n        // First, add direct type matches (every type is compatible with itself)\n        for (const dataType of this.portConfig.dataTypes) {\n            if (!this.compatibilityMap.has(dataType.id)) {\n                this.compatibilityMap.set(dataType.id, new Set());\n            }\n            this.compatibilityMap.get(dataType.id).add(dataType.id);\n        }\n        // Then add configured compatibility rules\n        for (const rule of this.portConfig.compatibilityRules) {\n            if (!this.compatibilityMap.has(rule.from)) {\n                this.compatibilityMap.set(rule.from, new Set());\n            }\n            this.compatibilityMap.get(rule.from).add(rule.to);\n        }\n        // Add alias support\n        for (const dataType of this.portConfig.dataTypes) {\n            if (dataType.aliases) {\n                for (const alias of dataType.aliases) {\n                    // Make aliases point to the main type's compatibility set\n                    const mainCompatibility = this.compatibilityMap.get(dataType.id);\n                    if (mainCompatibility) {\n                        this.compatibilityMap.set(alias, new Set(mainCompatibility));\n                        // Also make the main type compatible with the alias\n                        mainCompatibility.add(alias);\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Check if two data types are compatible for connection\n     */\n    areDataTypesCompatible(outputType, inputType) {\n        const compatibleTypes = this.compatibilityMap.get(outputType);\n        return compatibleTypes ? compatibleTypes.has(inputType) : false;\n    }\n    /**\n     * Get all compatible target types for a source type\n     */\n    getCompatibleTypes(sourceType) {\n        const compatibleTypes = this.compatibilityMap.get(sourceType);\n        return compatibleTypes ? Array.from(compatibleTypes) : [];\n    }\n    /**\n     * Get data type configuration by ID\n     */\n    getDataTypeConfig(dataTypeId) {\n        return this.portConfig.dataTypes.find((dt) => dt.id === dataTypeId || dt.aliases?.includes(dataTypeId));\n    }\n    /**\n     * Get all enabled data types\n     */\n    getEnabledDataTypes() {\n        return this.portConfig.dataTypes.filter((dt) => dt.enabled !== false);\n    }\n}\n// Global instance - will be initialized with configuration\nlet globalCompatibilityChecker = null;\n/**\n * Initialize the global port compatibility checker\n */\nexport function initializePortCompatibility(portConfig) {\n    globalCompatibilityChecker = new PortCompatibilityChecker(portConfig);\n}\n/**\n * Get the global port compatibility checker\n */\nexport function getPortCompatibilityChecker() {\n    if (!globalCompatibilityChecker) {\n        throw new Error('Port compatibility checker not initialized. Call initializePortCompatibility() first.');\n    }\n    return globalCompatibilityChecker;\n}\n/**\n * Check if two data types are compatible for connection (legacy function)\n * @deprecated Use PortCompatibilityChecker.areDataTypesCompatible() instead\n */\nexport function areDataTypesCompatible(outputType, inputType) {\n    if (!globalCompatibilityChecker) {\n        // Fallback to basic compatibility for backward compatibility\n        return outputType === inputType;\n    }\n    return globalCompatibilityChecker.areDataTypesCompatible(outputType, inputType);\n}\n/**\n * Get all possible connections from a source node to target nodes\n */\nexport function getPossibleConnections(sourceNode, targetNodes, nodeTypes) {\n    const sourceMetadata = nodeTypes.find((nt) => nt.id === sourceNode.data.metadata.id);\n    if (!sourceMetadata)\n        return [];\n    const possibleConnections = [];\n    // Get all output ports from source node\n    const sourceOutputs = sourceMetadata.outputs;\n    // Check each target node\n    for (const targetNode of targetNodes) {\n        if (targetNode.id === sourceNode.id)\n            continue; // Skip self-connection\n        const targetMetadata = nodeTypes.find((nt) => nt.id === targetNode.data.metadata.id);\n        if (!targetMetadata)\n            continue;\n        // Get all input ports from target node\n        const targetInputs = targetMetadata.inputs;\n        // Check each output-input combination\n        for (const sourcePort of sourceOutputs) {\n            for (const targetPort of targetInputs) {\n                const compatible = areDataTypesCompatible(sourcePort.dataType, targetPort.dataType);\n                possibleConnections.push({\n                    sourceNodeId: sourceNode.id,\n                    sourcePortId: sourcePort.id,\n                    sourcePort,\n                    targetNodeId: targetNode.id,\n                    targetPortId: targetPort.id,\n                    targetPort,\n                    compatible\n                });\n            }\n        }\n    }\n    return possibleConnections;\n}\n/**\n * Validate if a specific connection is valid\n */\nexport function validateConnection(sourceNodeId, sourcePortId, targetNodeId, targetPortId, nodes, nodeTypes) {\n    // Check if nodes exist\n    const sourceNode = nodes.find((n) => n.id === sourceNodeId);\n    const targetNode = nodes.find((n) => n.id === targetNodeId);\n    if (!sourceNode) {\n        return { valid: false, error: 'Source node not found' };\n    }\n    if (!targetNode) {\n        return { valid: false, error: 'Target node not found' };\n    }\n    // Check for self-connection\n    if (sourceNodeId === targetNodeId) {\n        return { valid: false, error: 'Cannot connect node to itself' };\n    }\n    // Get node metadata\n    const sourceMetadata = nodeTypes.find((nt) => nt.id === sourceNode.data.metadata.id);\n    const targetMetadata = nodeTypes.find((nt) => nt.id === targetNode.data.metadata.id);\n    if (!sourceMetadata || !targetMetadata) {\n        return { valid: false, error: 'Node metadata not found' };\n    }\n    // Find ports\n    const sourcePort = sourceMetadata.outputs.find((p) => p.id === sourcePortId);\n    const targetPort = targetMetadata.inputs.find((p) => p.id === targetPortId);\n    if (!sourcePort) {\n        return { valid: false, error: 'Source port not found' };\n    }\n    if (!targetPort) {\n        return { valid: false, error: 'Target port not found' };\n    }\n    // Check data type compatibility\n    if (!areDataTypesCompatible(sourcePort.dataType, targetPort.dataType)) {\n        return {\n            valid: false,\n            error: `Incompatible data types: ${sourcePort.dataType} cannot connect to ${targetPort.dataType}`\n        };\n    }\n    return { valid: true };\n}\n/**\n * Get connection suggestions for a node\n */\nexport function getConnectionSuggestions(nodeId, nodes, nodeTypes) {\n    const node = nodes.find((n) => n.id === nodeId);\n    if (!node)\n        return [];\n    const metadata = nodeTypes.find((nt) => nt.id === node.data.metadata.id);\n    if (!metadata)\n        return [];\n    const suggestions = [];\n    // Get all other nodes\n    const otherNodes = nodes.filter((n) => n.id !== nodeId);\n    for (const otherNode of otherNodes) {\n        const otherMetadata = nodeTypes.find((nt) => nt.id === otherNode.data.metadata.id);\n        if (!otherMetadata)\n            continue;\n        // Check outputs from other nodes to inputs of current node\n        for (const output of otherMetadata.outputs) {\n            for (const input of metadata.inputs) {\n                const compatible = areDataTypesCompatible(output.dataType, input.dataType);\n                suggestions.push({\n                    nodeId: otherNode.id,\n                    nodeName: otherNode.data.label,\n                    portId: output.id,\n                    portName: output.name,\n                    portType: 'output',\n                    dataType: output.dataType,\n                    compatible\n                });\n            }\n        }\n        // Check outputs from current node to inputs of other nodes\n        for (const output of metadata.outputs) {\n            for (const input of otherMetadata.inputs) {\n                const compatible = areDataTypesCompatible(output.dataType, input.dataType);\n                suggestions.push({\n                    nodeId: otherNode.id,\n                    nodeName: otherNode.data.label,\n                    portId: input.id,\n                    portName: input.name,\n                    portType: 'input',\n                    dataType: input.dataType,\n                    compatible\n                });\n            }\n        }\n    }\n    return suggestions;\n}\n/**\n * Check if a workflow has any cycles (prevent infinite loops)\n */\nexport function hasCycles(nodes, edges) {\n    const visited = new Set();\n    const recursionStack = new Set();\n    function hasCycleUtil(nodeId) {\n        if (recursionStack.has(nodeId))\n            return true;\n        if (visited.has(nodeId))\n            return false;\n        visited.add(nodeId);\n        recursionStack.add(nodeId);\n        // Get all outgoing edges from this node\n        const outgoingEdges = edges.filter((e) => e.source === nodeId);\n        for (const edge of outgoingEdges) {\n            if (hasCycleUtil(edge.target))\n                return true;\n        }\n        recursionStack.delete(nodeId);\n        return false;\n    }\n    // Check each node\n    for (const node of nodes) {\n        if (!visited.has(node.id)) {\n            if (hasCycleUtil(node.id))\n                return true;\n        }\n    }\n    return false;\n}\n/**\n * Get the execution order for a workflow (topological sort)\n */\nexport function getExecutionOrder(nodes, edges) {\n    const inDegree = new Map();\n    const graph = new Map();\n    // Initialize\n    for (const node of nodes) {\n        inDegree.set(node.id, 0);\n        graph.set(node.id, []);\n    }\n    // Build graph and calculate in-degrees\n    for (const edge of edges) {\n        const current = inDegree.get(edge.target) || 0;\n        inDegree.set(edge.target, current + 1);\n        const neighbors = graph.get(edge.source) || [];\n        neighbors.push(edge.target);\n        graph.set(edge.source, neighbors);\n    }\n    // Topological sort\n    const queue = [];\n    const result = [];\n    // Add nodes with no incoming edges\n    for (const [nodeId, degree] of inDegree) {\n        if (degree === 0) {\n            queue.push(nodeId);\n        }\n    }\n    while (queue.length > 0) {\n        const nodeId = queue.shift();\n        result.push(nodeId);\n        const neighbors = graph.get(nodeId) || [];\n        for (const neighbor of neighbors) {\n            const degree = inDegree.get(neighbor) - 1;\n            inDegree.set(neighbor, degree);\n            if (degree === 0) {\n                queue.push(neighbor);\n            }\n        }\n    }\n    return result;\n}\n","/**\n * Centralized color management for FlowDrop\n * Ensures consistent category colors across sidebar and canvas\n * Uses BEM syntax for CSS classes\n */\nimport { getPortCompatibilityChecker } from './connections.js';\n/**\n * Category color mapping to reference tokens (CSS variables)\n */\nexport const CATEGORY_COLOR_TOKENS = {\n    inputs: 'var(--color-ref-emerald-500)',\n    outputs: 'var(--color-ref-blue-600)',\n    prompts: 'var(--color-ref-amber-500)',\n    models: 'var(--color-ref-indigo-500)',\n    processing: 'var(--color-ref-teal-500)',\n    logic: 'var(--color-ref-purple-600)',\n    data: 'var(--color-ref-orange-500)',\n    helpers: 'var(--color-ref-slate-500)',\n    tools: 'var(--color-ref-amber-500)',\n    'vector stores': 'var(--color-ref-emerald-500)',\n    embeddings: 'var(--color-ref-indigo-500)',\n    memories: 'var(--color-ref-blue-600)',\n    agents: 'var(--color-ref-teal-500)',\n    ai: 'var(--color-ref-purple-500)',\n    bundles: 'var(--color-ref-slate-500)'\n};\n/**\n * Data type color mapping to reference tokens (CSS variables)\n * @deprecated Use getDataTypeColorToken() with port configuration instead\n */\nexport const DATA_TYPE_COLOR_TOKENS = {\n    string: 'var(--color-ref-emerald-500)',\n    text: 'var(--color-ref-emerald-500)',\n    number: 'var(--color-ref-blue-600)',\n    integer: 'var(--color-ref-blue-600)',\n    float: 'var(--color-ref-blue-600)',\n    boolean: 'var(--color-ref-purple-600)',\n    array: 'var(--color-ref-amber-500)',\n    list: 'var(--color-ref-amber-500)',\n    object: 'var(--color-ref-orange-500)',\n    json: 'var(--color-ref-orange-500)',\n    mixed: 'var(--color-ref-orange-500)',\n    file: 'var(--color-ref-red-500)',\n    document: 'var(--color-ref-red-500)',\n    image: 'var(--color-ref-pink-500)',\n    picture: 'var(--color-ref-pink-500)',\n    audio: 'var(--color-ref-indigo-500)',\n    sound: 'var(--color-ref-indigo-500)',\n    video: 'var(--color-ref-teal-500)',\n    movie: 'var(--color-ref-teal-500)',\n    url: 'var(--color-ref-cyan-500)',\n    email: 'var(--color-ref-cyan-500)',\n    date: 'var(--color-ref-lime-500)',\n    datetime: 'var(--color-ref-lime-500)',\n    time: 'var(--color-ref-lime-500)',\n    tool: 'var(--color-ref-amber-500)',\n    trigger: 'var(--color-ref-gray-950)',\n    branch: 'var(--color-ref-purple-500)'\n};\n/**\n * Get the reference color token for a category\n */\nexport function getCategoryColorToken(category) {\n    return CATEGORY_COLOR_TOKENS[category] || 'var(--color-ref-slate-500)';\n}\n/**\n * Get the reference color token for a data type (configurable version)\n */\nexport function getDataTypeColorToken(dataType) {\n    try {\n        const checker = getPortCompatibilityChecker();\n        const config = checker.getDataTypeConfig(dataType);\n        if (config?.color) {\n            return config.color;\n        }\n    }\n    catch {\n        // Fallback to static color mapping if port checker not initialized\n        // console.warn(\"Port compatibility checker not initialized, using fallback colors\");\n    }\n    return DATA_TYPE_COLOR_TOKENS[dataType.toLowerCase()] || 'var(--color-ref-slate-500)';\n}\n/**\n * Get data type configuration from port config\n */\nexport function getDataTypeConfig(dataType) {\n    try {\n        const checker = getPortCompatibilityChecker();\n        return checker.getDataTypeConfig(dataType);\n    }\n    catch (error) {\n        console.warn('Port compatibility checker not initialized:', error);\n        return undefined;\n    }\n}\n/**\n * Get all available data types from port configuration\n */\nexport function getAvailableDataTypes() {\n    try {\n        const checker = getPortCompatibilityChecker();\n        return checker.getEnabledDataTypes();\n    }\n    catch (error) {\n        console.warn('Port compatibility checker not initialized:', error);\n        return [];\n    }\n}\n/**\n * Default colors for fallback cases\n */\nexport const DEFAULT_COLORS = {\n    background: 'flowdrop-color--base-light',\n    accent: 'flowdrop-color--neutral',\n    text: 'flowdrop-color--base-text',\n    border: 'flowdrop-color--base-border'\n};\n/**\n * Get category colors\n * @param category - The node category\n * @returns The color configuration for the category\n */\nexport function getCategoryColors(category) {\n    return CATEGORY_COLOR_TOKENS[category] || 'var(--color-ref-slate-500)';\n}\n/**\n * Get category background color\n * @param category - The node category\n * @returns The background color class\n */\nexport function getCategoryBackground(category) {\n    return getCategoryColors(category);\n}\n/**\n * Get category accent color\n * @param category - The node category\n * @returns The accent color class\n */\nexport function getCategoryAccent(category) {\n    return getCategoryColors(category);\n}\n/**\n * Get category text color\n * @param category - The node category\n * @returns The text color class\n */\nexport function getCategoryText(category) {\n    return getCategoryColors(category);\n}\n/**\n * Get category border color\n * @param category - The node category\n * @returns The border color class\n */\nexport function getCategoryBorder(category) {\n    return getCategoryColors(category);\n}\n/**\n * Get node colors based on category and state\n * @param category - The node category\n * @param isError - Whether the node is in error state\n * @param isProcessing - Whether the node is processing\n * @param isSelected - Whether the node is selected\n * @returns The color configuration object\n */\nexport function getNodeColors(category, isError = false, isProcessing = false, isSelected = false) {\n    const baseColor = getCategoryColors(category);\n    if (isError) {\n        return {\n            background: 'var(--color-ref-red-50)',\n            accent: 'var(--color-ref-red-500)',\n            text: 'var(--color-ref-red-900)',\n            border: 'var(--color-ref-red-200)'\n        };\n    }\n    if (isProcessing) {\n        return {\n            background: 'var(--color-ref-blue-50)',\n            accent: 'var(--color-ref-blue-500)',\n            text: 'var(--color-ref-blue-900)',\n            border: 'var(--color-ref-blue-200)'\n        };\n    }\n    if (isSelected) {\n        return {\n            background: 'var(--color-ref-indigo-50)',\n            accent: 'var(--color-ref-indigo-500)',\n            text: 'var(--color-ref-indigo-900)',\n            border: 'var(--color-ref-indigo-200)'\n        };\n    }\n    return {\n        background: baseColor,\n        accent: baseColor,\n        text: 'var(--color-ref-slate-900)',\n        border: baseColor\n    };\n}\n/**\n * Get node background color\n * @param category - The node category\n * @param isError - Whether the node is in error state\n * @param isProcessing - Whether the node is processing\n * @param isSelected - Whether the node is selected\n * @returns The background color\n */\nexport function getNodeBackground(category, isError = false, isProcessing = false, isSelected = false) {\n    return getNodeColors(category, isError, isProcessing, isSelected).background;\n}\n/**\n * Get node accent color\n * @param category - The node category\n * @param isError - Whether the node is in error state\n * @param isProcessing - Whether the node is processing\n * @param isSelected - Whether the node is selected\n * @returns The accent color\n */\nexport function getNodeAccent(category, isError = false, isProcessing = false, isSelected = false) {\n    return getNodeColors(category, isError, isProcessing, isSelected).accent;\n}\n/**\n * Get node text color\n * @param category - The node category\n * @param isError - Whether the node is in error state\n * @param isProcessing - Whether the node is processing\n * @param isSelected - Whether the node is selected\n * @returns The text color\n */\nexport function getNodeText(category, isError = false, isProcessing = false, isSelected = false) {\n    return getNodeColors(category, isError, isProcessing, isSelected).text;\n}\n/**\n * Get node border color\n * @param category - The node category\n * @param isError - Whether the node is in error state\n * @param isProcessing - Whether the node is processing\n * @param isSelected - Whether the node is selected\n * @returns The border color\n */\nexport function getNodeBorder(category, isError = false, isProcessing = false, isSelected = false) {\n    return getNodeColors(category, isError, isProcessing, isSelected).border;\n}\n/**\n * Get data type color\n * @param dataType - The data type\n * @returns The color for the data type\n */\nexport function getDataTypeColor(dataType) {\n    return getDataTypeColorToken(dataType);\n}\n/**\n * Parse typed array notation and get display information\n * @param dataType - The data type (e.g., \"string[]\", \"number\", \"object[]\")\n * @returns Object with display information\n */\nexport function parseDataTypeDisplay(dataType) {\n    // Check if it's a typed array (ends with [])\n    const isArray = dataType.endsWith('[]');\n    if (isArray) {\n        const elementType = dataType.slice(0, -2); // Remove []\n        const config = getDataTypeConfig(dataType);\n        return {\n            baseType: dataType,\n            isArray: true,\n            displayName: config?.name || `${elementType}[]`,\n            elementType: elementType\n        };\n    }\n    else {\n        const config = getDataTypeConfig(dataType);\n        return {\n            baseType: dataType,\n            isArray: false,\n            displayName: config?.name || dataType\n        };\n    }\n}\n/**\n * Get formatted display text for a data type\n * @param dataType - The data type\n * @returns Formatted display text\n */\nexport function getDataTypeDisplayText(dataType) {\n    const parsed = parseDataTypeDisplay(dataType);\n    return parsed.displayName;\n}\n/**\n * Check if a data type represents an array\n * @param dataType - The data type\n * @returns True if it's an array type\n */\nexport function isArrayDataType(dataType) {\n    return dataType.endsWith('[]') || dataType === 'array' || dataType === 'list';\n}\n/**\n * Get the element type from an array data type\n * @param arrayDataType - The array data type (e.g., \"string[]\")\n * @returns The element type (e.g., \"string\") or null if not an array\n */\nexport function getArrayElementType(arrayDataType) {\n    if (arrayDataType.endsWith('[]')) {\n        return arrayDataType.slice(0, -2);\n    }\n    return null;\n}\n","<script lang=\"ts\">\n\timport { getDataTypeColor } from '../utils/colors';\n\timport { useConnection } from '@xyflow/svelte';\n\n\tconst connection = useConnection();\n\n\tlet path: string | null = $derived.by(() => {\n\t\tif (connection.current.inProgress) {\n\t\t\tconst { from, to } = connection.current;\n\t\t\treturn `M${from.x},${from.y} C ${from.x} ${to.y} ${from.x} ${to.y} ${to.x},${to.y}`;\n\t\t}\n\t\treturn null;\n\t});\n</script>\n\n{#if connection.current.inProgress}\n\t<path\n\t\tfill=\"none\"\n\t\tstroke-width={1.5}\n\t\tclass=\"animated\"\n\t\tstroke={getDataTypeColor(connection.current.fromHandle.id)}\n\t\td={path}\n\t/>\n\t<circle\n\t\tcx={connection.current.to.x}\n\t\tcy={connection.current.to.y}\n\t\tfill=\"#fff\"\n\t\tr={3}\n\t\tstroke={getDataTypeColor(connection.current.fromHandle.id)}\n\t\tstroke-width={1.5}\n\t/>\n{/if}\n","/**\n * Workflow Store for FlowDrop\n *\n * Provides global state management for workflows with dirty state tracking.\n *\n * @module stores/workflowStore\n */\nimport { writable, derived, get } from \"svelte/store\";\n// =========================================================================\n// Core Workflow Store\n// =========================================================================\n/** Global workflow state */\nexport const workflowStore = writable(null);\n// =========================================================================\n// Dirty State Tracking\n// =========================================================================\n/**\n * Store for tracking if there are unsaved changes\n *\n * This is set to true whenever the workflow changes after initialization.\n * It can be reset to false by calling markAsSaved().\n */\nexport const isDirtyStore = writable(false);\n/**\n * Snapshot of the workflow when it was last saved\n *\n * Used to compare current state with saved state.\n */\nlet savedSnapshot = null;\n/**\n * Callback for dirty state changes\n *\n * Set by the App component to notify parent application.\n */\nlet onDirtyStateChangeCallback = null;\n/**\n * Callback for workflow changes\n *\n * Set by the App component to notify parent application.\n */\nlet onWorkflowChangeCallback = null;\n/**\n * Set the dirty state change callback\n *\n * @param callback - Function to call when dirty state changes\n */\nexport function setOnDirtyStateChange(callback) {\n    onDirtyStateChangeCallback = callback;\n}\n/**\n * Set the workflow change callback\n *\n * @param callback - Function to call when workflow changes\n */\nexport function setOnWorkflowChange(callback) {\n    onWorkflowChangeCallback = callback;\n}\n/**\n * Create a snapshot of the workflow for comparison\n *\n * @param workflow - The workflow to snapshot\n * @returns A JSON string representation for comparison\n */\nfunction createSnapshot(workflow) {\n    if (!workflow)\n        return null;\n    // Only include the parts that matter for \"dirty\" detection\n    const toSnapshot = {\n        name: workflow.name,\n        description: workflow.description,\n        nodes: workflow.nodes.map((n) => ({\n            id: n.id,\n            position: n.position,\n            data: {\n                label: n.data.label,\n                config: n.data.config\n            }\n        })),\n        edges: workflow.edges.map((e) => ({\n            id: e.id,\n            source: e.source,\n            target: e.target,\n            sourceHandle: e.sourceHandle,\n            targetHandle: e.targetHandle\n        }))\n    };\n    return JSON.stringify(toSnapshot);\n}\n/**\n * Update dirty state based on current workflow\n *\n * Compares current workflow with saved snapshot.\n */\nfunction updateDirtyState() {\n    const currentWorkflow = get(workflowStore);\n    const currentSnapshot = createSnapshot(currentWorkflow);\n    const isDirty = currentSnapshot !== savedSnapshot;\n    const previousDirty = get(isDirtyStore);\n    if (isDirty !== previousDirty) {\n        isDirtyStore.set(isDirty);\n        if (onDirtyStateChangeCallback) {\n            onDirtyStateChangeCallback(isDirty);\n        }\n    }\n}\n/**\n * Mark the workflow change and update dirty state\n *\n * @param changeType - The type of change that occurred\n */\nfunction notifyWorkflowChange(changeType) {\n    const workflow = get(workflowStore);\n    if (workflow && onWorkflowChangeCallback) {\n        onWorkflowChangeCallback(workflow, changeType);\n    }\n    updateDirtyState();\n}\n/**\n * Mark the current workflow state as saved\n *\n * Clears the dirty state by updating the saved snapshot.\n */\nexport function markAsSaved() {\n    const currentWorkflow = get(workflowStore);\n    savedSnapshot = createSnapshot(currentWorkflow);\n    isDirtyStore.set(false);\n    if (onDirtyStateChangeCallback) {\n        onDirtyStateChangeCallback(false);\n    }\n}\n/**\n * Check if there are unsaved changes\n *\n * @returns true if there are unsaved changes\n */\nexport function isDirty() {\n    return get(isDirtyStore);\n}\n/**\n * Get the current workflow\n *\n * @returns The current workflow or null\n */\nexport function getWorkflow() {\n    return get(workflowStore);\n}\n// =========================================================================\n// Derived Stores\n// =========================================================================\n/** Derived store for workflow ID */\nexport const workflowId = derived(workflowStore, ($workflow) => $workflow?.id ?? null);\n/** Derived store for workflow name */\nexport const workflowName = derived(workflowStore, ($workflow) => $workflow?.name ?? \"Untitled Workflow\");\n/** Derived store for workflow nodes */\nexport const workflowNodes = derived(workflowStore, ($workflow) => $workflow?.nodes ?? []);\n/** Derived store for workflow edges */\nexport const workflowEdges = derived(workflowStore, ($workflow) => $workflow?.edges ?? []);\n/** Derived store for workflow metadata */\nexport const workflowMetadata = derived(workflowStore, ($workflow) => $workflow?.metadata ?? {\n    version: \"1.0.0\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    versionId: `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n    updateNumber: 0\n});\n// =========================================================================\n// Helper Functions\n// =========================================================================\n/**\n * Check if workflow data has actually changed\n *\n * Used to prevent unnecessary updates and infinite loops.\n */\nfunction hasWorkflowDataChanged(currentWorkflow, newNodes, newEdges) {\n    if (!currentWorkflow)\n        return true;\n    // Check if nodes have changed\n    if (currentWorkflow.nodes.length !== newNodes.length)\n        return true;\n    for (let i = 0; i < newNodes.length; i++) {\n        const currentNode = currentWorkflow.nodes[i];\n        const newNode = newNodes[i];\n        if (!currentNode || !newNode)\n            return true;\n        if (currentNode.id !== newNode.id)\n            return true;\n        if (currentNode.position.x !== newNode.position.x ||\n            currentNode.position.y !== newNode.position.y)\n            return true;\n        if (JSON.stringify(currentNode.data) !== JSON.stringify(newNode.data))\n            return true;\n    }\n    // Check if edges have changed\n    if (currentWorkflow.edges.length !== newEdges.length)\n        return true;\n    for (let i = 0; i < newEdges.length; i++) {\n        const currentEdge = currentWorkflow.edges[i];\n        const newEdge = newEdges[i];\n        if (!currentEdge || !newEdge)\n            return true;\n        if (currentEdge.id !== newEdge.id)\n            return true;\n        if (currentEdge.source !== newEdge.source || currentEdge.target !== newEdge.target)\n            return true;\n    }\n    return false;\n}\n// =========================================================================\n// Workflow Actions\n// =========================================================================\n/**\n * Actions for updating the workflow\n *\n * All actions that modify the workflow will trigger dirty state updates\n * and emit change events.\n */\nexport const workflowActions = {\n    /**\n     * Initialize workflow (from load or new)\n     *\n     * This sets the initial saved snapshot and clears dirty state.\n     */\n    initialize: (workflow) => {\n        workflowStore.set(workflow);\n        // Set the saved snapshot - workflow is \"clean\" after initialization\n        savedSnapshot = createSnapshot(workflow);\n        isDirtyStore.set(false);\n        if (onDirtyStateChangeCallback) {\n            onDirtyStateChangeCallback(false);\n        }\n    },\n    /**\n     * Update the entire workflow\n     */\n    updateWorkflow: (workflow) => {\n        workflowStore.set(workflow);\n        notifyWorkflowChange(\"metadata\");\n    },\n    /**\n     * Update nodes\n     */\n    updateNodes: (nodes) => {\n        workflowStore.update(($workflow) => {\n            if (!$workflow)\n                return null;\n            // Check if nodes have actually changed to prevent infinite loops\n            if (!hasWorkflowDataChanged($workflow, nodes, $workflow.edges)) {\n                return $workflow;\n            }\n            // Generate unique version identifier\n            const versionId = `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n            return {\n                ...$workflow,\n                nodes,\n                metadata: {\n                    ...$workflow.metadata,\n                    updatedAt: new Date().toISOString(),\n                    versionId,\n                    updateNumber: ($workflow.metadata?.updateNumber ?? 0) + 1\n                }\n            };\n        });\n        notifyWorkflowChange(\"node_move\");\n    },\n    /**\n     * Update edges\n     */\n    updateEdges: (edges) => {\n        workflowStore.update(($workflow) => {\n            if (!$workflow)\n                return null;\n            // Check if edges have actually changed to prevent infinite loops\n            if (!hasWorkflowDataChanged($workflow, $workflow.nodes, edges)) {\n                return $workflow;\n            }\n            // Generate unique version identifier\n            const versionId = `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n            return {\n                ...$workflow,\n                edges,\n                metadata: {\n                    ...$workflow.metadata,\n                    updatedAt: new Date().toISOString(),\n                    versionId,\n                    updateNumber: ($workflow.metadata?.updateNumber ?? 0) + 1\n                }\n            };\n        });\n        notifyWorkflowChange(\"edge_add\");\n    },\n    /**\n     * Update workflow name\n     */\n    updateName: (name) => {\n        workflowStore.update(($workflow) => {\n            if (!$workflow)\n                return null;\n            return {\n                ...$workflow,\n                name,\n                metadata: {\n                    ...$workflow.metadata,\n                    updatedAt: new Date().toISOString()\n                }\n            };\n        });\n        notifyWorkflowChange(\"name\");\n    },\n    /**\n     * Add a node\n     */\n    addNode: (node) => {\n        workflowStore.update(($workflow) => {\n            if (!$workflow)\n                return null;\n            return {\n                ...$workflow,\n                nodes: [...$workflow.nodes, node],\n                metadata: {\n                    ...$workflow.metadata,\n                    updatedAt: new Date().toISOString()\n                }\n            };\n        });\n        notifyWorkflowChange(\"node_add\");\n    },\n    /**\n     * Remove a node\n     */\n    removeNode: (nodeId) => {\n        workflowStore.update(($workflow) => {\n            if (!$workflow)\n                return null;\n            return {\n                ...$workflow,\n                nodes: $workflow.nodes.filter((node) => node.id !== nodeId),\n                edges: $workflow.edges.filter((edge) => edge.source !== nodeId && edge.target !== nodeId),\n                metadata: {\n                    ...$workflow.metadata,\n                    updatedAt: new Date().toISOString()\n                }\n            };\n        });\n        notifyWorkflowChange(\"node_remove\");\n    },\n    /**\n     * Add an edge\n     */\n    addEdge: (edge) => {\n        workflowStore.update(($workflow) => {\n            if (!$workflow)\n                return null;\n            return {\n                ...$workflow,\n                edges: [...$workflow.edges, edge],\n                metadata: {\n                    ...$workflow.metadata,\n                    updatedAt: new Date().toISOString()\n                }\n            };\n        });\n        notifyWorkflowChange(\"edge_add\");\n    },\n    /**\n     * Remove an edge\n     */\n    removeEdge: (edgeId) => {\n        workflowStore.update(($workflow) => {\n            if (!$workflow)\n                return null;\n            return {\n                ...$workflow,\n                edges: $workflow.edges.filter((edge) => edge.id !== edgeId),\n                metadata: {\n                    ...$workflow.metadata,\n                    updatedAt: new Date().toISOString()\n                }\n            };\n        });\n        notifyWorkflowChange(\"edge_remove\");\n    },\n    /**\n     * Update a specific node\n     */\n    updateNode: (nodeId, updates) => {\n        workflowStore.update(($workflow) => {\n            if (!$workflow)\n                return null;\n            return {\n                ...$workflow,\n                nodes: $workflow.nodes.map((node) => node.id === nodeId ? { ...node, ...updates } : node),\n                metadata: {\n                    ...$workflow.metadata,\n                    updatedAt: new Date().toISOString()\n                }\n            };\n        });\n        notifyWorkflowChange(\"node_config\");\n    },\n    /**\n     * Clear the workflow\n     */\n    clear: () => {\n        workflowStore.set(null);\n        savedSnapshot = null;\n        isDirtyStore.set(false);\n        if (onDirtyStateChangeCallback) {\n            onDirtyStateChangeCallback(false);\n        }\n    },\n    /**\n     * Update workflow metadata\n     */\n    updateMetadata: (metadata) => {\n        workflowStore.update(($workflow) => {\n            if (!$workflow)\n                return null;\n            return {\n                ...$workflow,\n                metadata: {\n                    ...$workflow.metadata,\n                    ...metadata,\n                    updatedAt: new Date().toISOString()\n                }\n            };\n        });\n        notifyWorkflowChange(\"metadata\");\n    },\n    /**\n     * Batch update nodes and edges\n     *\n     * Useful for complex operations that update multiple things at once.\n     */\n    batchUpdate: (updates) => {\n        workflowStore.update(($workflow) => {\n            if (!$workflow)\n                return null;\n            return {\n                ...$workflow,\n                ...(updates.nodes && { nodes: updates.nodes }),\n                ...(updates.edges && { edges: updates.edges }),\n                ...(updates.name && { name: updates.name }),\n                ...(updates.description !== undefined && { description: updates.description }),\n                metadata: {\n                    ...$workflow.metadata,\n                    ...(updates.metadata && { ...updates.metadata }),\n                    updatedAt: new Date().toISOString()\n                }\n            };\n        });\n        notifyWorkflowChange(\"metadata\");\n    }\n};\n// =========================================================================\n// Additional Derived Stores\n// =========================================================================\n/** Derived store for workflow changes (useful for triggering saves) */\nexport const workflowChanged = derived([workflowNodes, workflowEdges, workflowName], ([nodes, edges, name]) => ({ nodes, edges, name }));\n/** Derived store for workflow validation */\nexport const workflowValidation = derived([workflowNodes, workflowEdges], ([nodes, edges]) => ({\n    hasNodes: nodes.length > 0,\n    hasEdges: edges.length > 0,\n    nodeCount: nodes.length,\n    edgeCount: edges.length,\n    isValid: nodes.length > 0 && edges.length >= 0\n}));\n/** Derived store for workflow metadata changes */\nexport const workflowMetadataChanged = derived(workflowMetadata, (metadata) => ({\n    createdAt: metadata.createdAt,\n    updatedAt: metadata.updatedAt,\n    version: metadata.version ?? \"1.0.0\"\n}));\n","/**\n * Centralized icon management for FlowDrop\n * Ensures consistent icon usage across all components\n */\n/**\n * Default icons for different contexts\n */\nexport const DEFAULT_ICONS = {\n    // Node fallback icons\n    NODE: 'mdi:cube',\n    CATEGORY: 'mdi:folder',\n    // UI action icons\n    ADD: 'mdi:plus',\n    REMOVE: 'mdi:minus',\n    EDIT: 'mdi:pencil',\n    SAVE: 'mdi:content-save',\n    LOAD: 'mdi:folder-open',\n    EXPORT: 'mdi:download',\n    IMPORT: 'mdi:upload',\n    SEARCH: 'mdi:magnify',\n    CLOSE: 'mdi:close',\n    SETTINGS: 'mdi:cog',\n    HELP: 'mdi:help-circle',\n    // Status icons\n    SUCCESS: 'mdi:check-circle',\n    ERROR: 'mdi:alert-circle',\n    WARNING: 'mdi:alert',\n    INFO: 'mdi:information',\n    LOADING: 'mdi:loading',\n    // Navigation icons\n    HOME: 'mdi:home',\n    BACK: 'mdi:arrow-left',\n    FORWARD: 'mdi:arrow-right',\n    UP: 'mdi:arrow-up',\n    DOWN: 'mdi:arrow-down',\n    // Workflow icons\n    WORKFLOW: 'mdi:graph',\n    NODE_ADD: 'mdi:plus-circle',\n    NODE_DELETE: 'mdi:minus-circle',\n    CONNECTION: 'mdi:connection',\n    // Data icons\n    DATA: 'mdi:database',\n    FILE: 'mdi:file',\n    TEXT: 'mdi:text',\n    JSON: 'mdi:code-json',\n    // Model and processing icons\n    MODEL: 'mdi:chip',\n    BRAIN: 'mdi:brain',\n    VECTOR: 'mdi:vector-point',\n    ROBOT: 'mdi:robot',\n    // Tool icons\n    TOOL: 'mdi:wrench',\n    CALCULATOR: 'mdi:calculator',\n    CLOCK: 'mdi:clock',\n    // Communication icons\n    CHAT: 'mdi:chat',\n    MESSAGE: 'mdi:message',\n    EMAIL: 'mdi:email',\n    WEBHOOK: 'mdi:webhook',\n    // Storage icons\n    STORAGE: 'mdi:database',\n    MEMORY: 'mdi:memory',\n    CACHE: 'mdi:cached',\n    // Processing icons\n    PROCESS: 'mdi:cog',\n    FILTER: 'mdi:filter',\n    SORT: 'mdi:sort',\n    TRANSFORM: 'mdi:transform',\n    // Logic icons\n    LOGIC: 'mdi:git-branch',\n    CONDITION: 'mdi:source-fork',\n    LOOP: 'mdi:loop',\n    // Integration icons\n    API: 'mdi:api',\n    LINK: 'mdi:link',\n    PLUGIN: 'mdi:puzzle',\n    BUNDLE: 'mdi:package-variant'\n};\n/**\n * Category-specific icons matching Langflow's visual style\n */\nexport const CATEGORY_ICONS = {\n    inputs: 'mdi:arrow-down-circle',\n    outputs: 'mdi:arrow-up-circle',\n    prompts: 'mdi:message-text',\n    models: 'mdi:robot',\n    processing: 'mdi:cog',\n    logic: 'mdi:source-branch',\n    data: 'mdi:database',\n    helpers: 'mdi:help-circle',\n    tools: 'mdi:wrench',\n    'vector stores': 'mdi:vector-square',\n    embeddings: 'mdi:vector-polygon',\n    memories: 'mdi:brain',\n    agents: 'mdi:account-cog',\n    ai: 'mdi:artificial-intelligence',\n    bundles: 'mdi:package-variant'\n};\n/**\n * Get the appropriate icon for a node\n * @param nodeIcon - The node's specific icon\n * @param category - The node's category\n * @returns The icon to use\n */\nexport function getNodeIcon(nodeIcon, category) {\n    // If node has a specific icon, use it\n    if (nodeIcon) {\n        return nodeIcon;\n    }\n    // If category is provided, use category icon\n    if (category && CATEGORY_ICONS[category]) {\n        return CATEGORY_ICONS[category];\n    }\n    // Fallback to default node icon\n    return DEFAULT_ICONS.NODE;\n}\n/**\n * Get the appropriate icon for a category\n * @param category - The category\n * @returns The icon to use\n */\nexport function getCategoryIcon(category) {\n    return CATEGORY_ICONS[category] || DEFAULT_ICONS.CATEGORY;\n}\n/**\n * Get a default icon by key\n * @param key - The icon key from DEFAULT_ICONS\n * @returns The icon string\n */\nexport function getDefaultIcon(key) {\n    return DEFAULT_ICONS[key];\n}\n/**\n * Validate if an icon string is properly formatted\n * @param icon - The icon string to validate\n * @returns True if valid, false otherwise\n */\nexport function isValidIcon(icon) {\n    // Check if it's a valid iconify format (e.g., \"mdi:icon-name\")\n    return /^[a-z-]+:[a-z-]+$/.test(icon);\n}\n/**\n * Get a fallback icon if the provided icon is invalid\n * @param icon - The icon to check\n * @param fallback - The fallback icon to use\n * @returns The valid icon string\n */\nexport function getValidIcon(icon, fallback = DEFAULT_ICONS.NODE) {\n    return isValidIcon(icon) ? icon : fallback;\n}\n","<!--\n  Workflow Node Component\n  Renders individual nodes in the workflow editor with full functionality\n  Uses SvelteFlow's Handle for connection ports\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport { Position, Handle } from '@xyflow/svelte';\n\timport type { WorkflowNode } from '../types/index.js';\n\timport Icon from '@iconify/svelte';\n\timport { getNodeIcon } from '../utils/icons.js';\n\timport { getDataTypeColorToken, getCategoryColorToken } from '../utils/colors.js';\n\n\tinterface Props {\n\t\tdata: WorkflowNode['data'] & {\n\t\t\tnodeId?: string;\n\t\t\tonConfigOpen?: (node: { id: string; type: string; data: WorkflowNode['data'] }) => void;\n\t\t};\n\t\tselected?: boolean;\n\t}\n\n\tlet props: Props = $props();\n\tlet isHandleInteraction = $state(false);\n\n\t/**\n\t * Handle configuration value changes - now handled by global ConfigSidebar\n\t */\n\t// Removed local config handling - now using global ConfigSidebar\n\n\t/**\n\t * Handle node click - only handle selection, no config opening\n\t */\n\tfunction handleNodeClick(): void {\n\t\t// Node selection is handled by Svelte Flow\n\t}\n\n\t/**\n\t * Handle double-click to open config\n\t */\n\tfunction handleDoubleClick(): void {\n\t\topenConfigSidebar();\n\t}\n\n\t/**\n\t * Handle configuration sidebar - now using global ConfigSidebar\n\t */\n\tfunction openConfigSidebar(): void {\n\t\tif (props.data.onConfigOpen) {\n\t\t\t// Create a WorkflowNodeType-like object for the global ConfigSidebar\n\t\t\tconst nodeForConfig = {\n\t\t\t\tid: props.data.nodeId || 'unknown',\n\t\t\t\ttype: 'workflowNode',\n\t\t\t\tdata: props.data\n\t\t\t};\n\t\t\tprops.data.onConfigOpen(nodeForConfig);\n\t\t}\n\t}\n</script>\n\n<!-- Node Container -->\n<div\n\tclass=\"flowdrop-workflow-node\"\n\tclass:flowdrop-workflow-node--selected={props.selected}\n\tonclick={handleNodeClick}\n\tondblclick={handleDoubleClick}\n\tonmouseup={() => {\n\t\tisHandleInteraction = false;\n\t}}\n\tdata-handle-interaction={isHandleInteraction}\n\trole=\"button\"\n\ttabindex=\"0\"\n\tonkeydown={(e) => {\n\t\tif (e.key === 'Enter' || e.key === ' ') {\n\t\t\te.preventDefault();\n\t\t\thandleDoubleClick();\n\t\t}\n\t}}\n\taria-label=\"Workflow node: {props.data.metadata.name}\"\n\taria-describedby=\"node-description-{props.data.nodeId || 'unknown'}\"\n>\n\t<!-- Default Node Header -->\n\t<div class=\"flowdrop-workflow-node__header\">\n\t\t<div class=\"flowdrop-flex flowdrop-gap--3 flowdrop-items--center\">\n\t\t\t<!-- Node Icon -->\n\t\t\t<div\n\t\t\t\tclass=\"flowdrop-workflow-node__icon\"\n\t\t\t\tstyle=\"background-color: {getCategoryColorToken(props.data.metadata.category)}\"\n\t\t\t>\n\t\t\t\t<Icon icon={getNodeIcon(props.data.metadata.icon, props.data.metadata.category)} />\n\t\t\t</div>\n\n\t\t\t<!-- Node Title - Icon and Title on same line -->\n\t\t\t<h3 class=\"flowdrop-text--sm flowdrop-font--medium flowdrop-truncate flowdrop-flex--1\">\n\t\t\t\t{props.data.label}\n\t\t\t</h3>\n\n\t\t\t<!-- Status Indicators -->\n\t\t\t<div class=\"flowdrop-flex flowdrop-gap--2 flowdrop-items--center\">\n\t\t\t\t<!-- Status indicators removed - using outer NodeStatusOverlay instead -->\n\t\t\t</div>\n\t\t</div>\n\t\t<!-- Node Description - on new line below -->\n\t\t<p\n\t\t\tclass=\"flowdrop-text--xs flowdrop-text--gray flowdrop-truncate flowdrop-mt--1\"\n\t\t\tid=\"node-description-{props.data.nodeId || 'unknown'}\"\n\t\t>\n\t\t\t{props.data.metadata.description}\n\t\t</p>\n\t</div>\n\n\t<!-- Input Ports Container -->\n\t{#if props.data.metadata.inputs.length > 0}\n\t\t<div class=\"flowdrop-workflow-node__ports\">\n\t\t\t<div class=\"flowdrop-workflow-node__ports-header\">\n\t\t\t\t<h5 class=\"flowdrop-workflow-node__ports-title\">Inputs</h5>\n\t\t\t</div>\n\t\t\t<div class=\"flowdrop-workflow-node__ports-list\">\n\t\t\t\t{#each props.data.metadata.inputs as port (port.id)}\n\t\t\t\t\t<div class=\"flowdrop-workflow-node__port\">\n\t\t\t\t\t\t<!-- Input Handle -->\n\t\t\t\t\t\t<Handle\n\t\t\t\t\t\t\ttype=\"target\"\n\t\t\t\t\t\t\tposition={Position.Left}\n\t\t\t\t\t\t\tid={`${props.data.nodeId}-input-${port.id}`}\n\t\t\t\t\t\t\tclass=\"flowdrop-workflow-node__handle\"\n\t\t\t\t\t\t\tstyle=\"top: 50%; transform: translateY(-50%); margin-left: -32px; background-color: {getDataTypeColorToken(\n\t\t\t\t\t\t\t\tport.dataType\n\t\t\t\t\t\t\t)}; border-color: '#ffffff';\"\n\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\ttabindex={0}\n\t\t\t\t\t\t\taria-label=\"Connect to {port.name} input port\"\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<!-- Port Info -->\n\t\t\t\t\t\t<div class=\"flowdrop-flex--1 flowdrop-min-w--0\">\n\t\t\t\t\t\t\t<div class=\"flowdrop-flex flowdrop-gap--2\">\n\t\t\t\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-font--medium\">{port.name}</span>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"flowdrop-badge flowdrop-badge--sm\"\n\t\t\t\t\t\t\t\t\tstyle=\"background-color: {getDataTypeColorToken(port.dataType)}; color: #fff;\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{port.dataType}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{#if port.required}\n\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-badge flowdrop-badge--error flowdrop-badge--sm\"\n\t\t\t\t\t\t\t\t\t\t>Required</span\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{#if port.description}\n\t\t\t\t\t\t\t\t<p class=\"flowdrop-text--xs flowdrop-text--gray flowdrop-truncate\">\n\t\t\t\t\t\t\t\t\t{port.description}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\n\t<!-- Output Ports Container -->\n\t{#if props.data.metadata.outputs.length > 0}\n\t\t<div class=\"flowdrop-workflow-node__ports\">\n\t\t\t<div class=\"flowdrop-workflow-node__ports-header\">\n\t\t\t\t<h5 class=\"flowdrop-workflow-node__ports-title\">Outputs</h5>\n\t\t\t</div>\n\t\t\t<div class=\"flowdrop-workflow-node__ports-list\">\n\t\t\t\t{#each props.data.metadata.outputs as port (port.id)}\n\t\t\t\t\t<div class=\"flowdrop-workflow-node__port\">\n\t\t\t\t\t\t<!-- Port Info -->\n\t\t\t\t\t\t<div class=\"flowdrop-flex--1 flowdrop-min-w--0 flowdrop-text--right\">\n\t\t\t\t\t\t\t<div class=\"flowdrop-flex flowdrop-gap--2 flowdrop-justify--end\">\n\t\t\t\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-font--medium\">{port.name}</span>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"flowdrop-badge flowdrop-badge--sm\"\n\t\t\t\t\t\t\t\t\tstyle=\"background-color: {getDataTypeColorToken(port.dataType)}; color: #fff;\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{port.dataType}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{#if port.description}\n\t\t\t\t\t\t\t\t<p class=\"flowdrop-text--xs flowdrop-text--gray flowdrop-truncate\">\n\t\t\t\t\t\t\t\t\t{port.description}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<!-- Output Handle -->\n\t\t\t\t\t\t<Handle\n\t\t\t\t\t\t\ttype=\"source\"\n\t\t\t\t\t\t\tposition={Position.Right}\n\t\t\t\t\t\t\tid={`${props.data.nodeId}-output-${port.id}`}\n\t\t\t\t\t\t\tclass=\"flowdrop-workflow-node__handle\"\n\t\t\t\t\t\t\tstyle=\"top: 50%; transform: translateY(-50%); margin-right: -32px; background-color: {getDataTypeColorToken(\n\t\t\t\t\t\t\t\tport.dataType\n\t\t\t\t\t\t\t)}; border-color: '#ffffff';\"\n\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\ttabindex={0}\n\t\t\t\t\t\t\taria-label=\"Connect from {port.name} output port\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\n\t<!-- Config button -->\n\t<button\n\t\tclass=\"flowdrop-workflow-node__config-btn\"\n\t\tonclick={openConfigSidebar}\n\t\ttitle=\"Configure node\"\n\t>\n\t\t<Icon icon=\"mdi:cog\" />\n\t</button>\n</div>\n\n<!-- ConfigSidebar removed - now using global ConfigSidebar in WorkflowEditor -->\n\n<style>\n\t.flowdrop-workflow-node {\n\t\tposition: relative;\n\t\tbackground-color: #ffffff;\n\t\tborder: 2px solid #e5e7eb;\n\t\tborder-radius: 0.75rem;\n\t\tbox-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n\t\twidth: 18rem;\n\t\tz-index: 10;\n\t}\n\n\t.flowdrop-workflow-node--selected {\n\t\tbox-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n\t\tborder: 2px solid #3b82f6;\n\t}\n\n\t.flowdrop-workflow-node__header {\n\t\tpadding: 1rem;\n\t\tborder-bottom: 1px solid #e5e7eb;\n\t\tbackground-color: #f9fafb;\n\t\tborder-top-left-radius: 0.75rem;\n\t\tborder-top-right-radius: 0.75rem;\n\t}\n\n\t.flowdrop-workflow-node__icon {\n\t\twidth: 2rem;\n\t\theight: 2rem;\n\t\tborder-radius: 0.5rem;\n\t\tcolor: #ffffff;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tbox-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);\n\t}\n\n\t.flowdrop-workflow-node__header h3 {\n\t\tmargin: 0;\n\t\tline-height: 1;\n\t}\n\n\t/* Status indicator styles removed - using outer NodeStatusOverlay instead */\n\n\t@keyframes pulse {\n\t\t0%,\n\t\t100% {\n\t\t\topacity: 1;\n\t\t}\n\t\t50% {\n\t\t\topacity: 0.5;\n\t\t}\n\t}\n\n\t.flowdrop-workflow-node__ports {\n\t\tpadding: 0.75rem 1rem;\n\t}\n\n\t.flowdrop-workflow-node__ports-header {\n\t\tmargin-bottom: 0.5rem;\n\t}\n\n\t.flowdrop-workflow-node__ports-title {\n\t\tmargin: 0;\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 600;\n\t\tcolor: #374151;\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t}\n\n\t.flowdrop-workflow-node__ports-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.5rem;\n\t}\n\n\t.flowdrop-workflow-node__port {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 0.25rem 0;\n\t\tposition: relative;\n\t}\n\n\t.flowdrop-badge {\n\t\tpadding: 0.125rem 0.375rem;\n\t\tborder-radius: 0.25rem;\n\t\tfont-size: 0.625rem;\n\t\tfont-weight: 500;\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t}\n\n\t.flowdrop-badge--error {\n\t\tbackground-color: #ef4444;\n\t\tcolor: #ffffff;\n\t}\n\n\t.flowdrop-badge--sm {\n\t\tfont-size: 0.625rem;\n\t\tpadding: 0.125rem 0.25rem;\n\t}\n\n\t/* Handle styles */\n\t:global(.flowdrop-workflow-node__handle) {\n\t\twidth: 0.75rem;\n\t\theight: 0.75rem;\n\t\tbackground-color: #6b7280;\n\t\tborder: 2px solid #ffffff;\n\t\tborder-radius: 50%;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tcursor: pointer;\n\t}\n\n\t:global(.flowdrop-workflow-node__handle:hover) {\n\t\tbackground-color: #3b82f6;\n\t\ttransform: scale(1.2);\n\t}\n\n\t:global(.flowdrop-workflow-node__handle:focus) {\n\t\toutline: 2px solid #3b82f6;\n\t\toutline-offset: 2px;\n\t}\n\n\t/* Utility classes */\n\t.flowdrop-flex {\n\t\tdisplay: flex;\n\t}\n\n\t.flowdrop-flex--1 {\n\t\tflex: 1;\n\t}\n\n\t.flowdrop-gap--2 {\n\t\tgap: 0.5rem;\n\t}\n\n\t.flowdrop-gap--3 {\n\t\tgap: 0.75rem;\n\t}\n\n\t.flowdrop-items--center {\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-justify--end {\n\t\tjustify-content: flex-end;\n\t}\n\n\t.flowdrop-min-w--0 {\n\t\tmin-width: 0;\n\t}\n\n\t.flowdrop-text--xs {\n\t\tfont-size: 0.75rem;\n\t\tline-height: 1rem;\n\t}\n\n\t.flowdrop-text--sm {\n\t\tfont-size: 0.875rem;\n\t\tline-height: 1.25rem;\n\t}\n\n\t.flowdrop-text--gray {\n\t\tcolor: #6b7280;\n\t}\n\n\t.flowdrop-font--medium {\n\t\tfont-weight: 500;\n\t}\n\n\t.flowdrop-truncate {\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.flowdrop-mt--1 {\n\t\tmargin-top: 0.25rem;\n\t}\n\n\t.flowdrop-text--right {\n\t\ttext-align: right;\n\t}\n\n\t.flowdrop-workflow-node__config-btn {\n\t\tposition: absolute;\n\t\ttop: 0.5rem;\n\t\tright: 0.5rem;\n\t\twidth: 1.5rem;\n\t\theight: 1.5rem;\n\t\tbackground-color: rgba(255, 255, 255, 0.9);\n\t\tborder: 1px solid #e5e7eb;\n\t\tborder-radius: 0.25rem;\n\t\tcolor: #6b7280;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\topacity: 0;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tbackdrop-filter: blur(4px);\n\t\tz-index: 15;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.flowdrop-workflow-node:hover .flowdrop-workflow-node__config-btn {\n\t\topacity: 1;\n\t}\n\n\t.flowdrop-workflow-node__config-btn:hover {\n\t\tbackground-color: #f9fafb;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n</style>\n","/**\n * marked v16.4.1 - a markdown parser\n * Copyright (c) 2011-2025, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\nfunction L(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var T=L();function G(u){T=u}var I={exec:()=>null};function h(u,e=\"\"){let t=typeof u==\"string\"?u:u.source,n={replace:(r,i)=>{let s=typeof i==\"string\"?i:i.source;return s=s.replace(m.caret,\"$1\"),t=t.replace(r,s),n},getRegex:()=>new RegExp(t,e)};return n}var m={codeRemoveIndent:/^(?: {1,4}| {0,3}\\t)/gm,outputLinkReplace:/\\\\([\\[\\]])/g,indentCodeCompensation:/^(\\s+)(?:```)/,beginningSpace:/^\\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\\n/g,tabCharGlobal:/\\t/g,multipleSpaceGlobal:/\\s+/g,blankLine:/^[ \\t]*$/,doubleBlankLine:/\\n[ \\t]*\\n[ \\t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\\n {0,3}((?:=+|-+) *)(?=\\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \\t]?/gm,listReplaceTabs:/^\\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\\[[ xX]\\] /,listReplaceTask:/^\\[[ xX]\\] +/,anyLine:/\\n.*\\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\\||\\| *$/g,tableRowBlankLine:/\\n[ \\t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\\s|>)/i,endPreScriptTag:/^<\\/(pre|code|kbd|script)(\\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/,unicodeAlphaNumeric:/[\\p{L}\\p{N}]/u,escapeTest:/[&<>\"']/,escapeReplace:/[&<>\"']/g,escapeTestNoEncode:/[<>\"']|&(?!(#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);)/,escapeReplaceNoEncode:/[<>\"']|&(?!(#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);)/g,unescapeTest:/&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig,caret:/(^|[^\\[])\\^/g,percentDecode:/%25/g,findPipe:/\\|/g,splitPipe:/ \\|/,slashPipe:/\\\\\\|/g,carriageReturn:/\\r\\n|\\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\\S*/,endingNewline:/\\n$/,listItemRegex:u=>new RegExp(`^( {0,3}${u})((?:[\t ][^\\\\n]*)?(?:\\\\n|$))`),nextBulletRegex:u=>new RegExp(`^ {0,${Math.min(3,u-1)}}(?:[*+-]|\\\\d{1,9}[.)])((?:[ \t][^\\\\n]*)?(?:\\\\n|$))`),hrRegex:u=>new RegExp(`^ {0,${Math.min(3,u-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)`),fencesBeginRegex:u=>new RegExp(`^ {0,${Math.min(3,u-1)}}(?:\\`\\`\\`|~~~)`),headingBeginRegex:u=>new RegExp(`^ {0,${Math.min(3,u-1)}}#`),htmlBeginRegex:u=>new RegExp(`^ {0,${Math.min(3,u-1)}}<(?:[a-z].*>|!--)`,\"i\")},be=/^(?:[ \\t]*(?:\\n|$))+/,Re=/^((?: {4}| {0,3}\\t)[^\\n]+(?:\\n(?:[ \\t]*(?:\\n|$))*)?)+/,Te=/^ {0,3}(`{3,}(?=[^`\\n]*(?:\\n|$))|~{3,})([^\\n]*)(?:\\n|$)(?:|([\\s\\S]*?)(?:\\n|$))(?: {0,3}\\1[~`]* *(?=\\n|$)|$)/,E=/^ {0,3}((?:-[\\t ]*){3,}|(?:_[ \\t]*){3,}|(?:\\*[ \\t]*){3,})(?:\\n+|$)/,Oe=/^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/,F=/(?:[*+-]|\\d{1,9}[.)])/,ie=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\\n(?!\\s*?\\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/,oe=h(ie).replace(/bull/g,F).replace(/blockCode/g,/(?: {4}| {0,3}\\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\\n>]+>\\n/).replace(/\\|table/g,\"\").getRegex(),we=h(ie).replace(/bull/g,F).replace(/blockCode/g,/(?: {4}| {0,3}\\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\\n>]+>\\n/).replace(/table/g,/ {0,3}\\|?(?:[:\\- ]*\\|)+[\\:\\- ]*\\n/).getRegex(),j=/^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\\n)[^\\n]+)*)/,ye=/^[^\\n]+/,Q=/(?!\\s*\\])(?:\\\\[\\s\\S]|[^\\[\\]\\\\])+/,Pe=h(/^ {0,3}\\[(label)\\]: *(?:\\n[ \\t]*)?([^<\\s][^\\s]*|<.*?>)(?:(?: +(?:\\n[ \\t]*)?| *\\n[ \\t]*)(title))? *(?:\\n+|$)/).replace(\"label\",Q).replace(\"title\",/(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/).getRegex(),Se=h(/^( {0,3}bull)([ \\t][^\\n]+?)?(?:\\n|$)/).replace(/bull/g,F).getRegex(),v=\"address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul\",U=/<!--(?:-?>|[\\s\\S]*?(?:-->|$))/,$e=h(\"^ {0,3}(?:<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)|comment[^\\\\n]*(\\\\n+|$)|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n[ \t]*)+\\\\n|$)|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n[ \t]*)+\\\\n|$)|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n[ \t]*)+\\\\n|$))\",\"i\").replace(\"comment\",U).replace(\"tag\",v).replace(\"attribute\",/ +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/).getRegex(),ae=h(j).replace(\"hr\",E).replace(\"heading\",\" {0,3}#{1,6}(?:\\\\s|$)\").replace(\"|lheading\",\"\").replace(\"|table\",\"\").replace(\"blockquote\",\" {0,3}>\").replace(\"fences\",\" {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n\").replace(\"list\",\" {0,3}(?:[*+-]|1[.)]) \").replace(\"html\",\"</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)\").replace(\"tag\",v).getRegex(),_e=h(/^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/).replace(\"paragraph\",ae).getRegex(),K={blockquote:_e,code:Re,def:Pe,fences:Te,heading:Oe,hr:E,html:$e,lheading:oe,list:Se,newline:be,paragraph:ae,table:I,text:ye},re=h(\"^ *([^\\\\n ].*)\\\\n {0,3}((?:\\\\| *)?:?-+:? *(?:\\\\| *:?-+:? *)*(?:\\\\| *)?)(?:\\\\n((?:(?! *\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)\").replace(\"hr\",E).replace(\"heading\",\" {0,3}#{1,6}(?:\\\\s|$)\").replace(\"blockquote\",\" {0,3}>\").replace(\"code\",\"(?: {4}| {0,3}\t)[^\\\\n]\").replace(\"fences\",\" {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n\").replace(\"list\",\" {0,3}(?:[*+-]|1[.)]) \").replace(\"html\",\"</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)\").replace(\"tag\",v).getRegex(),Le={...K,lheading:we,table:re,paragraph:h(j).replace(\"hr\",E).replace(\"heading\",\" {0,3}#{1,6}(?:\\\\s|$)\").replace(\"|lheading\",\"\").replace(\"table\",re).replace(\"blockquote\",\" {0,3}>\").replace(\"fences\",\" {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n\").replace(\"list\",\" {0,3}(?:[*+-]|1[.)]) \").replace(\"html\",\"</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)\").replace(\"tag\",v).getRegex()},Me={...K,html:h(`^ *(?:comment *(?:\\\\n|\\\\s*$)|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\\\s[^'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))`).replace(\"comment\",U).replace(/tag/g,\"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b\").getRegex(),def:/^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,heading:/^(#{1,6})(.*)(?:\\n+|$)/,fences:I,lheading:/^(.+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/,paragraph:h(j).replace(\"hr\",E).replace(\"heading\",` *#{1,6} *[^\n]`).replace(\"lheading\",oe).replace(\"|table\",\"\").replace(\"blockquote\",\" {0,3}>\").replace(\"|fences\",\"\").replace(\"|list\",\"\").replace(\"|html\",\"\").replace(\"|tag\",\"\").getRegex()},ze=/^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,Ae=/^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,le=/^( {2,}|\\\\)\\n(?!\\s*$)/,Ie=/^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/,D=/[\\p{P}\\p{S}]/u,W=/[\\s\\p{P}\\p{S}]/u,ue=/[^\\s\\p{P}\\p{S}]/u,Ee=h(/^((?![*_])punctSpace)/,\"u\").replace(/punctSpace/g,W).getRegex(),pe=/(?!~)[\\p{P}\\p{S}]/u,Ce=/(?!~)[\\s\\p{P}\\p{S}]/u,Be=/(?:[^\\s\\p{P}\\p{S}]|~)/u,qe=h(/link|code|html/,\"g\").replace(\"link\",/\\[(?:[^\\[\\]`]|(?<!`)(?<a>`+)[^`]+\\k<a>(?!`))*?\\]\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)]|\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)])*\\))*\\)/).replace(\"code\",/(?<!`)(?<b>`+)[^`]+\\k<b>(?!`)/).replace(\"html\",/<(?! )[^<>]*?>/).getRegex(),ce=/^(?:\\*+(?:((?!\\*)punct)|[^\\s*]))|^_+(?:((?!_)punct)|([^\\s_]))/,ve=h(ce,\"u\").replace(/punct/g,D).getRegex(),De=h(ce,\"u\").replace(/punct/g,pe).getRegex(),he=\"^[^_*]*?__[^_*]*?\\\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\\\*)punct(\\\\*+)(?=[\\\\s]|$)|notPunctSpace(\\\\*+)(?!\\\\*)(?=punctSpace|$)|(?!\\\\*)punctSpace(\\\\*+)(?=notPunctSpace)|[\\\\s](\\\\*+)(?!\\\\*)(?=punct)|(?!\\\\*)punct(\\\\*+)(?!\\\\*)(?=punct)|notPunctSpace(\\\\*+)(?=notPunctSpace)\",He=h(he,\"gu\").replace(/notPunctSpace/g,ue).replace(/punctSpace/g,W).replace(/punct/g,D).getRegex(),Ze=h(he,\"gu\").replace(/notPunctSpace/g,Be).replace(/punctSpace/g,Ce).replace(/punct/g,pe).getRegex(),Ge=h(\"^[^_*]*?\\\\*\\\\*[^_*]*?_[^_*]*?(?=\\\\*\\\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)\",\"gu\").replace(/notPunctSpace/g,ue).replace(/punctSpace/g,W).replace(/punct/g,D).getRegex(),Ne=h(/\\\\(punct)/,\"gu\").replace(/punct/g,D).getRegex(),Fe=h(/^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/).replace(\"scheme\",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace(\"email\",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),je=h(U).replace(\"(?:-->|$)\",\"-->\").getRegex(),Qe=h(\"^comment|^</[a-zA-Z][\\\\w:-]*\\\\s*>|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>|^<\\\\?[\\\\s\\\\S]*?\\\\?>|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>\").replace(\"comment\",je).replace(\"attribute\",/\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/).getRegex(),q=/(?:\\[(?:\\\\[\\s\\S]|[^\\[\\]\\\\])*\\]|\\\\[\\s\\S]|`+[^`]*?`+(?!`)|[^\\[\\]\\\\`])*?/,Ue=h(/^!?\\[(label)\\]\\(\\s*(href)(?:(?:[ \\t]*(?:\\n[ \\t]*)?)(title))?\\s*\\)/).replace(\"label\",q).replace(\"href\",/<(?:\\\\.|[^\\n<>\\\\])+>|[^ \\t\\n\\x00-\\x1f]*/).replace(\"title\",/\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/).getRegex(),de=h(/^!?\\[(label)\\]\\[(ref)\\]/).replace(\"label\",q).replace(\"ref\",Q).getRegex(),ke=h(/^!?\\[(ref)\\](?:\\[\\])?/).replace(\"ref\",Q).getRegex(),Ke=h(\"reflink|nolink(?!\\\\()\",\"g\").replace(\"reflink\",de).replace(\"nolink\",ke).getRegex(),se=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,X={_backpedal:I,anyPunctuation:Ne,autolink:Fe,blockSkip:qe,br:le,code:Ae,del:I,emStrongLDelim:ve,emStrongRDelimAst:He,emStrongRDelimUnd:Ge,escape:ze,link:Ue,nolink:ke,punctuation:Ee,reflink:de,reflinkSearch:Ke,tag:Qe,text:Ie,url:I},We={...X,link:h(/^!?\\[(label)\\]\\((.*?)\\)/).replace(\"label\",q).getRegex(),reflink:h(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/).replace(\"label\",q).getRegex()},N={...X,emStrongRDelimAst:Ze,emStrongLDelim:De,url:h(/^((?:protocol):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/).replace(\"protocol\",se).replace(\"email\",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'\"~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'\"~)]+(?!$))+/,del:/^(~~?)(?=[^\\s~])((?:\\\\[\\s\\S]|[^\\\\])*?(?:\\\\[\\s\\S]|[^\\s~\\\\]))\\1(?=[^~]|$)/,text:h(/^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|protocol:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/).replace(\"protocol\",se).getRegex()},Xe={...N,br:h(le).replace(\"{2,}\",\"*\").getRegex(),text:h(N.text).replace(\"\\\\b_\",\"\\\\b_| {2,}\\\\n\").replace(/\\{2,\\}/g,\"*\").getRegex()},C={normal:K,gfm:Le,pedantic:Me},M={normal:X,gfm:N,breaks:Xe,pedantic:We};var Je={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\"},ge=u=>Je[u];function w(u,e){if(e){if(m.escapeTest.test(u))return u.replace(m.escapeReplace,ge)}else if(m.escapeTestNoEncode.test(u))return u.replace(m.escapeReplaceNoEncode,ge);return u}function J(u){try{u=encodeURI(u).replace(m.percentDecode,\"%\")}catch{return null}return u}function V(u,e){let t=u.replace(m.findPipe,(i,s,o)=>{let a=!1,l=s;for(;--l>=0&&o[l]===\"\\\\\";)a=!a;return a?\"|\":\" |\"}),n=t.split(m.splitPipe),r=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push(\"\");for(;r<n.length;r++)n[r]=n[r].trim().replace(m.slashPipe,\"|\");return n}function z(u,e,t){let n=u.length;if(n===0)return\"\";let r=0;for(;r<n;){let i=u.charAt(n-r-1);if(i===e&&!t)r++;else if(i!==e&&t)r++;else break}return u.slice(0,n-r)}function fe(u,e){if(u.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<u.length;n++)if(u[n]===\"\\\\\")n++;else if(u[n]===e[0])t++;else if(u[n]===e[1]&&(t--,t<0))return n;return t>0?-2:-1}function me(u,e,t,n,r){let i=e.href,s=e.title||null,o=u[1].replace(r.other.outputLinkReplace,\"$1\");n.state.inLink=!0;let a={type:u[0].charAt(0)===\"!\"?\"image\":\"link\",raw:t,href:i,title:s,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,a}function Ve(u,e,t){let n=u.match(t.other.indentCodeCompensation);if(n===null)return e;let r=n[1];return e.split(`\n`).map(i=>{let s=i.match(t.other.beginningSpace);if(s===null)return i;let[o]=s;return o.length>=r.length?i.slice(r.length):i}).join(`\n`)}var y=class{options;rules;lexer;constructor(e){this.options=e||T}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:\"space\",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let n=t[0].replace(this.rules.other.codeRemoveIndent,\"\");return{type:\"code\",raw:t[0],codeBlockStyle:\"indented\",text:this.options.pedantic?n:z(n,`\n`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let n=t[0],r=Ve(n,t[3]||\"\",this.rules);return{type:\"code\",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,\"$1\"):t[2],text:r}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){let r=z(n,\"#\");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:\"heading\",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:\"hr\",raw:z(t[0],`\n`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let n=z(t[0],`\n`).split(`\n`),r=\"\",i=\"\",s=[];for(;n.length>0;){let o=!1,a=[],l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))a.push(n[l]),o=!0;else if(!o)a.push(n[l]);else break;n=n.slice(l);let c=a.join(`\n`),p=c.replace(this.rules.other.blockquoteSetextReplace,`\n    $1`).replace(this.rules.other.blockquoteSetextReplace2,\"\");r=r?`${r}\n${c}`:c,i=i?`${i}\n${p}`:p;let g=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(p,s,!0),this.lexer.state.top=g,n.length===0)break;let d=s.at(-1);if(d?.type===\"code\")break;if(d?.type===\"blockquote\"){let R=d,f=R.raw+`\n`+n.join(`\n`),O=this.blockquote(f);s[s.length-1]=O,r=r.substring(0,r.length-R.raw.length)+O.raw,i=i.substring(0,i.length-R.text.length)+O.text;break}else if(d?.type===\"list\"){let R=d,f=R.raw+`\n`+n.join(`\n`),O=this.list(f);s[s.length-1]=O,r=r.substring(0,r.length-d.raw.length)+O.raw,i=i.substring(0,i.length-R.raw.length)+O.raw,n=f.substring(s.at(-1).raw.length).split(`\n`);continue}}return{type:\"blockquote\",raw:r,tokens:s,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),r=n.length>1,i={type:\"list\",raw:\"\",ordered:r,start:r?+n.slice(0,-1):\"\",loose:!1,items:[]};n=r?`\\\\d{1,9}\\\\${n.slice(-1)}`:`\\\\${n}`,this.options.pedantic&&(n=r?n:\"[*+-]\");let s=this.rules.other.listItemRegex(n),o=!1;for(;e;){let l=!1,c=\"\",p=\"\";if(!(t=s.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let g=t[2].split(`\n`,1)[0].replace(this.rules.other.listReplaceTabs,H=>\" \".repeat(3*H.length)),d=e.split(`\n`,1)[0],R=!g.trim(),f=0;if(this.options.pedantic?(f=2,p=g.trimStart()):R?f=t[1].length+1:(f=t[2].search(this.rules.other.nonSpaceChar),f=f>4?1:f,p=g.slice(f),f+=t[1].length),R&&this.rules.other.blankLine.test(d)&&(c+=d+`\n`,e=e.substring(d.length+1),l=!0),!l){let H=this.rules.other.nextBulletRegex(f),ee=this.rules.other.hrRegex(f),te=this.rules.other.fencesBeginRegex(f),ne=this.rules.other.headingBeginRegex(f),xe=this.rules.other.htmlBeginRegex(f);for(;e;){let Z=e.split(`\n`,1)[0],A;if(d=Z,this.options.pedantic?(d=d.replace(this.rules.other.listReplaceNesting,\"  \"),A=d):A=d.replace(this.rules.other.tabCharGlobal,\"    \"),te.test(d)||ne.test(d)||xe.test(d)||H.test(d)||ee.test(d))break;if(A.search(this.rules.other.nonSpaceChar)>=f||!d.trim())p+=`\n`+A.slice(f);else{if(R||g.replace(this.rules.other.tabCharGlobal,\"    \").search(this.rules.other.nonSpaceChar)>=4||te.test(g)||ne.test(g)||ee.test(g))break;p+=`\n`+d}!R&&!d.trim()&&(R=!0),c+=Z+`\n`,e=e.substring(Z.length+1),g=A.slice(f)}}i.loose||(o?i.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(o=!0));let O=null,Y;this.options.gfm&&(O=this.rules.other.listIsTask.exec(p),O&&(Y=O[0]!==\"[ ] \",p=p.replace(this.rules.other.listReplaceTask,\"\"))),i.items.push({type:\"list_item\",raw:c,task:!!O,checked:Y,loose:!1,text:p,tokens:[]}),i.raw+=c}let a=i.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){let c=i.items[l].tokens.filter(g=>g.type===\"space\"),p=c.length>0&&c.some(g=>this.rules.other.anyLine.test(g.raw));i.loose=p}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:\"html\",block:!0,raw:t[0],pre:t[1]===\"pre\"||t[1]===\"script\"||t[1]===\"style\",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal,\" \"),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,\"$1\").replace(this.rules.inline.anyPunctuation,\"$1\"):\"\",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,\"$1\"):t[3];return{type:\"def\",tag:n,raw:t[0],href:r,title:i}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=V(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,\"\").split(\"|\"),i=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,\"\").split(`\n`):[],s={type:\"table\",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let o of r)this.rules.other.tableAlignRight.test(o)?s.align.push(\"right\"):this.rules.other.tableAlignCenter.test(o)?s.align.push(\"center\"):this.rules.other.tableAlignLeft.test(o)?s.align.push(\"left\"):s.align.push(null);for(let o=0;o<n.length;o++)s.header.push({text:n[o],tokens:this.lexer.inline(n[o]),header:!0,align:s.align[o]});for(let o of i)s.rows.push(V(o,s.header.length).map((a,l)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:s.align[l]})));return s}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:\"heading\",raw:t[0],depth:t[2].charAt(0)===\"=\"?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let n=t[1].charAt(t[1].length-1)===`\n`?t[1].slice(0,-1):t[1];return{type:\"paragraph\",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:\"text\",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:\"escape\",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:\"html\",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let s=z(n.slice(0,-1),\"\\\\\");if((n.length-s.length)%2===0)return}else{let s=fe(t[2],\"()\");if(s===-2)return;if(s>-1){let a=(t[0].indexOf(\"!\")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,a).trim(),t[3]=\"\"}}let r=t[2],i=\"\";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(r);s&&(r=s[1],i=s[3])}else i=t[3]?t[3].slice(1,-1):\"\";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),me(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,\"$1\"),title:i&&i.replace(this.rules.inline.anyPunctuation,\"$1\")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal,\" \"),i=t[r.toLowerCase()];if(!i){let s=n[0].charAt(0);return{type:\"text\",raw:s,text:s}}return me(n,i,n[0],this.lexer,this.rules)}}emStrong(e,t,n=\"\"){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||\"\")||!n||this.rules.inline.punctuation.exec(n)){let s=[...r[0]].length-1,o,a,l=s,c=0,p=r[0][0]===\"*\"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(p.lastIndex=0,t=t.slice(-1*e.length+s);(r=p.exec(t))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(a=[...o].length,r[3]||r[4]){l+=a;continue}else if((r[5]||r[6])&&s%3&&!((s+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);let g=[...r[0]][0].length,d=e.slice(0,s+r.index+g+a);if(Math.min(s,a)%2){let f=d.slice(1,-1);return{type:\"em\",raw:d,text:f,tokens:this.lexer.inlineTokens(f)}}let R=d.slice(2,-2);return{type:\"strong\",raw:d,text:R,tokens:this.lexer.inlineTokens(R)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal,\" \"),r=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&i&&(n=n.substring(1,n.length-1)),{type:\"codespan\",raw:t[0],text:n}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:\"br\",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:\"del\",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let n,r;return t[2]===\"@\"?(n=t[1],r=\"mailto:\"+n):(n=t[1],r=n),{type:\"link\",raw:t[0],text:n,href:r,tokens:[{type:\"text\",raw:n,text:n}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let n,r;if(t[2]===\"@\")n=t[0],r=\"mailto:\"+n;else{let i;do i=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??\"\";while(i!==t[0]);n=t[0],t[1]===\"www.\"?r=\"http://\"+t[0]:r=t[0]}return{type:\"link\",raw:t[0],text:n,href:r,tokens:[{type:\"text\",raw:n,text:n}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let n=this.lexer.state.inRawBlock;return{type:\"text\",raw:t[0],text:t[0],escaped:n}}}};var x=class u{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||T,this.options.tokenizer=this.options.tokenizer||new y,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:m,block:C.normal,inline:M.normal};this.options.pedantic?(t.block=C.pedantic,t.inline=M.pedantic):this.options.gfm&&(t.block=C.gfm,this.options.breaks?t.inline=M.breaks:t.inline=M.gfm),this.tokenizer.rules=t}static get rules(){return{block:C,inline:M}}static lex(e,t){return new u(t).lex(e)}static lexInline(e,t){return new u(t).inlineTokens(e)}lex(e){e=e.replace(m.carriageReturn,`\n`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){for(this.options.pedantic&&(e=e.replace(m.tabCharGlobal,\"    \").replace(m.spaceLine,\"\"));e;){let r;if(this.options.extensions?.block?.some(s=>(r=s.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))continue;if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length);let s=t.at(-1);r.raw.length===1&&s!==void 0?s.raw+=`\n`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length);let s=t.at(-1);s?.type===\"paragraph\"||s?.type===\"text\"?(s.raw+=(s.raw.endsWith(`\n`)?\"\":`\n`)+r.raw,s.text+=`\n`+r.text,this.inlineQueue.at(-1).src=s.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length);let s=t.at(-1);s?.type===\"paragraph\"||s?.type===\"text\"?(s.raw+=(s.raw.endsWith(`\n`)?\"\":`\n`)+r.raw,s.text+=`\n`+r.raw,this.inlineQueue.at(-1).src=s.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},t.push(r));continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}let i=e;if(this.options.extensions?.startBlock){let s=1/0,o=e.slice(1),a;this.options.extensions.startBlock.forEach(l=>{a=l.call({lexer:this},o),typeof a==\"number\"&&a>=0&&(s=Math.min(s,a))}),s<1/0&&s>=0&&(i=e.substring(0,s+1))}if(this.state.top&&(r=this.tokenizer.paragraph(i))){let s=t.at(-1);n&&s?.type===\"paragraph\"?(s.raw+=(s.raw.endsWith(`\n`)?\"\":`\n`)+r.raw,s.text+=`\n`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):t.push(r),n=i.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length);let s=t.at(-1);s?.type===\"text\"?(s.raw+=(s.raw.endsWith(`\n`)?\"\":`\n`)+r.raw,s.text+=`\n`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):t.push(r);continue}if(e){let s=\"Infinite loop on byte: \"+e.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n=e,r=null;if(this.tokens.links){let o=Object.keys(this.tokens.links);if(o.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)o.includes(r[0].slice(r[0].lastIndexOf(\"[\")+1,-1))&&(n=n.slice(0,r.index)+\"[\"+\"a\".repeat(r[0].length-2)+\"]\"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,r.index)+\"++\"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,r.index)+\"[\"+\"a\".repeat(r[0].length-2)+\"]\"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=this.options.hooks?.emStrongMask?.call({lexer:this},n)??n;let i=!1,s=\"\";for(;e;){i||(s=\"\"),i=!1;let o;if(this.options.extensions?.inline?.some(l=>(o=l.call({lexer:this},e,t))?(e=e.substring(o.raw.length),t.push(o),!0):!1))continue;if(o=this.tokenizer.escape(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.tag(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.link(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(o.raw.length);let l=t.at(-1);o.type===\"text\"&&l?.type===\"text\"?(l.raw+=o.raw,l.text+=o.text):t.push(o);continue}if(o=this.tokenizer.emStrong(e,n,s)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.codespan(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.br(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.del(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.autolink(e)){e=e.substring(o.raw.length),t.push(o);continue}if(!this.state.inLink&&(o=this.tokenizer.url(e))){e=e.substring(o.raw.length),t.push(o);continue}let a=e;if(this.options.extensions?.startInline){let l=1/0,c=e.slice(1),p;this.options.extensions.startInline.forEach(g=>{p=g.call({lexer:this},c),typeof p==\"number\"&&p>=0&&(l=Math.min(l,p))}),l<1/0&&l>=0&&(a=e.substring(0,l+1))}if(o=this.tokenizer.inlineText(a)){e=e.substring(o.raw.length),o.raw.slice(-1)!==\"_\"&&(s=o.raw.slice(-1)),i=!0;let l=t.at(-1);l?.type===\"text\"?(l.raw+=o.raw,l.text+=o.text):t.push(o);continue}if(e){let l=\"Infinite loop on byte: \"+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return t}};var P=class{options;parser;constructor(e){this.options=e||T}space(e){return\"\"}code({text:e,lang:t,escaped:n}){let r=(t||\"\").match(m.notSpaceStart)?.[0],i=e.replace(m.endingNewline,\"\")+`\n`;return r?'<pre><code class=\"language-'+w(r)+'\">'+(n?i:w(i,!0))+`</code></pre>\n`:\"<pre><code>\"+(n?i:w(i,!0))+`</code></pre>\n`}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}def(e){return\"\"}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return`<hr>\n`}list(e){let t=e.ordered,n=e.start,r=\"\";for(let o=0;o<e.items.length;o++){let a=e.items[o];r+=this.listitem(a)}let i=t?\"ol\":\"ul\",s=t&&n!==1?' start=\"'+n+'\"':\"\";return\"<\"+i+s+`>\n`+r+\"</\"+i+`>\n`}listitem(e){let t=\"\";if(e.task){let n=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type===\"paragraph\"?(e.tokens[0].text=n+\" \"+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type===\"text\"&&(e.tokens[0].tokens[0].text=n+\" \"+w(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:\"text\",raw:n+\" \",text:n+\" \",escaped:!0}):t+=n+\" \"}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox({checked:e}){return\"<input \"+(e?'checked=\"\" ':\"\")+'disabled=\"\" type=\"checkbox\">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t=\"\",n=\"\";for(let i=0;i<e.header.length;i++)n+=this.tablecell(e.header[i]);t+=this.tablerow({text:n});let r=\"\";for(let i=0;i<e.rows.length;i++){let s=e.rows[i];n=\"\";for(let o=0;o<s.length;o++)n+=this.tablecell(s[o]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>\n<thead>\n`+t+`</thead>\n`+r+`</table>\n`}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?\"th\":\"td\";return(e.align?`<${n} align=\"${e.align}\">`:`<${n}>`)+t+`</${n}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${w(e,!0)}</code>`}br(e){return\"<br>\"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let r=this.parser.parseInline(n),i=J(e);if(i===null)return r;e=i;let s='<a href=\"'+e+'\"';return t&&(s+=' title=\"'+w(t)+'\"'),s+=\">\"+r+\"</a>\",s}image({href:e,title:t,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let i=J(e);if(i===null)return w(n);e=i;let s=`<img src=\"${e}\" alt=\"${n}\"`;return t&&(s+=` title=\"${w(t)}\"`),s+=\">\",s}text(e){return\"tokens\"in e&&e.tokens?this.parser.parseInline(e.tokens):\"escaped\"in e&&e.escaped?e.text:w(e.text)}};var $=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return\"\"+e}image({text:e}){return\"\"+e}br(){return\"\"}};var b=class u{options;renderer;textRenderer;constructor(e){this.options=e||T,this.options.renderer=this.options.renderer||new P,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new $}static parse(e,t){return new u(t).parse(e)}static parseInline(e,t){return new u(t).parseInline(e)}parse(e,t=!0){let n=\"\";for(let r=0;r<e.length;r++){let i=e[r];if(this.options.extensions?.renderers?.[i.type]){let o=i,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||![\"space\",\"hr\",\"heading\",\"code\",\"table\",\"blockquote\",\"list\",\"html\",\"def\",\"paragraph\",\"text\"].includes(o.type)){n+=a||\"\";continue}}let s=i;switch(s.type){case\"space\":{n+=this.renderer.space(s);continue}case\"hr\":{n+=this.renderer.hr(s);continue}case\"heading\":{n+=this.renderer.heading(s);continue}case\"code\":{n+=this.renderer.code(s);continue}case\"table\":{n+=this.renderer.table(s);continue}case\"blockquote\":{n+=this.renderer.blockquote(s);continue}case\"list\":{n+=this.renderer.list(s);continue}case\"html\":{n+=this.renderer.html(s);continue}case\"def\":{n+=this.renderer.def(s);continue}case\"paragraph\":{n+=this.renderer.paragraph(s);continue}case\"text\":{let o=s,a=this.renderer.text(o);for(;r+1<e.length&&e[r+1].type===\"text\";)o=e[++r],a+=`\n`+this.renderer.text(o);t?n+=this.renderer.paragraph({type:\"paragraph\",raw:a,text:a,tokens:[{type:\"text\",raw:a,text:a,escaped:!0}]}):n+=a;continue}default:{let o='Token with \"'+s.type+'\" type was not found.';if(this.options.silent)return console.error(o),\"\";throw new Error(o)}}}return n}parseInline(e,t=this.renderer){let n=\"\";for(let r=0;r<e.length;r++){let i=e[r];if(this.options.extensions?.renderers?.[i.type]){let o=this.options.extensions.renderers[i.type].call({parser:this},i);if(o!==!1||![\"escape\",\"html\",\"link\",\"image\",\"strong\",\"em\",\"codespan\",\"br\",\"del\",\"text\"].includes(i.type)){n+=o||\"\";continue}}let s=i;switch(s.type){case\"escape\":{n+=t.text(s);break}case\"html\":{n+=t.html(s);break}case\"link\":{n+=t.link(s);break}case\"image\":{n+=t.image(s);break}case\"strong\":{n+=t.strong(s);break}case\"em\":{n+=t.em(s);break}case\"codespan\":{n+=t.codespan(s);break}case\"br\":{n+=t.br(s);break}case\"del\":{n+=t.del(s);break}case\"text\":{n+=t.text(s);break}default:{let o='Token with \"'+s.type+'\" type was not found.';if(this.options.silent)return console.error(o),\"\";throw new Error(o)}}}return n}};var S=class{options;block;constructor(e){this.options=e||T}static passThroughHooks=new Set([\"preprocess\",\"postprocess\",\"processAllTokens\",\"emStrongMask\"]);static passThroughHooksRespectAsync=new Set([\"preprocess\",\"postprocess\",\"processAllTokens\"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?x.lex:x.lexInline}provideParser(){return this.block?b.parse:b.parseInline}};var B=class{defaults=L();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=b;Renderer=P;TextRenderer=$;Lexer=x;Tokenizer=y;Hooks=S;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(let r of e)switch(n=n.concat(t.call(this,r)),r.type){case\"table\":{let i=r;for(let s of i.header)n=n.concat(this.walkTokens(s.tokens,t));for(let s of i.rows)for(let o of s)n=n.concat(this.walkTokens(o.tokens,t));break}case\"list\":{let i=r;n=n.concat(this.walkTokens(i.items,t));break}default:{let i=r;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(s=>{let o=i[s].flat(1/0);n=n.concat(this.walkTokens(o,t))}):i.tokens&&(n=n.concat(this.walkTokens(i.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error(\"extension name required\");if(\"renderer\"in i){let s=t.renderers[i.name];s?t.renderers[i.name]=function(...o){let a=i.renderer.apply(this,o);return a===!1&&(a=s.apply(this,o)),a}:t.renderers[i.name]=i.renderer}if(\"tokenizer\"in i){if(!i.level||i.level!==\"block\"&&i.level!==\"inline\")throw new Error(\"extension level must be 'block' or 'inline'\");let s=t[i.level];s?s.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level===\"block\"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level===\"inline\"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}\"childTokens\"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),r.extensions=t),n.renderer){let i=this.defaults.renderer||new P(this.defaults);for(let s in n.renderer){if(!(s in i))throw new Error(`renderer '${s}' does not exist`);if([\"options\",\"parser\"].includes(s))continue;let o=s,a=n.renderer[o],l=i[o];i[o]=(...c)=>{let p=a.apply(i,c);return p===!1&&(p=l.apply(i,c)),p||\"\"}}r.renderer=i}if(n.tokenizer){let i=this.defaults.tokenizer||new y(this.defaults);for(let s in n.tokenizer){if(!(s in i))throw new Error(`tokenizer '${s}' does not exist`);if([\"options\",\"rules\",\"lexer\"].includes(s))continue;let o=s,a=n.tokenizer[o],l=i[o];i[o]=(...c)=>{let p=a.apply(i,c);return p===!1&&(p=l.apply(i,c)),p}}r.tokenizer=i}if(n.hooks){let i=this.defaults.hooks||new S;for(let s in n.hooks){if(!(s in i))throw new Error(`hook '${s}' does not exist`);if([\"options\",\"block\"].includes(s))continue;let o=s,a=n.hooks[o],l=i[o];S.passThroughHooks.has(s)?i[o]=c=>{if(this.defaults.async&&S.passThroughHooksRespectAsync.has(s))return(async()=>{let g=await a.call(i,c);return l.call(i,g)})();let p=a.call(i,c);return l.call(i,p)}:i[o]=(...c)=>{if(this.defaults.async)return(async()=>{let g=await a.apply(i,c);return g===!1&&(g=await l.apply(i,c)),g})();let p=a.apply(i,c);return p===!1&&(p=l.apply(i,c)),p}}r.hooks=i}if(n.walkTokens){let i=this.defaults.walkTokens,s=n.walkTokens;r.walkTokens=function(o){let a=[];return a.push(s.call(this,o)),i&&(a=a.concat(i.call(this,o))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return x.lex(e,t??this.defaults)}parser(e,t){return b.parse(e,t??this.defaults)}parseMarkdown(e){return(n,r)=>{let i={...r},s={...this.defaults,...i},o=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&i.async===!1)return o(new Error(\"marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise.\"));if(typeof n>\"u\"||n===null)return o(new Error(\"marked(): input parameter is undefined or null\"));if(typeof n!=\"string\")return o(new Error(\"marked(): input parameter is of type \"+Object.prototype.toString.call(n)+\", string expected\"));if(s.hooks&&(s.hooks.options=s,s.hooks.block=e),s.async)return(async()=>{let a=s.hooks?await s.hooks.preprocess(n):n,c=await(s.hooks?await s.hooks.provideLexer():e?x.lex:x.lexInline)(a,s),p=s.hooks?await s.hooks.processAllTokens(c):c;s.walkTokens&&await Promise.all(this.walkTokens(p,s.walkTokens));let d=await(s.hooks?await s.hooks.provideParser():e?b.parse:b.parseInline)(p,s);return s.hooks?await s.hooks.postprocess(d):d})().catch(o);try{s.hooks&&(n=s.hooks.preprocess(n));let l=(s.hooks?s.hooks.provideLexer():e?x.lex:x.lexInline)(n,s);s.hooks&&(l=s.hooks.processAllTokens(l)),s.walkTokens&&this.walkTokens(l,s.walkTokens);let p=(s.hooks?s.hooks.provideParser():e?b.parse:b.parseInline)(l,s);return s.hooks&&(p=s.hooks.postprocess(p)),p}catch(a){return o(a)}}}onError(e,t){return n=>{if(n.message+=`\nPlease report this to https://github.com/markedjs/marked.`,e){let r=\"<p>An error occurred:</p><pre>\"+w(n.message+\"\",!0)+\"</pre>\";return t?Promise.resolve(r):r}if(t)return Promise.reject(n);throw n}}};var _=new B;function k(u,e){return _.parse(u,e)}k.options=k.setOptions=function(u){return _.setOptions(u),k.defaults=_.defaults,G(k.defaults),k};k.getDefaults=L;k.defaults=T;k.use=function(...u){return _.use(...u),k.defaults=_.defaults,G(k.defaults),k};k.walkTokens=function(u,e){return _.walkTokens(u,e)};k.parseInline=_.parseInline;k.Parser=b;k.parser=b.parse;k.Renderer=P;k.TextRenderer=$;k.Lexer=x;k.lexer=x.lex;k.Tokenizer=y;k.Hooks=S;k.parse=k;var Ht=k.options,Zt=k.setOptions,Gt=k.use,Nt=k.walkTokens,Ft=k.parseInline,jt=k,Qt=b.parse,Ut=x.lex;export{S as Hooks,x as Lexer,B as Marked,b as Parser,P as Renderer,$ as TextRenderer,y as Tokenizer,T as defaults,L as getDefaults,Ut as lexer,k as marked,Ht as options,jt as parse,Ft as parseInline,Qt as parser,Zt as setOptions,Gt as use,Nt as walkTokens};\n//# sourceMappingURL=marked.esm.js.map\n","<!--\n  MarkdownDisplay Component\n  Reusable component for rendering markdown content with consistent styling\n  Supports all standard markdown elements with proper typography\n-->\n\n<script lang=\"ts\">\n\timport { marked } from 'marked';\n\n\tinterface Props {\n\t\tcontent: string;\n\t\tclassName?: string;\n\t}\n\n\tlet props: Props = $props();\n\n\t// Parse markdown content\n\tlet renderedContent = $derived(marked.parse(props.content || ''));\n\n\t// Default class name if none provided\n\tlet displayClass = $derived(props.className || 'markdown-display');\n</script>\n\n<div class={displayClass}>\n\t<!-- marked.js sanitizes content by default to prevent XSS attacks -->\n\t<!-- eslint-disable-next-line svelte/no-at-html-tags -->\n\t{@html renderedContent}\n</div>\n","<script lang=\"ts\">\n\timport type { NodeConfig, NodeMetadata } from '../types/index.js';\n\timport Icon from '@iconify/svelte';\n\timport { createEventDispatcher } from 'svelte';\n\timport MarkdownDisplay from './MarkdownDisplay.svelte';\n\n\tconst dispatch = createEventDispatcher();\n\n\tconst props = $props<{\n\t\tdata: {\n\t\t\tlabel: string;\n\t\t\tconfig: NodeConfig;\n\t\t\tmetadata: NodeMetadata;\n\t\t\tnodeId?: string;\n\t\t\tonConfigOpen?: (node: {\n\t\t\t\tid: string;\n\t\t\t\ttype: string;\n\t\t\t\tdata: { label: string; config: NodeConfig; metadata: NodeMetadata };\n\t\t\t}) => void;\n\t\t};\n\t\tselected?: boolean;\n\t\tisProcessing?: boolean;\n\t\tisError?: boolean;\n\t\tisEditing?: boolean;\n\t}>();\n\n\t// Internal state for edit mode\n\tlet isInternalEditing = $state(false);\n\n\t// Reactive values that update when props change\n\tlet noteContent = $state((props.data.config?.content as string) || 'Add your notes here...');\n\tlet noteType = $state((props.data.config?.noteType as string) || 'info');\n\n\t// Update reactive values when props change\n\t$effect(() => {\n\t\tconst newContent = (props.data.config?.content as string) || 'Add your notes here...';\n\t\tconst newType = (props.data.config?.noteType as string) || 'info';\n\n\t\tif (noteContent !== newContent) {\n\t\t\tnoteContent = newContent;\n\t\t}\n\t\tif (noteType !== newType) {\n\t\t\tnoteType = newType;\n\t\t}\n\t});\n\n\t// Note type configuration\n\tconst noteTypes = {\n\t\tinfo: {\n\t\t\tname: 'Info',\n\t\t\tbgColor: 'bg-blue-50',\n\t\t\tborderColor: 'border-blue-200',\n\t\t\ttextColor: 'text-blue-800',\n\t\t\ticonColor: 'text-blue-500',\n\t\t\ticon: 'mdi:information'\n\t\t},\n\t\twarning: {\n\t\t\tname: 'Warning',\n\t\t\tbgColor: 'bg-yellow-50',\n\t\t\tborderColor: 'border-yellow-200',\n\t\t\ttextColor: 'text-yellow-800',\n\t\t\ticonColor: 'text-yellow-500',\n\t\t\ticon: 'mdi:alert'\n\t\t},\n\t\tsuccess: {\n\t\t\tname: 'Success',\n\t\t\tbgColor: 'bg-green-50',\n\t\t\tborderColor: 'border-green-200',\n\t\t\ttextColor: 'text-green-800',\n\t\t\ticonColor: 'text-green-500',\n\t\t\ticon: 'mdi:check-circle'\n\t\t},\n\t\terror: {\n\t\t\tname: 'Error',\n\t\t\tbgColor: 'bg-red-50',\n\t\t\tborderColor: 'border-red-200',\n\t\t\ttextColor: 'text-red-800',\n\t\t\ticonColor: 'text-red-500',\n\t\t\ticon: 'mdi:close-circle'\n\t\t},\n\t\tnote: {\n\t\t\tname: 'Note',\n\t\t\tbgColor: 'bg-gray-50',\n\t\t\tborderColor: 'border-gray-200',\n\t\t\ttextColor: 'text-gray-800',\n\t\t\ticonColor: 'text-gray-500',\n\t\t\ticon: 'mdi:note-text'\n\t\t}\n\t};\n\n\t// Reactive derived values\n\tlet currentType = $derived(noteTypes[noteType as keyof typeof noteTypes] || noteTypes.info);\n\n\t// Handle content updates\n\tfunction handleContentChange(event: Event) {\n\t\tconst target = event.target as HTMLTextAreaElement;\n\t\tnoteContent = target.value;\n\t\tif (props.data.config) {\n\t\t\tprops.data.config.content = target.value;\n\t\t\t// Dispatch event to notify parent of config change\n\t\t\tdispatch('configChange', { config: props.data.config });\n\t\t}\n\t}\n\n\t// Handle note type changes\n\tfunction handleTypeChange(event: Event) {\n\t\tconst target = event.target as HTMLSelectElement;\n\t\tnoteType = target.value;\n\t\tif (props.data.config) {\n\t\t\tprops.data.config.noteType = target.value;\n\t\t\t// Dispatch event to notify parent of config change\n\t\t\tdispatch('configChange', { config: props.data.config });\n\t\t}\n\t}\n\n\t// Toggle edit mode\n\tfunction toggleEditMode() {\n\t\tisInternalEditing = !isInternalEditing;\n\t\t// Dispatch event to notify parent of state change\n\t\tdispatch('editModeChange', { isEditing: isInternalEditing });\n\t}\n\n\t// Handle configuration sidebar - now using global ConfigSidebar\n\tfunction openConfigSidebar(): void {\n\t\tif (props.data.onConfigOpen) {\n\t\t\t// Create a WorkflowNodeType-like object for the global ConfigSidebar\n\t\t\tconst nodeForConfig = {\n\t\t\t\tid: props.data.nodeId || 'unknown',\n\t\t\t\ttype: 'note',\n\t\t\t\tdata: props.data\n\t\t\t};\n\t\t\tprops.data.onConfigOpen(nodeForConfig);\n\t\t}\n\t}\n\n\t// Handle node click - only handle selection, no config opening\n\tfunction handleNodeClick(): void {\n\t\t// Node selection is handled by Svelte Flow\n\t}\n\n\t// Handle double-click to open config\n\tfunction handleDoubleClick(): void {\n\t\topenConfigSidebar();\n\t}\n\n\t// Handle keyboard events\n\tfunction handleKeydown(event: KeyboardEvent): void {\n\t\tif (event.key === 'Enter' || event.key === ' ') {\n\t\t\tevent.preventDefault();\n\t\t\thandleDoubleClick();\n\t\t}\n\t}\n</script>\n\n<div\n\tclass=\"flowdrop-notes-node {currentType.bgColor}\"\n\tclass:flowdrop-notes-node--selected={props.selected}\n\tclass:flowdrop-notes-node--processing={props.isProcessing}\n\tclass:flowdrop-notes-node--error={props.isError}\n\tonclick={handleNodeClick}\n\tondblclick={handleDoubleClick}\n\tonkeydown={handleKeydown}\n\trole=\"button\"\n\ttabindex=\"0\"\n>\n\t{#if isInternalEditing || props.isEditing}\n\t\t<!-- Edit Mode -->\n\t\t<div class=\"flowdrop-notes-node__edit\">\n\t\t\t<!-- Note Type Selector -->\n\t\t\t<div class=\"flowdrop-notes-node__type-selector\">\n\t\t\t\t<label for=\"note-type\" class=\"flowdrop-notes-node__label\">Note Type:</label>\n\t\t\t\t<select\n\t\t\t\t\tid=\"note-type\"\n\t\t\t\t\tclass=\"flowdrop-notes-node__select\"\n\t\t\t\t\tvalue={noteType}\n\t\t\t\t\tonchange={handleTypeChange}\n\t\t\t\t>\n\t\t\t\t\t{#each Object.entries(noteTypes) as [key, type] (key)}\n\t\t\t\t\t\t<option value={key}>{type.name}</option>\n\t\t\t\t\t{/each}\n\t\t\t\t</select>\n\t\t\t</div>\n\n\t\t\t<!-- Markdown Textarea -->\n\t\t\t<div class=\"flowdrop-notes-node__textarea-container\">\n\t\t\t\t<label for=\"note-content\" class=\"flowdrop-notes-node__label\">Content (Markdown):</label>\n\t\t\t\t<textarea\n\t\t\t\t\tid=\"note-content\"\n\t\t\t\t\tclass=\"flowdrop-notes-node__textarea\"\n\t\t\t\t\tplaceholder=\"Write your note in Markdown...\"\n\t\t\t\t\tvalue={noteContent}\n\t\t\t\t\toninput={handleContentChange}\n\t\t\t\t></textarea>\n\t\t\t</div>\n\n\t\t\t<!-- Save/Cancel Buttons -->\n\t\t\t<div class=\"flowdrop-notes-node__edit-actions\">\n\t\t\t\t<button\n\t\t\t\t\tclass=\"flowdrop-notes-node__btn flowdrop-notes-node__btn--save\"\n\t\t\t\t\tonclick={toggleEditMode}\n\t\t\t\t>\n\t\t\t\t\t<Icon icon=\"mdi:check\" />\n\t\t\t\t\tSave\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"flowdrop-notes-node__btn flowdrop-notes-node__btn--cancel\"\n\t\t\t\t\tonclick={toggleEditMode}\n\t\t\t\t>\n\t\t\t\t\t<Icon icon=\"mdi:close\" />\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t{:else}\n\t\t<!-- Display Mode -->\n\t\t<div class=\"flowdrop-notes-node__content {currentType.borderColor} {currentType.textColor}\">\n\t\t\t<!-- Header with icon, type, and edit button -->\n\t\t\t<div class=\"flowdrop-notes-node__header\">\n\t\t\t\t<div class=\"flowdrop-notes-node__header-left\">\n\t\t\t\t\t<Icon icon={currentType.icon} class=\"flowdrop-notes-node__icon {currentType.iconColor}\" />\n\t\t\t\t\t<span class=\"flowdrop-notes-node__type\">{currentType.name}</span>\n\t\t\t\t</div>\n\t\t\t\t<button class=\"flowdrop-notes-node__edit-btn\" onclick={toggleEditMode} title=\"Edit note\">\n\t\t\t\t\t<Icon icon=\"mdi:pencil\" />\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<!-- Rendered markdown content -->\n\t\t\t<div class=\"flowdrop-notes-node__body\">\n\t\t\t\t<MarkdownDisplay content={noteContent} className=\"flowdrop-notes-node__markdown\" />\n\t\t\t</div>\n\n\t\t\t<!-- Processing indicator -->\n\t\t\t{#if props.isProcessing}\n\t\t\t\t<div class=\"flowdrop-notes-node__processing\">\n\t\t\t\t\t<div class=\"flowdrop-notes-node__spinner\"></div>\n\t\t\t\t\t<span>Processing...</span>\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<!-- Error indicator -->\n\t\t\t{#if props.isError}\n\t\t\t\t<div class=\"flowdrop-notes-node__error\">\n\t\t\t\t\t<Icon icon=\"mdi:alert-circle\" class=\"flowdrop-notes-node__error-icon\" />\n\t\t\t\t\t<span>Error occurred</span>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t{/if}\n\n\t<!-- Config button -->\n\t<button\n\t\tclass=\"flowdrop-notes-node__config-btn\"\n\t\tonclick={openConfigSidebar}\n\t\ttitle=\"Configure note\"\n\t>\n\t\t<Icon icon=\"mdi:cog\" />\n\t</button>\n</div>\n\n<!-- Configuration Sidebar -->\n<!-- ConfigSidebar removed - now using global ConfigSidebar in WorkflowEditor -->\n\n<style>\n\t.flowdrop-notes-node {\n\t\tmin-width: var(--notes-node-min-width);\n\t\tmax-width: var(--notes-node-max-width);\n\t\twidth: var(--notes-node-width);\n\t\tborder-radius: var(--notes-node-border-radius);\n\t\tborder: 1px solid;\n\t\tbackground: var(--notes-node-background);\n\t\tbackdrop-filter: var(--notes-node-backdrop-filter);\n\t\tbox-shadow: var(--notes-node-box-shadow);\n\t\ttransition: var(--notes-node-transition);\n\t\toverflow: hidden;\n\t\tz-index: 5;\n\t}\n\n\t/* Background color overrides for different note types */\n\t.flowdrop-notes-node.bg-blue-50 {\n\t\tbackground-color: var(--notes-node-info-bg);\n\t\tborder-color: var(--notes-node-info-border);\n\t}\n\n\t.flowdrop-notes-node.bg-yellow-50 {\n\t\tbackground-color: var(--notes-node-warning-bg);\n\t\tborder-color: var(--notes-node-warning-border);\n\t}\n\n\t.flowdrop-notes-node.bg-green-50 {\n\t\tbackground-color: var(--notes-node-success-bg);\n\t\tborder-color: var(--notes-node-success-border);\n\t}\n\n\t.flowdrop-notes-node.bg-red-50 {\n\t\tbackground-color: var(--notes-node-error-bg);\n\t\tborder-color: var(--notes-node-error-border);\n\t}\n\n\t.flowdrop-notes-node.bg-gray-50 {\n\t\tbackground-color: var(--notes-node-note-bg);\n\t\tborder-color: var(--notes-node-note-border);\n\t}\n\n\t.flowdrop-notes-node:hover {\n\t\tbox-shadow: var(--notes-node-hover-box-shadow);\n\t\ttransform: translateY(-1px);\n\t}\n\n\t.flowdrop-notes-node--selected {\n\t\tbox-shadow: var(--notes-node-selected-box-shadow);\n\t}\n\n\t.flowdrop-notes-node--processing {\n\t\topacity: 0.7;\n\t}\n\n\t.flowdrop-notes-node--error {\n\t\tborder-color: #ef4444 !important;\n\t}\n\n\t/* Edit Mode Styles */\n\t.flowdrop-notes-node__edit {\n\t\tpadding: var(--notes-node-padding);\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t.flowdrop-notes-node__type-selector {\n\t\tmargin-bottom: 1rem;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-notes-node__label {\n\t\tdisplay: block;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 600;\n\t\tmargin-bottom: 0.5rem;\n\t\tcolor: #374151;\n\t}\n\n\t.flowdrop-notes-node__select {\n\t\twidth: 100%;\n\t\tpadding: 0.5rem;\n\t\tborder: 1px solid #d1d5db;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\tbackground-color: white;\n\t}\n\n\t.flowdrop-notes-node__textarea-container {\n\t\tmargin-bottom: 1rem;\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t.flowdrop-notes-node__textarea {\n\t\twidth: 100%;\n\t\tmin-height: 120px;\n\t\tflex: 1;\n\t\tpadding: 0.75rem;\n\t\tborder: 1px solid #d1d5db;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\tfont-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n\t\tline-height: 1.5;\n\t\tresize: none; /* Prevent resizing to maintain consistent size */\n\t\tbackground-color: white;\n\t}\n\n\t.flowdrop-notes-node__textarea:focus {\n\t\toutline: none;\n\t\tborder-color: #3b82f6;\n\t\tbox-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n\t}\n\n\t.flowdrop-notes-node__edit-actions {\n\t\tdisplay: flex;\n\t\tgap: 0.5rem;\n\t\tmargin-top: 1rem;\n\t\tjustify-content: flex-end;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-notes-node__btn {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.25rem;\n\t\tpadding: 0.5rem 1rem;\n\t\tborder: 1px solid;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease-in-out;\n\t}\n\n\t.flowdrop-notes-node__btn--save {\n\t\tbackground-color: #10b981;\n\t\tborder-color: #10b981;\n\t\tcolor: white;\n\t}\n\n\t.flowdrop-notes-node__btn--save:hover {\n\t\tbackground-color: #059669;\n\t\tborder-color: #059669;\n\t}\n\n\t.flowdrop-notes-node__btn--cancel {\n\t\tbackground-color: transparent;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n\n\t.flowdrop-notes-node__btn--cancel:hover {\n\t\tbackground-color: #f3f4f6;\n\t\tborder-color: #9ca3af;\n\t}\n\n\t/* Display Mode Styles */\n\t.flowdrop-notes-node__content {\n\t\tpadding: var(--notes-node-padding);\n\t\tborder-radius: var(--notes-node-border-radius);\n\t\tborder: 1px solid;\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t.flowdrop-notes-node__header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tmargin-bottom: 0.75rem;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-notes-node__header-left {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t}\n\n\t.flowdrop-notes-node__edit-btn {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 2rem;\n\t\theight: 2rem;\n\t\tborder: none;\n\t\tbackground: transparent;\n\t\tcolor: currentColor;\n\t\topacity: 0.7;\n\t\tcursor: pointer;\n\t\tborder-radius: 0.25rem;\n\t\ttransition: all 0.2s ease-in-out;\n\t}\n\n\t.flowdrop-notes-node__edit-btn:hover {\n\t\topacity: 1;\n\t\tbackground-color: rgba(0, 0, 0, 0.1);\n\t}\n\n\t.flowdrop-notes-node__icon {\n\t\twidth: 1.75rem;\n\t\theight: 1.75rem;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-notes-node__type {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 600;\n\t}\n\n\t.flowdrop-notes-node__body {\n\t\tmargin-bottom: 0.5rem;\n\t\tflex: 1;\n\t\toverflow-y: auto;\n\t}\n\n\t.flowdrop-notes-node__processing {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tfont-size: 0.75rem;\n\t\topacity: 0.7;\n\t}\n\n\t.flowdrop-notes-node__spinner {\n\t\twidth: 0.75rem;\n\t\theight: 0.75rem;\n\t\tborder: 1px solid currentColor;\n\t\tborder-top-color: transparent;\n\t\tborder-radius: 50%;\n\t\tanimation: spin 1s linear infinite;\n\t}\n\n\t.flowdrop-notes-node__error {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tfont-size: 0.75rem;\n\t\tcolor: #ef4444;\n\t}\n\n\t.flowdrop-notes-node__error-icon {\n\t\twidth: 0.75rem;\n\t\theight: 0.75rem;\n\t}\n\n\t@keyframes spin {\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t.flowdrop-notes-node__config-btn {\n\t\tposition: absolute;\n\t\ttop: 0.5rem;\n\t\tright: 0.5rem;\n\t\twidth: 1.5rem;\n\t\theight: 1.5rem;\n\t\tbackground-color: rgba(255, 255, 255, 0.9);\n\t\tborder: 1px solid #e5e7eb;\n\t\tborder-radius: 0.25rem;\n\t\tcolor: #6b7280;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\topacity: 0;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tbackdrop-filter: blur(4px);\n\t\tz-index: 15;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.flowdrop-notes-node:hover .flowdrop-notes-node__config-btn {\n\t\topacity: 1;\n\t}\n\n\t.flowdrop-notes-node__config-btn:hover {\n\t\tbackground-color: #f9fafb;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n\n\t/* Responsive design */\n\t@media (max-width: 640px) {\n\t\t.flowdrop-notes-node {\n\t\t\tmin-width: 200px;\n\t\t\tmax-width: 350px;\n\t\t}\n\n\t\t.flowdrop-notes-node__edit,\n\t\t.flowdrop-notes-node__content {\n\t\t\tpadding: 0.75rem;\n\t\t}\n\n\t\t.flowdrop-notes-node__textarea {\n\t\t\tmin-height: 100px;\n\t\t}\n\t}\n</style>\n","<!--\n  Simple Node Component\n  A simple node with optional input and output ports\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport { Position, Handle } from '@xyflow/svelte';\n\timport type { NodeConfig, NodeMetadata } from '../types/index.js';\n\timport Icon from '@iconify/svelte';\n\timport { getDataTypeColor } from '../utils/colors.js';\n\n\tconst props = $props<{\n\t\tdata: {\n\t\t\tlabel: string;\n\t\t\tconfig: NodeConfig;\n\t\t\tmetadata: NodeMetadata;\n\t\t\tnodeId?: string;\n\t\t\tonConfigOpen?: (node: {\n\t\t\t\tid: string;\n\t\t\t\ttype: string;\n\t\t\t\tdata: { label: string; config: NodeConfig; metadata: NodeMetadata };\n\t\t\t}) => void;\n\t\t};\n\t\tselected?: boolean;\n\t\tisProcessing?: boolean;\n\t\tisError?: boolean;\n\t}>();\n\n\t// Removed local config state - now using global ConfigSidebar\n\n\t// Prioritize metadata icon over config icon for simple nodes (metadata is the node definition)\n\tlet nodeIcon = $derived(\n\t\t(props.data.metadata?.icon as string) || (props.data.config?.icon as string) || 'mdi:square'\n\t);\n\tlet nodeColor = $derived(\n\t\t(props.data.metadata?.color as string) || (props.data.config?.color as string) || '#6366f1'\n\t);\n\tlet nodeLayout = $derived((props.data.config?.layout as string) || 'normal');\n\n\t// Layout configurations\n\tconst layoutConfig = {\n\t\tcompact: {\n\t\t\twidth: '80px',\n\t\t\theight: '80px',\n\t\t\ticonSize: '2rem',\n\t\t\tshowHeader: false\n\t\t},\n\t\tnormal: {\n\t\t\twidth: '18rem',\n\t\t\theight: 'auto',\n\t\t\ticonSize: '1rem',\n\t\t\tshowHeader: true\n\t\t}\n\t};\n\n\tlet currentLayout = $derived(\n\t\tlayoutConfig[nodeLayout as keyof typeof layoutConfig] || layoutConfig.normal\n\t);\n\tlet isCompact = $derived(nodeLayout === 'compact');\n\n\t// Handle configuration sidebar - now using global ConfigSidebar\n\tfunction openConfigSidebar(): void {\n\t\tif (props.data.onConfigOpen) {\n\t\t\t// Create a WorkflowNodeType-like object for the global ConfigSidebar\n\t\t\tconst nodeForConfig = {\n\t\t\t\tid: props.data.nodeId || 'unknown',\n\t\t\t\ttype: 'simple',\n\t\t\t\tdata: props.data\n\t\t\t};\n\t\t\tprops.data.onConfigOpen(nodeForConfig);\n\t\t}\n\t}\n\n\t// Handle double-click to open config\n\tfunction handleDoubleClick(): void {\n\t\topenConfigSidebar();\n\t}\n\n\t// Handle single click - only handle selection, no config opening\n\tfunction handleClick(): void {\n\t\t// Node selection is handled by Svelte Flow\n\t}\n\n\t// Handle keyboard events\n\tfunction handleKeydown(event: KeyboardEvent): void {\n\t\tif (event.key === 'Enter' || event.key === ' ') {\n\t\t\tevent.preventDefault();\n\t\t\thandleDoubleClick();\n\t\t}\n\t}\n\n\t// Get first input/output ports for simple node representation\n\t// Special handling for trigger ports - they should always be shown if present\n\tlet triggerInputPort = $derived(\n\t\tprops.data.metadata?.inputs?.find((port) => port.dataType === 'trigger')\n\t);\n\tlet triggerOutputPort = $derived(\n\t\tprops.data.metadata?.outputs?.find((port) => port.dataType === 'trigger')\n\t);\n\n\t// Get first non-trigger ports for data connections\n\tlet firstDataInputPort = $derived(\n\t\tprops.data.metadata?.inputs?.find((port) => port.dataType !== 'trigger')\n\t);\n\tlet firstDataOutputPort = $derived(\n\t\tprops.data.metadata?.outputs?.find((port) => port.dataType !== 'trigger')\n\t);\n\n\t// Check if we need to show both trigger and data ports\n\tlet hasBothInputTypes = $derived(!!triggerInputPort && !!firstDataInputPort);\n\tlet hasBothOutputTypes = $derived(!!triggerOutputPort && !!firstDataOutputPort);\n</script>\n\n<!-- Input Handles -->\n{#if firstDataInputPort}\n\t<!-- Data Input - positioned at top-left if both types exist, otherwise center -->\n\t<Handle\n\t\ttype=\"target\"\n\t\tposition={Position.Left}\n\t\tstyle=\"background-color: {getDataTypeColor(\n\t\t\tfirstDataInputPort.dataType\n\t\t)}; border-color: '#ffffff'; top: {hasBothInputTypes ? '25%' : '50%'}; z-index: 30;\"\n\t\tid={`${props.data.nodeId}-input-${firstDataInputPort.id}`}\n\t/>\n{/if}\n{#if triggerInputPort}\n\t<!-- Trigger Input - positioned at bottom-left -->\n\t<Handle\n\t\ttype=\"target\"\n\t\tposition={Position.Left}\n\t\tstyle=\"background-color: {getDataTypeColor(\n\t\t\ttriggerInputPort.dataType\n\t\t)}; border-color: '#ffffff'; top: {hasBothInputTypes ? '75%' : '50%'}; z-index: 30;\"\n\t\tid={`${props.data.nodeId}-input-${triggerInputPort.id}`}\n\t/>\n{/if}\n\n<!-- Simple Node -->\n<div\n\tclass=\"flowdrop-simple-node\"\n\tclass:flowdrop-simple-node--compact={isCompact}\n\tclass:flowdrop-simple-node--normal={!isCompact}\n\tclass:flowdrop-simple-node--selected={props.selected}\n\tclass:flowdrop-simple-node--processing={props.isProcessing}\n\tclass:flowdrop-simple-node--error={props.isError}\n\tonclick={handleClick}\n\tondblclick={handleDoubleClick}\n\tonkeydown={handleKeydown}\n\trole=\"button\"\n\ttabindex=\"0\"\n>\n\t{#if isCompact}\n\t\t<!-- Compact Layout: Just centered icon -->\n\t\t<div class=\"flowdrop-simple-node__compact-content\">\n\t\t\t<Icon\n\t\t\t\ticon={nodeIcon}\n\t\t\t\tclass=\"flowdrop-simple-node__compact-icon\"\n\t\t\t\tstyle=\"color: {nodeColor}; font-size: {currentLayout.iconSize};\"\n\t\t\t/>\n\t\t</div>\n\t{:else}\n\t\t<!-- Normal Layout: Header with title and description -->\n\t\t<div class=\"flowdrop-simple-node__header\">\n\t\t\t<div class=\"flowdrop-simple-node__header-content\">\n\t\t\t\t<!-- Node Icon -->\n\t\t\t\t<div class=\"flowdrop-simple-node__icon-container\" style=\"background-color: {nodeColor}\">\n\t\t\t\t\t<Icon icon={nodeIcon} class=\"flowdrop-simple-node__icon\" />\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Node Title -->\n\t\t\t\t<h3 class=\"flowdrop-simple-node__title\">\n\t\t\t\t\t{props.data.label}\n\t\t\t\t</h3>\n\t\t\t</div>\n\n\t\t\t<!-- Node Description -->\n\t\t\t<p class=\"flowdrop-simple-node__description\">\n\t\t\t\t{props.data.metadata?.description || 'A configurable simple node'}\n\t\t\t</p>\n\t\t</div>\n\t{/if}\n\n\t<!-- Processing indicator -->\n\t{#if props.isProcessing}\n\t\t<div class=\"flowdrop-simple-node__processing\">\n\t\t\t<div class=\"flowdrop-simple-node__spinner\"></div>\n\t\t</div>\n\t{/if}\n\n\t<!-- Error indicator -->\n\t{#if props.isError}\n\t\t<div class=\"flowdrop-simple-node__error\">\n\t\t\t<Icon icon=\"mdi:alert-circle\" class=\"flowdrop-simple-node__error-icon\" />\n\t\t</div>\n\t{/if}\n\n\t<!-- Config button -->\n\t<button\n\t\tclass=\"flowdrop-simple-node__config-btn\"\n\t\tonclick={openConfigSidebar}\n\t\ttitle=\"Configure node\"\n\t>\n\t\t<Icon icon=\"mdi:cog\" />\n\t</button>\n</div>\n\n<!-- Output Handles -->\n{#if firstDataOutputPort}\n\t<!-- Data Output - positioned at top-right if both types exist, otherwise center -->\n\t<Handle\n\t\ttype=\"source\"\n\t\tposition={Position.Right}\n\t\tid={`${props.data.nodeId}-output-${firstDataOutputPort.id}`}\n\t\tstyle=\"background-color: {getDataTypeColor(\n\t\t\tfirstDataOutputPort.dataType\n\t\t)}; border-color: '#ffffff'; top: {hasBothOutputTypes ? '25%' : '50%'}; z-index: 30;\"\n\t/>\n{/if}\n{#if triggerOutputPort}\n\t<!-- Trigger Output - positioned at bottom-right -->\n\t<Handle\n\t\ttype=\"source\"\n\t\tposition={Position.Right}\n\t\tid={`${props.data.nodeId}-output-${triggerOutputPort.id}`}\n\t\tstyle=\"background-color: {getDataTypeColor(\n\t\t\ttriggerOutputPort.dataType\n\t\t)}; border-color: '#ffffff'; top: {hasBothOutputTypes ? '75%' : '50%'}; z-index: 30;\"\n\t/>\n{/if}\n\n<!-- ConfigSidebar removed - now using global ConfigSidebar in WorkflowEditor -->\n\n<style>\n\t.flowdrop-simple-node {\n\t\tposition: relative;\n\t\tbackground-color: #ffffff;\n\t\tborder: 2px solid #e5e7eb;\n\t\tborder-radius: 0.75rem;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tbox-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n\t\toverflow: visible; /* Changed from hidden to visible to allow handles to be properly accessible */\n\t\tz-index: 10;\n\t}\n\n\t/* Normal layout (default) */\n\t.flowdrop-simple-node--normal {\n\t\twidth: 18rem;\n\t}\n\n\t/* Compact layout */\n\t.flowdrop-simple-node--compact {\n\t\twidth: 80px;\n\t\theight: 80px;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-simple-node:hover {\n\t\tbox-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n\t}\n\n\t.flowdrop-simple-node--selected {\n\t\tbox-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n\t\tborder: 2px solid #3b82f6;\n\t}\n\n\t.flowdrop-simple-node--processing {\n\t\topacity: 0.7;\n\t}\n\n\t.flowdrop-simple-node--error {\n\t\tborder-color: #ef4444 !important;\n\t\tbackground-color: #fef2f2 !important;\n\t}\n\n\t.flowdrop-simple-node__header {\n\t\tpadding: 1rem;\n\t\tbackground-color: #f9fafb;\n\t\tborder-radius: 0.75rem;\n\t}\n\n\t.flowdrop-simple-node__header-content {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.75rem;\n\t}\n\n\t.flowdrop-simple-node__icon-container {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 2rem;\n\t\theight: 2rem;\n\t\tborder-radius: 0.375rem;\n\t\tflex-shrink: 0;\n\t}\n\n\t/* Compact layout styles */\n\t.flowdrop-simple-node__compact-content {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t:global(.flowdrop-simple-node__compact-icon) {\n\t\tfilter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));\n\t}\n\n\t.flowdrop-simple-node__title {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcolor: #1f2937;\n\t\tmargin: 0;\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t\tline-height: 1.4;\n\t}\n\n\t.flowdrop-simple-node__description {\n\t\tfont-size: 0.75rem;\n\t\tcolor: #6b7280;\n\t\tmargin: 0.25rem 0 0 0;\n\t\tline-height: 1.3;\n\t}\n\n\t/* Compact layout text constraints */\n\t.flowdrop-simple-node--compact .flowdrop-simple-node__title {\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.flowdrop-simple-node--compact .flowdrop-simple-node__description {\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t:global(.flowdrop-simple-node__icon) {\n\t\tcolor: white;\n\t\tfont-size: 1rem;\n\t\tfilter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));\n\t}\n\n\t/* Label styling removed - now using header title */\n\n\t.flowdrop-simple-node__processing {\n\t\tposition: absolute;\n\t\ttop: 4px;\n\t\tright: 4px;\n\t}\n\n\t.flowdrop-simple-node__spinner {\n\t\twidth: 12px;\n\t\theight: 12px;\n\t\tborder: 1px solid rgba(255, 255, 255, 0.3);\n\t\tborder-top: 1px solid white;\n\t\tborder-radius: 50%;\n\t\tanimation: spin 1s linear infinite;\n\t}\n\n\t.flowdrop-simple-node__error {\n\t\tposition: absolute;\n\t\ttop: 4px;\n\t\tright: 4px;\n\t\tcolor: #ef4444;\n\t}\n\n\t:global(.flowdrop-simple-node__error-icon) {\n\t\twidth: 12px;\n\t\theight: 12px;\n\t}\n\n\t.flowdrop-simple-node__config-btn {\n\t\tposition: absolute;\n\t\ttop: 0.5rem;\n\t\tright: 0.5rem;\n\t\twidth: 1.5rem;\n\t\theight: 1.5rem;\n\t\tbackground-color: rgba(255, 255, 255, 0.9);\n\t\tborder: 1px solid #e5e7eb;\n\t\tborder-radius: 0.25rem;\n\t\tcolor: #6b7280;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\topacity: 0;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tbackdrop-filter: blur(4px);\n\t\tz-index: 15;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.flowdrop-simple-node:hover .flowdrop-simple-node__config-btn {\n\t\topacity: 1;\n\t}\n\n\t.flowdrop-simple-node__config-btn:hover {\n\t\tbackground-color: #f9fafb;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n\n\t@keyframes spin {\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t/* Handle styles - matching WorkflowNode exactly */\n\t:global(.svelte-flow__node-simple .svelte-flow__handle) {\n\t\twidth: 18px !important;\n\t\theight: 18px !important;\n\t\tborder-radius: 50% !important;\n\t\ttransition: all 0.2s ease-in-out !important;\n\t\tcursor: pointer !important;\n\t\tz-index: 20 !important;\n\t\tpointer-events: auto !important;\n\t}\n\n\t:global(.svelte-flow__node-simple .svelte-flow__handle-left) {\n\t\tleft: -6px !important;\n\t}\n\n\t:global(.svelte-flow__node-simple .svelte-flow__handle-right) {\n\t\tright: -6px !important;\n\t}\n\n\t:global(.svelte-flow__node-simple .svelte-flow__handle:focus) {\n\t\toutline: 2px solid #3b82f6 !important;\n\t\toutline-offset: 2px !important;\n\t}\n</style>\n","<!--\n  Square Node Component\n  A simple square node with optional input and output ports\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport { Position, Handle } from '@xyflow/svelte';\n\timport type { NodeConfig, NodeMetadata } from '../types/index.js';\n\timport Icon from '@iconify/svelte';\n\timport { getDataTypeColor } from '../utils/colors.js';\n\n\tconst props = $props<{\n\t\tdata: {\n\t\t\tlabel: string;\n\t\t\tconfig: NodeConfig;\n\t\t\tmetadata: NodeMetadata;\n\t\t\tnodeId?: string;\n\t\t\tonConfigOpen?: (node: {\n\t\t\t\tid: string;\n\t\t\t\ttype: string;\n\t\t\t\tdata: { label: string; config: NodeConfig; metadata: NodeMetadata };\n\t\t\t}) => void;\n\t\t};\n\t\tselected?: boolean;\n\t\tisProcessing?: boolean;\n\t\tisError?: boolean;\n\t}>();\n\n\t// Removed local config state - now using global ConfigSidebar\n\n\t// Prioritize metadata icon over config icon for square nodes (metadata is the node definition)\n\tlet squareIcon = $derived(\n\t\t(props.data.metadata?.icon as string) || (props.data.config?.icon as string) || 'mdi:square'\n\t);\n\tlet squareColor = $derived(\n\t\t(props.data.metadata?.color as string) || (props.data.config?.color as string) || '#6366f1'\n\t);\n\n\t// Layout configuration for square nodes (always compact)\n\tconst currentLayout = {\n\t\twidth: '80px',\n\t\theight: '80px',\n\t\ticonSize: '2rem',\n\t\tshowHeader: false\n\t};\n\n\t// Handle configuration sidebar - now using global ConfigSidebar\n\tfunction openConfigSidebar(): void {\n\t\tif (props.data.onConfigOpen) {\n\t\t\t// Create a WorkflowNodeType-like object for the global ConfigSidebar\n\t\t\tconst nodeForConfig = {\n\t\t\t\tid: props.data.nodeId || 'unknown',\n\t\t\t\ttype: 'square',\n\t\t\t\tdata: props.data\n\t\t\t};\n\t\t\tprops.data.onConfigOpen(nodeForConfig);\n\t\t}\n\t}\n\n\t// Handle double-click to open config\n\tfunction handleDoubleClick(): void {\n\t\topenConfigSidebar();\n\t}\n\n\t// Handle single click to open config\n\tfunction handleClick(): void {\n\t\topenConfigSidebar();\n\t}\n\n\t// Handle keyboard events\n\tfunction handleKeydown(event: KeyboardEvent): void {\n\t\tif (event.key === 'Enter' || event.key === ' ') {\n\t\t\tevent.preventDefault();\n\t\t\topenConfigSidebar();\n\t\t}\n\t}\n\n\t// Get first input/output ports for square node representation\n\t// Special handling for trigger ports - they should always be shown if present\n\tlet triggerInputPort = $derived(\n\t\tprops.data.metadata?.inputs?.find((port) => port.dataType === 'trigger')\n\t);\n\tlet triggerOutputPort = $derived(\n\t\tprops.data.metadata?.outputs?.find((port) => port.dataType === 'trigger')\n\t);\n\n\t// Get first non-trigger ports for data connections\n\tlet firstDataInputPort = $derived(\n\t\tprops.data.metadata?.inputs?.find((port) => port.dataType !== 'trigger')\n\t);\n\tlet firstDataOutputPort = $derived(\n\t\tprops.data.metadata?.outputs?.find((port) => port.dataType !== 'trigger')\n\t);\n\n\t// Check if we need to show both trigger and data ports\n\tlet hasBothInputTypes = $derived(!!triggerInputPort && !!firstDataInputPort);\n\tlet hasBothOutputTypes = $derived(!!triggerOutputPort && !!firstDataOutputPort);\n</script>\n\n<!-- Input Handles -->\n{#if firstDataInputPort}\n\t<!-- Data Input - positioned at top-left if both types exist, otherwise center -->\n\t<Handle\n\t\ttype=\"target\"\n\t\tposition={Position.Left}\n\t\tstyle=\"background-color: {getDataTypeColor(\n\t\t\tfirstDataInputPort.dataType\n\t\t)}; border-color: '#ffffff'; top: {hasBothInputTypes ? '25%' : '50%'}; z-index: 30;\"\n\t\tid={`${props.data.nodeId}-input-${firstDataInputPort.id}`}\n\t/>\n{/if}\n{#if triggerInputPort}\n\t<!-- Trigger Input - positioned at bottom-left -->\n\t<Handle\n\t\ttype=\"target\"\n\t\tposition={Position.Left}\n\t\tstyle=\"background-color: {getDataTypeColor(\n\t\t\ttriggerInputPort.dataType\n\t\t)}; border-color: '#ffffff'; top: {hasBothInputTypes ? '75%' : '50%'}; z-index: 30;\"\n\t\tid={`${props.data.nodeId}-input-${triggerInputPort.id}`}\n\t/>\n{/if}\n\n<!-- Square Node -->\n<div\n\tclass=\"flowdrop-square-node flowdrop-square-node--compact\"\n\tclass:flowdrop-square-node--selected={props.selected}\n\tclass:flowdrop-square-node--processing={props.isProcessing}\n\tclass:flowdrop-square-node--error={props.isError}\n\tonclick={handleClick}\n\tondblclick={handleDoubleClick}\n\tonkeydown={handleKeydown}\n\trole=\"button\"\n\ttabindex=\"0\"\n>\n\t<!-- Square Layout: Always compact with centered icon -->\n\t<div class=\"flowdrop-square-node__compact-content\">\n\t\t<Icon\n\t\t\ticon={squareIcon}\n\t\t\tclass=\"flowdrop-square-node__compact-icon\"\n\t\t\tstyle=\"color: {squareColor}; font-size: {currentLayout.iconSize};\"\n\t\t/>\n\t</div>\n\n\t<!-- Processing indicator -->\n\t{#if props.isProcessing}\n\t\t<div class=\"flowdrop-square-node__processing\">\n\t\t\t<div class=\"flowdrop-square-node__spinner\"></div>\n\t\t</div>\n\t{/if}\n\n\t<!-- Error indicator -->\n\t{#if props.isError}\n\t\t<div class=\"flowdrop-square-node__error\">\n\t\t\t<Icon icon=\"mdi:alert-circle\" class=\"flowdrop-square-node__error-icon\" />\n\t\t</div>\n\t{/if}\n\n\t<!-- Config button -->\n\t<button\n\t\tclass=\"flowdrop-square-node__config-btn\"\n\t\tonclick={openConfigSidebar}\n\t\ttitle=\"Configure node\"\n\t>\n\t\t<Icon icon=\"mdi:cog\" />\n\t</button>\n</div>\n\n<!-- Output Handles -->\n{#if firstDataOutputPort}\n\t<!-- Data Output - positioned at top-right if both types exist, otherwise center -->\n\t<Handle\n\t\ttype=\"source\"\n\t\tposition={Position.Right}\n\t\tid={`${props.data.nodeId}-output-${firstDataOutputPort.id}`}\n\t\tstyle=\"background-color: {getDataTypeColor(\n\t\t\tfirstDataOutputPort.dataType\n\t\t)}; border-color: '#ffffff'; top: {hasBothOutputTypes ? '25%' : '50%'}; z-index: 30;\"\n\t/>\n{/if}\n{#if triggerOutputPort}\n\t<!-- Trigger Output - positioned at bottom-right -->\n\t<Handle\n\t\ttype=\"source\"\n\t\tposition={Position.Right}\n\t\tid={`${props.data.nodeId}-output-${triggerOutputPort.id}`}\n\t\tstyle=\"background-color: {getDataTypeColor(\n\t\t\ttriggerOutputPort.dataType\n\t\t)}; border-color: '#ffffff'; top: {hasBothOutputTypes ? '75%' : '50%'}; z-index: 30;\"\n\t/>\n{/if}\n\n<!-- ConfigSidebar removed - now using global ConfigSidebar in WorkflowEditor -->\n\n<style>\n\t.flowdrop-square-node {\n\t\tposition: relative;\n\t\tbackground-color: #ffffff;\n\t\tborder: 2px solid #e5e7eb;\n\t\tborder-radius: 0.75rem;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tbox-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n\t\toverflow: visible; /* Changed from hidden to visible to allow handles to be properly accessible */\n\t\tz-index: 10;\n\t}\n\n\t/* Square layout (always compact) */\n\t.flowdrop-square-node--compact {\n\t\twidth: 80px;\n\t\theight: 80px;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-square-node:hover {\n\t\tbox-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n\t}\n\n\t.flowdrop-square-node--selected {\n\t\tbox-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n\t\tborder: 2px solid #3b82f6;\n\t}\n\n\t.flowdrop-square-node--processing {\n\t\topacity: 0.7;\n\t}\n\n\t.flowdrop-square-node--error {\n\t\tborder-color: #ef4444 !important;\n\t\tbackground-color: #fef2f2 !important;\n\t}\n\n\t/* Compact layout styles */\n\t.flowdrop-square-node__compact-content {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t:global(.flowdrop-square-node__compact-icon) {\n\t\tfilter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));\n\t}\n\n\t/* Label styling removed - now using header title */\n\n\t.flowdrop-square-node__processing {\n\t\tposition: absolute;\n\t\ttop: 4px;\n\t\tright: 4px;\n\t}\n\n\t.flowdrop-square-node__spinner {\n\t\twidth: 12px;\n\t\theight: 12px;\n\t\tborder: 1px solid rgba(255, 255, 255, 0.3);\n\t\tborder-top: 1px solid white;\n\t\tborder-radius: 50%;\n\t\tanimation: spin 1s linear infinite;\n\t}\n\n\t.flowdrop-square-node__error {\n\t\tposition: absolute;\n\t\ttop: 4px;\n\t\tright: 4px;\n\t\tcolor: #ef4444;\n\t}\n\n\t:global(.flowdrop-square-node__error-icon) {\n\t\twidth: 12px;\n\t\theight: 12px;\n\t}\n\n\t.flowdrop-square-node__config-btn {\n\t\tposition: absolute;\n\t\ttop: 0.5rem;\n\t\tright: 0.5rem;\n\t\twidth: 1.5rem;\n\t\theight: 1.5rem;\n\t\tbackground-color: rgba(255, 255, 255, 0.9);\n\t\tborder: 1px solid #e5e7eb;\n\t\tborder-radius: 0.25rem;\n\t\tcolor: #6b7280;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\topacity: 0;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tbackdrop-filter: blur(4px);\n\t\tz-index: 15;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.flowdrop-square-node:hover .flowdrop-square-node__config-btn {\n\t\topacity: 1;\n\t}\n\n\t.flowdrop-square-node__config-btn:hover {\n\t\tbackground-color: #f9fafb;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n\n\t@keyframes spin {\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t/* Handle styles - matching WorkflowNode exactly */\n\t:global(.svelte-flow__node-square .svelte-flow__handle) {\n\t\twidth: 18px !important;\n\t\theight: 18px !important;\n\t\tborder-radius: 50% !important;\n\t\ttransition: all 0.2s ease-in-out !important;\n\t\tcursor: pointer !important;\n\t\tz-index: 20 !important;\n\t\tpointer-events: auto !important;\n\t}\n\n\t:global(.svelte-flow__node-square .svelte-flow__handle-left) {\n\t\tleft: -6px !important;\n\t}\n\n\t:global(.svelte-flow__node-square .svelte-flow__handle-right) {\n\t\tright: -6px !important;\n\t}\n\n\t:global(.svelte-flow__node-square .svelte-flow__handle:focus) {\n\t\toutline: 2px solid #3b82f6 !important;\n\t\toutline-offset: 2px !important;\n\t}\n</style>\n","<!--\n  Tool Node Component\n  A specialized node for tools with metadata port\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport { Position, Handle } from '@xyflow/svelte';\n\timport Icon from '@iconify/svelte';\n\timport { getDataTypeColor } from '../utils/colors';\n\timport type { NodeMetadata } from '../types/index.js';\n\n\tinterface ToolNodeParameter {\n\t\tname: string;\n\t\ttype?: string;\n\t\tdescription?: string;\n\t}\n\n\tconst props = $props<{\n\t\tdata: {\n\t\t\tlabel: string;\n\t\t\tconfig: {\n\t\t\t\ticon?: string;\n\t\t\t\tcolor?: string;\n\t\t\t\ttoolName?: string;\n\t\t\t\ttoolDescription?: string;\n\t\t\t\ttoolVersion?: string;\n\t\t\t\tparameters?: ToolNodeParameter[];\n\t\t\t};\n\t\t\tmetadata: NodeMetadata;\n\t\t\tnodeId?: string;\n\t\t\tonConfigOpen?: (node: {\n\t\t\t\tid: string;\n\t\t\t\ttype: string;\n\t\t\t\tdata: { label: string; config: Record<string, unknown>; metadata: NodeMetadata };\n\t\t\t}) => void;\n\t\t};\n\t\tselected?: boolean;\n\t\tisProcessing?: boolean;\n\t\tisError?: boolean;\n\t}>();\n\n\t// Prioritize metadata over config for tool nodes (metadata is the node definition)\n\tlet toolIcon = $derived(\n\t\t(props.data.metadata?.icon as string) || (props.data.config?.icon as string) || 'mdi:tools'\n\t);\n\tlet toolColor = $derived(\n\t\t(props.data.metadata?.color as string) || (props.data.config?.color as string) || '#f59e0b'\n\t);\n\tlet toolName = $derived(\n\t\t(props.data.metadata?.name as string) ||\n\t\t\t(props.data.config?.toolName as string) ||\n\t\t\tprops.data.label ||\n\t\t\t'Tool'\n\t);\n\tlet toolDescription = $derived(\n\t\t(props.data.metadata?.description as string) ||\n\t\t\t(props.data.config?.toolDescription as string) ||\n\t\t\t'A configurable tool for agents'\n\t);\n\tlet toolVersion = $derived(\n\t\t(props.data.metadata?.version as string) ||\n\t\t\t(props.data.config?.toolVersion as string) ||\n\t\t\t'1.0.0'\n\t);\n\n\t// Check for tool interface ports in metadata\n\tlet hasToolInputPort = $derived(\n\t\tprops.data.metadata?.inputs?.some((port) => port.dataType === 'tool') || false\n\t);\n\tlet hasToolOutputPort = $derived(\n\t\tprops.data.metadata?.outputs?.some((port) => port.dataType === 'tool') || false\n\t);\n\n\t// Get the actual tool ports for proper handle generation\n\tlet toolInputPort = $derived(\n\t\tprops.data.metadata?.inputs?.find((port) => port.dataType === 'tool')\n\t);\n\tlet toolOutputPort = $derived(\n\t\tprops.data.metadata?.outputs?.find((port) => port.dataType === 'tool')\n\t);\n\n\t// Handle configuration sidebar - using global ConfigSidebar\n\tfunction openConfigSidebar(): void {\n\t\tif (props.data.onConfigOpen) {\n\t\t\t// Create a WorkflowNodeType-like object for the global ConfigSidebar\n\t\t\tconst nodeForConfig = {\n\t\t\t\tid: props.data.nodeId || 'unknown',\n\t\t\t\ttype: 'tool',\n\t\t\t\tdata: props.data\n\t\t\t};\n\t\t\tprops.data.onConfigOpen(nodeForConfig);\n\t\t}\n\t}\n\n\t// Handle double-click to open config\n\tfunction handleDoubleClick(): void {\n\t\topenConfigSidebar();\n\t}\n\n\t// Handle click events\n\tfunction handleClick(): void {\n\t\t// Node selection is handled by Svelte Flow\n\t}\n\n\t// Handle keyboard events for accessibility\n\tfunction handleKeydown(event: KeyboardEvent): void {\n\t\tif (event.key === 'Enter' || event.key === ' ') {\n\t\t\tevent.preventDefault();\n\t\t\thandleDoubleClick();\n\t\t}\n\t}\n</script>\n\n<!-- Tool Input Handle (optional) -->\n{#if hasToolInputPort && toolInputPort}\n\t<Handle\n\t\ttype=\"target\"\n\t\tposition={Position.Left}\n\t\tid={`${props.data.nodeId}-input-${toolInputPort.id}`}\n\t\tstyle=\"background-color: {getDataTypeColor('tool')}; border-color: '#ffffff';\"\n\t/>\n{/if}\n\n<!-- Tool Node -->\n<div\n\tclass=\"flowdrop-tool-node\"\n\tclass:flowdrop-tool-node--selected={props.selected}\n\tclass:flowdrop-tool-node--processing={props.isProcessing}\n\tclass:flowdrop-tool-node--error={props.isError}\n\tonclick={handleClick}\n\tondblclick={handleDoubleClick}\n\tonkeydown={handleKeydown}\n\trole=\"button\"\n\ttabindex=\"0\"\n>\n\t<!-- Node Header -->\n\t<div class=\"flowdrop-tool-node__header\">\n\t\t<div class=\"flowdrop-tool-node__header-content\">\n\t\t\t<!-- Tool Icon -->\n\t\t\t<div class=\"flowdrop-tool-node__icon-container\" style=\"background-color: {toolColor}\">\n\t\t\t\t<Icon icon={toolIcon} class=\"flowdrop-tool-node__icon\" />\n\t\t\t</div>\n\n\t\t\t<!-- Tool Info -->\n\t\t\t<div class=\"flowdrop-tool-node__info\">\n\t\t\t\t<h3 class=\"flowdrop-tool-node__title\">\n\t\t\t\t\t{toolName}\n\t\t\t\t</h3>\n\t\t\t\t<div class=\"flowdrop-tool-node__version\">\n\t\t\t\t\tv{toolVersion}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- Tool Badge -->\n\t\t\t<div class=\"flowdrop-tool-node__badge\">TOOL</div>\n\t\t</div>\n\n\t\t<!-- Tool Description -->\n\t\t<p class=\"flowdrop-tool-node__description\">\n\t\t\t{toolDescription}\n\t\t</p>\n\t</div>\n\n\t<!-- Processing indicator -->\n\t{#if props.isProcessing}\n\t\t<div class=\"flowdrop-tool-node__processing\">\n\t\t\t<div class=\"flowdrop-tool-node__spinner\"></div>\n\t\t</div>\n\t{/if}\n\n\t<!-- Error indicator -->\n\t{#if props.isError}\n\t\t<div class=\"flowdrop-tool-node__error\">\n\t\t\t<Icon icon=\"mdi:alert-circle\" class=\"flowdrop-tool-node__error-icon\" />\n\t\t</div>\n\t{/if}\n\n\t<!-- Config button -->\n\t<button class=\"flowdrop-tool-node__config-btn\" onclick={openConfigSidebar} title=\"Configure tool\">\n\t\t<Icon icon=\"mdi:cog\" />\n\t</button>\n</div>\n\n<!-- Tool Output Handle (optional) -->\n{#if hasToolOutputPort && toolOutputPort}\n\t<Handle\n\t\ttype=\"source\"\n\t\tposition={Position.Right}\n\t\tid={`${props.data.nodeId}-output-${toolOutputPort.id}`}\n\t\tstyle=\"background-color: {getDataTypeColor('tool')}; border-color: '#ffffff';\"\n\t/>\n{/if}\n\n<style>\n\t.flowdrop-tool-node {\n\t\tposition: relative;\n\t\tbackground-color: #ffffff;\n\t\tborder: 2px solid #e5e7eb;\n\t\tborder-radius: 0.75rem;\n\t\twidth: 18rem;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tbox-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n\t\toverflow: visible;\n\t\tz-index: 10;\n\t}\n\n\t.flowdrop-tool-node:hover {\n\t\tbox-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n\t}\n\n\t.flowdrop-tool-node--selected {\n\t\tbox-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n\t\tborder: 2px solid #f59e0b;\n\t}\n\n\t.flowdrop-tool-node--processing {\n\t\topacity: 0.7;\n\t}\n\n\t.flowdrop-tool-node--error {\n\t\tborder-color: #ef4444 !important;\n\t\tbackground-color: #fef2f2 !important;\n\t}\n\n\t.flowdrop-tool-node__header {\n\t\tpadding: 1rem;\n\t\tbackground-color: #fffbeb;\n\t\tborder-radius: 0.75rem;\n\t\tborder: 1px solid #fcd34d;\n\t}\n\n\t.flowdrop-tool-node__header-content {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.75rem;\n\t\tmargin-bottom: 0.5rem;\n\t}\n\n\t.flowdrop-tool-node__icon-container {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 2.5rem;\n\t\theight: 2.5rem;\n\t\tborder-radius: 0.5rem;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-tool-node__info {\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t}\n\n\t.flowdrop-tool-node__title {\n\t\tfont-size: 1rem;\n\t\tfont-weight: 600;\n\t\tcolor: #1f2937;\n\t\tmargin: 0;\n\t\tline-height: 1.4;\n\t}\n\n\t.flowdrop-tool-node__version {\n\t\tfont-size: 0.75rem;\n\t\tcolor: #6b7280;\n\t\tfont-weight: 500;\n\t\tmargin-top: 0.125rem;\n\t}\n\n\t.flowdrop-tool-node__badge {\n\t\tbackground-color: #f59e0b;\n\t\tcolor: white;\n\t\tfont-size: 0.625rem;\n\t\tfont-weight: 700;\n\t\tpadding: 0.25rem 0.5rem;\n\t\tborder-radius: 0.25rem;\n\t\tletter-spacing: 0.05em;\n\t}\n\n\t.flowdrop-tool-node__description {\n\t\tfont-size: 0.75rem;\n\t\tcolor: #6b7280;\n\t\tmargin: 0;\n\t\tline-height: 1.3;\n\t}\n\n\t:global(.flowdrop-tool-node__icon) {\n\t\tcolor: white;\n\t\tfont-size: 1.25rem;\n\t\tfilter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));\n\t}\n\n\t.flowdrop-tool-node__processing {\n\t\tposition: absolute;\n\t\ttop: 4px;\n\t\tright: 4px;\n\t}\n\n\t.flowdrop-tool-node__spinner {\n\t\twidth: 12px;\n\t\theight: 12px;\n\t\tborder: 1px solid rgba(255, 255, 255, 0.3);\n\t\tborder-top: 1px solid white;\n\t\tborder-radius: 50%;\n\t\tanimation: spin 1s linear infinite;\n\t}\n\n\t.flowdrop-tool-node__error {\n\t\tposition: absolute;\n\t\ttop: 4px;\n\t\tright: 4px;\n\t\tcolor: #ef4444;\n\t}\n\n\t:global(.flowdrop-tool-node__error-icon) {\n\t\twidth: 12px;\n\t\theight: 12px;\n\t}\n\n\t.flowdrop-tool-node__config-btn {\n\t\tposition: absolute;\n\t\ttop: 0.5rem;\n\t\tright: 0.5rem;\n\t\twidth: 1.5rem;\n\t\theight: 1.5rem;\n\t\tbackground-color: rgba(255, 255, 255, 0.9);\n\t\tborder: 1px solid #e5e7eb;\n\t\tborder-radius: 0.25rem;\n\t\tcolor: #6b7280;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\topacity: 0;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tbackdrop-filter: blur(4px);\n\t\tz-index: 15;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.flowdrop-tool-node:hover .flowdrop-tool-node__config-btn {\n\t\topacity: 1;\n\t}\n\n\t.flowdrop-tool-node__config-btn:hover {\n\t\tbackground-color: #f9fafb;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n\n\t@keyframes spin {\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t/* Handle styles - special metadata port styling */\n\t:global(.svelte-flow__node-tool .svelte-flow__handle) {\n\t\twidth: 16px !important;\n\t\theight: 16px !important;\n\t\tborder: 2px solid #ffffff !important;\n\t\tborder-radius: 50% !important;\n\t\ttransition: all 0.2s ease-in-out !important;\n\t\tcursor: pointer !important;\n\t\tz-index: 20 !important;\n\t\tpointer-events: auto !important;\n\t}\n\n\t:global(.svelte-flow__node-tool .svelte-flow__handle-right) {\n\t\tright: -6px !important;\n\t}\n\n\t/* Metadata port hover effects */\n\t:global(.svelte-flow__node-tool .svelte-flow__handle:hover) {\n\t\tbox-shadow: 0 0 0 2px rgba(245, 158, 11, 0.3) !important;\n\t}\n\n\t:global(.svelte-flow__node-tool .svelte-flow__handle:focus) {\n\t\toutline: 2px solid #f59e0b !important;\n\t\toutline-offset: 2px !important;\n\t}\n</style>\n","<!--\n  Gateway Node Component\n  Visual representation of gateway/branch nodes with branching flow indicators\n  Shows active branches and execution paths\n  Styled with BEM syntax following WorkflowNode pattern\n-->\n\n<script lang=\"ts\">\n\timport { Position, Handle } from '@xyflow/svelte';\n\timport type { WorkflowNode } from '../types/index.js';\n\timport Icon from '@iconify/svelte';\n\timport { getNodeIcon } from '../utils/icons.js';\n\timport { getDataTypeColorToken, getCategoryColorToken } from '../utils/colors.js';\n\n\t// Define simplified branch interface - conditions are handled by backend\n\tinterface Branch {\n\t\tname: string;\n\t\tlabel: string;\n\t}\n\n\tinterface Props {\n\t\tdata: WorkflowNode['data'] & {\n\t\t\tnodeId?: string;\n\t\t\tonConfigOpen?: (node: { id: string; type: string; data: WorkflowNode['data'] }) => void;\n\t\t};\n\t\tselected?: boolean;\n\t}\n\n\tlet props: Props = $props();\n\n\t// Gateway-specific data - branches are calculated at runtime from config\n\tlet branches = $derived((props.data.config?.branches as Branch[]) || []);\n\tlet activeBranches = $derived((props.data.executionInfo as any)?.output?.active_branches || []);\n\n\t/**\n\t * Handle node click - only handle selection, no config opening\n\t */\n\tfunction handleNodeClick(): void {\n\t\t// Node selection is handled by Svelte Flow\n\t}\n\n\t/**\n\t * Handle double-click to open config\n\t */\n\tfunction handleNodeDoubleClick(): void {\n\t\tif (props.data.onConfigOpen) {\n\t\t\tprops.data.onConfigOpen({\n\t\t\t\tid: props.data.nodeId || '',\n\t\t\t\ttype: 'gateway',\n\t\t\t\tdata: props.data\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Handle keyboard events for accessibility\n\t */\n\tfunction handleKeydown(event: KeyboardEvent): void {\n\t\tif (event.key === 'Enter' || event.key === ' ') {\n\t\t\tevent.preventDefault();\n\t\t\thandleNodeClick();\n\t\t}\n\t}\n\n\t/**\n\t * Check if a branch is active\n\t */\n\tfunction isBranchActive(branchName: string): boolean {\n\t\treturn activeBranches.includes(branchName);\n\t}\n</script>\n\n<!-- Node Container -->\n<div\n\tclass=\"flowdrop-workflow-node flowdrop-workflow-node--gateway\"\n\tclass:flowdrop-workflow-node--selected={props.selected}\n\tonclick={handleNodeClick}\n\tondblclick={handleNodeDoubleClick}\n\tonkeydown={handleKeydown}\n\trole=\"button\"\n\ttabindex=\"0\"\n\taria-label=\"Gateway node: {props.data.metadata.name}\"\n\taria-describedby=\"node-description-{props.data.nodeId || 'unknown'}\"\n>\n\t<!-- Node Header -->\n\t<div class=\"flowdrop-workflow-node__header\">\n\t\t<div class=\"flowdrop-flex flowdrop-gap--3 flowdrop-items--center\">\n\t\t\t<!-- Node Icon -->\n\t\t\t<div\n\t\t\t\tclass=\"flowdrop-workflow-node__icon\"\n\t\t\t\tstyle=\"background-color: {getCategoryColorToken(props.data.metadata.category)}\"\n\t\t\t>\n\t\t\t\t<Icon icon={getNodeIcon(props.data.metadata.icon, props.data.metadata.category)} />\n\t\t\t</div>\n\n\t\t\t<!-- Node Title -->\n\t\t\t<h3 class=\"flowdrop-text--sm flowdrop-font--medium flowdrop-truncate flowdrop-flex--1\">\n\t\t\t\t{props.data.label}\n\t\t\t</h3>\n\t\t</div>\n\t\t<!-- Node Description -->\n\t\t<p\n\t\t\tclass=\"flowdrop-text--xs flowdrop-text--gray flowdrop-truncate flowdrop-mt--1\"\n\t\t\tid=\"node-description-{props.data.nodeId || 'unknown'}\"\n\t\t>\n\t\t\t{props.data.metadata.description}\n\t\t</p>\n\t</div>\n\n\t<!-- Input Ports Container -->\n\t{#if props.data.metadata.inputs.length > 0}\n\t\t<div class=\"flowdrop-workflow-node__ports\">\n\t\t\t<div class=\"flowdrop-workflow-node__ports-header\">\n\t\t\t\t<h5 class=\"flowdrop-workflow-node__ports-title\">Inputs</h5>\n\t\t\t</div>\n\t\t\t<div class=\"flowdrop-workflow-node__ports-list\">\n\t\t\t\t{#each props.data.metadata.inputs as port (port.id)}\n\t\t\t\t\t<div class=\"flowdrop-workflow-node__port\">\n\t\t\t\t\t\t<!-- Input Handle -->\n\t\t\t\t\t\t<Handle\n\t\t\t\t\t\t\ttype=\"target\"\n\t\t\t\t\t\t\tposition={Position.Left}\n\t\t\t\t\t\t\tid={`${props.data.nodeId}-input-${port.id}`}\n\t\t\t\t\t\t\tclass=\"flowdrop-workflow-node__handle\"\n\t\t\t\t\t\t\tstyle=\"top: 50%; transform: translateY(-50%); margin-left: -32px; background-color: {getDataTypeColorToken(\n\t\t\t\t\t\t\t\tport.dataType\n\t\t\t\t\t\t\t)}; border-color: '#ffffff';\"\n\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\ttabindex={0}\n\t\t\t\t\t\t\taria-label=\"Connect to {port.name} input port\"\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<!-- Port Info -->\n\t\t\t\t\t\t<div class=\"flowdrop-flex--1 flowdrop-min-w--0\">\n\t\t\t\t\t\t\t<div class=\"flowdrop-flex flowdrop-gap--2\">\n\t\t\t\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-font--medium\">{port.name}</span>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"flowdrop-badge flowdrop-badge--sm\"\n\t\t\t\t\t\t\t\t\tstyle=\"background-color: {getDataTypeColorToken(port.dataType)}; color: #fff;\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{port.dataType}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{#if port.required}\n\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-badge flowdrop-badge--error flowdrop-badge--sm\"\n\t\t\t\t\t\t\t\t\t\t>Required</span\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{#if port.description}\n\t\t\t\t\t\t\t\t<p class=\"flowdrop-text--xs flowdrop-text--gray flowdrop-truncate\">\n\t\t\t\t\t\t\t\t\t{port.description}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\n\t<!-- Branches Section (Output Ports) -->\n\t{#if branches.length > 0}\n\t\t<div class=\"flowdrop-workflow-node__ports\">\n\t\t\t<div class=\"flowdrop-workflow-node__ports-header\">\n\t\t\t\t<h5 class=\"flowdrop-workflow-node__ports-title\">\n\t\t\t\t\t<Icon icon=\"mdi:source-branch\" />\n\t\t\t\t\t<span>Branches ({branches.length})</span>\n\t\t\t\t</h5>\n\t\t\t</div>\n\t\t\t<div class=\"flowdrop-workflow-node__ports-list\">\n\t\t\t\t{#each branches as branch (branch.name)}\n\t\t\t\t\t{@const isActive = isBranchActive(branch.name)}\n\t\t\t\t\t<div class=\"flowdrop-workflow-node__port\">\n\t\t\t\t\t\t<!-- Port Info -->\n\t\t\t\t\t\t<div class=\"flowdrop-flex--1 flowdrop-min-w--0 flowdrop-text--right\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"flowdrop-flex flowdrop-gap--2 flowdrop-justify--end flowdrop-items--center\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{#if isActive}\n\t\t\t\t\t\t\t\t\t<span style=\"color: {getDataTypeColorToken('trigger')};\">\n\t\t\t\t\t\t\t\t\t\t<Icon icon=\"mdi:check-circle\" />\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"flowdrop-text--xs flowdrop-font--medium\"\n\t\t\t\t\t\t\t\t\tclass:flowdrop-text--active={isActive}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{branch.name}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"flowdrop-badge flowdrop-badge--sm\"\n\t\t\t\t\t\t\t\t\tstyle=\"background-color: {getDataTypeColorToken('trigger')}; color: #fff;\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\ttrigger\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<!-- Output Handle - Generated from branch name -->\n\t\t\t\t\t\t<Handle\n\t\t\t\t\t\t\ttype=\"source\"\n\t\t\t\t\t\t\tposition={Position.Right}\n\t\t\t\t\t\t\tid={`${props.data.nodeId}-output-${branch.name}`}\n\t\t\t\t\t\t\tclass={`flowdrop-workflow-node__handle ${isActive ? 'flowdrop-workflow-node__handle--active' : ''}`}\n\t\t\t\t\t\t\tstyle=\"top: 50%; transform: translateY(-50%); margin-right: -32px; background-color: {isActive\n\t\t\t\t\t\t\t\t? getDataTypeColorToken('trigger')\n\t\t\t\t\t\t\t\t: getDataTypeColorToken('trigger')}; border-color: '#ffffff';\"\n\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\ttabindex={0}\n\t\t\t\t\t\t\taria-label=\"Connect from {branch.name} branch\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t</div>\n\t{:else}\n\t\t<div class=\"flowdrop-workflow-node__ports\">\n\t\t\t<div class=\"workflow-node__no-branches\">\n\t\t\t\t<Icon icon=\"mdi:alert-circle-outline\" />\n\t\t\t\t<span>No branches configured</span>\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\n\t<!-- Config button -->\n\t<button\n\t\tclass=\"flowdrop-workflow-node__config-btn\"\n\t\tonclick={handleNodeDoubleClick}\n\t\ttitle=\"Configure node\"\n\t>\n\t\t<Icon icon=\"mdi:cog\" />\n\t</button>\n</div>\n\n<style>\n\t.flowdrop-workflow-node {\n\t\tposition: relative;\n\t\tbackground-color: #ffffff;\n\t\tborder: 2px solid #e5e7eb;\n\t\tborder-radius: 0.75rem;\n\t\tbox-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n\t\twidth: 18rem;\n\t\tz-index: 10;\n\t}\n\n\t.flowdrop-workflow-node--gateway {\n\t\tmin-width: 18rem;\n\t}\n\n\t.flowdrop-workflow-node--selected {\n\t\tbox-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n\t\tborder: 2px solid #3b82f6;\n\t}\n\n\t.flowdrop-workflow-node__header {\n\t\tpadding: 1rem;\n\t\tborder-bottom: 1px solid #e5e7eb;\n\t\tbackground-color: #f9fafb;\n\t\tborder-top-left-radius: 0.75rem;\n\t\tborder-top-right-radius: 0.75rem;\n\t}\n\n\t.flowdrop-workflow-node__icon {\n\t\twidth: 2rem;\n\t\theight: 2rem;\n\t\tborder-radius: 0.5rem;\n\t\tcolor: #ffffff;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tbox-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);\n\t}\n\n\t.flowdrop-workflow-node__header h3 {\n\t\tmargin: 0;\n\t\tline-height: 1;\n\t}\n\n\t.flowdrop-workflow-node__ports {\n\t\tpadding: 0.75rem 1rem;\n\t}\n\n\t.flowdrop-workflow-node__ports-header {\n\t\tmargin-bottom: 0.5rem;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.25rem;\n\t}\n\n\t.flowdrop-workflow-node__ports-title {\n\t\tmargin: 0;\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 600;\n\t\tcolor: #374151;\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t}\n\n\t.flowdrop-workflow-node__ports-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.5rem;\n\t}\n\n\t.flowdrop-workflow-node__port {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 0.25rem 0;\n\t\tposition: relative;\n\t}\n\n\t.flowdrop-badge {\n\t\tpadding: 0.125rem 0.375rem;\n\t\tborder-radius: 0.25rem;\n\t\tfont-size: 0.625rem;\n\t\tfont-weight: 500;\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t}\n\n\t.flowdrop-badge--error {\n\t\tbackground-color: #ef4444;\n\t\tcolor: #ffffff;\n\t}\n\n\t.flowdrop-badge--sm {\n\t\tfont-size: 0.625rem;\n\t\tpadding: 0.125rem 0.25rem;\n\t}\n\n\t.workflow-node__no-branches {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 0.75rem;\n\t\tbackground: #fef3c7;\n\t\tborder: 1px solid #f59e0b;\n\t\tborder-radius: 0.5rem;\n\t\tcolor: #92400e;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t/* Handle styles */\n\t:global(.flowdrop-workflow-node__handle) {\n\t\twidth: 0.75rem;\n\t\theight: 0.75rem;\n\t\tbackground-color: #6b7280;\n\t\tborder: 2px solid #ffffff;\n\t\tborder-radius: 50%;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tcursor: pointer;\n\t}\n\n\t:global(.flowdrop-workflow-node__handle:hover) {\n\t\tbackground-color: #3b82f6;\n\t\ttransform: scale(1.2);\n\t}\n\n\t:global(.flowdrop-workflow-node__handle:focus) {\n\t\toutline: 2px solid #3b82f6;\n\t\toutline-offset: 2px;\n\t}\n\n\t:global(.flowdrop-workflow-node__handle--active) {\n\t\ttransform: scale(1.15);\n\t\tbox-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);\n\t}\n\n\t/* Utility classes */\n\t.flowdrop-flex {\n\t\tdisplay: flex;\n\t}\n\n\t.flowdrop-flex--1 {\n\t\tflex: 1;\n\t}\n\n\t.flowdrop-gap--2 {\n\t\tgap: 0.5rem;\n\t}\n\n\t.flowdrop-gap--3 {\n\t\tgap: 0.75rem;\n\t}\n\n\t.flowdrop-items--center {\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-justify--end {\n\t\tjustify-content: flex-end;\n\t}\n\n\t.flowdrop-min-w--0 {\n\t\tmin-width: 0;\n\t}\n\n\t.flowdrop-text--xs {\n\t\tfont-size: 0.75rem;\n\t\tline-height: 1rem;\n\t}\n\n\t.flowdrop-text--sm {\n\t\tfont-size: 0.875rem;\n\t\tline-height: 1.25rem;\n\t}\n\n\t.flowdrop-text--gray {\n\t\tcolor: #6b7280;\n\t}\n\n\t.flowdrop-text--active {\n\t\tcolor: #10b981;\n\t\tfont-weight: 600;\n\t}\n\n\t.flowdrop-font--medium {\n\t\tfont-weight: 500;\n\t}\n\n\t.flowdrop-truncate {\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.flowdrop-mt--1 {\n\t\tmargin-top: 0.25rem;\n\t}\n\n\t.flowdrop-text--right {\n\t\ttext-align: right;\n\t}\n\n\t.flowdrop-workflow-node__config-btn {\n\t\tposition: absolute;\n\t\ttop: 0.5rem;\n\t\tright: 0.5rem;\n\t\twidth: 1.5rem;\n\t\theight: 1.5rem;\n\t\tbackground-color: rgba(255, 255, 255, 0.9);\n\t\tborder: 1px solid #e5e7eb;\n\t\tborder-radius: 0.25rem;\n\t\tcolor: #6b7280;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\topacity: 0;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tbackdrop-filter: blur(4px);\n\t\tz-index: 15;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.flowdrop-workflow-node:hover .flowdrop-workflow-node__config-btn {\n\t\topacity: 1;\n\t}\n\n\t.flowdrop-workflow-node__config-btn:hover {\n\t\tbackground-color: #f9fafb;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n</style>\n","<!--\n  Status Label Component\n  Dedicated component for displaying status labels with consistent styling\n-->\n\n<script lang=\"ts\">\n\tinterface Props {\n\t\tlabel: string;\n\t\tclass?: string;\n\t}\n\n\tlet props: Props = $props();\n</script>\n\n<span class=\"status-label {props.class || ''}\">\n\t{props.label}\n</span>\n\n<style>\n\t.status-label {\n\t\tfont-size: 16px;\n\t\tfont-weight: 600;\n\t\tcolor: #000000;\n\t\twhite-space: nowrap;\n\t\tline-height: 1.2;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\ttext-shadow: 0 1px 2px rgba(255, 255, 255, 0.3);\n\t\tletter-spacing: 0.025em;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n</style>\n","/**\n * Node Status Utility Functions\n * Provides utilities for managing and displaying node execution status\n */\n/**\n * Get the display color for a node execution status\n */\nexport function getStatusColor(status) {\n    const statusColors = {\n        idle: '#6b7280', // gray\n        pending: '#f59e0b', // amber\n        running: '#3b82f6', // blue\n        completed: '#10b981', // emerald\n        failed: '#ef4444', // red\n        cancelled: '#6b7280', // gray\n        skipped: '#8b5cf6' // violet\n    };\n    return statusColors[status] || statusColors.idle;\n}\n/**\n * Get the display icon for a node execution status\n */\nexport function getStatusIcon(status) {\n    const statusIcons = {\n        idle: 'mdi:circle-outline',\n        pending: 'mdi:clock-outline',\n        running: 'mdi:loading',\n        completed: 'mdi:check-circle',\n        failed: 'mdi:alert-circle',\n        cancelled: 'mdi:cancel',\n        skipped: 'mdi:skip-next'\n    };\n    return statusIcons[status] || statusIcons.idle;\n}\n/**\n * Get the display label for a node execution status\n */\nexport function getStatusLabel(status) {\n    const statusLabels = {\n        idle: 'Idle',\n        pending: 'Pending',\n        running: 'Running',\n        completed: 'Completed',\n        failed: 'Failed',\n        cancelled: 'Cancelled',\n        skipped: 'Skipped'\n    };\n    return statusLabels[status] || statusLabels.idle;\n}\n/**\n * Get the background color for a node execution status overlay\n */\nexport function getStatusBackgroundColor(status) {\n    const statusBackgroundColors = {\n        idle: '#f9fafb', // light gray\n        pending: '#fef3c7', // light amber\n        running: '#dbeafe', // light blue\n        completed: '#d1fae5', // light emerald\n        failed: '#fee2e2', // light red\n        cancelled: '#f3f4f6', // light gray\n        skipped: '#ede9fe' // light violet\n    };\n    return statusBackgroundColors[status] || statusBackgroundColors.idle;\n}\n/**\n * Get the text color for a node execution status overlay\n */\nexport function getStatusTextColor(status) {\n    const statusTextColors = {\n        idle: '#6b7280', // gray\n        pending: '#d97706', // amber\n        running: '#1d4ed8', // blue\n        completed: '#059669', // emerald\n        failed: '#dc2626', // red\n        cancelled: '#6b7280', // gray\n        skipped: '#7c3aed' // violet\n    };\n    return statusTextColors[status] || statusTextColors.idle;\n}\n/**\n * Create a default NodeExecutionInfo object\n */\nexport function createDefaultExecutionInfo() {\n    return {\n        status: 'idle',\n        executionCount: 0,\n        isExecuting: false\n    };\n}\n/**\n * Update node execution info when execution starts\n */\nexport function updateExecutionStart(executionInfo) {\n    return {\n        ...executionInfo,\n        status: 'running',\n        isExecuting: true\n    };\n}\n/**\n * Update node execution info when execution completes successfully\n */\nexport function updateExecutionComplete(executionInfo, duration) {\n    return {\n        ...executionInfo,\n        status: 'completed',\n        executionCount: executionInfo.executionCount + 1,\n        lastExecuted: new Date().toISOString(),\n        lastExecutionDuration: duration,\n        isExecuting: false,\n        lastError: undefined // Clear any previous error\n    };\n}\n/**\n * Update node execution info when execution fails\n */\nexport function updateExecutionFailed(executionInfo, error, duration) {\n    return {\n        ...executionInfo,\n        status: 'failed',\n        executionCount: executionInfo.executionCount + 1,\n        lastExecuted: new Date().toISOString(),\n        lastExecutionDuration: duration,\n        isExecuting: false,\n        lastError: error\n    };\n}\n/**\n * Reset node execution info\n */\nexport function resetExecutionInfo(executionInfo) {\n    return {\n        ...executionInfo,\n        status: 'idle',\n        isExecuting: false,\n        lastError: undefined\n    };\n}\n/**\n * Format execution duration for display\n */\nexport function formatExecutionDuration(duration) {\n    if (!duration)\n        return 'N/A';\n    if (duration < 1000) {\n        return `${Math.round(duration)}ms`;\n    }\n    else if (duration < 60000) {\n        return `${(duration / 1000).toFixed(1)}s`;\n    }\n    else {\n        const minutes = Math.floor(duration / 60000);\n        const seconds = Math.floor((duration % 60000) / 1000);\n        return `${minutes}m ${seconds}s`;\n    }\n}\n/**\n * Format last executed timestamp for display\n */\nexport function formatLastExecuted(timestamp) {\n    if (!timestamp)\n        return 'Never';\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    if (diffMs < 60000) {\n        // Less than 1 minute\n        return 'Just now';\n    }\n    else if (diffMs < 3600000) {\n        // Less than 1 hour\n        const minutes = Math.floor(diffMs / 60000);\n        return `${minutes}m ago`;\n    }\n    else if (diffMs < 86400000) {\n        // Less than 1 day\n        const hours = Math.floor(diffMs / 3600000);\n        return `${hours}h ago`;\n    }\n    else {\n        return date.toLocaleDateString();\n    }\n}\n","<!--\n  Node Status Overlay Component\n  Universal status indicator that can be overlaid on any node type\n  Displays execution status, count, and other execution information\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport type { NodeExecutionInfo } from '../types/index.js';\n\timport Icon from '@iconify/svelte';\n\timport StatusLabel from './StatusLabel.svelte';\n\timport {\n\t\tgetStatusColor,\n\t\tgetStatusIcon,\n\t\tgetStatusLabel,\n\t\tgetStatusBackgroundColor,\n\t\tformatExecutionDuration,\n\t\tformatLastExecuted\n\t} from '../utils/nodeStatus.js';\n\n\tinterface Props {\n\t\texecutionInfo?: NodeExecutionInfo;\n\t\tposition?: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right';\n\t\tsize?: 'sm' | 'md' | 'lg';\n\t\tshowDetails?: boolean;\n\t}\n\n\tlet props: Props = $props();\n\n\t// Default values\n\tlet position = $state(props.position || 'top-right');\n\tlet size = $state(props.size || 'md');\n\tlet showDetails = $state(props.showDetails || false);\n\tlet isHovered = $state(false);\n\n\t// Size configurations - optimized for larger, centered overlay\n\tconst sizeConfig = {\n\t\tsm: {\n\t\t\tstatusSize: '18px',\n\t\t\ticonSize: '10px',\n\t\t\tlabelSize: '0.75rem',\n\t\t\tpadding: '6px 12px'\n\t\t},\n\t\tmd: {\n\t\t\tstatusSize: '24px',\n\t\t\ticonSize: '14px',\n\t\t\tlabelSize: '0.875rem',\n\t\t\tpadding: '8px 16px'\n\t\t},\n\t\tlg: {\n\t\t\tstatusSize: '28px',\n\t\t\ticonSize: '16px',\n\t\t\tlabelSize: '1rem',\n\t\t\tpadding: '10px 20px'\n\t\t}\n\t};\n\n\tconst config = sizeConfig[size];\n\n\t// Position styles - horizontal center aligned with top edge of node\n\tconst positionStyles = {\n\t\t'top-left': 'top: -24px; left: 50%; transform: translateX(-50%);',\n\t\t'top-right': 'top: -24px; left: 50%; transform: translateX(-50%);',\n\t\t'bottom-left': 'top: -24px; left: 50%; transform: translateX(-50%);',\n\t\t'bottom-right': 'top: -24px; left: 50%; transform: translateX(-50%);'\n\t};\n\n\t// Get execution info or default\n\tlet executionInfo = $derived(\n\t\tprops.executionInfo || {\n\t\t\tstatus: 'idle' as const,\n\t\t\texecutionCount: 0,\n\t\t\tisExecuting: false\n\t\t}\n\t);\n\n\t// Show overlay if there's meaningful status information\n\tlet shouldShow = $derived(\n\t\texecutionInfo.status !== 'idle' || executionInfo.executionCount > 0 || executionInfo.isExecuting\n\t);\n</script>\n\n{#if shouldShow}\n\t<div\n\t\tclass=\"node-status-overlay\"\n\t\tclass:node-status-overlay--hovered={isHovered}\n\t\tclass:node-status-overlay--top-left={true}\n\t\tclass:node-status-overlay--sm={size === 'sm'}\n\t\tclass:node-status-overlay--md={size === 'md'}\n\t\tclass:node-status-overlay--lg={size === 'lg'}\n\t\tstyle=\"\n\t\t\t{positionStyles[position]}\n\t\t\t--status-size: {config.statusSize};\n\t\t\t--label-size: {config.labelSize};\n\t\t\t--icon-size: {config.iconSize};\n\t\t\t--padding: {config.padding};\n\t\t\"\n\t\tonmouseenter={() => (isHovered = true)}\n\t\tonmouseleave={() => (isHovered = false)}\n\t\ttitle=\"{getStatusLabel(executionInfo.status)} - Executed {executionInfo.executionCount} times\"\n\t\trole=\"status\"\n\t\taria-label=\"Node execution status: {getStatusLabel(executionInfo.status)}\"\n\t>\n\t\t<!-- Status Display: [icon] [label] -->\n\t\t<div\n\t\t\tclass=\"node-status-overlay__status-display\"\n\t\t\tstyle=\"background-color: {getStatusBackgroundColor(executionInfo.status)}\"\n\t\t>\n\t\t\t<div\n\t\t\t\tclass=\"node-status-overlay__status-icon\"\n\t\t\t\tstyle=\"background-color: {getStatusColor(executionInfo.status)}\"\n\t\t\t>\n\t\t\t\t<Icon icon={getStatusIcon(executionInfo.status)} class=\"node-status-overlay__icon\" />\n\t\t\t</div>\n\t\t\t<StatusLabel\n\t\t\t\tlabel={getStatusLabel(executionInfo.status)}\n\t\t\t\tclass=\"node-status-overlay__label\"\n\t\t\t/>\n\t\t</div>\n\n\t\t<!-- Execution Count Badge -->\n\t\t{#if executionInfo.executionCount > 0}\n\t\t\t<div class=\"node-status-overlay__count\">\n\t\t\t\t{executionInfo.executionCount}\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<!-- Detailed Information (shown on hover) -->\n\t\t{#if showDetails && isHovered}\n\t\t\t<div class=\"node-status-overlay__details\">\n\t\t\t\t<div class=\"node-status-overlay__detail-item\">\n\t\t\t\t\t<span class=\"node-status-overlay__detail-label\">Status:</span>\n\t\t\t\t\t<span class=\"node-status-overlay__detail-value\"\n\t\t\t\t\t\t>{getStatusLabel(executionInfo.status)}</span\n\t\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"node-status-overlay__detail-item\">\n\t\t\t\t\t<span class=\"node-status-overlay__detail-label\">Executions:</span>\n\t\t\t\t\t<span class=\"node-status-overlay__detail-value\">{executionInfo.executionCount}</span>\n\t\t\t\t</div>\n\t\t\t\t{#if executionInfo.lastExecuted}\n\t\t\t\t\t<div class=\"node-status-overlay__detail-item\">\n\t\t\t\t\t\t<span class=\"node-status-overlay__detail-label\">Last Run:</span>\n\t\t\t\t\t\t<span class=\"node-status-overlay__detail-value\"\n\t\t\t\t\t\t\t>{formatLastExecuted(executionInfo.lastExecuted)}</span\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t\t{#if executionInfo.lastExecutionDuration}\n\t\t\t\t\t<div class=\"node-status-overlay__detail-item\">\n\t\t\t\t\t\t<span class=\"node-status-overlay__detail-label\">Duration:</span>\n\t\t\t\t\t\t<span class=\"node-status-overlay__detail-value\"\n\t\t\t\t\t\t\t>{formatExecutionDuration(executionInfo.lastExecutionDuration)}</span\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t\t{#if executionInfo.lastError}\n\t\t\t\t\t<div class=\"node-status-overlay__detail-item node-status-overlay__detail-item--error\">\n\t\t\t\t\t\t<span class=\"node-status-overlay__detail-label\">Error:</span>\n\t\t\t\t\t\t<span class=\"node-status-overlay__detail-value\">{executionInfo.lastError}</span>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n{/if}\n\n<style>\n\t.node-status-overlay {\n\t\tposition: absolute;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.75rem;\n\t\tz-index: 1000;\n\t\tpointer-events: none;\n\t\ttransition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\t\theight: 48px;\n\t\twidth: auto;\n\t\tmin-width: 120px;\n\t}\n\n\t.node-status-overlay--hovered {\n\t\tpointer-events: auto;\n\t\ttransform: translateY(-2px);\n\t}\n\n\t.node-status-overlay--hovered .node-status-overlay__status-display {\n\t\tbox-shadow:\n\t\t\t0 8px 25px -5px rgba(0, 0, 0, 0.15),\n\t\t\t0 4px 6px -1px rgba(0, 0, 0, 0.1),\n\t\t\tinset 0 1px 0 rgba(255, 255, 255, 0.2);\n\t\ttransform: scale(1.02);\n\t}\n\n\t.node-status-overlay__status-display {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tborder: 2px solid rgba(255, 255, 255, 0.3);\n\t\tborder-radius: 1rem;\n\t\tpadding: 0.5rem 1rem;\n\t\tbox-shadow:\n\t\t\t0 6px 12px -2px rgba(0, 0, 0, 0.15),\n\t\t\t0 4px 6px -1px rgba(0, 0, 0, 0.1),\n\t\t\tinset 0 1px 0 rgba(255, 255, 255, 0.2);\n\t\ttransition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\t\theight: 48px;\n\t\tbackdrop-filter: blur(12px);\n\t\t-webkit-backdrop-filter: blur(12px);\n\t\twidth: 100%;\n\t\tjustify-content: flex-start;\n\t\toverflow: hidden;\n\t}\n\n\t.node-status-overlay__status-icon {\n\t\twidth: 48px;\n\t\theight: 48px;\n\t\tborder-radius: 0.5rem;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tbox-shadow:\n\t\t\t0 2px 4px rgba(0, 0, 0, 0.1),\n\t\t\tinset 0 1px 0 rgba(255, 255, 255, 0.2);\n\t\ttransition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\t\tflex-shrink: 0;\n\t\tposition: relative;\n\t\tmargin: -0.5rem 0.5rem -0.5rem -1rem;\n\t}\n\n\t.node-status-overlay__count {\n\t\tbackground: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);\n\t\tcolor: #1f2937;\n\t\tborder: 2px solid rgba(255, 255, 255, 0.4);\n\t\tborder-radius: 0.75rem;\n\t\tpadding: var(--padding);\n\t\tfont-size: var(--label-size);\n\t\tfont-weight: 700;\n\t\tmin-width: 2rem;\n\t\ttext-align: center;\n\t\tline-height: 1;\n\t\tbox-shadow:\n\t\t\t0 3px 6px rgba(0, 0, 0, 0.15),\n\t\t\tinset 0 1px 0 rgba(255, 255, 255, 0.3);\n\t\theight: 48px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\ttransition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\t\ttext-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n\t}\n\n\t.node-status-overlay__details {\n\t\tposition: absolute;\n\t\ttop: 100%;\n\t\tright: 0;\n\t\tbackground-color: #ffffff;\n\t\tborder: 1px solid #e5e7eb;\n\t\tborder-radius: 0.5rem;\n\t\tpadding: 0.75rem;\n\t\tbox-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n\t\tmin-width: 200px;\n\t\tz-index: 1001;\n\t\tpointer-events: auto;\n\t}\n\n\t.node-status-overlay__detail-item {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 0.25rem;\n\t}\n\n\t.node-status-overlay__detail-item:last-child {\n\t\tmargin-bottom: 0;\n\t}\n\n\t.node-status-overlay__detail-label {\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 500;\n\t\tcolor: #6b7280;\n\t}\n\n\t.node-status-overlay__detail-value {\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 600;\n\t\tcolor: #374151;\n\t\ttext-align: right;\n\t\tmax-width: 120px;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.node-status-overlay__detail-item--error .node-status-overlay__detail-value {\n\t\tcolor: #ef4444;\n\t}\n\n\t/* Size variants */\n\t.node-status-overlay--sm {\n\t\tgap: 0.125rem;\n\t}\n\n\t.node-status-overlay--md {\n\t\tgap: 0.25rem;\n\t}\n\n\t.node-status-overlay--lg {\n\t\tgap: 0.375rem;\n\t}\n\n\t/* Animation for running status */\n\t.node-status-overlay__status-icon[style*='running'] {\n\t\tanimation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n\t}\n\n\t@keyframes pulse {\n\t\t0%,\n\t\t100% {\n\t\t\topacity: 1;\n\t\t}\n\t\t50% {\n\t\t\topacity: 0.5;\n\t\t}\n\t}\n</style>\n","/**\n * Node Wrapper Utilities\n * Provides utilities for wrapping nodes with status overlays\n */\n/**\n * Default configuration for node status overlays\n */\nexport const DEFAULT_NODE_STATUS_CONFIG = {\n    position: 'top-right',\n    size: 'md',\n    showDetails: true\n};\n/**\n * Create a node wrapper configuration\n */\nexport function createNodeWrapperConfig(nodeId, executionInfo, config = {}) {\n    return {\n        nodeId,\n        executionInfo,\n        statusPosition: config.position || DEFAULT_NODE_STATUS_CONFIG.position,\n        statusSize: config.size || DEFAULT_NODE_STATUS_CONFIG.size,\n        showStatusDetails: config.showDetails ?? DEFAULT_NODE_STATUS_CONFIG.showDetails\n    };\n}\n/**\n * Check if a node should show status overlay\n */\nexport function shouldShowNodeStatus(executionInfo) {\n    if (!executionInfo)\n        return false;\n    return (executionInfo.status !== 'idle' || executionInfo.executionCount > 0 || executionInfo.isExecuting);\n}\n/**\n * Get optimal status position based on node type\n */\nexport function getOptimalStatusPosition(nodeType) {\n    switch (nodeType) {\n        case 'tool':\n            return 'top-left';\n        case 'note':\n            return 'bottom-right';\n        case 'simple':\n        case 'square':\n        default:\n            return 'top-right';\n    }\n}\n/**\n * Get optimal status size based on node type\n */\nexport function getOptimalStatusSize(nodeType) {\n    switch (nodeType) {\n        case 'tool':\n            return 'sm';\n        case 'note':\n            return 'sm';\n        case 'simple':\n        case 'square':\n        default:\n            return 'md';\n    }\n}\n","/**\n * Node type utilities for FlowDrop\n * Handles dynamic node type resolution based on NodeMetadata\n */\n/**\n * Maps NodeType to SvelteFlow component names\n */\nconst NODE_TYPE_TO_COMPONENT_MAP = {\n    note: 'note',\n    simple: 'simple',\n    square: 'square',\n    tool: 'tool',\n    gateway: 'gateway',\n    default: 'workflowNode'\n};\n/**\n * Gets the SvelteFlow component name for a given NodeType\n */\nexport function getComponentNameForNodeType(nodeType) {\n    return NODE_TYPE_TO_COMPONENT_MAP[nodeType] || 'workflowNode';\n}\n/**\n * Gets the available node types for a given NodeMetadata\n * Priority: supportedTypes > type > \"default\"\n */\nexport function getAvailableNodeTypes(metadata) {\n    if (metadata.supportedTypes && metadata.supportedTypes.length > 0) {\n        return metadata.supportedTypes;\n    }\n    if (metadata.type) {\n        return [metadata.type];\n    }\n    return ['default'];\n}\n/**\n * Gets the primary (default) node type for a given NodeMetadata\n * This is used when no specific type is configured by the user\n */\nexport function getPrimaryNodeType(metadata) {\n    const availableTypes = getAvailableNodeTypes(metadata);\n    return availableTypes[0];\n}\n/**\n * Determines the appropriate node type based on configuration and metadata\n * Priority:\n * 1. configNodeType (if valid for this metadata)\n * 2. metadata.type (if valid)\n * 3. First supportedType\n * 4. \"default\"\n */\nexport function resolveNodeType(metadata, configNodeType) {\n    const availableTypes = getAvailableNodeTypes(metadata);\n    // Check if configNodeType is valid for this metadata\n    if (configNodeType && availableTypes.includes(configNodeType)) {\n        return configNodeType;\n    }\n    // Fall back to primary type\n    return getPrimaryNodeType(metadata);\n}\n/**\n * Gets the SvelteFlow component name for resolved node type\n * This replaces the old mapNodeType function\n */\nexport function resolveComponentName(metadata, configNodeType) {\n    const nodeType = resolveNodeType(metadata, configNodeType);\n    return getComponentNameForNodeType(nodeType);\n}\n/**\n * Validates if a node type is supported by the given metadata\n */\nexport function isNodeTypeSupported(metadata, nodeType) {\n    const availableTypes = getAvailableNodeTypes(metadata);\n    return availableTypes.includes(nodeType);\n}\n/**\n * Gets enum options for node type configuration\n * Used in config schemas to show available options\n */\nexport function getNodeTypeEnumOptions(metadata) {\n    const availableTypes = getAvailableNodeTypes(metadata);\n    const typeDisplayNames = {\n        note: 'Note (sticky note style)',\n        simple: 'Simple (compact layout)',\n        square: 'Square (geometric layout)',\n        tool: 'Tool (specialized for agent tools)',\n        gateway: 'Gateway (branching control flow)',\n        default: 'Default (standard workflow node)'\n    };\n    return {\n        enum: availableTypes,\n        enumNames: availableTypes.map((type) => typeDisplayNames[type] || type)\n    };\n}\n/**\n * Creates a nodeType config property that respects supportedTypes\n * This replaces hardcoded enum values in config schemas\n */\nexport function createNodeTypeConfigProperty(metadata, defaultType) {\n    const { enum: enumValues, enumNames } = getNodeTypeEnumOptions(metadata);\n    const primaryType = defaultType || getPrimaryNodeType(metadata);\n    return {\n        type: 'string',\n        title: 'Node Type',\n        description: 'Choose the visual representation for this node',\n        default: primaryType,\n        enum: enumValues,\n        enumNames\n    };\n}\n","<!--\n  Universal Node Component\n  Renders any node type with automatic status overlay injection\n  This component can replace individual node components in SvelteFlow\n-->\n\n<script lang=\"ts\">\n\timport type { WorkflowNode } from '../types/index.js';\n\timport WorkflowNodeComponent from './WorkflowNode.svelte';\n\timport NotesNode from './NotesNode.svelte';\n\timport SimpleNode from './SimpleNode.svelte';\n\timport SquareNode from './SquareNode.svelte';\n\timport ToolNode from './ToolNode.svelte';\n\timport GatewayNode from './GatewayNode.svelte';\n\timport NodeStatusOverlay from './NodeStatusOverlay.svelte';\n\timport {\n\t\tshouldShowNodeStatus,\n\t\tgetOptimalStatusPosition,\n\t\tgetOptimalStatusSize\n\t} from '../utils/nodeWrapper.js';\n\timport { resolveComponentName } from '../utils/nodeTypes.js';\n\n\tlet {\n\t\tdata,\n\t\tselected = false\n\t}: {\n\t\tdata: WorkflowNode['data'] & {\n\t\t\tnodeId?: string;\n\t\t\tonConfigOpen?: (node: { id: string; type: string; data: WorkflowNode['data'] }) => void;\n\t\t};\n\t\tselected?: boolean;\n\t} = $props();\n\n\t// Determine which node component to render based on node type\n\t// Priority: config.nodeType > metadata.type\n\t// Explicitly track config.nodeType to ensure reactivity\n\tlet configNodeType = $derived(data.config?.nodeType as string | undefined);\n\tlet resolvedComponentName = $derived(\n\t\tdata.metadata ? resolveComponentName(data.metadata, configNodeType) : 'workflowNode'\n\t);\n\tlet nodeComponent = $derived(getNodeComponent(resolvedComponentName));\n\n\t// Get execution info\n\tlet executionInfo = $derived(data.executionInfo);\n\tlet shouldShowStatus = $derived(\n\t\tshouldShowNodeStatus(executionInfo) && resolvedComponentName !== 'note'\n\t);\n\n\t/**\n\t * Get the appropriate node component based on type\n\t */\n\tfunction getNodeComponent(nodeType: string) {\n\t\tswitch (nodeType) {\n\t\t\tcase 'note':\n\t\t\t\treturn NotesNode;\n\t\t\tcase 'simple':\n\t\t\t\treturn SimpleNode;\n\t\t\tcase 'square':\n\t\t\t\treturn SquareNode;\n\t\t\tcase 'tool':\n\t\t\t\treturn ToolNode;\n\t\t\tcase 'gateway':\n\t\t\t\treturn GatewayNode;\n\t\t\tcase 'workflowNode':\n\t\t\tdefault:\n\t\t\t\treturn WorkflowNodeComponent;\n\t\t}\n\t}\n\n\t/**\n\t * Get optimal status position for this node type\n\t */\n\tfunction getStatusPosition(): 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right' {\n\t\treturn getOptimalStatusPosition(resolvedComponentName);\n\t}\n\n\t/**\n\t * Get optimal status size for this node type\n\t */\n\tfunction getStatusSize(): 'sm' | 'md' | 'lg' {\n\t\treturn getOptimalStatusSize(resolvedComponentName);\n\t}\n</script>\n\n<div class=\"universal-node\">\n\t<!-- Render the appropriate node component -->\n\t{#if nodeComponent === WorkflowNodeComponent}\n\t\t<WorkflowNodeComponent {data} {selected} />\n\t{:else if nodeComponent === NotesNode}\n\t\t<NotesNode {data} {selected} />\n\t{:else if nodeComponent === SimpleNode}\n\t\t<SimpleNode {data} {selected} />\n\t{:else if nodeComponent === SquareNode}\n\t\t<SquareNode {data} {selected} />\n\t{:else if nodeComponent === ToolNode}\n\t\t<ToolNode {data} {selected} />\n\t{:else if nodeComponent === GatewayNode}\n\t\t<GatewayNode {data} {selected} />\n\t{/if}\n\n\t<!-- Status overlay - only show if there's meaningful status information -->\n\t{#if shouldShowStatus}\n\t\t<NodeStatusOverlay\n\t\t\tnodeId={data.nodeId || 'unknown'}\n\t\t\t{executionInfo}\n\t\t\tposition={getStatusPosition()}\n\t\t\tsize={getStatusSize()}\n\t\t\tshowDetails={true}\n\t\t/>\n\t{/if}\n</div>\n\n<style>\n\t.universal-node {\n\t\tposition: relative;\n\t\tdisplay: inline-block;\n\t}\n</style>\n","/**\n * Client-side API service for FlowDrop\n * Provides methods to interact with the backend APIs using configurable endpoints\n */\nimport { buildEndpointUrl, getEndpointMethod, getEndpointHeaders } from '../config/endpoints.js';\nlet endpointConfig = null;\n/**\n * Set the endpoint configuration at runtime\n */\nexport function setEndpointConfig(config) {\n    endpointConfig = config;\n}\n/**\n * Get the current endpoint configuration\n */\nexport function getEndpointConfig() {\n    return endpointConfig;\n}\n/**\n * Set the API base URL (deprecated - use setEndpointConfig instead)\n * @deprecated Use setEndpointConfig() with a full EndpointConfig object instead\n */\nexport function setApiBaseUrl(url) {\n    console.warn(' setApiBaseUrl() is deprecated. Use setEndpointConfig() with a full EndpointConfig object instead.');\n    if (!endpointConfig) {\n        // Dynamic import for backward compatibility\n        import('../config/endpoints.js')\n            .then(({ createEndpointConfig }) => {\n            endpointConfig = createEndpointConfig(url);\n        })\n            .catch(() => {\n            // Failed to load endpoint config\n        });\n    }\n    else {\n        endpointConfig.baseUrl = url.replace(/\\/$/, '');\n    }\n}\n/**\n * Generic API request helper with endpoint configuration\n */\nasync function apiRequest(endpointKey, endpointPath, params, options = {}) {\n    if (!endpointConfig) {\n        throw new Error('Endpoint configuration not set. Call setEndpointConfig() first.');\n    }\n    const url = buildEndpointUrl(endpointConfig, endpointPath, params);\n    const method = getEndpointMethod(endpointConfig, endpointKey);\n    const headers = getEndpointHeaders(endpointConfig, endpointKey);\n    const response = await fetch(url, {\n        method,\n        headers,\n        ...options\n    });\n    // Check if response is JSON\n    const contentType = response.headers.get('content-type');\n    const isJson = contentType?.includes('application/json');\n    if (!response.ok) {\n        // Try to get error details\n        let errorMessage = `HTTP ${response.status}: ${response.statusText}`;\n        if (isJson) {\n            try {\n                const data = await response.json();\n                errorMessage = data.error || data.message || errorMessage;\n            }\n            catch {\n                // Failed to parse JSON, use default error message\n            }\n        }\n        else {\n            // Response is not JSON (probably HTML error page)\n            try {\n                const text = await response.text();\n                // Extract first 200 characters for debugging\n                const preview = text.substring(0, 200).trim();\n                errorMessage = `${errorMessage}. Server returned: ${preview}...`;\n            }\n            catch {\n                // Failed to read response text\n            }\n        }\n        throw new Error(errorMessage);\n    }\n    // Parse successful response\n    const data = await response.json();\n    return data;\n}\n/**\n * Node API methods\n */\nexport const nodeApi = {\n    /**\n     * Get all node types with optional filtering\n     */\n    async getNodes(options) {\n        if (!endpointConfig) {\n            throw new Error('Endpoint configuration not set');\n        }\n        const params = new URLSearchParams();\n        if (options?.category)\n            params.append('category', options.category);\n        if (options?.search)\n            params.append('search', options.search);\n        if (options?.limit)\n            params.append('limit', options.limit.toString());\n        if (options?.offset)\n            params.append('offset', options.offset.toString());\n        const response = await apiRequest('nodes.list', endpointConfig.endpoints.nodes.list + '?' + params.toString());\n        return response.data || [];\n    },\n    /**\n     * Get a specific node type by ID\n     */\n    async getNode(id) {\n        if (!endpointConfig) {\n            throw new Error('Endpoint configuration not set');\n        }\n        const response = await apiRequest('nodes.get', endpointConfig.endpoints.nodes.get, { id });\n        if (!response.data) {\n            throw new Error('Node not found');\n        }\n        return response.data;\n    }\n};\n/**\n * Workflow API methods\n */\nexport const workflowApi = {\n    /**\n     * Get all workflows with optional filtering\n     */\n    async getWorkflows(options) {\n        if (!endpointConfig) {\n            throw new Error('Endpoint configuration not set');\n        }\n        const params = new URLSearchParams();\n        if (options?.search)\n            params.append('search', options.search);\n        if (options?.limit)\n            params.append('limit', options.limit.toString());\n        if (options?.offset)\n            params.append('offset', options.offset.toString());\n        const response = await apiRequest('workflows.list', endpointConfig.endpoints.workflows.list + '?' + params.toString());\n        return response.data || [];\n    },\n    /**\n     * Get a specific workflow by ID\n     */\n    async getWorkflow(id) {\n        if (!endpointConfig) {\n            throw new Error('Endpoint configuration not set');\n        }\n        const response = await apiRequest('workflows.get', endpointConfig.endpoints.workflows.get, { id });\n        if (!response.data) {\n            throw new Error('Workflow not found');\n        }\n        return response.data;\n    },\n    /**\n     * Create a new workflow\n     */\n    async createWorkflow(workflow) {\n        if (!endpointConfig) {\n            throw new Error('Endpoint configuration not set');\n        }\n        // Transform workflow data for Drupal backend compatibility\n        // Drupal expects \"label\" instead of \"name\"\n        const drupalWorkflow = {\n            ...workflow,\n            label: workflow.name, // Map name to label for Drupal\n            name: workflow.name // Keep name as well for compatibility\n        };\n        const response = await apiRequest('workflows.create', endpointConfig.endpoints.workflows.create, undefined, {\n            method: 'POST',\n            body: JSON.stringify(drupalWorkflow)\n        });\n        if (!response.data) {\n            throw new Error('Failed to create workflow');\n        }\n        return response.data;\n    },\n    /**\n     * Update an existing workflow\n     */\n    async updateWorkflow(id, workflow) {\n        if (!endpointConfig) {\n            throw new Error('Endpoint configuration not set');\n        }\n        // Transform workflow data for Drupal backend compatibility\n        // Drupal expects \"label\" instead of \"name\"\n        const drupalWorkflow = workflow.name\n            ? {\n                ...workflow,\n                label: workflow.name, // Map name to label for Drupal\n                name: workflow.name // Keep name as well for compatibility\n            }\n            : workflow;\n        const response = await apiRequest('workflows.update', endpointConfig.endpoints.workflows.update, { id }, {\n            method: 'PUT',\n            body: JSON.stringify(drupalWorkflow)\n        });\n        if (!response.data) {\n            throw new Error('Failed to update workflow');\n        }\n        return response.data;\n    },\n    /**\n     * Delete a workflow\n     */\n    async deleteWorkflow(id) {\n        if (!endpointConfig) {\n            throw new Error('Endpoint configuration not set');\n        }\n        await apiRequest('workflows.delete', endpointConfig.endpoints.workflows.delete, { id }, { method: 'DELETE' });\n    },\n    /**\n     * Save workflow (create or update)\n     */\n    async saveWorkflow(workflow) {\n        // Check if this is an existing workflow by looking for a valid ID\n        // Valid IDs should not be a UUID (which indicates a new workflow)\n        const isExistingWorkflow = workflow.id &&\n            workflow.id.length > 0 &&\n            !workflow.id.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);\n        if (isExistingWorkflow) {\n            // Update existing workflow\n            return this.updateWorkflow(workflow.id, workflow);\n        }\n        else {\n            // Create new workflow\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            const { id, ...workflowData } = workflow;\n            return this.createWorkflow(workflowData);\n        }\n    }\n};\n/**\n * Export the API service\n */\nexport const api = {\n    nodes: nodeApi,\n    workflows: workflowApi\n};\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n","/**\n * Node Execution Service\n * Handles fetching and managing node execution information from the backend\n */\nimport { getEndpointConfig } from './api.js';\nimport { buildEndpointUrl } from '../config/endpoints.js';\n/**\n * Service for managing node execution information\n */\nexport class NodeExecutionService {\n    static instance;\n    cache = new Map();\n    cacheTimeout = 30000; // 30 seconds\n    lastFetch = 0;\n    apiUnavailable = false;\n    apiUnavailableUntil = 0;\n    constructor() { }\n    static getInstance() {\n        if (!NodeExecutionService.instance) {\n            NodeExecutionService.instance = new NodeExecutionService();\n        }\n        return NodeExecutionService.instance;\n    }\n    /**\n     * Get execution information for a specific node from pipeline data\n     */\n    async getNodeExecutionInfo(nodeId, pipelineId) {\n        if (!pipelineId) {\n            return null;\n        }\n        try {\n            const endpointConfig = getEndpointConfig();\n            const url = buildEndpointUrl(endpointConfig, endpointConfig.endpoints.pipelines.get, {\n                id: pipelineId\n            });\n            const response = await fetch(url);\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`);\n            }\n            const pipelineData = await response.json();\n            const jobs = pipelineData.jobs || [];\n            const nodeStatuses = pipelineData.node_statuses || {};\n            // Find the job for this node\n            const nodeJob = jobs.find((job) => job.node_id === nodeId);\n            const nodeStatus = nodeStatuses[nodeId];\n            if (!nodeJob && !nodeStatus) {\n                return {\n                    status: 'idle',\n                    executionCount: 0,\n                    isExecuting: false\n                };\n            }\n            const executionInfo = {\n                status: this.mapJobStatusToExecutionStatus(nodeStatus?.status || nodeJob?.status || 'idle'),\n                executionCount: nodeJob?.execution_count || 0,\n                isExecuting: nodeStatus?.status === 'running' || nodeJob?.status === 'running',\n                lastExecuted: nodeJob?.last_executed || nodeStatus?.last_executed,\n                lastExecutionDuration: nodeJob?.execution_time || nodeStatus?.execution_time,\n                lastError: nodeJob?.error || nodeStatus?.error\n            };\n            this.cache.set(nodeId, executionInfo);\n            return executionInfo;\n        }\n        catch (error) {\n            console.error('Failed to fetch node execution info:', error);\n            return null;\n        }\n    }\n    /**\n     * Get execution information for multiple nodes from pipeline data\n     */\n    async getMultipleNodeExecutionInfo(nodeIds, pipelineId) {\n        if (!pipelineId) {\n            return {};\n        }\n        // Check if API is temporarily unavailable\n        if (this.apiUnavailable && Date.now() < this.apiUnavailableUntil) {\n            const defaultExecutionInfo = {};\n            nodeIds.forEach((nodeId) => {\n                defaultExecutionInfo[nodeId] = {\n                    status: 'idle',\n                    executionCount: 0,\n                    isExecuting: false\n                };\n            });\n            return defaultExecutionInfo;\n        }\n        try {\n            const endpointConfig = getEndpointConfig();\n            const url = buildEndpointUrl(endpointConfig, endpointConfig.endpoints.pipelines.get, {\n                id: pipelineId\n            });\n            const response = await fetch(url);\n            if (!response.ok) {\n                // If the endpoint returns 404, it means the pipeline API is not available\n                // Mark API as unavailable for 5 minutes to prevent repeated calls\n                if (response.status === 404) {\n                    console.warn(`Pipeline API endpoint not available for pipeline ${pipelineId}`);\n                    this.apiUnavailable = true;\n                    this.apiUnavailableUntil = Date.now() + 5 * 60 * 1000; // 5 minutes\n                    const defaultExecutionInfo = {};\n                    nodeIds.forEach((nodeId) => {\n                        defaultExecutionInfo[nodeId] = {\n                            status: 'idle',\n                            executionCount: 0,\n                            isExecuting: false\n                        };\n                    });\n                    return defaultExecutionInfo;\n                }\n                throw new Error(`HTTP error! status: ${response.status}`);\n            }\n            const result = await response.json();\n            const jobs = result.jobs || [];\n            const executionInfoMap = {};\n            // Initialize all nodes with default values\n            nodeIds.forEach((nodeId) => {\n                executionInfoMap[nodeId] = {\n                    status: 'idle',\n                    executionCount: 0,\n                    isExecuting: false\n                };\n            });\n            // Update with actual job data\n            jobs.forEach((job) => {\n                const nodeId = job.node_id;\n                if (nodeIds.includes(nodeId)) {\n                    executionInfoMap[nodeId] = {\n                        status: this.mapJobStatusToExecutionStatus(job.status),\n                        executionCount: job.execution_count || 0,\n                        isExecuting: job.status === 'running',\n                        lastExecuted: job.completed || job.started,\n                        lastExecutionDuration: job.execution_time,\n                        lastError: job.error_message\n                    };\n                    // Update cache\n                    this.cache.set(nodeId, executionInfoMap[nodeId]);\n                }\n            });\n            return executionInfoMap;\n        }\n        catch (error) {\n            console.error('Failed to fetch multiple node execution info:', error);\n            // Return default values instead of empty object to prevent repeated calls\n            const defaultExecutionInfo = {};\n            nodeIds.forEach((nodeId) => {\n                defaultExecutionInfo[nodeId] = {\n                    status: 'idle',\n                    executionCount: 0,\n                    isExecuting: false\n                };\n            });\n            return defaultExecutionInfo;\n        }\n    }\n    /**\n     * Get all node execution counts\n     */\n    async getAllNodeExecutionCounts() {\n        try {\n            const endpointConfig = getEndpointConfig();\n            const url = buildEndpointUrl(endpointConfig, '/node-execution-counts');\n            const response = await fetch(url);\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`);\n            }\n            const result = await response.json();\n            if (result.success && result.data) {\n                return result.data;\n            }\n            return {};\n        }\n        catch (error) {\n            console.error('Failed to fetch all node execution counts:', error);\n            return {};\n        }\n    }\n    /**\n     * Get cached execution info for a node\n     */\n    getCachedNodeExecutionInfo(nodeId) {\n        return this.cache.get(nodeId) || null;\n    }\n    /**\n     * Clear cache for a specific node\n     */\n    clearNodeCache(nodeId) {\n        this.cache.delete(nodeId);\n    }\n    /**\n     * Clear all cache\n     */\n    clearAllCache() {\n        this.cache.clear();\n        this.lastFetch = 0;\n    }\n    /**\n     * Check if cache is stale\n     */\n    isCacheStale() {\n        return Date.now() - this.lastFetch > this.cacheTimeout;\n    }\n    /**\n     * Update execution info for a node (for real-time updates)\n     */\n    updateNodeExecutionInfo(nodeId, executionInfo) {\n        const existing = this.cache.get(nodeId);\n        if (existing) {\n            this.cache.set(nodeId, { ...existing, ...executionInfo });\n        }\n        else {\n            this.cache.set(nodeId, {\n                status: 'idle',\n                executionCount: 0,\n                isExecuting: false,\n                ...executionInfo\n            });\n        }\n    }\n    /**\n     * Map job status to execution status\n     */\n    mapJobStatusToExecutionStatus(jobStatus) {\n        switch (jobStatus) {\n            case 'pending':\n                return 'pending';\n            case 'running':\n                return 'running';\n            case 'completed':\n                return 'completed';\n            case 'failed':\n                return 'failed';\n            case 'cancelled':\n                return 'cancelled';\n            case 'skipped':\n                return 'skipped';\n            default:\n                return 'idle';\n        }\n    }\n    /**\n     * Batch update execution info for multiple nodes\n     */\n    updateMultipleNodeExecutionInfo(updates) {\n        Object.entries(updates).forEach(([nodeId, executionInfo]) => {\n            this.updateNodeExecutionInfo(nodeId, executionInfo);\n        });\n    }\n    /**\n     * Reset API availability status (useful for testing or when API becomes available)\n     */\n    resetApiAvailability() {\n        this.apiUnavailable = false;\n        this.apiUnavailableUntil = 0;\n    }\n}\n// Export singleton instance\nexport const nodeExecutionService = NodeExecutionService.getInstance();\n","/**\n * Workflow Editor Helper\n * Contains business logic for workflow operations\n */\nimport { MarkerType } from '@xyflow/svelte';\nimport { hasCycles } from '../utils/connections.js';\nimport { workflowApi, nodeApi, setEndpointConfig } from '../services/api.js';\nimport { v4 as uuidv4 } from 'uuid';\nimport { workflowActions } from '../stores/workflowStore.js';\nimport { nodeExecutionService } from '../services/nodeExecutionService.js';\n/**\n * Generate a unique node ID based on node type and existing nodes\n * Format: <node_type>.<number>\n * Example: boolean_gateway.1, calculator.2\n */\nexport function generateNodeId(nodeTypeId, existingNodes) {\n    // Count how many nodes of this type already exist\n    const existingNodeIds = existingNodes\n        .filter((node) => node.data?.metadata?.id === nodeTypeId)\n        .map((node) => node.id);\n    // Extract the numbers from existing IDs with the same prefix\n    const existingNumbers = existingNodeIds\n        .map((id) => {\n        const match = id.match(new RegExp(`^${nodeTypeId}\\\\.(\\\\d+)$`));\n        return match ? parseInt(match[1], 10) : 0;\n    })\n        .filter((num) => num > 0);\n    // Find the next available number (highest + 1)\n    const nextNumber = existingNumbers.length > 0 ? Math.max(...existingNumbers) + 1 : 1;\n    return `${nodeTypeId}.${nextNumber}`;\n}\n/**\n * Edge styling configuration\n */\nexport class EdgeStylingHelper {\n    /**\n     * Apply custom styling to connection edges based on rules:\n     * - Dashed lines for connections to tool nodes\n     * - Arrow markers pointing towards input ports\n     */\n    static applyConnectionStyling(edge, sourceNode, targetNode) {\n        // Rule 1: Dashed lines for tool nodes\n        // A node is a tool node when it uses the ToolNode component,\n        // which happens when sourceNode.type === \"tool\"\n        const isToolNode = sourceNode.type === 'tool';\n        // Use inline styles for dashed lines (more reliable than CSS classes)\n        if (isToolNode) {\n            edge.style = 'stroke-dasharray: 0 4 0; stroke: amber !important;';\n            edge.class = 'flowdrop--edge--tool';\n        }\n        else {\n            edge.style = 'stroke: grey;';\n        }\n        // Store metadata in edge data for debugging\n        edge.data = {\n            ...edge.data,\n            isToolConnection: isToolNode,\n            targetNodeType: targetNode.type,\n            targetCategory: targetNode.data.metadata.category\n        };\n        // Rule 2: Always add arrow pointing towards input port\n        // This replaces the default arrows we removed\n        if (!isToolNode) {\n            edge.markerEnd = {\n                type: MarkerType.ArrowClosed,\n                width: 16,\n                height: 16,\n                color: 'grey'\n            };\n        }\n    }\n    /**\n     * Update existing edges with custom styling rules\n     */\n    static updateEdgeStyles(edges, nodes) {\n        return edges.map((edge) => {\n            // Find source and target nodes\n            const sourceNode = nodes.find((node) => node.id === edge.source);\n            const targetNode = nodes.find((node) => node.id === edge.target);\n            if (!sourceNode || !targetNode) {\n                return edge;\n            }\n            // Create a copy of the edge and apply styling\n            const updatedEdge = { ...edge };\n            this.applyConnectionStyling(updatedEdge, sourceNode, targetNode);\n            return updatedEdge;\n        });\n    }\n}\n/**\n * Node operations helper\n */\nexport class NodeOperationsHelper {\n    /**\n     * Load nodes from API\n     */\n    static async loadNodesFromApi(providedNodes) {\n        // If nodes are provided via props, use them\n        if (providedNodes && providedNodes.length > 0) {\n            return providedNodes;\n        }\n        // Otherwise, load from API\n        try {\n            const fetchedNodes = await nodeApi.getNodes();\n            return fetchedNodes;\n        }\n        catch (error) {\n            console.error(' Failed to load nodes from API:', error);\n            // Use fallback sample nodes\n            return [\n                {\n                    id: 'text-input',\n                    name: 'Text Input',\n                    category: 'inputs',\n                    description: 'Simple text input field',\n                    version: '1.0.0',\n                    icon: 'mdi:text-box',\n                    inputs: [],\n                    outputs: [{ id: 'text', name: 'text', type: 'output', dataType: 'string' }]\n                },\n                {\n                    id: 'text-output',\n                    name: 'Text Output',\n                    category: 'outputs',\n                    description: 'Display text output',\n                    version: '1.0.0',\n                    icon: 'mdi:text-box-outline',\n                    inputs: [{ id: 'text', name: 'text', type: 'input', dataType: 'string' }],\n                    outputs: []\n                }\n            ];\n        }\n    }\n    /**\n     * Load node execution information for all nodes in the workflow\n     */\n    static async loadNodeExecutionInfo(workflow, pipelineId) {\n        if (!workflow?.nodes)\n            return {};\n        // Only load execution info if we have a pipelineId (for pipeline status mode)\n        if (!pipelineId)\n            return {};\n        try {\n            const nodeIds = workflow.nodes.map((node) => node.id);\n            const executionInfo = await nodeExecutionService.getMultipleNodeExecutionInfo(nodeIds, pipelineId);\n            return executionInfo;\n        }\n        catch (error) {\n            console.error('Failed to load node execution info:', error);\n            return {};\n        }\n    }\n    /**\n     * Create a new node from dropped data\n     */\n    static createNodeFromDrop(nodeTypeData, position, existingNodes = []) {\n        try {\n            const parsedData = JSON.parse(nodeTypeData);\n            // Handle both old format (with type: \"node\") and new format (direct NodeMetadata)\n            let nodeType;\n            let nodeData;\n            if (parsedData.type === 'node') {\n                // Old format from sidebar\n                nodeType = parsedData.nodeData.metadata;\n                nodeData = parsedData.nodeData;\n            }\n            else {\n                // New format (direct NodeMetadata)\n                nodeType = parsedData;\n                // Extract initial config from configSchema\n                let initialConfig = {};\n                if (nodeType.configSchema && typeof nodeType.configSchema === 'object') {\n                    // If configSchema is a JSON Schema, extract default values\n                    if (nodeType.configSchema.properties) {\n                        // JSON Schema format - extract defaults\n                        Object.entries(nodeType.configSchema.properties).forEach(([key, prop]) => {\n                            if (prop && typeof prop === 'object' && 'default' in prop) {\n                                initialConfig[key] = prop.default;\n                            }\n                        });\n                    }\n                    else {\n                        // Simple object format - use as is\n                        initialConfig = { ...nodeType.configSchema };\n                    }\n                }\n                nodeData = {\n                    label: nodeType.name,\n                    config: initialConfig,\n                    metadata: nodeType\n                };\n            }\n            // Generate node ID based on node type and existing nodes\n            const newNodeId = generateNodeId(nodeType.id, existingNodes);\n            // All nodes use \"universalNode\" type\n            // UniversalNode component handles internal switching based on metadata and config\n            const newNode = {\n                id: newNodeId,\n                type: 'universalNode',\n                position, // Use the position calculated from the drop event\n                deletable: true,\n                data: {\n                    ...nodeData,\n                    nodeId: newNodeId // Use the same ID\n                }\n            };\n            return newNode;\n        }\n        catch (error) {\n            console.error('Error parsing node data:', error);\n            return null;\n        }\n    }\n}\n/**\n * Workflow operations helper\n */\nexport class WorkflowOperationsHelper {\n    /**\n     * Generate workflow metadata for updates\n     */\n    static generateMetadata(existingMetadata) {\n        return {\n            ...existingMetadata,\n            updatedAt: new Date().toISOString(),\n            versionId: `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n            updateNumber: (existingMetadata?.updateNumber || 0) + 1\n        };\n    }\n    /**\n     * Update workflow with new nodes/edges and generate new metadata\n     */\n    static updateWorkflow(workflow, nodes, edges) {\n        return {\n            ...workflow,\n            nodes,\n            edges,\n            metadata: this.generateMetadata(workflow.metadata)\n        };\n    }\n    /**\n     * Clear workflow (remove all nodes and edges)\n     */\n    static clearWorkflow(workflow) {\n        return {\n            ...workflow,\n            nodes: [],\n            edges: [],\n            metadata: this.generateMetadata(workflow.metadata)\n        };\n    }\n    /**\n     * Update node configuration\n     */\n    static updateNodeConfig(workflow, nodeId, newConfig) {\n        return {\n            ...workflow,\n            nodes: workflow.nodes.map((node) => node.id === nodeId\n                ? {\n                    ...node,\n                    data: { ...node.data, config: { ...newConfig } }\n                }\n                : node),\n            metadata: this.generateMetadata(workflow.metadata)\n        };\n    }\n    /**\n     * Add a new node to the workflow\n     */\n    static addNode(workflow, node) {\n        return {\n            ...workflow,\n            nodes: [...workflow.nodes, node],\n            metadata: this.generateMetadata(workflow.metadata)\n        };\n    }\n    /**\n     * Save workflow to backend\n     */\n    static async saveWorkflow(workflow) {\n        if (!workflow) {\n            console.warn('No workflow data available to save');\n            return null;\n        }\n        try {\n            // Determine the workflow ID based on whether we have an existing workflow\n            let workflowId;\n            if (workflow.id) {\n                // Use the existing workflow ID\n                workflowId = workflow.id;\n            }\n            else {\n                // Generate a new UUID for a new workflow\n                workflowId = uuidv4();\n            }\n            const workflowToSave = {\n                id: workflowId,\n                name: workflow.name || 'Untitled Workflow',\n                nodes: workflow.nodes || [],\n                edges: workflow.edges || [],\n                metadata: {\n                    version: '1.0.0',\n                    createdAt: workflow.metadata?.createdAt || new Date().toISOString(),\n                    updatedAt: new Date().toISOString()\n                }\n            };\n            const savedWorkflow = await workflowApi.saveWorkflow(workflowToSave);\n            // Update the workflow ID if it changed (new workflow)\n            if (savedWorkflow.id && savedWorkflow.id !== workflowToSave.id) {\n                workflowActions.batchUpdate({\n                    nodes: workflowToSave.nodes,\n                    edges: workflowToSave.edges,\n                    name: workflowToSave.name,\n                    metadata: {\n                        ...workflowToSave.metadata,\n                        ...savedWorkflow.metadata\n                    }\n                });\n            }\n            return savedWorkflow;\n        }\n        catch (error) {\n            console.error(' Failed to save workflow:', error);\n            throw error;\n        }\n    }\n    /**\n     * Export workflow as JSON file\n     */\n    static exportWorkflow(workflow) {\n        if (!workflow) {\n            console.warn('No workflow data available to export');\n            return;\n        }\n        // Use the same ID logic as saveWorkflow\n        const workflowId = workflow.id || uuidv4();\n        const workflowToExport = {\n            id: workflowId,\n            name: workflow.name || 'Untitled Workflow',\n            nodes: workflow.nodes || [],\n            edges: workflow.edges || [],\n            metadata: {\n                version: '1.0.0',\n                createdAt: workflow.metadata?.createdAt || new Date().toISOString(),\n                updatedAt: new Date().toISOString()\n            }\n        };\n        const dataStr = JSON.stringify(workflowToExport, null, 2);\n        const dataBlob = new Blob([dataStr], { type: 'application/json' });\n        const url = URL.createObjectURL(dataBlob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `${workflowToExport.name}.json`;\n        link.click();\n        URL.revokeObjectURL(url);\n    }\n    /**\n     * Check if workflow has cycles\n     */\n    static checkWorkflowCycles(nodes, edges) {\n        return hasCycles(nodes, edges);\n    }\n}\n/**\n * Configuration helper\n */\nexport class ConfigurationHelper {\n    /**\n     * Configure API endpoints\n     */\n    static configureEndpoints(config) {\n        setEndpointConfig(config);\n    }\n}\n","/**\n * Performance Utilities\n * Helper functions for optimizing performance in the FlowDrop app\n */\n/**\n * Fast shallow comparison for workflow nodes\n * Avoids expensive JSON.stringify operations\n */\nexport function areNodeArraysEqual(nodes1, nodes2) {\n    if (nodes1.length !== nodes2.length)\n        return false;\n    for (let i = 0; i < nodes1.length; i++) {\n        const node1 = nodes1[i];\n        const node2 = nodes2[i];\n        // Quick ID check\n        if (node1?.id !== node2?.id)\n            return false;\n        // Check position (most common change during drag)\n        if (node1?.position?.x !== node2?.position?.x || node1?.position?.y !== node2?.position?.y) {\n            return false;\n        }\n        // Check selected state\n        if (node1?.selected !== node2?.selected)\n            return false;\n        // Skip deep config comparison unless we need to\n        // Most updates are position-based\n    }\n    return true;\n}\n/**\n * Fast shallow comparison for workflow edges\n * Avoids expensive JSON.stringify operations\n */\nexport function areEdgeArraysEqual(edges1, edges2) {\n    if (edges1.length !== edges2.length)\n        return false;\n    for (let i = 0; i < edges1.length; i++) {\n        const edge1 = edges1[i];\n        const edge2 = edges2[i];\n        if (edge1?.id !== edge2?.id ||\n            edge1?.source !== edge2?.source ||\n            edge1?.target !== edge2?.target ||\n            edge1?.sourceHandle !== edge2?.sourceHandle ||\n            edge1?.targetHandle !== edge2?.targetHandle) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Throttle function execution to reduce frequency\n * Uses requestAnimationFrame for smooth UI updates\n */\nexport function throttle(func, wait) {\n    let timeout = null;\n    let lastRan = 0;\n    return function (...args) {\n        const now = Date.now();\n        if (!lastRan || now - lastRan >= wait) {\n            func(...args);\n            lastRan = now;\n        }\n        else {\n            if (timeout) {\n                clearTimeout(timeout);\n            }\n            timeout = setTimeout(() => {\n                func(...args);\n                lastRan = Date.now();\n            }, wait - (now - lastRan));\n        }\n    };\n}\n/**\n * Debounce function execution to reduce frequency\n * Waits for a pause in calls before executing\n */\nexport function debounce(func, wait) {\n    let timeout = null;\n    return function (...args) {\n        if (timeout) {\n            clearTimeout(timeout);\n        }\n        timeout = setTimeout(() => {\n            func(...args);\n        }, wait);\n    };\n}\n/**\n * RequestAnimationFrame-based throttle for smooth animations\n * Better for visual updates like node dragging\n */\nexport function rafThrottle(func) {\n    let rafId = null;\n    let lastArgs = null;\n    return function (...args) {\n        lastArgs = args;\n        if (rafId === null) {\n            rafId = requestAnimationFrame(() => {\n                if (lastArgs) {\n                    func(...lastArgs);\n                }\n                rafId = null;\n                lastArgs = null;\n            });\n        }\n    };\n}\n","<!--\n  Workflow Editor Component\n  Main workflow editor with sidebar and flow canvas\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport {\n\t\tSvelteFlow,\n\t\tConnectionLineType,\n\t\tControls,\n\t\tBackground,\n\t\tBackgroundVariant,\n\t\tMiniMap,\n\t\tSvelteFlowProvider\n\t} from '@xyflow/svelte';\n\timport '@xyflow/svelte/dist/style.css';\n\timport type {\n\t\tWorkflowNode as WorkflowNodeType,\n\t\tNodeMetadata,\n\t\tWorkflow,\n\t\tWorkflowEdge\n\t} from '../types/index.js';\n\timport CanvasBanner from './CanvasBanner.svelte';\n\timport FlowDropZone from './FlowDropZone.svelte';\n\timport { tick } from 'svelte';\n\timport type { EndpointConfig } from '../config/endpoints.js';\n\timport ConnectionLine from './ConnectionLine.svelte';\n\timport { workflowStore, workflowActions } from '../stores/workflowStore.js';\n\timport UniversalNode from './UniversalNode.svelte';\n\timport {\n\t\tEdgeStylingHelper,\n\t\tNodeOperationsHelper,\n\t\tWorkflowOperationsHelper,\n\t\tConfigurationHelper\n\t} from '../helpers/workflowEditorHelper.js';\n\timport type { NodeExecutionInfo } from '../types/index.js';\n\timport { areNodeArraysEqual, areEdgeArraysEqual, throttle } from '../utils/performanceUtils.js';\n\n\tinterface Props {\n\t\tnodes?: NodeMetadata[];\n\t\t// workflow?: Workflow; // Removed - use global store directly\n\t\tendpointConfig?: EndpointConfig;\n\t\theight?: string | number;\n\t\twidth?: string | number;\n\t\tisConfigSidebarOpen?: boolean;\n\t\tselectedNodeForConfig?: WorkflowNodeType | null;\n\t\topenConfigSidebar?: (node: WorkflowNodeType) => void;\n\t\tcloseConfigSidebar?: () => void;\n\t\t// New configuration options for pipeline status mode\n\t\tlockWorkflow?: boolean;\n\t\treadOnly?: boolean;\n\t\tnodeStatuses?: Record<string, 'pending' | 'running' | 'completed' | 'error'>;\n\t\t// Pipeline ID for fetching node execution info from jobs\n\t\tpipelineId?: string;\n\t}\n\n\tlet props: Props = $props();\n\n\t// Create a local currentWorkflow variable that we can control directly\n\tlet currentWorkflow = $state<Workflow | null>(null);\n\n\t// Initialize currentWorkflow from global store\n\t$effect(() => {\n\t\tif ($workflowStore) {\n\t\t\tcurrentWorkflow = $workflowStore;\n\t\t}\n\t});\n\n\t// Create local reactive variables that sync with currentWorkflow\n\tlet flowNodes = $state<WorkflowNodeType[]>([]);\n\tlet flowEdges = $state<WorkflowEdge[]>([]);\n\n\t// Sync local state with currentWorkflow\n\tlet loadExecutionInfoTimeout: number | null = null;\n\tlet executionInfoAbortController: AbortController | null = null;\n\t// Track previous workflow ID to detect when we need to reload execution info\n\tlet previousWorkflowId: string | null = null;\n\tlet previousPipelineId: string | undefined = undefined;\n\n\t$effect(() => {\n\t\tif (currentWorkflow) {\n\t\t\tflowNodes = currentWorkflow.nodes.map((node) => ({\n\t\t\t\t...node,\n\t\t\t\tdata: {\n\t\t\t\t\t...node.data,\n\t\t\t\t\tonConfigOpen: props.openConfigSidebar\n\t\t\t\t}\n\t\t\t}));\n\t\t\tflowEdges = currentWorkflow.edges;\n\n\t\t\t// Only load execution info if we have a pipelineId (pipeline status mode)\n\t\t\t// and if the workflow or pipeline has changed\n\t\t\tconst workflowChanged = currentWorkflow.id !== previousWorkflowId;\n\t\t\tconst pipelineChanged = props.pipelineId !== previousPipelineId;\n\n\t\t\tif (props.pipelineId && (workflowChanged || pipelineChanged)) {\n\t\t\t\t// Cancel any pending timeout\n\t\t\t\tif (loadExecutionInfoTimeout) {\n\t\t\t\t\tclearTimeout(loadExecutionInfoTimeout);\n\t\t\t\t\tloadExecutionInfoTimeout = null;\n\t\t\t\t}\n\n\t\t\t\t// Cancel any in-flight request\n\t\t\t\tif (executionInfoAbortController) {\n\t\t\t\t\texecutionInfoAbortController.abort();\n\t\t\t\t\texecutionInfoAbortController = null;\n\t\t\t\t}\n\n\t\t\t\t// Update tracking variables\n\t\t\t\tpreviousWorkflowId = currentWorkflow.id;\n\t\t\t\tpreviousPipelineId = props.pipelineId;\n\n\t\t\t\t// Use requestIdleCallback for non-critical updates (falls back to setTimeout)\n\t\t\t\tif (typeof requestIdleCallback !== 'undefined') {\n\t\t\t\t\tloadExecutionInfoTimeout = requestIdleCallback(\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\tloadNodeExecutionInfo();\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ timeout: 500 }\n\t\t\t\t\t) as unknown as number;\n\t\t\t\t} else {\n\t\t\t\t\t// Fallback to setTimeout with longer delay for better performance\n\t\t\t\t\tloadExecutionInfoTimeout = setTimeout(() => {\n\t\t\t\t\t\tloadNodeExecutionInfo();\n\t\t\t\t\t}, 300) as unknown as number;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\t/**\n\t * Throttled function to update the global store\n\t * Reduces update frequency during rapid changes (e.g., node dragging)\n\t * Uses 16ms throttle (~60fps) for smooth performance\n\t */\n\tconst updateGlobalStore = throttle((): void => {\n\t\tif (currentWorkflow) {\n\t\t\tworkflowActions.updateWorkflow(currentWorkflow);\n\t\t}\n\t}, 16);\n\n\t/**\n\t * Load node execution information for all nodes in the workflow\n\t * Optimized to reduce processing time and prevent blocking the main thread\n\t */\n\tasync function loadNodeExecutionInfo(): Promise<void> {\n\t\tif (!currentWorkflow?.nodes || !props.pipelineId) return;\n\n\t\ttry {\n\t\t\t// Create abort controller for this request\n\t\t\texecutionInfoAbortController = new AbortController();\n\n\t\t\t// Fetch execution info with abort signal\n\t\t\tconst executionInfo = await NodeOperationsHelper.loadNodeExecutionInfo(\n\t\t\t\tcurrentWorkflow,\n\t\t\t\tprops.pipelineId\n\t\t\t);\n\n\t\t\t// Check if request was aborted\n\t\t\tif (executionInfoAbortController?.signal.aborted) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Default execution info for nodes without data\n\t\t\tconst defaultExecutionInfo: NodeExecutionInfo = {\n\t\t\t\tstatus: 'idle' as const,\n\t\t\t\texecutionCount: 0,\n\t\t\t\tisExecuting: false\n\t\t\t};\n\n\t\t\t// Optimize: Single pass through nodes instead of multiple maps\n\t\t\t// This reduces processing time from ~100ms to ~10-20ms for large workflows\n\t\t\tconst updatedNodes = currentWorkflow.nodes.map((node) => ({\n\t\t\t\t...node,\n\t\t\t\tdata: {\n\t\t\t\t\t...node.data,\n\t\t\t\t\texecutionInfo: executionInfo[node.id] || defaultExecutionInfo,\n\t\t\t\t\tonConfigOpen: props.openConfigSidebar\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\t// Update state in a single operation\n\t\t\tflowNodes = updatedNodes;\n\t\t\tcurrentWorkflow.nodes = updatedNodes;\n\n\t\t\t// Clear abort controller\n\t\t\texecutionInfoAbortController = null;\n\t\t} catch (error) {\n\t\t\t// Only log if it's not an abort error\n\t\t\tif (error instanceof Error && error.name !== 'AbortError') {\n\t\t\t\tconsole.error('Failed to load node execution info:', error);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Function to update currentWorkflow when SvelteFlow changes nodes/edges\n\tfunction updateCurrentWorkflowFromSvelteFlow(): void {\n\t\tif (currentWorkflow) {\n\t\t\tcurrentWorkflow = WorkflowOperationsHelper.updateWorkflow(\n\t\t\t\tcurrentWorkflow,\n\t\t\t\tflowNodes,\n\t\t\t\tflowEdges\n\t\t\t);\n\n\t\t\t// Update the global store\n\t\t\tupdateGlobalStore();\n\t\t}\n\t}\n\n\t// Track previous values to detect changes from SvelteFlow\n\tlet previousNodes = $state<WorkflowNodeType[]>([]);\n\tlet previousEdges = $state<WorkflowEdge[]>([]);\n\n\t/**\n\t * Watch for changes from SvelteFlow and update currentWorkflow\n\t * Uses efficient comparison instead of expensive JSON.stringify\n\t * This reduces event handler time from 290-310ms to <50ms\n\t */\n\t$effect(() => {\n\t\t// Check if nodes have changed from SvelteFlow using fast comparison\n\t\tconst nodesChanged = !areNodeArraysEqual(flowNodes, previousNodes);\n\t\tconst edgesChanged = !areEdgeArraysEqual(flowEdges, previousEdges);\n\n\t\tif ((nodesChanged || edgesChanged) && currentWorkflow) {\n\t\t\tupdateCurrentWorkflowFromSvelteFlow();\n\n\t\t\t// Update previous values with shallow copies\n\t\t\tpreviousNodes = [...flowNodes];\n\t\t\tpreviousEdges = [...flowEdges];\n\t\t}\n\t});\n\n\t// The global store should be initialized by the parent App component\n\n\t// Sidebar is now always visible - removed toggle functionality\n\n\t// Node types for Svelte Flow - using UniversalNode for all node types\n\t// All nodes use 'universalNode' type, and UniversalNode handles internal switching\n\t// Include legacy types for backward compatibility with existing workflows\n\tconst nodeTypes = {\n\t\tuniversalNode: UniversalNode,\n\t\t// Legacy types for backward compatibility\n\t\tworkflowNode: UniversalNode,\n\t\tnote: UniversalNode,\n\t\tsimple: UniversalNode,\n\t\tsquare: UniversalNode,\n\t\ttool: UniversalNode,\n\t\tgateway: UniversalNode\n\t};\n\n\t// Handle arrows in our custom connection handler\n\tconst defaultEdgeOptions = {};\n\n\t/**\n\t * Handle new connections between nodes\n\t * Let SvelteFlow handle edge creation, styling will be applied via reactive effects\n\t */\n\tasync function handleConnect(connection: {\n\t\tsource: string;\n\t\ttarget: string;\n\t\tsourceHandle?: string;\n\t\ttargetHandle?: string;\n\t}): Promise<void> {\n\t\t// SvelteFlow will automatically create the edge due to bind:edges\n\t\t// Wait for DOM update before applying styling\n\t\tawait tick();\n\n\t\t// Apply styling to the new edge (including arrows)\n\t\tupdateExistingEdgeStyles();\n\n\t\t// Update currentWorkflow with the new edge\n\t\tif (currentWorkflow) {\n\t\t\tupdateCurrentWorkflowFromSvelteFlow();\n\t\t}\n\t}\n\n\t/**\n\t * Handle node deletion - automatically remove connected edges\n\t */\n\tfunction handleNodesDelete(params: { nodes: WorkflowNodeType[]; edges: WorkflowEdge[] }): void {\n\t\tconst deletedNodeIds = new Set(params.nodes.map((node) => node.id));\n\n\t\t// Filter out edges connected to deleted nodes\n\t\tflowEdges = flowEdges.filter(\n\t\t\t(edge) => !deletedNodeIds.has(edge.source) && !deletedNodeIds.has(edge.target)\n\t\t);\n\n\t\t// Update currentWorkflow\n\t\tif (currentWorkflow) {\n\t\t\tupdateCurrentWorkflowFromSvelteFlow();\n\t\t}\n\t}\n\n\t/**\n\t * Update existing edges with our custom styling rules\n\t * This ensures all edges (including existing ones) follow our rules\n\t */\n\tasync function updateExistingEdgeStyles(): Promise<void> {\n\t\t// Wait for any pending DOM updates\n\t\tawait tick();\n\n\t\tconst updatedEdges = EdgeStylingHelper.updateEdgeStyles(flowEdges, flowNodes);\n\n\t\t// Update currentWorkflow with the styled edges\n\t\tif (currentWorkflow) {\n\t\t\tcurrentWorkflow = WorkflowOperationsHelper.updateWorkflow(\n\t\t\t\tcurrentWorkflow,\n\t\t\t\tflowNodes,\n\t\t\t\tupdatedEdges\n\t\t\t);\n\n\t\t\t// Update the global store\n\t\t\tupdateGlobalStore();\n\t\t}\n\t}\n\n\t// Edge styling will be handled when edges are first created or manually updated\n\n\t// Configure endpoints when props change\n\t$effect(() => {\n\t\tif (props.endpointConfig) {\n\t\t\tConfigurationHelper.configureEndpoints(props.endpointConfig);\n\t\t}\n\t});\n\n\t/**\n\t * Check if workflow has cycles\n\t */\n\tfunction checkWorkflowCycles(): boolean {\n\t\treturn WorkflowOperationsHelper.checkWorkflowCycles(flowNodes, flowEdges);\n\t}\n\n\t/**\n\t * Handle drop event and add new node to canvas\n\t * This will be called from the inner DropZone component\n\t */\n\tasync function handleNodeDrop(\n\t\tnodeTypeData: string,\n\t\tposition: { x: number; y: number }\n\t): Promise<void> {\n\t\t// Create the node using the helper, passing existing nodes for ID generation\n\t\tconst newNode = NodeOperationsHelper.createNodeFromDrop(nodeTypeData, position, flowNodes);\n\n\t\tif (newNode && currentWorkflow) {\n\t\t\tcurrentWorkflow = WorkflowOperationsHelper.addNode(currentWorkflow, newNode);\n\n\t\t\t// Update the global store\n\t\t\tupdateGlobalStore();\n\n\t\t\t// Wait for DOM update to ensure SvelteFlow updates\n\t\t\tawait tick();\n\t\t} else if (!currentWorkflow) {\n\t\t\tconsole.warn('No currentWorkflow available for new node');\n\t\t}\n\t}\n</script>\n\n<SvelteFlowProvider>\n\t<div class=\"flowdrop-workflow-editor\">\n\t\t<!-- Main Editor Area -->\n\t\t<div class=\"flowdrop-workflow-editor__main\">\n\t\t\t<!-- Flow Canvas -->\n\t\t\t<div class=\"flowdrop-canvas\">\n\t\t\t\t<FlowDropZone ondrop={handleNodeDrop}>\n\t\t\t\t\t<SvelteFlow\n\t\t\t\t\t\tbind:nodes={flowNodes}\n\t\t\t\t\t\tbind:edges={flowEdges}\n\t\t\t\t\t\t{nodeTypes}\n\t\t\t\t\t\t{defaultEdgeOptions}\n\t\t\t\t\t\tonconnect={handleConnect}\n\t\t\t\t\t\tondelete={handleNodesDelete}\n\t\t\t\t\t\tminZoom={0.2}\n\t\t\t\t\t\tmaxZoom={3}\n\t\t\t\t\t\tclickConnect={true}\n\t\t\t\t\t\televateEdgesOnSelect={true}\n\t\t\t\t\t\tconnectionLineType={ConnectionLineType.Bezier}\n\t\t\t\t\t\tconnectionLineComponent={ConnectionLine}\n\t\t\t\t\t\tsnapGrid={[10, 10]}\n\t\t\t\t\t\tfitView\n\t\t\t\t\t>\n\t\t\t\t\t\t<Controls />\n\t\t\t\t\t\t<Background\n\t\t\t\t\t\t\tgap={10}\n\t\t\t\t\t\t\tbgColor=\"var(--flowdrop-background-color)\"\n\t\t\t\t\t\t\tvariant={BackgroundVariant.Dots}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<MiniMap />\n\t\t\t\t\t</SvelteFlow>\n\t\t\t\t\t<!-- Drop Zone Indicator -->\n\t\t\t\t\t{#if flowNodes.length === 0}\n\t\t\t\t\t\t<CanvasBanner\n\t\t\t\t\t\t\ttitle=\"Drag components here to start building\"\n\t\t\t\t\t\t\tdescription=\"Use the sidebar to add components to your workflow\"\n\t\t\t\t\t\t\ticonName=\"mdi:graph\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t{/if}\n\t\t\t\t</FlowDropZone>\n\t\t\t</div>\n\n\t\t\t<!-- Status Bar -->\n\t\t\t<div class=\"flowdrop-status-bar\">\n\t\t\t\t<div class=\"flowdrop-status-bar__content\">\n\t\t\t\t\t<div class=\"flowdrop-flex flowdrop-gap--4\">\n\t\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-text--gray\">{flowNodes.length} nodes</span>\n\t\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-text--gray\"></span>\n\t\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-text--gray\">{flowEdges.length} connections</span\n\t\t\t\t\t\t>\n\n\t\t\t\t\t\t{#if checkWorkflowCycles()}\n\t\t\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-text--gray\"></span>\n\t\t\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-font--medium flowdrop-text--error\"\n\t\t\t\t\t\t\t\t> Cycles detected</span\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</SvelteFlowProvider>\n\n<style>\n\t.flowdrop-workflow-editor {\n\t\tdisplay: flex;\n\t\tflex-direction: row; /* Side by side layout */\n\t\theight: 100%;\n\t\tposition: relative;\n\t}\n\n\t.flowdrop-workflow-editor__main {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 0;\n\t\ttransition: margin-left 0.3s ease-in-out;\n\t}\n\n\t.flowdrop-text--error {\n\t\tcolor: #dc2626;\n\t}\n\n\t.flowdrop-canvas {\n\t\tflex: 1;\n\t\tmin-height: 0;\n\t\tposition: relative;\n\t\tbackground: transparent;\n\t}\n\n\t.flowdrop-status-bar {\n\t\tbackground-color: rgba(255, 255, 255, 0.8);\n\t\tbackdrop-filter: blur(8px);\n\t\tborder-top: 1px solid #e5e7eb;\n\t\tpadding: 0.75rem;\n\t\theight: 40px;\n\t\tmin-height: 40px;\n\t\tmax-height: 40px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-status-bar__content {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t}\n\n\t:global(.flowdrop-workflow-editor .svelte-flow__node:hover) {\n\t\ttransform: translateY(-2px);\n\t}\n\n\t:global(.flowdrop-workflow-editor .svelte-flow__edge) {\n\t\tstroke-width: 2 !important;\n\t\tcursor: pointer;\n\t\tpointer-events: all;\n\t}\n\n\t:global(.flowdrop-workflow-editor .svelte-flow__edge path) {\n\t\tstroke-width: 2 !important;\n\t}\n\n\t:global(.flowdrop-workflow-editor .svelte-flow__edge:hover) {\n\t\tstroke: #3b82f6 !important;\n\t\tstroke-width: 3 !important;\n\t}\n\n\t:global(.flowdrop-workflow-editor .svelte-flow__edge:hover path) {\n\t\tstroke-width: 3 !important;\n\t}\n\n\t:global(.flowdrop-workflow-editor .svelte-flow__edge.selected) {\n\t\tstroke: #3b82f6 !important;\n\t\tstroke-width: 3 !important;\n\t\tfilter: drop-shadow(0 0 4px rgba(59, 130, 246, 0.5));\n\t}\n\n\t:global(.flowdrop-workflow-editor .svelte-flow__edge.selected path) {\n\t\tstroke-width: 3 !important;\n\t}\n\n\t/* Ensure edge paths are clickable */\n\t:global(.flowdrop-workflow-editor .svelte-flow__edge path) {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\n\t/* Enhanced arrow markers for input ports */\n\t:global(.flowdrop-workflow-editor .svelte-flow__edge-marker) {\n\t\tfill: currentColor;\n\t}\n\n\t:global(.flowdrop-workflow-editor .svelte-flow__handle) {\n\t\twidth: 18px;\n\t\theight: 18px;\n\t\tborder: 2px solid white;\n\t\tbox-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n\t\tz-index: 10;\n\t}\n\n\t/* Ensure our custom handles are clickable */\n\t:global(.flowdrop-workflow-editor .svelte-flow__handle) {\n\t\tpointer-events: all;\n\t\tcursor: crosshair;\n\t}\n\t:global(.flowdrop--edge--tool path.svelte-flow__edge-path) {\n\t\tstroke-dasharray: 5 5;\n\t}\n</style>\n","<!--\n  Loading Spinner Component\n  Reusable loading indicator with customizable size and text\n-->\n\n<script lang=\"ts\">\n\tinterface Props {\n\t\tsize?: 'xs' | 'sm' | 'md' | 'lg';\n\t\ttext?: string;\n\t\tshowText?: boolean;\n\t}\n\n\tlet props: Props = $props();\n\n\t// Default values\n\tlet size = $derived(props.size || 'md');\n\tlet text = $derived(props.text || 'Loading...');\n\tlet showText = $derived(props.showText !== false);\n</script>\n\n<div class=\"flowdrop-loading\">\n\t<div class=\"flowdrop-spinner flowdrop-spinner--{size}\"></div>\n\t{#if showText}\n\t\t<p class=\"flowdrop-text--xs flowdrop-text--gray\">{text}</p>\n\t{/if}\n</div>\n\n<style>\n\t.flowdrop-loading {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tgap: 0.5rem;\n\t}\n</style>\n","<!--\n  Node Sidebar Component\n  Displays available node types organized by category with accordion-style groups\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport type { NodeMetadata, NodeCategory } from '../types/index.js';\n\timport LoadingSpinner from './LoadingSpinner.svelte';\n\timport Icon from '@iconify/svelte';\n\timport { getNodeIcon, getCategoryIcon } from '../utils/icons.js';\n\timport { getCategoryColorToken } from '../utils/colors.js';\n\timport { SvelteSet } from 'svelte/reactivity';\n\n\tinterface Props {\n\t\tnodes: NodeMetadata[];\n\t\tselectedCategory?: NodeCategory;\n\t}\n\n\tlet props: Props = $props();\n\tlet searchInput = $state('');\n\tlet selectedCategory = $state(props.selectedCategory || 'all');\n\n\tlet filteredNodes = $derived(getFilteredNodes());\n\tlet categories = $derived(getCategories());\n\n\t/**\n\t * Get all unique categories from node types\n\t */\n\tfunction getCategories(): NodeCategory[] {\n\t\tconst nodes = props.nodes || [];\n\t\tif (nodes.length === 0) return [];\n\t\tconst categories = new SvelteSet<NodeCategory>();\n\t\tnodes.forEach((node) => categories.add(node.category));\n\t\treturn Array.from(categories).sort();\n\t}\n\n\t/**\n\t * Filter node types based on search query and selected category\n\t */\n\tfunction getFilteredNodes(): NodeMetadata[] {\n\t\t// Use actual node types from props\n\t\tlet filtered = props.nodes || [];\n\n\t\t// Filter by category\n\t\tif (selectedCategory !== 'all') {\n\t\t\tfiltered = filtered.filter((node) => node.category === selectedCategory);\n\t\t}\n\n\t\t// Filter by search query\n\t\tif (searchInput.trim()) {\n\t\t\tconst query = searchInput.toLowerCase();\n\t\t\tfiltered = filtered.filter(\n\t\t\t\t(node) =>\n\t\t\t\t\tnode.name.toLowerCase().includes(query) ||\n\t\t\t\t\tnode.description.toLowerCase().includes(query) ||\n\t\t\t\t\tnode.tags?.some((tag) => tag.toLowerCase().includes(query))\n\t\t\t);\n\t\t}\n\n\t\t// Create a new array and sort it to avoid mutating the original\n\t\treturn [...filtered].sort((a, b) => a.name.localeCompare(b.name));\n\t}\n\n\t/**\n\t * Handle node type drag start - creates a new node instance\n\t */\n\tfunction handleNodeDragStart(event: DragEvent, nodeType: NodeMetadata): void {\n\t\tif (!event.dataTransfer) return;\n\n\t\t// Extract initial config from configSchema with proper null checks\n\t\tlet initialConfig = {};\n\t\tif (\n\t\t\tnodeType.configSchema &&\n\t\t\ttypeof nodeType.configSchema === 'object' &&\n\t\t\tnodeType.configSchema.properties &&\n\t\t\ttypeof nodeType.configSchema.properties === 'object'\n\t\t) {\n\t\t\t// JSON Schema format - extract defaults\n\t\t\tObject.entries(nodeType.configSchema.properties).forEach(([key, prop]) => {\n\t\t\t\tif (prop && typeof prop === 'object' && 'default' in prop) {\n\t\t\t\t\tinitialConfig[key] = prop.default;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Create a new node instance from the node type\n\t\tconst newNodeData = {\n\t\t\ttype: 'node',\n\t\t\tnodeType: nodeType.id,\n\t\t\tnodeData: {\n\t\t\t\tlabel: nodeType.name,\n\t\t\t\tconfig: initialConfig,\n\t\t\t\tmetadata: nodeType\n\t\t\t}\n\t\t};\n\n\t\tconst jsonData = JSON.stringify(newNodeData);\n\n\t\t// Set the data that SvelteFlow will receive\n\t\tevent.dataTransfer.setData('application/json', jsonData);\n\t\tevent.dataTransfer.setData('text/plain', nodeType.name);\n\t\tevent.dataTransfer.effectAllowed = 'copy';\n\n\t\t// Set drag image\n\t\tif (event.target) {\n\t\t\tconst rect = (event.target as HTMLElement).getBoundingClientRect();\n\t\t\tevent.dataTransfer.setDragImage(event.target as HTMLElement, rect.width / 2, rect.height / 2);\n\t\t}\n\t}\n\n\t/**\n\t * Handle search input change\n\t */\n\tfunction handleSearchChange(): void {\n\t\t// Search is handled reactively through the derived filteredNodes\n\t}\n\n\t/**\n\t * Handle node click\n\t */\n\tfunction handleNodeClick(nodeType: NodeMetadata): void {\n\t\t// Handle node click - could be used for preview or configuration\n\t}\n\n\t/**\n\t * Get category display name\n\t */\n\tfunction getCategoryDisplayName(category: NodeCategory): string {\n\t\tconst names: Record<NodeCategory, string> = {\n\t\t\tinputs: 'Inputs',\n\t\t\toutputs: 'Outputs',\n\t\t\tprompts: 'Prompts',\n\t\t\tmodels: 'Models',\n\t\t\tprocessing: 'Processing',\n\t\t\tlogic: 'Logic',\n\t\t\tdata: 'Data',\n\t\t\ttools: 'Tools',\n\t\t\thelpers: 'Helpers',\n\t\t\t'vector stores': 'Vector Stores',\n\t\t\tembeddings: 'Embeddings',\n\t\t\tmemories: 'Memories',\n\t\t\tagents: 'Agents',\n\t\t\tai: 'AI',\n\t\t\tbundles: 'Bundles'\n\t\t};\n\t\treturn names[category] || category;\n\t}\n\n\t/**\n\t * Get node types for category\n\t */\n\tfunction getNodesForCategory(category: NodeCategory): NodeMetadata[] {\n\t\tconst nodes = props.nodes || [];\n\t\treturn [...nodes]\n\t\t\t.filter((node) => node.category === category)\n\t\t\t.sort((a, b) => a.name.localeCompare(b.name));\n\t}\n\n\t/**\n\t * Get filtered nodes for category\n\t */\n\tfunction getFilteredNodesForCategory(category: NodeCategory): NodeMetadata[] {\n\t\tlet nodes = getNodesForCategory(category);\n\n\t\t// Filter by search query\n\t\tif (searchInput.trim()) {\n\t\t\tconst query = searchInput.toLowerCase();\n\t\t\tnodes = nodes.filter(\n\t\t\t\t(node) =>\n\t\t\t\t\tnode.name.toLowerCase().includes(query) ||\n\t\t\t\t\tnode.description.toLowerCase().includes(query) ||\n\t\t\t\t\tnode.tags?.some((tag) => tag.toLowerCase().includes(query))\n\t\t\t);\n\t\t}\n\n\t\treturn nodes;\n\t}\n</script>\n\n<!-- Components Sidebar - Always Visible -->\n<div\n\tclass=\"flowdrop-sidebar flowdrop-sidebar--container\"\n\trole=\"complementary\"\n\taria-label=\"Components sidebar\"\n>\n\t<!-- Header -->\n\t<div class=\"flowdrop-sidebar__header\">\n\t\t<div class=\"flowdrop-sidebar__title\">\n\t\t\t<h2 class=\"flowdrop-text--lg flowdrop-font--bold\">Components</h2>\n\t\t</div>\n\t</div>\n\n\t<!-- Search Section -->\n\t<div class=\"flowdrop-sidebar__search\">\n\t\t<div class=\"flowdrop-join flowdrop-w--full\">\n\t\t\t<div class=\"flowdrop-join__item flowdrop-flex--1\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"Search components...\"\n\t\t\t\t\tclass=\"flowdrop-input flowdrop-join__item flowdrop-w--full\"\n\t\t\t\t\tbind:value={searchInput}\n\t\t\t\t\toninput={handleSearchChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<button class=\"flowdrop-btn flowdrop-join__item\" aria-label=\"Search components\">\n\t\t\t\t<Icon icon=\"mdi:magnify\" class=\"flowdrop-icon\" />\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\n\t<!-- Node Types List -->\n\t<div class=\"flowdrop-sidebar__content\">\n\t\t{#if props.nodes?.length === 0}\n\t\t\t<!-- No node types available -->\n\t\t\t<div class=\"flowdrop-hero\">\n\t\t\t\t<div class=\"flowdrop-hero__content\">\n\t\t\t\t\t<div class=\"flowdrop-hero__icon\"></div>\n\t\t\t\t\t<h3 class=\"flowdrop-hero__title\">No node types available</h3>\n\t\t\t\t\t<p class=\"flowdrop-hero__description\">Node type definitions will appear here</p>\n\t\t\t\t\t<div class=\"flowdrop-mb--4\">\n\t\t\t\t\t\t<LoadingSpinner size=\"md\" text=\"Loading from server...\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{:else if searchInput.trim()}\n\t\t\t<!-- Search Results -->\n\t\t\t<div class=\"flowdrop-p--4\">\n\t\t\t\t<div class=\"flowdrop-divider\">\n\t\t\t\t\t<h3 class=\"flowdrop-divider__text\">Search Results</h3>\n\t\t\t\t</div>\n\t\t\t\t{#if filteredNodes.length === 0}\n\t\t\t\t\t<div class=\"flowdrop-hero\">\n\t\t\t\t\t\t<div class=\"flowdrop-hero__content\">\n\t\t\t\t\t\t\t<div class=\"flowdrop-hero__icon\"></div>\n\t\t\t\t\t\t\t<h3 class=\"flowdrop-hero__title\">No components found</h3>\n\t\t\t\t\t\t\t<p class=\"flowdrop-hero__description\">Try adjusting your search</p>\n\t\t\t\t\t\t\t{#if props.nodes?.length === 0}\n\t\t\t\t\t\t\t\t<div class=\"flowdrop-mb--4\">\n\t\t\t\t\t\t\t\t\t<LoadingSpinner size=\"sm\" text=\"Loading components...\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{:else}\n\t\t\t\t\t<div class=\"flowdrop-node-list\">\n\t\t\t\t\t\t{#each filteredNodes as nodeType (nodeType.id)}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"flowdrop-card flowdrop-card--compact flowdrop-node-item\"\n\t\t\t\t\t\t\t\tdraggable=\"true\"\n\t\t\t\t\t\t\t\tondragstart={(e) => handleNodeDragStart(e, nodeType)}\n\t\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"flowdrop-card__body flowdrop-p--1 flowdrop-py--1\">\n\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-flex flowdrop-gap--2 flowdrop-items--center\">\n\t\t\t\t\t\t\t\t\t\t<!-- Node Type Icon -->\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-node-icon\"\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"background-color: {getCategoryColorToken(nodeType.category)}\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Icon icon={getNodeIcon(nodeType.icon, nodeType.category)} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<!-- Node Type Info - Icon and Title only -->\n\t\t\t\t\t\t\t\t\t\t<h4\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-text--sm flowdrop-font--medium flowdrop-truncate flowdrop-flex--1\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{nodeType.name}\n\t\t\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-text--xs flowdrop-text--gray flowdrop-truncate flowdrop-mt--1 flowdrop-ml--0\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{nodeType.description}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<!-- Show categories with details when no search is active -->\n\t\t\t<div class=\"flowdrop-p--4\">\n\t\t\t\t<!-- Category-specific details -->\n\t\t\t\t<div class=\"flowdrop-category-list\">\n\t\t\t\t\t{#each categories as category (category)}\n\t\t\t\t\t\t{@const categoryNodes = getFilteredNodesForCategory(category)}\n\t\t\t\t\t\t{#if categoryNodes.length > 0}\n\t\t\t\t\t\t\t<details class=\"flowdrop-details\">\n\t\t\t\t\t\t\t\t<summary class=\"flowdrop-details__summary\">\n\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-flex flowdrop-gap--2 flowdrop-items--center\">\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-node-icon\"\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"background-color: {getCategoryColorToken(category)}\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Icon icon={getCategoryIcon(category)} />\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span>{getCategoryDisplayName(category)}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-badge flowdrop-badge--secondary\">{categoryNodes.length}</div>\n\t\t\t\t\t\t\t\t</summary>\n\t\t\t\t\t\t\t\t<div class=\"flowdrop-details__content\">\n\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-node-list\">\n\t\t\t\t\t\t\t\t\t\t{#each categoryNodes as nodeType (nodeType.id)}\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-card flowdrop-card--compact flowdrop-node-item\"\n\t\t\t\t\t\t\t\t\t\t\t\tdraggable=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\tondragstart={(e) => handleNodeDragStart(e, nodeType)}\n\t\t\t\t\t\t\t\t\t\t\t\tonclick={() => handleNodeClick(nodeType)}\n\t\t\t\t\t\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\t\t\t\t\t\t\t\tonkeydown={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (e.key === 'Enter' || e.key === ' ') {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleNodeClick(nodeType);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-card__body flowdrop-p--1 flowdrop-py--1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-flex flowdrop-gap--2 flowdrop-items--center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- Node Type Icon -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-node-icon\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"background-color: {getCategoryColorToken(nodeType.category)}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon icon={getNodeIcon(nodeType.icon, nodeType.category)} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- Node Type Info - Icon and Title only -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h4\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-text--sm flowdrop-font--medium flowdrop-truncate flowdrop-flex--1\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{nodeType.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-text--xs flowdrop-text--gray flowdrop-truncate flowdrop-mt--1 flowdrop-ml--0\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{nodeType.description}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</details>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\n\t<!-- Footer -->\n\t<div class=\"flowdrop-sidebar__footer\">\n\t\t<div class=\"flowdrop-flex flowdrop-gap--4\">\n\t\t\t<div class=\"flowdrop-flex flowdrop-gap--4\">\n\t\t\t\t{#if props.nodes?.length === 0}\n\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-text--gray\">Loading components...</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-text--gray\"\n\t\t\t\t\t\t>Total: {props.nodes?.length || 0} components</span\n\t\t\t\t\t>\n\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-text--gray\">Showing: {filteredNodes.length}</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<style>\n\t/* Components Sidebar - Always Visible */\n\t.flowdrop-sidebar {\n\t\twidth: 320px;\n\t\theight: calc(100vh - var(--flowdrop-navbar-height, 60px)); /* Account for navbar height */\n\t\tbackground-color: #ffffff;\n\t\tborder-right: 1px solid #e5e7eb;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tbox-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-sidebar--container {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\theight: 100%;\n\t}\n\n\t.flowdrop-sidebar__header {\n\t\tbackground-color: #f8fafc;\n\t\tborder-bottom: 1px solid #e5e7eb;\n\t\tpadding: 0.75rem 1rem;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-sidebar__title {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t/* Close button styles removed - no longer needed */\n\n\t.flowdrop-sidebar__title h2 {\n\t\tfont-size: 1rem;\n\t\tfont-weight: 600;\n\t\tmargin: 0;\n\t}\n\n\t.flowdrop-sidebar__search {\n\t\tpadding: 0.75rem 1rem;\n\t\tbackground-color: #ffffff;\n\t\tborder-bottom: 1px solid #e5e7eb;\n\t}\n\n\t.flowdrop-sidebar__content {\n\t\tflex: 1;\n\t\toverflow-y: scroll; /* Changed from auto to scroll to always show scrollbar */\n\t\tscrollbar-width: thin;\n\t\tscrollbar-color: #d1d5db #f3f4f6;\n\t\tpadding-bottom: 4rem; /* Add padding to ensure content is scrollable above footer */\n\t\tmin-height: 0; /* Allow flex item to shrink below content size */\n\t}\n\n\t.flowdrop-sidebar__content::-webkit-scrollbar {\n\t\twidth: 8px;\n\t\tdisplay: block; /* Ensure scrollbar is always visible */\n\t}\n\n\t.flowdrop-sidebar__content::-webkit-scrollbar-track {\n\t\tbackground: #f3f4f6;\n\t}\n\n\t.flowdrop-sidebar__content::-webkit-scrollbar-thumb {\n\t\tbackground: #d1d5db;\n\t\tborder-radius: 4px;\n\t\tmin-height: 20px; /* Ensure thumb has minimum height for visibility */\n\t}\n\n\t.flowdrop-sidebar__content::-webkit-scrollbar-thumb:hover {\n\t\tbackground: #9ca3af;\n\t}\n\n\t.flowdrop-sidebar__footer {\n\t\tbackground-color: rgba(255, 255, 255, 0.8);\n\t\tbackdrop-filter: blur(8px);\n\t\tborder-top: 1px solid #e5e7eb;\n\t\tpadding: 0.5rem 0.75rem;\n\t\tflex-shrink: 0; /* Prevent footer from shrinking */\n\t\tposition: relative;\n\t\tz-index: 10; /* Ensure footer stays on top */\n\t\theight: 40px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-node-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.375rem;\n\t}\n\n\t.flowdrop-node-item {\n\t\tcursor: grab;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tborder-radius: 0.375rem;\n\t\tborder: 1px solid transparent;\n\t}\n\n\t.flowdrop-node-item:hover {\n\t\tborder-color: #d1d5db;\n\t\tbackground-color: #f9fafb;\n\t}\n\n\t.flowdrop-node-item:active {\n\t\tcursor: grabbing;\n\t}\n\n\t.flowdrop-node-icon {\n\t\twidth: 2rem;\n\t\theight: 2rem;\n\t\tborder-radius: 0.375rem;\n\t\tcolor: #ffffff;\n\t\tfont-size: 0.875rem;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-category-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.375rem;\n\t}\n\n\t.flowdrop-items--center {\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-truncate {\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.flowdrop-card__body h4 {\n\t\tmargin: 0;\n\t\tline-height: 1;\n\t}\n\n\t.flowdrop-p--4 {\n\t\tpadding: 1rem;\n\t}\n\n\t.flowdrop-py--1 {\n\t\tpadding-top: 0.25rem;\n\t\tpadding-bottom: 0.25rem;\n\t}\n\n\t.flowdrop-ml--0 {\n\t\tmargin-left: 0;\n\t}\n\n\t/* Form Elements - Matching App Design System */\n\t.flowdrop-input {\n\t\tpadding: 0.625rem 0.75rem;\n\t\tborder: 1px solid #d1d5db;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\tcolor: #111827;\n\t\tbackground-color: #ffffff;\n\t\ttransition:\n\t\t\tborder-color 0.2s ease-in-out,\n\t\t\tbox-shadow 0.2s ease-in-out;\n\t\twidth: 100%;\n\t\theight: 2.5rem;\n\t\tbox-sizing: border-box;\n\t}\n\n\t.flowdrop-input:focus {\n\t\toutline: none;\n\t\tborder-color: #6b7280;\n\t\tbox-shadow: 0 0 0 3px rgba(107, 114, 128, 0.1);\n\t}\n\n\t.flowdrop-input::placeholder {\n\t\tcolor: #9ca3af;\n\t}\n\n\t.flowdrop-btn {\n\t\tpadding: 0.625rem 0.75rem;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tborder: 1px solid #d1d5db;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tgap: 0.5rem;\n\t\tbackground-color: #f9fafb;\n\t\tcolor: #374151;\n\t\theight: 2.5rem;\n\t\tmin-width: 2.5rem;\n\t\tbox-sizing: border-box;\n\t}\n\n\t.flowdrop-btn:hover {\n\t\tbackground-color: #f3f4f6;\n\t\tborder-color: #9ca3af;\n\t}\n\n\t.flowdrop-btn:active {\n\t\tbackground-color: #e5e7eb;\n\t\tborder-color: #6b7280;\n\t}\n\n\t.flowdrop-btn:focus {\n\t\toutline: none;\n\t\tbox-shadow: 0 0 0 3px rgba(107, 114, 128, 0.1);\n\t}\n\n\t.flowdrop-btn:disabled {\n\t\tbackground-color: #9ca3af;\n\t\tborder-color: #9ca3af;\n\t\tcursor: not-allowed;\n\t\topacity: 0.6;\n\t}\n\n\t/* Join component styles - Seamless integration */\n\t.flowdrop-join {\n\t\tdisplay: flex;\n\t\twidth: 100%;\n\t\tborder-radius: 0.375rem;\n\t\toverflow: hidden;\n\t\tborder: 1px solid #d1d5db;\n\t\tbackground-color: #ffffff;\n\t}\n\n\t.flowdrop-join__item {\n\t\tborder: none;\n\t\tborder-radius: 0;\n\t\tbackground-color: transparent;\n\t}\n\n\t.flowdrop-join__item:first-child {\n\t\tborder-right: 1px solid #d1d5db;\n\t\tflex: 1;\n\t}\n\n\t.flowdrop-join__item:last-child {\n\t\tborder-left: none;\n\t\tbackground-color: #f9fafb;\n\t\tcolor: #374151;\n\t}\n\n\t.flowdrop-join__item:last-child:hover {\n\t\tbackground-color: #f3f4f6;\n\t}\n\n\t.flowdrop-join:focus-within {\n\t\tborder-color: #6b7280;\n\t\tbox-shadow: 0 0 0 3px rgba(107, 114, 128, 0.1);\n\t}\n\n\t/* Utility classes */\n\t.flowdrop-w--full {\n\t\twidth: 100%;\n\t}\n\n\t.flowdrop-flex--1 {\n\t\tflex: 1;\n\t}\n</style>\n","<!--\n  Status Icon Component\n  Reusable status icon that can be used anywhere in the application\n  Displays status with appropriate icon, color, and styling\n-->\n\n<script lang=\"ts\">\n\timport type { NodeExecutionStatus } from '../types/index.js';\n\timport Icon from '@iconify/svelte';\n\timport { getStatusColor, getStatusIcon } from '../utils/nodeStatus.js';\n\n\tinterface Props {\n\t\tstatus: NodeExecutionStatus;\n\t\tsize?: 'sm' | 'md' | 'lg' | 'xl';\n\t\tshowBackground?: boolean;\n\t\tclass?: string;\n\t}\n\n\tlet props: Props = $props();\n\n\t// Size configurations\n\tconst sizeConfig = {\n\t\tsm: {\n\t\t\ticonSize: '12px',\n\t\t\tbackgroundSize: '20px',\n\t\t\tbackgroundRadius: '0.25rem'\n\t\t},\n\t\tmd: {\n\t\t\ticonSize: '16px',\n\t\t\tbackgroundSize: '24px',\n\t\t\tbackgroundRadius: '0.375rem'\n\t\t},\n\t\tlg: {\n\t\t\ticonSize: '24px',\n\t\t\tbackgroundSize: '48px',\n\t\t\tbackgroundRadius: '0.5rem'\n\t\t},\n\t\txl: {\n\t\t\ticonSize: '28px',\n\t\t\tbackgroundSize: '56px',\n\t\t\tbackgroundRadius: '0.75rem'\n\t\t}\n\t};\n\n\tconst config = sizeConfig[props.size || 'md'];\n\tconst statusColor = $derived(getStatusColor(props.status));\n\tconst statusIcon = $derived(getStatusIcon(props.status));\n</script>\n\n{#if props.showBackground}\n\t<div\n\t\tclass=\"status-icon status-icon--with-background {props.class || ''}\"\n\t\tstyle=\"\n\t\t\t--icon-size: {config.iconSize};\n\t\t\t--background-size: {config.backgroundSize};\n\t\t\t--background-radius: {config.backgroundRadius};\n\t\t\t--status-color: {statusColor};\n\t\t\"\n\t\ttitle={props.status}\n\t>\n\t\t<Icon icon={statusIcon} class=\"status-icon__icon\" />\n\t</div>\n{:else}\n\t<Icon\n\t\ticon={statusIcon}\n\t\tclass=\"status-icon status-icon--icon-only {props.class || ''}\"\n\t\tstyle=\"\n\t\t\t--icon-size: {config.iconSize};\n\t\t\t--status-color: {statusColor};\n\t\t\"\n\t/>\n{/if}\n\n<style>\n\t.status-icon {\n\t\tdisplay: inline-flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tcolor: var(--status-color);\n\t\ttransition: all 0.2s ease-in-out;\n\t}\n\n\t.status-icon--with-background {\n\t\twidth: var(--background-size);\n\t\theight: var(--background-size);\n\t\tbackground-color: var(--status-color);\n\t\tborder-radius: var(--background-radius);\n\t\tbox-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n\t\tposition: relative;\n\t}\n\n\t.status-icon--icon-only {\n\t\twidth: var(--icon-size);\n\t\theight: var(--icon-size);\n\t\tfont-size: var(--icon-size);\n\t}\n\n\t/* Animation for running status */\n\t.status-icon--with-background[title='running'] {\n\t\tanimation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n\t}\n\n\t@keyframes pulse {\n\t\t0%,\n\t\t100% {\n\t\t\topacity: 1;\n\t\t}\n\t\t50% {\n\t\t\topacity: 0.7;\n\t\t}\n\t}\n</style>\n","<!--\n  ConfigForm Component\n  Handles dynamic form rendering for node configuration\n  Uses reactive $state for proper Svelte 5 reactivity\n-->\n\n<script lang=\"ts\">\n\timport type { ConfigSchema, WorkflowNode } from '../types/index.js';\n\n\tinterface Props {\n\t\tnode: WorkflowNode;\n\t\tonSave: (config: Record<string, unknown>) => void;\n\t\tonCancel: () => void;\n\t}\n\n\tlet { node, onSave, onCancel }: Props = $props();\n\n\t/**\n\t * Get the configuration schema from node metadata\n\t */\n\tconst configSchema = $derived(node.data.metadata?.configSchema as ConfigSchema | undefined);\n\n\t/**\n\t * Get the current node configuration\n\t */\n\tconst nodeConfig = $derived(node.data.config || {});\n\n\t/**\n\t * Create reactive configuration values using $state\n\t * This fixes the Svelte 5 reactivity warnings\n\t */\n\tlet configValues = $state<Record<string, unknown>>({});\n\n\t/**\n\t * Initialize config values when node or schema changes\n\t */\n\t$effect(() => {\n\t\tif (configSchema?.properties) {\n\t\t\tconst mergedConfig: Record<string, unknown> = {};\n\t\t\tObject.entries(configSchema.properties).forEach(([key, field]) => {\n\t\t\t\tconst fieldConfig = field as any;\n\t\t\t\t// Use existing value if available, otherwise use default\n\t\t\t\tmergedConfig[key] = nodeConfig[key] !== undefined ? nodeConfig[key] : fieldConfig.default;\n\t\t\t});\n\t\t\tconfigValues = mergedConfig;\n\t\t}\n\t});\n\n\t/**\n\t * Handle form submission\n\t */\n\tfunction handleSave(): void {\n\t\t// Collect all form values including hidden fields\n\t\tconst form = document.querySelector('.flowdrop-config-sidebar__form');\n\t\tconst updatedConfig: Record<string, unknown> = { ...configValues };\n\n\t\tif (form) {\n\t\t\tconst inputs = form.querySelectorAll('input, select, textarea');\n\t\t\tinputs.forEach((input: any) => {\n\t\t\t\tif (input.id) {\n\t\t\t\t\tif (input.type === 'checkbox') {\n\t\t\t\t\t\tupdatedConfig[input.id] = input.checked;\n\t\t\t\t\t} else if (input.type === 'number') {\n\t\t\t\t\t\tupdatedConfig[input.id] = input.value ? Number(input.value) : input.value;\n\t\t\t\t\t} else if (input.type === 'hidden') {\n\t\t\t\t\t\t// Parse hidden field values that might be JSON\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst parsed = JSON.parse(input.value);\n\t\t\t\t\t\t\tupdatedConfig[input.id] = parsed;\n\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\t// If not JSON, use raw value\n\t\t\t\t\t\t\tupdatedConfig[input.id] = input.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tupdatedConfig[input.id] = input.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Preserve hidden field values from original config if not collected from form\n\t\tif (node.data.config && configSchema?.properties) {\n\t\t\tObject.entries(configSchema.properties).forEach(([key, property]: [string, any]) => {\n\t\t\t\tif (property.format === 'hidden' && !(key in updatedConfig) && key in node.data.config) {\n\t\t\t\t\tupdatedConfig[key] = node.data.config[key];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tonSave(updatedConfig);\n\t}\n</script>\n\n{#if configSchema}\n\t<div class=\"flowdrop-config-sidebar__form\">\n\t\t{#if configSchema.properties}\n\t\t\t{#each Object.entries(configSchema.properties) as [key, field] (key)}\n\t\t\t\t{@const fieldConfig = field as any}\n\t\t\t\t{#if fieldConfig.format !== 'hidden'}\n\t\t\t\t\t<div class=\"flowdrop-config-sidebar__field\">\n\t\t\t\t\t\t<label class=\"flowdrop-config-sidebar__field-label\" for={key}>\n\t\t\t\t\t\t\t{fieldConfig.title || fieldConfig.description || key}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t{#if fieldConfig.enum && fieldConfig.multiple}\n\t\t\t\t\t\t\t<!-- Checkboxes for enum with multiple selection -->\n\t\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__checkbox-group\">\n\t\t\t\t\t\t\t\t{#each fieldConfig.enum as option (String(option))}\n\t\t\t\t\t\t\t\t\t<label class=\"flowdrop-config-sidebar__checkbox-item\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__checkbox\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={String(option)}\n\t\t\t\t\t\t\t\t\t\t\tchecked={Array.isArray(configValues[key]) &&\n\t\t\t\t\t\t\t\t\t\t\t\tconfigValues[key].includes(String(option))}\n\t\t\t\t\t\t\t\t\t\t\tonchange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst checked = e.currentTarget.checked;\n\t\t\t\t\t\t\t\t\t\t\t\tconst currentValues = Array.isArray(configValues[key])\n\t\t\t\t\t\t\t\t\t\t\t\t\t? [...(configValues[key] as unknown[])]\n\t\t\t\t\t\t\t\t\t\t\t\t\t: [];\n\t\t\t\t\t\t\t\t\t\t\t\tif (checked) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!currentValues.includes(String(option))) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconfigValues[key] = [...currentValues, String(option)];\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconfigValues[key] = currentValues.filter((v) => v !== String(option));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-config-sidebar__checkbox-label\">\n\t\t\t\t\t\t\t\t\t\t\t{String(option)}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{:else if fieldConfig.enum}\n\t\t\t\t\t\t\t<!-- Select for enum with single selection -->\n\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\tid={key}\n\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__select\"\n\t\t\t\t\t\t\t\tbind:value={configValues[key]}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{#each fieldConfig.enum as option (String(option))}\n\t\t\t\t\t\t\t\t\t<option value={String(option)}>{String(option)}</option>\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t{:else if fieldConfig.type === 'string' && fieldConfig.format === 'multiline'}\n\t\t\t\t\t\t\t<!-- Textarea for multiline strings -->\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\tid={key}\n\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__textarea\"\n\t\t\t\t\t\t\t\tbind:value={configValues[key]}\n\t\t\t\t\t\t\t\tplaceholder={String(fieldConfig.placeholder || '')}\n\t\t\t\t\t\t\t\trows=\"4\"\n\t\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t{:else if fieldConfig.type === 'string'}\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid={key}\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__input\"\n\t\t\t\t\t\t\t\tbind:value={configValues[key]}\n\t\t\t\t\t\t\t\tplaceholder={String(fieldConfig.placeholder || '')}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{:else if fieldConfig.type === 'number'}\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid={key}\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__input\"\n\t\t\t\t\t\t\t\tbind:value={configValues[key]}\n\t\t\t\t\t\t\t\tplaceholder={String(fieldConfig.placeholder || '')}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{:else if fieldConfig.type === 'boolean'}\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid={key}\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__checkbox\"\n\t\t\t\t\t\t\t\tchecked={Boolean(configValues[key] || fieldConfig.default || false)}\n\t\t\t\t\t\t\t\tonchange={(e) => {\n\t\t\t\t\t\t\t\t\tconfigValues[key] = e.currentTarget.checked;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{:else if fieldConfig.type === 'select' || fieldConfig.options}\n\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\tid={key}\n\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__select\"\n\t\t\t\t\t\t\t\tbind:value={configValues[key]}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{#if fieldConfig.options}\n\t\t\t\t\t\t\t\t\t{#each fieldConfig.options as option (String(option.value))}\n\t\t\t\t\t\t\t\t\t\t{@const optionConfig = option as any}\n\t\t\t\t\t\t\t\t\t\t<option value={String(optionConfig.value)}>{String(optionConfig.label)}</option>\n\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<!-- Fallback for unknown field types -->\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid={key}\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__input\"\n\t\t\t\t\t\t\t\tbind:value={configValues[key]}\n\t\t\t\t\t\t\t\tplaceholder={String(fieldConfig.placeholder || '')}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{#if fieldConfig.description}\n\t\t\t\t\t\t\t<p class=\"flowdrop-config-sidebar__field-description\">\n\t\t\t\t\t\t\t\t{String(fieldConfig.description)}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t{/each}\n\t\t{:else}\n\t\t\t<!-- If no properties, show the raw schema for debugging -->\n\t\t\t<div class=\"flowdrop-config-sidebar__debug\">\n\t\t\t\t<p><strong>Debug - Config Schema:</strong></p>\n\t\t\t\t<pre>{JSON.stringify(configSchema, null, 2)}</pre>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\n\t<!-- Footer -->\n\t<div class=\"flowdrop-config-sidebar__footer\">\n\t\t<button\n\t\t\tclass=\"flowdrop-config-sidebar__button flowdrop-config-sidebar__button--secondary\"\n\t\t\tonclick={onCancel}\n\t\t>\n\t\t\tCancel\n\t\t</button>\n\t\t<button\n\t\t\tclass=\"flowdrop-config-sidebar__button flowdrop-config-sidebar__button--primary\"\n\t\t\tonclick={handleSave}\n\t\t>\n\t\t\tSave Changes\n\t\t</button>\n\t</div>\n{:else}\n\t<p class=\"flowdrop-config-sidebar__no-config\">\n\t\tNo configuration options available for this node.\n\t</p>\n{/if}\n\n<style>\n\t.flowdrop-config-sidebar__form {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 1rem;\n\t}\n\n\t.flowdrop-config-sidebar__field {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.5rem;\n\t}\n\n\t.flowdrop-config-sidebar__field-label {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcolor: #374151;\n\t}\n\n\t.flowdrop-config-sidebar__input,\n\t.flowdrop-config-sidebar__select {\n\t\tpadding: 0.5rem;\n\t\tborder: 1px solid #d1d5db;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\ttransition:\n\t\t\tborder-color 0.2s,\n\t\t\tbox-shadow 0.2s;\n\t}\n\n\t.flowdrop-config-sidebar__input:focus,\n\t.flowdrop-config-sidebar__select:focus {\n\t\toutline: none;\n\t\tborder-color: #3b82f6;\n\t\tbox-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n\t}\n\n\t.flowdrop-config-sidebar__checkbox-group {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.5rem;\n\t}\n\n\t.flowdrop-config-sidebar__checkbox-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tcursor: pointer;\n\t}\n\n\t.flowdrop-config-sidebar__checkbox {\n\t\twidth: 1rem;\n\t\theight: 1rem;\n\t\taccent-color: #3b82f6;\n\t\tcursor: pointer;\n\t}\n\n\t.flowdrop-config-sidebar__checkbox-label {\n\t\tfont-size: 0.875rem;\n\t\tcolor: #374151;\n\t\tcursor: pointer;\n\t}\n\n\t.flowdrop-config-sidebar__textarea {\n\t\twidth: 100%;\n\t\tpadding: 0.5rem 0.75rem;\n\t\tborder: 1px solid #d1d5db;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\tbackground-color: #ffffff;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tresize: vertical;\n\t\tmin-height: 4rem;\n\t}\n\n\t.flowdrop-config-sidebar__textarea:focus {\n\t\toutline: none;\n\t\tborder-color: #3b82f6;\n\t\tbox-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n\t}\n\n\t.flowdrop-config-sidebar__field-description {\n\t\tmargin: 0;\n\t\tfont-size: 0.75rem;\n\t\tcolor: #6b7280;\n\t\tline-height: 1.4;\n\t}\n\n\t.flowdrop-config-sidebar__no-config {\n\t\ttext-align: center;\n\t\tcolor: #6b7280;\n\t\tfont-style: italic;\n\t\tpadding: 2rem 1rem;\n\t}\n\n\t.flowdrop-config-sidebar__footer {\n\t\tpadding: 1rem;\n\t\tborder-top: 1px solid #e5e7eb;\n\t\tbackground-color: #f9fafb;\n\t\tdisplay: flex;\n\t\tgap: 0.75rem;\n\t\tjustify-content: flex-end;\n\t\theight: 40px;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-config-sidebar__button {\n\t\tpadding: 0.5rem 1rem;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s;\n\t\tborder: 1px solid transparent;\n\t}\n\n\t.flowdrop-config-sidebar__button--secondary {\n\t\tbackground-color: #ffffff;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n\n\t.flowdrop-config-sidebar__button--secondary:hover {\n\t\tbackground-color: #f9fafb;\n\t\tborder-color: #9ca3af;\n\t}\n\n\t.flowdrop-config-sidebar__button--primary {\n\t\tbackground-color: #3b82f6;\n\t\tcolor: #ffffff;\n\t}\n\n\t.flowdrop-config-sidebar__button--primary:hover {\n\t\tbackground-color: #2563eb;\n\t}\n\n\t.flowdrop-config-sidebar__debug {\n\t\tbackground-color: #f3f4f6;\n\t\tborder: 1px solid #d1d5db;\n\t\tborder-radius: 0.375rem;\n\t\tpadding: 1rem;\n\t\tmargin: 1rem 0;\n\t}\n\n\t.flowdrop-config-sidebar__debug pre {\n\t\tbackground-color: #ffffff;\n\t\tborder: 1px solid #e5e7eb;\n\t\tborder-radius: 0.25rem;\n\t\tpadding: 0.75rem;\n\t\tfont-size: 0.75rem;\n\t\toverflow-x: auto;\n\t\tmargin: 0.5rem 0 0 0;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { createEventDispatcher } from 'svelte';\n\timport type { ConfigSchema, ConfigValues } from '../types';\n\timport ConfigForm from './ConfigForm.svelte';\n\n\tinterface Props {\n\t\tisOpen: boolean;\n\t\tnodeLabel: string;\n\t\tconfigSchema: ConfigSchema;\n\t\tconfigValues: ConfigValues;\n\t}\n\n\tlet props: Props = $props();\n\tlet localConfigValues = $derived.by(() => ({ ...props.configValues }));\n\n\tconst dispatch = createEventDispatcher<{\n\t\tclose: void;\n\t\tsave: { values: ConfigValues };\n\t\tcancel: void;\n\t}>();\n\n\tfunction handleSave() {\n\t\tdispatch('save', { values: localConfigValues });\n\t}\n\n\tfunction handleCancel() {\n\t\tdispatch('cancel');\n\t}\n\n\tfunction handleClose() {\n\t\tdispatch('close');\n\t}\n\n\t// Close modal on escape key\n\tfunction handleKeydown(event: KeyboardEvent) {\n\t\tif (event.key === 'Escape') {\n\t\t\thandleClose();\n\t\t}\n\t}\n\n\t// Close modal when clicking outside\n\tfunction handleBackdropClick(event: MouseEvent) {\n\t\tif (event.target === event.currentTarget) {\n\t\t\thandleClose();\n\t\t}\n\t}\n</script>\n\n{#if props.isOpen}\n\t<!-- Modal Backdrop -->\n\t<div\n\t\tclass=\"config-modal-backdrop\"\n\t\tonclick={handleBackdropClick}\n\t\tonkeydown={handleKeydown}\n\t\trole=\"dialog\"\n\t\taria-modal=\"true\"\n\t\taria-labelledby=\"config-modal-title\"\n\t\ttabindex=\"-1\"\n\t>\n\t\t<!-- Modal Container -->\n\t\t<div class=\"config-modal\">\n\t\t\t<!-- Modal Header -->\n\t\t\t<div class=\"config-modal__header\">\n\t\t\t\t<h2 id=\"config-modal-title\" class=\"config-modal__title\">\n\t\t\t\t\tConfigure: {props.nodeLabel}\n\t\t\t\t</h2>\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclass=\"config-modal__close-btn\"\n\t\t\t\t\tonclick={handleClose}\n\t\t\t\t\taria-label=\"Close configuration modal\"\n\t\t\t\t>\n\t\t\t\t\t<span aria-hidden=\"true\"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<!-- Modal Content -->\n\t\t\t<div class=\"config-modal__content\">\n\t\t\t\t<ConfigForm\n\t\t\t\t\tschema={props.configSchema}\n\t\t\t\t\tvalues={localConfigValues}\n\t\t\t\t\ton:change={({ detail }) => {\n\t\t\t\t\t\tlocalConfigValues = detail.values;\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<!-- Modal Footer -->\n\t\t\t<div class=\"config-modal__footer\">\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclass=\"config-modal__btn config-modal__btn--secondary\"\n\t\t\t\t\tonclick={handleCancel}\n\t\t\t\t>\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclass=\"config-modal__btn config-modal__btn--primary\"\n\t\t\t\t\tonclick={handleSave}\n\t\t\t\t>\n\t\t\t\t\tSave Configuration\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/if}\n\n<style>\n\t.config-modal-backdrop {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tz-index: 1000;\n\t\tpadding: 1rem;\n\t}\n\n\t.config-modal {\n\t\tbackground: white;\n\t\tborder-radius: 0.75rem;\n\t\tbox-shadow:\n\t\t\t0 20px 25px -5px rgba(0, 0, 0, 0.1),\n\t\t\t0 10px 10px -5px rgba(0, 0, 0, 0.04);\n\t\twidth: 100%;\n\t\tmax-width: 80vw;\n\t\tmin-width: 40rem;\n\t\tmax-height: 90vh;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\toverflow: hidden;\n\t}\n\n\t.config-modal__header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding: 1.5rem 1.5rem 1rem 1.5rem;\n\t\tborder-bottom: 1px solid #e5e7eb;\n\t}\n\n\t.config-modal__title {\n\t\tmargin: 0;\n\t\tfont-size: 1.125rem;\n\t\tfont-weight: 600;\n\t\tcolor: #111827;\n\t}\n\n\t.config-modal__close-btn {\n\t\twidth: 2rem;\n\t\theight: 2rem;\n\t\tborder: none;\n\t\tbackground: transparent;\n\t\tborder-radius: 0.375rem;\n\t\tcolor: #6b7280;\n\t\tfont-size: 1.5rem;\n\t\tfont-weight: 400;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\ttransition: all 0.2s;\n\t}\n\n\t.config-modal__close-btn:hover {\n\t\tbackground-color: #f3f4f6;\n\t\tcolor: #374151;\n\t}\n\n\t.config-modal__content {\n\t\tpadding: 1.5rem;\n\t\toverflow-y: auto;\n\t\tflex: 1;\n\t\tmin-height: 0;\n\t}\n\n\t.config-modal__footer {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: flex-end;\n\t\tgap: 0.75rem;\n\t\tpadding: 1rem 1.5rem 1.5rem 1.5rem;\n\t\tborder-top: 1px solid #e5e7eb;\n\t\tbackground-color: #f9fafb;\n\t}\n\n\t.config-modal__btn {\n\t\tpadding: 0.5rem 1rem;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s;\n\t\tborder: 1px solid transparent;\n\t}\n\n\t.config-modal__btn--primary {\n\t\tbackground-color: #3b82f6;\n\t\tcolor: white;\n\t\tborder-color: #3b82f6;\n\t}\n\n\t.config-modal__btn--primary:hover {\n\t\tbackground-color: #2563eb;\n\t\tborder-color: #2563eb;\n\t}\n\n\t.config-modal__btn--secondary {\n\t\tbackground-color: white;\n\t\tcolor: #374151;\n\t\tborder-color: #d1d5db;\n\t}\n\n\t.config-modal__btn--secondary:hover {\n\t\tbackground-color: #f9fafb;\n\t\tborder-color: #9ca3af;\n\t}\n\n\t/* Responsive adjustments */\n\t@media (max-width: 1024px) {\n\t\t.config-modal {\n\t\t\tmax-width: 90vw;\n\t\t\tmin-width: 32rem;\n\t\t}\n\t}\n\n\t@media (max-width: 768px) {\n\t\t.config-modal {\n\t\t\tmax-width: 95vw;\n\t\t\tmin-width: 24rem;\n\t\t}\n\n\t\t.config-modal__header {\n\t\t\tpadding: 1rem 1rem 0.75rem 1rem;\n\t\t}\n\n\t\t.config-modal__content {\n\t\t\tpadding: 1rem;\n\t\t}\n\n\t\t.config-modal__footer {\n\t\t\tpadding: 0.75rem 1rem 1rem 1rem;\n\t\t}\n\t}\n\n\t@media (max-width: 640px) {\n\t\t.config-modal {\n\t\t\tmax-width: 100%;\n\t\t\tmin-width: auto;\n\t\t\tmargin: 0.5rem;\n\t\t}\n\t}\n</style>\n","<!--\n  Configuration Sidebar Component\n  Right-side sliding sidebar for node configuration\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport type { ConfigSchema, ConfigValues, ConfigProperty } from '../types/index.js';\n\timport Icon from '@iconify/svelte';\n\timport { createEventDispatcher } from 'svelte';\n\n\tconst dispatch = createEventDispatcher();\n\n\tinterface Props {\n\t\tisOpen: boolean;\n\t\ttitle: string;\n\t\tconfigSchema?: ConfigSchema;\n\t\tconfigValues: ConfigValues;\n\t\tnodeDetails?: {\n\t\t\ttype: string;\n\t\t\tcategory: string;\n\t\t\tdescription: string;\n\t\t\tversion?: string;\n\t\t\ttags?: string[];\n\t\t\tinputs?: Array<{ id: string; name: string; type: string; dataType?: string }>;\n\t\t\toutputs?: Array<{ id: string; name: string; type: string; dataType?: string }>;\n\t\t};\n\t\tonSave?: (config: ConfigValues) => void;\n\t\tonCancel?: () => void;\n\t\tonClose?: () => void;\n\t}\n\n\tlet props: Props = $props();\n\tlet localConfigValues = $state({ ...props.configValues });\n\tlet hasChanges = $derived(\n\t\tJSON.stringify(localConfigValues) !== JSON.stringify(props.configValues)\n\t);\n\n\t// Focus management and body scroll control\n\t$effect(() => {\n\t\tif (props.isOpen) {\n\t\t\t// Focus management - focus the sidebar when it opens\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst sidebar = document.querySelector('.config-sidebar--open');\n\t\t\t\tif (sidebar) {\n\t\t\t\t\t(sidebar as HTMLElement).focus();\n\t\t\t\t}\n\t\t\t}, 100);\n\n\t\t\t// Prevent body scroll\n\t\t\tdocument.body.style.overflow = 'hidden';\n\t\t} else {\n\t\t\t// Restore body scroll\n\t\t\tdocument.body.style.overflow = '';\n\t\t}\n\t});\n\n\t/**\n\t * Handle input changes for different field types\n\t */\n\tfunction handleInputChange(key: string, value: unknown, type: string): void {\n\t\tlet processedValue = value;\n\n\t\t// Process value based on type\n\t\tswitch (type) {\n\t\t\tcase 'number':\n\t\t\tcase 'integer':\n\t\t\t\tprocessedValue = value === '' ? undefined : Number(value);\n\t\t\t\tbreak;\n\t\t\tcase 'boolean':\n\t\t\t\tprocessedValue = Boolean(value);\n\t\t\t\tbreak;\n\t\t\tcase 'array':\n\t\t\t\ttry {\n\t\t\t\t\tprocessedValue = typeof value === 'string' ? JSON.parse(value) : value;\n\t\t\t\t} catch {\n\t\t\t\t\tprocessedValue = [];\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'object':\n\t\t\t\ttry {\n\t\t\t\t\tprocessedValue = typeof value === 'string' ? JSON.parse(value) : value;\n\t\t\t\t} catch {\n\t\t\t\t\tprocessedValue = {};\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tprocessedValue = value;\n\t\t}\n\n\t\tlocalConfigValues = {\n\t\t\t...localConfigValues,\n\t\t\t[key]: processedValue\n\t\t};\n\t}\n\n\t/**\n\t * Handle save action\n\t * Preserves hidden field values from the original configuration\n\t */\n\tfunction handleSave(): void {\n\t\t// Merge hidden field values from original props to ensure they're preserved\n\t\tconst hiddenFieldValues: ConfigValues = {};\n\t\tif (props.configSchema?.properties) {\n\t\t\tObject.entries(props.configSchema.properties).forEach(([key, property]) => {\n\t\t\t\tif (property.format === 'hidden' && key in props.configValues) {\n\t\t\t\t\thiddenFieldValues[key] = props.configValues[key];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tconst mergedConfig = { ...localConfigValues, ...hiddenFieldValues };\n\t\tprops.onSave?.(mergedConfig);\n\t\tdispatch('save', { config: mergedConfig });\n\t}\n\n\t/**\n\t * Handle cancel action\n\t */\n\tfunction handleCancel(): void {\n\t\tlocalConfigValues = { ...props.configValues };\n\t\thasChanges = false;\n\t\tprops.onCancel?.();\n\t\tdispatch('cancel');\n\t}\n\n\t/**\n\t * Handle close action\n\t */\n\tfunction handleClose(): void {\n\t\tif (hasChanges) {\n\t\t\tconst shouldClose = confirm('You have unsaved changes. Are you sure you want to close?');\n\t\t\tif (!shouldClose) return;\n\t\t}\n\n\t\tlocalConfigValues = { ...props.configValues };\n\t\thasChanges = false;\n\t\tprops.onClose?.();\n\t\tdispatch('close');\n\t}\n\n\t/**\n\t * Handle keyboard shortcuts\n\t */\n\tfunction handleKeydown(event: KeyboardEvent): void {\n\t\tif (event.key === 'Escape') {\n\t\t\thandleClose();\n\t\t} else if (event.key === 'Enter' && (event.ctrlKey || event.metaKey)) {\n\t\t\thandleSave();\n\t\t}\n\t}\n\n\t/* Overlay event handlers removed since overlay is no longer used */\n\n\t/**\n\t * Get input type for HTML input element\n\t */\n\tfunction getInputType(schemaType: string): string {\n\t\tswitch (schemaType) {\n\t\t\tcase 'number':\n\t\t\tcase 'integer':\n\t\t\t\treturn 'number';\n\t\t\tcase 'boolean':\n\t\t\t\treturn 'checkbox';\n\t\t\tdefault:\n\t\t\t\treturn 'text';\n\t\t}\n\t}\n\n\t/**\n\t * Check if field should be rendered as textarea\n\t */\n\tfunction isTextarea(property: ConfigProperty): boolean {\n\t\treturn (\n\t\t\tproperty.format === 'multiline' || property.type === 'object' || property.type === 'array'\n\t\t);\n\t}\n\n\t/**\n\t * Get display value for complex types\n\t */\n\tfunction getDisplayValue(value: unknown, type: string): string {\n\t\tif (type === 'object' || type === 'array') {\n\t\t\treturn typeof value === 'string' ? value : JSON.stringify(value, null, 2);\n\t\t}\n\t\treturn String(value ?? '');\n\t}\n</script>\n\n<!-- Overlay removed to avoid darkening the canvas -->\n\n<!-- Sidebar -->\n<div\n\tclass=\"config-sidebar\"\n\tclass:config-sidebar--open={props.isOpen}\n\trole=\"dialog\"\n\taria-label=\"Configuration sidebar\"\n\taria-modal=\"true\"\n\ttabindex=\"-1\"\n\tonkeydown={handleKeydown}\n>\n\t<!-- Header -->\n\t<div class=\"config-sidebar__header\">\n\t\t<div class=\"config-sidebar__title-section\">\n\t\t\t<h2 class=\"config-sidebar__title\">{props.title}</h2>\n\t\t\t{#if hasChanges}\n\t\t\t\t<div class=\"config-sidebar__changes-indicator\" title=\"Unsaved changes\">\n\t\t\t\t\t<Icon icon=\"mdi:circle\" />\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t\t<button\n\t\t\tclass=\"config-sidebar__close-btn\"\n\t\t\tonclick={handleClose}\n\t\t\ttitle=\"Close sidebar (Esc)\"\n\t\t\taria-label=\"Close configuration sidebar\"\n\t\t>\n\t\t\t<Icon icon=\"mdi:close\" />\n\t\t</button>\n\t</div>\n\n\t<!-- Content -->\n\t<div class=\"config-sidebar__content\">\n\t\t<!-- Node Details Section -->\n\t\t{#if props.nodeDetails}\n\t\t\t<div class=\"config-sidebar__details\">\n\t\t\t\t<h3 class=\"config-sidebar__section-title\">Node Details</h3>\n\n\t\t\t\t<div class=\"config-sidebar__detail-grid\">\n\t\t\t\t\t<div class=\"config-sidebar__detail-item\">\n\t\t\t\t\t\t<span class=\"config-sidebar__detail-label\">Type:</span>\n\t\t\t\t\t\t<span class=\"config-sidebar__detail-value\">{props.nodeDetails.type}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"config-sidebar__detail-item\">\n\t\t\t\t\t\t<span class=\"config-sidebar__detail-label\">Category:</span>\n\t\t\t\t\t\t<span class=\"config-sidebar__detail-value config-sidebar__detail-value--badge\"\n\t\t\t\t\t\t\t>{props.nodeDetails.category}</span\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if props.nodeDetails.version}\n\t\t\t\t\t\t<div class=\"config-sidebar__detail-item\">\n\t\t\t\t\t\t\t<span class=\"config-sidebar__detail-label\">Version:</span>\n\t\t\t\t\t\t\t<span class=\"config-sidebar__detail-value\">{props.nodeDetails.version}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"config-sidebar__detail-item config-sidebar__detail-item--full\">\n\t\t\t\t\t<span class=\"config-sidebar__detail-label\">Description:</span>\n\t\t\t\t\t<p class=\"config-sidebar__detail-description\">{props.nodeDetails.description}</p>\n\t\t\t\t</div>\n\n\t\t\t\t{#if props.nodeDetails.inputs && props.nodeDetails.inputs.length > 0}\n\t\t\t\t\t<div class=\"config-sidebar__detail-section\">\n\t\t\t\t\t\t<h4 class=\"config-sidebar__detail-subtitle\">Input Ports</h4>\n\t\t\t\t\t\t<div class=\"config-sidebar__ports\">\n\t\t\t\t\t\t\t{#each props.nodeDetails.inputs as input (input.id)}\n\t\t\t\t\t\t\t\t<div class=\"config-sidebar__port config-sidebar__port--input\">\n\t\t\t\t\t\t\t\t\t<Icon icon=\"mdi:arrow-right\" class=\"config-sidebar__port-icon\" />\n\t\t\t\t\t\t\t\t\t<span class=\"config-sidebar__port-name\">{input.name}</span>\n\t\t\t\t\t\t\t\t\t<span class=\"config-sidebar__port-type\">{input.dataType || input.type}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if props.nodeDetails.outputs && props.nodeDetails.outputs.length > 0}\n\t\t\t\t\t<div class=\"config-sidebar__detail-section\">\n\t\t\t\t\t\t<h4 class=\"config-sidebar__detail-subtitle\">Output Ports</h4>\n\t\t\t\t\t\t<div class=\"config-sidebar__ports\">\n\t\t\t\t\t\t\t{#each props.nodeDetails.outputs as output (output.id)}\n\t\t\t\t\t\t\t\t<div class=\"config-sidebar__port config-sidebar__port--output\">\n\t\t\t\t\t\t\t\t\t<Icon icon=\"mdi:arrow-left\" class=\"config-sidebar__port-icon\" />\n\t\t\t\t\t\t\t\t\t<span class=\"config-sidebar__port-name\">{output.name}</span>\n\t\t\t\t\t\t\t\t\t<span class=\"config-sidebar__port-type\">{output.dataType || output.type}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if props.nodeDetails.tags && props.nodeDetails.tags.length > 0}\n\t\t\t\t\t<div class=\"config-sidebar__detail-section\">\n\t\t\t\t\t\t<h4 class=\"config-sidebar__detail-subtitle\">Tags</h4>\n\t\t\t\t\t\t<div class=\"config-sidebar__tags\">\n\t\t\t\t\t\t\t{#each props.nodeDetails.tags as tag (tag)}\n\t\t\t\t\t\t\t\t<span class=\"config-sidebar__tag\">{tag}</span>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<!-- Separator between details and config -->\n\t\t\t{#if props.configSchema?.properties}\n\t\t\t\t<div class=\"config-sidebar__separator\"></div>\n\t\t\t{/if}\n\t\t{/if}\n\n\t\t<!-- Configuration Section -->\n\t\t{#if props.configSchema?.properties}\n\t\t\t<div class=\"config-sidebar__config-section\">\n\t\t\t\t<h3 class=\"config-sidebar__section-title\">Configuration</h3>\n\t\t\t\t<form\n\t\t\t\t\tclass=\"config-sidebar__form\"\n\t\t\t\t\tonsubmit={(e) => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\thandleSave();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{#each Object.entries(props.configSchema.properties) as [key, property] (key)}\n\t\t\t\t\t\t{#if property.format === 'hidden'}\n\t\t\t\t\t\t\t<!-- Hidden field to preserve value -->\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"hidden\"\n\t\t\t\t\t\t\t\tid=\"config-{key}\"\n\t\t\t\t\t\t\t\tvalue={typeof (localConfigValues[key] ?? property.default) === 'object'\n\t\t\t\t\t\t\t\t\t? JSON.stringify(localConfigValues[key] ?? property.default ?? {})\n\t\t\t\t\t\t\t\t\t: (localConfigValues[key] ?? property.default ?? '')}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<div class=\"config-sidebar__field\">\n\t\t\t\t\t\t\t\t<label class=\"config-sidebar__label\" for=\"config-{key}\">\n\t\t\t\t\t\t\t\t\t{property.title || key}\n\t\t\t\t\t\t\t\t\t{#if props.configSchema?.required?.includes(key)}\n\t\t\t\t\t\t\t\t\t\t<span class=\"config-sidebar__required\">*</span>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t\t{#if property.description}\n\t\t\t\t\t\t\t\t\t<p class=\"config-sidebar__description\">{property.description}</p>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if property.enum && property.multiple}\n\t\t\t\t\t\t\t\t\t<!-- Checkboxes for enum with multiple selection -->\n\t\t\t\t\t\t\t\t\t<div class=\"config-sidebar__checkbox-group\">\n\t\t\t\t\t\t\t\t\t\t{#each property.enum as option (option)}\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"config-sidebar__checkbox-wrapper\">\n\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"config-{key}-{option}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"config-sidebar__checkbox\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={option}\n\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={Array.isArray(localConfigValues[key]) &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalConfigValues[key].includes(option)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonchange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst checked = (e.target as HTMLInputElement).checked;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst currentValues = Array.isArray(localConfigValues[key])\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? [...localConfigValues[key]]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: [];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (checked) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!currentValues.includes(option)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleInputChange(key, [...currentValues, option], property.type);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleInputChange(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentValues.filter((v) => v !== option),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tproperty.type\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<label for=\"config-{key}-{option}\" class=\"config-sidebar__checkbox-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{option}\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{:else if property.enum}\n\t\t\t\t\t\t\t\t\t<!-- Dropdown for enum with single selection -->\n\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\tid=\"config-{key}\"\n\t\t\t\t\t\t\t\t\t\tclass=\"config-sidebar__select\"\n\t\t\t\t\t\t\t\t\t\tvalue={localConfigValues[key] ?? property.default ?? ''}\n\t\t\t\t\t\t\t\t\t\tonchange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\thandleInputChange(key, (e.target as HTMLSelectElement).value, property.type)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{#each property.enum as option (option)}\n\t\t\t\t\t\t\t\t\t\t\t<option value={option}>{option}</option>\n\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t{:else if property.type === 'boolean'}\n\t\t\t\t\t\t\t\t\t<!-- Checkbox for boolean -->\n\t\t\t\t\t\t\t\t\t<div class=\"config-sidebar__checkbox-wrapper\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tid=\"config-{key}\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"config-sidebar__checkbox\"\n\t\t\t\t\t\t\t\t\t\t\tchecked={Boolean(localConfigValues[key] ?? property.default ?? false)}\n\t\t\t\t\t\t\t\t\t\t\tonchange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\thandleInputChange(\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\t\t\t\t\t\t(e.target as HTMLInputElement).checked,\n\t\t\t\t\t\t\t\t\t\t\t\t\tproperty.type\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<label for=\"config-{key}\" class=\"config-sidebar__checkbox-label\">\n\t\t\t\t\t\t\t\t\t\t\t{property.title || key}\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{:else if isTextarea(property)}\n\t\t\t\t\t\t\t\t\t<!-- Textarea for multiline, objects, arrays -->\n\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\tid=\"config-{key}\"\n\t\t\t\t\t\t\t\t\t\tclass=\"config-sidebar__textarea\"\n\t\t\t\t\t\t\t\t\t\tplaceholder={property.default ? String(property.default) : ''}\n\t\t\t\t\t\t\t\t\t\tvalue={getDisplayValue(\n\t\t\t\t\t\t\t\t\t\t\tlocalConfigValues[key] ?? property.default ?? '',\n\t\t\t\t\t\t\t\t\t\t\tproperty.type\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\toninput={(e) =>\n\t\t\t\t\t\t\t\t\t\t\thandleInputChange(\n\t\t\t\t\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\t\t\t\t\t(e.target as HTMLTextAreaElement).value,\n\t\t\t\t\t\t\t\t\t\t\t\tproperty.type\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\trows=\"4\"\n\t\t\t\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<!-- Regular input -->\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tid=\"config-{key}\"\n\t\t\t\t\t\t\t\t\t\ttype={getInputType(property.type)}\n\t\t\t\t\t\t\t\t\t\tclass=\"config-sidebar__input\"\n\t\t\t\t\t\t\t\t\t\tplaceholder={property.default ? String(property.default) : ''}\n\t\t\t\t\t\t\t\t\t\tvalue={localConfigValues[key] ?? property.default ?? ''}\n\t\t\t\t\t\t\t\t\t\tmin={property.minimum}\n\t\t\t\t\t\t\t\t\t\tmax={property.maximum}\n\t\t\t\t\t\t\t\t\t\tstep={property.type === 'number' ? 'any' : undefined}\n\t\t\t\t\t\t\t\t\t\toninput={(e) =>\n\t\t\t\t\t\t\t\t\t\t\thandleInputChange(key, (e.target as HTMLInputElement).value, property.type)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{/each}\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t{:else if !props.nodeDetails}\n\t\t\t<div class=\"config-sidebar__empty\">\n\t\t\t\t<Icon icon=\"mdi:cog-outline\" class=\"config-sidebar__empty-icon\" />\n\t\t\t\t<p class=\"config-sidebar__empty-text\">No configuration options available</p>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\n\t<!-- Footer -->\n\t<div class=\"config-sidebar__footer\">\n\t\t<div class=\"config-sidebar__actions\">\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclass=\"config-sidebar__btn config-sidebar__btn--secondary\"\n\t\t\t\tonclick={handleCancel}\n\t\t\t\tdisabled={!hasChanges}\n\t\t\t>\n\t\t\t\t<Icon icon=\"mdi:undo\" />\n\t\t\t\tReset\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclass=\"config-sidebar__btn config-sidebar__btn--primary\"\n\t\t\t\tonclick={handleSave}\n\t\t\t\tdisabled={!hasChanges}\n\t\t\t\ttitle=\"Save configuration (Ctrl+Enter)\"\n\t\t\t>\n\t\t\t\t<Icon icon=\"mdi:check\" />\n\t\t\t\tSave Changes\n\t\t\t</button>\n\t\t</div>\n\n\t\t{#if hasChanges}\n\t\t\t<p class=\"config-sidebar__changes-text\">You have unsaved changes</p>\n\t\t{/if}\n\t</div>\n</div>\n\n<style>\n\t/* Overlay styles removed to avoid darkening the canvas */\n\n\t.config-sidebar {\n\t\tposition: fixed;\n\t\ttop: var(--flowdrop-navbar-height, 60px); /* Start below navbar */\n\t\tright: 0;\n\t\twidth: 400px;\n\t\theight: calc(100vh - var(--flowdrop-navbar-height, 60px)); /* Account for navbar height */\n\t\tbackground-color: #ffffff;\n\t\tborder-left: 1px solid #e5e7eb;\n\t\tbox-shadow: -4px 0 20px rgba(0, 0, 0, 0.15);\n\t\ttransform: translateX(100%);\n\t\ttransition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\t\tz-index: -1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpointer-events: none;\n\t}\n\n\t/* Mobile responsive */\n\t@media (max-width: 768px) {\n\t\t.config-sidebar {\n\t\t\twidth: 100vw;\n\t\t\tborder-left: none;\n\t\t}\n\t}\n\n\t@media (max-width: 480px) {\n\t\t.config-sidebar {\n\t\t\twidth: 100vw;\n\t\t}\n\t}\n\n\t.config-sidebar--open {\n\t\ttransform: translateX(0);\n\t\tz-index: 999;\n\t\tpointer-events: auto;\n\t}\n\n\t/* Off-canvas overlay styles removed to avoid darkening the canvas */\n\n\t/* Prevent body scroll when sidebar is open */\n\t:global(body:has(.config-sidebar--open)) {\n\t\toverflow: hidden;\n\t}\n\n\t.config-sidebar__header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding: 1rem 1.5rem;\n\t\tborder-bottom: 1px solid #e5e7eb;\n\t\tbackground-color: #f9fafb;\n\t\tflex-shrink: 0;\n\t}\n\n\t.config-sidebar__title-section {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t}\n\n\t.config-sidebar__title {\n\t\tfont-size: 1.125rem;\n\t\tfont-weight: 600;\n\t\tcolor: #111827;\n\t\tmargin: 0;\n\t}\n\n\t.config-sidebar__changes-indicator {\n\t\tcolor: #f59e0b;\n\t\tfont-size: 0.5rem;\n\t\tanimation: pulse 2s infinite;\n\t}\n\n\t.config-sidebar__close-btn {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 2rem;\n\t\theight: 2rem;\n\t\tborder: none;\n\t\tbackground: transparent;\n\t\tcolor: #6b7280;\n\t\tcursor: pointer;\n\t\tborder-radius: 0.375rem;\n\t\ttransition: all 0.2s ease-in-out;\n\t}\n\n\t.config-sidebar__close-btn:hover {\n\t\tbackground-color: #f3f4f6;\n\t\tcolor: #374151;\n\t}\n\n\t.config-sidebar__content {\n\t\tflex: 1;\n\t\toverflow-y: auto;\n\t\tpadding: 1.5rem;\n\t\tmin-height: 0; /* Allow flex item to shrink below content size */\n\t\tmax-height: calc(\n\t\t\t100vh - var(--flowdrop-navbar-height, 60px) - 200px\n\t\t); /* Reserve much more space for header and footer */\n\t}\n\n\t/* Node Details Styles */\n\t.config-sidebar__details {\n\t\tmargin-bottom: 1rem;\n\t}\n\n\t.config-sidebar__section-title {\n\t\tfont-size: 1rem;\n\t\tfont-weight: 600;\n\t\tcolor: #111827;\n\t\tmargin: 0 0 1rem 0;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t}\n\n\t.config-sidebar__detail-grid {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 1fr 1fr;\n\t\tgap: 0.75rem;\n\t\tmargin-bottom: 1rem;\n\t}\n\n\t.config-sidebar__detail-item {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.25rem;\n\t}\n\n\t.config-sidebar__detail-item--full {\n\t\tgrid-column: 1 / -1;\n\t}\n\n\t.config-sidebar__detail-label {\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 500;\n\t\tcolor: #6b7280;\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t}\n\n\t.config-sidebar__detail-value {\n\t\tfont-size: 0.875rem;\n\t\tcolor: #374151;\n\t\tfont-weight: 500;\n\t}\n\n\t.config-sidebar__detail-value--badge {\n\t\tbackground-color: #f3f4f6;\n\t\tcolor: #374151;\n\t\tpadding: 0.25rem 0.5rem;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.75rem;\n\t\twidth: fit-content;\n\t\ttext-transform: capitalize;\n\t}\n\n\t.config-sidebar__detail-description {\n\t\tfont-size: 0.875rem;\n\t\tcolor: #6b7280;\n\t\tline-height: 1.5;\n\t\tmargin: 0;\n\t}\n\n\t.config-sidebar__detail-section {\n\t\tmargin-top: 1rem;\n\t}\n\n\t.config-sidebar__detail-subtitle {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 600;\n\t\tcolor: #374151;\n\t\tmargin: 0 0 0.5rem 0;\n\t}\n\n\t.config-sidebar__ports {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.5rem;\n\t}\n\n\t.config-sidebar__port {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 0.5rem;\n\t\tbackground-color: #f9fafb;\n\t\tborder-radius: 0.375rem;\n\t\tborder: 1px solid #e5e7eb;\n\t}\n\n\t.config-sidebar__port--input {\n\t\tborder-left: 3px solid #3b82f6;\n\t}\n\n\t.config-sidebar__port--output {\n\t\tborder-left: 3px solid #10b981;\n\t}\n\n\t:global(.config-sidebar__port-icon) {\n\t\tcolor: #6b7280;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.config-sidebar__port-name {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcolor: #374151;\n\t\tflex: 1;\n\t}\n\n\t.config-sidebar__port-type {\n\t\tfont-size: 0.75rem;\n\t\tcolor: #6b7280;\n\t\tbackground-color: #ffffff;\n\t\tpadding: 0.125rem 0.375rem;\n\t\tborder-radius: 0.25rem;\n\t\tborder: 1px solid #d1d5db;\n\t}\n\n\t.config-sidebar__tags {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tgap: 0.5rem;\n\t}\n\n\t.config-sidebar__tag {\n\t\tfont-size: 0.75rem;\n\t\tcolor: #374151;\n\t\tbackground-color: #f3f4f6;\n\t\tpadding: 0.25rem 0.5rem;\n\t\tborder-radius: 0.375rem;\n\t\tborder: 1px solid #e5e7eb;\n\t}\n\n\t.config-sidebar__separator {\n\t\theight: 1px;\n\t\tbackground-color: #e5e7eb;\n\t\tmargin: 1.5rem 0;\n\t}\n\n\t.config-sidebar__config-section {\n\t\tmargin-top: 1rem;\n\t}\n\n\t.config-sidebar__form {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 1.5rem;\n\t}\n\n\t.config-sidebar__field {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.5rem;\n\t}\n\n\t.config-sidebar__label {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcolor: #374151;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.25rem;\n\t}\n\n\t.config-sidebar__required {\n\t\tcolor: #ef4444;\n\t\tfont-weight: 600;\n\t}\n\n\t.config-sidebar__description {\n\t\tfont-size: 0.75rem;\n\t\tcolor: #6b7280;\n\t\tmargin: 0;\n\t\tline-height: 1.4;\n\t}\n\n\t.config-sidebar__input,\n\t.config-sidebar__select,\n\t.config-sidebar__textarea {\n\t\tpadding: 0.5rem 0.75rem;\n\t\tborder: 1px solid #d1d5db;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\ttransition:\n\t\t\tborder-color 0.2s ease-in-out,\n\t\t\tbox-shadow 0.2s ease-in-out;\n\t\tbackground-color: #ffffff;\n\t}\n\n\t.config-sidebar__input:focus,\n\t.config-sidebar__select:focus,\n\t.config-sidebar__textarea:focus {\n\t\toutline: none;\n\t\tborder-color: #3b82f6;\n\t\tbox-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n\t}\n\n\t.config-sidebar__textarea {\n\t\tresize: vertical;\n\t\tmin-height: 80px;\n\t\tfont-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n\t\tline-height: 1.4;\n\t}\n\n\t.config-sidebar__checkbox-group {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.5rem;\n\t}\n\n\t.config-sidebar__checkbox-wrapper {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t}\n\n\t.config-sidebar__checkbox {\n\t\twidth: 1rem;\n\t\theight: 1rem;\n\t\taccent-color: #3b82f6;\n\t\tcursor: pointer;\n\t}\n\n\t.config-sidebar__checkbox-label {\n\t\tfont-size: 0.875rem;\n\t\tcolor: #374151;\n\t\tcursor: pointer;\n\t}\n\n\t.config-sidebar__empty {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpadding: 3rem 1rem;\n\t\ttext-align: center;\n\t\tcolor: #6b7280;\n\t}\n\n\t:global(.config-sidebar__empty-icon) {\n\t\tfont-size: 3rem;\n\t\tmargin-bottom: 1rem;\n\t\topacity: 0.5;\n\t}\n\n\t.config-sidebar__empty-text {\n\t\tfont-size: 0.875rem;\n\t\tmargin: 0;\n\t}\n\n\t.config-sidebar__footer {\n\t\tpadding: 1rem 1.5rem;\n\t\tborder-top: 1px solid #e5e7eb;\n\t\tbackground-color: #f9fafb;\n\t\tflex-shrink: 0;\n\t\tposition: sticky;\n\t\tbottom: 0;\n\t\tz-index: 10; /* Ensure footer stays on top */\n\t\theight: 80px; /* Increased height for footer */\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: flex-end;\n\t\tgap: 0.75rem;\n\t\tmin-height: 80px; /* Ensure minimum height */\n\t}\n\n\t.config-sidebar__actions {\n\t\tdisplay: flex;\n\t\tgap: 0.75rem;\n\t\tmargin-bottom: 0.5rem;\n\t}\n\n\t.config-sidebar__btn {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 0.5rem 1rem;\n\t\tborder: 1px solid;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tflex: 1;\n\t\tjustify-content: center;\n\t}\n\n\t.config-sidebar__btn:disabled {\n\t\topacity: 0.5;\n\t\tcursor: not-allowed;\n\t}\n\n\t.config-sidebar__btn--primary {\n\t\tbackground-color: #3b82f6;\n\t\tborder-color: #3b82f6;\n\t\tcolor: #ffffff;\n\t}\n\n\t.config-sidebar__btn--primary:hover:not(:disabled) {\n\t\tbackground-color: #2563eb;\n\t\tborder-color: #2563eb;\n\t}\n\n\t.config-sidebar__btn--secondary {\n\t\tbackground-color: transparent;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n\n\t.config-sidebar__btn--secondary:hover:not(:disabled) {\n\t\tbackground-color: #f3f4f6;\n\t\tborder-color: #9ca3af;\n\t}\n\n\t.config-sidebar__changes-text {\n\t\tfont-size: 0.75rem;\n\t\tcolor: #f59e0b;\n\t\tmargin: 0;\n\t\ttext-align: center;\n\t\tfont-weight: 500;\n\t}\n\n\t@keyframes pulse {\n\t\t0%,\n\t\t100% {\n\t\t\topacity: 1;\n\t\t}\n\t\t50% {\n\t\t\topacity: 0.5;\n\t\t}\n\t}\n\n\t/* Responsive design */\n\t@media (max-width: 640px) {\n\t\t.config-sidebar {\n\t\t\twidth: 100vw;\n\t\t}\n\t}\n\n\t@media (max-width: 480px) {\n\t\t.config-sidebar__header,\n\t\t.config-sidebar__content,\n\t\t.config-sidebar__footer {\n\t\t\tpadding-left: 1rem;\n\t\t\tpadding-right: 1rem;\n\t\t}\n\t}\n</style>\n","<!--\n  Logs Sidebar Component\n  Right-side sliding sidebar for real-time execution logs\n  Similar to ConfigSidebar but for logs display\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport Icon from '@iconify/svelte';\n\timport { createEventDispatcher } from 'svelte';\n\timport type { WorkflowNode as WorkflowNodeType } from '../types/index.js';\n\n\tconst dispatch = createEventDispatcher();\n\n\tinterface LogEntry {\n\t\ttimestamp: string;\n\t\tlevel: string;\n\t\tmessage: string;\n\t\tnodeId?: string;\n\t}\n\n\tinterface Props {\n\t\tisOpen: boolean;\n\t\tlogs: LogEntry[];\n\t\tselectedNode?: WorkflowNodeType | null;\n\t\tonClose?: () => void;\n\t}\n\n\tlet props: Props = $props();\n\n\t// Focus management and body scroll control\n\t$effect(() => {\n\t\tif (props.isOpen) {\n\t\t\t// Focus management - focus the sidebar when it opens\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst sidebar = document.querySelector('.logs-sidebar--open');\n\t\t\t\tif (sidebar) {\n\t\t\t\t\t(sidebar as HTMLElement).focus();\n\t\t\t\t}\n\t\t\t}, 100);\n\n\t\t\t// Prevent body scroll\n\t\t\tdocument.body.style.overflow = 'hidden';\n\t\t} else {\n\t\t\t// Restore body scroll\n\t\t\tdocument.body.style.overflow = '';\n\t\t}\n\t});\n\n\t/**\n\t * Handle close action\n\t */\n\tfunction handleClose(): void {\n\t\tprops.onClose?.();\n\t\tdispatch('close');\n\t}\n\n\t/**\n\t * Handle keyboard shortcuts\n\t */\n\tfunction handleKeydown(event: KeyboardEvent): void {\n\t\tif (event.key === 'Escape') {\n\t\t\thandleClose();\n\t\t}\n\t}\n\n\t/**\n\t * Get log level color\n\t */\n\tfunction getLogLevelColor(level: string): string {\n\t\tswitch (level) {\n\t\t\tcase 'error':\n\t\t\t\treturn '#ef4444';\n\t\t\tcase 'warning':\n\t\t\t\treturn '#f59e0b';\n\t\t\tcase 'success':\n\t\t\t\treturn '#10b981';\n\t\t\tcase 'info':\n\t\t\t\treturn '#3b82f6';\n\t\t\tdefault:\n\t\t\t\treturn '#6b7280';\n\t\t}\n\t}\n\n\t/**\n\t * Get log level icon\n\t */\n\tfunction getLogLevelIcon(level: string): string {\n\t\tswitch (level) {\n\t\t\tcase 'error':\n\t\t\t\treturn 'mdi:alert-circle';\n\t\t\tcase 'warning':\n\t\t\t\treturn 'mdi:alert';\n\t\t\tcase 'success':\n\t\t\t\treturn 'mdi:check-circle';\n\t\t\tcase 'info':\n\t\t\t\treturn 'mdi:information';\n\t\t\tdefault:\n\t\t\t\treturn 'mdi:circle';\n\t\t}\n\t}\n\n\t/**\n\t * Format timestamp for display\n\t */\n\tfunction formatTimestamp(timestamp: string): string {\n\t\tconst date = new Date(timestamp);\n\t\treturn date.toLocaleTimeString('en-US', {\n\t\t\thour12: false,\n\t\t\thour: '2-digit',\n\t\t\tminute: '2-digit',\n\t\t\tsecond: '2-digit',\n\t\t\tfractionalSecondDigits: 3\n\t\t});\n\t}\n\n\t/**\n\t * Filter logs by selected node\n\t */\n\tlet filteredLogs = $derived(() => {\n\t\tif (props.selectedNode) {\n\t\t\treturn props.logs.filter((log) => log.nodeId === props.selectedNode?.id);\n\t\t}\n\t\treturn props.logs;\n\t});\n\n\t/**\n\t * Clear logs\n\t */\n\tfunction clearLogs(): void {\n\t\tdispatch('clear');\n\t}\n\n\t/**\n\t * Export logs\n\t */\n\tfunction exportLogs(): void {\n\t\tconst logText = filteredLogs()\n\t\t\t.map(\n\t\t\t\t(log) =>\n\t\t\t\t\t`[${formatTimestamp(log.timestamp)}] ${log.level.toUpperCase()}: ${log.message}${log.nodeId ? ` (Node: ${log.nodeId})` : ''}`\n\t\t\t)\n\t\t\t.join('\\n');\n\n\t\tconst blob = new Blob([logText], { type: 'text/plain' });\n\t\tconst url = URL.createObjectURL(blob);\n\t\tconst link = document.createElement('a');\n\t\tlink.href = url;\n\t\tlink.download = `pipeline-logs-${new Date().toISOString().split('T')[0]}.txt`;\n\t\tlink.click();\n\t\tURL.revokeObjectURL(url);\n\t}\n\n\t// Auto-scroll to bottom when new logs arrive\n\tlet logsContainer = $state<HTMLElement>();\n\t$effect(() => {\n\t\tif (logsContainer && props.logs.length > 0) {\n\t\t\tlogsContainer.scrollTop = logsContainer.scrollHeight;\n\t\t}\n\t});\n</script>\n\n<!-- Sidebar -->\n<div\n\tclass=\"logs-sidebar\"\n\tclass:logs-sidebar--open={props.isOpen}\n\trole=\"dialog\"\n\taria-label=\"Execution logs sidebar\"\n\taria-modal=\"true\"\n\ttabindex=\"-1\"\n\tonkeydown={handleKeydown}\n>\n\t<!-- Header -->\n\t<div class=\"logs-sidebar__header\">\n\t\t<div class=\"logs-sidebar__title-section\">\n\t\t\t<h2 class=\"logs-sidebar__title\">\n\t\t\t\t{#if props.selectedNode}\n\t\t\t\t\tLogs: {props.selectedNode.data.label}\n\t\t\t\t{:else}\n\t\t\t\t\tExecution Logs\n\t\t\t\t{/if}\n\t\t\t</h2>\n\t\t\t{#if props.logs.length > 0}\n\t\t\t\t<div class=\"logs-sidebar__count\" title=\"Total log entries\">\n\t\t\t\t\t<Icon icon=\"mdi:file-document-outline\" />\n\t\t\t\t\t{props.logs.length}\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t\t<button\n\t\t\tclass=\"logs-sidebar__close-btn\"\n\t\t\tonclick={handleClose}\n\t\t\ttitle=\"Close logs sidebar (Esc)\"\n\t\t\taria-label=\"Close logs sidebar\"\n\t\t>\n\t\t\t<Icon icon=\"mdi:close\" />\n\t\t</button>\n\t</div>\n\n\t<!-- Content -->\n\t<div class=\"logs-sidebar__content\">\n\t\t<!-- Logs List -->\n\t\t{#if filteredLogs().length > 0}\n\t\t\t<div class=\"logs-sidebar__logs\" bind:this={logsContainer}>\n\t\t\t\t{#each filteredLogs() as log, index (index)}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"logs-sidebar__log-entry\"\n\t\t\t\t\t\tclass:logs-sidebar__log-entry--error={log.level === 'error'}\n\t\t\t\t\t\tclass:logs-sidebar__log-entry--warning={log.level === 'warning'}\n\t\t\t\t\t\tclass:logs-sidebar__log-entry--success={log.level === 'success'}\n\t\t\t\t\t\tclass:logs-sidebar__log-entry--info={log.level === 'info'}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"logs-sidebar__log-header\">\n\t\t\t\t\t\t\t<div class=\"logs-sidebar__log-level\">\n\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\ticon={getLogLevelIcon(log.level)}\n\t\t\t\t\t\t\t\t\tstyle=\"color: {getLogLevelColor(log.level)}\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span class=\"logs-sidebar__log-level-text\">{log.level.toUpperCase()}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"logs-sidebar__log-timestamp\">\n\t\t\t\t\t\t\t\t{formatTimestamp(log.timestamp)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"logs-sidebar__log-message\">\n\t\t\t\t\t\t\t{log.message}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{#if log.nodeId}\n\t\t\t\t\t\t\t<div class=\"logs-sidebar__log-node\">\n\t\t\t\t\t\t\t\t<Icon icon=\"mdi:graph\" />\n\t\t\t\t\t\t\t\tNode: {log.nodeId}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<div class=\"logs-sidebar__empty\">\n\t\t\t\t<Icon icon=\"mdi:file-document-outline\" class=\"logs-sidebar__empty-icon\" />\n\t\t\t\t<p class=\"logs-sidebar__empty-text\">\n\t\t\t\t\t{#if props.selectedNode}\n\t\t\t\t\t\tNo logs available for this node\n\t\t\t\t\t{:else}\n\t\t\t\t\t\tNo execution logs yet\n\t\t\t\t\t{/if}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\n\t<!-- Footer -->\n\t<div class=\"logs-sidebar__footer\">\n\t\t<div class=\"logs-sidebar__actions\">\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclass=\"logs-sidebar__btn logs-sidebar__btn--secondary\"\n\t\t\t\tonclick={clearLogs}\n\t\t\t\tdisabled={props.logs.length === 0}\n\t\t\t>\n\t\t\t\t<Icon icon=\"mdi:delete\" />\n\t\t\t\tClear\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclass=\"logs-sidebar__btn logs-sidebar__btn--outline\"\n\t\t\t\tonclick={exportLogs}\n\t\t\t\tdisabled={props.logs.length === 0}\n\t\t\t>\n\t\t\t\t<Icon icon=\"mdi:download\" />\n\t\t\t\tExport\n\t\t\t</button>\n\t\t</div>\n\n\t\t{#if props.logs.length > 0}\n\t\t\t<p class=\"logs-sidebar__info-text\">\n\t\t\t\t{filteredLogs().length} of {props.logs.length} log entries\n\t\t\t</p>\n\t\t{/if}\n\t</div>\n</div>\n\n<style>\n\t.logs-sidebar {\n\t\tposition: fixed;\n\t\ttop: var(--flowdrop-navbar-height, 60px); /* Start below navbar */\n\t\tright: 0;\n\t\twidth: 400px;\n\t\theight: calc(100vh - var(--flowdrop-navbar-height, 60px)); /* Account for navbar height */\n\t\tbackground-color: #ffffff;\n\t\tborder-left: 1px solid #e5e7eb;\n\t\tbox-shadow: -4px 0 20px rgba(0, 0, 0, 0.15);\n\t\ttransform: translateX(100%);\n\t\ttransition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\t\tz-index: -1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpointer-events: none;\n\t}\n\n\t/* Mobile responsive */\n\t@media (max-width: 768px) {\n\t\t.logs-sidebar {\n\t\t\twidth: 100vw;\n\t\t\tborder-left: none;\n\t\t}\n\t}\n\n\t@media (max-width: 480px) {\n\t\t.logs-sidebar {\n\t\t\twidth: 100vw;\n\t\t}\n\t}\n\n\t.logs-sidebar--open {\n\t\ttransform: translateX(0);\n\t\tz-index: 999;\n\t\tpointer-events: auto;\n\t}\n\n\t/* Prevent body scroll when sidebar is open */\n\t:global(body:has(.logs-sidebar--open)) {\n\t\toverflow: hidden;\n\t}\n\n\t.logs-sidebar__header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding: 1rem 1.5rem;\n\t\tborder-bottom: 1px solid #e5e7eb;\n\t\tbackground-color: #f9fafb;\n\t\tflex-shrink: 0;\n\t}\n\n\t.logs-sidebar__title-section {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t}\n\n\t.logs-sidebar__title {\n\t\tfont-size: 1.125rem;\n\t\tfont-weight: 600;\n\t\tcolor: #111827;\n\t\tmargin: 0;\n\t}\n\n\t.logs-sidebar__count {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.25rem;\n\t\tfont-size: 0.75rem;\n\t\tcolor: #6b7280;\n\t\tbackground-color: #f3f4f6;\n\t\tpadding: 0.25rem 0.5rem;\n\t\tborder-radius: 0.375rem;\n\t}\n\n\t.logs-sidebar__close-btn {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 2rem;\n\t\theight: 2rem;\n\t\tborder: none;\n\t\tbackground: transparent;\n\t\tcolor: #6b7280;\n\t\tcursor: pointer;\n\t\tborder-radius: 0.375rem;\n\t\ttransition: all 0.2s ease-in-out;\n\t}\n\n\t.logs-sidebar__close-btn:hover {\n\t\tbackground-color: #f3f4f6;\n\t\tcolor: #374151;\n\t}\n\n\t.logs-sidebar__content {\n\t\tflex: 1;\n\t\toverflow-y: auto;\n\t\tpadding: 1.5rem;\n\t}\n\n\t.logs-sidebar__logs {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.75rem;\n\t}\n\n\t.logs-sidebar__log-entry {\n\t\tbackground-color: #f9fafb;\n\t\tborder: 1px solid #e5e7eb;\n\t\tborder-radius: 0.5rem;\n\t\tpadding: 0.75rem;\n\t\ttransition: all 0.2s ease-in-out;\n\t}\n\n\t.logs-sidebar__log-entry--error {\n\t\tborder-left: 4px solid #ef4444;\n\t\tbackground-color: #fef2f2;\n\t}\n\n\t.logs-sidebar__log-entry--warning {\n\t\tborder-left: 4px solid #f59e0b;\n\t\tbackground-color: #fffbeb;\n\t}\n\n\t.logs-sidebar__log-entry--success {\n\t\tborder-left: 4px solid #10b981;\n\t\tbackground-color: #f0fdf4;\n\t}\n\n\t.logs-sidebar__log-entry--info {\n\t\tborder-left: 4px solid #3b82f6;\n\t\tbackground-color: #eff6ff;\n\t}\n\n\t.logs-sidebar__log-header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tmargin-bottom: 0.5rem;\n\t}\n\n\t.logs-sidebar__log-level {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.25rem;\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 600;\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t}\n\n\t.logs-sidebar__log-level-text {\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 600;\n\t}\n\n\t.logs-sidebar__log-timestamp {\n\t\tfont-size: 0.75rem;\n\t\tcolor: #6b7280;\n\t\tfont-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n\t}\n\n\t.logs-sidebar__log-message {\n\t\tfont-size: 0.875rem;\n\t\tcolor: #374151;\n\t\tline-height: 1.5;\n\t\tmargin-bottom: 0.5rem;\n\t\tword-break: break-word;\n\t}\n\n\t.logs-sidebar__log-node {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.25rem;\n\t\tfont-size: 0.75rem;\n\t\tcolor: #6b7280;\n\t\tbackground-color: #ffffff;\n\t\tpadding: 0.25rem 0.5rem;\n\t\tborder-radius: 0.25rem;\n\t\tborder: 1px solid #e5e7eb;\n\t\twidth: fit-content;\n\t}\n\n\t.logs-sidebar__empty {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpadding: 3rem 1rem;\n\t\ttext-align: center;\n\t\tcolor: #6b7280;\n\t}\n\n\t:global(.logs-sidebar__empty-icon) {\n\t\tfont-size: 3rem;\n\t\tmargin-bottom: 1rem;\n\t\topacity: 0.5;\n\t}\n\n\t.logs-sidebar__empty-text {\n\t\tfont-size: 0.875rem;\n\t\tmargin: 0;\n\t}\n\n\t.logs-sidebar__footer {\n\t\tpadding: 1rem 1.5rem;\n\t\tborder-top: 1px solid #e5e7eb;\n\t\tbackground-color: #f9fafb;\n\t\tflex-shrink: 0;\n\t}\n\n\t.logs-sidebar__actions {\n\t\tdisplay: flex;\n\t\tgap: 0.75rem;\n\t\tmargin-bottom: 0.5rem;\n\t}\n\n\t.logs-sidebar__btn {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 0.5rem 1rem;\n\t\tborder: 1px solid;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tflex: 1;\n\t\tjustify-content: center;\n\t}\n\n\t.logs-sidebar__btn:disabled {\n\t\topacity: 0.5;\n\t\tcursor: not-allowed;\n\t}\n\n\t.logs-sidebar__btn--secondary {\n\t\tbackground-color: #ef4444;\n\t\tborder-color: #ef4444;\n\t\tcolor: #ffffff;\n\t}\n\n\t.logs-sidebar__btn--secondary:hover:not(:disabled) {\n\t\tbackground-color: #dc2626;\n\t\tborder-color: #dc2626;\n\t}\n\n\t.logs-sidebar__btn--outline {\n\t\tbackground-color: transparent;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n\n\t.logs-sidebar__btn--outline:hover:not(:disabled) {\n\t\tbackground-color: #f3f4f6;\n\t\tborder-color: #9ca3af;\n\t}\n\n\t.logs-sidebar__info-text {\n\t\tfont-size: 0.75rem;\n\t\tcolor: #6b7280;\n\t\tmargin: 0;\n\t\ttext-align: center;\n\t}\n\n\t/* Responsive design */\n\t@media (max-width: 640px) {\n\t\t.logs-sidebar {\n\t\t\twidth: 100vw;\n\t\t}\n\t}\n\n\t@media (max-width: 480px) {\n\t\t.logs-sidebar__header,\n\t\t.logs-sidebar__content,\n\t\t.logs-sidebar__footer {\n\t\t\tpadding-left: 1rem;\n\t\t\tpadding-right: 1rem;\n\t\t}\n\t}\n</style>\n","/**\n * Mock for $app/stores\n * Provides minimal implementations for SvelteKit stores in library context\n */\n\nimport { writable } from 'svelte/store';\n\n// Mock page store\nexport const page = writable({\n\turl: new URL('http://localhost:3000'),\n\tparams: {},\n\troute: { id: null },\n\tstatus: 200,\n\terror: null,\n\tdata: {},\n\tform: null\n});\n\n// Mock navigating store\nexport const navigating = writable(null);\n\n// Mock updated store\nexport const updated = writable(false);\n\n// Mock preloadData function\nexport const preloadData = async () => ({});\n","<!--\n  FlowDrop Navbar Component\n  Reusable navigation bar with customizable primary actions\n  - Logo and branding on the left\n  - Primary actions in the center\n  - Status indicator on the right\n-->\n\n<script lang=\"ts\">\n\timport Icon from '@iconify/svelte';\n\timport Logo from './Logo.svelte';\n\n\tinterface NavbarAction {\n\t\tlabel: string;\n\t\thref: string;\n\t\ticon?: string;\n\t\tvariant?: 'primary' | 'secondary' | 'outline';\n\t\tonclick?: (event: Event) => void;\n\t}\n\n\tinterface BreadcrumbItem {\n\t\tlabel: string;\n\t\thref?: string;\n\t\ticon?: string;\n\t}\n\n\tinterface Props {\n\t\tprimaryActions?: NavbarAction[];\n\t\tshowStatus?: boolean;\n\t\ttitle?: string;\n\t\tbreadcrumbs?: BreadcrumbItem[];\n\t}\n\n\tlet { primaryActions = [], showStatus = true, title, breadcrumbs = [] }: Props = $props();\n\n\t// Dropdown state\n\tlet isDropdownOpen = $state(false);\n\n\t// Close dropdown when clicking outside\n\tfunction handleClickOutside(event: MouseEvent) {\n\t\tconst target = event.target as HTMLElement;\n\t\tif (!target.closest('.flowdrop-navbar__dropdown')) {\n\t\t\tisDropdownOpen = false;\n\t\t}\n\t}\n\n\t// Add event listener for click outside\n\tif (typeof window !== 'undefined') {\n\t\tdocument.addEventListener('click', handleClickOutside);\n\t}\n</script>\n\n<div class=\"flowdrop-navbar\">\n\t<div class=\"flowdrop-navbar__start\">\n\t\t<!-- Logo and Title -->\n\t\t<div class=\"flowdrop-logo--container\">\n\t\t\t<div class=\"flowdrop-flex flowdrop-gap--3\">\n\t\t\t\t<div class=\"flowdrop-logo--header\">\n\t\t\t\t\t<Logo />\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h1 class=\"flowdrop-text--logo flowdrop-font--bold\">FlowDrop</h1>\n\t\t\t\t\t<p class=\"flowdrop-text--tagline flowdrop-text--gray\">Visual Workflow Manager</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class=\"flowdrop-navbar__center\">\n\t\t<div class=\"flowdrop-navbar__center-content\">\n\t\t\t<!-- Status Indicator on top -->\n\t\t\t{#if showStatus}\n\t\t\t\t<div class=\"flowdrop-navbar__status-container\">\n\t\t\t\t\t<div class=\"flowdrop-navbar__status\">\n\t\t\t\t\t\t<div class=\"flowdrop-navbar__status-indicator\"></div>\n\t\t\t\t\t\t<span class=\"flowdrop-navbar__status-text\">Connected</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<!-- Title or Breadcrumbs on bottom -->\n\t\t\t{#if breadcrumbs.length > 0}\n\t\t\t\t<div class=\"flowdrop-navbar__breadcrumb-container\">\n\t\t\t\t\t<nav class=\"flowdrop-navbar__breadcrumb\" aria-label=\"Breadcrumb\">\n\t\t\t\t\t\t<ol class=\"flowdrop-navbar__breadcrumb-list\">\n\t\t\t\t\t\t\t{#each breadcrumbs as breadcrumb, index (index)}\n\t\t\t\t\t\t\t\t<li class=\"flowdrop-navbar__breadcrumb-item\">\n\t\t\t\t\t\t\t\t\t{#if breadcrumb.href && index < breadcrumbs.length - 1}\n\t\t\t\t\t\t\t\t\t\t<a href={breadcrumb.href} class=\"flowdrop-navbar__breadcrumb-link\">\n\t\t\t\t\t\t\t\t\t\t\t{#if breadcrumb.icon}\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon icon={breadcrumb.icon} class=\"flowdrop-navbar__breadcrumb-icon\" />\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-navbar__breadcrumb-text\">{breadcrumb.label}</span>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-navbar__breadcrumb-current\">\n\t\t\t\t\t\t\t\t\t\t\t{#if breadcrumb.icon}\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon icon={breadcrumb.icon} class=\"flowdrop-navbar__breadcrumb-icon\" />\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-navbar__breadcrumb-text\">{breadcrumb.label}</span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t{#if index < breadcrumbs.length - 1}\n\t\t\t\t\t\t\t\t\t<li class=\"flowdrop-navbar__breadcrumb-separator\">\n\t\t\t\t\t\t\t\t\t\t<Icon icon=\"mdi:chevron-right\" class=\"flowdrop-navbar__breadcrumb-chevron\" />\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</ol>\n\t\t\t\t\t</nav>\n\t\t\t\t</div>\n\t\t\t{:else if title}\n\t\t\t\t<div class=\"flowdrop-navbar__title-container\">\n\t\t\t\t\t<div class=\"flowdrop-navbar__title\">\n\t\t\t\t\t\t<h2 class=\"flowdrop-navbar__title-text\">{title}</h2>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n\n\t<div class=\"flowdrop-navbar__actions\">\n\t\t{#if primaryActions.length > 0}\n\t\t\t<!-- Primary Action Button -->\n\t\t\t{#if primaryActions[0]}\n\t\t\t\t{@const primaryAction = primaryActions[0]}\n\t\t\t\t<a\n\t\t\t\t\thref={primaryAction.href}\n\t\t\t\t\tclass=\"flowdrop-navbar__primary-action flowdrop-navbar__action--{primaryAction.variant ||\n\t\t\t\t\t\t'primary'}\"\n\t\t\t\t\tonclick={primaryAction.onclick}\n\t\t\t\t>\n\t\t\t\t\t{#if primaryAction.icon}\n\t\t\t\t\t\t<span class=\"flowdrop-navbar__action-icon\">\n\t\t\t\t\t\t\t<Icon icon={primaryAction.icon} class=\"w-4 h-4\" />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t{/if}\n\t\t\t\t\t<span class=\"flowdrop-navbar__action-label\">{primaryAction.label}</span>\n\t\t\t\t</a>\n\t\t\t{/if}\n\n\t\t\t<!-- Dropdown for Additional Actions -->\n\t\t\t{#if primaryActions.length > 1}\n\t\t\t\t<div class=\"flowdrop-navbar__dropdown\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"flowdrop-navbar__dropdown-trigger\"\n\t\t\t\t\t\tonclick={() => (isDropdownOpen = !isDropdownOpen)}\n\t\t\t\t\t\taria-expanded={isDropdownOpen}\n\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon icon=\"heroicons:chevron-down\" class=\"w-4 h-4\" />\n\t\t\t\t\t</button>\n\n\t\t\t\t\t{#if isDropdownOpen}\n\t\t\t\t\t\t<div class=\"flowdrop-navbar__dropdown-menu\">\n\t\t\t\t\t\t\t{#each primaryActions.slice(1) as action (action.label)}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={action.href}\n\t\t\t\t\t\t\t\t\tclass=\"flowdrop-navbar__dropdown-item\"\n\t\t\t\t\t\t\t\t\tonclick={(e) => {\n\t\t\t\t\t\t\t\t\t\taction.onclick?.(e);\n\t\t\t\t\t\t\t\t\t\tisDropdownOpen = false;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{#if action.icon}\n\t\t\t\t\t\t\t\t\t\t<Icon icon={action.icon} class=\"w-4 h-4\" />\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t<span>{action.label}</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t{/if}\n\t</div>\n\n\t<div class=\"flowdrop-navbar__end\">\n\t\t<!-- Additional actions or content can go here -->\n\t</div>\n</div>\n\n<style>\n\t.flowdrop-navbar {\n\t\theight: var(--flowdrop-navbar-height, 60px);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding: 0 1rem;\n\t\tbackground-color: #ffffff;\n\t\tborder-bottom: 1px solid #e5e7eb;\n\t\tbox-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);\n\t\tz-index: 10;\n\t}\n\n\t.flowdrop-navbar__start {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\twidth: 320px;\n\t\tmin-width: 320px;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-logo--container {\n\t\tcolor: #000;\n\t}\n\n\t.flowdrop-logo--header {\n\t\twidth: 40px;\n\t\theight: 40px;\n\t\tfont-size: 1.25rem;\n\t\tpadding: 2px;\n\t}\n\n\t.flowdrop-navbar__center {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tjustify-content: flex-start;\n\t\talign-items: center;\n\t\tpadding-left: 1rem;\n\t}\n\n\t.flowdrop-navbar__center-content {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: flex-start;\n\t\tjustify-content: center;\n\t\tgap: 0.25rem;\n\t}\n\n\t.flowdrop-navbar__title-container {\n\t\tdisplay: flex;\n\t\tjustify-content: flex-start;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-navbar__title {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: flex-start;\n\t\tjustify-content: center;\n\t}\n\n\t.flowdrop-navbar__title-text {\n\t\tmargin: 0;\n\t\tfont-size: 1rem;\n\t\tfont-weight: 600;\n\t\tcolor: #111827;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tmax-width: 500px;\n\t\ttext-align: left;\n\t\tline-height: 1.2;\n\t}\n\n\t/* Breadcrumb Styles */\n\t.flowdrop-navbar__breadcrumb-container {\n\t\tdisplay: flex;\n\t\tjustify-content: flex-start;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-navbar__breadcrumb {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-navbar__breadcrumb-list {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tlist-style: none;\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t\tgap: 0.25rem;\n\t}\n\n\t.flowdrop-navbar__breadcrumb-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-navbar__breadcrumb-link {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.25rem;\n\t\tpadding: 0.25rem 0.5rem;\n\t\tborder-radius: 0.375rem;\n\t\ttext-decoration: none;\n\t\tcolor: #6b7280;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\ttransition: all 0.2s ease;\n\t}\n\n\t.flowdrop-navbar__breadcrumb-link:hover {\n\t\tcolor: #111827;\n\t\tbackground-color: #f3f4f6;\n\t}\n\n\t.flowdrop-navbar__breadcrumb-current {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.25rem;\n\t\tpadding: 0.25rem 0.5rem;\n\t\tcolor: #111827;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 600;\n\t}\n\n\t.flowdrop-navbar__breadcrumb-icon {\n\t\twidth: 1rem;\n\t\theight: 1rem;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-navbar__breadcrumb-text {\n\t\twhite-space: nowrap;\n\t}\n\n\t.flowdrop-navbar__breadcrumb-separator {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tcolor: #9ca3af;\n\t}\n\n\t.flowdrop-navbar__breadcrumb-chevron {\n\t\twidth: 0.875rem;\n\t\theight: 0.875rem;\n\t}\n\n\t.flowdrop-navbar__status-container {\n\t\tdisplay: flex;\n\t\tjustify-content: flex-start;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-navbar__status {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.375rem;\n\t\tpadding: 0.125rem 0.5rem;\n\t\tbackground-color: #f0fdf4;\n\t\tborder: 1px solid #bbf7d0;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 500;\n\t}\n\n\t.flowdrop-navbar__status-indicator {\n\t\twidth: 0.375rem;\n\t\theight: 0.375rem;\n\t\tbackground-color: #22c55e;\n\t\tborder-radius: 50%;\n\t\tanimation: pulse 2s infinite;\n\t}\n\n\t.flowdrop-navbar__status-text {\n\t\tcolor: #166534;\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 500;\n\t}\n\n\t@keyframes pulse {\n\t\t0%,\n\t\t100% {\n\t\t\topacity: 1;\n\t\t}\n\t\t50% {\n\t\t\topacity: 0.5;\n\t\t}\n\t}\n\n\t.flowdrop-navbar__actions {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0;\n\t\tmargin-left: auto;\n\t\tposition: relative;\n\t}\n\n\t.flowdrop-navbar__primary-action {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 0.5rem 1rem;\n\t\ttext-decoration: none;\n\t\tborder: 1px solid #d1d5db;\n\t\tborder-radius: 0.375rem 0 0 0.375rem;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tfont-weight: 500;\n\t\tfont-size: 0.875rem;\n\t\theight: 2.5rem;\n\t\tbox-sizing: border-box;\n\t\tbackground-color: #ffffff;\n\t\tcolor: #374151;\n\t\tborder-right: none;\n\t}\n\n\t.flowdrop-navbar__primary-action:hover {\n\t\tbackground-color: #f9fafb;\n\t\tcolor: #111827;\n\t}\n\n\t.flowdrop-navbar__dropdown {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\theight: 2.5rem;\n\t}\n\n\t.flowdrop-navbar__dropdown-trigger {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 2rem;\n\t\theight: 2.5rem;\n\t\tborder: 1px solid #d1d5db;\n\t\tborder-left: none;\n\t\tborder-radius: 0 0.375rem 0.375rem 0;\n\t\tbackground-color: #ffffff;\n\t\tcolor: #374151;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tbox-sizing: border-box;\n\t}\n\n\t.flowdrop-navbar__dropdown-trigger:hover {\n\t\tbackground-color: #f9fafb;\n\t\tcolor: #111827;\n\t}\n\n\t.flowdrop-navbar__dropdown-trigger[aria-expanded='true'] {\n\t\tbackground-color: #f3f4f6;\n\t\tcolor: #111827;\n\t}\n\n\t.flowdrop-navbar__dropdown-menu {\n\t\tposition: absolute;\n\t\ttop: 100%;\n\t\tright: 0;\n\t\tz-index: 50;\n\t\tmargin-top: 0.25rem;\n\t\tmin-width: 12rem;\n\t\tbackground-color: #ffffff;\n\t\tborder: 1px solid #e5e7eb;\n\t\tborder-radius: 0.5rem;\n\t\tbox-shadow:\n\t\t\t0 10px 15px -3px rgba(0, 0, 0, 0.1),\n\t\t\t0 4px 6px -2px rgba(0, 0, 0, 0.05);\n\t\toverflow: hidden;\n\t}\n\n\t.flowdrop-navbar__dropdown-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.75rem;\n\t\tpadding: 0.75rem 1rem;\n\t\ttext-decoration: none;\n\t\tcolor: #374151;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\ttransition: background-color 0.2s ease-in-out;\n\t\tborder: none;\n\t\twidth: 100%;\n\t\ttext-align: left;\n\t}\n\n\t.flowdrop-navbar__dropdown-item:hover {\n\t\tbackground-color: #f9fafb;\n\t\tcolor: #111827;\n\t}\n\n\t.flowdrop-navbar__dropdown-item:first-child {\n\t\tborder-top: none;\n\t}\n\n\t.flowdrop-navbar__dropdown-item:last-child {\n\t\tborder-bottom: none;\n\t}\n\n\t.flowdrop-navbar__action {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 0.5rem 1rem;\n\t\ttext-decoration: none;\n\t\tborder-radius: 0.375rem;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tfont-weight: 500;\n\t\tfont-size: 0.875rem;\n\t\tborder: 1px solid transparent;\n\t}\n\n\t.flowdrop-navbar__action--primary {\n\t\tbackground-color: #3b82f6;\n\t\tcolor: #ffffff;\n\t\tborder-color: #3b82f6;\n\t}\n\n\t.flowdrop-navbar__action--primary:hover {\n\t\tbackground-color: #2563eb;\n\t\tborder-color: #2563eb;\n\t\tcolor: #ffffff;\n\t}\n\n\t.flowdrop-navbar__action--secondary {\n\t\tbackground-color: #f3f4f6;\n\t\tcolor: #374151;\n\t\tborder-color: #d1d5db;\n\t}\n\n\t.flowdrop-navbar__action--secondary:hover {\n\t\tbackground-color: #e5e7eb;\n\t\tcolor: #111827;\n\t}\n\n\t.flowdrop-navbar__action--outline {\n\t\tbackground-color: transparent;\n\t\tcolor: #374151;\n\t\tborder-color: #d1d5db;\n\t}\n\n\t.flowdrop-navbar__action--outline:hover {\n\t\tbackground-color: #f9fafb;\n\t\tcolor: #111827;\n\t\tborder-color: #9ca3af;\n\t}\n\n\t.flowdrop-navbar__action--active {\n\t\tbackground-color: #eff6ff;\n\t\tcolor: #1d4ed8;\n\t\tborder-color: #93c5fd;\n\t}\n\n\t.flowdrop-navbar__action-icon {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-navbar__action-icon :global(svg) {\n\t\twidth: 1rem;\n\t\theight: 1rem;\n\t}\n\n\t.flowdrop-navbar__action-label {\n\t\tfont-weight: 500;\n\t}\n\n\t.flowdrop-navbar__end {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-api-status {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 0.25rem 0.5rem;\n\t\tborder-radius: 0.375rem;\n\t\tbackground-color: #f3f4f6;\n\t}\n\n\t.flowdrop-api-status__indicator {\n\t\twidth: 0.5rem;\n\t\theight: 0.5rem;\n\t\tborder-radius: 50%;\n\t\ttransition: background-color 0.2s ease-in-out;\n\t}\n\n\t.flowdrop-api-status__indicator--connected {\n\t\tbackground-color: #10b981;\n\t}\n\n\t/* Utility classes */\n\t.flowdrop-flex {\n\t\tdisplay: flex;\n\t}\n\n\t.flowdrop-gap--3 {\n\t\tgap: 0.75rem;\n\t}\n\n\t.flowdrop-text--logo {\n\t\tfont-size: 1.125rem;\n\t\tline-height: 0;\n\t}\n\n\t.flowdrop-text--tagline {\n\t\tfont-size: 0.75rem;\n\t\tline-height: 0.5rem;\n\t}\n\n\t.flowdrop-text--xs {\n\t\tfont-size: 0.75rem;\n\t\tline-height: 1rem;\n\t}\n\n\t.flowdrop-text--gray {\n\t\tcolor: #6b7280;\n\t}\n\n\t.flowdrop-font--bold {\n\t\tfont-weight: 700;\n\t}\n\n\t/* Responsive design */\n\t@media (max-width: 768px) {\n\t\t.flowdrop-navbar {\n\t\t\tpadding: 0 0.5rem;\n\t\t}\n\n\t\t.flowdrop-navbar__start {\n\t\t\twidth: 280px;\n\t\t\tmin-width: 280px;\n\t\t}\n\n\t\t.flowdrop-navbar__actions {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t.flowdrop-text--logo {\n\t\t\tfont-size: 1rem;\n\t\t}\n\n\t\t.flowdrop-text--tagline {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t.flowdrop-navbar__title-text {\n\t\t\tfont-size: 0.875rem;\n\t\t\tmax-width: 300px;\n\t\t}\n\n\t\t.flowdrop-navbar__status {\n\t\t\tfont-size: 0.625rem;\n\t\t\tpadding: 0.125rem 0.375rem;\n\t\t}\n\t}\n\n\t@media (max-width: 480px) {\n\t\t.flowdrop-navbar__start {\n\t\t\twidth: 240px;\n\t\t\tmin-width: 240px;\n\t\t}\n\n\t\t.flowdrop-navbar__title-text {\n\t\t\tfont-size: 0.75rem;\n\t\t\tmax-width: 200px;\n\t\t}\n\t}\n</style>\n","/**\n * Sample data for FlowDrop development and testing\n * Includes sample nodes and workflows for demonstration and testing purposes\n */\nimport { CATEGORY_ICONS } from '../utils/icons.js';\n/**\n * Sample node data for development and testing\n * These represent the available node types in the workflow editor\n */\nexport const sampleNodes = [\n    // ===== INPUTS CATEGORY =====\n    {\n        id: 'sample-text-input',\n        name: 'Text Input',\n        type: 'simple',\n        supportedTypes: ['simple', 'square', 'default'],\n        version: '1.0.0',\n        description: 'User text input field',\n        category: 'inputs',\n        icon: 'mdi:text-box',\n        color: '#10b981',\n        inputs: [],\n        outputs: [\n            {\n                id: 'text',\n                name: 'Text',\n                type: 'output',\n                dataType: 'string',\n                description: 'User entered text'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'simple',\n                    enum: ['simple', 'square', 'default'],\n                    enumNames: [\n                        'Simple (compact layout)',\n                        'Square (square layout)',\n                        'Default (standard workflow node)'\n                    ]\n                },\n                placeholder: {\n                    type: 'string',\n                    title: 'Placeholder',\n                    description: 'Placeholder text for the input field',\n                    default: 'Enter text...'\n                },\n                defaultValue: {\n                    type: 'string',\n                    title: 'Default Value',\n                    description: 'Default text value',\n                    default: ''\n                }\n            }\n        },\n        tags: ['input', 'text', 'user']\n    },\n    {\n        id: 'sample-file-upload',\n        name: 'File Upload',\n        type: 'simple',\n        supportedTypes: ['simple', 'default'],\n        version: '1.0.0',\n        description: 'File upload input with drag and drop support',\n        category: 'inputs',\n        icon: 'mdi:file-upload',\n        color: '#f59e0b',\n        inputs: [],\n        outputs: [\n            {\n                id: 'file',\n                name: 'File',\n                type: 'output',\n                dataType: 'file',\n                description: 'Uploaded file data'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'simple',\n                    enum: ['simple', 'square', 'default'],\n                    enumNames: [\n                        'Simple (compact layout)',\n                        'Square (square layout)',\n                        'Default (standard workflow node)'\n                    ]\n                },\n                accept: {\n                    type: 'string',\n                    title: 'Accepted File Types',\n                    description: 'Comma-separated list of accepted file types',\n                    default: '*'\n                },\n                maxSize: {\n                    type: 'number',\n                    title: 'Maximum File Size (MB)',\n                    description: 'Maximum file size in megabytes',\n                    default: 10\n                }\n            }\n        },\n        tags: ['input', 'file', 'upload']\n    },\n    {\n        id: 'sample-webhook',\n        name: 'Webhook',\n        type: 'simple',\n        supportedTypes: ['simple', 'default'],\n        version: '1.0.0',\n        description: 'Receive data from external webhooks',\n        category: 'inputs',\n        icon: 'mdi:webhook',\n        color: '#8b5cf6',\n        inputs: [],\n        outputs: [\n            {\n                id: 'data',\n                name: 'Data',\n                type: 'output',\n                dataType: 'json',\n                description: 'Webhook payload data'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'simple',\n                    enum: ['simple', 'square', 'default'],\n                    enumNames: [\n                        'Simple (compact layout)',\n                        'Square (square layout)',\n                        'Default (standard workflow node)'\n                    ]\n                },\n                endpoint: {\n                    type: 'string',\n                    title: 'Endpoint',\n                    description: 'Webhook endpoint URL',\n                    default: ''\n                },\n                method: {\n                    type: 'string',\n                    title: 'HTTP Method',\n                    description: 'HTTP method for the webhook',\n                    default: 'POST',\n                    enum: ['GET', 'POST', 'PUT', 'DELETE']\n                }\n            }\n        },\n        tags: ['input', 'webhook', 'external']\n    },\n    // ===== OUTPUTS CATEGORY =====\n    {\n        id: 'sample-chat-output',\n        name: 'Chat Output',\n        type: 'simple',\n        supportedTypes: ['simple', 'default'],\n        version: '1.0.0',\n        description: 'Display chat-style output with formatting',\n        category: 'outputs',\n        icon: 'mdi:chat',\n        color: '#8b5cf6',\n        inputs: [\n            {\n                id: 'message',\n                name: 'Message',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Message to display'\n            }\n        ],\n        outputs: [],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'simple',\n                    enum: ['simple', 'square', 'default'],\n                    enumNames: [\n                        'Simple (compact layout)',\n                        'Square (square layout)',\n                        'Default (standard workflow node)'\n                    ]\n                },\n                showTimestamp: {\n                    type: 'boolean',\n                    title: 'Show Timestamp',\n                    description: 'Display timestamp with messages',\n                    default: true\n                },\n                maxLength: {\n                    type: 'number',\n                    title: 'Maximum Length',\n                    description: 'Maximum message length',\n                    default: 2000\n                },\n                markdown: {\n                    type: 'boolean',\n                    title: 'Markdown Support',\n                    description: 'Enable markdown formatting',\n                    default: true\n                }\n            }\n        },\n        tags: ['output', 'chat', 'display']\n    },\n    {\n        id: 'sample-text-output',\n        name: 'Text Output',\n        type: 'simple',\n        supportedTypes: ['simple', 'default'],\n        version: '1.0.0',\n        description: 'Display plain text output',\n        category: 'outputs',\n        icon: 'mdi:text-box',\n        color: '#10b981',\n        inputs: [\n            {\n                id: 'text',\n                name: 'Text',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Text to display'\n            }\n        ],\n        outputs: [],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'simple',\n                    enum: ['simple', 'square', 'default'],\n                    enumNames: [\n                        'Simple (compact layout)',\n                        'Square (square layout)',\n                        'Default (standard workflow node)'\n                    ]\n                },\n                showTimestamp: {\n                    type: 'boolean',\n                    title: 'Show Timestamp',\n                    description: 'Display timestamp with output',\n                    default: false\n                },\n                maxLength: {\n                    type: 'number',\n                    title: 'Maximum Length',\n                    description: 'Maximum text length',\n                    default: 1000\n                }\n            }\n        },\n        tags: ['output', 'text', 'display']\n    },\n    // ===== PROMPTS CATEGORY =====\n    {\n        id: 'sample-prompt',\n        name: 'Prompt',\n        type: 'simple',\n        supportedTypes: ['simple', 'default'],\n        version: '1.0.0',\n        description: 'Template-based prompt with variables',\n        category: 'prompts',\n        icon: 'mdi:message-text',\n        color: '#f59e0b',\n        inputs: [\n            {\n                id: 'variables',\n                name: 'Variables',\n                type: 'input',\n                dataType: 'json',\n                required: false,\n                description: 'Variables to inject into template'\n            }\n        ],\n        outputs: [\n            {\n                id: 'prompt',\n                name: 'Prompt',\n                type: 'output',\n                dataType: 'string',\n                description: 'Formatted prompt text'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'simple',\n                    enum: ['simple', 'square', 'default'],\n                    enumNames: [\n                        'Simple (compact layout)',\n                        'Square (square layout)',\n                        'Default (standard workflow node)'\n                    ]\n                },\n                template: {\n                    type: 'string',\n                    title: 'Template',\n                    description: 'Prompt template with variables',\n                    default: 'You are a helpful assistant. {input}'\n                },\n                variables: {\n                    type: 'array',\n                    title: 'Variables',\n                    description: 'List of available variables',\n                    default: []\n                }\n            }\n        },\n        tags: ['prompt', 'template', 'variables']\n    },\n    {\n        id: 'sample-structured-output',\n        name: 'Structured Output',\n        type: 'default',\n        supportedTypes: ['default'],\n        version: '1.0.0',\n        description: 'Generate structured output from models',\n        category: 'prompts',\n        icon: 'mdi:table',\n        color: '#6366f1',\n        inputs: [\n            {\n                id: 'model',\n                name: 'Model',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Model to use'\n            },\n            {\n                id: 'message',\n                name: 'Message',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Input message'\n            }\n        ],\n        outputs: [\n            {\n                id: 'dataframe',\n                name: 'DataFrame',\n                type: 'output',\n                dataType: 'json',\n                description: 'Structured output as DataFrame'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                schema: {\n                    type: 'object',\n                    title: 'Schema',\n                    description: 'JSON schema for structured output',\n                    default: {}\n                },\n                outputType: {\n                    type: 'string',\n                    title: 'Output Type',\n                    description: 'Type of structured output',\n                    default: 'json',\n                    enum: ['json', 'xml', 'yaml']\n                }\n            }\n        },\n        tags: ['prompt', 'structured', 'output', 'schema']\n    },\n    // ===== MODELS CATEGORY =====\n    {\n        id: 'sample-openai',\n        name: 'OpenAI',\n        type: 'default',\n        supportedTypes: ['default'],\n        version: '1.0.0',\n        description: 'OpenAI GPT models for text generation',\n        category: 'models',\n        icon: 'mdi:robot',\n        color: '#10a37f',\n        inputs: [\n            {\n                id: 'prompt',\n                name: 'Prompt',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Input prompt for the model'\n            },\n            {\n                id: 'system_message',\n                name: 'System Message',\n                type: 'input',\n                dataType: 'string',\n                required: false,\n                description: 'System message to set behavior'\n            }\n        ],\n        outputs: [\n            {\n                id: 'response',\n                name: 'Response',\n                type: 'output',\n                dataType: 'string',\n                description: 'Model response'\n            },\n            {\n                id: 'usage',\n                name: 'Usage',\n                type: 'output',\n                dataType: 'json',\n                description: 'Token usage information'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                model: {\n                    type: 'string',\n                    title: 'Model',\n                    description: 'OpenAI model to use',\n                    default: 'gpt-4o-mini',\n                    enum: ['gpt-4o-mini', 'gpt-5-chat-latest', 'gpt-4.1']\n                },\n                temperature: {\n                    type: 'number',\n                    title: 'Temperature',\n                    description: 'Creativity level (0-2)',\n                    default: 0.7,\n                    minimum: 0,\n                    maximum: 2\n                },\n                maxTokens: {\n                    type: 'number',\n                    title: 'Max Tokens',\n                    description: 'Maximum tokens to generate',\n                    default: 1000,\n                    minimum: 1,\n                    maximum: 4000\n                },\n                apiKey: {\n                    type: 'string',\n                    title: 'API Key',\n                    description: 'OpenAI API key',\n                    default: ''\n                }\n            }\n        },\n        tags: ['model', 'openai', 'gpt', 'chat']\n    },\n    {\n        id: 'sample-anthropic',\n        name: 'Anthropic',\n        type: 'default',\n        supportedTypes: ['default'],\n        version: '1.0.0',\n        description: 'Anthropic Claude models for text generation',\n        category: 'models',\n        icon: 'mdi:brain',\n        color: '#7c3aed',\n        inputs: [\n            {\n                id: 'prompt',\n                name: 'Prompt',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Input prompt for the model'\n            }\n        ],\n        outputs: [\n            {\n                id: 'response',\n                name: 'Response',\n                type: 'output',\n                dataType: 'string',\n                description: 'Model response'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                model: {\n                    type: 'string',\n                    title: 'Model',\n                    description: 'Anthropic model to use',\n                    default: 'claude-3-sonnet-20240229',\n                    enum: ['claude-3-sonnet-20240229', 'claude-3-opus-20240229', 'claude-3-haiku-20240307']\n                },\n                temperature: {\n                    type: 'number',\n                    title: 'Temperature',\n                    description: 'Creativity level (0-1)',\n                    default: 0.7,\n                    minimum: 0,\n                    maximum: 1\n                },\n                maxTokens: {\n                    type: 'number',\n                    title: 'Max Tokens',\n                    description: 'Maximum tokens to generate',\n                    default: 1000,\n                    minimum: 1,\n                    maximum: 4000\n                },\n                apiKey: {\n                    type: 'string',\n                    title: 'API Key',\n                    description: 'Anthropic API key',\n                    default: ''\n                }\n            }\n        },\n        tags: ['model', 'anthropic', 'claude']\n    },\n    {\n        id: 'sample-groq',\n        name: 'Groq',\n        type: 'default',\n        supportedTypes: ['default'],\n        version: '1.0.0',\n        description: 'Groq fast inference models',\n        category: 'models',\n        icon: 'mdi:lightning-bolt',\n        color: '#f97316',\n        inputs: [\n            {\n                id: 'prompt',\n                name: 'Prompt',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Input prompt for the model'\n            }\n        ],\n        outputs: [\n            {\n                id: 'response',\n                name: 'Response',\n                type: 'output',\n                dataType: 'string',\n                description: 'Model response'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                model: {\n                    type: 'string',\n                    title: 'Model',\n                    description: 'Groq model to use',\n                    default: 'llama-3.1-8b-instant',\n                    enum: ['llama-3.1-8b-instant', 'llama-3.1-70b-versatile', 'mixtral-8x7b-32768']\n                },\n                temperature: {\n                    type: 'number',\n                    title: 'Temperature',\n                    description: 'Creativity level (0-1)',\n                    default: 0.7,\n                    minimum: 0,\n                    maximum: 1\n                },\n                maxTokens: {\n                    type: 'number',\n                    title: 'Max Tokens',\n                    description: 'Maximum tokens to generate',\n                    default: 1000,\n                    minimum: 1,\n                    maximum: 4000\n                },\n                apiKey: {\n                    type: 'string',\n                    title: 'API Key',\n                    description: 'Groq API key',\n                    default: ''\n                }\n            }\n        },\n        tags: ['model', 'groq', 'fast', 'inference']\n    },\n    // ===== PROCESSING CATEGORY =====\n    {\n        id: 'sample-split-text',\n        name: 'Split Text',\n        type: 'default',\n        supportedTypes: ['default'],\n        version: '1.0.0',\n        description: 'Split text into chunks for processing',\n        category: 'processing',\n        icon: 'mdi:content-cut',\n        color: '#f59e0b',\n        inputs: [\n            {\n                id: 'text',\n                name: 'Text',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Text to split'\n            }\n        ],\n        outputs: [\n            {\n                id: 'chunks',\n                name: 'Chunks',\n                type: 'output',\n                dataType: 'string[]',\n                description: 'Split text chunks'\n            },\n            {\n                id: 'dataframe',\n                name: 'DataFrame',\n                type: 'output',\n                dataType: 'json',\n                description: 'Chunks as structured data'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                chunkSize: {\n                    type: 'number',\n                    title: 'Chunk Size',\n                    description: 'Size of each text chunk',\n                    default: 1000,\n                    minimum: 1,\n                    maximum: 10000\n                },\n                chunkOverlap: {\n                    type: 'number',\n                    title: 'Chunk Overlap',\n                    description: 'Overlap between chunks',\n                    default: 200,\n                    minimum: 0,\n                    maximum: 1000\n                },\n                separator: {\n                    type: 'string',\n                    title: 'Separator',\n                    description: 'Text separator for splitting',\n                    default: '\\n'\n                }\n            }\n        },\n        tags: ['processing', 'text', 'split', 'chunking']\n    },\n    {\n        id: 'sample-data-operations',\n        name: 'Data Operations',\n        version: '1.0.0',\n        description: 'Perform operations on Data objects',\n        category: 'processing',\n        icon: 'mdi:database-cog',\n        color: '#6366f1',\n        inputs: [\n            {\n                id: 'data',\n                name: 'Data',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Data to operate on'\n            }\n        ],\n        outputs: [\n            {\n                id: 'result',\n                name: 'Result',\n                type: 'output',\n                dataType: 'json',\n                description: 'Processed data result'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                operation: {\n                    type: 'string',\n                    title: 'Operation',\n                    description: 'Data operation to perform',\n                    default: 'select_keys',\n                    enum: ['select_keys', 'filter', 'sort', 'group']\n                },\n                keys: {\n                    type: 'array',\n                    title: 'Keys',\n                    description: 'Keys to select or filter by',\n                    default: []\n                },\n                filterKey: {\n                    type: 'string',\n                    title: 'Filter Key',\n                    description: 'Key to filter by',\n                    default: ''\n                },\n                filterValue: {\n                    type: 'string',\n                    title: 'Filter Value',\n                    description: 'Value to filter by',\n                    default: ''\n                }\n            }\n        },\n        tags: ['processing', 'data', 'operations']\n    },\n    {\n        id: 'sample-dataframe-operations',\n        name: 'DataFrame Operations',\n        version: '1.0.0',\n        description: 'Perform operations on DataFrames',\n        category: 'processing',\n        icon: 'mdi:table-cog',\n        color: '#84cc16',\n        inputs: [\n            {\n                id: 'dataframe',\n                name: 'DataFrame',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'DataFrame to operate on'\n            }\n        ],\n        outputs: [\n            {\n                id: 'result',\n                name: 'Result',\n                type: 'output',\n                dataType: 'json',\n                description: 'Processed DataFrame'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                operation: {\n                    type: 'string',\n                    title: 'Operation',\n                    description: 'DataFrame operation to perform',\n                    default: 'filter',\n                    enum: ['filter', 'sort', 'group', 'aggregate']\n                },\n                columnName: {\n                    type: 'string',\n                    title: 'Column Name',\n                    description: 'Column to operate on',\n                    default: ''\n                },\n                filterValue: {\n                    type: 'string',\n                    title: 'Filter Value',\n                    description: 'Value to filter by',\n                    default: ''\n                },\n                ascending: {\n                    type: 'boolean',\n                    title: 'Ascending',\n                    description: 'Sort in ascending order',\n                    default: true\n                }\n            }\n        },\n        tags: ['processing', 'dataframe', 'table', 'operations']\n    },\n    {\n        id: 'sample-regex-extractor',\n        name: 'Regex Extractor',\n        version: '1.0.0',\n        description: 'Extract patterns using regular expressions',\n        category: 'processing',\n        icon: 'mdi:regex',\n        color: '#ec4899',\n        inputs: [\n            {\n                id: 'text',\n                name: 'Text',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Text to extract from'\n            }\n        ],\n        outputs: [\n            {\n                id: 'matches',\n                name: 'Matches',\n                type: 'output',\n                dataType: 'string[]',\n                description: 'Extracted matches'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                pattern: {\n                    type: 'string',\n                    title: 'Pattern',\n                    description: 'Regular expression pattern',\n                    default: ''\n                },\n                flags: {\n                    type: 'string',\n                    title: 'Flags',\n                    description: 'Regex flags',\n                    default: 'g',\n                    enum: ['g', 'i', 'm', 'gi', 'gm', 'im', 'gim']\n                }\n            }\n        },\n        tags: ['processing', 'regex', 'extract', 'pattern']\n    },\n    {\n        id: 'sample-smart-function',\n        name: 'Smart Function',\n        version: '1.0.0',\n        description: 'Use models to generate data processing functions',\n        category: 'processing',\n        icon: 'mdi:function-variant',\n        color: '#06b6d4',\n        inputs: [\n            {\n                id: 'data',\n                name: 'Data',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Data to process'\n            },\n            {\n                id: 'model',\n                name: 'Model',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Model for function generation'\n            }\n        ],\n        outputs: [\n            {\n                id: 'filtered_data',\n                name: 'Filtered Data',\n                type: 'output',\n                dataType: 'json',\n                description: 'Processed data'\n            },\n            {\n                id: 'dataframe',\n                name: 'DataFrame',\n                type: 'output',\n                dataType: 'json',\n                description: 'Processed data as DataFrame'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                filter_instruction: {\n                    type: 'string',\n                    title: 'Filter Instruction',\n                    description: 'Instruction for filtering data',\n                    default: ''\n                },\n                sample_size: {\n                    type: 'number',\n                    title: 'Sample Size',\n                    description: 'Number of samples to process',\n                    default: 1000,\n                    minimum: 1,\n                    maximum: 10000\n                },\n                max_size: {\n                    type: 'number',\n                    title: 'Max Size',\n                    description: 'Maximum size of filtered data',\n                    default: 10000,\n                    minimum: 1,\n                    maximum: 100000\n                }\n            }\n        },\n        tags: ['processing', 'smart', 'function', 'model']\n    },\n    // ===== LOGIC CATEGORY =====\n    {\n        id: 'sample-if-else',\n        name: 'If-Else',\n        version: '1.0.0',\n        description: 'Conditional routing based on text comparison',\n        category: 'logic',\n        icon: 'mdi:git-branch',\n        color: '#06b6d4',\n        inputs: [\n            {\n                id: 'input_text',\n                name: 'Input Text',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Text to evaluate'\n            },\n            {\n                id: 'match_text',\n                name: 'Match Text',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Text to compare against'\n            }\n        ],\n        outputs: [\n            {\n                id: 'true_result',\n                name: 'True',\n                type: 'output',\n                dataType: 'string',\n                description: 'Output when condition is true'\n            },\n            {\n                id: 'false_result',\n                name: 'False',\n                type: 'output',\n                dataType: 'string',\n                description: 'Output when condition is false'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                operator: {\n                    type: 'string',\n                    title: 'Operator',\n                    description: 'Comparison operator',\n                    default: 'equals',\n                    enum: ['equals', 'not_equals', 'greater_than', 'less_than', 'contains']\n                },\n                caseSensitive: {\n                    type: 'boolean',\n                    title: 'Case Sensitive',\n                    description: 'Whether comparison is case sensitive',\n                    default: false\n                }\n            }\n        },\n        tags: ['conditional', 'logic', 'routing', 'if-else']\n    },\n    {\n        id: 'sample-loop',\n        name: 'Loop',\n        version: '1.0.0',\n        description: 'Iterate over data items',\n        category: 'logic',\n        icon: 'mdi:loop',\n        color: '#8b5cf6',\n        inputs: [\n            {\n                id: 'data',\n                name: 'Data',\n                type: 'input',\n                dataType: 'json[]',\n                required: true,\n                description: 'Data to iterate over'\n            }\n        ],\n        outputs: [\n            {\n                id: 'item',\n                name: 'Item',\n                type: 'output',\n                dataType: 'json',\n                description: 'Current item in iteration'\n            },\n            {\n                id: 'done',\n                name: 'Done',\n                type: 'output',\n                dataType: 'json',\n                description: 'Aggregated results when complete'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                maxIterations: {\n                    type: 'number',\n                    title: 'Max Iterations',\n                    description: 'Maximum number of loop iterations',\n                    default: 100,\n                    minimum: 1,\n                    maximum: 1000\n                }\n            }\n        },\n        tags: ['conditional', 'logic', 'loop', 'iteration']\n    },\n    // ===== DATA CATEGORY =====\n    {\n        id: 'sample-data-to-dataframe',\n        name: 'Data to DataFrame',\n        version: '1.0.0',\n        description: 'Convert Data objects to DataFrame',\n        category: 'data',\n        icon: 'mdi:table-plus',\n        color: '#10b981',\n        inputs: [\n            {\n                id: 'data_list',\n                name: 'Data List',\n                type: 'input',\n                dataType: 'json[]',\n                required: true,\n                description: 'List of Data objects to convert'\n            }\n        ],\n        outputs: [\n            {\n                id: 'dataframe',\n                name: 'DataFrame',\n                type: 'output',\n                dataType: 'json',\n                description: 'Converted DataFrame'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                includeText: {\n                    type: 'boolean',\n                    title: 'Include Text',\n                    description: 'Include text in DataFrame conversion',\n                    default: true\n                }\n            }\n        },\n        tags: ['data', 'dataframe', 'convert', 'table']\n    },\n    {\n        id: 'sample-message-to-data',\n        name: 'Message to Data',\n        version: '1.0.0',\n        description: 'Convert Message objects to Data objects',\n        category: 'data',\n        icon: 'mdi:message-arrow-right',\n        color: '#f59e0b',\n        inputs: [\n            {\n                id: 'message',\n                name: 'Message',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Message to convert'\n            }\n        ],\n        outputs: [\n            {\n                id: 'data',\n                name: 'Data',\n                type: 'output',\n                dataType: 'json',\n                description: 'Converted Data object'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                format: {\n                    type: 'string',\n                    title: 'Format',\n                    description: 'Input data format',\n                    default: 'auto',\n                    enum: ['auto', 'json', 'csv', 'xml']\n                }\n            }\n        },\n        tags: ['data', 'message', 'convert']\n    },\n    {\n        id: 'sample-save-to-file',\n        name: 'Save to File',\n        version: '1.0.0',\n        description: 'Save data to various file formats',\n        category: 'data',\n        icon: 'mdi:content-save',\n        color: '#ef4444',\n        inputs: [\n            {\n                id: 'data',\n                name: 'Data',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Data to save'\n            }\n        ],\n        outputs: [\n            {\n                id: 'confirmation',\n                name: 'Confirmation',\n                type: 'output',\n                dataType: 'string',\n                description: 'Save confirmation message'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                fileFormat: {\n                    type: 'string',\n                    title: 'File Format',\n                    description: 'Output file format',\n                    default: 'json',\n                    enum: ['json', 'csv', 'txt', 'xml']\n                },\n                filePath: {\n                    type: 'string',\n                    title: 'File Path',\n                    description: 'Output file path',\n                    default: './output/data.json'\n                }\n            }\n        },\n        tags: ['data', 'save', 'file', 'export']\n    },\n    // ===== TOOLS CATEGORY =====\n    {\n        id: 'sample-http-request',\n        name: 'HTTP Request',\n        type: 'tool',\n        supportedTypes: ['tool', 'default'],\n        version: '1.0.0',\n        description: 'Advanced HTTP client with full request/response handling, similar to n8n',\n        category: 'tools',\n        icon: 'mdi:web',\n        color: '#3b82f6',\n        inputs: [\n            {\n                id: 'url',\n                name: 'URL',\n                type: 'input',\n                dataType: 'string',\n                required: false,\n                description: 'Request URL (can be set in config or via input)'\n            },\n            {\n                id: 'headers',\n                name: 'Headers',\n                type: 'input',\n                dataType: 'json',\n                required: false,\n                description: 'Additional HTTP headers as JSON object'\n            },\n            {\n                id: 'body',\n                name: 'Body',\n                type: 'input',\n                dataType: 'mixed',\n                required: false,\n                description: 'Request body (JSON, string, or form data)'\n            },\n            {\n                id: 'query_params',\n                name: 'Query Parameters',\n                type: 'input',\n                dataType: 'json',\n                required: false,\n                description: 'URL query parameters as JSON object'\n            }\n        ],\n        outputs: [\n            {\n                id: 'response',\n                name: 'Response',\n                type: 'output',\n                dataType: 'json',\n                description: 'Complete HTTP response object'\n            },\n            {\n                id: 'body',\n                name: 'Body',\n                type: 'output',\n                dataType: 'mixed',\n                description: 'Response body (parsed JSON or raw text)'\n            },\n            {\n                id: 'headers',\n                name: 'Headers',\n                type: 'output',\n                dataType: 'json',\n                description: 'Response headers as JSON object'\n            },\n            {\n                id: 'status_code',\n                name: 'Status Code',\n                type: 'output',\n                dataType: 'number',\n                description: 'HTTP status code'\n            },\n            {\n                id: 'status_text',\n                name: 'Status Text',\n                type: 'output',\n                dataType: 'string',\n                description: 'HTTP status text'\n            },\n            {\n                id: 'tool',\n                name: 'Tool Interface',\n                type: 'output',\n                dataType: 'tool',\n                description: 'Tool interface for agent connections - provides tool metadata and callable interface'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'tool',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                method: {\n                    type: 'string',\n                    title: 'HTTP Method',\n                    description: 'HTTP request method',\n                    default: 'GET',\n                    enum: ['GET', 'POST', 'PUT', 'PATCH', 'DELETE', 'HEAD', 'OPTIONS']\n                },\n                url: {\n                    type: 'string',\n                    title: 'URL',\n                    description: 'Request URL (overridden by input if provided)',\n                    default: 'https://api.example.com/endpoint'\n                },\n                authentication: {\n                    type: 'string',\n                    title: 'Authentication',\n                    description: 'Authentication method',\n                    default: 'none',\n                    enum: ['none', 'basic', 'bearer', 'api_key', 'oauth2']\n                },\n                auth_username: {\n                    type: 'string',\n                    title: 'Username',\n                    description: 'Username for basic authentication',\n                    default: ''\n                },\n                auth_password: {\n                    type: 'string',\n                    title: 'Password',\n                    description: 'Password for basic authentication',\n                    default: '',\n                    format: 'password'\n                },\n                auth_token: {\n                    type: 'string',\n                    title: 'Bearer Token',\n                    description: 'Bearer token for authentication',\n                    default: '',\n                    format: 'password'\n                },\n                api_key_header: {\n                    type: 'string',\n                    title: 'API Key Header',\n                    description: 'Header name for API key authentication',\n                    default: 'X-API-Key'\n                },\n                api_key_value: {\n                    type: 'string',\n                    title: 'API Key Value',\n                    description: 'API key value',\n                    default: '',\n                    format: 'password'\n                },\n                content_type: {\n                    type: 'string',\n                    title: 'Content Type',\n                    description: 'Request content type',\n                    default: 'application/json',\n                    enum: [\n                        'application/json',\n                        'application/x-www-form-urlencoded',\n                        'multipart/form-data',\n                        'text/plain',\n                        'text/xml',\n                        'application/xml'\n                    ]\n                },\n                timeout: {\n                    type: 'integer',\n                    title: 'Timeout (seconds)',\n                    description: 'Request timeout in seconds',\n                    default: 30,\n                    minimum: 1,\n                    maximum: 300\n                },\n                follow_redirects: {\n                    type: 'boolean',\n                    title: 'Follow Redirects',\n                    description: 'Automatically follow HTTP redirects',\n                    default: true\n                },\n                ssl_verify: {\n                    type: 'boolean',\n                    title: 'Verify SSL',\n                    description: 'Verify SSL certificates',\n                    default: true\n                },\n                retry_attempts: {\n                    type: 'integer',\n                    title: 'Retry Attempts',\n                    description: 'Number of retry attempts on failure',\n                    default: 0,\n                    minimum: 0,\n                    maximum: 5\n                },\n                retry_delay: {\n                    type: 'integer',\n                    title: 'Retry Delay (ms)',\n                    description: 'Delay between retry attempts in milliseconds',\n                    default: 1000,\n                    minimum: 100,\n                    maximum: 10000\n                },\n                response_format: {\n                    type: 'string',\n                    title: 'Response Format',\n                    description: 'How to parse the response body',\n                    default: 'auto',\n                    enum: ['auto', 'json', 'text', 'binary', 'xml']\n                },\n                include_response_headers: {\n                    type: 'boolean',\n                    title: 'Include Response Headers',\n                    description: 'Include response headers in output',\n                    default: true\n                },\n                custom_headers: {\n                    type: 'string',\n                    title: 'Custom Headers (JSON)',\n                    description: 'Custom headers as JSON string',\n                    default: '{}',\n                    format: 'multiline'\n                },\n                user_agent: {\n                    type: 'string',\n                    title: 'User Agent',\n                    description: 'Custom User-Agent header',\n                    default: 'FlowDrop-HTTP-Client/1.0'\n                },\n                proxy_url: {\n                    type: 'string',\n                    title: 'Proxy URL',\n                    description: 'HTTP proxy URL (optional)',\n                    default: ''\n                },\n                ignore_ssl_issues: {\n                    type: 'boolean',\n                    title: 'Ignore SSL Issues',\n                    description: 'Ignore SSL certificate errors (not recommended for production)',\n                    default: false\n                }\n            }\n        },\n        tags: ['tools', 'http', 'api', 'request', 'n8n', 'automation', 'integration']\n    },\n    {\n        id: 'sample-json',\n        name: 'JSON',\n        type: 'tool',\n        supportedTypes: ['tool', 'default'],\n        version: '1.0.0',\n        description: \"Parse, manipulate, and transform JSON data like n8n's JSON node\",\n        category: 'tools',\n        icon: 'mdi:code-json',\n        color: '#f59e0b',\n        inputs: [\n            {\n                id: 'json_input',\n                name: 'JSON Input',\n                type: 'input',\n                dataType: 'mixed',\n                required: false,\n                description: 'JSON data to process'\n            }\n        ],\n        outputs: [\n            {\n                id: 'json_output',\n                name: 'JSON Output',\n                type: 'output',\n                dataType: 'json',\n                description: 'Processed JSON data'\n            },\n            {\n                id: 'tool',\n                name: 'Tool Interface',\n                type: 'output',\n                dataType: 'tool',\n                description: 'Tool interface for agent connections - provides tool metadata and callable interface'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'tool',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                operation: {\n                    type: 'string',\n                    title: 'Operation',\n                    description: 'JSON operation to perform',\n                    default: 'parse',\n                    enum: ['parse', 'stringify', 'extract', 'merge', 'filter', 'transform', 'validate']\n                },\n                json_path: {\n                    type: 'string',\n                    title: 'JSON Path',\n                    description: 'JSONPath expression for extraction (e.g., $.data.items[*].name)',\n                    default: '$'\n                },\n                merge_strategy: {\n                    type: 'string',\n                    title: 'Merge Strategy',\n                    description: 'How to merge JSON objects',\n                    default: 'deep',\n                    enum: ['shallow', 'deep', 'overwrite']\n                },\n                filter_expression: {\n                    type: 'string',\n                    title: 'Filter Expression',\n                    description: 'JavaScript expression for filtering (e.g., item.price > 100)',\n                    default: ''\n                },\n                transform_expression: {\n                    type: 'string',\n                    title: 'Transform Expression',\n                    description: 'JavaScript expression for transformation',\n                    default: '',\n                    format: 'multiline'\n                },\n                pretty_print: {\n                    type: 'boolean',\n                    title: 'Pretty Print',\n                    description: 'Format JSON output with indentation',\n                    default: true\n                },\n                validate_schema: {\n                    type: 'string',\n                    title: 'JSON Schema',\n                    description: 'JSON Schema for validation (optional)',\n                    default: '',\n                    format: 'multiline'\n                }\n            }\n        },\n        tags: ['tools', 'json', 'data', 'transform', 'n8n', 'parse']\n    },\n    {\n        id: 'sample-set',\n        name: 'Set',\n        type: 'tool',\n        supportedTypes: ['tool', 'default'],\n        version: '1.0.0',\n        description: \"Set and manipulate data values like n8n's Set node\",\n        category: 'tools',\n        icon: 'mdi:variable',\n        color: '#10b981',\n        inputs: [\n            {\n                id: 'input_data',\n                name: 'Input Data',\n                type: 'input',\n                dataType: 'mixed',\n                required: false,\n                description: 'Input data to process'\n            }\n        ],\n        outputs: [\n            {\n                id: 'output_data',\n                name: 'Output Data',\n                type: 'output',\n                dataType: 'json',\n                description: 'Processed output data'\n            },\n            {\n                id: 'tool',\n                name: 'Tool Interface',\n                type: 'output',\n                dataType: 'tool',\n                description: 'Tool interface for agent connections - provides tool metadata and callable interface'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'tool',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                operation: {\n                    type: 'string',\n                    title: 'Operation',\n                    description: 'Set operation to perform',\n                    default: 'set',\n                    enum: ['set', 'append', 'prepend', 'remove', 'rename', 'copy', 'move']\n                },\n                keep_only_set: {\n                    type: 'boolean',\n                    title: 'Keep Only Set Fields',\n                    description: 'Only keep the fields that are being set',\n                    default: false\n                },\n                values: {\n                    type: 'string',\n                    title: 'Values (JSON)',\n                    description: 'Values to set as JSON object',\n                    default: '{\\n  \"key1\": \"value1\",\\n  \"key2\": \"{{ $json.input_field }}\",\\n  \"timestamp\": \"{{ new Date().toISOString() }}\"\\n}',\n                    format: 'multiline'\n                },\n                include_binary_data: {\n                    type: 'boolean',\n                    title: 'Include Binary Data',\n                    description: 'Include binary data in output',\n                    default: false\n                },\n                dot_notation: {\n                    type: 'boolean',\n                    title: 'Use Dot Notation',\n                    description: 'Support dot notation for nested properties (e.g., user.name)',\n                    default: true\n                }\n            }\n        },\n        tags: ['tools', 'set', 'data', 'transform', 'n8n', 'variables']\n    },\n    {\n        id: 'sample-calculator',\n        name: 'Calculator',\n        type: 'tool',\n        supportedTypes: ['tool', 'default'],\n        version: '1.0.0',\n        description: 'Perform mathematical calculations',\n        category: 'tools',\n        icon: 'mdi:calculator',\n        color: '#6366f1',\n        inputs: [\n            {\n                id: 'expression',\n                name: 'Expression',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Mathematical expression to evaluate'\n            }\n        ],\n        outputs: [\n            {\n                id: 'result',\n                name: 'Result',\n                type: 'output',\n                dataType: 'number',\n                description: 'Calculation result'\n            },\n            {\n                id: 'tool',\n                name: 'Tool Interface',\n                type: 'output',\n                dataType: 'tool',\n                description: 'Tool interface for agent connections - provides tool metadata and callable interface'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'tool',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                operation: {\n                    type: 'string',\n                    title: 'Operation',\n                    description: 'Mathematical operation to perform',\n                    default: 'add',\n                    enum: [\n                        'add',\n                        'subtract',\n                        'multiply',\n                        'divide',\n                        'power',\n                        'sqrt',\n                        'average',\n                        'min',\n                        'max',\n                        'median',\n                        'mode'\n                    ]\n                },\n                precision: {\n                    type: 'integer',\n                    title: 'Precision',\n                    description: 'Number of decimal places',\n                    default: 2,\n                    minimum: 0,\n                    maximum: 10\n                }\n            }\n        },\n        tags: ['tools', 'calculator', 'math', 'compute']\n    },\n    {\n        id: 'sample-date-time',\n        name: 'Date & Time',\n        type: 'tool',\n        supportedTypes: ['tool', 'default'],\n        version: '1.0.0',\n        description: 'Handle date and time operations',\n        category: 'tools',\n        icon: 'mdi:calendar-clock',\n        color: '#84cc16',\n        inputs: [\n            {\n                id: 'date',\n                name: 'Date',\n                type: 'input',\n                dataType: 'string',\n                required: false,\n                description: 'Input date string'\n            }\n        ],\n        outputs: [\n            {\n                id: 'formatted_date',\n                name: 'Formatted Date',\n                type: 'output',\n                dataType: 'string',\n                description: 'Formatted date string'\n            },\n            {\n                id: 'timestamp',\n                name: 'Timestamp',\n                type: 'output',\n                dataType: 'number',\n                description: 'Unix timestamp'\n            },\n            {\n                id: 'tool',\n                name: 'Tool Interface',\n                type: 'output',\n                dataType: 'tool',\n                description: 'Tool interface for agent connections - provides tool metadata and callable interface'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'tool',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                format: {\n                    type: 'string',\n                    title: 'Format',\n                    description: 'Date/time format',\n                    default: 'YYYY-MM-DD'\n                },\n                timezone: {\n                    type: 'string',\n                    title: 'Timezone',\n                    description: 'Timezone for date operations',\n                    default: 'UTC'\n                }\n            }\n        },\n        tags: ['tools', 'date', 'time', 'format']\n    },\n    {\n        id: 'sample-notes',\n        name: 'Notes',\n        type: 'note',\n        supportedTypes: ['note'],\n        version: '1.0.0',\n        description: 'Add documentation and comments to your workflow with Markdown support',\n        category: 'tools',\n        icon: 'mdi:note-text',\n        color: '#fbbf24',\n        inputs: [],\n        outputs: [],\n        configSchema: {\n            type: 'object',\n            properties: {\n                content: {\n                    type: 'string',\n                    title: 'Note Content',\n                    description: 'Documentation or comment text (supports Markdown)',\n                    default: '# Workflow Notes\\n\\nAdd your documentation here using **Markdown** formatting.\\n\\n## Features\\n- Supports **bold** and *italic* text\\n- Create lists and code blocks\\n- Add links and more!'\n                },\n                noteType: {\n                    type: 'string',\n                    title: 'Note Type',\n                    description: 'Visual style and color of the note',\n                    default: 'info',\n                    enum: ['info', 'warning', 'success', 'error', 'note']\n                }\n            }\n        },\n        tags: ['tools', 'notes', 'documentation', 'comments', 'markdown']\n    },\n    {\n        id: 'sample-simple-node',\n        name: 'Simple Node',\n        type: 'tool',\n        supportedTypes: ['tool', 'default'],\n        version: '1.0.0',\n        description: 'A simple node with optional input and output ports',\n        category: 'tools',\n        icon: 'mdi:square',\n        color: '#6366f1',\n        inputs: [\n            {\n                id: 'input',\n                name: 'Input',\n                type: 'input',\n                dataType: 'mixed',\n                required: false,\n                description: 'Optional input data'\n            }\n        ],\n        outputs: [\n            {\n                id: 'output',\n                name: 'Output',\n                type: 'output',\n                dataType: 'mixed',\n                description: 'Optional output data'\n            },\n            {\n                id: 'tool',\n                name: 'Tool Interface',\n                type: 'output',\n                dataType: 'tool',\n                description: 'Tool interface for agent connections - provides tool metadata and callable interface'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'tool',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool (specialized for agent tools)', 'Default (standard workflow node)']\n                },\n                icon: {\n                    type: 'string',\n                    title: 'Icon',\n                    description: 'Icon to display in the node (Iconify icon name)',\n                    default: 'mdi:square'\n                },\n                color: {\n                    type: 'string',\n                    title: 'Color',\n                    description: 'Background color of the node',\n                    default: '#6366f1'\n                },\n                layout: {\n                    type: 'string',\n                    title: 'Layout',\n                    description: 'Layout style of the simple node',\n                    default: 'normal',\n                    enum: ['compact', 'normal']\n                },\n                label: {\n                    type: 'string',\n                    title: 'Label',\n                    description: 'Custom label for the node',\n                    default: 'Simple Node'\n                },\n                description: {\n                    type: 'string',\n                    title: 'Description',\n                    description: 'Description of what this simple node does',\n                    default: '',\n                    format: 'multiline'\n                }\n            }\n        },\n        tags: ['tools', 'simple', 'custom', 'visual', 'node']\n    },\n    {\n        id: 'sample-trigger-action',\n        name: 'Trigger Action',\n        type: 'simple',\n        supportedTypes: ['simple', 'square', 'default'],\n        version: '1.0.0',\n        description: 'An action that can be triggered and also processes data',\n        category: 'tools',\n        icon: 'mdi:lightning-bolt',\n        color: '#f59e0b',\n        inputs: [\n            {\n                id: 'trigger',\n                name: 'Trigger',\n                type: 'input',\n                dataType: 'trigger',\n                required: false,\n                description: 'Control flow trigger to execute this action'\n            },\n            {\n                id: 'data',\n                name: 'Data',\n                type: 'input',\n                dataType: 'string',\n                required: false,\n                description: 'Optional data input to process'\n            }\n        ],\n        outputs: [\n            {\n                id: 'trigger',\n                name: 'Trigger',\n                type: 'output',\n                dataType: 'trigger',\n                description: 'Control flow trigger after execution'\n            },\n            {\n                id: 'result',\n                name: 'Result',\n                type: 'output',\n                dataType: 'string',\n                description: 'Processed data output'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'simple',\n                    enum: ['simple', 'square', 'default'],\n                    enumNames: [\n                        'Simple (compact layout)',\n                        'Square (square layout)',\n                        'Default (standard workflow node)'\n                    ]\n                },\n                action: {\n                    type: 'string',\n                    title: 'Action',\n                    description: 'The action to perform when triggered',\n                    default: 'Process data'\n                }\n            }\n        },\n        tags: ['trigger', 'action', 'control-flow']\n    },\n    // ===== EMBEDDINGS CATEGORY =====\n    {\n        id: 'sample-openai-embeddings',\n        name: 'OpenAI Embeddings',\n        version: '1.0.0',\n        description: 'Generate embeddings using OpenAI models',\n        category: 'embeddings',\n        icon: 'mdi:vector-point',\n        color: '#10a37f',\n        inputs: [\n            {\n                id: 'text',\n                name: 'Text',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Text to embed'\n            }\n        ],\n        outputs: [\n            {\n                id: 'embeddings',\n                name: 'Embeddings',\n                type: 'output',\n                dataType: 'number[]',\n                description: 'Generated embeddings'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                model: {\n                    type: 'string',\n                    title: 'Model',\n                    description: 'OpenAI embedding model',\n                    default: 'text-embedding-3-small',\n                    enum: ['text-embedding-3-small', 'text-embedding-3-large']\n                },\n                apiKey: {\n                    type: 'string',\n                    title: 'API Key',\n                    description: 'OpenAI API key',\n                    default: ''\n                }\n            }\n        },\n        tags: ['embeddings', 'openai', 'vector']\n    },\n    {\n        id: 'sample-huggingface-embeddings',\n        name: 'HuggingFace Embeddings',\n        version: '1.0.0',\n        description: 'Generate embeddings using HuggingFace models',\n        category: 'embeddings',\n        icon: 'mdi:vector-square',\n        color: '#f59e0b',\n        inputs: [\n            {\n                id: 'text',\n                name: 'Text',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Text to embed'\n            }\n        ],\n        outputs: [\n            {\n                id: 'embeddings',\n                name: 'Embeddings',\n                type: 'output',\n                dataType: 'number[]',\n                description: 'Generated embeddings'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                model: {\n                    type: 'string',\n                    title: 'Model',\n                    description: 'HuggingFace model name',\n                    default: 'sentence-transformers/all-MiniLM-L6-v2'\n                },\n                apiToken: {\n                    type: 'string',\n                    title: 'API Token',\n                    description: 'HuggingFace API token',\n                    default: ''\n                }\n            }\n        },\n        tags: ['embeddings', 'huggingface', 'vector']\n    },\n    // ===== MEMORIES CATEGORY =====\n    {\n        id: 'sample-conversation-buffer',\n        name: 'Conversation Buffer',\n        version: '1.0.0',\n        description: 'Store conversation history',\n        category: 'memories',\n        icon: 'mdi:chat-history',\n        color: '#8b5cf6',\n        inputs: [\n            {\n                id: 'message',\n                name: 'Message',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Message to add to buffer'\n            }\n        ],\n        outputs: [\n            {\n                id: 'history',\n                name: 'History',\n                type: 'output',\n                dataType: 'string[]',\n                description: 'Conversation history'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                maxTokens: {\n                    type: 'number',\n                    title: 'Max Tokens',\n                    description: 'Maximum tokens in buffer',\n                    default: 2000,\n                    minimum: 100,\n                    maximum: 10000\n                },\n                returnMessages: {\n                    type: 'boolean',\n                    title: 'Return Messages',\n                    description: 'Return messages in response',\n                    default: true\n                }\n            }\n        },\n        tags: ['memory', 'conversation', 'history', 'buffer']\n    },\n    // ===== AGENTS CATEGORY =====\n    {\n        id: 'sample-simple-agent',\n        name: 'Simple Agent',\n        version: '1.0.0',\n        description: 'Agent for tool orchestration',\n        category: 'agents',\n        icon: 'mdi:account-cog',\n        color: '#06b6d4',\n        type: 'default',\n        supportedTypes: ['default', 'tool'],\n        inputs: [\n            {\n                id: 'message',\n                name: 'Message',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'User message for agent'\n            },\n            {\n                id: 'tools',\n                name: 'Tools',\n                type: 'input',\n                dataType: 'tool',\n                required: false,\n                description: 'Tool interfaces available to agent - connect to tool output ports'\n            }\n        ],\n        outputs: [\n            {\n                id: 'response',\n                name: 'Response',\n                type: 'output',\n                dataType: 'string',\n                description: 'Agent response'\n            },\n            {\n                id: 'tools',\n                name: 'Tools',\n                type: 'input',\n                dataType: 'tool',\n                required: false,\n                description: 'Tool interfaces available to agent - connect to tool output ports'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'default',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                model: {\n                    type: 'string',\n                    title: 'Model',\n                    description: 'Chat model to use',\n                    default: 'gpt-4o-mini',\n                    enum: ['gpt-4o-mini', 'gpt-5-chat-latest', 'claude-3-sonnet']\n                },\n                temperature: {\n                    type: 'number',\n                    title: 'Temperature',\n                    description: 'Creativity level (0-1)',\n                    default: 0.7,\n                    minimum: 0,\n                    maximum: 1\n                },\n                maxIterations: {\n                    type: 'number',\n                    title: 'Max Iterations',\n                    description: 'Maximum agent iterations',\n                    default: 5,\n                    minimum: 1,\n                    maximum: 20\n                }\n            }\n        },\n        tags: ['agent', 'orchestration', 'tools']\n    },\n    // ===== VECTOR STORES CATEGORY =====\n    {\n        id: 'sample-chroma-vector-store',\n        name: 'Chroma Vector Store',\n        version: '1.0.0',\n        description: 'Store and retrieve vectors using Chroma',\n        category: 'vector stores',\n        icon: 'mdi:database',\n        color: '#84cc16',\n        inputs: [\n            {\n                id: 'embeddings',\n                name: 'Embeddings',\n                type: 'input',\n                dataType: 'number[]',\n                required: true,\n                description: 'Embeddings to store'\n            },\n            {\n                id: 'query',\n                name: 'Query',\n                type: 'input',\n                dataType: 'string',\n                required: false,\n                description: 'Query for similarity search'\n            }\n        ],\n        outputs: [\n            {\n                id: 'results',\n                name: 'Results',\n                type: 'output',\n                dataType: 'json[]',\n                description: 'Search results'\n            },\n            {\n                id: 'metadata',\n                name: 'Metadata',\n                type: 'output',\n                dataType: 'json',\n                description: 'Vector store metadata'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                collectionName: {\n                    type: 'string',\n                    title: 'Collection Name',\n                    description: 'Chroma collection name',\n                    default: 'default'\n                },\n                persistDirectory: {\n                    type: 'string',\n                    title: 'Persist Directory',\n                    description: 'Directory to persist data',\n                    default: './chroma_db'\n                },\n                distanceFunction: {\n                    type: 'string',\n                    title: 'Distance Function',\n                    description: 'Distance function for similarity',\n                    default: 'cosine',\n                    enum: ['cosine', 'euclidean', 'manhattan']\n                }\n            }\n        },\n        tags: ['integration', 'vector-store', 'chroma', 'embeddings']\n    },\n    {\n        id: 'sample-pinecone-vector-store',\n        name: 'Pinecone Vector Store',\n        version: '1.0.0',\n        description: 'Store and retrieve vectors using Pinecone',\n        category: 'vector stores',\n        icon: 'mdi:database-search',\n        color: '#f59e0b',\n        inputs: [\n            {\n                id: 'embeddings',\n                name: 'Embeddings',\n                type: 'input',\n                dataType: 'number[]',\n                required: true,\n                description: 'Embeddings to store'\n            },\n            {\n                id: 'query',\n                name: 'Query',\n                type: 'input',\n                dataType: 'string',\n                required: false,\n                description: 'Query for similarity search'\n            }\n        ],\n        outputs: [\n            {\n                id: 'results',\n                name: 'Results',\n                type: 'output',\n                dataType: 'json[]',\n                description: 'Search results'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                indexName: {\n                    type: 'string',\n                    title: 'Index Name',\n                    description: 'Pinecone index name',\n                    default: 'default'\n                },\n                apiKey: {\n                    type: 'string',\n                    title: 'API Key',\n                    description: 'Pinecone API key',\n                    default: ''\n                },\n                environment: {\n                    type: 'string',\n                    title: 'Environment',\n                    description: 'Pinecone environment',\n                    default: 'us-west1-gcp'\n                }\n            }\n        },\n        tags: ['integration', 'vector-store', 'pinecone', 'embeddings']\n    },\n    // ===== DEMO: AI-POWERED CONTENT MANAGEMENT NODES =====\n    {\n        id: 'demo-chat-input',\n        name: 'Chat Input',\n        type: 'simple',\n        supportedTypes: ['simple', 'default'],\n        version: '1.0.0',\n        description: 'Accept chat instructions from content managers about what content changes to make',\n        category: 'inputs',\n        icon: 'mdi:message-text-outline',\n        color: '#10b981',\n        inputs: [],\n        outputs: [\n            {\n                id: 'user_message',\n                name: 'User Message',\n                type: 'output',\n                dataType: 'string',\n                description: \"Content manager's instructions for content review\"\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'simple',\n                    enum: ['simple', 'default'],\n                    enumNames: ['Simple (compact layout)', 'Default (standard workflow node)']\n                },\n                placeholder: {\n                    type: 'string',\n                    title: 'Placeholder Text',\n                    description: 'Placeholder text shown in the chat input',\n                    default: 'Enter your content management instructions...'\n                },\n                welcomeMessage: {\n                    type: 'string',\n                    title: 'Welcome Message',\n                    description: 'Initial message shown to content managers',\n                    default: 'Hi! I can help you review and update your Drupal content. What would you like me to do?'\n                },\n                maxLength: {\n                    type: 'number',\n                    title: 'Maximum Message Length',\n                    description: 'Maximum characters allowed in a single message',\n                    default: 1000,\n                    minimum: 100,\n                    maximum: 5000\n                }\n            }\n        },\n        tags: ['demo', 'content-management', 'input', 'chat', 'drupal']\n    },\n    {\n        id: 'demo-drupal-search-rag',\n        name: 'Drupal Search API RAG',\n        type: 'tool',\n        supportedTypes: ['tool', 'default'],\n        version: '1.0.0',\n        description: 'Search and retrieve content from Drupal using Search API with AI-powered relevance',\n        category: 'tools',\n        icon: 'mdi:database-search-outline',\n        color: '#0678be',\n        inputs: [\n            {\n                id: 'search_query',\n                name: 'Search Query',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Search terms to find relevant content'\n            },\n            {\n                id: 'content_types',\n                name: 'Content Types',\n                type: 'input',\n                dataType: 'json',\n                required: false,\n                description: \"Array of content types to search (e.g., ['article', 'page', 'blog'])\"\n            }\n        ],\n        outputs: [\n            {\n                id: 'content_results',\n                name: 'Content Results',\n                type: 'output',\n                dataType: 'json',\n                description: 'Array of matching content items with metadata'\n            },\n            {\n                id: 'search_metadata',\n                name: 'Search Metadata',\n                type: 'output',\n                dataType: 'json',\n                description: 'Search statistics and relevance information'\n            },\n            {\n                id: 'tool',\n                name: 'Tool Interface',\n                type: 'output',\n                dataType: 'tool',\n                description: 'Tool interface for agent connections - provides tool metadata and callable interface'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'tool',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                searchIndex: {\n                    type: 'string',\n                    title: 'Search API Index',\n                    description: 'Name of the Drupal Search API index to query',\n                    default: 'content_index'\n                },\n                maxResults: {\n                    type: 'number',\n                    title: 'Maximum Results',\n                    description: 'Maximum number of content items to return',\n                    default: 10,\n                    minimum: 1,\n                    maximum: 100\n                },\n                includeFields: {\n                    type: 'array',\n                    title: 'Include Fields',\n                    description: 'Content fields to include in results',\n                    default: ['title', 'body', 'field_tags', 'created', 'changed']\n                },\n                useAiRanking: {\n                    type: 'boolean',\n                    title: 'Use AI-Powered Ranking',\n                    description: 'Use AI to improve search result relevance',\n                    default: true\n                },\n                contentStatus: {\n                    type: 'string',\n                    title: 'Content Status',\n                    description: 'Filter by publication status',\n                    default: 'published',\n                    enum: ['published', 'unpublished', 'all']\n                }\n            }\n        },\n        tags: ['demo', 'content-management', 'drupal', 'search', 'rag', 'ai']\n    },\n    {\n        id: 'ai_content_analyzer',\n        name: 'AI Content Analyzer',\n        type: 'default',\n        supportedTypes: ['default', 'tool'],\n        version: '1.0.0',\n        description: 'AI-powered content analysis for smart text processing and context understanding',\n        category: 'ai',\n        icon: 'mdi:text-search',\n        color: '#7c3aed',\n        inputs: [\n            {\n                id: 'content_to_analyze',\n                name: 'Content to Analyze',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Text content or array of content items for AI analysis'\n            }\n        ],\n        outputs: [\n            {\n                id: 'analyzed_content',\n                name: 'Analyzed Content',\n                type: 'output',\n                dataType: 'array',\n                description: 'Content items with AI analysis results'\n            },\n            {\n                id: 'total_analyzed',\n                name: 'Total Analyzed',\n                type: 'output',\n                dataType: 'number',\n                description: 'Total number of items analyzed'\n            },\n            {\n                id: 'total_replacements',\n                name: 'Total Replacements',\n                type: 'output',\n                dataType: 'number',\n                description: 'Total number of replacements made'\n            },\n            {\n                id: 'analysis_mode',\n                name: 'Analysis Mode',\n                type: 'output',\n                dataType: 'string',\n                description: 'The analysis mode used'\n            },\n            {\n                id: 'confidence_threshold',\n                name: 'Confidence Threshold',\n                type: 'output',\n                dataType: 'number',\n                description: 'Confidence threshold used for replacements'\n            },\n            {\n                id: 'analyzed_at',\n                name: 'Analyzed At',\n                type: 'output',\n                dataType: 'string',\n                description: 'Timestamp when analysis was completed'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'default',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                targetText: {\n                    type: 'string',\n                    title: 'Target Text',\n                    description: 'Text to analyze and potentially replace',\n                    default: 'XB'\n                },\n                replacementText: {\n                    type: 'string',\n                    title: 'Replacement Text',\n                    description: 'Text to replace with when appropriate',\n                    default: 'Canvas'\n                },\n                analysisMode: {\n                    type: 'string',\n                    title: 'Analysis Mode',\n                    description: 'Type of AI analysis to perform',\n                    default: 'context_aware'\n                },\n                confidenceThreshold: {\n                    type: 'number',\n                    title: 'Confidence Threshold',\n                    description: 'Minimum confidence level for making replacements (0-1)',\n                    default: 0.8,\n                    minimum: 0,\n                    maximum: 1\n                }\n            }\n        },\n        tags: ['ai', 'analysis', 'content', 'context', 'smart-processing']\n    },\n    {\n        id: 'demo-ai-content-analyzer',\n        name: 'AI Content Analyzer',\n        type: 'default',\n        supportedTypes: ['default', 'tool'],\n        version: '1.0.0',\n        description: 'Analyze content for issues like acronym misuse, formatting problems, or content quality',\n        category: 'agents',\n        icon: 'mdi:text-search',\n        color: '#7c3aed',\n        inputs: [\n            {\n                id: 'content',\n                name: 'Content',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Content to analyze'\n            },\n            {\n                id: 'analysis_prompt',\n                name: 'Analysis Instructions',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Instructions for what to analyze in the content'\n            },\n            {\n                id: 'tools',\n                name: 'Tools',\n                type: 'input',\n                dataType: 'tool',\n                required: false,\n                description: 'Tools available to agent'\n            }\n        ],\n        outputs: [\n            {\n                id: 'analysis_results',\n                name: 'Analysis Results',\n                type: 'output',\n                dataType: 'json',\n                description: 'Detailed analysis findings with recommendations'\n            },\n            {\n                id: 'issues_found',\n                name: 'Issues Found',\n                type: 'output',\n                dataType: 'json',\n                description: 'Array of specific issues identified'\n            },\n            {\n                id: 'confidence_score',\n                name: 'Confidence Score',\n                type: 'output',\n                dataType: 'number',\n                description: 'AI confidence in the analysis (0-1)'\n            },\n            {\n                id: 'tools',\n                name: 'Tools',\n                type: 'input',\n                dataType: 'tool',\n                required: false,\n                description: 'Tools available to agent'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'default',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                model: {\n                    type: 'string',\n                    title: 'AI Model',\n                    description: 'AI model to use for content analysis',\n                    default: 'gpt-5-chat-latest',\n                    enum: ['gpt-4o-mini', 'gpt-5-chat-latest', 'claude-3-sonnet', 'claude-3-haiku']\n                },\n                analysisType: {\n                    type: 'string',\n                    title: 'Analysis Type',\n                    description: 'Type of content analysis to perform',\n                    default: 'comprehensive',\n                    enum: ['acronym_detection', 'grammar_check', 'style_review', 'comprehensive']\n                },\n                strictness: {\n                    type: 'string',\n                    title: 'Analysis Strictness',\n                    description: 'How strict should the analysis be',\n                    default: 'balanced',\n                    enum: ['lenient', 'balanced', 'strict']\n                },\n                includeExamples: {\n                    type: 'boolean',\n                    title: 'Include Examples',\n                    description: 'Include specific examples in analysis results',\n                    default: true\n                },\n                customRules: {\n                    type: 'string',\n                    title: 'Custom Analysis Rules',\n                    description: 'Custom rules or guidelines for content analysis',\n                    default: '',\n                    format: 'multiline'\n                }\n            }\n        },\n        tags: ['demo', 'content-management', 'ai', 'analysis', 'quality-control']\n    },\n    {\n        id: 'demo-ai-content-editor',\n        name: 'AI Content Editor',\n        type: 'default',\n        supportedTypes: ['default', 'tool'],\n        version: '1.0.0',\n        description: 'Make AI-powered edits to content based on analysis results and user instructions',\n        category: 'agents',\n        icon: 'mdi:file-edit-outline',\n        color: '#f59e0b',\n        inputs: [\n            {\n                id: 'original_content',\n                name: 'Original Content',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Original content to be edited'\n            },\n            {\n                id: 'analysis_results',\n                name: 'Analysis Results',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Issues and recommendations from content analysis'\n            },\n            {\n                id: 'edit_instructions',\n                name: 'Edit Instructions',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Specific instructions for how to edit the content'\n            },\n            {\n                id: 'tools',\n                name: 'Tools',\n                type: 'input',\n                dataType: 'tool',\n                required: false,\n                description: 'Tools available to agent'\n            }\n        ],\n        outputs: [\n            {\n                id: 'edited_content',\n                name: 'Edited Content',\n                type: 'output',\n                dataType: 'json',\n                description: 'Content with AI-suggested edits applied'\n            },\n            {\n                id: 'edit_summary',\n                name: 'Edit Summary',\n                type: 'output',\n                dataType: 'json',\n                description: 'Summary of changes made with explanations'\n            },\n            {\n                id: 'change_log',\n                name: 'Change Log',\n                type: 'output',\n                dataType: 'json',\n                description: 'Detailed log of all changes made'\n            },\n            {\n                id: 'tools',\n                name: 'Tools',\n                type: 'input',\n                dataType: 'tool',\n                required: false,\n                description: 'Tools available to agent'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'default',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                model: {\n                    type: 'string',\n                    title: 'AI Model',\n                    description: 'AI model to use for content editing',\n                    default: 'gpt-5-chat-latest',\n                    enum: ['gpt-4o-mini', 'gpt-5-chat-latest', 'claude-3-sonnet', 'claude-3-haiku']\n                },\n                editingStyle: {\n                    type: 'string',\n                    title: 'Editing Style',\n                    description: 'Style of editing to apply',\n                    default: 'conservative',\n                    enum: ['minimal', 'conservative', 'moderate', 'comprehensive']\n                },\n                preserveFormatting: {\n                    type: 'boolean',\n                    title: 'Preserve HTML Formatting',\n                    description: 'Maintain existing HTML tags and formatting',\n                    default: true\n                },\n                requireApproval: {\n                    type: 'boolean',\n                    title: 'Require Human Approval',\n                    description: 'Flag all changes for human review before applying',\n                    default: true\n                },\n                trackChanges: {\n                    type: 'boolean',\n                    title: 'Track Changes',\n                    description: 'Create detailed tracking of all modifications',\n                    default: true\n                }\n            }\n        },\n        tags: ['demo', 'content-management', 'ai', 'editing', 'automation']\n    },\n    {\n        id: 'demo-draft-creator',\n        name: 'Draft Creator',\n        type: 'tool',\n        supportedTypes: ['tool', 'default'],\n        version: '1.0.0',\n        description: 'Create draft versions of edited content in Drupal for human review and approval',\n        category: 'tools',\n        icon: 'mdi:file-document-edit-outline',\n        color: '#10b981',\n        inputs: [\n            {\n                id: 'edited_content',\n                name: 'Edited Content',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Content with AI edits to save as draft'\n            },\n            {\n                id: 'edit_summary',\n                name: 'Edit Summary',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Summary of changes made'\n            },\n            {\n                id: 'original_node_id',\n                name: 'Original Node ID',\n                type: 'input',\n                dataType: 'number',\n                required: true,\n                description: 'Drupal node ID of the original content'\n            }\n        ],\n        outputs: [\n            {\n                id: 'draft_node_id',\n                name: 'Draft Node ID',\n                type: 'output',\n                dataType: 'number',\n                description: 'Node ID of the created draft'\n            },\n            {\n                id: 'draft_url',\n                name: 'Draft URL',\n                type: 'output',\n                dataType: 'string',\n                description: 'URL to view the draft content'\n            },\n            {\n                id: 'review_url',\n                name: 'Review URL',\n                type: 'output',\n                dataType: 'string',\n                description: 'URL for content reviewers to approve/reject changes'\n            },\n            {\n                id: 'tool',\n                name: 'Tool Interface',\n                type: 'output',\n                dataType: 'tool',\n                description: 'Tool interface for agent connections - provides tool metadata and callable interface'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'tool',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                draftWorkflow: {\n                    type: 'string',\n                    title: 'Draft Workflow',\n                    description: 'Drupal workflow to use for draft content',\n                    default: 'editorial',\n                    enum: ['editorial', 'simple', 'custom']\n                },\n                assignReviewer: {\n                    type: 'boolean',\n                    title: 'Auto-assign Reviewer',\n                    description: 'Automatically assign a content reviewer',\n                    default: true\n                },\n                reviewerRole: {\n                    type: 'string',\n                    title: 'Reviewer Role',\n                    description: 'User role to assign for content review',\n                    default: 'editor',\n                    enum: ['editor', 'content_manager', 'administrator']\n                },\n                notifyReviewer: {\n                    type: 'boolean',\n                    title: 'Notify Reviewer',\n                    description: 'Send email notification to assigned reviewer',\n                    default: true\n                },\n                retainOriginal: {\n                    type: 'boolean',\n                    title: 'Retain Original',\n                    description: 'Keep original content unchanged until draft is approved',\n                    default: true\n                },\n                addRevisionLog: {\n                    type: 'boolean',\n                    title: 'Add Revision Log',\n                    description: 'Add detailed revision log entry',\n                    default: true\n                }\n            }\n        },\n        tags: ['demo', 'content-management', 'drupal', 'draft', 'workflow', 'review']\n    },\n    {\n        id: 'demo-date-format-converter',\n        name: 'Date Format Converter',\n        type: 'tool',\n        supportedTypes: ['tool', 'default'],\n        version: '1.0.0',\n        description: 'Extract and convert dates in content to new formats (demo review step)',\n        category: 'tools',\n        icon: 'mdi:calendar-edit',\n        color: '#84cc16',\n        inputs: [\n            {\n                id: 'content',\n                name: 'Content',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Content containing dates to convert'\n            }\n        ],\n        outputs: [\n            {\n                id: 'converted_content',\n                name: 'Converted Content',\n                type: 'output',\n                dataType: 'json',\n                description: 'Content with dates converted to new format'\n            },\n            {\n                id: 'dates_found',\n                name: 'Dates Found',\n                type: 'output',\n                dataType: 'json',\n                description: 'Array of dates found and their conversions'\n            },\n            {\n                id: 'conversion_log',\n                name: 'Conversion Log',\n                type: 'output',\n                dataType: 'json',\n                description: 'Log of all date conversions performed'\n            },\n            {\n                id: 'tool',\n                name: 'Tool Interface',\n                type: 'output',\n                dataType: 'tool',\n                description: 'Tool interface for agent connections - provides tool metadata and callable interface'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'tool',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                inputFormat: {\n                    type: 'string',\n                    title: 'Input Date Format',\n                    description: 'Expected format of dates in content',\n                    default: 'MM/dd/yyyy',\n                    enum: ['MM/dd/yyyy', 'dd/MM/yyyy', 'yyyy-MM-dd', 'auto-detect']\n                },\n                outputFormat: {\n                    type: 'string',\n                    title: 'Output Date Format',\n                    description: 'Desired format for converted dates',\n                    default: 'MMMM d, yyyy',\n                    enum: ['MMMM d, yyyy', 'dd/MM/yyyy', 'yyyy-MM-dd', 'MMM d, yyyy', 'd MMMM yyyy']\n                },\n                includeTime: {\n                    type: 'boolean',\n                    title: 'Include Time',\n                    description: 'Include time information in conversions',\n                    default: false\n                },\n                timezone: {\n                    type: 'string',\n                    title: 'Timezone',\n                    description: 'Timezone for date conversions',\n                    default: 'UTC',\n                    enum: [\n                        'UTC',\n                        'America/New_York',\n                        'America/Chicago',\n                        'America/Denver',\n                        'America/Los_Angeles',\n                        'Europe/London'\n                    ]\n                },\n                onlyFutureDates: {\n                    type: 'boolean',\n                    title: 'Only Future Dates',\n                    description: 'Only convert dates that are in the future',\n                    default: false\n                }\n            }\n        },\n        tags: ['demo', 'content-management', 'dates', 'formatting', 'conversion', 'review-tool']\n    },\n    {\n        id: 'demo-chat-response',\n        name: 'Chat Response',\n        type: 'simple',\n        supportedTypes: ['simple', 'default'],\n        version: '1.0.0',\n        description: 'Display chat-style responses with workflow results and next steps for content managers',\n        category: 'outputs',\n        icon: 'mdi:message-reply-text',\n        color: '#8b5cf6',\n        inputs: [\n            {\n                id: 'workflow_results',\n                name: 'Workflow Results',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Results from the content management workflow'\n            },\n            {\n                id: 'summary_message',\n                name: 'Summary Message',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Human-readable summary of what was accomplished'\n            }\n        ],\n        outputs: [],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'simple',\n                    enum: ['simple', 'default'],\n                    enumNames: ['Simple (compact layout)', 'Default (standard workflow node)']\n                },\n                showTimestamp: {\n                    type: 'boolean',\n                    title: 'Show Timestamp',\n                    description: 'Display timestamp with responses',\n                    default: true\n                },\n                includeActionButtons: {\n                    type: 'boolean',\n                    title: 'Include Action Buttons',\n                    description: 'Show action buttons for next steps',\n                    default: true\n                },\n                responseStyle: {\n                    type: 'string',\n                    title: 'Response Style',\n                    description: 'Style of the chat response',\n                    default: 'professional',\n                    enum: ['casual', 'professional', 'technical', 'friendly']\n                },\n                showWorkflowSummary: {\n                    type: 'boolean',\n                    title: 'Show Workflow Summary',\n                    description: 'Include a summary of workflow steps completed',\n                    default: true\n                },\n                enableMarkdown: {\n                    type: 'boolean',\n                    title: 'Enable Markdown',\n                    description: 'Allow markdown formatting in responses',\n                    default: true\n                }\n            }\n        },\n        tags: ['demo', 'content-management', 'output', 'chat', 'response', 'summary']\n    }\n];\n// Export category icons for use in other components\nexport { CATEGORY_ICONS as categoryIcons };\n/**\n * Demo node whitelist - Multi-agent content management scenario\n * Main Agent + Specialized Sub-Agents + Tools\n */\nconst DEMO_ALLOWED_NODE_IDS = [\n    // === MAIN CONVERSATIONAL AGENT ===\n    'demo-chat-input', // User input interface\n    'sample-simple-agent', // Main conversational agent (orchestrator)\n    'demo-chat-response', // Response back to user\n    // === SPECIALIZED SUB-AGENTS ===\n    'demo-ai-content-analyzer', // Content analysis agent\n    'demo-ai-content-editor', // Content editing agent\n    // === TOOLS (for sub-agents to use) ===\n    'demo-drupal-search-rag', // RAG tool for content search\n    'demo-draft-creator', // Draft creation tool\n    'demo-date-format-converter', // Date formatting tool\n    // === SUPPORTING NODES ===\n    'sample-openai', // AI model for agents\n    'sample-anthropic', // Alternative AI model\n    'sample-notes', // Documentation\n    'sample-prompt', // Prompt templates\n    'sample-text-input', // Alternative input method\n    'sample-chat-output', // Alternative output method\n    // === TOOL INTERFACE NODES ===\n    'sample-http-request', // For external API calls\n    'sample-json', // JSON processing tool\n    'sample-set' // Data manipulation tool\n];\n/**\n * Filter nodes based on demo configuration\n * @param nodes - All available nodes\n * @param config - Demo configuration\n * @returns Filtered array of nodes\n */\nexport function filterNodesForDemo(nodes, config) {\n    if (!config.enabled) {\n        return nodes;\n    }\n    switch (config.mode) {\n        case 'content-management':\n            // Show only specifically whitelisted nodes for the demo\n            return nodes.filter((node) => DEMO_ALLOWED_NODE_IDS.includes(node.id));\n        case 'all':\n        default:\n            return nodes;\n    }\n}\n/**\n * Get the list of allowed demo node IDs\n */\nexport function getDemoAllowedNodeIds() {\n    return [...DEMO_ALLOWED_NODE_IDS];\n}\n/**\n * Check if a node is allowed in demo mode\n */\nexport function isNodeAllowedInDemo(nodeId) {\n    return DEMO_ALLOWED_NODE_IDS.includes(nodeId);\n}\n/**\n * Get demo-specific nodes only\n */\nexport function getDemoNodes() {\n    return sampleNodes.filter((node) => node.tags?.includes('demo'));\n}\n/**\n * Get nodes by category with demo filtering\n */\nexport function getNodesByCategory(category, demoConfig) {\n    const nodes = demoConfig ? filterNodesForDemo(sampleNodes, demoConfig) : sampleNodes;\n    return nodes.filter((node) => node.category === category);\n}\n/**\n * Search nodes with demo filtering\n */\nexport function searchNodes(query, demoConfig) {\n    const nodes = demoConfig ? filterNodesForDemo(sampleNodes, demoConfig) : sampleNodes;\n    const searchTerm = query.toLowerCase();\n    return nodes.filter((node) => node.name.toLowerCase().includes(searchTerm) ||\n        node.description.toLowerCase().includes(searchTerm) ||\n        node.tags?.some((tag) => tag.toLowerCase().includes(searchTerm)));\n}\n/**\n * Sample workflow for development\n * Updated to use the new node types\n */\nexport const sampleWorkflow = {\n    id: 'sample-simple-chat-workflow',\n    name: 'Simple Chat Workflow',\n    description: 'A basic workflow demonstrating direct text input to AI model response',\n    nodes: [\n        {\n            id: 'sample-workflow-text-input',\n            type: 'text-input',\n            position: { x: 100, y: 100 },\n            data: {\n                label: 'Text Input',\n                config: {\n                    placeholder: 'Enter your question...',\n                    defaultValue: 'Hello, how are you?'\n                },\n                metadata: sampleNodes.find((n) => n.name === 'Text Input')\n            }\n        },\n        {\n            id: 'sample-workflow-split-text',\n            type: 'split-text',\n            position: { x: 300, y: 100 },\n            data: {\n                label: 'Split Text',\n                config: {\n                    chunkSize: 500,\n                    chunkOverlap: 100,\n                    separator: '\\n'\n                },\n                metadata: sampleNodes.find((n) => n.name === 'Split Text')\n            }\n        },\n        {\n            id: 'sample-workflow-openai',\n            type: 'openai',\n            position: { x: 500, y: 100 },\n            data: {\n                label: 'OpenAI',\n                config: {\n                    model: 'gpt-4o-mini',\n                    temperature: 0.7,\n                    maxTokens: 1000\n                },\n                metadata: sampleNodes.find((n) => n.name === 'OpenAI')\n            }\n        },\n        {\n            id: 'sample-workflow-note',\n            type: 'note',\n            position: { x: 500, y: 300 },\n            data: {\n                label: 'Workflow Notes',\n                config: {\n                    content: '# Simple Chat Workflow\\n\\nThis workflow demonstrates a basic chat interaction:\\n\\n1. **Text Input** - User enters a question\\n2. **OpenAI** - Processes the input and generates a response\\n3. **Chat Output** - Displays the final response\\n\\n## Port Types Used\\n- **string** - Text data flows between all nodes\\n- Only compatible types can connect (string  string)\\n\\n## Usage\\n- Drag a Notes node to add documentation\\n- Double-click to edit in Markdown\\n- Choose from 5 different note types',\n                    noteType: 'info'\n                },\n                metadata: sampleNodes.find((n) => n.name === 'Notes')\n            }\n        },\n        {\n            id: 'sample-workflow-chat-output',\n            type: 'chat-output',\n            position: { x: 700, y: 100 },\n            data: {\n                label: 'Chat Output',\n                config: {\n                    showTimestamp: true,\n                    maxLength: 2000,\n                    markdown: true\n                },\n                metadata: sampleNodes.find((n) => n.name === 'Chat Output')\n            }\n        }\n    ],\n    edges: [\n        {\n            id: 'sample-workflow-edge-1',\n            source: 'sample-workflow-text-input',\n            target: 'sample-workflow-openai',\n            sourceHandle: 'text',\n            targetHandle: 'prompt'\n        },\n        {\n            id: 'sample-workflow-edge-2',\n            source: 'sample-workflow-openai',\n            target: 'sample-workflow-chat-output',\n            sourceHandle: 'response',\n            targetHandle: 'message'\n        }\n    ],\n    metadata: {\n        version: '1.0.0',\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        author: 'FlowDrop',\n        tags: ['sample', 'chat', 'demo', 'langflow-style']\n    }\n};\n","import { get, writable } from 'svelte/store';\nimport writableDerived from 'svelte-writable-derived';\nconst TOAST_LIMIT = 20;\nexport const toasts = writable([]);\nexport const pausedAt = writable(null);\nconst toastTimeouts = new Map();\nconst addToRemoveQueue = (toastId) => {\n    if (toastTimeouts.has(toastId)) {\n        return;\n    }\n    const timeout = setTimeout(() => {\n        toastTimeouts.delete(toastId);\n        remove(toastId);\n    }, 1000);\n    toastTimeouts.set(toastId, timeout);\n};\nconst clearFromRemoveQueue = (toastId) => {\n    const timeout = toastTimeouts.get(toastId);\n    if (timeout) {\n        clearTimeout(timeout);\n    }\n};\nexport function update(toast, clearTimeout = true) {\n    if (clearTimeout && toast.id) {\n        clearFromRemoveQueue(toast.id);\n    }\n    toasts.update(($toasts) => $toasts.map((t) => (t.id === toast.id ? { ...t, ...toast } : t)));\n}\nexport function add(toast) {\n    toasts.update(($toasts) => [toast, ...$toasts].slice(0, TOAST_LIMIT));\n}\nexport function upsert(toast) {\n    if (get(toasts).find((t) => t.id === toast.id)) {\n        update(toast);\n    }\n    else {\n        add(toast);\n    }\n}\nexport function dismiss(toastId) {\n    toasts.update(($toasts) => {\n        if (toastId) {\n            addToRemoveQueue(toastId);\n        }\n        else {\n            $toasts.forEach((toast) => {\n                addToRemoveQueue(toast.id);\n            });\n        }\n        return $toasts.map((t) => t.id === toastId || toastId === undefined ? { ...t, visible: false } : t);\n    });\n}\nexport function remove(toastId) {\n    toasts.update(($toasts) => {\n        if (toastId === undefined) {\n            return [];\n        }\n        return $toasts.filter((t) => t.id !== toastId);\n    });\n}\nexport function startPause(time) {\n    pausedAt.set(time);\n}\nexport function endPause(time) {\n    let diff;\n    pausedAt.update(($pausedAt) => {\n        diff = time - ($pausedAt || 0);\n        return null;\n    });\n    toasts.update(($toasts) => $toasts.map((t) => ({\n        ...t,\n        pauseDuration: t.pauseDuration + diff\n    })));\n}\nconst defaultTimeouts = {\n    blank: 4000,\n    error: 4000,\n    success: 2000,\n    loading: Infinity,\n    custom: 4000\n};\nexport function useToasterStore(toastOptions = {}) {\n    const mergedToasts = writableDerived(toasts, ($toasts) => $toasts.map((t) => ({\n        ...toastOptions,\n        ...toastOptions[t.type],\n        ...t,\n        duration: t.duration ||\n            toastOptions[t.type]?.duration ||\n            toastOptions?.duration ||\n            defaultTimeouts[t.type],\n        style: [toastOptions.style, toastOptions[t.type]?.style, t.style].join(';')\n    })), ($toasts) => $toasts);\n    return {\n        toasts: mergedToasts,\n        pausedAt\n    };\n}\n","const isFunction = (valOrFunction) => typeof valOrFunction === 'function';\nexport const resolveValue = (valOrFunction, arg) => (isFunction(valOrFunction) ? valOrFunction(arg) : valOrFunction);\n","export const genId = (() => {\n    let count = 0;\n    return () => {\n        count += 1;\n        return count.toString();\n    };\n})();\nexport const prefersReducedMotion = (() => {\n    // Cache result\n    let shouldReduceMotion;\n    return () => {\n        if (shouldReduceMotion === undefined && typeof window !== 'undefined') {\n            const mediaQuery = matchMedia('(prefers-reduced-motion: reduce)');\n            shouldReduceMotion = !mediaQuery || mediaQuery.matches;\n        }\n        return shouldReduceMotion;\n    };\n})();\n","import { dismiss, remove, upsert } from './store';\nimport { resolveValue } from './types';\nimport { genId } from './utils';\nconst createToast = (message, type = 'blank', opts) => ({\n    createdAt: Date.now(),\n    visible: true,\n    type,\n    message,\n    pauseDuration: 0,\n    icon: opts?.icon,\n    duration: opts?.duration,\n    iconTheme: opts?.iconTheme,\n    position: opts?.position,\n    props: opts?.props,\n    id: opts?.id || genId()\n});\nconst createHandler = (type) => (message, options) => {\n    const toast = createToast(message, type, options);\n    upsert(toast);\n    return toast.id;\n};\nconst toast = (message, opts) => createHandler('blank')(message, opts);\ntoast.error = createHandler('error');\ntoast.success = createHandler('success');\ntoast.loading = createHandler('loading');\ntoast.custom = createHandler('custom');\ntoast.dismiss = (toastId) => {\n    dismiss(toastId);\n};\ntoast.remove = (toastId) => remove(toastId);\ntoast.promise = (promise, msgs, opts) => {\n    const id = toast.loading(msgs.loading, { ...opts, ...opts?.loading });\n    promise\n        .then((p) => {\n        toast.success(resolveValue(msgs.success, p), {\n            id,\n            ...opts,\n            ...opts?.success\n        });\n        return p;\n    })\n        .catch((e) => {\n        toast.error(resolveValue(msgs.error, e), {\n            id,\n            ...opts,\n            ...opts?.error\n        });\n    });\n    return promise;\n};\nexport default toast;\n","/**\n * Toast Service\n * Centralized toast notification service using svelte-french-toast\n * Provides consistent toast notifications across the FlowDrop application\n */\nimport { toast } from 'svelte-5-french-toast';\n/**\n * Show a success toast notification\n */\nexport function showSuccess(message, options) {\n    return toast.success(message, {\n        duration: options?.duration || 4000,\n        position: options?.position || 'bottom-center'\n    });\n}\n/**\n * Show an error toast notification\n */\nexport function showError(message, options) {\n    return toast.error(message, {\n        duration: options?.duration || 6000,\n        position: options?.position || 'bottom-center'\n    });\n}\n/**\n * Show a warning toast notification\n */\nexport function showWarning(message, options) {\n    return toast.error(message, {\n        duration: options?.duration || 5000,\n        position: options?.position || 'bottom-center'\n    });\n}\n/**\n * Show an info toast notification\n */\nexport function showInfo(message, options) {\n    return toast.success(message, {\n        duration: options?.duration || 4000,\n        position: options?.position || 'bottom-center'\n    });\n}\n/**\n * Show a loading toast notification\n */\nexport function showLoading(message, options) {\n    return toast.loading(message, {\n        duration: options?.duration || Infinity,\n        position: options?.position || 'bottom-center'\n    });\n}\n/**\n * Dismiss a specific toast by ID\n */\nexport function dismissToast(toastId) {\n    toast.dismiss(toastId);\n}\n/**\n * Dismiss all toasts\n */\nexport function dismissAllToasts() {\n    toast.dismiss();\n}\n/**\n * Show a promise-based toast (loading -> success/error)\n */\nexport function showPromise(promise, { loading, success, error, options }) {\n    return toast.promise(promise, {\n        loading,\n        success,\n        error,\n        ...options\n    });\n}\n/**\n * Show a confirmation toast (simplified version without action buttons)\n */\nexport function showConfirmation(message, options) {\n    return toast(message, {\n        duration: options?.duration || 5000,\n        position: options?.position || 'bottom-center'\n    });\n}\n/**\n * API-specific toast helpers\n */\nexport const apiToasts = {\n    /**\n     * Show API success message\n     */\n    success: (operation, details) => {\n        const message = details ? `${operation}: ${details}` : operation;\n        return showSuccess(message);\n    },\n    /**\n     * Show API error message\n     */\n    error: (operation, error) => {\n        const errorMessage = error instanceof Error ? error.message : error;\n        return showError(`${operation} failed: ${errorMessage}`);\n    },\n    /**\n     * Show API loading message\n     */\n    loading: (operation) => {\n        return showLoading(`${operation}...`);\n    },\n    /**\n     * Show API promise with automatic success/error handling\n     */\n    promise: (promise, operation, options) => {\n        return showPromise(promise, {\n            loading: `${operation}...`,\n            success: options?.successMessage || `${operation} completed successfully`,\n            error: options?.errorMessage || `${operation} failed`\n        });\n    }\n};\n/**\n * Workflow-specific toast helpers\n */\nexport const workflowToasts = {\n    /**\n     * Show workflow save success\n     */\n    saved: (workflowName) => {\n        const message = workflowName\n            ? `Workflow \"${workflowName}\" saved successfully`\n            : 'Workflow saved successfully';\n        return showSuccess(message);\n    },\n    /**\n     * Show workflow save error\n     */\n    saveError: (error) => {\n        const errorMessage = error instanceof Error ? error.message : error;\n        return showError(`Failed to save workflow: ${errorMessage}`);\n    },\n    /**\n     * Show workflow delete success\n     */\n    deleted: (workflowName) => {\n        const message = workflowName\n            ? `Workflow \"${workflowName}\" deleted successfully`\n            : 'Workflow deleted successfully';\n        return showSuccess(message);\n    },\n    /**\n     * Show workflow delete error\n     */\n    deleteError: (error) => {\n        const errorMessage = error instanceof Error ? error.message : error;\n        return showError(`Failed to delete workflow: ${errorMessage}`);\n    },\n    /**\n     * Show workflow execution started\n     */\n    executionStarted: (workflowName) => {\n        const message = workflowName\n            ? `Workflow \"${workflowName}\" execution started`\n            : 'Workflow execution started';\n        return showInfo(message);\n    },\n    /**\n     * Show workflow execution completed\n     */\n    executionCompleted: (workflowName) => {\n        const message = workflowName\n            ? `Workflow \"${workflowName}\" execution completed`\n            : 'Workflow execution completed';\n        return showSuccess(message);\n    },\n    /**\n     * Show workflow export success\n     */\n    exported: (workflowName) => {\n        const message = workflowName\n            ? `Workflow \"${workflowName}\" exported successfully`\n            : 'Workflow exported successfully';\n        return showSuccess(message);\n    },\n    /**\n     * Show workflow execution error\n     */\n    executionError: (error) => {\n        const errorMessage = error instanceof Error ? error.message : error;\n        return showError(`Workflow execution failed: ${errorMessage}`);\n    }\n};\n/**\n * Pipeline-specific toast helpers\n */\nexport const pipelineToasts = {\n    /**\n     * Show pipeline creation success\n     */\n    created: (pipelineName) => {\n        const message = pipelineName\n            ? `Pipeline \"${pipelineName}\" created successfully`\n            : 'Pipeline created successfully';\n        return showSuccess(message);\n    },\n    /**\n     * Show pipeline creation error\n     */\n    creationError: (error) => {\n        const errorMessage = error instanceof Error ? error.message : error;\n        return showError(`Failed to create pipeline: ${errorMessage}`);\n    },\n    /**\n     * Show pipeline execution started\n     */\n    executionStarted: (pipelineId) => {\n        return showInfo(`Pipeline ${pipelineId} execution started`);\n    },\n    /**\n     * Show pipeline execution completed\n     */\n    executionCompleted: (pipelineId) => {\n        return showSuccess(`Pipeline ${pipelineId} execution completed`);\n    },\n    /**\n     * Show pipeline execution error\n     */\n    executionError: (pipelineId, error) => {\n        const errorMessage = error instanceof Error ? error.message : error;\n        return showError(`Pipeline ${pipelineId} execution failed: ${errorMessage}`);\n    },\n    /**\n     * Show pipeline status update\n     */\n    statusUpdate: (pipelineId, status) => {\n        return showInfo(`Pipeline ${pipelineId} status: ${status}`);\n    }\n};\n","<!--\n  FlowDrop App Component\n  Main application wrapper with navbar, sidebars, and workflow editor\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport { onMount, tick } from 'svelte';\n\timport { page } from '$app/stores';\n\timport WorkflowEditor from './WorkflowEditor.svelte';\n\timport NodeSidebar from './NodeSidebar.svelte';\n\timport ConfigSidebar from './ConfigSidebar.svelte';\n\timport ConfigForm from './ConfigForm.svelte';\n\timport Navbar from './Navbar.svelte';\n\timport { api, setEndpointConfig } from '../services/api.js';\n\timport type { NodeMetadata, Workflow, WorkflowNode, ConfigSchema } from '../types/index.js';\n\timport { sampleNodes } from '../data/samples.js';\n\timport { createEndpointConfig } from '../config/endpoints.js';\n\timport type { EndpointConfig } from '../config/endpoints.js';\n\timport type { AuthProvider } from '../types/auth.js';\n\timport type { FlowDropEventHandlers, FlowDropFeatures } from '../types/events.js';\n\timport { mergeFeatures } from '../types/events.js';\n\timport {\n\t\tworkflowStore,\n\t\tworkflowActions,\n\t\tworkflowName,\n\t\tmarkAsSaved\n\t} from '../stores/workflowStore.js';\n\timport { apiToasts, dismissToast } from '../services/toastService.js';\n\n\t/**\n\t * Configuration props for runtime customization\n\t */\n\tinterface Props {\n\t\t/** Initial workflow to load */\n\t\tworkflow?: Workflow;\n\t\t/** Pre-loaded node types (if provided, skips API fetch) */\n\t\tnodes?: NodeMetadata[];\n\t\t/** Editor height */\n\t\theight?: string | number;\n\t\t/** Editor width */\n\t\twidth?: string | number;\n\t\t/** Show the navbar */\n\t\tshowNavbar?: boolean;\n\t\t/** Disable the node sidebar */\n\t\tdisableSidebar?: boolean;\n\t\t/** Lock the workflow (prevent changes) */\n\t\tlockWorkflow?: boolean;\n\t\t/** Read-only mode */\n\t\treadOnly?: boolean;\n\t\t/** Node execution statuses */\n\t\tnodeStatuses?: Record<string, 'pending' | 'running' | 'completed' | 'error'>;\n\t\t/** Pipeline ID for fetching node execution info */\n\t\tpipelineId?: string;\n\t\t/** Custom navbar title */\n\t\tnavbarTitle?: string;\n\t\t/** Custom navbar actions */\n\t\tnavbarActions?: Array<{\n\t\t\tlabel: string;\n\t\t\thref: string;\n\t\t\ticon?: string;\n\t\t\tvariant?: 'primary' | 'secondary' | 'outline';\n\t\t\tonclick?: (event: Event) => void;\n\t\t}>;\n\t\t/** API base URL */\n\t\tapiBaseUrl?: string;\n\t\t/** Endpoint configuration */\n\t\tendpointConfig?: EndpointConfig;\n\t\t/** Authentication provider */\n\t\tauthProvider?: AuthProvider;\n\t\t/** Event handlers */\n\t\teventHandlers?: FlowDropEventHandlers;\n\t\t/** Feature configuration */\n\t\tfeatures?: FlowDropFeatures;\n\t}\n\n\tlet {\n\t\tworkflow: initialWorkflow,\n\t\tnodes: propNodes,\n\t\theight = '100vh',\n\t\twidth = '100%',\n\t\tshowNavbar = false,\n\t\tdisableSidebar = false,\n\t\tlockWorkflow = false,\n\t\treadOnly = false,\n\t\tnodeStatuses = {},\n\t\tpipelineId,\n\t\tnavbarTitle,\n\t\tnavbarActions = [],\n\t\tapiBaseUrl,\n\t\tendpointConfig: propEndpointConfig,\n\t\tauthProvider,\n\t\teventHandlers,\n\t\tfeatures: propFeatures\n\t}: Props = $props();\n\n\t// Merge features with defaults\n\tconst features = mergeFeatures(propFeatures);\n\n\t// Create breadcrumb-style title - at top level to avoid store subscription issues\n\tlet breadcrumbTitle = $derived(() => {\n\t\t// Use custom navbar title if provided\n\t\tif (navbarTitle) {\n\t\t\treturn navbarTitle;\n\t\t}\n\t\t// Default workflow title logic\n\t\tif (!$workflowName || $workflowName === 'Untitled Workflow') {\n\t\t\treturn 'Workflow / New Workflow';\n\t\t}\n\t\treturn `Workflow / ${$workflowName}`;\n\t});\n\n\tlet nodes = $state<NodeMetadata[]>([]);\n\t// Remove workflow prop - use global store directly\n\t// let workflow = $derived($workflowStore || initialWorkflow);\n\tlet error = $state<string | null>(null);\n\tlet endpointConfig = $state<EndpointConfig | null>(null);\n\n\t// ConfigSidebar state\n\tlet isConfigSidebarOpen = $state(false);\n\tlet selectedNodeId = $state<string | null>(null);\n\n\t// Workflow settings sidebar state\n\tlet isWorkflowSettingsOpen = $state(false);\n\n\t// Workflow configuration schema\n\tconst workflowConfigSchema: ConfigSchema = {\n\t\ttype: 'object',\n\t\tproperties: {\n\t\t\tname: {\n\t\t\t\ttype: 'string',\n\t\t\t\ttitle: 'Workflow Name',\n\t\t\t\tdescription: 'The name of the workflow',\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\tdescription: {\n\t\t\t\ttype: 'string',\n\t\t\t\ttitle: 'Description',\n\t\t\t\tdescription: 'A description of the workflow',\n\t\t\t\tdefault: ''\n\t\t\t}\n\t\t},\n\t\trequired: ['name']\n\t};\n\n\t// Workflow configuration values\n\tlet workflowConfigValues = $derived({\n\t\tname: $workflowName || '',\n\t\tdescription: $workflowStore?.description || ''\n\t});\n\n\t// Get the current node from the workflow store\n\tlet selectedNodeForConfig = $derived(() => {\n\t\tif (!selectedNodeId || !$workflowStore) return null;\n\t\treturn $workflowStore.nodes.find((node) => node.id === selectedNodeId) || null;\n\t});\n\n\t// WorkflowEditor reference for save functionality\n\tlet workflowEditorRef: WorkflowEditor | null = null;\n\n\t// Removed currentWorkflowState - no longer needed\n\t// The global store ($workflowStore) serves as the single source of truth\n\n\t/**\n\t * Fetch node types from the server\n\t *\n\t * If propNodes is provided, uses those instead of fetching from API.\n\t * This fixes the bug where propNodes was ignored.\n\t */\n\tasync function fetchNodeTypes(): Promise<void> {\n\t\t// If nodes were provided as props, use them directly (skip API fetch)\n\t\tif (propNodes && propNodes.length > 0) {\n\t\t\tnodes = propNodes;\n\t\t\treturn;\n\t\t}\n\n\t\t// Show loading toast (if toasts are enabled)\n\t\tconst loadingToast = features.showToasts ? apiToasts.loading('Loading node types') : null;\n\t\ttry {\n\t\t\terror = null;\n\n\t\t\tconst fetchedNodes = await api.nodes.getNodes();\n\n\t\t\tnodes = fetchedNodes;\n\t\t\terror = null;\n\n\t\t\t// Dismiss loading toast\n\t\t\tif (loadingToast) {\n\t\t\t\tdismissToast(loadingToast);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t// Dismiss loading toast and show error toast\n\t\t\tif (loadingToast) {\n\t\t\t\tdismissToast(loadingToast);\n\t\t\t}\n\n\t\t\tconst errorMessage = err instanceof Error ? err.message : 'Unknown error';\n\n\t\t\t// Notify parent via event handler\n\t\t\tif (eventHandlers?.onApiError) {\n\t\t\t\tconst suppressToast = eventHandlers.onApiError(\n\t\t\t\t\terr instanceof Error ? err : new Error(errorMessage),\n\t\t\t\t\t'fetchNodes'\n\t\t\t\t);\n\t\t\t\tif (suppressToast) {\n\t\t\t\t\t// Parent handled the error, don't show default toast\n\t\t\t\t\tnodes = sampleNodes;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Show error but don't block the UI\n\t\t\terror = `API Error: ${errorMessage}. Using sample data.`;\n\t\t\tif (features.showToasts) {\n\t\t\t\tapiToasts.error('Load node types', errorMessage);\n\t\t\t}\n\n\t\t\t// Fallback to sample data\n\t\t\tnodes = sampleNodes;\n\t\t}\n\t}\n\n\t/**\n\t * Retry loading node types\n\t */\n\tfunction retryLoad(): void {\n\t\tfetchNodeTypes();\n\t}\n\n\t/**\n\t * Test API connection\n\t */\n\tasync function testApiConnection(): Promise<void> {\n\t\ttry {\n\t\t\tconst baseUrl = endpointConfig?.baseUrl || apiBaseUrl || '/api/flowdrop';\n\t\t\tconst testUrl = `${baseUrl}/nodes`;\n\n\t\t\tconst response = await fetch(testUrl);\n\t\t\tconst data = await response.json();\n\n\t\t\tif (response.ok && data.success) {\n\t\t\t\tapiToasts.success('API connection test', 'Connection successful');\n\t\t\t} else {\n\t\t\t\tapiToasts.error('API connection test', 'Connection failed');\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tapiToasts.error('API connection test', err instanceof Error ? err.message : 'Unknown error');\n\t\t}\n\t}\n\n\t/**\n\t * Initialize API endpoints\n\t * Priority: propEndpointConfig > existingConfig > apiBaseUrl > default\n\t */\n\tasync function initializeApiEndpoints(): Promise<void> {\n\t\t// First priority: Use endpointConfig prop if provided (from mountFlowDropApp)\n\t\tif (propEndpointConfig) {\n\t\t\tsetEndpointConfig(propEndpointConfig);\n\t\t\tendpointConfig = propEndpointConfig;\n\t\t\treturn;\n\t\t}\n\n\t\t// Second priority: Check if endpoint config is already set (e.g., by parent layout)\n\t\tconst { getEndpointConfig } = await import('../services/api.js');\n\t\tconst existingConfig = getEndpointConfig();\n\n\t\t// If config already exists and no override provided, use existing\n\t\tif (existingConfig && !apiBaseUrl) {\n\t\t\tendpointConfig = existingConfig;\n\t\t\treturn;\n\t\t}\n\n\t\t// Third priority: Use provided apiBaseUrl or default\n\t\tconst baseUrl = apiBaseUrl || '/api/flowdrop';\n\n\t\tconst config = createEndpointConfig(baseUrl, {\n\t\t\tauth: {\n\t\t\t\ttype: 'none' // No authentication for now\n\t\t\t},\n\t\t\ttimeout: 10000, // 10 second timeout\n\t\t\tretry: {\n\t\t\t\tenabled: true,\n\t\t\t\tmaxAttempts: 2,\n\t\t\t\tdelay: 1000,\n\t\t\t\tbackoff: 'exponential'\n\t\t\t}\n\t\t});\n\n\t\tsetEndpointConfig(config);\n\t\t// Store the configuration for passing to WorkflowEditor\n\t\tendpointConfig = config;\n\t}\n\n\t/**\n\t * ConfigSidebar functions\n\t */\n\tfunction openConfigSidebar(node: WorkflowNode): void {\n\t\t// Close if already open for the same node\n\t\tif (isConfigSidebarOpen && selectedNodeId === node.id) {\n\t\t\tcloseConfigSidebar();\n\t\t\treturn;\n\t\t}\n\t\tselectedNodeId = node.id;\n\t\tisConfigSidebarOpen = true;\n\t}\n\n\tfunction closeConfigSidebar(): void {\n\t\tisConfigSidebarOpen = false;\n\t\tselectedNodeId = null;\n\t}\n\n\t/**\n\t * Toggle workflow settings sidebar\n\t */\n\tfunction toggleWorkflowSettings(): void {\n\t\tisWorkflowSettingsOpen = !isWorkflowSettingsOpen;\n\t\t// Close config sidebar if opening workflow settings\n\t\tif (isWorkflowSettingsOpen) {\n\t\t\tcloseConfigSidebar();\n\t\t}\n\t}\n\n\t/**\n\t * Handle workflow configuration save\n\t */\n\tasync function handleWorkflowSave(config: any): Promise<void> {\n\t\t// Update the workflow store\n\t\tif ($workflowStore) {\n\t\t\t$workflowStore.name = config.name;\n\t\t\t$workflowStore.description = config.description;\n\t\t}\n\n\t\t// Close the sidebar\n\t\tisWorkflowSettingsOpen = false;\n\n\t\t// Also save the workflow to the backend\n\t\ttry {\n\t\t\tawait saveWorkflow();\n\t\t} catch (error) {\n\t\t\tconsole.error('Failed to save workflow to backend:', error);\n\t\t\t// Note: We don't throw the error here to avoid breaking the UI flow\n\t\t\t// The user can still manually save via the main Save button if needed\n\t\t}\n\t}\n\n\t// Removed handleWorkflowChange function - no longer needed\n\t// The global store serves as the single source of truth and is already reactive\n\n\t/**\n\t * Save workflow - exposed API function\n\t *\n\t * Integrates with event handlers for enterprise customization.\n\t */\n\tasync function saveWorkflow(): Promise<void> {\n\t\t// Wait for any pending DOM updates before saving\n\t\tawait tick();\n\n\t\t// Use current workflow from global store\n\t\tconst workflowToSave = $workflowStore;\n\n\t\tif (!workflowToSave) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Call onBeforeSave if provided - allows cancellation\n\t\tif (eventHandlers?.onBeforeSave) {\n\t\t\tconst shouldContinue = await eventHandlers.onBeforeSave(workflowToSave);\n\t\t\tif (shouldContinue === false) {\n\t\t\t\t// Save cancelled by event handler\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Show loading toast (if enabled)\n\t\tconst loadingToast = features.showToasts ? apiToasts.loading('Saving workflow') : null;\n\n\t\ttry {\n\t\t\t// Import necessary modules\n\t\t\tconst { workflowApi } = await import('../services/api.js');\n\t\t\tconst { v4: uuidv4 } = await import('uuid');\n\n\t\t\t// Determine the workflow ID\n\t\t\tlet workflowId: string;\n\t\t\tif (workflowToSave.id) {\n\t\t\t\tworkflowId = workflowToSave.id;\n\t\t\t} else {\n\t\t\t\tworkflowId = uuidv4();\n\t\t\t}\n\n\t\t\t// Create workflow object for saving\n\t\t\tconst finalWorkflow: Workflow = {\n\t\t\t\tid: workflowId,\n\t\t\t\tname: workflowToSave.name || 'Untitled Workflow',\n\t\t\t\tdescription: workflowToSave.description || '',\n\t\t\t\tnodes: workflowToSave.nodes || [],\n\t\t\t\tedges: workflowToSave.edges || [],\n\t\t\t\tmetadata: {\n\t\t\t\t\tversion: '1.0.0',\n\t\t\t\t\tcreatedAt: workflowToSave.metadata?.createdAt || new Date().toISOString(),\n\t\t\t\t\tupdatedAt: new Date().toISOString()\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst savedWorkflow = await workflowApi.saveWorkflow(finalWorkflow);\n\n\t\t\t// Update the workflow ID if it changed (new workflow)\n\t\t\t// Keep our current workflow state, only update ID and metadata from backend\n\t\t\tif (savedWorkflow.id && savedWorkflow.id !== finalWorkflow.id) {\n\t\t\t\tworkflowActions.batchUpdate({\n\t\t\t\t\tnodes: finalWorkflow.nodes,\n\t\t\t\t\tedges: finalWorkflow.edges,\n\t\t\t\t\tname: finalWorkflow.name,\n\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t...finalWorkflow.metadata,\n\t\t\t\t\t\t...savedWorkflow.metadata\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Mark as saved (clears dirty state)\n\t\t\tmarkAsSaved();\n\n\t\t\t// Dismiss loading toast and show success\n\t\t\tif (loadingToast) {\n\t\t\t\tdismissToast(loadingToast);\n\t\t\t}\n\t\t\tif (features.showToasts) {\n\t\t\t\tapiToasts.success('Save workflow', 'Workflow saved successfully');\n\t\t\t}\n\n\t\t\t// Call onAfterSave if provided\n\t\t\tif (eventHandlers?.onAfterSave) {\n\t\t\t\tawait eventHandlers.onAfterSave(savedWorkflow);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\t// Dismiss loading toast\n\t\t\tif (loadingToast) {\n\t\t\t\tdismissToast(loadingToast);\n\t\t\t}\n\n\t\t\tconst errorObj = error instanceof Error ? error : new Error('Unknown error occurred');\n\n\t\t\t// Call onSaveError if provided\n\t\t\tif (eventHandlers?.onSaveError && workflowToSave) {\n\t\t\t\tawait eventHandlers.onSaveError(errorObj, workflowToSave);\n\t\t\t}\n\n\t\t\t// Check if parent wants to handle API errors\n\t\t\tlet suppressToast = false;\n\t\t\tif (eventHandlers?.onApiError) {\n\t\t\t\tsuppressToast = eventHandlers.onApiError(errorObj, 'save') === true;\n\t\t\t}\n\n\t\t\t// Show error toast if not suppressed\n\t\t\tif (features.showToasts && !suppressToast) {\n\t\t\t\tapiToasts.error('Save workflow', errorObj.message);\n\t\t\t}\n\n\t\t\tthrow error; // Re-throw to allow calling code to handle if needed\n\t\t}\n\t}\n\n\t/**\n\t * Export workflow - exposed API function\n\t */\n\tasync function exportWorkflow(): Promise<void> {\n\t\ttry {\n\t\t\t// Wait for any pending DOM updates before exporting\n\t\t\tawait tick();\n\n\t\t\t// Use current workflow from global store\n\t\t\tconst workflowToExport = $workflowStore;\n\n\t\t\tif (!workflowToExport) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Create workflow object for export\n\t\t\tconst finalWorkflow = {\n\t\t\t\tid: workflowToExport.id || 'untitled-workflow',\n\t\t\t\tname: workflowToExport.name || 'Untitled Workflow',\n\t\t\t\tnodes: workflowToExport.nodes || [],\n\t\t\t\tedges: workflowToExport.edges || [],\n\t\t\t\tmetadata: {\n\t\t\t\t\tversion: '1.0.0',\n\t\t\t\t\tcreatedAt: workflowToExport.metadata?.createdAt || new Date().toISOString(),\n\t\t\t\t\tupdatedAt: new Date().toISOString()\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Create and download the file\n\t\t\tconst dataStr = JSON.stringify(finalWorkflow, null, 2);\n\t\t\tconst dataBlob = new Blob([dataStr], { type: 'application/json' });\n\t\t\tconst url = URL.createObjectURL(dataBlob);\n\t\t\tconst link = document.createElement('a');\n\t\t\tlink.href = url;\n\t\t\tlink.download = `${finalWorkflow.name}.json`;\n\t\t\tlink.click();\n\t\t\tURL.revokeObjectURL(url);\n\t\t} catch {\n\t\t\t// Export failed\n\t\t}\n\t}\n\n\t// Expose save and export functions globally for external access\n\tif (typeof window !== 'undefined') {\n\t\twindow.flowdropSave = saveWorkflow;\n\t\twindow.flowdropExport = exportWorkflow;\n\t}\n\n\t// Function to handle clicks outside the sidebar\n\tfunction handleCanvasClick(event: MouseEvent): void {\n\t\t// Check if the click is outside the right sidebar\n\t\tconst rightSidebar = document.querySelector('.flowdrop-sidebar--right');\n\t\tif (rightSidebar && !rightSidebar.contains(event.target as Node)) {\n\t\t\t// Close sidebar when clicking outside of it\n\t\t\tif (isConfigSidebarOpen) {\n\t\t\t\tcloseConfigSidebar();\n\t\t\t}\n\t\t}\n\t}\n\n\t// Load node types on mount\n\tonMount(() => {\n\t\t(async () => {\n\t\t\tawait initializeApiEndpoints();\n\t\t\tawait fetchNodeTypes();\n\n\t\t\t// Initialize the workflow store if we have an initial workflow\n\t\t\tif (initialWorkflow) {\n\t\t\t\tworkflowActions.initialize(initialWorkflow);\n\n\t\t\t\t// Emit onWorkflowLoad event\n\t\t\t\tif (eventHandlers?.onWorkflowLoad) {\n\t\t\t\t\teventHandlers.onWorkflowLoad(initialWorkflow);\n\t\t\t\t}\n\t\t\t}\n\t\t})();\n\n\t\t// Listen for workflow settings toggle from main navbar\n\t\tconst handleWorkflowSettingsToggle = () => {\n\t\t\ttoggleWorkflowSettings();\n\t\t};\n\n\t\twindow.addEventListener('workflow-settings-toggle', handleWorkflowSettingsToggle);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('workflow-settings-toggle', handleWorkflowSettingsToggle);\n\t\t};\n\t});\n\n\t// Monitor workflow store changes for testing node drag updates\n\t$effect(() => {\n\t\tconst currentWorkflow = $workflowStore;\n\t\tif (currentWorkflow) {\n\t\t\t// Workflow store updated\n\t\t}\n\t});\n</script>\n\n<svelte:head>\n\t<title>FlowDrop - Visual Workflow Manager</title>\n\t<meta name=\"description\" content=\"A modern drag-and-drop workflow editor for LLM applications\" />\n</svelte:head>\n\n<div\n\tclass=\"flowdrop-app\"\n\tstyle=\"height: {typeof height === 'number' ? `${height}px` : height}; width: {typeof width ===\n\t'number'\n\t\t? `${width}px`\n\t\t: width};\"\n>\n\t<!-- Navbar (conditionally rendered) - hide on workflow edit pages -->\n\t{#if showNavbar && !$page.url.pathname.includes('/edit')}\n\t\t<Navbar\n\t\t\ttitle={breadcrumbTitle()}\n\t\t\tprimaryActions={navbarActions.length > 0\n\t\t\t\t? navbarActions\n\t\t\t\t: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: 'Save',\n\t\t\t\t\t\t\thref: '#save',\n\t\t\t\t\t\t\ticon: 'heroicons:document-arrow-down',\n\t\t\t\t\t\t\tvariant: 'primary',\n\t\t\t\t\t\t\tonclick: (e) => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tsaveWorkflow();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: 'Export',\n\t\t\t\t\t\t\thref: '#export',\n\t\t\t\t\t\t\ticon: 'heroicons:arrow-down-tray',\n\t\t\t\t\t\t\tvariant: 'outline',\n\t\t\t\t\t\t\tonclick: (e) => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\texportWorkflow();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: 'Workflow Settings',\n\t\t\t\t\t\t\thref: '#settings',\n\t\t\t\t\t\t\ticon: 'heroicons:cog-6-tooth',\n\t\t\t\t\t\t\tvariant: 'outline',\n\t\t\t\t\t\t\tonclick: (e) => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\ttoggleWorkflowSettings();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]}\n\t\t\tshowStatus={true}\n\t\t/>\n\t{/if}\n\n\t<!-- Main Content -->\n\t<main class=\"flowdrop-main\">\n\t\t<!-- Status Display -->\n\t\t{#if error}\n\t\t\t<div class=\"flowdrop-status flowdrop-status--error\">\n\t\t\t\t<div class=\"flowdrop-status__content\">\n\t\t\t\t\t<div class=\"flowdrop-flex flowdrop-gap--3\">\n\t\t\t\t\t\t<div class=\"flowdrop-status__indicator flowdrop-status__indicator--error\"></div>\n\t\t\t\t\t\t<span class=\"flowdrop-text--sm flowdrop-font--medium\">Error: {error}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"flowdrop-flex flowdrop-gap--2\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"flowdrop-btn flowdrop-btn--sm flowdrop-btn--outline\"\n\t\t\t\t\t\t\tonclick={retryLoad}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRetry\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"flowdrop-btn flowdrop-btn--sm flowdrop-btn--primary\"\n\t\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\t\tnodes = sampleNodes;\n\t\t\t\t\t\t\t\terror = null;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tUse Sample Data\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"flowdrop-btn flowdrop-btn--sm flowdrop-btn--outline\"\n\t\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\t\tconst defaultUrl = '/api/flowdrop';\n\t\t\t\t\t\t\t\tconst newUrl = prompt('Enter Backend API URL:', defaultUrl);\n\t\t\t\t\t\t\t\tif (newUrl) {\n\t\t\t\t\t\t\t\t\tconst endpointConfig = createEndpointConfig(newUrl);\n\t\t\t\t\t\t\t\t\tsetEndpointConfig(endpointConfig);\n\t\t\t\t\t\t\t\t\tfetchNodeTypes();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSet API URL\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"flowdrop-btn flowdrop-btn--sm flowdrop-btn--outline\"\n\t\t\t\t\t\t\tonclick={testApiConnection}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tTest API\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"flowdrop-btn flowdrop-btn--ghost flowdrop-btn--sm\"\n\t\t\t\t\t\t\tonclick={() => (error = null)}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<!-- Workflow Editor with Sidebars -->\n\t\t<div class=\"flowdrop-editor-container\">\n\t\t\t<!-- Left Sidebar - Node Components (conditionally rendered) -->\n\t\t\t{#if !disableSidebar}\n\t\t\t\t<div class=\"flowdrop-sidebar flowdrop-sidebar--left\">\n\t\t\t\t\t<NodeSidebar {nodes} />\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<!-- Main Editor Area -->\n\t\t\t<div\n\t\t\t\tclass=\"flowdrop-editor-main\"\n\t\t\t\tclass:pipeline-view={!!pipelineId}\n\t\t\t\tonclick={handleCanvasClick}\n\t\t\t\tonkeydown={(e) => e.key === 'Escape' && closeConfigSidebar()}\n\t\t\t\trole=\"button\"\n\t\t\t\ttabindex=\"0\"\n\t\t\t\taria-label=\"Workflow canvas - click to close sidebar\"\n\t\t\t>\n\t\t\t\t<WorkflowEditor\n\t\t\t\t\tbind:this={workflowEditorRef}\n\t\t\t\t\t{nodes}\n\t\t\t\t\t{height}\n\t\t\t\t\t{width}\n\t\t\t\t\t{endpointConfig}\n\t\t\t\t\t{isConfigSidebarOpen}\n\t\t\t\t\tselectedNodeForConfig={selectedNodeForConfig()}\n\t\t\t\t\t{openConfigSidebar}\n\t\t\t\t\t{closeConfigSidebar}\n\t\t\t\t\t{lockWorkflow}\n\t\t\t\t\t{readOnly}\n\t\t\t\t\t{nodeStatuses}\n\t\t\t\t\t{pipelineId}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<!-- Right Sidebar - Configuration or Workflow Settings (conditionally rendered) -->\n\t\t\t{#if !disableSidebar && isWorkflowSettingsOpen}\n\t\t\t\t<ConfigSidebar\n\t\t\t\t\tisOpen={isWorkflowSettingsOpen}\n\t\t\t\t\ttitle=\"Workflow Settings\"\n\t\t\t\t\tconfigSchema={workflowConfigSchema}\n\t\t\t\t\tconfigValues={workflowConfigValues}\n\t\t\t\t\tonSave={handleWorkflowSave}\n\t\t\t\t\tonClose={() => (isWorkflowSettingsOpen = false)}\n\t\t\t\t/>\n\t\t\t{:else if !disableSidebar && selectedNodeForConfig()}\n\t\t\t\t<div class=\"flowdrop-sidebar flowdrop-sidebar--right\">\n\t\t\t\t\t<div class=\"flowdrop-config-sidebar\">\n\t\t\t\t\t\t<!-- Header -->\n\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__header\">\n\t\t\t\t\t\t\t<h2 class=\"flowdrop-config-sidebar__title\">{selectedNodeForConfig().data.label}</h2>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__close\"\n\t\t\t\t\t\t\t\tonclick={closeConfigSidebar}\n\t\t\t\t\t\t\t\taria-label=\"Close configuration sidebar\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<!-- Content -->\n\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__content\">\n\t\t\t\t\t\t\t<!-- Node Details -->\n\t\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__section\">\n\t\t\t\t\t\t\t\t<h3 class=\"flowdrop-config-sidebar__section-title\">Node Details</h3>\n\t\t\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__details\">\n\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__detail\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-config-sidebar__detail-label\">Node ID:</span>\n\t\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__detail-value-with-copy\">\n\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__detail-value\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"font-family: monospace;\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{selectedNodeForConfig().id}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__copy-btn\"\n\t\t\t\t\t\t\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tnavigator.clipboard.writeText(selectedNodeForConfig().id);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Copy Node ID\"\n\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"Copy node ID to clipboard\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__detail\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-config-sidebar__detail-label\">Type:</span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-config-sidebar__detail-value\"\n\t\t\t\t\t\t\t\t\t\t\t>{selectedNodeForConfig().data.metadata?.type ||\n\t\t\t\t\t\t\t\t\t\t\t\tselectedNodeForConfig().type}</span\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__detail\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-config-sidebar__detail-label\">Category:</span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-config-sidebar__detail-value\"\n\t\t\t\t\t\t\t\t\t\t\t>{selectedNodeForConfig().data.metadata?.category || 'general'}</span\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__detail\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-config-sidebar__detail-label\">Description:</span>\n\t\t\t\t\t\t\t\t\t\t<p class=\"flowdrop-config-sidebar__detail-description\">\n\t\t\t\t\t\t\t\t\t\t\t{selectedNodeForConfig().data.metadata?.description || 'Node configuration'}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<!-- Configuration Form -->\n\t\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__section\">\n\t\t\t\t\t\t\t\t<h3 class=\"flowdrop-config-sidebar__section-title\">Configuration</h3>\n\t\t\t\t\t\t\t\t<ConfigForm\n\t\t\t\t\t\t\t\t\tnode={selectedNodeForConfig()}\n\t\t\t\t\t\t\t\t\tonSave={(updatedConfig) => {\n\t\t\t\t\t\t\t\t\t\tconst currentNode = selectedNodeForConfig();\n\t\t\t\t\t\t\t\t\t\tif (selectedNodeId && currentNode) {\n\t\t\t\t\t\t\t\t\t\t\t// Handle nodeType switching if nodeType is in the config\n\t\t\t\t\t\t\t\t\t\t\tlet nodeUpdates: Record<string, unknown> = {\n\t\t\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...currentNode.data,\n\t\t\t\t\t\t\t\t\t\t\t\t\tconfig: updatedConfig\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t\t\t// NOTE: We do NOT change the node's type field anymore\n\t\t\t\t\t\t\t\t\t\t\t// All nodes use 'universalNode' and UniversalNode handles internal switching\n\t\t\t\t\t\t\t\t\t\t\tworkflowActions.updateNode(selectedNodeId, nodeUpdates);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tcloseConfigSidebar();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonCancel={closeConfigSidebar}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t</main>\n</div>\n\n<style>\n\t.flowdrop-app {\n\t\tbackground: linear-gradient(135deg, #f9fafb 0%, #e0e7ff 50%, #c7d2fe 100%);\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\toverflow: hidden;\n\t}\n\n\t.flowdrop-main {\n\t\tflex: 1;\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 0;\n\t\toverflow: hidden;\n\t}\n\n\t.flowdrop-status {\n\t\tbackground-color: #eff6ff;\n\t\tborder-bottom: 1px solid #bfdbfe;\n\t\tpadding: 1rem;\n\t}\n\n\t.flowdrop-status--error {\n\t\tbackground-color: #fef2f2;\n\t\tborder-bottom: 1px solid #fecaca;\n\t}\n\n\t.flowdrop-status__content {\n\t\tmax-width: 80rem;\n\t\tmargin: 0 auto;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t}\n\n\t.flowdrop-status__indicator {\n\t\twidth: 0.5rem;\n\t\theight: 0.5rem;\n\t\tborder-radius: 50%;\n\t}\n\n\t.flowdrop-status__indicator--error {\n\t\tbackground-color: #ef4444;\n\t}\n\n\t.flowdrop-btn {\n\t\tpadding: 0.375rem 0.75rem;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 500;\n\t\tcursor: pointer;\n\t\tborder: 1px solid transparent;\n\t\ttransition: all 0.2s ease-in-out;\n\t}\n\n\t.flowdrop-btn--sm {\n\t\tpadding: 0.25rem 0.5rem;\n\t\tfont-size: 0.625rem;\n\t}\n\n\t.flowdrop-btn--outline {\n\t\tbackground-color: transparent;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n\n\t.flowdrop-btn--outline:hover {\n\t\tbackground-color: #f9fafb;\n\t\tborder-color: #9ca3af;\n\t}\n\n\t.flowdrop-btn--primary {\n\t\tbackground-color: #3b82f6;\n\t\tborder-color: #3b82f6;\n\t\tcolor: #ffffff;\n\t}\n\n\t.flowdrop-btn--primary:hover {\n\t\tbackground-color: #2563eb;\n\t\tborder-color: #2563eb;\n\t}\n\n\t.flowdrop-btn--ghost {\n\t\tbackground-color: transparent;\n\t\tborder-color: transparent;\n\t\tcolor: #6b7280;\n\t}\n\n\t.flowdrop-btn--ghost:hover {\n\t\tbackground-color: #f3f4f6;\n\t\tcolor: #374151;\n\t}\n\n\t.flowdrop-flex {\n\t\tdisplay: flex;\n\t}\n\n\t.flowdrop-gap--2 {\n\t\tgap: 0.5rem;\n\t}\n\n\t.flowdrop-gap--3 {\n\t\tgap: 0.75rem;\n\t}\n\n\t.flowdrop-text--sm {\n\t\tfont-size: 0.875rem;\n\t\tline-height: 1.25rem;\n\t}\n\n\t.flowdrop-font--medium {\n\t\tfont-weight: 500;\n\t}\n\n\t@keyframes spin {\n\t\t0% {\n\t\t\ttransform: rotate(0deg);\n\t\t}\n\t\t100% {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t.flowdrop-editor-container {\n\t\tflex: 1;\n\t\tposition: relative;\n\t\tmin-height: 0;\n\t\toverflow: hidden;\n\t\tdisplay: flex;\n\t}\n\n\t.flowdrop-sidebar {\n\t\tbackground-color: #ffffff;\n\t\tborder: 1px solid #e5e7eb;\n\t\toverflow-y: auto;\n\t\toverflow-x: hidden;\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\t/* Custom scrollbar styling */\n\t\tscrollbar-width: thin;\n\t\tscrollbar-color: #cbd5e1 #f1f5f9;\n\t}\n\n\t.flowdrop-sidebar::-webkit-scrollbar {\n\t\twidth: 8px;\n\t}\n\n\t.flowdrop-sidebar::-webkit-scrollbar-track {\n\t\tbackground: #f1f5f9;\n\t\tborder-radius: 4px;\n\t}\n\n\t.flowdrop-sidebar::-webkit-scrollbar-thumb {\n\t\tbackground: #cbd5e1;\n\t\tborder-radius: 4px;\n\t}\n\n\t.flowdrop-sidebar::-webkit-scrollbar-thumb:hover {\n\t\tbackground: #94a3b8;\n\t}\n\n\t.flowdrop-sidebar--left {\n\t\twidth: 320px;\n\t\tmin-width: 320px;\n\t\tborder-right: 1px solid #e5e7eb;\n\t\tbox-shadow: 2px 0 4px rgba(0, 0, 0, 0.1);\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t.flowdrop-sidebar--right {\n\t\tborder-left: 1px solid #e5e7eb;\n\t\tbox-shadow: -2px 0 4px rgba(0, 0, 0, 0.1);\n\t}\n\n\t.flowdrop-editor-main {\n\t\tflex: 1;\n\t\tposition: relative;\n\t\tmin-width: 0;\n\t\toverflow: hidden;\n\t\tbackground-color: #1f2937;\n\t}\n\n\t/* Configuration Sidebar Styles */\n\t.flowdrop-config-sidebar {\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tbackground-color: #ffffff;\n\t}\n\n\t.flowdrop-config-sidebar__header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tpadding: 1rem;\n\t\tborder-bottom: 1px solid #e5e7eb;\n\t\tbackground-color: #f9fafb;\n\t}\n\n\t.flowdrop-config-sidebar__title {\n\t\tmargin: 0;\n\t\tfont-size: 1.125rem;\n\t\tfont-weight: 600;\n\t\tcolor: #111827;\n\t}\n\n\t.flowdrop-config-sidebar__close {\n\t\tbackground: none;\n\t\tborder: none;\n\t\tfont-size: 1.5rem;\n\t\tcursor: pointer;\n\t\tcolor: #6b7280;\n\t\tpadding: 0.25rem;\n\t\tborder-radius: 0.25rem;\n\t\ttransition: color 0.2s;\n\t}\n\n\t.flowdrop-config-sidebar__close:hover {\n\t\tcolor: #374151;\n\t\tbackground-color: #f3f4f6;\n\t}\n\n\t.flowdrop-config-sidebar__content {\n\t\tflex: 1;\n\t\toverflow-y: auto;\n\t\tpadding: 1rem;\n\t}\n\n\t.flowdrop-config-sidebar__section {\n\t\tmargin-bottom: 1.5rem;\n\t}\n\n\t.flowdrop-config-sidebar__section-title {\n\t\tmargin: 0 0 0.75rem 0;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 600;\n\t\tcolor: #374151;\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t}\n\n\t.flowdrop-config-sidebar__details {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.5rem;\n\t}\n\n\t.flowdrop-config-sidebar__detail {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.25rem;\n\t}\n\n\t.flowdrop-config-sidebar__detail-label {\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 500;\n\t\tcolor: #6b7280;\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t}\n\n\t.flowdrop-config-sidebar__detail-value {\n\t\tfont-size: 0.875rem;\n\t\tcolor: #111827;\n\t\tfont-weight: 500;\n\t}\n\n\t.flowdrop-config-sidebar__detail-value-with-copy {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tbackground-color: #f3f4f6;\n\t\tpadding: 0.5rem;\n\t\tborder-radius: 0.375rem;\n\t\tborder: 1px solid #e5e7eb;\n\t}\n\n\t.flowdrop-config-sidebar__detail-value-with-copy .flowdrop-config-sidebar__detail-value {\n\t\tflex: 1;\n\t\tfont-size: 0.8125rem;\n\t\tword-break: break-all;\n\t}\n\n\t.flowdrop-config-sidebar__copy-btn {\n\t\tbackground: white;\n\t\tborder: 1px solid #d1d5db;\n\t\tborder-radius: 0.25rem;\n\t\tpadding: 0.25rem 0.5rem;\n\t\tcursor: pointer;\n\t\tfont-size: 1rem;\n\t\ttransition: all 0.2s;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-config-sidebar__copy-btn:hover {\n\t\tbackground-color: #f9fafb;\n\t\tborder-color: #9ca3af;\n\t\ttransform: scale(1.05);\n\t}\n\n\t.flowdrop-config-sidebar__copy-btn:active {\n\t\ttransform: scale(0.95);\n\t}\n\n\t.flowdrop-config-sidebar__detail-description {\n\t\tmargin: 0;\n\t\tfont-size: 0.875rem;\n\t\tcolor: #6b7280;\n\t\tline-height: 1.4;\n\t}\n</style>\n","<!--\n  Pipeline Status Component\n  Displays workflow execution status using the App component in read-only mode\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport { onMount } from 'svelte';\n\timport App from './App.svelte';\n\timport LogsSidebar from './LogsSidebar.svelte';\n\timport { FlowDropApiClient } from '../api/client.js';\n\timport type { Workflow } from '../types/index.js';\n\timport type { EndpointConfig } from '../config/endpoints.js';\n\n\tinterface Props {\n\t\tpipelineId: string;\n\t\tworkflow: Workflow;\n\t\tapiClient?: FlowDropApiClient;\n\t\tbaseUrl?: string;\n\t\tendpointConfig?: EndpointConfig;\n\t\tonActionsReady?: (\n\t\t\tactions: Array<{\n\t\t\t\tlabel: string;\n\t\t\t\thref: string;\n\t\t\t\ticon?: string;\n\t\t\t\tvariant?: 'primary' | 'secondary' | 'outline';\n\t\t\t\tonclick?: (event: Event) => void;\n\t\t\t}>\n\t\t) => void;\n\t}\n\n\tlet { pipelineId, workflow, apiClient, baseUrl, endpointConfig, onActionsReady }: Props =\n\t\t$props();\n\n\t// Initialize API client if not provided\n\tconst client =\n\t\tapiClient || new FlowDropApiClient(endpointConfig?.baseUrl || baseUrl || '/api/flowdrop');\n\n\t// Pipeline status and job data\n\tlet pipelineStatus = $state<string>('unknown');\n\tlet jobStatusData = $state<{\n\t\tjobs: any[];\n\t\tnode_statuses: Record<string, any>;\n\t\tstatus_summary: {\n\t\t\ttotal: number;\n\t\t\tpending: number;\n\t\t\trunning: number;\n\t\t\tcompleted: number;\n\t\t\tfailed: number;\n\t\t\tcancelled: number;\n\t\t};\n\t}>({\n\t\tjobs: [],\n\t\tnode_statuses: {},\n\t\tstatus_summary: {\n\t\t\ttotal: 0,\n\t\t\tpending: 0,\n\t\t\trunning: 0,\n\t\t\tcompleted: 0,\n\t\t\tfailed: 0,\n\t\t\tcancelled: 0\n\t\t}\n\t});\n\n\t// Node statuses for visual indicators\n\tlet nodeStatuses = $state<Record<string, 'pending' | 'running' | 'completed' | 'error'>>({});\n\n\t// Loading and error states\n\tlet isLoadingJobStatus = $state(false);\n\n\t// Logs sidebar state\n\tlet isLogsSidebarOpen = $state(false);\n\tlet logs = $state<Array<{ level: string; message: string; timestamp: string }>>([]);\n\n\t/**\n\t * Fetch pipeline data including job information\n\t */\n\tasync function fetchPipelineData(): Promise<void> {\n\t\tif (!pipelineId) return;\n\n\t\ttry {\n\t\t\tisLoadingJobStatus = true;\n\t\t\tconst pipelineData = await client.getPipelineData(pipelineId);\n\n\t\t\tpipelineStatus = pipelineData.status;\n\t\t\tjobStatusData = {\n\t\t\t\tjobs: pipelineData.jobs || [],\n\t\t\t\tnode_statuses: pipelineData.node_statuses || {},\n\t\t\t\tstatus_summary: pipelineData.job_status_summary || {\n\t\t\t\t\ttotal: 0,\n\t\t\t\t\tpending: 0,\n\t\t\t\t\trunning: 0,\n\t\t\t\t\tcompleted: 0,\n\t\t\t\t\tfailed: 0,\n\t\t\t\t\tcancelled: 0\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Update node statuses based on job data\n\t\t\tif (jobStatusData.node_statuses) {\n\t\t\t\tconst newNodeStatuses: Record<string, 'pending' | 'running' | 'completed' | 'error'> = {};\n\n\t\t\t\t// Initialize all nodes as pending\n\t\t\t\tif (workflow && workflow.nodes) {\n\t\t\t\t\tworkflow.nodes.forEach((node) => {\n\t\t\t\t\t\tnewNodeStatuses[node.id] = 'pending';\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Override with actual job statuses\n\t\t\t\tfor (const nodeId in jobStatusData.node_statuses) {\n\t\t\t\t\tconst status = jobStatusData.node_statuses[nodeId].status;\n\t\t\t\t\tif (['pending', 'running', 'completed', 'failed', 'cancelled'].includes(status)) {\n\t\t\t\t\t\tnewNodeStatuses[nodeId] = status === 'failed' ? 'error' : status;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnodeStatuses = newNodeStatuses;\n\t\t\t}\n\n\t\t\taddLog('info', `Job status updated: ${jobStatusData.status_summary.total} total jobs`);\n\t\t} catch (error) {\n\t\t\tconsole.error('Failed to fetch pipeline data:', error);\n\t\t\taddLog(\n\t\t\t\t'error',\n\t\t\t\t`Failed to fetch pipeline data: ${error instanceof Error ? error.message : 'Unknown error'}`\n\t\t\t);\n\t\t} finally {\n\t\t\tisLoadingJobStatus = false;\n\t\t}\n\t}\n\n\t/**\n\t * Add a log entry\n\t */\n\tfunction addLog(level: string, message: string): void {\n\t\tlogs = [\n\t\t\t...logs,\n\t\t\t{\n\t\t\t\tlevel,\n\t\t\t\tmessage,\n\t\t\t\ttimestamp: new Date().toISOString()\n\t\t\t}\n\t\t];\n\t}\n\n\t/**\n\t * Toggle logs sidebar\n\t */\n\tfunction toggleLogsSidebar(): void {\n\t\tisLogsSidebarOpen = !isLogsSidebarOpen;\n\t}\n\n\t/**\n\t * Get pipeline actions for the parent navbar\n\t */\n\tfunction getPipelineActions() {\n\t\treturn [\n\t\t\t{\n\t\t\t\tlabel: isLoadingJobStatus ? 'Refreshing...' : 'Refresh Status',\n\t\t\t\thref: '#refresh',\n\t\t\t\ticon: isLoadingJobStatus ? 'mdi:loading' : 'mdi:refresh',\n\t\t\t\tvariant: 'outline' as const,\n\t\t\t\tonclick: (e: Event) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tfetchPipelineData();\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: 'View Logs',\n\t\t\t\thref: '#logs',\n\t\t\t\ticon: 'mdi:file-document-outline',\n\t\t\t\tvariant: 'outline' as const,\n\t\t\t\tonclick: (e: Event) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\ttoggleLogsSidebar();\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t}\n\n\t// Fetch pipeline data on mount\n\tonMount(() => {\n\t\tfetchPipelineData();\n\t\t// Expose actions to parent\n\t\tif (onActionsReady) {\n\t\t\tonActionsReady(getPipelineActions());\n\t\t}\n\n\t\t// Listen for custom events from the layout navbar\n\t\tconst handleRefresh = () => fetchPipelineData();\n\t\tconst handleViewLogs = () => toggleLogsSidebar();\n\n\t\twindow.addEventListener('pipeline-refresh', handleRefresh);\n\t\twindow.addEventListener('pipeline-view-logs', handleViewLogs);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('pipeline-refresh', handleRefresh);\n\t\t\twindow.removeEventListener('pipeline-view-logs', handleViewLogs);\n\t\t};\n\t});\n\n\t// Send pipeline breadcrumbs to layout when they change\n\t$effect(() => {\n\t\tif (pipelineStatus && pipelineId && workflow) {\n\t\t\tconst breadcrumbs = [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Home',\n\t\t\t\t\thref: '/',\n\t\t\t\t\ticon: 'mdi:home'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Workflows',\n\t\t\t\t\thref: '/',\n\t\t\t\t\ticon: 'mdi:view-list'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: workflow.name || 'Workflow',\n\t\t\t\t\thref: `/workflow/${workflow.id}/edit`,\n\t\t\t\t\ticon: 'mdi:workflow'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Pipelines',\n\t\t\t\t\thref: `/workflow/${workflow.id}/pipelines`,\n\t\t\t\t\ticon: 'mdi:source-branch'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: `Pipeline ${pipelineId} - ${pipelineStatus}`,\n\t\t\t\t\ticon: 'mdi:play-circle'\n\t\t\t\t}\n\t\t\t];\n\n\t\t\twindow.dispatchEvent(\n\t\t\t\tnew CustomEvent('page-breadcrumbs-update', {\n\t\t\t\t\tdetail: { breadcrumbs }\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t});\n\n\t// Update actions when loading state changes\n\t$effect(() => {\n\t\tif (onActionsReady) {\n\t\t\tonActionsReady(getPipelineActions());\n\t\t}\n\t});\n\n\t// Auto-refresh pipeline data every 5 seconds when pipeline is running\n\tlet refreshInterval: NodeJS.Timeout | null = null;\n\n\t$effect(() => {\n\t\t// Clear existing interval\n\t\tif (refreshInterval) {\n\t\t\tclearInterval(refreshInterval);\n\t\t\trefreshInterval = null;\n\t\t}\n\n\t\t// Only start polling if pipeline is running\n\t\tif (pipelineStatus === 'running' && pipelineId) {\n\t\t\trefreshInterval = setInterval(() => {\n\t\t\t\tfetchPipelineData();\n\t\t\t}, 5000);\n\t\t}\n\t});\n\n\t// Cleanup on unmount\n\tonMount(() => {\n\t\treturn () => {\n\t\t\tif (refreshInterval) {\n\t\t\t\tclearInterval(refreshInterval);\n\t\t\t\trefreshInterval = null;\n\t\t\t}\n\t\t};\n\t});\n</script>\n\n<div class=\"pipeline-status-container\">\n\t<!-- Workflow Visualization using App component -->\n\t<App\n\t\t{workflow}\n\t\theight=\"100vh\"\n\t\twidth=\"100%\"\n\t\tshowNavbar={false}\n\t\tdisableSidebar={true}\n\t\tlockWorkflow={true}\n\t\treadOnly={true}\n\t\t{nodeStatuses}\n\t\t{pipelineId}\n\t\t{endpointConfig}\n\t/>\n\n\t<!-- Logs Sidebar -->\n\t{#if isLogsSidebarOpen}\n\t\t<LogsSidebar {logs} isOpen={isLogsSidebarOpen} onClose={() => (isLogsSidebarOpen = false)} />\n\t{/if}\n</div>\n\n<style>\n\t.pipeline-status-container {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\theight: 100vh;\n\t\tbackground: #f3f4f6;\n\t}\n</style>\n","/**\n * Configuration utilities for FlowDrop Editor\n */\nimport { createEndpointConfig } from '../config/endpoints.js';\n/**\n * Create default editor features configuration\n */\nexport function createDefaultFeatures() {\n    return {\n        dragAndDrop: true,\n        nodeEditing: true,\n        execution: true,\n        saveWorkflow: true,\n        loadWorkflow: true,\n        undoRedo: true,\n        nodeSearch: true,\n        nodeCategories: true,\n        nodeValidation: true,\n        collaboration: false,\n        templates: false,\n        importExport: false\n    };\n}\n/**\n * Create default UI configuration\n */\nexport function createDefaultUIConfig() {\n    return {\n        showSidebar: true,\n        showToolbar: true,\n        showMinimap: true,\n        showGrid: true,\n        gridSize: 20,\n        nodeSpacing: 100,\n        canvasPadding: 50,\n        navbarHeight: 60, // Default navbar height in pixels (current demo height)\n        zoom: {\n            min: 0.1,\n            max: 2,\n            default: 1\n        },\n        colors: {\n            primary: '#3b82f6',\n            secondary: '#64748b',\n            accent: '#f59e0b',\n            background: '#ffffff',\n            text: '#1f2937'\n        },\n        cssClasses: {}\n    };\n}\n/**\n * Create default API configuration\n */\nexport function createDefaultAPIConfig() {\n    return {\n        endpoints: createEndpointConfig('/api/flowdrop'),\n        timeout: 30000,\n        retry: {\n            enabled: true,\n            maxAttempts: 3,\n            delay: 1000\n        },\n        auth: {\n            type: 'none'\n        },\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    };\n}\n/**\n * Create default execution configuration\n */\nexport function createDefaultExecutionConfig() {\n    return {\n        realTimeUpdates: true,\n        timeout: 300,\n        maxConcurrent: 5,\n        showProgress: true,\n        autoSaveState: true,\n        caching: {\n            enabled: true,\n            ttl: 3600\n        }\n    };\n}\n/**\n * Create default storage configuration\n */\nexport function createDefaultStorageConfig() {\n    return {\n        type: 'api',\n        autoSaveInterval: 5000,\n        maxUndoSteps: 50,\n        keyPrefix: 'flowdrop_'\n    };\n}\n/**\n * Create default workflow editor configuration\n */\nexport function createDefaultConfig(endpointConfig) {\n    return {\n        theme: 'auto',\n        features: createDefaultFeatures(),\n        ui: createDefaultUIConfig(),\n        api: {\n            ...createDefaultAPIConfig(),\n            endpoints: endpointConfig || createEndpointConfig('/api/flowdrop')\n        },\n        ports: {\n            dataTypes: [],\n            compatibilityRules: [],\n            defaultDataType: 'mixed'\n        },\n        execution: createDefaultExecutionConfig(),\n        storage: createDefaultStorageConfig()\n    };\n}\n/**\n * Merge configuration with defaults\n */\nexport function mergeConfig(userConfig, defaultConfig) {\n    return {\n        ...defaultConfig,\n        ...userConfig,\n        features: {\n            ...defaultConfig.features,\n            ...userConfig.features\n        },\n        ui: {\n            ...defaultConfig.ui,\n            ...userConfig.ui,\n            zoom: {\n                ...defaultConfig.ui.zoom,\n                ...userConfig.ui?.zoom\n            },\n            colors: {\n                ...defaultConfig.ui.colors,\n                ...userConfig.ui?.colors\n            },\n            cssClasses: {\n                ...defaultConfig.ui.cssClasses,\n                ...userConfig.ui?.cssClasses\n            }\n        },\n        api: {\n            ...defaultConfig.api,\n            ...userConfig.api,\n            retry: {\n                ...defaultConfig.api.retry,\n                ...userConfig.api?.retry\n            },\n            auth: {\n                ...defaultConfig.api.auth,\n                ...userConfig.api?.auth\n            },\n            headers: {\n                ...defaultConfig.api.headers,\n                ...userConfig.api?.headers\n            },\n            endpoints: {\n                ...defaultConfig.api.endpoints,\n                ...userConfig.api?.endpoints\n            }\n        },\n        execution: {\n            ...defaultConfig.execution,\n            ...userConfig.execution,\n            caching: {\n                ...defaultConfig.execution.caching,\n                ...userConfig.execution?.caching\n            }\n        },\n        storage: {\n            ...defaultConfig.storage,\n            ...userConfig.storage\n        }\n    };\n}\n/**\n * Validate configuration\n */\nexport function validateConfig(config) {\n    const errors = [];\n    if (!config.features) {\n        errors.push('features configuration is required');\n    }\n    if (!config.ui) {\n        errors.push('ui configuration is required');\n    }\n    if (!config.api) {\n        errors.push('api configuration is required');\n    }\n    if (!config.execution) {\n        errors.push('execution configuration is required');\n    }\n    if (!config.storage) {\n        errors.push('storage configuration is required');\n    }\n    // Validate API configuration\n    if (config.api.timeout <= 0) {\n        errors.push('API timeout must be greater than 0');\n    }\n    if (config.api.retry.maxAttempts < 0) {\n        errors.push('Retry max attempts must be non-negative');\n    }\n    // Validate execution configuration\n    if (config.execution.timeout <= 0) {\n        errors.push('Execution timeout must be greater than 0');\n    }\n    if (config.execution.maxConcurrent <= 0) {\n        errors.push('Max concurrent executions must be greater than 0');\n    }\n    // Validate UI configuration\n    if (config.ui.gridSize <= 0) {\n        errors.push('Grid size must be greater than 0');\n    }\n    if (config.ui.nodeSpacing <= 0) {\n        errors.push('Node spacing must be greater than 0');\n    }\n    if (config.ui.zoom.min >= config.ui.zoom.max) {\n        errors.push('Zoom min must be less than zoom max');\n    }\n    return errors;\n}\n/**\n * Create default configuration\n * For library usage, all configuration should be provided at runtime\n * This function is kept for backward compatibility but returns defaults\n *\n * @deprecated Use createDefaultConfig() instead and pass runtime configuration\n */\nexport function createConfigFromEnv() {\n    // Return default configuration without environment variables\n    // Configuration should be provided at runtime via props/parameters\n    const apiBaseUrl = '/api/flowdrop';\n    const endpointConfig = createEndpointConfig(apiBaseUrl);\n    return createDefaultConfig(endpointConfig);\n}\n","/**\n * In-memory workflow storage service\n * This can be replaced with a database implementation later\n */\nimport { v4 as uuidv4 } from 'uuid';\n// In-memory storage\nconst workflows = new Map();\n/**\n * Generate a unique workflow ID using UUID v4\n */\nfunction generateWorkflowId() {\n    return uuidv4();\n}\n/**\n * Save a workflow\n */\nexport async function saveWorkflow(workflow) {\n    const id = generateWorkflowId();\n    const newWorkflow = {\n        ...workflow,\n        id,\n        metadata: {\n            version: '1.0.0',\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString(),\n            ...workflow.metadata\n        }\n    };\n    workflows.set(id, newWorkflow);\n    return newWorkflow;\n}\n/**\n * Update an existing workflow\n */\nexport async function updateWorkflow(id, workflow) {\n    const existing = workflows.get(id);\n    if (!existing) {\n        return null;\n    }\n    const updatedWorkflow = {\n        ...existing,\n        ...workflow,\n        id, // Ensure ID doesn't change\n        metadata: {\n            version: existing.metadata?.version || '1.0.0',\n            createdAt: existing.metadata?.createdAt || new Date().toISOString(),\n            updatedAt: new Date().toISOString(),\n            author: workflow.metadata?.author || existing.metadata?.author,\n            tags: workflow.metadata?.tags || existing.metadata?.tags\n        }\n    };\n    workflows.set(id, updatedWorkflow);\n    return updatedWorkflow;\n}\n/**\n * Get a workflow by ID\n */\nexport async function getWorkflow(id) {\n    return workflows.get(id) || null;\n}\n/**\n * Get all workflows with optional filtering\n */\nexport async function getWorkflows(options) {\n    let filteredWorkflows = Array.from(workflows.values());\n    // Apply search filter\n    if (options?.search) {\n        const searchLower = options.search.toLowerCase();\n        filteredWorkflows = filteredWorkflows.filter((workflow) => workflow.name.toLowerCase().includes(searchLower) ||\n            workflow.description?.toLowerCase().includes(searchLower) ||\n            workflow.metadata?.tags?.some((tag) => tag.toLowerCase().includes(searchLower)));\n    }\n    // Sort by updated date (newest first)\n    filteredWorkflows.sort((a, b) => new Date(b.metadata?.updatedAt || 0).getTime() -\n        new Date(a.metadata?.updatedAt || 0).getTime());\n    // Apply pagination\n    const offset = options?.offset || 0;\n    const limit = options?.limit || filteredWorkflows.length;\n    return filteredWorkflows.slice(offset, offset + limit);\n}\n/**\n * Delete a workflow\n */\nexport async function deleteWorkflow(id) {\n    return workflows.delete(id);\n}\n/**\n * Get workflow count\n */\nexport async function getWorkflowCount() {\n    return workflows.size;\n}\n/**\n * Initialize with sample workflows (for development)\n */\nexport async function initializeSampleWorkflows() {\n    // Only initialize if no workflows exist\n    if (workflows.size > 0) {\n        return;\n    }\n    // Add a sample workflow\n    const sampleWorkflow = {\n        name: 'Sample Chat Workflow',\n        description: 'A simple workflow demonstrating chat completion',\n        nodes: [],\n        edges: [],\n        metadata: {\n            version: '1.0.0',\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString(),\n            author: 'System',\n            tags: ['sample', 'chat']\n        }\n    };\n    await saveWorkflow(sampleWorkflow);\n}\n","/**\n * Global Save Service\n * Provides save and export functionality that can be accessed from anywhere in the app\n * This allows the main navbar to save workflows without being tied to a specific component\n */\nimport { get } from 'svelte/store';\nimport { workflowStore } from '../stores/workflowStore.js';\nimport { workflowApi, setEndpointConfig } from './api.js';\nimport { createEndpointConfig } from '../config/endpoints.js';\nimport { v4 as uuidv4 } from 'uuid';\nimport { apiToasts, workflowToasts, dismissToast } from './toastService.js';\n/**\n * Ensure API configuration is initialized\n * This is needed when the global save function is called from the layout component\n * which doesn't initialize the API configuration like the App component does\n */\nasync function ensureApiConfiguration() {\n    // Check if we need to initialize the API configuration\n    // We'll check if the endpointConfig is already set by importing the api module\n    try {\n        // Import the api module to check if endpointConfig is already set\n        const { getEndpointConfig } = await import('./api.js');\n        // Try to get the current configuration\n        const currentConfig = getEndpointConfig();\n        if (currentConfig && currentConfig.baseUrl) {\n            return;\n        }\n    }\n    catch {\n        // Could not check existing API configuration, initializing\n    }\n    // API configuration is not initialized, so let's initialize it\n    // Use runtime detection to determine appropriate API base URL\n    const apiBaseUrl = (() => {\n        // If we're in development (localhost:5173), use relative path\n        if (typeof window !== 'undefined') {\n            if (window.location.hostname === 'localhost' && window.location.port === '5173') {\n                return '/api/flowdrop';\n            }\n            // Otherwise, use the current domain\n            return `${window.location.protocol}//${window.location.host}/api/flowdrop`;\n        }\n        // Fallback to relative path\n        return '/api/flowdrop';\n    })();\n    const config = createEndpointConfig(apiBaseUrl, {\n        auth: {\n            type: 'none' // No authentication for now\n        },\n        timeout: 10000, // 10 second timeout\n        retry: {\n            enabled: true,\n            maxAttempts: 2,\n            delay: 1000,\n            backoff: 'exponential'\n        }\n    });\n    setEndpointConfig(config);\n}\n/**\n * Global save function that can be called from anywhere\n * Uses the current workflow from the global store\n */\nexport async function globalSaveWorkflow() {\n    let loadingToast;\n    try {\n        // Show loading toast\n        loadingToast = apiToasts.loading('Saving workflow');\n        // Ensure API configuration is initialized\n        await ensureApiConfiguration();\n        // Get current workflow from global store\n        const currentWorkflow = get(workflowStore);\n        if (!currentWorkflow) {\n            if (loadingToast)\n                dismissToast(loadingToast);\n            apiToasts.error('Save workflow', 'No workflow to save');\n            return;\n        }\n        // Determine the workflow ID\n        let workflowId;\n        if (currentWorkflow.id) {\n            workflowId = currentWorkflow.id;\n        }\n        else {\n            workflowId = uuidv4();\n        }\n        // Create workflow object for saving\n        const finalWorkflow = {\n            id: workflowId,\n            name: currentWorkflow.name || 'Untitled Workflow',\n            nodes: currentWorkflow.nodes || [],\n            edges: currentWorkflow.edges || [],\n            metadata: {\n                version: '1.0.0',\n                createdAt: currentWorkflow.metadata?.createdAt || new Date().toISOString(),\n                updatedAt: new Date().toISOString()\n            }\n        };\n        await workflowApi.saveWorkflow(finalWorkflow);\n        // Dismiss loading toast and show success toast\n        if (loadingToast)\n            dismissToast(loadingToast);\n        workflowToasts.saved(finalWorkflow.name);\n    }\n    catch (error) {\n        // Dismiss loading toast and show error toast\n        if (loadingToast)\n            dismissToast(loadingToast);\n        apiToasts.error('Save workflow', error instanceof Error ? error.message : 'Unknown error');\n        throw error;\n    }\n}\n/**\n * Global export function that can be called from anywhere\n * Uses the current workflow from the global store\n */\nexport async function globalExportWorkflow() {\n    try {\n        // Get current workflow from global store\n        const currentWorkflow = get(workflowStore);\n        if (!currentWorkflow) {\n            apiToasts.error('Export workflow', 'No workflow to export');\n            return;\n        }\n        // Create workflow object for export\n        const finalWorkflow = {\n            id: currentWorkflow.id || 'untitled-workflow',\n            name: currentWorkflow.name || 'Untitled Workflow',\n            nodes: currentWorkflow.nodes || [],\n            edges: currentWorkflow.edges || [],\n            metadata: {\n                version: '1.0.0',\n                createdAt: currentWorkflow.metadata?.createdAt || new Date().toISOString(),\n                updatedAt: new Date().toISOString()\n            }\n        };\n        // Create and download the file\n        const dataStr = JSON.stringify(finalWorkflow, null, 2);\n        const dataBlob = new Blob([dataStr], { type: 'application/json' });\n        const url = URL.createObjectURL(dataBlob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `${finalWorkflow.name}.json`;\n        link.click();\n        URL.revokeObjectURL(url);\n        // Show success toast\n        workflowToasts.exported(finalWorkflow.name);\n    }\n    catch (error) {\n        // Export failed\n        apiToasts.error('Export workflow', error instanceof Error ? error.message : 'Unknown error');\n    }\n}\n/**\n * Initialize global save functions on window object for external access\n * This allows the functions to be called from anywhere in the application\n */\nexport function initializeGlobalSave() {\n    if (typeof window !== 'undefined') {\n        // @ts-expect-error - Adding to window for external access\n        window.flowdropGlobalSave = globalSaveWorkflow;\n        // @ts-expect-error - Adding to window for external access\n        window.flowdropGlobalExport = globalExportWorkflow;\n    }\n}\n","/**\n * Default port configuration for FlowDrop\n * Provides backward compatibility and serves as an example configuration\n */\nexport const DEFAULT_PORT_CONFIG = {\n    version: '1.0.0',\n    defaultDataType: 'string',\n    dataTypes: [\n        // Text and basic types\n        {\n            id: 'trigger',\n            name: 'Trigger',\n            description: 'Control flow of the workflow',\n            color: 'var(--color-ref-purple-500)',\n            category: 'basic',\n            enabled: true\n        },\n        // Text and basic types\n        {\n            id: 'string',\n            name: 'String',\n            description: 'Text data',\n            color: 'var(--color-ref-emerald-500)',\n            category: 'basic',\n            enabled: true\n        },\n        // Numeric types\n        {\n            id: 'number',\n            name: 'Number',\n            description: 'Numeric data',\n            color: 'var(--color-ref-blue-600)',\n            category: 'numeric',\n            enabled: true\n        },\n        // Boolean types\n        {\n            id: 'boolean',\n            name: 'Boolean',\n            description: 'True/false values',\n            color: 'var(--color-ref-purple-600)',\n            category: 'logical',\n            enabled: true\n        },\n        // Collection types\n        {\n            id: 'array',\n            name: 'Array',\n            description: 'Ordered list of items',\n            color: 'var(--color-ref-amber-500)',\n            category: 'collection',\n            enabled: true\n        },\n        // Typed arrays\n        {\n            id: 'string[]',\n            name: 'String Array',\n            description: 'Array of strings',\n            color: 'var(--color-ref-emerald-400)',\n            category: 'collection',\n            enabled: true\n        },\n        {\n            id: 'number[]',\n            name: 'Number Array',\n            description: 'Array of numbers',\n            color: 'var(--color-ref-blue-400)',\n            category: 'collection',\n            enabled: true\n        },\n        {\n            id: 'boolean[]',\n            name: 'Boolean Array',\n            description: 'Array of true/false values',\n            color: 'var(--color-ref-purple-400)',\n            category: 'collection',\n            enabled: true\n        },\n        {\n            id: 'json[]',\n            name: 'JSON Array',\n            description: 'Array of JSON objects',\n            color: 'var(--color-ref-orange-400)',\n            category: 'collection',\n            enabled: true\n        },\n        {\n            id: 'file[]',\n            name: 'File Array',\n            description: 'Array of files',\n            color: 'var(--color-ref-red-400)',\n            category: 'collection',\n            enabled: true\n        },\n        {\n            id: 'image[]',\n            name: 'Image Array',\n            description: 'Array of images',\n            color: 'var(--color-ref-pink-400)',\n            category: 'collection',\n            enabled: true\n        },\n        // Complex types\n        {\n            id: 'json',\n            name: 'JSON',\n            description: 'JSON structured data',\n            color: 'var(--color-ref-orange-500)',\n            category: 'complex',\n            enabled: true\n        },\n        // File types\n        {\n            id: 'file',\n            name: 'File',\n            description: 'File data',\n            color: 'var(--color-ref-red-500)',\n            category: 'file',\n            enabled: true\n        },\n        // Media types\n        {\n            id: 'image',\n            name: 'Image',\n            description: 'Image data',\n            color: 'var(--color-ref-pink-500)',\n            category: 'media',\n            enabled: true\n        },\n        {\n            id: 'audio',\n            name: 'Audio',\n            description: 'Audio data',\n            color: 'var(--color-ref-indigo-500)',\n            category: 'media',\n            enabled: true\n        },\n        {\n            id: 'video',\n            name: 'Video',\n            description: 'Video data',\n            color: 'var(--color-ref-teal-500)',\n            category: 'media',\n            enabled: true\n        },\n        // Special types\n        {\n            id: 'url',\n            name: 'URL',\n            description: 'Web address',\n            color: 'var(--color-ref-cyan-500)',\n            category: 'special',\n            enabled: true\n        },\n        {\n            id: 'email',\n            name: 'Email',\n            description: 'Email address',\n            color: 'var(--color-ref-cyan-500)',\n            category: 'special',\n            enabled: true\n        },\n        {\n            id: 'date',\n            name: 'Date',\n            description: 'Date value',\n            color: 'var(--color-ref-lime-500)',\n            category: 'temporal',\n            enabled: true\n        },\n        {\n            id: 'datetime',\n            name: 'DateTime',\n            description: 'Date and time value',\n            color: 'var(--color-ref-lime-500)',\n            category: 'temporal',\n            enabled: true\n        },\n        {\n            id: 'time',\n            name: 'Time',\n            description: 'Time value',\n            color: 'var(--color-ref-lime-500)',\n            category: 'temporal',\n            enabled: true\n        }\n    ],\n    compatibilityRules: [\n    // Pure same-type compatibility: string connects to string, number to number, etc.\n    // No additional rules needed - the system handles same-type connections automatically\n    ]\n};\n","/**\n * Port Configuration API Service\n * Handles fetching port configuration from the backend\n */\nimport { buildEndpointUrl } from '../config/endpoints.js';\nimport { DEFAULT_PORT_CONFIG } from '../config/defaultPortConfig.js';\nimport { FlowDropApiClient } from '../api/client.js';\n/**\n * Fetch port configuration from API\n */\nexport async function fetchPortConfig(endpointConfig) {\n    try {\n        const url = buildEndpointUrl(endpointConfig, endpointConfig.endpoints.portConfig);\n        // Create API client instance\n        const client = new FlowDropApiClient(endpointConfig.baseUrl);\n        // Use the client to fetch port configuration\n        const portConfig = await client.getPortConfig();\n        // Validate the configuration has required fields\n        if (!portConfig.dataTypes || !Array.isArray(portConfig.dataTypes)) {\n            console.warn('Invalid port config received from API, using default');\n            return DEFAULT_PORT_CONFIG;\n        }\n        return portConfig;\n    }\n    catch (error) {\n        console.error('Error fetching port configuration:', error);\n        return DEFAULT_PORT_CONFIG;\n    }\n}\n/**\n * Validate port configuration structure\n */\nexport function validatePortConfig(config) {\n    if (!config || typeof config !== 'object') {\n        return false;\n    }\n    if (!config.dataTypes || !Array.isArray(config.dataTypes)) {\n        return false;\n    }\n    if (!config.defaultDataType || typeof config.defaultDataType !== 'string') {\n        return false;\n    }\n    // Check that all data types have required fields\n    for (const dataType of config.dataTypes) {\n        if (!dataType.id || !dataType.name || !dataType.color) {\n            return false;\n        }\n    }\n    // Check that compatibility rules reference valid data types\n    if (config.compatibilityRules) {\n        // TODO: Fix type definition for PortCompatibilityRule - sourceType and targetType properties missing\n        // const dataTypeIds = new Set(config.dataTypes.map((dt) => dt.id));\n        // for (const rule of config.compatibilityRules) {\n        //   if (!dataTypeIds.has(rule.sourceType) || !dataTypeIds.has(rule.targetType)) {\n        //     console.warn(\" Compatibility rule references unknown data type:\", rule);\n        //     return false;\n        //   }\n        // }\n    }\n    return true;\n}\n","/**\n * Draft Storage Service for FlowDrop\n *\n * Handles saving and loading workflow drafts to/from localStorage.\n * Provides interval-based auto-save functionality.\n *\n * @module services/draftStorage\n */\n/**\n * Default storage key prefix\n */\nconst STORAGE_KEY_PREFIX = \"flowdrop:draft\";\n/**\n * Generate a storage key for a workflow\n *\n * If a custom key is provided, use it directly.\n * Otherwise, generate based on workflow ID or use \"new\" for unsaved workflows.\n *\n * @param workflowId - The workflow ID (optional)\n * @param customKey - Custom storage key provided by enterprise (optional)\n * @returns The storage key to use\n */\nexport function getDraftStorageKey(workflowId, customKey) {\n    if (customKey) {\n        return customKey;\n    }\n    if (workflowId) {\n        return `${STORAGE_KEY_PREFIX}:${workflowId}`;\n    }\n    return `${STORAGE_KEY_PREFIX}:new`;\n}\n/**\n * Save a workflow draft to localStorage\n *\n * @param workflow - The workflow to save\n * @param storageKey - The storage key to use\n * @returns true if saved successfully, false otherwise\n */\nexport function saveDraft(workflow, storageKey) {\n    try {\n        const draft = {\n            workflow,\n            metadata: {\n                savedAt: new Date().toISOString(),\n                workflowId: workflow.id,\n                workflowName: workflow.name\n            }\n        };\n        localStorage.setItem(storageKey, JSON.stringify(draft));\n        return true;\n    }\n    catch (error) {\n        // localStorage might be full or disabled\n        console.warn(\"Failed to save draft to localStorage:\", error);\n        return false;\n    }\n}\n/**\n * Load a workflow draft from localStorage\n *\n * @param storageKey - The storage key to load from\n * @returns The stored draft, or null if not found\n */\nexport function loadDraft(storageKey) {\n    try {\n        const stored = localStorage.getItem(storageKey);\n        if (!stored) {\n            return null;\n        }\n        const draft = JSON.parse(stored);\n        // Validate the draft structure\n        if (!draft.workflow || !draft.metadata) {\n            console.warn(\"Invalid draft structure in localStorage\");\n            return null;\n        }\n        return draft;\n    }\n    catch (error) {\n        console.warn(\"Failed to load draft from localStorage:\", error);\n        return null;\n    }\n}\n/**\n * Delete a workflow draft from localStorage\n *\n * @param storageKey - The storage key to delete\n */\nexport function deleteDraft(storageKey) {\n    try {\n        localStorage.removeItem(storageKey);\n    }\n    catch (error) {\n        console.warn(\"Failed to delete draft from localStorage:\", error);\n    }\n}\n/**\n * Check if a draft exists for a given storage key\n *\n * @param storageKey - The storage key to check\n * @returns true if a draft exists\n */\nexport function hasDraft(storageKey) {\n    try {\n        return localStorage.getItem(storageKey) !== null;\n    }\n    catch {\n        return false;\n    }\n}\n/**\n * Get draft metadata without loading the full workflow\n *\n * Useful for displaying draft information without parsing the entire workflow.\n *\n * @param storageKey - The storage key to check\n * @returns Draft metadata, or null if not found\n */\nexport function getDraftMetadata(storageKey) {\n    const draft = loadDraft(storageKey);\n    return draft?.metadata ?? null;\n}\n/**\n * Draft auto-save manager\n *\n * Handles interval-based auto-saving of workflow drafts.\n * Should be instantiated per FlowDrop instance.\n */\nexport class DraftAutoSaveManager {\n    /** Interval timer ID */\n    intervalId = null;\n    /** Storage key for drafts */\n    storageKey;\n    /** Auto-save interval in milliseconds */\n    interval;\n    /** Whether auto-save is enabled */\n    enabled;\n    /** Function to get current workflow */\n    getWorkflow;\n    /** Function to check if workflow is dirty */\n    isDirty;\n    /** Last saved workflow hash (for change detection) */\n    lastSavedHash = null;\n    /**\n     * Create a new DraftAutoSaveManager\n     *\n     * @param options - Configuration options\n     */\n    constructor(options) {\n        this.storageKey = options.storageKey;\n        this.interval = options.interval;\n        this.enabled = options.enabled;\n        this.getWorkflow = options.getWorkflow;\n        this.isDirty = options.isDirty;\n    }\n    /**\n     * Start auto-save interval\n     *\n     * Will save drafts at the configured interval if there are unsaved changes.\n     */\n    start() {\n        if (!this.enabled || this.intervalId) {\n            return;\n        }\n        this.intervalId = setInterval(() => {\n            this.saveIfDirty();\n        }, this.interval);\n    }\n    /**\n     * Stop auto-save interval\n     */\n    stop() {\n        if (this.intervalId) {\n            clearInterval(this.intervalId);\n            this.intervalId = null;\n        }\n    }\n    /**\n     * Save draft if there are unsaved changes\n     *\n     * @returns true if a draft was saved\n     */\n    saveIfDirty() {\n        if (!this.enabled) {\n            return false;\n        }\n        const workflow = this.getWorkflow();\n        if (!workflow) {\n            return false;\n        }\n        // Only save if dirty\n        if (!this.isDirty()) {\n            return false;\n        }\n        // Check if workflow has actually changed since last save\n        const currentHash = this.hashWorkflow(workflow);\n        if (currentHash === this.lastSavedHash) {\n            return false;\n        }\n        const saved = saveDraft(workflow, this.storageKey);\n        if (saved) {\n            this.lastSavedHash = currentHash;\n        }\n        return saved;\n    }\n    /**\n     * Force save the current workflow as a draft\n     *\n     * Saves regardless of dirty state.\n     *\n     * @returns true if saved successfully\n     */\n    forceSave() {\n        const workflow = this.getWorkflow();\n        if (!workflow) {\n            return false;\n        }\n        const saved = saveDraft(workflow, this.storageKey);\n        if (saved) {\n            this.lastSavedHash = this.hashWorkflow(workflow);\n        }\n        return saved;\n    }\n    /**\n     * Clear the draft from storage\n     */\n    clearDraft() {\n        deleteDraft(this.storageKey);\n        this.lastSavedHash = null;\n    }\n    /**\n     * Mark the current state as saved\n     *\n     * Updates the hash so the next saveIfDirty won't save unless there are new changes.\n     */\n    markAsSaved() {\n        const workflow = this.getWorkflow();\n        if (workflow) {\n            this.lastSavedHash = this.hashWorkflow(workflow);\n        }\n    }\n    /**\n     * Update the storage key\n     *\n     * Useful when the workflow ID changes (e.g., after first save).\n     *\n     * @param newKey - The new storage key\n     */\n    updateStorageKey(newKey) {\n        // If there's an existing draft with the old key, migrate it\n        const existingDraft = loadDraft(this.storageKey);\n        if (existingDraft && this.storageKey !== newKey) {\n            deleteDraft(this.storageKey);\n            saveDraft(existingDraft.workflow, newKey);\n        }\n        this.storageKey = newKey;\n    }\n    /**\n     * Simple hash function for change detection\n     *\n     * Not cryptographically secure, just for detecting changes.\n     *\n     * @param workflow - The workflow to hash\n     * @returns A simple hash string\n     */\n    hashWorkflow(workflow) {\n        // Use a simple stringification for change detection\n        // We only need nodes, edges, name, and description for change detection\n        const toHash = {\n            name: workflow.name,\n            description: workflow.description,\n            nodes: workflow.nodes.map((n) => ({\n                id: n.id,\n                position: n.position,\n                data: n.data\n            })),\n            edges: workflow.edges.map((e) => ({\n                id: e.id,\n                source: e.source,\n                target: e.target,\n                sourceHandle: e.sourceHandle,\n                targetHandle: e.targetHandle\n            }))\n        };\n        return JSON.stringify(toHash);\n    }\n    /**\n     * Check if auto-save is currently running\n     */\n    isRunning() {\n        return this.intervalId !== null;\n    }\n    /**\n     * Get the current storage key\n     */\n    getStorageKey() {\n        return this.storageKey;\n    }\n}\n","/**\n * API Configuration\n * Centralized configuration for all API endpoints\n */\n/**\n * Default API configuration\n * For library usage, configuration should be provided at runtime\n * This provides sensible defaults that can be overridden\n */\nexport const defaultApiConfig = {\n    baseUrl: '/api/flowdrop',\n    endpoints: {\n        workflows: {\n            list: '/workflows',\n            get: '/workflows/{id}',\n            create: '/workflows',\n            update: '/workflows/{id}',\n            delete: '/workflows/{id}',\n            execute: '/workflows/{id}/execute',\n            executionState: '/workflows/{id}/executions/{execution_id}/state'\n        },\n        executions: {\n            active: '/executions/active'\n        },\n        nodes: {\n            list: '/nodes'\n        }\n    }\n};\n/**\n * Get full URL for an endpoint\n */\nexport function getEndpointUrl(config, endpoint, params = {}) {\n    let url = config.baseUrl + endpoint;\n    // Replace path parameters\n    for (const [key, value] of Object.entries(params)) {\n        url = url.replace(`{${key}}`, value);\n    }\n    return url;\n}\n","/**\n * Runtime Configuration Service\n *\n * Provides runtime configuration fetched from the server.\n * This allows the application to use environment variables set at deployment\n * time rather than build time.\n */\n/** Cached runtime configuration */\nlet cachedConfig = null;\n/** Cache timestamp */\nlet cacheTimestamp = 0;\n/** Cache duration in milliseconds (5 minutes) */\nconst CACHE_DURATION = 5 * 60 * 1000;\n/**\n * Fetch runtime configuration from the server\n *\n * @param force - Force fetch even if cached\n * @returns Promise resolving to runtime configuration\n */\nexport async function fetchRuntimeConfig(force = false) {\n    const now = Date.now();\n    // Return cached config if available and not expired\n    if (!force && cachedConfig && now - cacheTimestamp < CACHE_DURATION) {\n        return cachedConfig;\n    }\n    try {\n        const response = await fetch(\"/api/config\");\n        if (!response.ok) {\n            throw new Error(`Failed to fetch runtime config: ${response.statusText}`);\n        }\n        const config = (await response.json());\n        // Update cache\n        cachedConfig = config;\n        cacheTimestamp = now;\n        return config;\n    }\n    catch (error) {\n        console.error(\"Failed to fetch runtime configuration:\", error);\n        // Return default configuration if fetch fails\n        const defaultConfig = {\n            apiBaseUrl: \"/api/flowdrop\",\n            theme: \"auto\",\n            timeout: 30000,\n            authType: \"none\",\n            version: \"1.0.0\",\n            environment: \"production\",\n        };\n        // Cache the default config to avoid repeated failed requests\n        if (!cachedConfig) {\n            cachedConfig = defaultConfig;\n            cacheTimestamp = now;\n        }\n        return cachedConfig || defaultConfig;\n    }\n}\n/**\n * Get runtime configuration synchronously from cache\n *\n * @returns Cached runtime configuration or null if not loaded\n */\nexport function getRuntimeConfig() {\n    return cachedConfig;\n}\n/**\n * Clear the runtime configuration cache\n */\nexport function clearRuntimeConfigCache() {\n    cachedConfig = null;\n    cacheTimestamp = 0;\n}\n/**\n * Initialize runtime configuration\n * Should be called once when the application starts\n *\n * @returns Promise resolving to runtime configuration\n */\nexport async function initRuntimeConfig() {\n    return fetchRuntimeConfig(true);\n}\n","/**\n * WorkflowAdapter - Abstracts SvelteFlow internals for external systems\n *\n * This adapter provides a clean interface for working with workflows without\n * needing to understand SvelteFlow's internal structure. It handles:\n * - Converting between standard workflow format and SvelteFlow format\n * - CRUD operations on workflows, nodes, and edges\n * - Validation and error checking\n * - Import/export functionality\n *\n * The adapter is designed to be used by:\n * - Backend systems that need to process workflows\n * - External applications that want to integrate with FlowDrop\n * - Systems that need to generate or modify workflows programmatically\n */\nimport { v4 as uuidv4 } from 'uuid';\n/**\n * Generate a unique node ID based on node type and existing nodes\n * Format: <node_type>.<number>\n * Example: boolean_gateway.1, calculator.2\n */\nfunction generateStandardNodeId(nodeTypeId, existingNodes) {\n    // Count how many nodes of this type already exist\n    const existingNodeIds = existingNodes\n        .filter((node) => node.data?.metadata?.id === nodeTypeId)\n        .map((node) => node.id);\n    // Extract the numbers from existing IDs with the same prefix\n    const existingNumbers = existingNodeIds\n        .map((id) => {\n        const match = id.match(new RegExp(`^${nodeTypeId}\\\\.(\\\\d+)$`));\n        return match ? parseInt(match[1], 10) : 0;\n    })\n        .filter((num) => num > 0);\n    // Find the next available number (highest + 1)\n    const nextNumber = existingNumbers.length > 0 ? Math.max(...existingNumbers) + 1 : 1;\n    return `${nodeTypeId}.${nextNumber}`;\n}\n/**\n * Workflow Adapter Class\n * Provides a clean API for workflow operations without exposing SvelteFlow internals\n */\nexport class WorkflowAdapter {\n    nodeTypes = [];\n    constructor(nodeTypes = []) {\n        this.nodeTypes = nodeTypes;\n    }\n    /**\n     * Create a new workflow\n     */\n    createWorkflow(name, description) {\n        return {\n            id: uuidv4(),\n            name,\n            description,\n            nodes: [],\n            edges: [],\n            metadata: {\n                version: '1.0.0',\n                createdAt: new Date().toISOString(),\n                updatedAt: new Date().toISOString()\n            }\n        };\n    }\n    /**\n     * Add a node to a workflow\n     */\n    addNode(workflow, nodeType, position, config) {\n        const metadata = this.nodeTypes.find((nt) => nt.id === nodeType);\n        if (!metadata) {\n            throw new Error(`Node type '${nodeType}' not found`);\n        }\n        // Generate node ID based on node type and existing nodes\n        const nodeId = generateStandardNodeId(nodeType, workflow.nodes);\n        const node = {\n            id: nodeId,\n            type: nodeType,\n            position,\n            data: {\n                label: metadata.name,\n                config: config || {},\n                metadata\n            }\n        };\n        workflow.nodes.push(node);\n        workflow.metadata.updatedAt = new Date().toISOString();\n        return node;\n    }\n    /**\n     * Remove a node from a workflow\n     */\n    removeNode(workflow, nodeId) {\n        const nodeIndex = workflow.nodes.findIndex((n) => n.id === nodeId);\n        if (nodeIndex === -1)\n            return false;\n        workflow.nodes.splice(nodeIndex, 1);\n        // Remove associated edges\n        workflow.edges = workflow.edges.filter((edge) => edge.source !== nodeId && edge.target !== nodeId);\n        workflow.metadata.updatedAt = new Date().toISOString();\n        return true;\n    }\n    /**\n     * Update node position\n     */\n    updateNodePosition(workflow, nodeId, position) {\n        const node = workflow.nodes.find((n) => n.id === nodeId);\n        if (!node)\n            return false;\n        node.position = position;\n        workflow.metadata.updatedAt = new Date().toISOString();\n        return true;\n    }\n    /**\n     * Update node configuration\n     */\n    updateNodeConfig(workflow, nodeId, config) {\n        const node = workflow.nodes.find((n) => n.id === nodeId);\n        if (!node)\n            return false;\n        node.data.config = { ...node.data.config, ...config };\n        workflow.metadata.updatedAt = new Date().toISOString();\n        return true;\n    }\n    /**\n     * Add an edge between nodes\n     */\n    addEdge(workflow, sourceNodeId, targetNodeId, sourceHandle, targetHandle) {\n        const edge = {\n            id: uuidv4(),\n            source: sourceNodeId,\n            target: targetNodeId,\n            sourceHandle,\n            targetHandle\n        };\n        workflow.edges.push(edge);\n        workflow.metadata.updatedAt = new Date().toISOString();\n        return edge;\n    }\n    /**\n     * Remove an edge from a workflow\n     */\n    removeEdge(workflow, edgeId) {\n        const edgeIndex = workflow.edges.findIndex((e) => e.id === edgeId);\n        if (edgeIndex === -1)\n            return false;\n        workflow.edges.splice(edgeIndex, 1);\n        workflow.metadata.updatedAt = new Date().toISOString();\n        return true;\n    }\n    /**\n     * Get all nodes of a specific type\n     */\n    getNodesByType(workflow, nodeType) {\n        return workflow.nodes.filter((node) => node.type === nodeType);\n    }\n    /**\n     * Get all edges connected to a node\n     */\n    getNodeEdges(workflow, nodeId) {\n        return workflow.edges.filter((edge) => edge.source === nodeId || edge.target === nodeId);\n    }\n    /**\n     * Get connected nodes (both incoming and outgoing)\n     */\n    getConnectedNodes(workflow, nodeId) {\n        const connectedNodeIds = new Set();\n        workflow.edges.forEach((edge) => {\n            if (edge.source === nodeId) {\n                connectedNodeIds.add(edge.target);\n            }\n            else if (edge.target === nodeId) {\n                connectedNodeIds.add(edge.source);\n            }\n        });\n        return workflow.nodes.filter((node) => connectedNodeIds.has(node.id));\n    }\n    /**\n     * Validate workflow structure\n     */\n    validateWorkflow(workflow) {\n        const errors = [];\n        const warnings = [];\n        // Check for empty workflow\n        if (workflow.nodes.length === 0) {\n            warnings.push('Workflow has no nodes');\n        }\n        // Check for orphaned edges\n        const nodeIds = new Set(workflow.nodes.map((n) => n.id));\n        workflow.edges.forEach((edge) => {\n            if (!nodeIds.has(edge.source)) {\n                errors.push(`Edge ${edge.id} references non-existent source node ${edge.source}`);\n            }\n            if (!nodeIds.has(edge.target)) {\n                errors.push(`Edge ${edge.id} references non-existent target node ${edge.target}`);\n            }\n        });\n        // Check for self-connections\n        workflow.edges.forEach((edge) => {\n            if (edge.source === edge.target) {\n                errors.push(`Node ${edge.source} cannot connect to itself`);\n            }\n        });\n        // Check for duplicate node IDs\n        const nodeIdCounts = new Map();\n        workflow.nodes.forEach((node) => {\n            nodeIdCounts.set(node.id, (nodeIdCounts.get(node.id) || 0) + 1);\n        });\n        nodeIdCounts.forEach((count, id) => {\n            if (count > 1) {\n                errors.push(`Duplicate node ID: ${id}`);\n            }\n        });\n        // Check for duplicate edge IDs\n        const edgeIdCounts = new Map();\n        workflow.edges.forEach((edge) => {\n            edgeIdCounts.set(edge.id, (edgeIdCounts.get(edge.id) || 0) + 1);\n        });\n        edgeIdCounts.forEach((count, id) => {\n            if (count > 1) {\n                errors.push(`Duplicate edge ID: ${id}`);\n            }\n        });\n        return {\n            valid: errors.length === 0,\n            errors,\n            warnings\n        };\n    }\n    /**\n     * Export workflow to JSON\n     */\n    exportWorkflow(workflow) {\n        return JSON.stringify(workflow, null, 2);\n    }\n    /**\n     * Import workflow from JSON\n     */\n    importWorkflow(json) {\n        try {\n            const workflow = JSON.parse(json);\n            // Validate the imported workflow\n            const validation = this.validateWorkflow(workflow);\n            if (!validation.valid) {\n                throw new Error(`Invalid workflow: ${validation.errors.join(', ')}`);\n            }\n            // Update metadata\n            workflow.metadata = {\n                version: workflow.metadata?.version || '1.0.0',\n                createdAt: workflow.metadata?.createdAt || new Date().toISOString(),\n                updatedAt: new Date().toISOString(),\n                author: workflow.metadata?.author,\n                tags: workflow.metadata?.tags\n            };\n            return workflow;\n        }\n        catch (error) {\n            throw new Error(`Failed to import workflow: ${error instanceof Error ? error.message : 'Unknown error'}`);\n        }\n    }\n    /**\n     * Convert SvelteFlow workflow to standard format\n     */\n    fromSvelteFlow(svelteFlowWorkflow) {\n        return {\n            id: svelteFlowWorkflow.id,\n            name: svelteFlowWorkflow.name,\n            description: svelteFlowWorkflow.description,\n            nodes: svelteFlowWorkflow.nodes.map((node) => ({\n                id: node.id,\n                type: node.data.metadata.id,\n                position: node.position,\n                data: {\n                    label: node.data.label,\n                    config: node.data.config,\n                    metadata: node.data.metadata\n                }\n            })),\n            edges: svelteFlowWorkflow.edges.map((edge) => ({\n                id: edge.id,\n                source: edge.source,\n                target: edge.target,\n                sourceHandle: edge.sourceHandle,\n                targetHandle: edge.targetHandle\n            })),\n            metadata: svelteFlowWorkflow.metadata\n        };\n    }\n    /**\n     * Convert standard workflow to SvelteFlow format\n     */\n    toSvelteFlow(workflow) {\n        return {\n            id: workflow.id,\n            name: workflow.name,\n            description: workflow.description,\n            nodes: workflow.nodes.map((node) => ({\n                id: node.id,\n                type: 'workflowNode',\n                position: node.position,\n                deletable: true,\n                data: {\n                    label: node.data.label,\n                    config: node.data.config,\n                    metadata: node.data.metadata,\n                    nodeId: node.id\n                }\n            })),\n            edges: workflow.edges.map((edge) => ({\n                id: edge.id,\n                source: edge.source,\n                target: edge.target,\n                sourceHandle: edge.sourceHandle,\n                targetHandle: edge.targetHandle\n            })),\n            metadata: workflow.metadata\n        };\n    }\n    /**\n     * Get workflow statistics\n     */\n    getWorkflowStats(workflow) {\n        const nodeTypeCounts = new Map();\n        workflow.nodes.forEach((node) => {\n            nodeTypeCounts.set(node.type, (nodeTypeCounts.get(node.type) || 0) + 1);\n        });\n        return {\n            totalNodes: workflow.nodes.length,\n            totalEdges: workflow.edges.length,\n            nodeTypeCounts: Object.fromEntries(nodeTypeCounts),\n            lastModified: workflow.metadata?.updatedAt\n        };\n    }\n    /**\n     * Clone a workflow\n     */\n    cloneWorkflow(workflow, newName) {\n        const cloned = JSON.parse(JSON.stringify(workflow));\n        // Generate new IDs for all nodes and edges\n        const idMapping = new Map();\n        // Count nodes by type to generate proper sequential IDs\n        const nodeTypeCounts = new Map();\n        cloned.nodes.forEach((node) => {\n            const oldId = node.id;\n            const nodeTypeId = node.data.metadata.id;\n            // Get the current count for this node type\n            const currentCount = nodeTypeCounts.get(nodeTypeId) || 0;\n            const newCount = currentCount + 1;\n            nodeTypeCounts.set(nodeTypeId, newCount);\n            // Generate new ID with the sequential number\n            node.id = `${nodeTypeId}.${newCount}`;\n            idMapping.set(oldId, node.id);\n        });\n        cloned.edges.forEach((edge) => {\n            edge.id = uuidv4();\n            edge.source = idMapping.get(edge.source) || edge.source;\n            edge.target = idMapping.get(edge.target) || edge.target;\n        });\n        cloned.id = uuidv4();\n        cloned.name = newName || `${workflow.name} (Copy)`;\n        cloned.metadata = {\n            version: cloned.metadata?.version || '1.0.0',\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString(),\n            author: cloned.metadata?.author,\n            tags: cloned.metadata?.tags\n        };\n        return cloned;\n    }\n}\n","/**\n * FlowDrop API Client\n * Type-safe client for the FlowDrop API\n */\n/**\n * FlowDrop API Client Class\n */\nexport class ApiClient {\n    config;\n    defaultHeaders;\n    constructor(config) {\n        this.config = {\n            timeout: 30000,\n            ...config\n        };\n        this.defaultHeaders = {\n            'Content-Type': 'application/json',\n            ...config.headers\n        };\n        if (config.apiKey) {\n            this.defaultHeaders.Authorization = `Bearer ${config.apiKey}`;\n        }\n    }\n    /**\n     * Make an HTTP request\n     */\n    async request(method, path, data, options = {}) {\n        const url = `${this.config.baseUrl}${path}`;\n        const headers = { ...this.defaultHeaders, ...options.headers };\n        const timeout = options.timeout || this.config.timeout;\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), timeout);\n        try {\n            const response = await fetch(url, {\n                method,\n                headers,\n                body: data ? JSON.stringify(data) : undefined,\n                signal: controller.signal\n            });\n            clearTimeout(timeoutId);\n            if (!response.ok) {\n                const errorData = await response.json().catch(() => ({}));\n                throw new ApiError(response.status, errorData.error || `HTTP ${response.status}`, errorData.code, errorData.details);\n            }\n            return await response.json();\n        }\n        catch (error) {\n            clearTimeout(timeoutId);\n            if (error instanceof ApiError) {\n                throw error;\n            }\n            if (error instanceof Error && error.name === 'AbortError') {\n                throw new ApiError(408, 'Request timeout', 'TIMEOUT');\n            }\n            throw new ApiError(500, error instanceof Error ? error.message : 'Network error', 'NETWORK_ERROR');\n        }\n    }\n    // ===== HEALTH CHECK =====\n    /**\n     * Check API health\n     */\n    async healthCheck() {\n        return this.request('GET', '/health');\n    }\n    // ===== NODE TYPES =====\n    /**\n     * Get all node types\n     */\n    async getNodeTypes(query) {\n        const params = new URLSearchParams();\n        if (query?.category)\n            params.append('category', query.category);\n        if (query?.search)\n            params.append('search', query.search);\n        if (query?.limit)\n            params.append('limit', query.limit.toString());\n        if (query?.offset)\n            params.append('offset', query.offset.toString());\n        const path = `/nodes${params.toString() ? `?${params.toString()}` : ''}`;\n        return this.request('GET', path);\n    }\n    /**\n     * Get node type by ID\n     */\n    async getNodeType(id) {\n        return this.request('GET', `/nodes/${id}`);\n    }\n    // ===== WORKFLOWS =====\n    /**\n     * Get all workflows\n     */\n    async getWorkflows(query) {\n        const params = new URLSearchParams();\n        if (query?.search)\n            params.append('search', query.search);\n        if (query?.tags)\n            params.append('tags', query.tags);\n        if (query?.limit)\n            params.append('limit', query.limit.toString());\n        if (query?.offset)\n            params.append('offset', query.offset.toString());\n        if (query?.sort)\n            params.append('sort', query.sort);\n        if (query?.order)\n            params.append('order', query.order);\n        const path = `/workflows${params.toString() ? `?${params.toString()}` : ''}`;\n        return this.request('GET', path);\n    }\n    /**\n     * Get workflow by ID\n     */\n    async getWorkflow(id) {\n        return this.request('GET', `/workflows/${id}`);\n    }\n    /**\n     * Create a new workflow\n     */\n    async createWorkflow(data) {\n        return this.request('POST', '/workflows', data);\n    }\n    /**\n     * Update workflow\n     */\n    async updateWorkflow(id, data) {\n        return this.request('PUT', `/workflows/${id}`, data);\n    }\n    /**\n     * Delete workflow\n     */\n    async deleteWorkflow(id) {\n        return this.request('DELETE', `/workflows/${id}`);\n    }\n    // ===== WORKFLOW EXECUTION =====\n    /**\n     * Execute workflow\n     */\n    async executeWorkflow(id, data) {\n        return this.request('POST', `/workflows/${id}/execute`, data);\n    }\n    /**\n     * Get execution status\n     */\n    async getExecutionStatus(id) {\n        return this.request('GET', `/executions/${id}`);\n    }\n    /**\n     * Cancel execution\n     */\n    async cancelExecution(id) {\n        return this.request('POST', `/executions/${id}/cancel`);\n    }\n    // ===== IMPORT/EXPORT =====\n    /**\n     * Export workflow\n     */\n    async exportWorkflow(id, format = 'json') {\n        return this.request('GET', `/workflows/${id}/export?format=${format}`);\n    }\n    /**\n     * Import workflow\n     */\n    async importWorkflow(workflow) {\n        return this.request('POST', '/workflows/import', workflow);\n    }\n    // ===== VALIDATION =====\n    /**\n     * Validate workflow\n     */\n    async validateWorkflow(workflow) {\n        return this.request('POST', '/workflows/validate', workflow);\n    }\n    // ===== UTILITY METHODS =====\n    /**\n     * Wait for execution completion\n     */\n    async waitForExecution(id, pollInterval = 1000) {\n        while (true) {\n            const status = await this.getExecutionStatus(id);\n            if (status.data?.status === 'completed' ||\n                status.data?.status === 'failed' ||\n                status.data?.status === 'cancelled') {\n                return status;\n            }\n            await new Promise((resolve) => setTimeout(resolve, pollInterval));\n        }\n    }\n    /**\n     * Get workflows by tag\n     */\n    async getWorkflowsByTag(tag, query) {\n        return this.getWorkflows({ ...query, tags: tag });\n    }\n    /**\n     * Get node types by category\n     */\n    async getNodeTypesByCategory(category, query) {\n        return this.getNodeTypes({ ...query, category });\n    }\n}\n/**\n * API Error Class\n */\nexport class ApiError extends Error {\n    status;\n    code;\n    details;\n    constructor(status, message, code, details) {\n        super(message);\n        this.status = status;\n        this.code = code;\n        this.details = details;\n        this.name = 'ApiError';\n    }\n}\n","/**\n * Svelte App Wrapper for Framework Integration\n *\n * Provides mount/unmount functions for integrating FlowDrop into any web application.\n * Particularly useful for integration with vanilla JS, Drupal, WordPress, or other frameworks.\n *\n * @module svelte-app\n */\nimport { mount, unmount } from \"svelte\";\nimport WorkflowEditor from \"./components/WorkflowEditor.svelte\";\nimport App from \"./components/App.svelte\";\nimport { initializePortCompatibility } from \"./utils/connections.js\";\nimport { DEFAULT_PORT_CONFIG } from \"./config/defaultPortConfig.js\";\nimport { fetchPortConfig } from \"./services/portConfigApi.js\";\nimport { isDirty, markAsSaved, getWorkflow as getWorkflowFromStore, setOnDirtyStateChange, setOnWorkflowChange } from \"./stores/workflowStore.js\";\nimport { DraftAutoSaveManager, getDraftStorageKey } from \"./services/draftStorage.js\";\nimport { mergeFeatures } from \"./types/events.js\";\n/**\n * Mount the full FlowDrop App with navbar, sidebars, and workflow editor\n *\n * Use this for a complete workflow editing experience with all UI components.\n *\n * @param container - DOM element to mount the app into\n * @param options - Configuration options for the app\n * @returns Promise resolving to a MountedFlowDropApp instance\n *\n * @example\n * ```typescript\n * const app = await mountFlowDropApp(document.getElementById(\"editor\"), {\n *   workflow: myWorkflow,\n *   endpointConfig: createEndpointConfig(\"/api/flowdrop\"),\n *   authProvider: new CallbackAuthProvider({\n *     getToken: () => authService.getAccessToken()\n *   }),\n *   eventHandlers: {\n *     onDirtyStateChange: (isDirty) => updateSaveButton(isDirty),\n *     onAfterSave: () => showSuccess(\"Saved!\")\n *   }\n * });\n * ```\n */\nexport async function mountFlowDropApp(container, options = {}) {\n    const { workflow, nodes, endpointConfig, portConfig, height = \"100vh\", width = \"100%\", showNavbar = false, disableSidebar, lockWorkflow, readOnly, nodeStatuses, pipelineId, navbarTitle, navbarActions, authProvider, eventHandlers, features: userFeatures, draftStorageKey: customDraftKey } = options;\n    // Merge features with defaults\n    const features = mergeFeatures(userFeatures);\n    // Create endpoint configuration\n    let config;\n    if (endpointConfig) {\n        // Merge with default configuration to ensure all required endpoints are present\n        const { defaultEndpointConfig } = await import(\"./config/endpoints.js\");\n        config = {\n            ...defaultEndpointConfig,\n            ...endpointConfig,\n            endpoints: {\n                ...defaultEndpointConfig.endpoints,\n                ...endpointConfig.endpoints\n            }\n        };\n    }\n    else {\n        // Use default configuration if none provided\n        const { defaultEndpointConfig } = await import(\"./config/endpoints.js\");\n        config = defaultEndpointConfig;\n    }\n    // Initialize port configuration\n    let finalPortConfig = portConfig;\n    if (!finalPortConfig && config) {\n        // Try to fetch port configuration from API\n        try {\n            finalPortConfig = await fetchPortConfig(config);\n        }\n        catch (error) {\n            console.warn(\"Failed to fetch port config from API, using default:\", error);\n            finalPortConfig = DEFAULT_PORT_CONFIG;\n        }\n    }\n    else if (!finalPortConfig) {\n        finalPortConfig = DEFAULT_PORT_CONFIG;\n    }\n    initializePortCompatibility(finalPortConfig);\n    // Set up event handler callbacks in the store\n    if (eventHandlers?.onDirtyStateChange) {\n        setOnDirtyStateChange(eventHandlers.onDirtyStateChange);\n    }\n    if (eventHandlers?.onWorkflowChange) {\n        setOnWorkflowChange(eventHandlers.onWorkflowChange);\n    }\n    // Create the Svelte App component with configuration\n    const svelteApp = mount(App, {\n        target: container,\n        props: {\n            workflow,\n            nodes,\n            height,\n            width,\n            showNavbar,\n            disableSidebar,\n            lockWorkflow,\n            readOnly,\n            nodeStatuses,\n            pipelineId,\n            navbarTitle,\n            navbarActions,\n            endpointConfig: config,\n            authProvider,\n            eventHandlers,\n            features\n        }\n    });\n    // Set up draft auto-save manager\n    let draftManager = null;\n    if (features.autoSaveDraft) {\n        const storageKey = getDraftStorageKey(workflow?.id, customDraftKey);\n        draftManager = new DraftAutoSaveManager({\n            storageKey,\n            interval: features.autoSaveDraftInterval,\n            enabled: features.autoSaveDraft,\n            getWorkflow: getWorkflowFromStore,\n            isDirty\n        });\n        draftManager.start();\n    }\n    // Store state for cleanup\n    const state = {\n        svelteApp,\n        draftManager,\n        eventHandlers: eventHandlers ?? null\n    };\n    // Create the mounted app interface\n    const mountedApp = {\n        destroy: () => {\n            // Call onBeforeUnmount if provided\n            if (state.eventHandlers?.onBeforeUnmount) {\n                const currentWorkflow = getWorkflowFromStore();\n                if (currentWorkflow) {\n                    state.eventHandlers.onBeforeUnmount(currentWorkflow, isDirty());\n                }\n            }\n            // Stop draft manager\n            if (state.draftManager) {\n                // Save one final draft if dirty\n                if (isDirty()) {\n                    state.draftManager.forceSave();\n                }\n                state.draftManager.stop();\n            }\n            // Clear event callbacks\n            setOnDirtyStateChange(null);\n            setOnWorkflowChange(null);\n            // Unmount Svelte app\n            unmount(state.svelteApp);\n        },\n        isDirty: () => isDirty(),\n        markAsSaved: () => {\n            markAsSaved();\n            // Also update draft manager\n            if (state.draftManager) {\n                state.draftManager.markAsSaved();\n            }\n        },\n        getWorkflow: () => getWorkflowFromStore(),\n        save: async () => {\n            if (typeof window !== \"undefined\" && window.flowdropSave) {\n                await window.flowdropSave();\n            }\n            else {\n                console.warn(\" Save functionality not available\");\n            }\n        },\n        export: () => {\n            if (typeof window !== \"undefined\" && window.flowdropExport) {\n                window.flowdropExport();\n            }\n            else {\n                console.warn(\" Export functionality not available\");\n            }\n        }\n    };\n    return mountedApp;\n}\n/**\n * Mount the WorkflowEditor component in a container\n *\n * Simpler alternative to mountFlowDropApp - only mounts the editor without navbar.\n *\n * @param container - DOM element to mount the editor into\n * @param options - Configuration options\n * @returns Promise resolving to a MountedFlowDropApp instance\n */\nexport async function mountWorkflowEditor(container, options = {}) {\n    const { nodes = [], endpointConfig, portConfig } = options;\n    // Create endpoint configuration\n    let config;\n    if (endpointConfig) {\n        // Merge with default configuration to ensure all required endpoints are present\n        const { defaultEndpointConfig } = await import(\"./config/endpoints.js\");\n        config = {\n            ...defaultEndpointConfig,\n            ...endpointConfig,\n            endpoints: {\n                ...defaultEndpointConfig.endpoints,\n                ...endpointConfig.endpoints\n            }\n        };\n    }\n    else {\n        // Use default configuration if none provided\n        const { defaultEndpointConfig } = await import(\"./config/endpoints.js\");\n        config = defaultEndpointConfig;\n    }\n    // Initialize port configuration\n    let finalPortConfig = portConfig;\n    if (!finalPortConfig && config) {\n        // Try to fetch port configuration from API\n        try {\n            finalPortConfig = await fetchPortConfig(config);\n        }\n        catch (error) {\n            console.warn(\"Failed to fetch port config from API, using default:\", error);\n            finalPortConfig = DEFAULT_PORT_CONFIG;\n        }\n    }\n    else if (!finalPortConfig) {\n        finalPortConfig = DEFAULT_PORT_CONFIG;\n    }\n    initializePortCompatibility(finalPortConfig);\n    // Create the Svelte component\n    const svelteApp = mount(WorkflowEditor, {\n        target: container,\n        props: {\n            nodes,\n            endpointConfig: config\n        }\n    });\n    // Create the mounted app interface (simpler version)\n    const mountedApp = {\n        destroy: () => {\n            unmount(svelteApp);\n        },\n        isDirty: () => isDirty(),\n        markAsSaved: () => markAsSaved(),\n        getWorkflow: () => getWorkflowFromStore(),\n        save: async () => {\n            if (typeof window !== \"undefined\" && window.flowdropSave) {\n                await window.flowdropSave();\n            }\n            else {\n                console.warn(\" Save functionality not available\");\n            }\n        },\n        export: () => {\n            if (typeof window !== \"undefined\" && window.flowdropExport) {\n                window.flowdropExport();\n            }\n            else {\n                console.warn(\" Export functionality not available\");\n            }\n        }\n    };\n    return mountedApp;\n}\n/**\n * Unmount a FlowDrop app\n *\n * @param app - The mounted app to unmount\n */\nexport function unmountFlowDropApp(app) {\n    if (app && typeof app.destroy === \"function\") {\n        app.destroy();\n    }\n}\n/**\n * Unmount a FlowDrop app (alias for backward compatibility)\n *\n * @param app - The mounted app to unmount\n */\nexport function unmountWorkflowEditor(app) {\n    unmountFlowDropApp(app);\n}\n"],"names":["_e","_pending","workflowId","key","_a","_b","_c","_d","_f","ApiError","noop","fallback","array","bold","normal","b","empty","w.state_snapshot_uncloneable","label","stack","source","component","e.lifecycle_outside_component","component_context","effect","root","update","flags","child","e.effect_update_depth_exceeded","j","e","start","get","children","w.svelte_boundary_reset_noop","e.svelte_boundary_reset_onerror","error","derived","previous_batch","v","e.async_derived_orphan","boundary","d","e.derived_references_self","set","e.state_unsafe_mutation","version","prop","_","e.state_descriptors_fixed","s","value","e.state_prototype_fixed","array_prototype","index","w.state_proxy_equality_mismatch","event","e.effect_orphan","e.effect_in_unowned_derived","e.effect_in_teardown","push","teardown","sibling","w.await_reactivity_loss","capture","html","clone","text","events","unmount","anchor_node","w.state_proxy_unmount","w.lifecycle_double_unmount","k","offscreen","branch","snippet","e.invalid_snippet","e.rune_outside_svelte","fn","state","i","item","deferred","node","action","inited","clsx","_clsx","separator","select","w.select_multiple_invalid_value","batches","e.bind_invalid_checkbox_value","listeners","get_store","e.props_rest_readonly","e.props_invalid_value","parseTypenames","T","document","selector","m","Selection","x","datum","constant","selection","attrRemove","attrRemoveNS","attrConstant","attrConstantNS","attrFunction","attrFunctionNS","styleRemove","styleConstant","styleFunction","textConstant","textFunction","create","remove","on","window","sourceEvent","nopropagation","noevent","y","dispatch","defaultFilter","defaultTouchable","filter","drag","nodrag","container","touch","r","h","color","rgb","colorRgb","q","number","string","identity","pop","zoom","S","u","_2","timeout","now","id","schedule","tick","interpolate","interpolateTransform","inherit","style","easeCubicInOut","transform","wheelDelta","extent","w","dragEnable","ConnectionMode","PanOnScrollMode","SelectionMode","ConnectionLineType","MarkerType","Position","distance","x2","y2","xDir","yDir","_options","z","positionAbsolute","panBy","domNode","zoomIdentity","viewport","translateExtent","zoomTransform","ResizeControlVariant","$.prop","$.rest_props","$.derived","$.user_pre_effect","connectingFrom","connectingTo","isPossibleTargetHandle","valid","$.get","onclick","$.snapshot","$.template_effect","$.set_text","$.user_effect","target","$.state","$.set","BezierEdgeInternal","addEdge","addEdgeUtil","updateNodeInternals","updateNodeInternalsSystem","panBySystem","params","onPointerDown","$.bind_this","$.set_attribute","$.fallback","width","height","$.each","$$anchor","$.set_class","$.clsx","trigger","path","$.exclude_from_object","$.proxy","interactive","BackgroundVariant","$0","storage","tag","localStorage","simpleNames","timer","find","send","api","$.attribute_effect","$.html","isDirty","getWorkflow","handleNodeClick","on_keydown","handleDoubleClick","marked","handleKeydown","handleClick","$.set_style","date","$.event","WorkflowNodeComponent","createEndpointConfig","data","endpointConfig","uuidv4","link","workflowChanged","categories","$.bind_value","on_change","on_change_1","handleSave","$.bind_select_value","handleCancel","$.select_option","$.set_value","on_click","on_click_1","toast","clearTimeout","workflowName","getEndpointConfig","$.store_mutate","$.untrack","saveWorkflow","workflowApi","defaultConfig","sampleWorkflow","defaultEndpointConfig","getWorkflowFromStore"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285]}