var FlowDrop=function(e){"use strict";var t,n,o,r,i,a,s,l,d,u,c,p,f,h,g,v,m,y,w,b,x,k,_,S,T,C,E,$,A,N,O,M,I,P,z,D,R,L,j,W,q,F,H,U,V,B,K,Z,Y,X,G,J,Q,ee,te,ne,oe,re=Object.defineProperty,ie=Object.defineProperties,ae=Object.getOwnPropertyDescriptors,se=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,ue=e=>{throw TypeError(e)},ce=(e,t,n)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pe=(e,t)=>{for(var n in t||(t={}))le.call(t,n)&&ce(e,n,t[n]);if(se)for(var n of se(t))de.call(t,n)&&ce(e,n,t[n]);return e},fe=(e,t)=>ie(e,ae(t)),he=(e,t)=>{var n={};for(var o in e)le.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&se)for(var o of se(e))t.indexOf(o)<0&&de.call(e,o)&&(n[o]=e[o]);return n},ge=(e,t,n)=>ce(e,"symbol"!=typeof t?t+"":t,n),ve=(e,t,n)=>t.has(e)||ue("Cannot "+n),me=(e,t,n)=>(ve(e,t,"read from private field"),n?n.call(e):t.get(e)),ye=(e,t,n)=>t.has(e)?ue("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),we=(e,t,n,o)=>(ve(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n),be=(e,t,n)=>(ve(e,t,"access private method"),n),xe=(e,t,n)=>new Promise((o,r)=>{var i=e=>{try{s(n.next(e))}catch(t){r(t)}},a=e=>{try{s(n.throw(e))}catch(t){r(t)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,a);s((n=n.apply(e,t)).next())});class ke{constructor(e){switch(ge(this,"headers"),this.headers={},e.type){case"bearer":e.token&&(this.headers.Authorization=`Bearer ${e.token}`);break;case"api_key":e.apiKey&&(this.headers["X-API-Key"]=e.apiKey);break;case"custom":e.headers&&(this.headers=pe({},e.headers))}}getAuthHeaders(){return xe(this,null,function*(){return this.headers})}isAuthenticated(){return Object.keys(this.headers).length>0}onUnauthorized(){return xe(this,null,function*(){return!1})}onForbidden(){return xe(this,null,function*(){})}}class _e{constructor(e){ge(this,"getToken"),ge(this,"onUnauthorizedCallback"),ge(this,"onForbiddenCallback"),this.getToken=e.getToken,this.onUnauthorizedCallback=e.onUnauthorized,this.onForbiddenCallback=e.onForbidden}getAuthHeaders(){return xe(this,null,function*(){const e=yield this.getToken();return e?{Authorization:`Bearer ${e}`}:{}})}isAuthenticated(){return!0}onUnauthorized(){return xe(this,null,function*(){return!!this.onUnauthorizedCallback&&this.onUnauthorizedCallback()})}onForbidden(){return xe(this,null,function*(){this.onForbiddenCallback&&(yield this.onForbiddenCallback())})}}class Se{getAuthHeaders(){return xe(this,null,function*(){return{}})}isAuthenticated(){return!1}}function Te(e){return e&&"none"!==e.type?new ke(e):new Se}const Ce={autoSaveDraft:!0,autoSaveDraftInterval:3e4,showToasts:!0};function Ee(e){return pe(pe({},Ce),e)}class $e{constructor(e,t){ge(this,"baseUrl"),ge(this,"headers"),this.baseUrl=e.replace(/\/$/,""),this.headers={"Content-Type":"application/json"},t&&(this.headers.Authorization=`Bearer ${t}`)}request(e){return xe(this,arguments,function*(e,t={}){const n=`${this.baseUrl}${e}`,o=pe({headers:this.headers},t);try{const e=yield fetch(n,o);if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);return yield e.json()}catch(r){throw console.error("API request failed:",r),new Error(`API request failed: ${r instanceof Error?r.message:"Unknown error"}`)}})}getAvailableNodes(){return xe(this,null,function*(){const e=yield this.request("/nodes");if(!e.success||!e.data)throw new Error(e.error||"Failed to fetch available nodes");return e.data})}getNodesByCategory(e){return xe(this,null,function*(){const t=yield this.request(`/nodes?category=${encodeURIComponent(e)}`);if(!t.success||!t.data)throw new Error(t.error||"Failed to fetch nodes by category");return t.data})}getNodeMetadata(e){return xe(this,null,function*(){const t=yield this.request(`/nodes/${encodeURIComponent(e)}`);if(!t.success||!t.data)throw new Error(t.error||"Failed to fetch node metadata");return t.data})}saveWorkflow(e){return xe(this,null,function*(){const t=yield this.request("/workflows",{method:"POST",body:JSON.stringify(e)});if(!t.success||!t.data)throw new Error(t.error||"Failed to save workflow");return t.data})}updateWorkflow(e,t){return xe(this,null,function*(){const n=yield this.request(`/workflows/${encodeURIComponent(e)}`,{method:"PUT",body:JSON.stringify(t)});if(!n.success||!n.data)throw new Error(n.error||"Failed to update workflow");return n.data})}loadWorkflow(e){return xe(this,null,function*(){const t=yield this.request(`/workflows/${encodeURIComponent(e)}`);if(!t.success||!t.data)throw new Error(t.error||"Failed to load workflow");return t.data})}listWorkflows(){return xe(this,null,function*(){const e=yield this.request("/workflows");if(!e.success||!e.data)throw new Error(e.error||"Failed to list workflows");return e.data})}deleteWorkflow(e){return xe(this,null,function*(){const t=yield this.request(`/workflows/${encodeURIComponent(e)}`,{method:"DELETE"});if(!t.success)throw new Error(t.error||"Failed to delete workflow")})}executeWorkflow(e,t){return xe(this,null,function*(){const n=yield this.request(`/workflows/${encodeURIComponent(e)}/execute`,{method:"POST",body:JSON.stringify({inputs:t})});if(!n.success||!n.data)throw new Error(n.error||"Failed to execute workflow");return n.data})}getExecutionStatus(e){return xe(this,null,function*(){const t=yield this.request(`/executions/${encodeURIComponent(e)}`);if(!t.success||!t.data)throw new Error(t.error||"Failed to get execution status");return t.data})}cancelExecution(e){return xe(this,null,function*(){const t=yield this.request(`/executions/${encodeURIComponent(e)}/cancel`,{method:"POST"});if(!t.success)throw new Error(t.error||"Failed to cancel execution")})}getExecutionLogs(e){return xe(this,null,function*(){const t=yield this.request(`/executions/${encodeURIComponent(e)}/logs`);if(!t.success||!t.data)throw new Error(t.error||"Failed to get execution logs");return t.data})}validateWorkflow(e){return xe(this,null,function*(){const t=yield this.request("/workflows/validate",{method:"POST",body:JSON.stringify(e)});if(!t.success||!t.data)throw new Error(t.error||"Failed to validate workflow");return t.data})}exportWorkflow(e){return xe(this,null,function*(){const t=yield this.request(`/workflows/${encodeURIComponent(e)}/export`);if(!t.success||!t.data)throw new Error(t.error||"Failed to export workflow");return t.data})}importWorkflow(e){return xe(this,null,function*(){const t=yield this.request("/workflows/import",{method:"POST",body:JSON.stringify({workflow:e})});if(!t.success||!t.data)throw new Error(t.error||"Failed to import workflow");return t.data})}getPortConfig(){return xe(this,null,function*(){const e=yield this.request("/port-config");if(!e.success||!e.data)throw new Error(e.error||"Failed to fetch port configuration");return e.data})}getPipelineData(e){return xe(this,null,function*(){return yield this.request(`/pipeline/${encodeURIComponent(e)}`)})}}const Ae={baseUrl:"/api/flowdrop",endpoints:{nodes:{list:"/nodes",get:"/nodes/{id}",byCategory:"/nodes?category={category}",metadata:"/nodes/{id}/metadata"},portConfig:"/port-config",workflows:{list:"/workflows",get:"/workflows/{id}",create:"/workflows",update:"/workflows/{id}",delete:"/workflows/{id}",validate:"/workflows/validate",export:"/workflows/{id}/export",import:"/workflows/import"},executions:{execute:"/workflows/{id}/execute",status:"/executions/{id}",cancel:"/executions/{id}/cancel",logs:"/executions/{id}/logs",history:"/executions"},pipelines:{list:"/workflow/{workflow_id}/pipelines",get:"/pipeline/{id}",create:"/pipeline",update:"/pipeline/{id}",delete:"/pipeline/{id}",status:"/pipeline/{id}/status",logs:"/pipeline/{id}/logs",execute:"/pipeline/{id}/execute",stop:"/pipeline/{id}/stop"},templates:{list:"/templates",get:"/templates/{id}",create:"/templates",update:"/templates/{id}",delete:"/templates/{id}"},users:{profile:"/users/profile",preferences:"/users/preferences"},system:{health:"/system/health",config:"/system/config",version:"/system/version"}},timeout:3e4,retry:{enabled:!0,maxAttempts:3,delay:1e3,backoff:"exponential"}};function Ne(e,t){return pe(fe(pe({},Ae),{baseUrl:e.replace(/\/$/,"")}),t)}function Oe(e,t,n){let o=t;return n&&Object.entries(n).forEach(([e,t])=>{o=o.replace(`{${e}}`,encodeURIComponent(t))}),o.startsWith("http")||o.startsWith("//")||(o=`${e.baseUrl}${o.startsWith("/")?o:`/${o}`}`),o}function Me(e,t){var n;return(null==(n=e.methods)?void 0:n[t])||"GET"}function Ie(e,t){var n,o,r,i;const a={"Content-Type":"application/json"};"bearer"===(null==(n=e.auth)?void 0:n.type)&&e.auth.token?a.Authorization=`Bearer ${e.auth.token}`:"api_key"===(null==(o=e.auth)?void 0:o.type)&&e.auth.apiKey?a["X-API-Key"]=e.auth.apiKey:"custom"===(null==(r=e.auth)?void 0:r.type)&&e.auth.headers&&Object.assign(a,e.auth.headers);const s=null==(i=e.headers)?void 0:i[t];return s&&Object.assign(a,s),a}const Pe=Object.freeze(Object.defineProperty({__proto__:null,buildEndpointUrl:Oe,createEndpointConfig:Ne,defaultEndpointConfig:Ae,getEndpointHeaders:Ie,getEndpointMethod:Me},Symbol.toStringTag,{value:"Module"}));let ze=class extends Error{constructor(e,t,n,o={}){super(e),ge(this,"status"),ge(this,"errorData"),ge(this,"operation"),this.name="ApiError",this.status=t,this.operation=n,this.errorData=o}};class De{constructor(e,t){ge(this,"config"),ge(this,"authProvider"),this.config=e,this.authProvider=null!=t?t:Te(e.auth)}request(e,t,n){return xe(this,arguments,function*(e,t,n,o={},r="API request"){var i,a,s,l,d,u;const c=Oe(this.config,t,n),p=null!=(i=o.method)?i:Me(this.config,e),f=Ie(this.config,e),h=yield this.authProvider.getAuthHeaders(),g=pe(pe(pe({},f),h),o.headers),v=pe({method:p,headers:g},o);let m=null;const y=(null==(a=this.config.retry)?void 0:a.enabled)?this.config.retry.maxAttempts:1;for(let b=1;b<=y;b++)try{const e=yield fetch(c,v);if(401===e.status){if(this.authProvider.onUnauthorized){if((yield this.authProvider.onUnauthorized())&&b<y){const e=yield this.authProvider.getAuthHeaders();v.headers=pe(pe(pe({},f),e),o.headers);continue}}throw new ze("Unauthorized",401,r,{})}if(403===e.status)throw this.authProvider.onForbidden&&(yield this.authProvider.onForbidden()),new ze("Forbidden",403,r,{});if(!e.ok){const t=yield e.json().catch(()=>({}));throw new ze(null!=(s=t.error)?s:`HTTP ${e.status}: ${e.statusText}`,e.status,r,t)}return yield e.json()}catch(w){if(m=w instanceof ze||w instanceof Error?w:new Error(String(w)),m instanceof ze&&(401===m.status||403===m.status)||b===y)throw console.error(`API request failed after ${b} attempts:`,m),m;const e=null!=(d=null==(l=this.config.retry)?void 0:l.delay)?d:1e3,t="exponential"===(null==(u=this.config.retry)?void 0:u.backoff)?e*Math.pow(2,b-1):e;yield new Promise(e=>setTimeout(e,t))}throw m})}setAuthProvider(e){this.authProvider=e}getAuthProvider(){return this.authProvider}getAvailableNodes(){return xe(this,null,function*(){var e;const t=yield this.request("nodes.list",this.config.endpoints.nodes.list,void 0,{},"fetch available nodes");if(!t.success||!t.data)throw new Error(null!=(e=t.error)?e:"Failed to fetch available nodes");return t.data})}getNodesByCategory(e){return xe(this,null,function*(){var t;const n=yield this.request("nodes.byCategory",this.config.endpoints.nodes.byCategory,{category:e},{},"fetch nodes by category");if(!n.success||!n.data)throw new Error(null!=(t=n.error)?t:"Failed to fetch nodes by category");return n.data})}getNodeMetadata(e){return xe(this,null,function*(){var t;const n=yield this.request("nodes.metadata",this.config.endpoints.nodes.metadata,{id:e},{},"fetch node metadata");if(!n.success||!n.data)throw new Error(null!=(t=n.error)?t:"Failed to fetch node metadata");return n.data})}saveWorkflow(e){return xe(this,null,function*(){var t;const n=yield this.request("workflows.create",this.config.endpoints.workflows.create,void 0,{method:"POST",body:JSON.stringify(e)},"save workflow");if(!n.success||!n.data)throw new Error(null!=(t=n.error)?t:"Failed to save workflow");return n.data})}updateWorkflow(e,t){return xe(this,null,function*(){var n;const o=yield this.request("workflows.update",this.config.endpoints.workflows.update,{id:e},{method:"PUT",body:JSON.stringify(t)},"update workflow");if(!o.success||!o.data)throw new Error(null!=(n=o.error)?n:"Failed to update workflow");return o.data})}loadWorkflow(e){return xe(this,null,function*(){var t;const n=yield this.request("workflows.get",this.config.endpoints.workflows.get,{id:e},{},"load workflow");if(!n.success||!n.data)throw new Error(null!=(t=n.error)?t:"Failed to load workflow");return n.data})}listWorkflows(){return xe(this,null,function*(){var e;const t=yield this.request("workflows.list",this.config.endpoints.workflows.list,void 0,{},"list workflows");if(!t.success||!t.data)throw new Error(null!=(e=t.error)?e:"Failed to list workflows");return t.data})}deleteWorkflow(e){return xe(this,null,function*(){var t;const n=yield this.request("workflows.delete",this.config.endpoints.workflows.delete,{id:e},{method:"DELETE"},"delete workflow");if(!n.success)throw new Error(null!=(t=n.error)?t:"Failed to delete workflow")})}validateWorkflow(e){return xe(this,null,function*(){var t;const n=yield this.request("workflows.validate",this.config.endpoints.workflows.validate,void 0,{method:"POST",body:JSON.stringify(e)},"validate workflow");if(!n.success||!n.data)throw new Error(null!=(t=n.error)?t:"Failed to validate workflow");return n.data})}exportWorkflow(e){return xe(this,null,function*(){var t;const n=yield this.request("workflows.export",this.config.endpoints.workflows.export,{id:e},{},"export workflow");if(!n.success||!n.data)throw new Error(null!=(t=n.error)?t:"Failed to export workflow");return n.data})}importWorkflow(e){return xe(this,null,function*(){var t;const n=yield this.request("workflows.import",this.config.endpoints.workflows.import,void 0,{method:"POST",body:JSON.stringify({workflow:e})},"import workflow");if(!n.success||!n.data)throw new Error(null!=(t=n.error)?t:"Failed to import workflow");return n.data})}executeWorkflow(e,t){return xe(this,null,function*(){var n;const o=yield this.request("executions.execute",this.config.endpoints.executions.execute,{id:e},{method:"POST",body:JSON.stringify({inputs:t})},"execute workflow");if(!o.success||!o.data)throw new Error(null!=(n=o.error)?n:"Failed to execute workflow");return o.data})}getExecutionStatus(e){return xe(this,null,function*(){var t;const n=yield this.request("executions.status",this.config.endpoints.executions.status,{id:e},{},"get execution status");if(!n.success||!n.data)throw new Error(null!=(t=n.error)?t:"Failed to get execution status");return n.data})}cancelExecution(e){return xe(this,null,function*(){var t;const n=yield this.request("executions.cancel",this.config.endpoints.executions.cancel,{id:e},{method:"POST"},"cancel execution");if(!n.success)throw new Error(null!=(t=n.error)?t:"Failed to cancel execution")})}getExecutionLogs(e){return xe(this,null,function*(){var t;const n=yield this.request("executions.logs",this.config.endpoints.executions.logs,{id:e},{},"get execution logs");if(!n.success||!n.data)throw new Error(null!=(t=n.error)?t:"Failed to get execution logs");return n.data})}listTemplates(){return xe(this,null,function*(){var e;const t=yield this.request("templates.list",this.config.endpoints.templates.list,void 0,{},"list templates");if(!t.success||!t.data)throw new Error(null!=(e=t.error)?e:"Failed to list templates");return t.data})}getTemplate(e){return xe(this,null,function*(){var t;const n=yield this.request("templates.get",this.config.endpoints.templates.get,{id:e},{},"get template");if(!n.success||!n.data)throw new Error(null!=(t=n.error)?t:"Failed to get template");return n.data})}getSystemHealth(){return xe(this,null,function*(){var e;const t=yield this.request("system.health",this.config.endpoints.system.health,void 0,{},"get system health");if(!t.success||!t.data)throw new Error(null!=(e=t.error)?e:"Failed to get system health");return t.data})}getSystemConfig(){return xe(this,null,function*(){var e;const t=yield this.request("system.config",this.config.endpoints.system.config,void 0,{},"get system config");if(!t.success||!t.data)throw new Error(null!=(e=t.error)?e:"Failed to get system config");return t.data})}getSystemVersion(){return xe(this,null,function*(){var e;const t=yield this.request("system.version",this.config.endpoints.system.version,void 0,{},"get system version");if(!t.success||!t.data)throw new Error(null!=(e=t.error)?e:"Failed to get system version");return t.data})}}"undefined"!=typeof window&&(null!=(o=(n=null!=(t=window.__svelte)?t:window.__svelte={}).v)?o:n.v=new Set).add("5");const Re=Symbol(),Le=Symbol("filename"),je=null==(i=null==(r=globalThis.process)?void 0:r.env)?void 0:i.NODE_ENV,We=je&&!je.toLowerCase().startsWith("prod");var qe=Array.isArray,Fe=Array.prototype.indexOf,He=Array.from,Ue=Object.defineProperty,Ve=Object.getOwnPropertyDescriptor,Be=Object.getOwnPropertyDescriptors,Ke=Object.prototype,Ze=Array.prototype,Ye=Object.getPrototypeOf,Xe=Object.isExtensible;function Ge(e){return"function"==typeof e}const Je=()=>{};function Qe(e){for(var t=0;t<e.length;t++)e[t]()}function et(){var e,t;return{promise:new Promise((n,o)=>{e=n,t=o}),resolve:e,reject:t}}function tt(e,t,n=!1){return void 0===e?n?t():t:e}function nt(e,t){if(Array.isArray(e))return e;if(void 0===t||!(Symbol.iterator in e))return Array.from(e);const n=[];for(const o of e)if(n.push(o),n.length===t)break;return n}const ot=16,rt=32,it=64,at=128,st=1024,lt=2048,dt=4096,ut=8192,ct=16384,pt=32768,ft=65536,ht=1<<17,gt=1<<18,vt=1<<19,mt=256,yt=512,wt=32768,bt=1<<21,xt=1<<22,kt=1<<23,_t=Symbol("$state"),St=Symbol("legacy props"),Tt=Symbol(""),Ct=Symbol("proxy path"),Et=new class extends Error{constructor(){super(...arguments),ge(this,"name","StaleReactionError"),ge(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function $t(e){if(We){const t=new Error(`lifecycle_outside_component\n\`${e}(...)\` can only be used during component initialisation\nhttps://svelte.dev/e/lifecycle_outside_component`);throw t.name="Svelte error",t}throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function At(){if(We){const e=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw e.name="Svelte error",e}throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}var Nt="font-weight: bold",Ot="font-weight: normal";function Mt(e){We?console.warn(`%c[svelte] state_proxy_equality_mismatch\n%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${e}\` will produce unexpected results\nhttps://svelte.dev/e/state_proxy_equality_mismatch`,Nt,Ot):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function It(e){return e===this.v}function Pt(e,t){return e!=e?t==t:e!==t||null!==e&&"object"==typeof e||"function"==typeof e}function zt(e){return!Pt(e,this.v)}function Dt(e){We?console.warn(`%c[svelte] state_snapshot_uncloneable\n%c${e?`The following properties cannot be cloned with \`$state.snapshot\` — the return value contains the originals:\n\n${e}`:"Value cannot be cloned with `$state.snapshot` — the original value was returned"}\nhttps://svelte.dev/e/state_snapshot_uncloneable`,"font-weight: bold","font-weight: normal"):console.warn("https://svelte.dev/e/state_snapshot_uncloneable")}const Rt=[];function Lt(e,t=!1,n=!1){if(We&&!t){const t=[],o=jt(e,new Map,"",t,null,n);if(1===t.length&&""===t[0])Dt();else if(t.length>0){const e=t.length>10?t.slice(0,7):t.slice(0,10),n=t.length-e.length;let o=e.map(e=>`- <value>${e}`).join("\n");n>0&&(o+=`\n- ...and ${n} more`),Dt(o)}return o}return jt(e,new Map,"",Rt,null,n)}function jt(e,t,n,o,r=null,i=!1){if("object"==typeof e&&null!==e){var a=t.get(e);if(void 0!==a)return a;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(qe(e)){var s=Array(e.length);t.set(e,s),null!==r&&t.set(r,s);for(var l=0;l<e.length;l+=1){var d=e[l];l in e&&(s[l]=jt(d,t,We?`${n}[${l}]`:n,o,null,i))}return s}if(Ye(e)===Ke){for(var u in s={},t.set(e,s),null!==r&&t.set(r,s),e)s[u]=jt(e[u],t,We?`${n}.${u}`:n,o,null,i);return s}if(e instanceof Date)return structuredClone(e);if("function"==typeof e.toJSON&&!i)return jt(e.toJSON(),t,We?`${n}.toJSON()`:n,o,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch(c){return We&&o.push(n),e}}function Wt(e){const t=Error.stackTraceLimit;Error.stackTraceLimit=1/0;let n=Error();Error.stackTraceLimit=t;const o=n.stack;if(!o)return null;const r=o.split("\n"),i=["\n"];for(let a=0;a<r.length;a++){const e=r[a],t=e.replaceAll("\\","/");if("Error"!==e){if(e.includes("validate_each_keys"))return null;t.includes("svelte/src/internal")||t.includes("node_modules/.vite")||i.push(e)}}return 1===i.length?null:(Ue(n,"stack",{value:i.join("\n")}),Ue(n,"name",{value:`${e}Error`}),n)}function qt(e,t){return e.label=t,Ft(e.v,t),e}function Ft(e,t){var n;return null==(n=null==e?void 0:e[Ct])||n.call(e,t),e}let Ht=null;function Ut(e){Ht=e}let Vt=null;function Bt(e){Vt=e}let Kt=null;function Zt(e){Kt=e}function Yt(e){return Qt("getContext").get(e)}function Xt(e,t){return Qt("setContext").set(e,t),t}function Gt(e,t=!1,n){Ht={p:Ht,c:null,e:null,s:e,x:null,l:null},We&&(Ht.function=n,Kt=n)}function Jt(e){var t,n=Ht,o=n.e;if(null!==o)for(var r of(n.e=null,o))Co(r);return Ht=n.p,We&&(Kt=null!=(t=null==Ht?void 0:Ht.function)?t:null),{}}function Qt(e){var t;return null===Ht&&$t(e),null!=(t=Ht.c)?t:Ht.c=new Map(function(e){let t=e.p;for(;null!==t;){const e=t.c;if(null!==e)return e;t=t.p}return null}(Ht)||void 0)}let en=[];function tn(){var e=en;en=[],Qe(e)}function nn(e){if(0===en.length&&!mn){var t=en;queueMicrotask(()=>{t===en&&tn()})}en.push(e)}function on(){for(;en.length>0;)tn()}const rn=new WeakMap;function an(e){var t=Go;if(null===t)return Zo.f|=kt,e;if(We&&e instanceof Error&&!rn.has(e)&&rn.set(e,function(e,t){var n,o,r;const i=Ve(e,"message");if(i&&!i.configurable)return;var a=so?"  ":"\t",s=`\n${a}in ${(null==(n=t.fn)?void 0:n.name)||"<unknown>"}`,l=t.ctx;for(;null!==l;)s+=`\n${a}in ${null==(o=l.function)?void 0:o[Le].split("/").pop()}`,l=l.p;return{message:e.message+`\n${s}\n`,stack:null==(r=e.stack)?void 0:r.split("\n").filter(e=>!e.includes("svelte/src/internal")).join("\n")}}(e,t)),0===(t.f&pt)){if(0===(t.f&at))throw!t.parent&&e instanceof Error&&ln(e),e;t.b.error(e)}else sn(e,t)}function sn(e,t){for(;null!==t;){if(0!==(t.f&at))try{return void t.b.error(e)}catch(n){e=n}t=t.parent}throw e instanceof Error&&ln(e),e}function ln(e){const t=rn.get(e);t&&(Ue(e,"message",{value:t.message}),Ue(e,"stack",{value:t.stack}))}const dn=new Set;let un=null,cn=null,pn=null,fn=new Set,hn=[],gn=null,vn=!1,mn=!1;a=new WeakMap,s=new WeakMap,l=new WeakMap,d=new WeakMap,u=new WeakMap,c=new WeakMap,p=new WeakMap,f=new WeakSet,h=function(e,t){var n;e.f^=st;for(var o=e.first;null!==o;){var r=o.f,i=!!(96&r),a=i&&0!==(r&st)||0!==(r&ut)||this.skipped_effects.has(o);if(0!==(o.f&at)&&(null==(n=o.b)?void 0:n.is_pending())&&(t={parent:t,effect:o,effects:[],render_effects:[],block_effects:[]}),!a&&null!==o.fn){i?o.f^=st:4&r?t.effects.push(o):ur(o)&&(0!==(o.f&ot)&&t.block_effects.push(o),gr(o));var s=o.first;if(null!==s){o=s;continue}}var l=o.parent;for(o=o.next;null===o&&null!==l;)l===t.effect&&(be(this,f,g).call(this,t.effects),be(this,f,g).call(this,t.render_effects),be(this,f,g).call(this,t.block_effects),t=t.parent),o=l.next,l=l.parent}},g=function(e){for(const t of e){(0!==(t.f&lt)?me(this,c):me(this,p)).push(t),xr(t,st)}},v=function(){if(0===me(this,d)){for(const e of me(this,s))e();me(this,s).clear()}0===me(this,l)&&be(this,f,m).call(this)},m=function(){var e,t;if(dn.size>1){me(this,a).clear();var n=pn,o=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const t of dn){if(t===this){o=!1;continue}const n=[];for(const[e,r]of this.current){if(t.current.has(e)){if(!o||r===t.current.get(e))continue;t.current.set(e,r)}n.push(e)}if(0===n.length)continue;const i=[...t.current.keys()].filter(e=>!this.current.has(e));if(i.length>0){const o=new Set,a=new Map;for(const e of n)_n(e,i,o,a);if(hn.length>0){un=t,t.apply();for(const n of hn)be(e=t,f,h).call(e,n,r);hn=[],t.deactivate()}}}un=null,pn=n}this.committed=!0,dn.delete(this),null==(t=me(this,u))||t.resolve()};let yn=class e{constructor(){ye(this,f),ge(this,"committed",!1),ge(this,"current",new Map),ye(this,a,new Map),ye(this,s,new Set),ye(this,l,0),ye(this,d,0),ye(this,u,null),ye(this,c,[]),ye(this,p,[]),ge(this,"skipped_effects",new Set)}process(e){hn=[],cn=null,this.apply();var t={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const n of e)be(this,f,h).call(this,n,t);be(this,f,v).call(this),me(this,d)>0?(be(this,f,g).call(this,t.effects),be(this,f,g).call(this,t.render_effects),be(this,f,g).call(this,t.block_effects)):(cn=this,un=null,kn(t.render_effects),kn(t.effects),cn=null),pn=null}capture(e,t){me(this,a).has(e)||me(this,a).set(e,t),this.current.set(e,e.v),null==pn||pn.set(e,e.v)}activate(){un=this}deactivate(){un=null,pn=null}flush(){if(hn.length>0){if(this.activate(),wn(),null!==un&&un!==this)return}else be(this,f,v).call(this);this.deactivate();for(const e of fn)if(fn.delete(e),e(),null!==un)break}increment(e){we(this,l,me(this,l)+1),e&&we(this,d,me(this,d)+1)}decrement(e){we(this,l,me(this,l)-1),e&&we(this,d,me(this,d)-1);for(const t of me(this,c))xr(t,lt),Tn(t);for(const t of me(this,p))xr(t,dt),Tn(t);we(this,c,[]),we(this,p,[]),this.flush()}add_callback(e){me(this,s).add(e)}settled(){var e;return(null!=(e=me(this,u))?e:we(this,u,et())).promise}static ensure(){if(null===un){const t=un=new e;dn.add(un),mn||e.enqueue(()=>{un===t&&t.flush()})}return un}static enqueue(e){nn(e)}apply(){}};function wn(){var e,t=Uo;vn=!0;try{var n=0;for(Vo(!0);hn.length>0;){var o=yn.ensure();if(n++>1e3){if(We){var r=new Map;for(const t of o.current.keys())for(const[n,o]of null!=(e=t.updated)?e:[]){var i=r.get(n);i||(i={error:o.error,count:0},r.set(n,i)),i.count+=o.count}for(const e of r.values())console.error(e.error)}bn()}o.process(hn),Fn.clear()}}finally{vn=!1,Vo(t),gn=null}}function bn(){try{!function(){if(We){const e=new Error("effect_update_depth_exceeded\nMaximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state\nhttps://svelte.dev/e/effect_update_depth_exceeded");throw e.name="Svelte error",e}throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}()}catch(e){We&&Ue(e,"stack",{value:""}),sn(e,gn)}}let xn=null;function kn(e){var t=e.length;if(0!==t){for(var n=0;n<t;){var o=e[n++];if(!(24576&o.f)&&ur(o)&&(xn=new Set,gr(o),null===o.deps&&null===o.first&&null===o.nodes_start&&(null===o.teardown&&null===o.ac?Ro(o):o.fn=null),(null==xn?void 0:xn.size)>0)){Fn.clear();for(const e of xn){if(24576&e.f)continue;const t=[e];let n=e.parent;for(;null!==n;)xn.has(n)&&(xn.delete(n),t.push(n)),n=n.parent;for(let e=t.length-1;e>=0;e--){const n=t[e];24576&n.f||gr(n)}}xn.clear()}}xn=null}}function _n(e,t,n,o){if(!n.has(e)&&(n.add(e),null!==e.reactions))for(const r of e.reactions){const e=r.f;2&e?_n(r,t,n,o):4194320&e&&0===(e&lt)&&Sn(r,t,o)&&(xr(r,lt),Tn(r))}}function Sn(e,t,n){const o=n.get(e);if(void 0!==o)return o;if(null!==e.deps)for(const r of e.deps){if(t.includes(r))return!0;if(2&r.f&&Sn(r,t,n))return n.set(r,!0),!0}return n.set(e,!1),!1}function Tn(e){for(var t=gn=e;null!==t.parent;){var n=(t=t.parent).f;if(vn&&t===Go&&0!==(n&ot))return;if(96&n){if(0===(n&st))return;t.f^=st}}hn.push(t)}function Cn(e){let t,n=0,o=Vn(0);return We&&qt(o,"createSubscriber version"),()=>{null===Zo||Yo||(mr(o),Ao(()=>(0===n&&(t=wr(()=>e(()=>Gn(o)))),n+=1,()=>{nn(()=>{n-=1,0===n&&(null==t||t(),t=void 0,Gn(o))})})))}}class En{constructor(e,t,n){ye(this,P),ge(this,"parent"),ye(this,y,!1),ye(this,w),ye(this,b,null),ye(this,x),ye(this,k),ye(this,_),ye(this,S,null),ye(this,T,null),ye(this,C,null),ye(this,E,null),ye(this,$,0),ye(this,A,0),ye(this,N,!1),ye(this,O,null),ye(this,M,()=>{me(this,O)&&Yn(me(this,O),me(this,$))}),ye(this,I,Cn(()=>(we(this,O,Vn(me(this,$))),We&&qt(me(this,O),"$effect.pending()"),()=>{we(this,O,null)}))),we(this,w,e),we(this,x,t),we(this,k,n),this.parent=Go.b,we(this,y,!!me(this,x).pending),we(this,_,Oo(()=>{Go.b=this;try{we(this,S,Mo(()=>n(me(this,w))))}catch(e){this.error(e)}me(this,A)>0?be(this,P,D).call(this):we(this,y,!1)},589952))}is_pending(){return me(this,y)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!me(this,x).pending}update_pending_count(e){be(this,P,R).call(this,e),we(this,$,me(this,$)+e),fn.add(me(this,M))}get_effect_pending(){return me(this,I).call(this),mr(me(this,O))}error(e){var t=me(this,x).onerror;let n=me(this,x).failed;if(me(this,N)||!t&&!n)throw e;me(this,S)&&(zo(me(this,S)),we(this,S,null)),me(this,T)&&(zo(me(this,T)),we(this,T,null)),me(this,C)&&(zo(me(this,C)),we(this,C,null));var o=!1,r=!1;const i=()=>{o?We?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",Nt,Ot):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop"):(o=!0,r&&function(){if(We){const e=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw e.name="Svelte error",e}throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}(),yn.ensure(),we(this,$,0),null!==me(this,C)&&Lo(me(this,C),()=>{we(this,C,null)}),we(this,y,this.has_pending_snippet()),we(this,S,be(this,P,z).call(this,()=>(we(this,N,!1),Mo(()=>me(this,k).call(this,me(this,w)))))),me(this,A)>0?be(this,P,D).call(this):we(this,y,!1))};var a=Zo;try{Xo(null),r=!0,null==t||t(e,i),r=!1}catch(s){sn(s,me(this,_)&&me(this,_).parent)}finally{Xo(a)}n&&nn(()=>{we(this,C,be(this,P,z).call(this,()=>{we(this,N,!0);try{return Mo(()=>{n(me(this,w),()=>e,()=>i)})}catch(s){return sn(s,me(this,_).parent),null}finally{we(this,N,!1)}}))})}}function $n(e,t,n){const o=In;if(0!==t.length){var r=un,i=Go,a=function(){var e=Go,t=Zo,n=Ht,o=un;if(We)var r=Vt;return function(){Jo(e),Xo(t),Ut(n),null==o||o.activate(),We&&(On(null),Bt(r))}}();Promise.all(t.map(e=>Pn(e))).then(t=>{a();try{n([...e.map(o),...t])}catch(s){0===(i.f&ct)&&sn(s,i)}null==r||r.deactivate(),An()}).catch(e=>{sn(e,i)})}else n(e.map(o))}function An(){Jo(null),Xo(null),Ut(null),We&&(On(null),Bt(null))}y=new WeakMap,w=new WeakMap,b=new WeakMap,x=new WeakMap,k=new WeakMap,_=new WeakMap,S=new WeakMap,T=new WeakMap,C=new WeakMap,E=new WeakMap,$=new WeakMap,A=new WeakMap,N=new WeakMap,O=new WeakMap,M=new WeakMap,I=new WeakMap,P=new WeakSet,z=function(e){var t=Go,n=Zo,o=Ht;Jo(me(this,_)),Xo(me(this,_)),Ut(me(this,_).ctx);try{return e()}catch(r){return an(r),null}finally{Jo(t),Xo(n),Ut(o)}},D=function(){const e=me(this,x).pending;null!==me(this,S)&&(we(this,E,document.createDocumentFragment()),Ho(me(this,S),me(this,E))),null===me(this,T)&&we(this,T,Mo(()=>e(me(this,w))))},R=function(e){var t;this.has_pending_snippet()?(we(this,A,me(this,A)+e),0===me(this,A)&&(we(this,y,!1),me(this,T)&&Lo(me(this,T),()=>{we(this,T,null)}),me(this,E)&&(me(this,w).before(me(this,E)),we(this,E,null)))):this.parent&&be(t=this.parent,P,R).call(t,e)};let Nn=null;function On(e){Nn=e}const Mn=new Set;function In(e){var t=2050,n=null!==Zo&&2&Zo.f?Zo:null;null===Go||null!==n&&0!==(n.f&mt)?t|=mt:Go.f|=vt;return{ctx:Ht,deps:null,effects:null,equals:It,f:t,fn:e,reactions:null,rv:0,v:Re,wv:0,parent:null!=n?n:Go,ac:null}}function Pn(e,t){let n=Go;null===n&&function(){if(We){const e=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw e.name="Svelte error",e}throw new Error("https://svelte.dev/e/async_derived_orphan")}();var o=n.b,r=void 0,i=Vn(Re),a=!Zo,s=new Map;return function(e){_o(4718592,e,!0)}(()=>{var t;We&&(Nn=Go);var n=et();r=n.promise;try{Promise.resolve(e()).then(n.resolve,n.reject).then(()=>{l===un&&l.committed&&l.deactivate(),An()})}catch(c){n.reject(c),An()}We&&(Nn=null);var l=un;if(a){var d=!o.is_pending();o.update_pending_count(1),l.increment(d),null==(t=s.get(l))||t.reject(Et),s.delete(l),s.set(l,n)}const u=(e,t=void 0)=>{if(Nn=null,l.activate(),t)t!==Et&&(i.f|=kt,Yn(i,t));else{0!==(i.f&kt)&&(i.f^=kt),Yn(i,e);for(const[e,t]of s){if(s.delete(e),e===l)break;t.reject(Et)}}a&&(o.update_pending_count(-1),l.decrement(d))};n.promise.then(u,e=>u(null,e||"unknown"))}),So(()=>{for(const e of s.values())e.reject(Et)}),We&&(i.f|=xt),new Promise(e=>{!function t(n){function o(){n===r?e(i):t(r)}n.then(o,o)}(r)})}function zn(e){const t=In(e);return er(t),t}function Dn(e){const t=In(e);return t.equals=zt,t}function Rn(e){var t=e.effects;if(null!==t){e.effects=null;for(var n=0;n<t.length;n+=1)zo(t[n])}}let Ln=[];function jn(e){var t,n=Go;if(Jo(function(e){for(var t=e.parent;null!==t;){if(!(2&t.f))return t;t=t.parent}return null}(e)),We){let o=qn;Hn(new Set);try{Ln.includes(e)&&function(){if(We){const e=new Error("derived_references_self\nA derived value cannot reference itself recursively\nhttps://svelte.dev/e/derived_references_self");throw e.name="Svelte error",e}throw new Error("https://svelte.dev/e/derived_references_self")}(),Ln.push(e),e.f&=-32769,Rn(e),t=pr(e)}finally{Jo(n),Hn(o),Ln.pop()}}else try{e.f&=-32769,Rn(e),t=pr(e)}finally{Jo(n)}return t}function Wn(e){var t=jn(e);(e.equals(t)||(e.v=t,e.wv=dr()),Bo)||(null!==pn?pn.set(e,e.v):xr(e,!lr&&0===(e.f&mt)||null===e.deps?st:dt))}let qn=new Set;const Fn=new Map;function Hn(e){qn=e}let Un=!1;function Vn(e,t){return{f:0,v:e,reactions:null,equals:It,rv:0,wv:0}}function Bn(e,t){const n=Vn(e);return er(n),n}function Kn(e,t=!1,n=!0){const o=Vn(e);return t||(o.equals=zt),o}function Zn(e,t,n=!1){null===Zo||Yo&&0===(Zo.f&ht)||!(4325394&Zo.f)||(null==Qo?void 0:Qo.includes(e))||function(){if(We){const e=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw e.name="Svelte error",e}throw new Error("https://svelte.dev/e/state_unsafe_mutation")}();let o=n?eo(t):t;return We&&Ft(o,e.label),Yn(e,o)}function Yn(e,t){if(!e.equals(t)){var n=e.v;if(Bo?Fn.set(e,t):Fn.set(e,n),e.v=t,yn.ensure().capture(e,n),We){if(null!==Go){const t=Wt("UpdatedAt");if(null!==t){null!=e.updated||(e.updated=new Map);let n=e.updated.get(t.stack);n||(n={error:t,count:0},e.updated.set(t.stack,n)),n.count++}}null!==Go&&(e.set_during_effect=!0)}2&e.f&&(0!==(e.f&lt)&&jn(e),xr(e,0===(e.f&mt)?st:dt)),e.wv=dr(),Jn(e,lt),null===Go||0===(Go.f&st)||96&Go.f||(null===or?function(e){or=e}([e]):or.push(e)),We&&qn.size>0&&!Un&&Xn()}return t}function Xn(){Un=!1;const e=Array.from(qn);for(const t of e)0!==(t.f&st)&&xr(t,dt),ur(t)&&gr(t);qn.clear()}function Gn(e){Zn(e,e.v+1)}function Jn(e,t){var n=e.reactions;if(null!==n)for(var o=n.length,r=0;r<o;r++){var i=n[r],a=i.f;if(We&&0!==(a&ht))qn.add(i);else{var s=0===(a&lt);s&&xr(i,t),2&a?0===(a&wt)&&(i.f|=wt,Jn(i,dt)):s&&(0!==(a&ot)&&null!==xn&&xn.add(i),Tn(i))}}}const Qn=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function eo(e){if("object"!=typeof e||null===e||_t in e)return e;const t=Ye(e);if(t!==Ke&&t!==Ze)return e;var n=new Map,o=qe(e),r=Bn(0),i=ar,a=e=>{if(ar===i)return e();var t=Zo,n=ar;Xo(null),sr(i);var o=e();return Xo(t),sr(n),o};o&&(n.set("length",Bn(e.length)),We&&(e=new Proxy(e,{get(e,t,n){var o=Reflect.get(e,t,n);return ro.has(t)?function(...e){Un=!0;var t=o.apply(this,e);return Xn(),t}:o}})));var s="";let l=!1;function d(e){if(!l){l=!0,qt(r,`${s=e} version`);for(const[e,t]of n)qt(t,to(s,e));l=!1}}return new Proxy(e,{defineProperty(e,t,o){"value"in o&&!1!==o.configurable&&!1!==o.enumerable&&!1!==o.writable||function(){if(We){const e=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw e.name="Svelte error",e}throw new Error("https://svelte.dev/e/state_descriptors_fixed")}();var r=n.get(t);return void 0===r?r=a(()=>{var e=Bn(o.value);return n.set(t,e),We&&"string"==typeof t&&qt(e,to(s,t)),e}):Zn(r,o.value,!0),!0},deleteProperty(e,t){var o=n.get(t);if(void 0===o){if(t in e){const e=a(()=>Bn(Re));n.set(t,e),Gn(r),We&&qt(e,to(s,t))}}else Zn(o,Re),Gn(r);return!0},get(t,o,r){var i;if(o===_t)return e;if(We&&o===Ct)return d;var l=n.get(o),u=o in t;if(void 0!==l||u&&!(null==(i=Ve(t,o))?void 0:i.writable)||(l=a(()=>{var e=Bn(eo(u?t[o]:Re));return We&&qt(e,to(s,o)),e}),n.set(o,l)),void 0!==l){var c=mr(l);return c===Re?void 0:c}return Reflect.get(t,o,r)},getOwnPropertyDescriptor(e,t){var o=Reflect.getOwnPropertyDescriptor(e,t);if(o&&"value"in o){var r=n.get(t);r&&(o.value=mr(r))}else if(void 0===o){var i=n.get(t),a=null==i?void 0:i.v;if(void 0!==i&&a!==Re)return{enumerable:!0,configurable:!0,value:a,writable:!0}}return o},has(e,t){var o;if(t===_t)return!0;var r=n.get(t),i=void 0!==r&&r.v!==Re||Reflect.has(e,t);if((void 0!==r||null!==Go&&(!i||(null==(o=Ve(e,t))?void 0:o.writable)))&&(void 0===r&&(r=a(()=>{var n=Bn(i?eo(e[t]):Re);return We&&qt(n,to(s,t)),n}),n.set(t,r)),mr(r)===Re))return!1;return i},set(e,t,i,l){var d,u=n.get(t),c=t in e;if(o&&"length"===t)for(var p=i;p<u.v;p+=1){var f=n.get(p+"");void 0!==f?Zn(f,Re):p in e&&(f=a(()=>Bn(Re)),n.set(p+"",f),We&&qt(f,to(s,p)))}void 0===u?c&&!(null==(d=Ve(e,t))?void 0:d.writable)||(u=a(()=>Bn(void 0)),We&&qt(u,to(s,t)),Zn(u,eo(i)),n.set(t,u)):(c=u.v!==Re,Zn(u,a(()=>eo(i))));var h=Reflect.getOwnPropertyDescriptor(e,t);if((null==h?void 0:h.set)&&h.set.call(l,i),!c){if(o&&"string"==typeof t){var g=n.get("length"),v=Number(t);Number.isInteger(v)&&v>=g.v&&Zn(g,v+1)}Gn(r)}return!0},ownKeys(e){mr(r);var t=Reflect.ownKeys(e).filter(e=>{var t=n.get(e);return void 0===t||t.v!==Re});for(var[o,i]of n)i.v===Re||o in e||t.push(o);return t},setPrototypeOf(){!function(){if(We){const e=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw e.name="Svelte error",e}throw new Error("https://svelte.dev/e/state_prototype_fixed")}()}})}function to(e,t){var n;return"symbol"==typeof t?`${e}[Symbol(${null!=(n=t.description)?n:""})]`:Qn.test(t)?`${e}.${t}`:/^\d+$/.test(t)?`${e}[${t}]`:`${e}['${t}']`}function no(e){try{if(null!==e&&"object"==typeof e&&_t in e)return e[_t]}catch(t){}return e}function oo(e,t){return Object.is(no(e),no(t))}const ro=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);var io,ao,so,lo,uo;function co(){if(void 0===io){io=window,ao=document,so=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;lo=Ve(t,"firstChild").get,uo=Ve(t,"nextSibling").get,Xe(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Xe(n)&&(n.__t=void 0),We&&(e.__svelte_meta=null,function(){const e=Array.prototype,t=Array.__svelte_cleanup;t&&t();const{indexOf:n,lastIndexOf:o,includes:r}=e;e.indexOf=function(e,t){const o=n.call(this,e,t);if(-1===o)for(let n=null!=t?t:0;n<this.length;n+=1)if(no(this[n])===e){Mt("array.indexOf(...)");break}return o},e.lastIndexOf=function(e,t){const n=o.call(this,e,null!=t?t:this.length-1);if(-1===n)for(let o=0;o<=(null!=t?t:this.length-1);o+=1)if(no(this[o])===e){Mt("array.lastIndexOf(...)");break}return n},e.includes=function(e,t){const n=r.call(this,e,t);if(!n)for(let o=0;o<this.length;o+=1)if(no(this[o])===e){Mt("array.includes(...)");break}return n},Array.__svelte_cleanup=()=>{e.indexOf=n,e.lastIndexOf=o,e.includes=r}}())}}function po(e=""){return document.createTextNode(e)}function fo(e){return lo.call(e)}function ho(e){return uo.call(e)}function go(e,t){return fo(e)}function vo(e,t=!1){var n=fo(e);return n instanceof Comment&&""===n.data?ho(n):n}function mo(e,t=1,n=!1){let o=e;for(;t--;)o=ho(o);return o}function yo(e,t){if(t){const t=document.body;e.autofocus=!0,nn(()=>{document.activeElement===t&&e.focus()})}}let wo=!1;function bo(e){var t=Zo,n=Go;Xo(null),Jo(null);try{return e()}finally{Xo(t),Jo(n)}}function xo(e,t,n,o=n){e.addEventListener(t,()=>bo(n));const r=e.__on_r;e.__on_r=r?()=>{r(),o(!0)}:()=>o(!0),wo||(wo=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)null==(t=n.__on_r)||t.call(n)})},{capture:!0}))}function ko(e){null===Go&&null===Zo&&function(e){if(We){const t=new Error(`effect_orphan\n\`${e}\` can only be used inside an effect (e.g. during component initialisation)\nhttps://svelte.dev/e/effect_orphan`);throw t.name="Svelte error",t}throw new Error("https://svelte.dev/e/effect_orphan")}(e),null!==Zo&&0!==(Zo.f&mt)&&null===Go&&function(){if(We){const e=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw e.name="Svelte error",e}throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}(),Bo&&function(e){if(We){const t=new Error(`effect_in_teardown\n\`${e}\` cannot be used inside an effect cleanup function\nhttps://svelte.dev/e/effect_in_teardown`);throw t.name="Svelte error",t}throw new Error("https://svelte.dev/e/effect_in_teardown")}(e)}function _o(e,t,n,o=!0){var r,i=Go;if(We)for(;null!==i&&0!==(i.f&ht);)i=i.parent;null!==i&&0!==(i.f&ut)&&(e|=ut);var a={ctx:Ht,deps:null,nodes_start:null,nodes_end:null,f:e|lt,first:null,fn:t,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(We&&(a.component_function=Kt),n)try{gr(a),a.f|=pt}catch(d){throw zo(a),d}else null!==t&&Tn(a);if(o){var s=a;if(n&&null===s.deps&&null===s.teardown&&null===s.nodes_start&&s.first===s.last&&0===(s.f&vt)&&(s=s.first),null!==s&&(s.parent=i,null!==i&&function(e,t){var n=t.last;null===n?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}(s,i),null!==Zo&&2&Zo.f&&0===(e&it))){var l=Zo;(null!=(r=l.effects)?r:l.effects=[]).push(s)}}return a}function So(e){const t=_o(8,null,!1);return xr(t,st),t.teardown=e,t}function To(e){var t;ko("$effect"),We&&Ue(e,"name",{value:"$effect"});var n=Go.f;if(!(!Zo&&0!==(n&rt)&&0===(n&pt)))return Co(e);var o=Ht;(null!=(t=o.e)?t:o.e=[]).push(e)}function Co(e){return _o(1048580,e,!1)}function Eo(e){yn.ensure();const t=_o(524352,e,!0);return()=>{zo(t)}}function $o(e){return _o(4,e,!1)}function Ao(e,t=0){return _o(8|t,e,!0)}function No(e,t=[],n=[]){$n(t,n,t=>{_o(8,()=>e(...t.map(mr)),!0)})}function Oo(e,t=0){var n=_o(ot|t,e,!0);return We&&(n.dev_stack=Vt),n}function Mo(e,t=!0){return _o(524320,e,!0,t)}function Io(e){var t=e.teardown;if(null!==t){const e=Bo,n=Zo;Ko(!0),Xo(null);try{t.call(null)}finally{Ko(e),Xo(n)}}}function Po(e,t=!1){var n=e.first;for(e.first=e.last=null;null!==n;){const e=n.ac;null!==e&&bo(()=>{e.abort(Et)});var o=n.next;0!==(n.f&it)?n.parent=null:zo(n,t),n=o}}function zo(e,t=!0){var n=!1;!t&&0===(e.f&gt)||null===e.nodes_start||null===e.nodes_end||(Do(e.nodes_start,e.nodes_end),n=!0),Po(e,t&&!n),hr(e,0),xr(e,ct);var o=e.transitions;if(null!==o)for(const i of o)i.stop();Io(e);var r=e.parent;null!==r&&null!==r.first&&Ro(e),We&&(e.component_function=null),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Do(e,t){for(;null!==e;){var n=e===t?null:ho(e);e.remove(),e=n}}function Ro(e){var t=e.parent,n=e.prev,o=e.next;null!==n&&(n.next=o),null!==o&&(o.prev=n),null!==t&&(t.first===e&&(t.first=o),t.last===e&&(t.last=n))}function Lo(e,t,n=!0){var o=[];Wo(e,o,!0),jo(o,()=>{n&&zo(e),t&&t()})}function jo(e,t){var n=e.length;if(n>0){var o=()=>--n||t();for(var r of e)r.out(o)}else t()}function Wo(e,t,n){if(0===(e.f&ut)){if(e.f^=ut,null!==e.transitions)for(const o of e.transitions)(o.is_global||n)&&t.push(o);for(var o=e.first;null!==o;){var r=o.next;Wo(o,t,!!(0!==(o.f&ft)||0!==(o.f&rt))&&n),o=r}}}function qo(e){Fo(e,!0)}function Fo(e,t){if(0!==(e.f&ut)){e.f^=ut,0===(e.f&st)&&(xr(e,lt),Tn(e));for(var n=e.first;null!==n;){var o=n.next;Fo(n,!!(0!==(n.f&ft)||0!==(n.f&rt))&&t),n=o}if(null!==e.transitions)for(const n of e.transitions)(n.is_global||t)&&n.in()}}function Ho(e,t){for(var n=e.nodes_start,o=e.nodes_end;null!==n;){var r=n===o?null:ho(n);t.append(n),n=r}}let Uo=!1;function Vo(e){Uo=e}let Bo=!1;function Ko(e){Bo=e}let Zo=null,Yo=!1;function Xo(e){Zo=e}let Go=null;function Jo(e){Go=e}let Qo=null;function er(e){null!==Zo&&(null===Qo?Qo=[e]:Qo.push(e))}let tr=null,nr=0,or=null;let rr=1,ir=0,ar=ir;function sr(e){ar=e}let lr=!1;function dr(){return++rr}function ur(e){var t,n,o=e.f;if(0!==(o&lt))return!0;if(0!==(o&dt)){var r=e.deps,i=0!==(o&mt);if(2&o&&(e.f&=-32769),null!==r){var a,s,l=0!==(o&yt),d=i&&null!==Go&&!lr,u=r.length;if((l||d)&&(null===Go||0===(Go.f&ct))){var c=e,p=c.parent;for(a=0;a<u;a++)s=r[a],!l&&(null==(t=null==s?void 0:s.reactions)?void 0:t.includes(c))||(null!=(n=s.reactions)?n:s.reactions=[]).push(c);l&&(c.f^=yt),d&&null!==p&&0===(p.f&mt)&&(c.f^=mt)}for(a=0;a<u;a++)if(ur(s=r[a])&&Wn(s),s.wv>e.wv)return!0}i&&(null===Go||lr)||xr(e,st)}return!1}function cr(e,t,n=!0){var o=e.reactions;if(null!==o&&!(null==Qo?void 0:Qo.includes(e)))for(var r=0;r<o.length;r++){var i=o[r];2&i.f?cr(i,t,!1):t===i&&(n?xr(i,lt):0!==(i.f&st)&&xr(i,dt),Tn(i))}}function pr(e){var t,n,o=tr,r=nr,i=or,a=Zo,s=lr,l=Qo,d=Ht,u=Yo,c=ar,p=e.f;tr=null,nr=0,or=null,lr=0!==(p&mt)&&(Yo||!Uo||null===Zo),Zo=96&p?null:e,Qo=null,Ut(e.ctx),Yo=!1,ar=++ir,null!==e.ac&&(bo(()=>{e.ac.abort(Et)}),e.ac=null);try{e.f|=bt;var f=(0,e.fn)(),h=e.deps;if(null!==tr){var g;if(hr(e,nr),null!==h&&nr>0)for(h.length=nr+tr.length,g=0;g<tr.length;g++)h[nr+g]=tr[g];else e.deps=h=tr;if(!lr||2&p&&null!==e.reactions)for(g=nr;g<h.length;g++)(null!=(n=(t=h[g]).reactions)?n:t.reactions=[]).push(e)}else null!==h&&nr<h.length&&(hr(e,nr),h.length=nr);if(!(null===or||Yo||null===h||6146&e.f))for(g=0;g<or.length;g++)cr(or[g],e);return null!==a&&a!==e&&(ir++,null!==or&&(null===i?i=or:i.push(...or))),0!==(e.f&kt)&&(e.f^=kt),f}catch(v){return an(v)}finally{e.f^=bt,tr=o,nr=r,or=i,Zo=a,lr=s,Qo=l,Ut(d),Yo=u,ar=c}}function fr(e,t){let n=t.reactions;if(null!==n){var o=Fe.call(n,e);if(-1!==o){var r=n.length-1;0===r?n=t.reactions=null:(n[o]=n[r],n.pop())}}null===n&&2&t.f&&(null===tr||!tr.includes(t))&&(xr(t,dt),768&t.f||(t.f^=yt),Rn(t),hr(t,0))}function hr(e,t){var n=e.deps;if(null!==n)for(var o=t;o<n.length;o++)fr(e,n[o])}function gr(e){var t,n=e.f;if(0===(n&ct)){xr(e,st);var o=Go,r=Uo;if(Go=e,Uo=!0,We){var i=Kt;Zt(e.component_function);var a=Vt;Bt(null!=(t=e.dev_stack)?t:Vt)}try{0!==(n&ot)?function(e){for(var t=e.first;null!==t;){var n=t.next;0===(t.f&rt)&&zo(t),t=n}}(e):Po(e),Io(e);var s=pr(e);e.teardown="function"==typeof s?s:null,e.wv=rr}finally{Uo=r,Go=o,We&&(Zt(i),Bt(a))}}}function vr(){return xe(this,null,function*(){yield Promise.resolve(),function(){var e=mn;mn=!0;try{for(;;){if(on(),0===hn.length&&(null==un||un.flush(),0===hn.length))return void(gn=null);wn()}}finally{mn=e}}()})}function mr(e){var t,n,o,r=!!(2&e.f);if(null===Zo||Yo){if(r&&null===e.deps&&null===e.effects){var i=e,a=i.parent;null!==a&&0===(a.f&mt)&&(i.f^=mt)}}else if(!(null!==Go&&0!==(Go.f&ct))&&!(null==Qo?void 0:Qo.includes(e))){var s=Zo.deps;if(0!==(Zo.f&bt))e.rv<ir&&(e.rv=ir,null===tr&&null!==s&&s[nr]===e?nr++:null===tr?tr=[e]:lr&&tr.includes(e)||tr.push(e));else{(null!=(t=Zo.deps)?t:Zo.deps=[]).push(e);var l=e.reactions;null===l?e.reactions=[Zo]:l.includes(Zo)||l.push(Zo)}}if(We){if(Nn){var d=0!==(Nn.f&bt),u=null==(n=Nn.deps)?void 0:n.includes(e);if(!d&&!Yo&&!u){o=e.label,We?console.warn(`%c[svelte] await_reactivity_loss\n%cDetected reactivity loss when reading \`${o}\`. This happens when state is read in an async function after an earlier \`await\`\nhttps://svelte.dev/e/await_reactivity_loss`,Nt,Ot):console.warn("https://svelte.dev/e/await_reactivity_loss");var c=Wt("TracedAt");c&&console.warn(c)}}Mn.delete(e)}if(Bo){if(Fn.has(e))return Fn.get(e);if(r){var p=(i=e).v;return(0===(i.f&st)&&null!==i.reactions||yr(i))&&(p=jn(i)),Fn.set(i,p),p}}else if(r){if(i=e,null==pn?void 0:pn.has(i))return pn.get(i);ur(i)&&Wn(i)}if(null==pn?void 0:pn.has(e))return pn.get(e);if(0!==(e.f&kt))throw e.v;return e.v}function yr(e){if(e.v===Re)return!0;if(null===e.deps)return!1;for(const t of e.deps){if(Fn.has(t))return!0;if(2&t.f&&yr(t))return!0}return!1}function wr(e){var t=Yo;try{return Yo=!0,e()}finally{Yo=t}}const br=-7169;function xr(e,t){e.f=e.f&br|t}function kr(e,t=new Set){if(!("object"!=typeof e||null===e||e instanceof EventTarget||t.has(e))){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{kr(e[r],t)}catch(n){}const o=Ye(e);if(o!==Object.prototype&&o!==Array.prototype&&o!==Map.prototype&&o!==Set.prototype&&o!==Date.prototype){const t=Be(o);for(let o in t){const r=t[o].get;if(r)try{r.call(e)}catch(n){}}}}}const _r=new Set,Sr=new Set;function Tr(e,t,n,o={}){function r(e){if(o.capture||Nr.call(t,e),!e.cancelBubble)return bo(()=>null==n?void 0:n.call(this,e))}return e.startsWith("pointer")||e.startsWith("touch")||"wheel"===e?nn(()=>{t.addEventListener(e,r,o)}):t.addEventListener(e,r,o),r}function Cr(e,t,n,o={}){var r=Tr(t,e,n,o);return()=>{e.removeEventListener(t,r,o)}}function Er(e,t,n,o,r){var i={capture:o,passive:r},a=Tr(e,t,n,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&So(()=>{t.removeEventListener(e,a,i)})}function $r(e){for(var t=0;t<e.length;t++)_r.add(e[t]);for(var n of Sr)n(e)}let Ar=null;function Nr(e){var t,n=this,o=n.ownerDocument,r=e.type,i=(null==(t=e.composedPath)?void 0:t.call(e))||[],a=i[0]||e.target;Ar=e;var s=0,l=Ar===e&&e.__root;if(l){var d=i.indexOf(l);if(-1!==d&&(n===document||n===window))return void(e.__root=n);var u=i.indexOf(n);if(-1===u)return;d<=u&&(s=d)}if((a=i[s]||e.target)!==n){Ue(e,"currentTarget",{configurable:!0,get:()=>a||o});var c=Zo,p=Go;Xo(null),Jo(null);try{for(var f,h=[];null!==a;){var g=a.assignedSlot||a.parentNode||a.host||null;try{var v=a["__"+r];if(null!=v&&(!a.disabled||e.target===a))if(qe(v)){var[m,...y]=v;m.apply(a,[e,...y])}else v.call(a,e)}catch(w){f?h.push(w):f=w}if(e.cancelBubble||g===n||null===g)break;a=g}if(f){for(let e of h)queueMicrotask(()=>{throw e});throw f}}finally{e.__root=n,delete e.currentTarget,Xo(c),Jo(p)}}}function Or(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","\x3c!----\x3e"),t.content}function Mr(e,t){var n=Go;null===n.nodes_start&&(n.nodes_start=e,n.nodes_end=t)}function Ir(e,t){var n,o=!!(1&t),r=!!(2&t),i=!e.startsWith("<!>");return()=>{void 0===n&&(n=Or(i?e:"<!>"+e),o||(n=fo(n)));var t=r||so?document.importNode(n,!0):n.cloneNode(!0);o?Mr(fo(t),t.lastChild):Mr(t,t);return t}}function Pr(e,t,n="svg"){var o,r=!e.startsWith("<!>"),i=!!(1&t),a=`<${n}>${r?e:"<!>"+e}</${n}>`;return()=>{if(!o){var e=fo(Or(a));if(i)for(o=document.createDocumentFragment();fo(e);)o.appendChild(fo(e));else o=fo(e)}var t=o.cloneNode(!0);i?Mr(fo(t),t.lastChild):Mr(t,t);return t}}function zr(e,t){return Pr(e,t,"svg")}function Dr(e=""){var t=po(e+"");return Mr(t,t),t}function Rr(){var e=document.createDocumentFragment(),t=document.createComment(""),n=po();return e.append(t,n),Mr(t,n),e}function Lr(e,t){null!==e&&e.before(t)}function jr(e){return e.endsWith("capture")&&"gotpointercapture"!==e&&"lostpointercapture"!==e}const Wr=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function qr(e){return Wr.includes(e)}const Fr={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Hr(e){var t;return e=e.toLowerCase(),null!=(t=Fr[e])?t:e}const Ur=["touchstart","touchmove"];function Vr(e){return Ur.includes(e)}function Br(e,t){var n,o=null==t?"":"object"==typeof t?t+"":t;o!==(null!=(n=e.__t)?n:e.__t=e.nodeValue)&&(e.__t=o,e.nodeValue=o+"")}function Kr(e,t){return function(e,{target:t,anchor:n,props:o={},events:r,context:i,intro:a=!0}){co();var s=new Set,l=e=>{for(var n=0;n<e.length;n++){var o=e[n];if(!s.has(o)){s.add(o);var r=Vr(o);t.addEventListener(o,Nr,{passive:r});var i=Zr.get(o);void 0===i?(document.addEventListener(o,Nr,{passive:r}),Zr.set(o,1)):Zr.set(o,i+1)}}};l(He(_r)),Sr.add(l);var d=void 0,u=function(e){yn.ensure();const t=_o(524352,e,!0);return(e={})=>new Promise(n=>{e.outro?Lo(t,()=>{zo(t),n(void 0)}):(zo(t),n(void 0))})}(()=>{var a=null!=n?n:t.appendChild(po());return function(e,t,n){new En(e,t,n)}(a,{pending:()=>{}},t=>{i&&(Gt({}),Ht.c=i);r&&(o.$$events=r),d=e(t,o)||{},i&&Jt()}),()=>{var e;for(var o of s){t.removeEventListener(o,Nr);var r=Zr.get(o);0===--r?(document.removeEventListener(o,Nr),Zr.delete(o)):Zr.set(o,r)}Sr.delete(l),a!==n&&(null==(e=a.parentNode)||e.removeChild(a))}});return Yr.set(d,u),d}(e,t)}const Zr=new Map;let Yr=new WeakMap;function Xr(e,t){const n=Yr.get(e);return n?(Yr.delete(e),n(t)):(We&&(_t in e?We?console.warn("%c[svelte] state_proxy_unmount\n%cTried to unmount a state proxy, rather than a component\nhttps://svelte.dev/e/state_proxy_unmount",Nt,Ot):console.warn("https://svelte.dev/e/state_proxy_unmount"):We?console.warn("%c[svelte] lifecycle_double_unmount\n%cTried to unmount a component that was not mounted\nhttps://svelte.dev/e/lifecycle_double_unmount",Nt,Ot):console.warn("https://svelte.dev/e/lifecycle_double_unmount")),Promise.resolve())}class Gr{constructor(e,t=!0){ge(this,"anchor"),ye(this,L,new Map),ye(this,j,new Map),ye(this,W,new Map),ye(this,q,!0),ye(this,F,()=>{var e=un;if(me(this,L).has(e)){var t=me(this,L).get(e),n=me(this,j).get(t);if(n)qo(n);else{var o=me(this,W).get(t);o&&(me(this,j).set(t,o.effect),me(this,W).delete(t),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),n=o.effect)}for(const[t,n]of me(this,L)){if(me(this,L).delete(t),t===e)break;const o=me(this,W).get(n);o&&(zo(o.effect),me(this,W).delete(n))}for(const[e,o]of me(this,j)){if(e===t)continue;const r=()=>{if(Array.from(me(this,L).values()).includes(e)){var t=document.createDocumentFragment();Ho(o,t),t.append(po()),me(this,W).set(e,{effect:o,fragment:t})}else zo(o);me(this,j).delete(e)};me(this,q)||!n?Lo(o,r,!1):r()}}}),this.anchor=e,we(this,q,t)}ensure(e,t){var n=un;!t||me(this,j).has(e)||me(this,W).has(e)||me(this,j).set(e,Mo(()=>t(this.anchor)));me(this,L).set(n,e),me(this,F).call(this)}}function Jr(e,t,...n){var o=new Gr(e);Oo(()=>{var e;const r=null!=(e=t())?e:null;We&&null==r&&function(){if(We){const e=new Error("invalid_snippet\nCould not `{@render}` snippet due to the expression being `null` or `undefined`. Consider using optional chaining `{@render snippet?.()}`\nhttps://svelte.dev/e/invalid_snippet");throw e.name="Svelte error",e}throw new Error("https://svelte.dev/e/invalid_snippet")}(),o.ensure(r,r&&(e=>r(e,...n)))},ft)}if(L=new WeakMap,j=new WeakMap,W=new WeakMap,q=new WeakMap,F=new WeakMap,We){let e=function(e){if(!(e in globalThis)){let t;Object.defineProperty(globalThis,e,{configurable:!0,get:()=>{if(void 0!==t)return t;!function(e){if(We){const t=new Error(`rune_outside_svelte\nThe \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files\nhttps://svelte.dev/e/rune_outside_svelte`);throw t.name="Svelte error",t}throw new Error("https://svelte.dev/e/rune_outside_svelte")}(e)},set:e=>{t=e}})}};e("$state"),e("$effect"),e("$derived"),e("$inspect"),e("$props"),e("$bindable")}function Qr(e){null===Ht&&$t("onMount"),To(()=>{const t=wr(e);if("function"==typeof t)return t})}function ei(e){null===Ht&&$t("onDestroy"),Qr(()=>()=>wr(e))}function ti(){const e=Ht;return null===e&&$t("createEventDispatcher"),(t,n,o)=>{var r;const i=null==(r=e.s.$$events)?void 0:r[t];if(i){const r=qe(i)?i.slice():[i],a=function(e,t,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:o})}(t,n,o);for(const t of r)t.call(e.x,a);return!a.defaultPrevented}return!0}}function ni(e,t,n=!1){var o=new Gr(e);function r(e,t){o.ensure(e,t)}Oo(()=>{var e=!1;t((t,n=!0)=>{e=!0,r(n,t)}),e||r(!1,null)},n?ft:0)}function oi(e,t){return t}function ri(e,t,n,o,r,i=null){var a=e,s={flags:t,items:new Map,first:null};!(4&t)||(a=e.appendChild(po()));var l,d,u=null,c=!1,p=new Map,f=Dn(()=>{var e=n();return qe(e)?e:null==e?[]:He(e)});function h(){!function(e,t,n,o,r,i,a,s,l){var d,u,c,p,f,h,g,v,m,y,w=!!(8&a),b=!!(3&a),x=t.length,k=n.items,_=n.first,S=_,T=null,C=[],E=[];if(w)for(y=0;y<x;y+=1)v=s(g=t[y],y),void 0!==(m=k.get(v))&&(null==(d=m.a)||d.measure(),(null!=h?h:h=new Set).add(m));for(y=0;y<x;y+=1)if(v=s(g=t[y],y),void 0!==(m=k.get(v))){if(b&&ii(m,g,y,a),0!==(m.e.f&ut)&&(qo(m.e),w&&(null==(u=m.a)||u.unfix(),(null!=h?h:h=new Set).delete(m))),m!==S){if(void 0!==f&&f.has(m)){if(C.length<E.length){var $,A=E[0];T=A.prev;var N=C[0],O=C[C.length-1];for($=0;$<C.length;$+=1)si(C[$],A,r);for($=0;$<E.length;$+=1)f.delete(E[$]);li(n,N.prev,O.next),li(n,T,N),li(n,O,A),S=A,T=O,y-=1,C=[],E=[]}else f.delete(m),si(m,S,r),li(n,m.prev,m.next),li(n,m,null===T?n.first:T.next),li(n,T,m),T=m;continue}for(C=[],E=[];null!==S&&S.k!==v;)0===(S.e.f&ut)&&(null!=f?f:f=new Set).add(S),E.push(S),S=S.next;if(null===S)continue;m=S}C.push(m),T=m,S=m.next}else{var M=o.get(v);if(void 0!==M){o.delete(v),k.set(v,M);var I=T?T.next:S;li(n,T,M),li(n,M,I),si(M,I,r),T=M}else{T=ai(S?S.e.nodes_start:r,n,T,null===T?n.first:T.next,g,v,y,i,a,l)}k.set(v,T),C=[],E=[],S=T.next}if(null!==S||void 0!==f){for(var P=void 0===f?[]:He(f);null!==S;)0===(S.e.f&ut)&&P.push(S),S=S.next;var z=P.length;if(z>0){var D=4&a&&0===x?r:null;if(w){for(y=0;y<z;y+=1)null==(c=P[y].a)||c.measure();for(y=0;y<z;y+=1)null==(p=P[y].a)||p.fix()}!function(e,t,n){for(var o=e.items,r=[],i=t.length,a=0;a<i;a++)Wo(t[a].e,r,!0);var s=i>0&&0===r.length&&null!==n;if(s){var l=n.parentNode;l.textContent="",l.append(n),o.clear(),li(e,t[0].prev,t[i-1].next)}jo(r,()=>{for(var n=0;n<i;n++){var r=t[n];s||(o.delete(r.k),li(e,r.prev,r.next)),zo(r.e,!s)}})}(n,P,D)}}w&&nn(()=>{var e;if(void 0!==h)for(m of h)null==(e=m.a)||e.apply()});for(var R of(e.first=n.first&&n.first.e,e.last=T&&T.e,o.values()))zo(R.e);o.clear()}(d,l,s,p,a,r,t,o,n),null!==i&&(0===l.length?u?qo(u):u=Mo(()=>i(a)):null!==u&&Lo(u,()=>{u=null}))}Oo(()=>{null!=d||(d=Go);var e=(l=mr(f)).length;c&&0===e||(c=0===e,h(),mr(f))})}function ii(e,t,n,o){1&o&&Yn(e.v,t),2&o?Yn(e.i,n):e.i=n}function ai(e,t,n,o,r,i,a,s,l,d,u){var c=!!(1&l),p=c?!(16&l)?Kn(r,!1,!1):Vn(r):r,f=2&l?Vn(a):a;We&&c&&(p.trace=()=>{var e="number"==typeof f?a:f.v;d()[e]});var h={i:f,v:p,k:i,a:null,e:null,prev:n,next:o};try{if(null===e)document.createDocumentFragment().append(e=po());return h.e=Mo(()=>s(e,p,f,d),false),h.e.prev=n&&n.e,h.e.next=o&&o.e,null===n?u||(t.first=h):(n.next=h,n.e.next=h.e),null!==o&&(o.prev=h,o.e.prev=h.e),h}finally{}}function si(e,t,n){for(var o=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,i=e.e.nodes_start;null!==i&&i!==o;){var a=ho(i);r.before(i),i=a}}function li(e,t,n){null===t?e.first=n:(t.next=n,t.e.next=n&&n.e),null!==n&&(n.prev=t,n.e.prev=t&&t.e)}function di(e,t,n=!1,o=!1,r=!1){var i=e,a="";No(()=>{var e,r=Go;if(a!==(a=null!=(e=t())?e:"")&&(null!==r.nodes_start&&(Do(r.nodes_start,r.nodes_end),r.nodes_start=r.nodes_end=null),""!==a)){var s=a+"";n?s=`<svg>${s}</svg>`:o&&(s=`<math>${s}</math>`);var l=Or(s);if((n||o)&&(l=fo(l)),Mr(fo(l),l.lastChild),n||o)for(;fo(l);)i.before(fo(l));else i.before(l)}})}function ui(e,t,n){var o=new Gr(e);Oo(()=>{var e,r=null!=(e=t())?e:null;o.ensure(r,r&&(e=>n(e,r)))},ft)}function ci(e,t,n){$o(()=>{var o=wr(()=>t(e,null==n?void 0:n())||{});if(n&&(null==o?void 0:o.update)){var r=!1,i={};Ao(()=>{var e=n();!function(e){if("object"==typeof e&&e&&!(e instanceof EventTarget))if(_t in e)kr(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];"object"==typeof n&&n&&_t in n&&kr(n)}}(e),r&&Pt(i,e)&&(i=e,o.update(e))}),r=!0}if(null==o?void 0:o.destroy)return()=>o.destroy()})}function pi(e,t){var n,o=void 0;Oo(()=>{o!==(o=t())&&(n&&(zo(n),n=null),o&&(n=Mo(()=>{$o(()=>o(e))})))})}function fi(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=fi(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function hi(e){return"object"==typeof e?function(){for(var e,t,n=0,o="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=fi(e))&&(o&&(o+=" "),o+=t);return o}(e):null!=e?e:""}const gi=[..." \t\n\r\f \v\ufeff"];function vi(e,t=!1){var n=t?" !important;":";",o="";for(var r in e){var i=e[r];null!=i&&""!==i&&(o+=" "+r+": "+i+n)}return o}function mi(e){return"-"!==e[0]||"-"!==e[1]?e.toLowerCase():e}function yi(e,t,n,o,r,i){var a=e.__className;if(a!==n||void 0===a){var s=function(e,t,n){var o=null==e?"":""+e;if(t&&(o=o?o+" "+t:t),n)for(var r in n)if(n[r])o=o?o+" "+r:r;else if(o.length)for(var i=r.length,a=0;(a=o.indexOf(r,a))>=0;){var s=a+i;0!==a&&!gi.includes(o[a-1])||s!==o.length&&!gi.includes(o[s])?a=s:o=(0===a?"":o.substring(0,a))+o.substring(s+1)}return""===o?null:o}(n,o,i);null==s?e.removeAttribute("class"):t?e.className=s:e.setAttribute("class",s),e.__className=n}else if(i&&r!==i)for(var l in i){var d=!!i[l];null!=r&&d===!!r[l]||e.classList.toggle(l,d)}return i}function wi(e,t={},n,o){for(var r in n){var i=n[r];t[r]!==i&&(null==n[r]?e.style.removeProperty(r):e.style.setProperty(r,i,o))}}function bi(e,t,n,o){if(e.__style!==t){var r=function(e,t){if(t){var n,o,r="";if(Array.isArray(t)?(n=t[0],o=t[1]):n=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,a=0,s=!1,l=[];n&&l.push(...Object.keys(n).map(mi)),o&&l.push(...Object.keys(o).map(mi));var d=0,u=-1;const t=e.length;for(var c=0;c<t;c++){var p=e[c];if(s?"/"===p&&"*"===e[c-1]&&(s=!1):i?i===p&&(i=!1):"/"===p&&"*"===e[c+1]?s=!0:'"'===p||"'"===p?i=p:"("===p?a++:")"===p&&a--,!s&&!1===i&&0===a)if(":"===p&&-1===u)u=c;else if(";"===p||c===t-1){if(-1!==u){var f=mi(e.substring(d,u).trim());l.includes(f)||(";"!==p&&c++,r+=" "+e.substring(d,c).trim()+";")}d=c+1,u=-1}}}return n&&(r+=vi(n)),o&&(r+=vi(o,!0)),""===(r=r.trim())?null:r}return null==e?null:String(e)}(t,o);null==r?e.removeAttribute("style"):e.style.cssText=r,e.__style=t}else o&&(Array.isArray(o)?(wi(e,null==n?void 0:n[0],o[0]),wi(e,null==n?void 0:n[1],o[1],"important")):wi(e,n,o));return o}function xi(e,t,n=!1){if(e.multiple){if(null==t)return;if(!qe(t))return void(We?console.warn("%c[svelte] select_multiple_invalid_value\n%cThe `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\nhttps://svelte.dev/e/select_multiple_invalid_value",Nt,Ot):console.warn("https://svelte.dev/e/select_multiple_invalid_value"));for(var o of e.options)o.selected=t.includes(Si(o))}else{for(o of e.options){if(oo(Si(o),t))return void(o.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}}function ki(e){var t=new MutationObserver(()=>{xi(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),So(()=>{t.disconnect()})}function _i(e,t,n=t){var o=new WeakSet,r=!0;xo(e,"change",t=>{var r,i,a=t?"[selected]":":checked";if(e.multiple)i=[].map.call(e.querySelectorAll(a),Si);else{var s=null!=(r=e.querySelector(a))?r:e.querySelector("option:not([disabled])");i=s&&Si(s)}n(i),null!==un&&o.add(un)}),$o(()=>{var i=t();if(e===document.activeElement){var a=null!=cn?cn:un;if(o.has(a))return}if(xi(e,i,r),r&&void 0===i){var s=e.querySelector(":checked");null!==s&&(i=Si(s),n(i))}e.__value=i,r=!1}),ki(e)}function Si(e){return"__value"in e?e.__value:e.value}const Ti=Symbol("class"),Ci=Symbol("style"),Ei=Symbol("is custom element"),$i=Symbol("is html");function Ai(e,t){var n=Pi(e);n.value!==(n.value=null!=t?t:void 0)&&(e.value!==t||0===t&&"PROGRESS"===e.nodeName)&&(e.value=null!=t?t:"")}function Ni(e,t){var n=Pi(e);n.checked!==(n.checked=null!=t?t:void 0)&&(e.checked=t)}function Oi(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function Mi(e,t,n,o){var r=Pi(e);r[t]!==(r[t]=n)&&("loading"===t&&(e[Tt]=n),null==n?e.removeAttribute(t):"string"!=typeof n&&Di(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Ii(e,t,n=[],o=[],r,i=!1,a=!1){$n(n,o,n=>{var o=void 0,s={},l="SELECT"===e.nodeName,d=!1;if(Oo(()=>{var u=t(...n.map(mr)),c=function(e,t,n,o){var r=Pi(e),i=r[Ei],a=!r[$i],s=t||{},l="OPTION"===e.tagName;for(var d in t)d in n||(n[d]=null);n.class?n.class=hi(n.class):(o||n[Ti])&&(n.class=null),n[Ci]&&(null!=n.style||(n.style=null));var u=Di(e);for(const v in n){let d=n[v];if(l&&"value"===v&&null==d)e.value=e.__value="",s[v]=d;else if("class"!==v)if("style"!==v){var c=s[v];if(d!==c||void 0===d&&e.hasAttribute(v)){s[v]=d;var p=v[0]+v[1];if("$$"!==p)if("on"===p){const t={},n="$$"+v;let o=v.slice(2);var f=qr(o);if(jr(o)&&(o=o.slice(0,-7),t.capture=!0),!f&&c){if(null!=d)continue;e.removeEventListener(o,s[n],t),s[n]=null}if(null!=d)if(f)e[`__${o}`]=d,$r([o]);else{let r=function(e){s[v].call(this,e)};s[n]=Tr(o,e,r,t)}else f&&(e[`__${o}`]=void 0)}else if("style"===v)Mi(e,v,d);else if("autofocus"===v)yo(e,Boolean(d));else if(i||"__value"!==v&&("value"!==v||null==d))if("selected"===v&&l)Oi(e,d);else{var h=v;a||(h=Hr(h));var g="defaultValue"===h||"defaultChecked"===h;if(null!=d||i||g)g||u.includes(h)&&(i||"string"!=typeof d)?(e[h]=d,h in r&&(r[h]=Re)):"function"!=typeof d&&Mi(e,h,d);else if(r[v]=null,"value"===h||"checked"===h){let n=e;const o=void 0===t;if("value"===h){let e=n.defaultValue;n.removeAttribute(h),n.defaultValue=e,n.value=n.__value=o?e:null}else{let e=n.defaultChecked;n.removeAttribute(h),n.defaultChecked=e,n.checked=!!o&&e}}else e.removeAttribute(v)}else e.value=e.__value=d}}else bi(e,d,null==t?void 0:t[Ci],n[Ci]),s[v]=d,s[Ci]=n[Ci];else yi(e,"http://www.w3.org/1999/xhtml"===e.namespaceURI,d,o,null==t?void 0:t[Ti],n[Ti]),s[v]=d,s[Ti]=n[Ti]}return s}(e,o,u,r,i,a);d&&l&&"value"in u&&xi(e,u.value);for(let e of Object.getOwnPropertySymbols(s))u[e]||zo(s[e]);for(let t of Object.getOwnPropertySymbols(u)){var p=u[t];"@attach"!==t.description||o&&p===o[t]||(s[t]&&zo(s[t]),s[t]=Mo(()=>pi(e,()=>p))),c[t]=p}o=c}),l){var u=e;$o(()=>{xi(u,o.value,!0),ki(u)})}d=!0})}function Pi(e){var t;return null!=(t=e.__attributes)?t:e.__attributes={[Ei]:e.nodeName.includes("-"),[$i]:"http://www.w3.org/1999/xhtml"===e.namespaceURI}}var zi=new Map;function Di(e){var t,n=e.getAttribute("is")||e.nodeName,o=zi.get(n);if(o)return o;zi.set(n,o=[]);for(var r=e,i=Element.prototype;i!==r;){for(var a in t=Be(r))t[a].set&&o.push(a);r=Ye(r)}return o}function Ri(e,t,n=t){var o=new WeakSet;xo(e,"input",r=>xe(null,null,function*(){We&&"checkbox"===e.type&&At();var i=r?e.defaultValue:e.value;if(i=Li(e)?ji(i):i,n(i),null!==un&&o.add(un),yield vr(),i!==(i=t())){var a=e.selectionStart,s=e.selectionEnd,l=e.value.length;if(e.value=null!=i?i:"",null!==s){var d=e.value.length;a===s&&s===l&&d>l?(e.selectionStart=d,e.selectionEnd=d):(e.selectionStart=a,e.selectionEnd=Math.min(s,d))}}})),null==wr(t)&&e.value&&(n(Li(e)?ji(e.value):e.value),null!==un&&o.add(un)),Ao(()=>{We&&"checkbox"===e.type&&At();var n=t();if(e===document.activeElement){var r=null!=cn?cn:un;if(o.has(r))return}Li(e)&&n===ji(e.value)||("date"!==e.type||n||e.value)&&n!==e.value&&(e.value=null!=n?n:"")})}function Li(e){var t=e.type;return"number"===t||"range"===t}function ji(e){return""===e?null:+e}const Wi=class{constructor(e){ye(this,B),ye(this,H,new WeakMap),ye(this,U),ye(this,V),we(this,V,e)}observe(e,t){var n=me(this,H).get(e)||new Set;return n.add(t),me(this,H).set(e,n),be(this,B,K).call(this).observe(e,me(this,V)),()=>{var n=me(this,H).get(e);n.delete(t),0===n.size&&(me(this,H).delete(e),me(this,U).unobserve(e))}}};H=new WeakMap,U=new WeakMap,V=new WeakMap,B=new WeakSet,K=function(){var e;return null!=(e=me(this,U))?e:we(this,U,new ResizeObserver(e=>{for(var t of e)for(var n of(Wi.entries.set(t.target,t),me(this,H).get(t.target)||[]))n(t)}))},ge(Wi,"entries",new WeakMap);var qi=new Wi({box:"border-box"});function Fi(e,t,n){var o=qi.observe(e,()=>n(e[t]));$o(()=>(wr(()=>n(e[t])),o))}function Hi(e,t){return e===t||(null==e?void 0:e[_t])===t}function Ui(e={},t,n,o){return $o(()=>{var o,r;return Ao(()=>{o=r,r=[],wr(()=>{e!==n(...r)&&(t(e,...r),o&&Hi(n(...o),e)&&t(null,...o))})}),()=>{nn(()=>{r&&Hi(n(...r),e)&&t(null,...r)})}}),e}function Vi(e,t,n){if(null==e)return t(void 0),n&&n(void 0),Je;const o=wr(()=>e.subscribe(t,n));return o.unsubscribe?()=>o.unsubscribe():o}const Bi=[];function Ki(e,t=Je){let n=null;const o=new Set;function r(t){if(Pt(e,t)&&(e=t,n)){const t=!Bi.length;for(const n of o)n[1](),Bi.push(n,e);if(t){for(let e=0;e<Bi.length;e+=2)Bi[e][0](Bi[e+1]);Bi.length=0}}}function i(t){r(t(e))}return{set:r,update:i,subscribe:function(a,s=Je){const l=[a,s];return o.add(l),1===o.size&&(n=t(r,i)||Je),a(e),()=>{o.delete(l),0===o.size&&n&&(n(),n=null)}}}}function Zi(e,t,n){const o=!Array.isArray(e),r=o?[e]:e;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return a=(e,n)=>{let a=!1;const s=[];let l=0,d=Je;const u=()=>{if(l)return;d();const r=t(o?s[0]:s,e,n);i?e(r):d="function"==typeof r?r:Je},c=r.map((e,t)=>Vi(e,e=>{s[t]=e,l&=~(1<<t),a&&u()},()=>{l|=1<<t}));return a=!0,u(),function(){Qe(c),d(),a=!1}},{subscribe:Ki(n,a).subscribe};var a}function Yi(e){let t;return Vi(e,e=>t=e)(),t}let Xi=!1,Gi=Symbol();function Ji(e,t,n){var o;const r=null!=(o=n[t])?o:n[t]={store:null,source:Kn(void 0),unsubscribe:Je};if(We&&(r.source.label=t),r.store!==e&&!(Gi in n))if(r.unsubscribe(),r.store=null!=e?e:null,null==e)r.source.v=void 0,r.unsubscribe=Je;else{var i=!0;r.unsubscribe=Vi(e,e=>{i?r.source.v=e:Zn(r.source,e)}),i=!1}return e&&Gi in n?Yi(e):mr(r.source)}function Qi(){const e={};return[e,function(){So(()=>{for(var t in e){e[t].unsubscribe()}Ue(e,Gi,{enumerable:!1,value:!0})})}]}function ea(e,t,n){return e.set(n),t}const ta={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set:(e,t)=>(We&&function(e){if(We){const t=new Error(`props_rest_readonly\nRest element properties of \`$props()\` such as \`${e}\` are readonly\nhttps://svelte.dev/e/props_rest_readonly`);throw t.name="Svelte error",t}throw new Error("https://svelte.dev/e/props_rest_readonly")}(`${e.name}.${String(t)}`),!1),getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t))return t in e.props?{enumerable:!0,configurable:!0,value:e.props[t]}:void 0},has:(e,t)=>!e.exclude.includes(t)&&t in e.props,ownKeys:e=>Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))};function na(e,t,n){return new Proxy(We?{props:e,exclude:t,name:n,other:{},to_proxy:[]}:{props:e,exclude:t},ta)}const oa={get(e,t){let n=e.props.length;for(;n--;){let o=e.props[n];if(Ge(o)&&(o=o()),"object"==typeof o&&null!==o&&t in o)return o[t]}},set(e,t,n){let o=e.props.length;for(;o--;){let r=e.props[o];Ge(r)&&(r=r());const i=Ve(r,t);if(i&&i.set)return i.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let o=e.props[n];if(Ge(o)&&(o=o()),"object"==typeof o&&null!==o&&t in o){const e=Ve(o,t);return e&&!e.configurable&&(e.configurable=!0),e}}},has(e,t){if(t===_t||t===St)return!1;for(let n of e.props)if(Ge(n)&&(n=n()),null!=n&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props)if(Ge(n)&&(n=n()),n){for(const e in n)t.includes(e)||t.push(e);for(const e of Object.getOwnPropertySymbols(n))t.includes(e)||t.push(e)}return t}};function ra(...e){return new Proxy({props:e},oa)}function ia(e,t,n,o){var r,i,a,s,l=!!(8&n),d=!!(16&n),u=o,c=!0,p=()=>(c&&(c=!1,u=d?wr(o):o),u);if(l){var f=_t in e||St in e;a=null!=(i=null==(r=Ve(e,t))?void 0:r.set)?i:f&&t in e?n=>e[t]=n:void 0}var h,g=!1;if(l?[s,g]=function(e){var t=Xi;try{return Xi=!1,[e(),Xi]}finally{Xi=t}}(()=>e[t]):s=e[t],void 0===s&&void 0!==o&&(s=p(),a&&(!function(e){if(We){const t=new Error(`props_invalid_value\nCannot do \`bind:${e}={undefined}\` when \`${e}\` has a fallback value\nhttps://svelte.dev/e/props_invalid_value`);throw t.name="Svelte error",t}throw new Error("https://svelte.dev/e/props_invalid_value")}(t),a(s))),h=()=>{var n=e[t];return void 0===n?p():(c=!0,n)},!(4&n))return h;if(a){var v=e.$$legacy;return function(e,t){return arguments.length>0?((!t||v||g)&&a(t?h():e),e):h()}}var m=!1,y=(1&n?In:Dn)(()=>(m=!1,h()));We&&(y.label=t),l&&mr(y);var w=Go;return function(e,t){if(arguments.length>0){const n=t?mr(y):l?eo(e):e;return Zn(y,n),m=!0,void 0!==u&&(u=n),e}return Bo&&m||0!==(w.f&ct)?y.v:mr(y)}}var aa={value:()=>{}};function sa(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new la(o)}function la(e){this._=e}function da(e,t){for(var n,o=0,r=e.length;o<r;++o)if((n=e[o]).name===t)return n.value}function ua(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=aa,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}la.prototype=sa.prototype={constructor:la,on:function(e,t){var n,o,r=this._,i=(o=r,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!o.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),a=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=i[a]).type)r[n]=ua(r[n],e.name,t);else if(null==t)for(n in r)r[n]=ua(r[n],e.name,null);return this}for(;++a<s;)if((n=(e=i[a]).type)&&(n=da(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new la(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,r=new Array(n),i=0;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(o=this._[e]).length;i<n;++i)o[i].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};var ca="http://www.w3.org/1999/xhtml";const pa={svg:"http://www.w3.org/2000/svg",xhtml:ca,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function fa(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),pa.hasOwnProperty(t)?{space:pa[t],local:e}:e}function ha(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ca&&t.documentElement.namespaceURI===ca?t.createElement(e):t.createElementNS(n,e)}}function ga(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function va(e){var t=fa(e);return(t.local?ga:ha)(t)}function ma(){}function ya(e){return null==e?ma:function(){return this.querySelector(e)}}function wa(){return[]}function ba(e){return null==e?wa:function(){return this.querySelectorAll(e)}}function xa(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function ka(e){return function(){return this.matches(e)}}function _a(e){return function(t){return t.matches(e)}}var Sa=Array.prototype.find;function Ta(){return this.firstElementChild}var Ca=Array.prototype.filter;function Ea(){return Array.from(this.children)}function $a(e){return new Array(e.length)}function Aa(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Na(e,t,n,o,r,i){for(var a,s=0,l=t.length,d=i.length;s<d;++s)(a=t[s])?(a.__data__=i[s],o[s]=a):n[s]=new Aa(e,i[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function Oa(e,t,n,o,r,i,a){var s,l,d,u=new Map,c=t.length,p=i.length,f=new Array(c);for(s=0;s<c;++s)(l=t[s])&&(f[s]=d=a.call(l,l.__data__,s,t)+"",u.has(d)?r[s]=l:u.set(d,l));for(s=0;s<p;++s)d=a.call(e,i[s],s,i)+"",(l=u.get(d))?(o[s]=l,l.__data__=i[s],u.delete(d)):n[s]=new Aa(e,i[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(f[s])===l&&(r[s]=l)}function Ma(e){return e.__data__}function Ia(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Pa(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function za(e){return function(){this.removeAttribute(e)}}function Da(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ra(e,t){return function(){this.setAttribute(e,t)}}function La(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ja(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Wa(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function qa(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Fa(e){return function(){this.style.removeProperty(e)}}function Ha(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ua(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Va(e,t){return e.style.getPropertyValue(t)||qa(e).getComputedStyle(e,null).getPropertyValue(t)}function Ba(e){return function(){delete this[e]}}function Ka(e,t){return function(){this[e]=t}}function Za(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Ya(e){return e.trim().split(/^|\s+/)}function Xa(e){return e.classList||new Ga(e)}function Ga(e){this._node=e,this._names=Ya(e.getAttribute("class")||"")}function Ja(e,t){for(var n=Xa(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function Qa(e,t){for(var n=Xa(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function es(e){return function(){Ja(this,e)}}function ts(e){return function(){Qa(this,e)}}function ns(e,t){return function(){(t.apply(this,arguments)?Ja:Qa)(this,e)}}function os(){this.textContent=""}function rs(e){return function(){this.textContent=e}}function is(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function as(){this.innerHTML=""}function ss(e){return function(){this.innerHTML=e}}function ls(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function ds(){this.nextSibling&&this.parentNode.appendChild(this)}function us(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function cs(){return null}function ps(){var e=this.parentNode;e&&e.removeChild(this)}function fs(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function hs(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gs(e){return function(){var t=this.__on;if(t){for(var n,o=0,r=-1,i=t.length;o<i;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function vs(e,t,n){return function(){var o,r=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var a=0,s=r.length;a<s;++a)if((o=r[a]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),void(o.value=t);this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function ms(e,t,n){var o=qa(e),r=o.CustomEvent;"function"==typeof r?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function ys(e,t){return function(){return ms(this,e,t)}}function ws(e,t){return function(){return ms(this,e,t.apply(this,arguments))}}Aa.prototype={constructor:Aa,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},Ga.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var bs=[null];function xs(e,t){this._groups=e,this._parents=t}function ks(){return new xs([[document.documentElement]],bs)}function _s(e){return"string"==typeof e?new xs([[document.querySelector(e)]],[document.documentElement]):new xs([[e]],bs)}function Ss(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}xs.prototype=ks.prototype={constructor:xs,select:function(e){"function"!=typeof e&&(e=ya(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a,s=t[r],l=s.length,d=o[r]=new Array(l),u=0;u<l;++u)(i=s[u])&&(a=e.call(i,i.__data__,u,s))&&("__data__"in i&&(a.__data__=i.__data__),d[u]=a);return new xs(o,this._parents)},selectAll:function(e){e="function"==typeof e?xa(e):ba(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a,s=t[i],l=s.length,d=0;d<l;++d)(a=s[d])&&(o.push(e.call(a,a.__data__,d,s)),r.push(a));return new xs(o,r)},selectChild:function(e){return this.select(null==e?Ta:function(e){return function(){return Sa.call(this.children,e)}}("function"==typeof e?e:_a(e)))},selectChildren:function(e){return this.selectAll(null==e?Ea:function(e){return function(){return Ca.call(this.children,e)}}("function"==typeof e?e:_a(e)))},filter:function(e){"function"!=typeof e&&(e=ka(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],s=a.length,l=o[r]=[],d=0;d<s;++d)(i=a[d])&&e.call(i,i.__data__,d,a)&&l.push(i);return new xs(o,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Ma);var n,o=t?Oa:Na,r=this._parents,i=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=i.length,s=new Array(a),l=new Array(a),d=new Array(a),u=0;u<a;++u){var c=r[u],p=i[u],f=p.length,h=Ia(e.call(c,c&&c.__data__,u,r)),g=h.length,v=l[u]=new Array(g),m=s[u]=new Array(g);o(c,p,v,m,d[u]=new Array(f),h,t);for(var y,w,b=0,x=0;b<g;++b)if(y=v[b]){for(b>=x&&(x=b+1);!(w=m[x])&&++x<g;);y._next=w||null}}return(s=new xs(s,r))._enter=l,s._exit=d,s},enter:function(){return new xs(this._enter||this._groups.map($a),this._parents)},exit:function(){return new xs(this._exit||this._groups.map($a),this._parents)},join:function(e,t,n){var o=this.enter(),r=this,i=this.exit();return"function"==typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?i.remove():n(i),o&&r?o.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),s=new Array(r),l=0;l<a;++l)for(var d,u=n[l],c=o[l],p=u.length,f=s[l]=new Array(p),h=0;h<p;++h)(d=u[h]||c[h])&&(f[h]=d);for(;l<r;++l)s[l]=n[l];return new xs(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,r=e[t],i=r.length-1,a=r[i];--i>=0;)(o=r[i])&&(a&&4^o.compareDocumentPosition(a)&&a.parentNode.insertBefore(o,a),a=o);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Pa);for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a,s=n[i],l=s.length,d=r[i]=new Array(l),u=0;u<l;++u)(a=s[u])&&(d[u]=a);d.sort(t)}return new xs(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r,i=t[n],a=0,s=i.length;a<s;++a)(r=i[a])&&e.call(r,r.__data__,a,i);return this},attr:function(e,t){var n=fa(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?Da:za:"function"==typeof t?n.local?Wa:ja:n.local?La:Ra)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Fa:"function"==typeof t?Ua:Ha)(e,t,null==n?"":n)):Va(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Ba:"function"==typeof t?Za:Ka)(e,t)):this.node()[e]},classed:function(e,t){var n=Ya(e+"");if(arguments.length<2){for(var o=Xa(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?ns:t?es:ts)(n,t))},text:function(e){return arguments.length?this.each(null==e?os:("function"==typeof e?is:rs)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?as:("function"==typeof e?ls:ss)(e)):this.node().innerHTML},raise:function(){return this.each(ds)},lower:function(){return this.each(us)},append:function(e){var t="function"==typeof e?e:va(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:va(e),o=null==t?cs:"function"==typeof t?t:ya(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})},remove:function(){return this.each(ps)},clone:function(e){return this.select(e?hs:fs)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var o,r,i=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),a=i.length;if(!(arguments.length<2)){for(s=t?vs:gs,o=0;o<a;++o)this.each(s(i[o],t,n));return this}var s=this.node().__on;if(s)for(var l,d=0,u=s.length;d<u;++d)for(o=0,l=s[d];o<a;++o)if((r=i[o]).type===l.type&&r.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?ws:ys)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,r=e[t],i=0,a=r.length;i<a;++i)(o=r[i])&&(yield o)}};const Ts={passive:!1},Cs={capture:!0,passive:!1};function Es(e){e.stopImmediatePropagation()}function $s(e){e.preventDefault(),e.stopImmediatePropagation()}function As(e){var t=e.document.documentElement,n=_s(e).on("dragstart.drag",$s,Cs);"onselectstart"in t?n.on("selectstart.drag",$s,Cs):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ns(e,t){var n=e.document.documentElement,o=_s(e).on("dragstart.drag",null);t&&(o.on("click.drag",$s,Cs),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Os=e=>()=>e;function Ms(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:a,y:s,dx:l,dy:d,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:u}})}function Is(e){return!e.ctrlKey&&!e.button}function Ps(){return this.parentNode}function zs(e,t){return null==t?{x:e.x,y:e.y}:t}function Ds(){return navigator.maxTouchPoints||"ontouchstart"in this}function Rs(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ls(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function js(){}Ms.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var Ws=.7,qs=1/Ws,Fs="\\s*([+-]?\\d+)\\s*",Hs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Us="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vs=/^#([0-9a-f]{3,8})$/,Bs=new RegExp(`^rgb\\(${Fs},${Fs},${Fs}\\)$`),Ks=new RegExp(`^rgb\\(${Us},${Us},${Us}\\)$`),Zs=new RegExp(`^rgba\\(${Fs},${Fs},${Fs},${Hs}\\)$`),Ys=new RegExp(`^rgba\\(${Us},${Us},${Us},${Hs}\\)$`),Xs=new RegExp(`^hsl\\(${Hs},${Us},${Us}\\)$`),Gs=new RegExp(`^hsla\\(${Hs},${Us},${Us},${Hs}\\)$`),Js={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Qs(){return this.rgb().formatHex()}function el(){return this.rgb().formatRgb()}function tl(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Vs.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?nl(t):3===n?new il(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?ol(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?ol(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Bs.exec(e))?new il(t[1],t[2],t[3],1):(t=Ks.exec(e))?new il(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Zs.exec(e))?ol(t[1],t[2],t[3],t[4]):(t=Ys.exec(e))?ol(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Xs.exec(e))?cl(t[1],t[2]/100,t[3]/100,1):(t=Gs.exec(e))?cl(t[1],t[2]/100,t[3]/100,t[4]):Js.hasOwnProperty(e)?nl(Js[e]):"transparent"===e?new il(NaN,NaN,NaN,0):null}function nl(e){return new il(e>>16&255,e>>8&255,255&e,1)}function ol(e,t,n,o){return o<=0&&(e=t=n=NaN),new il(e,t,n,o)}function rl(e,t,n,o){return 1===arguments.length?((r=e)instanceof js||(r=tl(r)),r?new il((r=r.rgb()).r,r.g,r.b,r.opacity):new il):new il(e,t,n,null==o?1:o);var r}function il(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function al(){return`#${ul(this.r)}${ul(this.g)}${ul(this.b)}`}function sl(){const e=ll(this.opacity);return`${1===e?"rgb(":"rgba("}${dl(this.r)}, ${dl(this.g)}, ${dl(this.b)}${1===e?")":`, ${e})`}`}function ll(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function dl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ul(e){return((e=dl(e))<16?"0":"")+e.toString(16)}function cl(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new fl(e,t,n,o)}function pl(e){if(e instanceof fl)return new fl(e.h,e.s,e.l,e.opacity);if(e instanceof js||(e=tl(e)),!e)return new fl;if(e instanceof fl)return e;var t=(e=e.rgb()).r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,s=i-r,l=(i+r)/2;return s?(a=t===i?(n-o)/s+6*(n<o):n===i?(o-t)/s+2:(t-n)/s+4,s/=l<.5?i+r:2-i-r,a*=60):s=l>0&&l<1?0:a,new fl(a,s,l,e.opacity)}function fl(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function hl(e){return(e=(e||0)%360)<0?e+360:e}function gl(e){return Math.max(0,Math.min(1,e||0))}function vl(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Rs(js,tl,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Qs,formatHex:Qs,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return pl(this).formatHsl()},formatRgb:el,toString:el}),Rs(il,rl,Ls(js,{brighter(e){return e=null==e?qs:Math.pow(qs,e),new il(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Ws:Math.pow(Ws,e),new il(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new il(dl(this.r),dl(this.g),dl(this.b),ll(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:al,formatHex:al,formatHex8:function(){return`#${ul(this.r)}${ul(this.g)}${ul(this.b)}${ul(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:sl,toString:sl})),Rs(fl,function(e,t,n,o){return 1===arguments.length?pl(e):new fl(e,t,n,null==o?1:o)},Ls(js,{brighter(e){return e=null==e?qs:Math.pow(qs,e),new fl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Ws:Math.pow(Ws,e),new fl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new il(vl(e>=240?e-240:e+120,r,o),vl(e,r,o),vl(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new fl(hl(this.h),gl(this.s),gl(this.l),ll(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ll(this.opacity);return`${1===e?"hsl(":"hsla("}${hl(this.h)}, ${100*gl(this.s)}%, ${100*gl(this.l)}%${1===e?")":`, ${e})`}`}}));const ml=e=>()=>e;function yl(e){return 1===(e=+e)?wl:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}(t,n,e):ml(isNaN(t)?n:t)}}function wl(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):ml(isNaN(e)?t:e)}const bl=function e(t){var n=yl(t);function o(e,t){var o=n((e=rl(e)).r,(t=rl(t)).r),r=n(e.g,t.g),i=n(e.b,t.b),a=wl(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=r(t),e.b=i(t),e.opacity=a(t),e+""}}return o.gamma=e,o}(1);function xl(e,t){t||(t=[]);var n,o=e?Math.min(t.length,e.length):0,r=t.slice();return function(i){for(n=0;n<o;++n)r[n]=e[n]*(1-i)+t[n]*i;return r}}function kl(e,t){var n,o=t?t.length:0,r=e?Math.min(o,e.length):0,i=new Array(r),a=new Array(o);for(n=0;n<r;++n)i[n]=Al(e[n],t[n]);for(;n<o;++n)a[n]=t[n];return function(e){for(n=0;n<r;++n)a[n]=i[n](e);return a}}function _l(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function Sl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Tl(e,t){var n,o={},r={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?o[n]=Al(e[n],t[n]):r[n]=t[n];return function(e){for(n in o)r[n]=o[n](e);return r}}var Cl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,El=new RegExp(Cl.source,"g");function $l(e,t){var n,o,r,i=Cl.lastIndex=El.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=Cl.exec(e))&&(o=El.exec(t));)(r=o.index)>i&&(r=t.slice(i,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(o=o[0])?s[a]?s[a]+=o:s[++a]=o:(s[++a]=null,l.push({i:a,x:Sl(n,o)})),i=El.lastIndex;return i<t.length&&(r=t.slice(i),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,o=0;o<t;++o)s[(n=l[o]).i]=n.x(e);return s.join("")})}function Al(e,t){var n,o,r=typeof t;return null==t||"boolean"===r?ml(t):("number"===r?Sl:"string"===r?(n=tl(t))?(t=n,bl):$l:t instanceof tl?bl:t instanceof Date?_l:(o=t,!ArrayBuffer.isView(o)||o instanceof DataView?Array.isArray(t)?kl:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Tl:Sl:xl))(e,t)}var Nl,Ol=180/Math.PI,Ml={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Il(e,t,n,o,r,i){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Ol,skewX:Math.atan(l)*Ol,scaleX:a,scaleY:s}}function Pl(e,t,n,o){function r(e){return e.length?e.pop()+" ":""}return function(i,a){var s=[],l=[];return i=e(i),a=e(a),function(e,o,r,i,a,s){if(e!==r||o!==i){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:Sl(e,r)},{i:l-2,x:Sl(o,i)})}else(r||i)&&a.push("translate("+r+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,s,l),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(r(n)+"rotate(",null,o)-2,x:Sl(e,t)})):t&&n.push(r(n)+"rotate("+t+o)}(i.rotate,a.rotate,s,l),function(e,t,n,i){e!==t?i.push({i:n.push(r(n)+"skewX(",null,o)-2,x:Sl(e,t)}):t&&n.push(r(n)+"skewX("+t+o)}(i.skewX,a.skewX,s,l),function(e,t,n,o,i,a){if(e!==n||t!==o){var s=i.push(r(i)+"scale(",null,",",null,")");a.push({i:s-4,x:Sl(e,n)},{i:s-2,x:Sl(t,o)})}else 1===n&&1===o||i.push(r(i)+"scale("+n+","+o+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,s,l),i=a=null,function(e){for(var t,n=-1,o=l.length;++n<o;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var zl=Pl(function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ml:Il(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),Dl=Pl(function(e){return null==e?Ml:(Nl||(Nl=document.createElementNS("http://www.w3.org/2000/svg","g")),Nl.setAttribute("transform",e),(e=Nl.transform.baseVal.consolidate())?Il((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Ml)},", ",")",")");function Rl(e){return((e=Math.exp(e))+1/e)/2}const Ll=function e(t,n,o){function r(e,r){var i,a,s=e[0],l=e[1],d=e[2],u=r[0],c=r[1],p=r[2],f=u-s,h=c-l,g=f*f+h*h;if(g<1e-12)a=Math.log(p/d)/t,i=function(e){return[s+e*f,l+e*h,d*Math.exp(t*e*a)]};else{var v=Math.sqrt(g),m=(p*p-d*d+o*g)/(2*d*n*v),y=(p*p-d*d-o*g)/(2*p*n*v),w=Math.log(Math.sqrt(m*m+1)-m),b=Math.log(Math.sqrt(y*y+1)-y);a=(b-w)/t,i=function(e){var o,r=e*a,i=Rl(w),u=d/(n*v)*(i*(o=t*r+w,((o=Math.exp(2*o))-1)/(o+1))-function(e){return((e=Math.exp(e))-1/e)/2}(w));return[s+u*f,l+u*h,d*i/Rl(t*r+w)]}}return i.duration=1e3*a*t/Math.SQRT2,i}return r.rho=function(t){var n=Math.max(.001,+t),o=n*n;return e(n,o,o*o)},r}(Math.SQRT2,2,4);var jl,Wl,ql=0,Fl=0,Hl=0,Ul=0,Vl=0,Bl=0,Kl="object"==typeof performance&&performance.now?performance:Date,Zl="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Yl(){return Vl||(Zl(Xl),Vl=Kl.now()+Bl)}function Xl(){Vl=0}function Gl(){this._call=this._time=this._next=null}function Jl(e,t,n){var o=new Gl;return o.restart(e,t,n),o}function Ql(){Vl=(Ul=Kl.now())+Bl,ql=Fl=0;try{!function(){Yl(),++ql;for(var e,t=jl;t;)(e=Vl-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ql}()}finally{ql=0,function(){var e,t,n=jl,o=1/0;for(;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:jl=t);Wl=e,td(o)}(),Vl=0}}function ed(){var e=Kl.now(),t=e-Ul;t>1e3&&(Bl-=t,Ul=e)}function td(e){ql||(Fl&&(Fl=clearTimeout(Fl)),e-Vl>24?(e<1/0&&(Fl=setTimeout(Ql,e-Kl.now()-Bl)),Hl&&(Hl=clearInterval(Hl))):(Hl||(Ul=Kl.now(),Hl=setInterval(ed,1e3)),ql=1,Zl(Ql)))}function nd(e,t,n){var o=new Gl;return t=null==t?0:+t,o.restart(n=>{o.stop(),e(n+t)},t,n),o}Gl.prototype=Jl.prototype={constructor:Gl,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Yl():+n)+(null==t?0:+t),this._next||Wl===this||(Wl?Wl._next=this:jl=this,Wl=this),this._call=e,this._time=n,td()},stop:function(){this._call&&(this._call=null,this._time=1/0,td())}};var od=sa("start","end","cancel","interrupt"),rd=[];function id(e,t,n,o,r,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var o,r=e.__transition;function i(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(i){var d,u,c,p;if(1!==n.state)return l();for(d in r)if((p=r[d]).name===n.name){if(3===p.state)return nd(a);4===p.state?(p.state=6,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[d]):+d<t&&(p.state=6,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[d])}if(nd(function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(i))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,o=new Array(c=n.tween.length),d=0,u=-1;d<c;++d)(p=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(o[++u]=p);o.length=u+1}}function s(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),i=-1,a=o.length;++i<a;)o[i].call(e,r);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var o in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=Jl(i,0,n.time)}(e,n,{name:t,index:o,group:r,on:od,tween:rd,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function ad(e,t){var n=ld(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function sd(e,t){var n=ld(e,t);if(n.state>3)throw new Error("too late; already running");return n}function ld(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function dd(e,t){var n,o,r,i=e.__transition,a=!0;if(i){for(r in t=null==t?null:t+"",i)(n=i[r]).name===t?(o=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[r]):a=!1;a&&delete e.__transition}}function ud(e,t){var n,o;return function(){var r=sd(this,e),i=r.tween;if(i!==n)for(var a=0,s=(o=n=i).length;a<s;++a)if(o[a].name===t){(o=o.slice()).splice(a,1);break}r.tween=o}}function cd(e,t,n){var o,r;if("function"!=typeof n)throw new Error;return function(){var i=sd(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var s={name:t,value:n},l=0,d=r.length;l<d;++l)if(r[l].name===t){r[l]=s;break}l===d&&r.push(s)}i.tween=r}}function pd(e,t,n){var o=e._id;return e.each(function(){var e=sd(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return ld(e,o).value[t]}}function fd(e,t){var n;return("number"==typeof t?Sl:t instanceof tl?bl:(n=tl(t))?(t=n,bl):$l)(e,t)}function hd(e){return function(){this.removeAttribute(e)}}function gd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function vd(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=t(o=a,n)}}function md(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=t(o=a,n)}}function yd(e,t,n){var o,r,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===o&&s===r?i:(r=s,i=t(o=a,l));this.removeAttribute(e)}}function wd(e,t,n){var o,r,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===o&&s===r?i:(r=s,i=t(o=a,l));this.removeAttributeNS(e.space,e.local)}}function bd(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,r)),n}return r._value=t,r}function xd(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,r)),n}return r._value=t,r}function kd(e,t){return function(){ad(this,e).delay=+t.apply(this,arguments)}}function _d(e,t){return t=+t,function(){ad(this,e).delay=t}}function Sd(e,t){return function(){sd(this,e).duration=+t.apply(this,arguments)}}function Td(e,t){return t=+t,function(){sd(this,e).duration=t}}var Cd=ks.prototype.constructor;function Ed(e){return function(){this.style.removeProperty(e)}}var $d=0;function Ad(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Nd(){return++$d}var Od=ks.prototype;Ad.prototype={constructor:Ad,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=ya(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var s,l,d=o[a],u=d.length,c=i[a]=new Array(u),p=0;p<u;++p)(s=d[p])&&(l=e.call(s,s.__data__,p,d))&&("__data__"in s&&(l.__data__=s.__data__),c[p]=l,id(c[p],t,n,p,c,ld(s,n)));return new Ad(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=ba(e));for(var o=this._groups,r=o.length,i=[],a=[],s=0;s<r;++s)for(var l,d=o[s],u=d.length,c=0;c<u;++c)if(l=d[c]){for(var p,f=e.call(l,l.__data__,c,d),h=ld(l,n),g=0,v=f.length;g<v;++g)(p=f[g])&&id(p,t,n,g,f,h);i.push(f),a.push(l)}return new Ad(i,a,t,n)},selectChild:Od.selectChild,selectChildren:Od.selectChildren,filter:function(e){"function"!=typeof e&&(e=ka(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],s=a.length,l=o[r]=[],d=0;d<s;++d)(i=a[d])&&e.call(i,i.__data__,d,a)&&l.push(i);return new Ad(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),s=0;s<i;++s)for(var l,d=t[s],u=n[s],c=d.length,p=a[s]=new Array(c),f=0;f<c;++f)(l=d[f]||u[f])&&(p[f]=l);for(;s<o;++s)a[s]=t[s];return new Ad(a,this._parents,this._name,this._id)},selection:function(){return new Cd(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Nd(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a,s=o[i],l=s.length,d=0;d<l;++d)if(a=s[d]){var u=ld(a,t);id(a,e,n,d,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ad(o,this._parents,e,n)},call:Od.call,nodes:Od.nodes,node:Od.node,size:Od.size,empty:Od.empty,each:Od.each,on:function(e,t){var n=this._id;return arguments.length<2?ld(this.node(),n).on.on(e):this.each(function(e,t,n){var o,r,i=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?ad:sd;return function(){var a=i(this,e),s=a.on;s!==o&&(r=(o=s).copy()).on(t,n),a.on=r}}(n,e,t))},attr:function(e,t){var n=fa(e),o="transform"===n?Dl:fd;return this.attrTween(e,"function"==typeof t?(n.local?wd:yd)(n,o,pd(this,"attr."+e,t)):null==t?(n.local?gd:hd)(n):(n.local?md:vd)(n,o,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var o=fa(e);return this.tween(n,(o.local?bd:xd)(o,t))},style:function(e,t,n){var o="transform"==(e+="")?zl:fd;return null==t?this.styleTween(e,function(e,t){var n,o,r;return function(){var i=Va(this,e),a=(this.style.removeProperty(e),Va(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}(e,o)).on("end.style."+e,Ed(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var o,r,i;return function(){var a=Va(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=Va(this,e)),a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s))}}(e,o,pd(this,"style."+e,t))).each(function(e,t){var n,o,r,i,a="style."+t,s="end."+a;return function(){var l=sd(this,e),d=l.on,u=null==l.value[a]?i||(i=Ed(t)):void 0;d===n&&r===u||(o=(n=d).copy()).on(s,r=u),l.on=o}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,r,i=n+"";return function(){var a=Va(this,e);return a===i?null:a===o?r:r=t(o=a,n)}}(e,o,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!=typeof t)throw new Error;return this.tween(o,function(e,t,n){var o,r;function i(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&function(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}(e,i,n)),o}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(pd(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&function(e){return function(t){this.textContent=e.call(this,t)}}(o)),t}return o._value=e,o}(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,r=ld(this.node(),n).tween,i=0,a=r.length;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((null==t?ud:cd)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?kd:_d)(t,e)):ld(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Sd:Td)(t,e)):ld(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){sd(this,e).ease=t}}(t,e)):ld(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;sd(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,a){var s={value:a},l={value:function(){0===--r&&i()}};n.each(function(){var n=sd(this,o),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t}),0===r&&i()})},[Symbol.iterator]:Od[Symbol.iterator]};var Md={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Id(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}ks.prototype.interrupt=function(e){return this.each(function(){dd(this,e)})},ks.prototype.transition=function(e){var t,n;e instanceof Ad?(t=e._id,e=e._name):(t=Nd(),(n=Md).time=Yl(),e=null==e?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a,s=o[i],l=s.length,d=0;d<l;++d)(a=s[d])&&id(a,e,t,d,s,n||Id(a,t));return new Ad(o,this._parents,e,t)};const Pd=e=>()=>e;function zd(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Dd(e,t,n){this.k=e,this.x=t,this.y=n}Dd.prototype={constructor:Dd,scale:function(e){return 1===e?this:new Dd(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Dd(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Rd=new Dd(1,0,0);function Ld(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Rd;return e.__zoom}function jd(e){e.stopImmediatePropagation()}function Wd(e){e.preventDefault(),e.stopImmediatePropagation()}function qd(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Fd(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Hd(){return this.__zoom||Rd}function Ud(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Vd(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bd(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function Kd(){var e,t,n,o=qd,r=Fd,i=Bd,a=Ud,s=Vd,l=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],u=250,c=Ll,p=sa("start","zoom","end"),f=0,h=10;function g(e){e.property("__zoom",Hd).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",_).on("dblclick.zoom",S).filter(s).on("touchstart.zoom",T).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",E).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new Dd(t,e.x,e.y)}function m(e,t,n){var o=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return o===e.x&&r===e.y?e:new Dd(e.k,o,r)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,t,n,o){e.on("start.zoom",function(){b(this,arguments).event(o).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(o).end()}).tween("zoom",function(){var e=this,i=arguments,a=b(e,i).event(o),s=r.apply(e,i),l=null==n?y(s):"function"==typeof n?n.apply(e,i):n,d=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=e.__zoom,p="function"==typeof t?t.apply(e,i):t,f=c(u.invert(l).concat(d/u.k),p.invert(l).concat(d/p.k));return function(e){if(1===e)e=p;else{var t=f(e),n=d/t[2];e=new Dd(n,l[0]-t[0]*n,l[1]-t[1]*n)}a.zoom(null,e)}})}function b(e,t,n){return!n&&e.__zooming||new x(e,t)}function x(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=r.apply(e,t),this.taps=0}function k(e,...t){if(o.apply(this,arguments)){var n=b(this,t).event(e),r=this.__zoom,s=Math.max(l[0],Math.min(l[1],r.k*Math.pow(2,a.apply(this,arguments)))),u=Ss(e);if(n.wheel)n.mouse[0][0]===u[0]&&n.mouse[0][1]===u[1]||(n.mouse[1]=r.invert(n.mouse[0]=u)),clearTimeout(n.wheel);else{if(r.k===s)return;n.mouse=[u,r.invert(u)],dd(this),n.start()}Wd(e),n.wheel=setTimeout(function(){n.wheel=null,n.end()},150),n.zoom("mouse",i(m(v(r,s),n.mouse[0],n.mouse[1]),n.extent,d))}}function _(e,...t){if(!n&&o.apply(this,arguments)){var r=e.currentTarget,a=b(this,t,!0).event(e),s=_s(e.view).on("mousemove.zoom",function(e){if(Wd(e),!a.moved){var t=e.clientX-u,n=e.clientY-c;a.moved=t*t+n*n>f}a.event(e).zoom("mouse",i(m(a.that.__zoom,a.mouse[0]=Ss(e,r),a.mouse[1]),a.extent,d))},!0).on("mouseup.zoom",function(e){s.on("mousemove.zoom mouseup.zoom",null),Ns(e.view,a.moved),Wd(e),a.event(e).end()},!0),l=Ss(e,r),u=e.clientX,c=e.clientY;As(e.view),jd(e),a.mouse=[l,this.__zoom.invert(l)],dd(this),a.start()}}function S(e,...t){if(o.apply(this,arguments)){var n=this.__zoom,a=Ss(e.changedTouches?e.changedTouches[0]:e,this),s=n.invert(a),l=n.k*(e.shiftKey?.5:2),c=i(m(v(n,l),a,s),r.apply(this,t),d);Wd(e),u>0?_s(this).transition().duration(u).call(w,c,a,e):_s(this).call(g.transform,c,a,e)}}function T(n,...r){if(o.apply(this,arguments)){var i,a,s,l,d=n.touches,u=d.length,c=b(this,r,n.changedTouches.length===u).event(n);for(jd(n),a=0;a<u;++a)l=[l=Ss(s=d[a],this),this.__zoom.invert(l),s.identifier],c.touch0?c.touch1||c.touch0[2]===l[2]||(c.touch1=l,c.taps=0):(c.touch0=l,i=!0,c.taps=1+!!e);e&&(e=clearTimeout(e)),i&&(c.taps<2&&(t=l[0],e=setTimeout(function(){e=null},500)),dd(this),c.start())}}function C(e,...t){if(this.__zooming){var n,o,r,a,s=b(this,t).event(e),l=e.changedTouches,u=l.length;for(Wd(e),n=0;n<u;++n)r=Ss(o=l[n],this),s.touch0&&s.touch0[2]===o.identifier?s.touch0[0]=r:s.touch1&&s.touch1[2]===o.identifier&&(s.touch1[0]=r);if(o=s.that.__zoom,s.touch1){var c=s.touch0[0],p=s.touch0[1],f=s.touch1[0],h=s.touch1[1],g=(g=f[0]-c[0])*g+(g=f[1]-c[1])*g,y=(y=h[0]-p[0])*y+(y=h[1]-p[1])*y;o=v(o,Math.sqrt(g/y)),r=[(c[0]+f[0])/2,(c[1]+f[1])/2],a=[(p[0]+h[0])/2,(p[1]+h[1])/2]}else{if(!s.touch0)return;r=s.touch0[0],a=s.touch0[1]}s.zoom("touch",i(m(o,r,a),s.extent,d))}}function E(e,...o){if(this.__zooming){var r,i,a=b(this,o).event(e),s=e.changedTouches,l=s.length;for(jd(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),r=0;r<l;++r)i=s[r],a.touch0&&a.touch0[2]===i.identifier?delete a.touch0:a.touch1&&a.touch1[2]===i.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(i=Ss(i,this),Math.hypot(t[0]-i[0],t[1]-i[1])<h)){var d=_s(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return g.transform=function(e,t,n,o){var r=e.selection?e.selection():e;r.property("__zoom",Hd),e!==r?w(e,t,n,o):r.interrupt().each(function(){b(this,arguments).event(o).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},g.scaleBy=function(e,t,n,o){g.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)},n,o)},g.scaleTo=function(e,t,n,o){g.transform(e,function(){var e=r.apply(this,arguments),o=this.__zoom,a=null==n?y(e):"function"==typeof n?n.apply(this,arguments):n,s=o.invert(a),l="function"==typeof t?t.apply(this,arguments):t;return i(m(v(o,l),a,s),e,d)},n,o)},g.translateBy=function(e,t,n,o){g.transform(e,function(){return i(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),d)},null,o)},g.translateTo=function(e,t,n,o,a){g.transform(e,function(){var e=r.apply(this,arguments),a=this.__zoom,s=null==o?y(e):"function"==typeof o?o.apply(this,arguments):o;return i(Rd.translate(s[0],s[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,d)},o,a)},x.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=_s(this.that).datum();p.call(e,this.that,new zd(e,{sourceEvent:this.sourceEvent,target:g,transform:this.that.__zoom,dispatch:p}),t)}},g.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:Pd(+e),g):a},g.filter=function(e){return arguments.length?(o="function"==typeof e?e:Pd(!!e),g):o},g.touchable=function(e){return arguments.length?(s="function"==typeof e?e:Pd(!!e),g):s},g.extent=function(e){return arguments.length?(r="function"==typeof e?e:Pd([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),g):r},g.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],g):[l[0],l[1]]},g.translateExtent=function(e){return arguments.length?(d[0][0]=+e[0][0],d[1][0]=+e[1][0],d[0][1]=+e[0][1],d[1][1]=+e[1][1],g):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},g.constrain=function(e){return arguments.length?(i=e,g):i},g.duration=function(e){return arguments.length?(u=+e,g):u},g.interpolate=function(e){return arguments.length?(c=e,g):c},g.on=function(){var e=p.on.apply(p,arguments);return e===p?g:e},g.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,g):Math.sqrt(f)},g.tapDistance=function(e){return arguments.length?(h=+e,g):h},g}Ld.prototype=Dd.prototype;const Zd=()=>"Only child nodes can use a parent extent.",Yd=(e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${"source"===e?n:o}", edge id: ${t}.`,Xd=e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,Gd=()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs.",Jd=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Qd=["Enter"," ","Escape"],eu={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var tu,nu,ou,ru,iu,au;(nu=tu||(tu={})).Strict="strict",nu.Loose="loose",(ru=ou||(ou={})).Free="free",ru.Vertical="vertical",ru.Horizontal="horizontal",(au=iu||(iu={})).Partial="partial",au.Full="full";const su={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var lu,du,uu,cu,pu,fu;(du=lu||(lu={})).Bezier="default",du.Straight="straight",du.Step="step",du.SmoothStep="smoothstep",du.SimpleBezier="simplebezier",(cu=uu||(uu={})).Arrow="arrow",cu.ArrowClosed="arrowclosed",(fu=pu||(pu={})).Left="left",fu.Top="top",fu.Right="right",fu.Bottom="bottom";const hu={[pu.Left]:pu.Right,[pu.Right]:pu.Left,[pu.Top]:pu.Bottom,[pu.Bottom]:pu.Top};function gu(e,t,n){if(!n)return;const o=[];e.forEach((e,n)=>{(null==t?void 0:t.has(n))||o.push(e)}),o.length&&n(o)}const vu=e=>"id"in e&&"source"in e&&"target"in e,mu=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),yu=(e,t=[0,0])=>{var n;const{width:o,height:r}=Bu(e),i=null!=(n=e.origin)?n:t,a=o*i[0],s=r*i[1];return{x:e.position.x-a,y:e.position.y-s}},wu=(e,t={})=>{if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(e=>{if(void 0===t.filter||t.filter(e)){const t=Iu(e);n=Au(n,t)}}),Ou(n)},bu=(e,t,[n,o,r]=[0,0,1],i=!1,a=!1)=>{var s,l,d,u,c,p;const f=fe(pe({},Wu(t,[n,o,r])),{width:t.width/r,height:t.height/r}),h=[];for(const g of e.values()){const{measured:e,selectable:t=!0,hidden:n=!1}=g;if(a&&!t||n)continue;const o=null!=(d=null!=(l=null!=(s=e.width)?s:g.width)?l:g.initialWidth)?d:null,r=null!=(p=null!=(c=null!=(u=e.height)?u:g.height)?c:g.initialHeight)?p:null,v=zu(f,Mu(g)),m=(null!=o?o:0)*(null!=r?r:0),y=i&&v>0;(!g.internals.handleBounds||y||v>=m||g.dragging)&&h.push(g)}return h};function xu(e,t){return xe(this,arguments,function*({nodes:e,width:t,height:n,panZoom:o,minZoom:r,maxZoom:i},a){var s,l,d;if(0===e.size)return Promise.resolve(!0);const u=function(e,t){const n=new Map,o=(null==t?void 0:t.nodes)?new Set(t.nodes.map(e=>e.id)):null;return e.forEach(e=>{!e.measured.width||!e.measured.height||!(null==t?void 0:t.includeHiddenNodes)&&e.hidden||o&&!o.has(e.id)||n.set(e.id,e)}),n}(e,a),c=wu(u),p=Hu(c,t,n,null!=(s=null==a?void 0:a.minZoom)?s:r,null!=(l=null==a?void 0:a.maxZoom)?l:i,null!=(d=null==a?void 0:a.padding)?d:.1);return yield o.setViewport(p,{duration:null==a?void 0:a.duration,ease:null==a?void 0:a.ease,interpolate:null==a?void 0:a.interpolate}),Promise.resolve(!0)})}function ku({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:i}){var a,s,l;const d=n.get(e),u=d.parentId?n.get(d.parentId):void 0,{x:c,y:p}=u?u.internals.positionAbsolute:{x:0,y:0},f=null!=(a=d.origin)?a:o;let h=d.extent||r;if("parent"!==d.extent||d.expandParent)u&&Vu(d.extent)&&(h=[[d.extent[0][0]+c,d.extent[0][1]+p],[d.extent[1][0]+c,d.extent[1][1]+p]]);else if(u){const e=u.measured.width,t=u.measured.height;e&&t&&(h=[[c,p],[c+e,p+t]])}else null==i||i("005",Zd());const g=Vu(h)?Tu(t,h,d.measured):t;return void 0!==d.measured.width&&void 0!==d.measured.height||null==i||i("015",Gd()),{position:{x:g.x-c+(null!=(s=d.measured.width)?s:0)*f[0],y:g.y-p+(null!=(l=d.measured.height)?l:0)*f[1]},positionAbsolute:g}}function _u(e){return xe(this,arguments,function*({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:r}){const i=new Set(e.map(e=>e.id)),a=[];for(const p of n){if(!1===p.deletable)continue;const e=i.has(p.id),t=!e&&p.parentId&&a.find(e=>e.id===p.parentId);(e||t)&&a.push(p)}const s=new Set(t.map(e=>e.id)),l=o.filter(e=>!1!==e.deletable),d=((e,t)=>{const n=new Set;return e.forEach(e=>{n.add(e.id)}),t.filter(e=>n.has(e.source)||n.has(e.target))})(a,l),u=d;for(const p of l){s.has(p.id)&&!u.find(e=>e.id===p.id)&&u.push(p)}if(!r)return{edges:u,nodes:a};const c=yield r({nodes:a,edges:u});return"boolean"==typeof c?c?{edges:u,nodes:a}:{edges:[],nodes:[]}:c})}const Su=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Tu=(e={x:0,y:0},t,n)=>{var o,r;return{x:Su(e.x,t[0][0],t[1][0]-(null!=(o=null==n?void 0:n.width)?o:0)),y:Su(e.y,t[0][1],t[1][1]-(null!=(r=null==n?void 0:n.height)?r:0))}};function Cu(e,t,n){const{width:o,height:r}=Bu(n),{x:i,y:a}=n.internals.positionAbsolute;return Tu(e,[[i,a],[i+o,a+r]],t)}const Eu=(e,t,n)=>e<t?Su(Math.abs(e-t),1,t)/t:e>n?-Su(Math.abs(e-n),1,t)/t:0,$u=(e,t,n=15,o=40)=>[Eu(e.x,o,t.width-o)*n,Eu(e.y,o,t.height-o)*n],Au=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Nu=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),Ou=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Mu=(e,t=[0,0])=>{var n,o,r,i,a,s,l,d;const{x:u,y:c}=mu(e)?e.internals.positionAbsolute:yu(e,t);return{x:u,y:c,width:null!=(i=null!=(r=null!=(o=null==(n=e.measured)?void 0:n.width)?o:e.width)?r:e.initialWidth)?i:0,height:null!=(d=null!=(l=null!=(s=null==(a=e.measured)?void 0:a.height)?s:e.height)?l:e.initialHeight)?d:0}},Iu=(e,t=[0,0])=>{var n,o,r,i,a,s,l,d;const{x:u,y:c}=mu(e)?e.internals.positionAbsolute:yu(e,t);return{x:u,y:c,x2:u+(null!=(i=null!=(r=null!=(o=null==(n=e.measured)?void 0:n.width)?o:e.width)?r:e.initialWidth)?i:0),y2:c+(null!=(d=null!=(l=null!=(s=null==(a=e.measured)?void 0:a.height)?s:e.height)?l:e.initialHeight)?d:0)}},Pu=(e,t)=>Ou(Au(Nu(e),Nu(t))),zu=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},Du=e=>Ru(e.width)&&Ru(e.height)&&Ru(e.x)&&Ru(e.y),Ru=e=>!isNaN(e)&&isFinite(e),Lu=(e,t)=>{},ju=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Wu=({x:e,y:t},[n,o,r],i=!1,a=[1,1])=>{const s={x:(e-n)/r,y:(t-o)/r};return i?ju(s,a):s},qu=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o});function Fu(e,t){if("number"==typeof e)return Math.floor(.5*(t-t/(1+e)));if("string"==typeof e&&e.endsWith("px")){const t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"==typeof e&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}const Hu=(e,t,n,o,r,i)=>{const a=function(e,t,n){var o,r,i,a,s,l,d,u;if("string"==typeof e||"number"==typeof e){const o=Fu(e,n),r=Fu(e,t);return{top:o,right:r,bottom:o,left:r,x:2*r,y:2*o}}if("object"==typeof e){const c=Fu(null!=(r=null!=(o=e.top)?o:e.y)?r:0,n),p=Fu(null!=(a=null!=(i=e.bottom)?i:e.y)?a:0,n),f=Fu(null!=(l=null!=(s=e.left)?s:e.x)?l:0,t),h=Fu(null!=(u=null!=(d=e.right)?d:e.x)?u:0,t);return{top:c,right:h,bottom:p,left:f,x:f+h,y:c+p}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(i,t,n),s=(t-a.x)/e.width,l=(n-a.y)/e.height,d=Math.min(s,l),u=Su(d,o,r),c=t/2-(e.x+e.width/2)*u,p=n/2-(e.y+e.height/2)*u,f=function(e,t,n,o,r,i){const{x:a,y:s}=qu(e,[t,n,o]),{x:l,y:d}=qu({x:e.x+e.width,y:e.y+e.height},[t,n,o]),u=r-l,c=i-d;return{left:Math.floor(a),top:Math.floor(s),right:Math.floor(u),bottom:Math.floor(c)}}(e,c,p,u,t,n),h=Math.min(f.left-a.left,0),g=Math.min(f.top-a.top,0);return{x:c-h+Math.min(f.right-a.right,0),y:p-g+Math.min(f.bottom-a.bottom,0),zoom:u}},Uu=()=>{var e;return"undefined"!=typeof navigator&&(null==(e=null==navigator?void 0:navigator.userAgent)?void 0:e.indexOf("Mac"))>=0};function Vu(e){return null!=e&&"parent"!==e}function Bu(e){var t,n,o,r,i,a,s,l;return{width:null!=(r=null!=(o=null!=(n=null==(t=e.measured)?void 0:t.width)?n:e.width)?o:e.initialWidth)?r:0,height:null!=(l=null!=(s=null!=(a=null==(i=e.measured)?void 0:i.height)?a:e.height)?s:e.initialHeight)?l:0}}function Ku(e){var t,n,o,r,i,a;return void 0!==(null!=(o=null!=(n=null==(t=e.measured)?void 0:t.width)?n:e.width)?o:e.initialWidth)&&void 0!==(null!=(a=null!=(i=null==(r=e.measured)?void 0:r.height)?i:e.height)?a:e.initialHeight)}function Zu(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o,containerBounds:r}){var i,a;const{x:s,y:l}=ec(e),d=Wu({x:s-(null!=(i=null==r?void 0:r.left)?i:0),y:l-(null!=(a=null==r?void 0:r.top)?a:0)},o),{x:u,y:c}=n?ju(d,t):d;return pe({xSnapped:u,ySnapped:c},d)}const Yu=e=>({width:e.offsetWidth,height:e.offsetHeight}),Xu=e=>{var t;return(null==(t=null==e?void 0:e.getRootNode)?void 0:t.call(e))||(null==window?void 0:window.document)},Gu=["INPUT","SELECT","TEXTAREA"];function Ju(e){var t,n;const o=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target;if(1!==(null==o?void 0:o.nodeType))return!1;return Gu.includes(o.nodeName)||o.hasAttribute("contenteditable")||!!o.closest(".nokey")}const Qu=e=>"clientX"in e,ec=(e,t)=>{var n,o,r,i;const a=Qu(e),s=a?e.clientX:null==(n=e.touches)?void 0:n[0].clientX,l=a?e.clientY:null==(o=e.touches)?void 0:o[0].clientY;return{x:s-(null!=(r=null==t?void 0:t.left)?r:0),y:l-(null!=(i=null==t?void 0:t.top)?i:0)}},tc=(e,t,n,o,r)=>{const i=t.querySelectorAll(`.${e}`);return i&&i.length?Array.from(i).map(t=>{const i=t.getBoundingClientRect();return pe({id:t.getAttribute("data-handleid"),type:e,nodeId:r,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/o,y:(i.top-n.top)/o},Yu(t))}):null};function nc(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function oc({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){switch(e){case pu.Left:return[t-nc(t-o,i),n];case pu.Right:return[t+nc(o-t,i),n];case pu.Top:return[t,n-nc(n-r,i)];case pu.Bottom:return[t,n+nc(r-n,i)]}}function rc({sourceX:e,sourceY:t,sourcePosition:n=pu.Bottom,targetX:o,targetY:r,targetPosition:i=pu.Top,curvature:a=.25}){const[s,l]=oc({pos:n,x1:e,y1:t,x2:o,y2:r,c:a}),[d,u]=oc({pos:i,x1:o,y1:r,x2:e,y2:t,c:a}),[c,p,f,h]=function({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:a,targetControlY:s}){const l=.125*e+.375*r+.375*a+.125*n,d=.125*t+.375*i+.375*s+.125*o;return[l,d,Math.abs(l-e),Math.abs(d-t)]}({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:s,sourceControlY:l,targetControlX:d,targetControlY:u});return[`M${e},${t} C${s},${l} ${d},${u} ${o},${r}`,c,p,f,h]}function ic({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,a=Math.abs(o-t)/2;return[i,o<t?o+a:o-a,r,a]}function ac({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o,elevateOnSelect:r=!1}){if(void 0!==o)return o;return(r&&n?1e3:0)+Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0)}function sc({sourceNode:e,targetNode:t,width:n,height:o,transform:r}){const i=Au(Iu(e),Iu(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const a={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]};return zu(a,Ou(i))>0}const lc=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`;function dc({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,i,a,s]=ic({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,i,a,s]}const uc={[pu.Left]:{x:-1,y:0},[pu.Right]:{x:1,y:0},[pu.Top]:{x:0,y:-1},[pu.Bottom]:{x:0,y:1}},cc=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function pc({source:e,sourcePosition:t=pu.Bottom,target:n,targetPosition:o=pu.Top,center:r,offset:i,stepPosition:a}){var s,l,d,u;const c=uc[t],p=uc[o],f={x:e.x+c.x*i,y:e.y+c.y*i},h={x:n.x+p.x*i,y:n.y+p.y*i},g=(({source:e,sourcePosition:t=pu.Bottom,target:n})=>t===pu.Left||t===pu.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1})({source:f,sourcePosition:t,target:h}),v=0!==g.x?"x":"y",m=g[v];let y,w,b=[];const x={x:0,y:0},k={x:0,y:0},[,,_,S]=ic({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[v]*p[v]===-1){"x"===v?(y=null!=(s=r.x)?s:f.x+(h.x-f.x)*a,w=null!=(l=r.y)?l:(f.y+h.y)/2):(y=null!=(d=r.x)?d:(f.x+h.x)/2,w=null!=(u=r.y)?u:f.y+(h.y-f.y)*a);const e=[{x:y,y:f.y},{x:y,y:h.y}],t=[{x:f.x,y:w},{x:h.x,y:w}];b=c[v]===m?"x"===v?e:t:"x"===v?t:e}else{const r=[{x:f.x,y:h.y}],a=[{x:h.x,y:f.y}];if(b="x"===v?c.x===m?a:r:c.y===m?r:a,t===o){const t=Math.abs(e[v]-n[v]);if(t<=i){const o=Math.min(i-1,i-t);c[v]===m?x[v]=(f[v]>e[v]?-1:1)*o:k[v]=(h[v]>n[v]?-1:1)*o}}if(t!==o){const e="x"===v?"y":"x",t=c[v]===p[e],n=f[e]>h[e],o=f[e]<h[e];(1===c[v]&&(!t&&n||t&&o)||1!==c[v]&&(!t&&o||t&&n))&&(b="x"===v?r:a)}const s={x:f.x+x.x,y:f.y+x.y},l={x:h.x+k.x,y:h.y+k.y};Math.max(Math.abs(s.x-b[0].x),Math.abs(l.x-b[0].x))>=Math.max(Math.abs(s.y-b[0].y),Math.abs(l.y-b[0].y))?(y=(s.x+l.x)/2,w=b[0].y):(y=b[0].x,w=(s.y+l.y)/2)}return[[e,{x:f.x+x.x,y:f.y+x.y},...b,{x:h.x+k.x,y:h.y+k.y},n],y,w,_,S]}function fc({sourceX:e,sourceY:t,sourcePosition:n=pu.Bottom,targetX:o,targetY:r,targetPosition:i=pu.Top,borderRadius:a=5,centerX:s,centerY:l,offset:d=20,stepPosition:u=.5}){const[c,p,f,h,g]=pc({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:s,y:l},offset:d,stepPosition:u});return[c.reduce((e,t,n)=>{let o="";return o=n>0&&n<c.length-1?function(e,t,n,o){const r=Math.min(cc(e,t)/2,cc(t,n)/2,o),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a)return`L ${i+r*(e.x<n.x?-1:1)},${a}Q ${i},${a} ${i},${a+r*(e.y<n.y?1:-1)}`;const s=e.x<n.x?1:-1;return`L ${i},${a+r*(e.y<n.y?-1:1)}Q ${i},${a} ${i+r*s},${a}`}(c[n-1],t,c[n+1],a):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=o},""),p,f,h,g]}function hc(e){var t;return e&&!(!e.internals.handleBounds&&!(null==(t=e.handles)?void 0:t.length))&&!!(e.measured.width||e.width||e.initialWidth)}function gc(e){var t,n,o,r,i;const{sourceNode:a,targetNode:s}=e;if(!hc(a)||!hc(s))return null;const l=a.internals.handleBounds||vc(a.handles),d=s.internals.handleBounds||vc(s.handles),u=yc(null!=(t=null==l?void 0:l.source)?t:[],e.sourceHandle),c=yc(e.connectionMode===tu.Strict?null!=(n=null==d?void 0:d.target)?n:[]:(null!=(o=null==d?void 0:d.target)?o:[]).concat(null!=(r=null==d?void 0:d.source)?r:[]),e.targetHandle);if(!u||!c)return null==(i=e.onError)||i.call(e,"008",Yd(u?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const p=(null==u?void 0:u.position)||pu.Bottom,f=(null==c?void 0:c.position)||pu.Top,h=mc(a,u,p),g=mc(s,c,f);return{sourceX:h.x,sourceY:h.y,targetX:g.x,targetY:g.y,sourcePosition:p,targetPosition:f}}function vc(e){var t,n;if(!e)return null;const o=[],r=[];for(const i of e)i.width=null!=(t=i.width)?t:1,i.height=null!=(n=i.height)?n:1,"source"===i.type?o.push(i):"target"===i.type&&r.push(i);return{source:o,target:r}}function mc(e,t,n=pu.Left,o=!1){var r,i,a;const s=(null!=(r=null==t?void 0:t.x)?r:0)+e.internals.positionAbsolute.x,l=(null!=(i=null==t?void 0:t.y)?i:0)+e.internals.positionAbsolute.y,{width:d,height:u}=null!=t?t:Bu(e);if(o)return{x:s+d/2,y:l+u/2};switch(null!=(a=null==t?void 0:t.position)?a:n){case pu.Top:return{x:s+d/2,y:l};case pu.Right:return{x:s+d,y:l+u/2};case pu.Bottom:return{x:s+d/2,y:l+u};case pu.Left:return{x:s,y:l+u/2}}}function yc(e,t){return e&&(t?e.find(e=>e.id===t):e[0])||null}function wc(e,t){if(!e)return"";if("string"==typeof e)return e;return`${t?`${t}__`:""}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`}const bc={nodeOrigin:[0,0],nodeExtent:Jd,elevateNodesOnSelect:!0,defaults:{}},xc=fe(pe({},bc),{checkEquality:!0});function kc(e,t){const n=pe({},e);for(const o in t)void 0!==t[o]&&(n[o]=t[o]);return n}function _c(e,t,n,o){const{elevateNodesOnSelect:r,nodeOrigin:i,nodeExtent:a}=kc(bc,o),s=e.parentId,l=t.get(s);if(!l)return void console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);!function(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n);const d=r?1e3:0,{x:u,y:c,z:p}=function(e,t,n,o,r){var i;const{x:a,y:s}=t.internals.positionAbsolute,l=Bu(e),d=yu(e,n),u=Vu(e.extent)?Tu(d,e.extent,l):d;let c=Tu({x:a+u.x,y:s+u.y},o,l);"parent"===e.extent&&(c=Cu(c,l,t));const p=Sc(e,r),f=null!=(i=t.internals.z)?i:0;return{x:c.x,y:c.y,z:f>=p?f+1:p}}(e,l,i,a,d),{positionAbsolute:f}=e.internals,h=u!==f.x||c!==f.y;(h||p!==e.internals.z)&&t.set(e.id,fe(pe({},e),{internals:fe(pe({},e.internals),{positionAbsolute:h?{x:u,y:c}:f,z:p})}))}function Sc(e,t){return(Ru(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Tc(e,t,n,o,r,i){const a=null==o?void 0:o.querySelector(".xyflow__viewport");let s=!1;if(!a)return{changes:[],updatedInternals:s};const l=[],d=window.getComputedStyle(a),{m22:u}=new window.DOMMatrixReadOnly(d.transform),c=[];for(const p of e.values()){const e=t.get(p.id);if(!e)continue;if(e.hidden){t.set(e.id,fe(pe({},e),{internals:fe(pe({},e.internals),{handleBounds:void 0})})),s=!0;continue}const o=Yu(p.nodeElement),a=e.measured.width!==o.width||e.measured.height!==o.height;if(!(!o.width||!o.height||!a&&e.internals.handleBounds&&!p.force)){const d=p.nodeElement.getBoundingClientRect(),f=Vu(e.extent)?e.extent:i;let{positionAbsolute:h}=e.internals;e.parentId&&"parent"===e.extent?h=Cu(h,o,t.get(e.parentId)):f&&(h=Tu(h,f,o));const g=fe(pe({},e),{measured:o,internals:fe(pe({},e.internals),{positionAbsolute:h,handleBounds:{source:tc("source",p.nodeElement,d,u,e.id),target:tc("target",p.nodeElement,d,u,e.id)}})});t.set(e.id,g),e.parentId&&_c(g,t,n,{nodeOrigin:r}),s=!0,a&&(l.push({id:e.id,type:"dimensions",dimensions:o}),e.expandParent&&e.parentId&&c.push({id:e.id,parentId:e.parentId,rect:Mu(g,r)}))}}if(c.length>0){const e=function(e,t,n,o=[0,0]){var r,i;const a=[],s=new Map;for(const l of e){const e=t.get(l.parentId);if(!e)continue;const n=null!=(i=null==(r=s.get(l.parentId))?void 0:r.expandedRect)?i:Mu(e),o=Pu(n,l.rect);s.set(l.parentId,{expandedRect:o,parent:e})}return s.size>0&&s.forEach(({expandedRect:t,parent:r},i)=>{var s,l;const d=r.internals.positionAbsolute,u=Bu(r),c=null!=(s=r.origin)?s:o,p=t.x<d.x?Math.round(Math.abs(d.x-t.x)):0,f=t.y<d.y?Math.round(Math.abs(d.y-t.y)):0,h=Math.max(u.width,Math.round(t.width)),g=Math.max(u.height,Math.round(t.height)),v=(h-u.width)*c[0],m=(g-u.height)*c[1];(p>0||f>0||v||m)&&(a.push({id:i,type:"position",position:{x:r.position.x-p+v,y:r.position.y-f+m}}),null==(l=n.get(i))||l.forEach(t=>{e.some(e=>e.id===t.id)||a.push({id:t.id,type:"position",position:{x:t.position.x+p,y:t.position.y+f}})})),(u.width<t.width||u.height<t.height||p||f)&&a.push({id:i,type:"dimensions",setAttributes:!0,dimensions:{width:h+(p?c[0]*p-v:0),height:g+(f?c[1]*f-m:0)}})}),a}(c,t,n,r);l.push(...e)}return{changes:l,updatedInternals:s}}function Cc(e,t,n,o,r,i){let a=r;const s=o.get(a)||new Map;o.set(a,s.set(n,t)),a=`${r}-${e}`;const l=o.get(a)||new Map;if(o.set(a,l.set(n,t)),i){a=`${r}-${e}-${i}`;const s=o.get(a)||new Map;o.set(a,s.set(n,t))}}function Ec(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return!!n&&(!!n.selected||Ec(n,t))}function $c(e,t,n){var o;let r=e;do{if(null==(o=null==r?void 0:r.matches)?void 0:o.call(r,t))return!0;if(r===n)return!1;r=null==r?void 0:r.parentElement}while(r);return!1}function Ac({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){var r,i,a;const s=[];for(const[d,u]of t){const e=null==(r=n.get(d))?void 0:r.internals.userNode;e&&s.push(fe(pe({},e),{position:u.position,dragging:o}))}if(!e)return[s[0],s];const l=null==(i=n.get(e))?void 0:i.internals.userNode;return[l?fe(pe({},l),{position:(null==(a=t.get(e))?void 0:a.position)||l.position,dragging:o}):s[0],s]}function Nc({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:r}){let i={x:null,y:null},a=0,s=new Map,l=!1,d={x:0,y:0},u=null,c=!1,p=null,f=!1,h=!1,g=null;return{update:function({noDragClassName:v,handleSelector:m,domNode:y,isSelectable:w,nodeId:b,nodeClickDistance:x=0}){function k({x:e,y:n}){const{nodeLookup:r,nodeExtent:a,snapGrid:l,snapToGrid:d,nodeOrigin:u,onNodeDrag:c,onSelectionDrag:p,onError:f,updateNodePositions:v}=t();i={x:e,y:n};let m=!1;const y=s.size>1,w=y&&a?Nu(wu(s)):null,x=y&&d?function({dragItems:e,snapGrid:t,x:n,y:o}){const r=e.values().next().value;if(!r)return null;const i={x:n-r.distance.x,y:o-r.distance.y},a=ju(i,t);return{x:a.x-i.x,y:a.y-i.y}}({dragItems:s,snapGrid:l,x:e,y:n}):null;for(const[t,o]of s){if(!r.has(t))continue;let i={x:e-o.distance.x,y:n-o.distance.y};d&&(i=x?{x:Math.round(i.x+x.x),y:Math.round(i.y+x.y)}:ju(i,l));let s=null;if(y&&a&&!o.extent&&w){const{positionAbsolute:e}=o.internals,t=e.x-w.x+a[0][0],n=e.x+o.measured.width-w.x2+a[1][0];s=[[t,e.y-w.y+a[0][1]],[n,e.y+o.measured.height-w.y2+a[1][1]]]}const{position:c,positionAbsolute:p}=ku({nodeId:t,nextPosition:i,nodeLookup:r,nodeExtent:s||a,nodeOrigin:u,onError:f});m=m||o.position.x!==c.x||o.position.y!==c.y,o.position=c,o.internals.positionAbsolute=p}if(h=h||m,m&&(v(s,!0),g&&(o||c||!b&&p))){const[e,t]=Ac({nodeId:b,dragItems:s,nodeLookup:r});null==o||o(g,s,e,t),null==c||c(g,e,t),b||null==p||p(g,t)}}function _(){return xe(this,null,function*(){var e,n;if(!u)return;const{transform:o,panBy:r,autoPanSpeed:s,autoPanOnNodeDrag:c}=t();if(!c)return l=!1,void cancelAnimationFrame(a);const[p,f]=$u(d,u,s);0===p&&0===f||(i.x=(null!=(e=i.x)?e:0)-p/o[2],i.y=(null!=(n=i.y)?n:0)-f/o[2],(yield r({x:p,y:f}))&&k(i)),a=requestAnimationFrame(_)})}function S(o){var r;const{nodeLookup:a,multiSelectionActive:l,nodesDraggable:d,transform:p,snapGrid:f,snapToGrid:h,selectNodesOnDrag:g,onNodeDragStart:v,onSelectionDragStart:m,unselectNodesAndEdges:y}=t();c=!0,g&&w||l||!b||(null==(r=a.get(b))?void 0:r.selected)||y(),w&&g&&b&&(null==e||e(b));const x=Zu(o.sourceEvent,{transform:p,snapGrid:f,snapToGrid:h,containerBounds:u});if(i=x,s=function(e,t,n,o){var r,i;const a=new Map;for(const[s,l]of e)if((l.selected||l.id===o)&&(!l.parentId||!Ec(l,e))&&(l.draggable||t&&void 0===l.draggable)){const t=e.get(s);t&&a.set(s,{id:s,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:null!=(r=t.measured.width)?r:0,height:null!=(i=t.measured.height)?i:0}})}return a}(a,d,x,b),s.size>0&&(n||v||!b&&m)){const[e,t]=Ac({nodeId:b,dragItems:s,nodeLookup:a});null==n||n(o.sourceEvent,s,e,t),null==v||v(o.sourceEvent,e,t),b||null==m||m(o.sourceEvent,t)}}p=_s(y);const T=function(){var e,t,n,o,r=Is,i=Ps,a=zs,s=Ds,l={},d=sa("start","drag","end"),u=0,c=0;function p(e){e.on("mousedown.drag",f).filter(s).on("touchstart.drag",v).on("touchmove.drag",m,Ts).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(a,s){if(!o&&r.call(this,a,s)){var l=w(this,i.call(this,a,s),a,s,"mouse");l&&(_s(a.view).on("mousemove.drag",h,Cs).on("mouseup.drag",g,Cs),As(a.view),Es(a),n=!1,e=a.clientX,t=a.clientY,l("start",a))}}function h(o){if($s(o),!n){var r=o.clientX-e,i=o.clientY-t;n=r*r+i*i>c}l.mouse("drag",o)}function g(e){_s(e.view).on("mousemove.drag mouseup.drag",null),Ns(e.view,n),$s(e),l.mouse("end",e)}function v(e,t){if(r.call(this,e,t)){var n,o,a=e.changedTouches,s=i.call(this,e,t),l=a.length;for(n=0;n<l;++n)(o=w(this,s,e,t,a[n].identifier,a[n]))&&(Es(e),o("start",e,a[n]))}}function m(e){var t,n,o=e.changedTouches,r=o.length;for(t=0;t<r;++t)(n=l[o[t].identifier])&&($s(e),n("drag",e,o[t]))}function y(e){var t,n,r=e.changedTouches,i=r.length;for(o&&clearTimeout(o),o=setTimeout(function(){o=null},500),t=0;t<i;++t)(n=l[r[t].identifier])&&(Es(e),n("end",e,r[t]))}function w(e,t,n,o,r,i){var s,c,f,h=d.copy(),g=Ss(i||n,t);if(null!=(f=a.call(e,new Ms("beforestart",{sourceEvent:n,target:p,identifier:r,active:u,x:g[0],y:g[1],dx:0,dy:0,dispatch:h}),o)))return s=f.x-g[0]||0,c=f.y-g[1]||0,function n(i,a,d){var v,m=g;switch(i){case"start":l[r]=n,v=u++;break;case"end":delete l[r],--u;case"drag":g=Ss(d||a,t),v=u}h.call(i,e,new Ms(i,{sourceEvent:a,subject:f,target:p,identifier:r,active:v,x:g[0]+s,y:g[1]+c,dx:g[0]-m[0],dy:g[1]-m[1],dispatch:h}),o)}}return p.filter=function(e){return arguments.length?(r="function"==typeof e?e:Os(!!e),p):r},p.container=function(e){return arguments.length?(i="function"==typeof e?e:Os(e),p):i},p.subject=function(e){return arguments.length?(a="function"==typeof e?e:Os(e),p):a},p.touchable=function(e){return arguments.length?(s="function"==typeof e?e:Os(!!e),p):s},p.on=function(){var e=d.on.apply(d,arguments);return e===d?p:e},p.clickDistance=function(e){return arguments.length?(c=(e=+e)*e,p):Math.sqrt(c)},p}().clickDistance(x).on("start",e=>{const{domNode:n,nodeDragThreshold:o,transform:r,snapGrid:a,snapToGrid:s}=t();u=(null==n?void 0:n.getBoundingClientRect())||null,f=!1,h=!1,g=e.sourceEvent,0===o&&S(e);const l=Zu(e.sourceEvent,{transform:r,snapGrid:a,snapToGrid:s,containerBounds:u});i=l,d=ec(e.sourceEvent,u)}).on("drag",e=>{var n,o;const{autoPanOnNodeDrag:r,transform:a,snapGrid:p,snapToGrid:h,nodeDragThreshold:v,nodeLookup:m}=t(),y=Zu(e.sourceEvent,{transform:a,snapGrid:p,snapToGrid:h,containerBounds:u});if(g=e.sourceEvent,("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||b&&!m.has(b))&&(f=!0),!f){if(!l&&r&&c&&(l=!0,_()),!c){const t=y.xSnapped-(null!=(n=i.x)?n:0),r=y.ySnapped-(null!=(o=i.y)?o:0);Math.sqrt(t*t+r*r)>v&&S(e)}(i.x!==y.xSnapped||i.y!==y.ySnapped)&&s&&c&&(d=ec(e.sourceEvent,u),k(y))}}).on("end",e=>{if(c&&!f&&(l=!1,c=!1,cancelAnimationFrame(a),s.size>0)){const{nodeLookup:n,updateNodePositions:o,onNodeDragStop:i,onSelectionDragStop:a}=t();if(h&&(o(s,!1),h=!1),r||i||!b&&a){const[t,o]=Ac({nodeId:b,dragItems:s,nodeLookup:n,dragging:!1});null==r||r(e.sourceEvent,s,t,o),null==i||i(e.sourceEvent,t,o),b||null==a||a(e.sourceEvent,o)}}}).filter(e=>{const t=e.target;return!e.button&&(!v||!$c(t,`.${v}`,y))&&(!m||$c(t,m,y))});p.call(T)},destroy:function(){null==p||p.on(".drag",null)}}}function Oc(e,t,n,o){var r,i,a,s,l;let d=[],u=1/0;const c=function(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const i of t.values())zu(r,Mu(i))>0&&o.push(i);return o}(e,n,t+250);for(const p of c){const n=[...null!=(i=null==(r=p.internals.handleBounds)?void 0:r.source)?i:[],...null!=(s=null==(a=p.internals.handleBounds)?void 0:a.target)?s:[]];for(const r of n){if(o.nodeId===r.nodeId&&o.type===r.type&&o.id===r.id)continue;const{x:n,y:i}=mc(p,r,r.position,!0),a=Math.sqrt(Math.pow(n-e.x,2)+Math.pow(i-e.y,2));a>t||(a<u?(d=[fe(pe({},r),{x:n,y:i})],u=a):a===u&&d.push(fe(pe({},r),{x:n,y:i})))}}if(!d.length)return null;if(d.length>1){const e="source"===o.type?"target":"source";return null!=(l=d.find(t=>t.type===e))?l:d[0]}return d[0]}function Mc(e,t,n,o,r,i=!1){var a,s,l,d,u,c;const p=o.get(e);if(!p)return null;const f="strict"===r?null==(a=p.internals.handleBounds)?void 0:a[t]:[...null!=(l=null==(s=p.internals.handleBounds)?void 0:s.source)?l:[],...null!=(u=null==(d=p.internals.handleBounds)?void 0:d.target)?u:[]],h=null!=(c=n?null==f?void 0:f.find(e=>e.id===n):null==f?void 0:f[0])?c:null;return h&&i?pe(pe({},h),mc(p,h,h.position,!0)):h}function Ic(e,t){return e||((null==t?void 0:t.classList.contains("target"))?"target":(null==t?void 0:t.classList.contains("source"))?"source":null)}const Pc=()=>!0;function zc(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:a,lib:s,flowId:l,isValidConnection:d=Pc,nodeLookup:u}){const c="target"===i,p=t?a.querySelector(`.${s}-flow__handle[data-id="${l}-${null==t?void 0:t.nodeId}-${null==t?void 0:t.id}-${null==t?void 0:t.type}"]`):null,{x:f,y:h}=ec(e),g=a.elementFromPoint(f,h),v=(null==g?void 0:g.classList.contains(`${s}-flow__handle`))?g:p,m={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const e=Ic(void 0,v),t=v.getAttribute("data-nodeid"),i=v.getAttribute("data-handleid"),a=v.classList.contains("connectable"),s=v.classList.contains("connectableend");if(!t||!e)return m;const l={source:c?t:o,sourceHandle:c?i:r,target:c?o:t,targetHandle:c?r:i};m.connection=l;const p=a&&s&&(n===tu.Strict?c&&"source"===e||!c&&"target"===e:t!==o||i!==r);m.isValid=p&&d(l),m.toHandle=Mc(t,e,i,u,n,!0)}return m}const Dc={onPointerDown:function(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:i,isTarget:a,domNode:s,nodeLookup:l,lib:d,autoPanOnConnect:u,flowId:c,panBy:p,cancelConnection:f,onConnectStart:h,onConnect:g,onConnectEnd:v,isValidConnection:m=Pc,onReconnectEnd:y,updateConnection:w,getTransform:b,getFromHandle:x,autoPanSpeed:k,dragThreshold:_=1,handleDomNode:S}){const T=Xu(e.target);let C,E=0;const{x:$,y:A}=ec(e),N=Ic(i,S),O=null==s?void 0:s.getBoundingClientRect();let M=!1;if(!O||!N)return;const I=Mc(r,N,o,l,t);if(!I)return;let P=ec(e,O),z=!1,D=null,R=!1,L=null;function j(){if(!u||!O)return;const[e,t]=$u(P,O,k);p({x:e,y:t}),E=requestAnimationFrame(j)}const W=fe(pe({},I),{nodeId:r,type:N,position:I.position}),q=l.get(r);let F={inProgress:!0,isValid:null,from:mc(q,W,pu.Left,!0),fromHandle:W,fromPosition:W.position,fromNode:q,to:P,toHandle:null,toPosition:hu[W.position],toNode:null};function H(){M=!0,w(F),null==h||h(e,{nodeId:r,handleId:o,handleType:N})}function U(e){if(!M){const{x:t,y:n}=ec(e),o=t-$,r=n-A;if(!(o*o+r*r>_*_))return;H()}if(!x()||!W)return void V(e);const i=b();P=ec(e,O),C=Oc(Wu(P,i,!1,[1,1]),n,l,W),z||(j(),z=!0);const s=zc(e,{handle:C,connectionMode:t,fromNodeId:r,fromHandleId:o,fromType:a?"target":"source",isValidConnection:m,doc:T,lib:d,flowId:c,nodeLookup:l});L=s.handleDomNode,D=s.connection,R=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!C,s.isValid);const u=fe(pe({},F),{isValid:R,to:s.toHandle&&R?qu({x:s.toHandle.x,y:s.toHandle.y},i):P,toHandle:s.toHandle,toPosition:R&&s.toHandle?s.toHandle.position:hu[W.position],toNode:s.toHandle?l.get(s.toHandle.nodeId):null});R&&C&&F.toHandle&&u.toHandle&&F.toHandle.type===u.toHandle.type&&F.toHandle.nodeId===u.toHandle.nodeId&&F.toHandle.id===u.toHandle.id&&F.to.x===u.to.x&&F.to.y===u.to.y||(w(u),F=u)}function V(e){if(M){(C||L)&&D&&R&&(null==g||g(D));const t=F,{inProgress:n}=t,o=he(t,["inProgress"]),r=fe(pe({},o),{toPosition:F.toHandle?F.toPosition:null});null==v||v(e,r),i&&(null==y||y(e,r))}f(),cancelAnimationFrame(E),z=!1,R=!1,D=null,L=null,T.removeEventListener("mousemove",U),T.removeEventListener("mouseup",V),T.removeEventListener("touchmove",U),T.removeEventListener("touchend",V)}0===_&&H(),T.addEventListener("mousemove",U),T.addEventListener("mouseup",V),T.addEventListener("touchmove",U),T.addEventListener("touchend",V)},isValid:zc};const Rc=e=>({x:e.x,y:e.y,zoom:e.k}),Lc=({x:e,y:t,zoom:n})=>Rd.translate(e,t).scale(n),jc=(e,t)=>e.target.closest(`.${t}`),Wc=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),qc=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Fc=(e,t=0,n=qc,o=()=>{})=>{const r="number"==typeof t&&t>0;return r||o(),r?e.transition().duration(t).ease(n).on("end",o):e},Hc=e=>{const t=e.ctrlKey&&Uu()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function Uc({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:o,translateExtent:r,viewport:i,onPanZoom:a,onPanZoomStart:s,onPanZoomEnd:l,onDraggingChange:d}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},c=e.getBoundingClientRect(),p=Kd().clickDistance(!Ru(o)||o<0?0:o).scaleExtent([t,n]).translateExtent(r),f=_s(e).call(p);y({x:i.x,y:i.y,zoom:Su(i.zoom,t,n)},[[0,0],[c.width,c.height]],r);const h=f.on("wheel.zoom"),g=f.on("dblclick.zoom");function v(e,t){return f?new Promise(n=>{null==p||p.interpolate("linear"===(null==t?void 0:t.interpolate)?Al:Ll).transform(Fc(f,null==t?void 0:t.duration,null==t?void 0:t.ease,()=>n(!0)),e)}):Promise.resolve(!1)}function m(){p.on("zoom",null)}function y(e,t,n){return xe(this,null,function*(){const o=Lc(e),r=null==p?void 0:p.constrain()(o,t,n);return r&&(yield v(r)),new Promise(e=>e(r))})}return p.wheelDelta(Hc),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:o,panOnScroll:r,panOnDrag:i,panOnScrollMode:c,panOnScrollSpeed:v,preventScrolling:y,zoomOnPinch:w,zoomOnScroll:b,zoomOnDoubleClick:x,zoomActivationKeyPressed:k,lib:_,onTransformChange:S}){o&&!u.isZoomingOrPanning&&m();const T=r&&!k&&!o?function({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:i,zoomOnPinch:a,onPanZoomStart:s,onPanZoom:l,onPanZoomEnd:d}){return u=>{if(jc(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const c=n.property("__zoom").k||1;if(u.ctrlKey&&a){const e=Ss(u),t=Hc(u),r=c*Math.pow(2,t);return void o.scaleTo(n,r,e,u)}const p=1===u.deltaMode?20:1;let f=r===ou.Vertical?0:u.deltaX*p,h=r===ou.Horizontal?0:u.deltaY*p;!Uu()&&u.shiftKey&&r!==ou.Vertical&&(f=u.deltaY*p,h=0),o.translateBy(n,-f/c*i,-h/c*i,{internal:!0});const g=Rc(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,null==s||s(u,g)),e.isPanScrolling&&(null==l||l(u,g),e.panScrollTimeout=setTimeout(()=>{null==d||d(u,g),e.isPanScrolling=!1},150))}}({zoomPanValues:u,noWheelClassName:e,d3Selection:f,d3Zoom:p,panOnScrollMode:c,panOnScrollSpeed:v,zoomOnPinch:w,onPanZoomStart:s,onPanZoom:a,onPanZoomEnd:l}):function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,r){const i="wheel"===o.type,a=!t&&i&&!o.ctrlKey,s=jc(o,e);if(o.ctrlKey&&i&&s&&o.preventDefault(),a||s)return null;o.preventDefault(),n.call(this,o,r)}}({noWheelClassName:e,preventScrolling:y,d3ZoomHandler:h});if(f.on("wheel.zoom",T,{passive:!1}),!o){const e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{var r,i,a;if(null==(r=o.sourceEvent)?void 0:r.internal)return;const s=Rc(o.transform);e.mouseButton=(null==(i=o.sourceEvent)?void 0:i.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=s,"mousedown"===(null==(a=o.sourceEvent)?void 0:a.type)&&t(!0),n&&(null==n||n(o.sourceEvent,s))}}({zoomPanValues:u,onDraggingChange:d,onPanZoomStart:s});p.on("start",e);const t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return i=>{var a,s,l;e.usedRightMouseButton=!(!n||!Wc(t,null!=(a=e.mouseButton)?a:0)),(null==(s=i.sourceEvent)?void 0:s.sync)||o([i.transform.x,i.transform.y,i.transform.k]),r&&!(null==(l=i.sourceEvent)?void 0:l.internal)&&(null==r||r(i.sourceEvent,Rc(i.transform)))}}({zoomPanValues:u,panOnDrag:i,onPaneContextMenu:!!n,onPanZoom:a,onTransformChange:S});p.on("zoom",t);const o=function({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:i}){return a=>{var s,l,d,u;if(!(null==(s=a.sourceEvent)?void 0:s.internal)&&(e.isZoomingOrPanning=!1,i&&Wc(t,null!=(l=e.mouseButton)?l:0)&&!e.usedRightMouseButton&&a.sourceEvent&&i(a.sourceEvent),e.usedRightMouseButton=!1,o(!1),r&&(d=e.prevViewport,u=a.transform,d.x!==u.x||d.y!==u.y||d.zoom!==u.k))){const t=Rc(a.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{null==r||r(a.sourceEvent,t)},n?150:0)}}}({zoomPanValues:u,panOnDrag:i,panOnScroll:r,onPaneContextMenu:n,onPanZoomEnd:l,onDraggingChange:d});p.on("end",o)}const C=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:i,userSelectionActive:a,noWheelClassName:s,noPanClassName:l,lib:d}){return u=>{var c;const p=e||t,f=n&&u.ctrlKey;if(1===u.button&&"mousedown"===u.type&&(jc(u,`${d}-flow__node`)||jc(u,`${d}-flow__edge`)))return!0;if(!(o||p||r||i||n))return!1;if(a)return!1;if(jc(u,s)&&"wheel"===u.type)return!1;if(jc(u,l)&&("wheel"!==u.type||r&&"wheel"===u.type&&!e))return!1;if(!n&&u.ctrlKey&&"wheel"===u.type)return!1;if(!n&&"touchstart"===u.type&&(null==(c=u.touches)?void 0:c.length)>1)return u.preventDefault(),!1;if(!p&&!r&&!f&&"wheel"===u.type)return!1;if(!o&&("mousedown"===u.type||"touchstart"===u.type))return!1;if(Array.isArray(o)&&!o.includes(u.button)&&"mousedown"===u.type)return!1;const h=Array.isArray(o)&&o.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||"wheel"===u.type)&&h}}({zoomActivationKeyPressed:k,panOnDrag:i,zoomOnScroll:b,panOnScroll:r,zoomOnDoubleClick:x,zoomOnPinch:w,userSelectionActive:o,noPanClassName:t,noWheelClassName:e,lib:_});p.filter(C),x?f.on("dblclick.zoom",g):f.on("dblclick.zoom",null)},destroy:m,setViewport:function(e,t){return xe(this,null,function*(){const n=Lc(e);return yield v(n,t),new Promise(e=>e(n))})},setViewportConstrained:y,getViewport:function(){const e=f?Ld(f.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return f?new Promise(n=>{null==p||p.interpolate("linear"===(null==t?void 0:t.interpolate)?Al:Ll).scaleTo(Fc(f,null==t?void 0:t.duration,null==t?void 0:t.ease,()=>n(!0)),e)}):Promise.resolve(!1)},scaleBy:function(e,t){return f?new Promise(n=>{null==p||p.interpolate("linear"===(null==t?void 0:t.interpolate)?Al:Ll).scaleBy(Fc(f,null==t?void 0:t.duration,null==t?void 0:t.ease,()=>n(!0)),e)}):Promise.resolve(!1)},setScaleExtent:function(e){null==p||p.scaleExtent(e)},setTranslateExtent:function(e){null==p||p.translateExtent(e)},syncViewport:function(e){if(f){const t=Lc(e),n=f.property("__zoom");n.k===e.zoom&&n.x===e.x&&n.y===e.y||null==p||p.transform(f,t,null,{sync:!0})}},setClickDistance:function(e){const t=!Ru(e)||e<0?0:e;null==p||p.clickDistance(t)}}}var Vc,Bc;(Bc=Vc||(Vc={})).Line="line",Bc.Handle="handle";var Kc=Ir("<div><!></div>");function Zc(e,t){Gt(t,!0);let n=ia(t,"id",3,null),o=ia(t,"type",3,"source"),r=ia(t,"position",19,()=>pu.Top),i=ia(t,"isConnectableStart",3,!0),a=ia(t,"isConnectableEnd",3,!0),s=na(t,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const l=Yt("svelteflow__node_id"),d=Yt("svelteflow__node_connectable");let u=zn(()=>"target"===o()),c=zn(()=>void 0!==t.isConnectable?t.isConnectable:d.value),p=_p(),f=zn(()=>p.ariaLabelConfig),h=null;var g;g=()=>{if(t.onconnect||t.ondisconnect){p.edges;let e=p.connectionLookup.get(`${l}-${o()}${n()?`-${n()}`:""}`);if(h&&!function(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}(e,h)){const n=null!=e?e:new Map;gu(h,n,t.ondisconnect),gu(n,h,t.onconnect)}h=new Map(e)}},ko("$effect.pre"),We&&Ue(g,"name",{value:"$effect.pre"}),_o(1048584,g,!0);let v=zn(()=>{if(!p.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:e,toHandle:t,isValid:r}=p.connection,i=e&&e.nodeId===l&&e.type===o()&&e.id===n(),a=t&&t.nodeId===l&&t.type===o()&&t.id===n();return[!0,i,a,p.connectionMode===tu.Strict?(null==e?void 0:e.type)!==o():l!==(null==e?void 0:e.nodeId)||n()!==(null==e?void 0:e.id),a&&r]}),m=zn(()=>nt(mr(v),5)),y=zn(()=>mr(m)[0]),w=zn(()=>mr(m)[1]),b=zn(()=>mr(m)[2]),x=zn(()=>mr(m)[3]),k=zn(()=>mr(m)[4]);function _(e){var t;const n=p.onbeforeconnect?p.onbeforeconnect(e):e;n&&(p.addEdge(n),null==(t=p.onconnect)||t.call(p,e))}function S(e){var o;const r=Qu(e);e.currentTarget&&(r&&0===e.button||!r)&&Dc.onPointerDown(e,{handleId:n(),nodeId:l,isTarget:mr(u),connectionRadius:p.connectionRadius,domNode:p.domNode,nodeLookup:p.nodeLookup,connectionMode:p.connectionMode,lib:"svelte",autoPanOnConnect:p.autoPanOnConnect,flowId:p.flowId,isValidConnection:null!=(o=t.isValidConnection)?o:p.isValidConnection,updateConnection:p.updateConnection,cancelConnection:p.cancelConnection,panBy:p.panBy,onConnect:_,onConnectStart:(e,t)=>{var n;null==(n=p.onconnectstart)||n.call(p,e,{nodeId:t.nodeId,handleId:t.handleId,handleType:t.handleType})},onConnectEnd:(e,t)=>{var n;null==(n=p.onconnectend)||n.call(p,e,t)},getTransform:()=>[p.viewport.x,p.viewport.y,p.viewport.zoom],getFromHandle:()=>p.connection.fromHandle,dragThreshold:p.connectionDragThreshold,handleDomNode:e.currentTarget})}function T(e){var r,a,s,d;if(!l||!p.clickConnectStartHandle&&!i())return;if(!p.clickConnectStartHandle)return null==(r=p.onclickconnectstart)||r.call(p,e,{nodeId:l,handleId:n(),handleType:o()}),void(p.clickConnectStartHandle={nodeId:l,type:o(),id:n()});const u=Xu(e.target),c=null!=(a=t.isValidConnection)?a:p.isValidConnection,{connectionMode:f,clickConnectStartHandle:h,flowId:g,nodeLookup:v}=p,{connection:m,isValid:y}=Dc.isValid(e,{handle:{nodeId:l,id:n(),type:o()},connectionMode:f,fromNodeId:h.nodeId,fromHandleId:null!=(s=h.id)?s:null,fromType:h.type,isValidConnection:c,flowId:g,doc:u,lib:"svelte",nodeLookup:v});y&&m&&_(m);const w=structuredClone(Lt(p.connection));delete w.inProgress,w.toPosition=w.toHandle?w.toHandle.position:null,null==(d=p.onclickconnectend)||d.call(p,e,w),p.clickConnectStartHandle=null}var C=Kc(),E=()=>{};Ii(C,e=>{var i,a,d,u;return fe(pe({"data-handleid":n(),"data-nodeid":l,"data-handlepos":r(),"data-id":`${null!=(i=p.flowId)?i:""}-${null!=l?l:""}-${null!=(d=null!=(a=n())?a:"null")?d:""}-${null!=(u=o())?u:""}`,class:["svelte-flow__handle",`svelte-flow__handle-${r()}`,p.noDragClass,p.noPanClass,r(),t.class],onmousedown:S,ontouchstart:S,onclick:p.clickConnect?T:void 0,onkeypress:E,style:t.style,role:"button","aria-label":mr(f)["handle.ariaLabel"],tabindex:"-1"},s),{[Ti]:e})},[()=>({valid:mr(k),connectingto:mr(b),connectingfrom:mr(w),source:!mr(u),target:mr(u),connectablestart:i(),connectableend:a(),connectable:mr(c),connectionindicator:mr(c)&&(!mr(y)||mr(x))&&(mr(y)||p.clickConnectStartHandle?a():i())})]),Jr(go(C),()=>{var e;return null!=(e=t.children)?e:Je}),Lr(e,C),Jt()}var Yc=Ir("<!> <!>",1);function Xc(e,t){Gt(t,!0);let n=ia(t,"targetPosition",19,()=>pu.Top),o=ia(t,"sourcePosition",19,()=>pu.Bottom);var r=Yc(),i=vo(r);Zc(i,{type:"target",get position(){return n()}});var a=mo(i);Zc(mo(a),{type:"source",get position(){return o()}}),No(()=>{var e,n;return Br(a,` ${null!=(n=null==(e=t.data)?void 0:e.label)?n:""} `)}),Lr(e,r),Jt()}var Gc=Ir(" <!>",1);var Jc=Ir(" <!>",1);function Qc(e,t,n){if(!n||!t)return;const o="root"===n?t:t.querySelector(`.svelte-flow__${n}`);o&&o.appendChild(e)}function ep(e,t){const n=zn(_p),o=zn(()=>mr(n).domNode);let r;return mr(o)?Qc(e,mr(o),t):r=Eo(()=>{To(()=>{Qc(e,mr(o),t),null==r||r()})}),{update(t){return xe(this,null,function*(){Qc(e,mr(o),t)})},destroy(){e.parentNode&&e.parentNode.removeChild(e),null==r||r()}}}function tp(){let e=Bn("undefined"==typeof window);if(mr(e)){const t=Eo(()=>{To(()=>{Zn(e,!1),null==t||t()})})}return{get value(){return mr(e)}}}const np=e=>(e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e))(e);function op(e){return void 0===e?void 0:`${e}px`}const rp={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ip=Ir("<div><!></div>");var ap=zr("<path></path>"),sp=zr('<path fill="none"></path><!><!>',1);function lp(e,t){let n=ia(t,"interactionWidth",3,20),o=na(t,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var r=sp(),i=vo(r),a=mo(i),s=e=>{var r=ap();Ii(r,()=>pe({d:t.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction"},o)),Lr(e,r)};ni(a,e=>{n()>0&&e(s)});var l=mo(a),d=e=>{!function(e,t){Gt(t,!0);let n=ia(t,"x",3,0),o=ia(t,"y",3,0),r=ia(t,"selectEdgeOnClick",3,!1),i=ia(t,"transparent",3,!1),a=na(t,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const s=_p(),l=Yt("svelteflow__edge_id");let d=zn(()=>{var e;return null==(e=s.visible.edges.get(l))?void 0:e.zIndex});var u=ip(),c=()=>{r()&&l&&s.handleEdgeSelection(l)};Ii(u,e=>fe(pe({class:["svelte-flow__edge-label",{transparent:i()},t.class],tabindex:"-1",onclick:c},a),{[Ci]:e}),[()=>{var e,i;return{display:tp().value?"none":void 0,cursor:r()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${null!=(e=n())?e:""}px,${null!=(i=o())?i:""}px)`,"pointer-events":"all",width:op(t.width),height:op(t.height),"z-index":mr(d)}}],void 0,"svelte-1wg91mu"),Jr(go(u),()=>{var e;return null!=(e=t.children)?e:Je}),ci(u,(e,t)=>null==ep?void 0:ep(e,t),()=>"edge-labels"),Lr(e,u),Jt()}(e,{get x(){return t.labelX},get y(){return t.labelY},get style(){return t.labelStyle},selectEdgeOnClick:!0,children:(e,n)=>{var o=Dr();No(()=>Br(o,t.label)),Lr(e,o)},$$slots:{default:!0}})};ni(l,e=>{t.label&&e(d)}),No(()=>{Mi(i,"id",t.id),Mi(i,"d",t.path),yi(i,0,hi(["svelte-flow__edge-path",t.class])),Mi(i,"marker-start",t.markerStart),Mi(i,"marker-end",t.markerEnd),bi(i,t.style)}),Lr(e,r)}function dp(e,t){Gt(t,!0);let n=zn(()=>{var e;return rc({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,curvature:null==(e=t.pathOptions)?void 0:e.curvature})}),o=zn(()=>nt(mr(n),3)),r=zn(()=>mr(o)[0]),i=zn(()=>mr(o)[1]),a=zn(()=>mr(o)[2]);lp(e,{get id(){return t.id},get path(){return mr(r)},get labelX(){return mr(i)},get labelY(){return mr(a)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),Jt()}var up=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],cp=["difference","intersection","symmetricDifference","union"],pp=!1;const fp=class extends Set{constructor(e){if(super(),ye(this,J),ye(this,Z,new Map),ye(this,Y,Bn(0)),ye(this,X,Bn(0)),ye(this,G,ar||-1),We&&(e=new Set(e),qt(me(this,Y),"SvelteSet version"),qt(me(this,X),"SvelteSet.size")),e){for(var t of e)super.add(t);me(this,X).v=super.size}pp||be(this,J,ee).call(this)}has(e){var t=super.has(e),n=me(this,Z),o=n.get(e);if(void 0===o){if(!t)return mr(me(this,Y)),!1;o=be(this,J,Q).call(this,!0),We&&qt(o,`SvelteSet has(${function(e){return"symbol"==typeof e?`Symbol(${e.description})`:"function"==typeof e?"<function>":"object"==typeof e&&e?"<object>":String(e)}(e)})`),n.set(e,o)}return mr(o),t}add(e){return super.has(e)||(super.add(e),Zn(me(this,X),super.size),Gn(me(this,Y))),this}delete(e){var t=super.delete(e),n=me(this,Z),o=n.get(e);return void 0!==o&&(n.delete(e),Zn(o,!1)),t&&(Zn(me(this,X),super.size),Gn(me(this,Y))),t}clear(){if(0!==super.size){super.clear();var e=me(this,Z);for(var t of e.values())Zn(t,!1);e.clear(),Zn(me(this,X),0),Gn(me(this,Y))}}keys(){return this.values()}values(){return mr(me(this,Y)),super.values()}entries(){return mr(me(this,Y)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return mr(me(this,X))}};Z=new WeakMap,Y=new WeakMap,X=new WeakMap,G=new WeakMap,J=new WeakSet,Q=function(e){return ar===me(this,G)?Bn(e):Vn(e)},ee=function(){pp=!0;var e=fp.prototype,t=Set.prototype;for(const n of up)e[n]=function(...e){return mr(me(this,Y)),t[n].apply(this,e)};for(const n of cp)e[n]=function(...e){mr(me(this,Y));var o=t[n].apply(this,e);return new fp(o)}};let hp=fp;class gp{constructor(e,t){ye(this,te),ye(this,ne),we(this,te,e),we(this,ne,Cn(t))}get current(){return me(this,ne).call(this),me(this,te).call(this)}}te=new WeakMap,ne=new WeakMap;const vp=/\(.+\)/,mp=new Set(["all","print","screen","and","or","not","only"]);class yp extends gp{constructor(e,t){let n=vp.test(e)||e.split(/[\s,]+/).some(e=>mp.has(e.trim()))?e:`(${e})`;const o=window.matchMedia(n);super(()=>o.matches,e=>Cr(o,"change",e))}}function wp(e){var t;const{edges:n,defaultEdgeOptions:o,nodeLookup:r,previousEdges:i,connectionMode:a,onerror:s,onlyRenderVisible:l,elevateEdgesOnSelect:d}=e,u=new Map;for(const c of n){const n=r.get(c.source),p=r.get(c.target);if(!n||!p)continue;if(l){const{visibleNodes:t,transform:o,width:r,height:i}=e;if(!sc({sourceNode:n,targetNode:p,width:r,height:i,transform:o}))continue;t.set(n.id,n),t.set(p.id,p)}const f=i.get(c.id);if(f&&c===f.edge&&n==f.sourceNode&&p==f.targetNode){u.set(c.id,f);continue}const h=gc({id:c.id,sourceNode:n,targetNode:p,sourceHandle:c.sourceHandle||null,targetHandle:c.targetHandle||null,connectionMode:a,onError:s});h&&u.set(c.id,fe(pe(pe(pe({},o),c),h),{zIndex:ac({selected:c.selected,zIndex:null!=(t=c.zIndex)?t:o.zIndex,sourceNode:n,targetNode:p,elevateOnSelect:d}),sourceNode:n,targetNode:p,edge:c}))}return u}const bp={input:function(e,t){Gt(t,!0);let n=ia(t,"data",19,()=>({label:"Node"})),o=ia(t,"sourcePosition",19,()=>pu.Bottom);var r=Gc(),i=vo(r);Zc(mo(i),{type:"source",get position(){return o()}}),No(()=>{var e,t;return Br(i,`${null!=(t=null==(e=n())?void 0:e.label)?t:""} `)}),Lr(e,r),Jt()},output:function(e,t){Gt(t,!0);let n=ia(t,"data",19,()=>({label:"Node"})),o=ia(t,"targetPosition",19,()=>pu.Top);var r=Jc(),i=vo(r);Zc(mo(i),{type:"target",get position(){return o()}}),No(()=>{var e,t;return Br(i,`${null!=(t=null==(e=n())?void 0:e.label)?t:""} `)}),Lr(e,r),Jt()},default:Xc,group:function(e,t){}},xp={straight:function(e,t){Gt(t,!0);let n=zn(()=>dc({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY})),o=zn(()=>nt(mr(n),3)),r=zn(()=>mr(o)[0]),i=zn(()=>mr(o)[1]),a=zn(()=>mr(o)[2]);lp(e,{get path(){return mr(r)},get labelX(){return mr(i)},get labelY(){return mr(a)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),Jt()},smoothstep:function(e,t){Gt(t,!0);let n=zn(()=>fc({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition})),o=zn(()=>nt(mr(n),3)),r=zn(()=>mr(o)[0]),i=zn(()=>mr(o)[1]),a=zn(()=>mr(o)[2]);lp(e,{get path(){return mr(r)},get labelX(){return mr(i)},get labelY(){return mr(a)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),Jt()},default:dp,step:function(e,t){Gt(t,!0);let n=zn(()=>fc({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,borderRadius:0})),o=zn(()=>nt(mr(n),3)),r=zn(()=>mr(o)[0]),i=zn(()=>mr(o)[1]),a=zn(()=>mr(o)[2]);lp(e,{get path(){return mr(r)},get labelX(){return mr(i)},get labelY(){return mr(a)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),Jt()}};function kp(e){var t,n,o,r,i,a,s,l,d,u,c,p,f,h,g,v,m,y,w,b,x,k,_,S,T,C,E,$,A,N,O,M,I,P,z,D,R,L,j,W,q,F,H,U,V,B,K,Z,Y,X,G,J,Q,ee,te,ne,oe,re,ie,ae,se,le,de,ue,ce,he,ve,we,be,ke,_e,Se,Te,Ce,Ee,$e,Ae;return r=new WeakMap,i=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap,d=new WeakMap,u=new WeakMap,c=new WeakMap,p=new WeakMap,f=new WeakMap,h=new WeakMap,g=new WeakMap,v=new WeakMap,m=new WeakMap,y=new WeakMap,w=new WeakMap,b=new WeakMap,x=new WeakMap,k=new WeakMap,_=new WeakMap,S=new WeakMap,T=new WeakMap,C=new WeakMap,E=new WeakMap,$=new WeakMap,A=new WeakMap,N=new WeakMap,O=new WeakMap,M=new WeakMap,I=new WeakMap,P=new WeakMap,z=new WeakMap,D=new WeakMap,R=new WeakMap,L=new WeakMap,j=new WeakMap,W=new WeakMap,q=new WeakMap,F=new WeakMap,H=new WeakMap,U=new WeakMap,V=new WeakMap,B=new WeakMap,K=new WeakMap,Z=new WeakMap,Y=new WeakMap,X=new WeakMap,G=new WeakMap,J=new WeakMap,Q=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,oe=new WeakMap,re=new WeakMap,ie=new WeakMap,ae=new WeakMap,se=new WeakMap,le=new WeakMap,de=new WeakMap,ue=new WeakMap,ce=new WeakMap,he=new WeakMap,ve=new WeakMap,we=new WeakMap,be=new WeakMap,ke=new WeakMap,_e=new WeakMap,Se=new WeakMap,Te=new WeakMap,Ce=new WeakMap,Ee=new WeakMap,$e=new WeakMap,Ae=new WeakMap,new class{constructor(){ye(this,r,zn(()=>{var t;return null!=(t=e.props.id)?t:"1"})),ye(this,i,Bn(null)),ye(this,a,Bn(null)),ye(this,s,Bn(null!=(t=e.width)?t:0)),ye(this,l,Bn(null!=(n=e.height)?n:0)),ye(this,d,zn(()=>{var t,n;const o=function(e,t,n,o){var r,i;const a=kc(xc,o);let s=e.length>0;const l=new Map(t),d=(null==a?void 0:a.elevateNodesOnSelect)?1e3:0;t.clear(),n.clear();for(const u of e){let e=l.get(u.id);if(a.checkEquality&&u===(null==e?void 0:e.internals.userNode))t.set(u.id,e);else{const n=yu(u,a.nodeOrigin),o=Vu(u.extent)?u.extent:a.nodeExtent,s=Tu(n,o,Bu(u));e=fe(pe(pe({},a.defaults),u),{measured:{width:null==(r=u.measured)?void 0:r.width,height:null==(i=u.measured)?void 0:i.height},internals:{positionAbsolute:s,handleBounds:u.measured?null==e?void 0:e.internals.handleBounds:void 0,z:Sc(u,d),userNode:u}}),t.set(u.id,e)}void 0!==e.measured&&void 0!==e.measured.width&&void 0!==e.measured.height||e.hidden||(s=!1),u.parentId&&_c(e,t,n,o)}return s}(e.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:null==(t=e.props.elevateNodesOnSelect)||t,checkEquality:!0});return this.fitViewQueued&&o&&((null==(n=this.fitViewOptions)?void 0:n.duration)?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),o})),ye(this,u,zn(()=>null!==this.panZoom)),ye(this,c,zn(()=>(function(e,t,n){e.clear(),t.clear();for(const o of n){const{source:n,target:r,sourceHandle:i=null,targetHandle:a=null}=o,s={edgeId:o.id,source:n,target:r,sourceHandle:i,targetHandle:a},l=`${n}-${i}--${r}-${a}`;Cc("source",s,`${r}-${a}--${n}-${i}`,e,n,i),Cc("target",s,l,e,r,a),t.set(o.id,o)}}(this.connectionLookup,this.edgeLookup,e.edges),e.edges))),ge(this,"_prevSelectedNodes",[]),ge(this,"_prevSelectedNodeIds",new Set),ye(this,p,zn(()=>{const e=this._prevSelectedNodeIds.size,t=new Set,n=this.nodes.filter(e=>(e.selected&&(t.add(e.id),this._prevSelectedNodeIds.delete(e.id)),e.selected));return(e!==t.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=n),this._prevSelectedNodeIds=t,this._prevSelectedNodes})),ge(this,"_prevSelectedEdges",[]),ge(this,"_prevSelectedEdgeIds",new Set),ye(this,f,zn(()=>{const e=this._prevSelectedEdgeIds.size,t=new Set,n=this.edges.filter(e=>(e.selected&&(t.add(e.id),this._prevSelectedEdgeIds.delete(e.id)),e.selected));return(e!==t.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=n),this._prevSelectedEdgeIds=t,this._prevSelectedEdges})),ge(this,"selectionChangeHandlers",new Map),ge(this,"nodeLookup",new Map),ge(this,"parentLookup",new Map),ge(this,"connectionLookup",new Map),ge(this,"edgeLookup",new Map),ge(this,"_prevVisibleEdges",new Map),ye(this,h,zn(()=>{var t;const{nodes:n,_edges:o,_prevVisibleEdges:r,nodeLookup:i,connectionMode:a,onerror:s,onlyRenderVisibleElements:l,defaultEdgeOptions:d}=this;let u,c;const p={edges:o,defaultEdgeOptions:d,previousEdges:r,nodeLookup:i,connectionMode:a,elevateEdgesOnSelect:null==(t=e.props.elevateEdgesOnSelect)||t,onerror:s};if(l){const{viewport:e,width:t,height:n}=this,o=[e.x,e.y,e.zoom];u=function(e,t,n,o){const r=new Map;return bu(e,{x:0,y:0,width:n,height:o},t,!0).forEach(e=>{r.set(e.id,e)}),r}(i,o,t,n),c=wp(fe(pe({},p),{onlyRenderVisible:!0,visibleNodes:u,transform:o,width:t,height:n}))}else u=this.nodeLookup,c=wp(p);return{nodes:u,edges:c}})),ye(this,g,zn(()=>{var t;return null==(t=e.props.nodesDraggable)||t})),ye(this,v,zn(()=>{var t;return null==(t=e.props.nodesConnectable)||t})),ye(this,m,zn(()=>{var t;return null==(t=e.props.elementsSelectable)||t})),ye(this,y,zn(()=>{var t;return null==(t=e.props.nodesFocusable)||t})),ye(this,w,zn(()=>{var t;return null==(t=e.props.edgesFocusable)||t})),ye(this,b,zn(()=>{var t;return null!=(t=e.props.disableKeyboardA11y)&&t})),ye(this,x,zn(()=>{var t;return null!=(t=e.props.minZoom)?t:.5})),ye(this,k,zn(()=>{var t;return null!=(t=e.props.maxZoom)?t:2})),ye(this,_,zn(()=>{var t;return null!=(t=e.props.nodeOrigin)?t:[0,0]})),ye(this,S,zn(()=>{var t;return null!=(t=e.props.nodeExtent)?t:Jd})),ye(this,T,zn(()=>{var t;return null!=(t=e.props.translateExtent)?t:Jd})),ye(this,C,zn(()=>{var t;return null!=(t=e.props.defaultEdgeOptions)?t:{}})),ye(this,E,zn(()=>{var t;return null!=(t=e.props.nodeDragThreshold)?t:1})),ye(this,$,zn(()=>{var t;return null==(t=e.props.autoPanOnNodeDrag)||t})),ye(this,A,zn(()=>{var t;return null==(t=e.props.autoPanOnConnect)||t})),ye(this,N,zn(()=>{var t;return null==(t=e.props.autoPanOnNodeFocus)||t})),ye(this,O,zn(()=>{var t;return null!=(t=e.props.connectionDragThreshold)?t:1})),ge(this,"fitViewQueued",null!=(o=e.props.fitView)&&o),ge(this,"fitViewOptions",e.props.fitViewOptions),ge(this,"fitViewResolver",null),ye(this,M,zn(()=>{var t;return null!=(t=e.props.snapGrid)?t:null})),ye(this,I,Bn(!1)),ye(this,P,Bn(null)),ye(this,z,Bn(!1)),ye(this,D,Bn(!1)),ye(this,R,Bn(!1)),ye(this,L,Bn(!1)),ye(this,j,Bn(!1)),ye(this,W,Bn(null)),ye(this,q,Bn("")),ye(this,F,zn(()=>{var t;return null!=(t=e.props.selectionMode)?t:iu.Partial})),ye(this,H,zn(()=>pe(pe({},bp),e.props.nodeTypes))),ye(this,U,zn(()=>pe(pe({},xp),e.props.edgeTypes))),ye(this,V,zn(()=>{var t;return null!=(t=e.props.noPanClass)?t:"nopan"})),ye(this,B,zn(()=>{var t;return null!=(t=e.props.noDragClass)?t:"nodrag"})),ye(this,K,zn(()=>{var t;return null!=(t=e.props.noWheelClass)?t:"nowheel"})),ye(this,Z,zn(()=>{return t=e.props.ariaLabelConfig,pe(pe({},eu),t||{});var t})),ye(this,Y,Bn(function(e,t,n,o,r,i){if(t&&!n&&o&&r){const e=wu(i,{filter:e=>!(!e.width&&!e.initialWidth||!e.height&&!e.initialHeight)});return Hu(e,o,r,.5,2,.1)}return null!=n?n:{x:0,y:0,zoom:1}}(this.nodesInitialized,e.props.fitView,e.props.initialViewport,this.width,this.height,this.nodeLookup))),ye(this,X,Bn(su)),ye(this,G,zn(()=>this._connection.inProgress?fe(pe({},this._connection),{to:Wu(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}):this._connection)),ye(this,J,zn(()=>{var t;return null!=(t=e.props.connectionMode)?t:tu.Strict})),ye(this,Q,zn(()=>{var t;return null!=(t=e.props.connectionRadius)?t:20})),ye(this,ee,zn(()=>{var t;return null!=(t=e.props.isValidConnection)?t:()=>!0})),ye(this,te,zn(()=>{var t;return null==(t=e.props.selectNodesOnDrag)||t})),ye(this,ne,zn(()=>void 0===e.props.defaultMarkerColor?"#b1b1b7":e.props.defaultMarkerColor)),ye(this,oe,zn(()=>function(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){const i=new Set;return e.reduce((e,a)=>([a.markerStart||o,a.markerEnd||r].forEach(o=>{if(o&&"object"==typeof o){const r=wc(o,t);i.has(r)||(e.push(pe({id:r,color:o.color||n},o)),i.add(r))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))}(e.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd}))),ye(this,re,zn(()=>{var t;return null!=(t=e.props.onlyRenderVisibleElements)&&t})),ye(this,ie,zn(()=>{var t;return null!=(t=e.props.onflowerror)?t:Lu})),ye(this,ae,zn(()=>e.props.ondelete)),ye(this,se,zn(()=>e.props.onbeforedelete)),ye(this,le,zn(()=>e.props.onbeforeconnect)),ye(this,de,zn(()=>e.props.onconnect)),ye(this,ue,zn(()=>e.props.onconnectstart)),ye(this,ce,zn(()=>e.props.onconnectend)),ye(this,he,zn(()=>e.props.onbeforereconnect)),ye(this,ve,zn(()=>e.props.onreconnect)),ye(this,we,zn(()=>e.props.onreconnectstart)),ye(this,be,zn(()=>e.props.onreconnectend)),ye(this,ke,zn(()=>{var t;return null==(t=e.props.clickConnect)||t})),ye(this,_e,zn(()=>e.props.onclickconnectstart)),ye(this,Se,zn(()=>e.props.onclickconnectend)),ye(this,Te,Bn(null)),ye(this,Ce,zn(()=>e.props.onselectiondrag)),ye(this,Ee,zn(()=>e.props.onselectiondragstart)),ye(this,$e,zn(()=>e.props.onselectiondragstop)),ge(this,"resolveFitView",()=>xe(this,null,function*(){var e;this.panZoom&&(yield xu({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),null==(e=this.fitViewResolver)||e.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)})),ge(this,"_prefersDark",new yp("(prefers-color-scheme: dark)","dark"===e.props.colorModeSSR)),ye(this,Ae,zn(()=>{var t;return"system"===e.props.colorMode?this._prefersDark.current?"dark":"light":null!=(t=e.props.colorMode)?t:"light"}))}get flowId(){return mr(me(this,r))}set flowId(e){Zn(me(this,r),e)}get domNode(){return mr(me(this,i))}set domNode(e){Zn(me(this,i),e)}get panZoom(){return mr(me(this,a))}set panZoom(e){Zn(me(this,a),e)}get width(){return mr(me(this,s))}set width(e){Zn(me(this,s),e)}get height(){return mr(me(this,l))}set height(e){Zn(me(this,l),e)}get nodesInitialized(){return mr(me(this,d))}set nodesInitialized(e){Zn(me(this,d),e)}get viewportInitialized(){return mr(me(this,u))}set viewportInitialized(e){Zn(me(this,u),e)}get _edges(){return mr(me(this,c))}set _edges(e){Zn(me(this,c),e)}get nodes(){return this.nodesInitialized,e.nodes}set nodes(t){e.nodes=t}get edges(){return this._edges}set edges(t){e.edges=t}get selectedNodes(){return mr(me(this,p))}set selectedNodes(e){Zn(me(this,p),e)}get selectedEdges(){return mr(me(this,f))}set selectedEdges(e){Zn(me(this,f),e)}get visible(){return mr(me(this,h))}set visible(e){Zn(me(this,h),e)}get nodesDraggable(){return mr(me(this,g))}set nodesDraggable(e){Zn(me(this,g),e)}get nodesConnectable(){return mr(me(this,v))}set nodesConnectable(e){Zn(me(this,v),e)}get elementsSelectable(){return mr(me(this,m))}set elementsSelectable(e){Zn(me(this,m),e)}get nodesFocusable(){return mr(me(this,y))}set nodesFocusable(e){Zn(me(this,y),e)}get edgesFocusable(){return mr(me(this,w))}set edgesFocusable(e){Zn(me(this,w),e)}get disableKeyboardA11y(){return mr(me(this,b))}set disableKeyboardA11y(e){Zn(me(this,b),e)}get minZoom(){return mr(me(this,x))}set minZoom(e){Zn(me(this,x),e)}get maxZoom(){return mr(me(this,k))}set maxZoom(e){Zn(me(this,k),e)}get nodeOrigin(){return mr(me(this,_))}set nodeOrigin(e){Zn(me(this,_),e)}get nodeExtent(){return mr(me(this,S))}set nodeExtent(e){Zn(me(this,S),e)}get translateExtent(){return mr(me(this,T))}set translateExtent(e){Zn(me(this,T),e)}get defaultEdgeOptions(){return mr(me(this,C))}set defaultEdgeOptions(e){Zn(me(this,C),e)}get nodeDragThreshold(){return mr(me(this,E))}set nodeDragThreshold(e){Zn(me(this,E),e)}get autoPanOnNodeDrag(){return mr(me(this,$))}set autoPanOnNodeDrag(e){Zn(me(this,$),e)}get autoPanOnConnect(){return mr(me(this,A))}set autoPanOnConnect(e){Zn(me(this,A),e)}get autoPanOnNodeFocus(){return mr(me(this,N))}set autoPanOnNodeFocus(e){Zn(me(this,N),e)}get connectionDragThreshold(){return mr(me(this,O))}set connectionDragThreshold(e){Zn(me(this,O),e)}get snapGrid(){return mr(me(this,M))}set snapGrid(e){Zn(me(this,M),e)}get dragging(){return mr(me(this,I))}set dragging(e){Zn(me(this,I),e)}get selectionRect(){return mr(me(this,P))}set selectionRect(e){Zn(me(this,P),e)}get selectionKeyPressed(){return mr(me(this,z))}set selectionKeyPressed(e){Zn(me(this,z),e)}get multiselectionKeyPressed(){return mr(me(this,D))}set multiselectionKeyPressed(e){Zn(me(this,D),e)}get deleteKeyPressed(){return mr(me(this,R))}set deleteKeyPressed(e){Zn(me(this,R),e)}get panActivationKeyPressed(){return mr(me(this,L))}set panActivationKeyPressed(e){Zn(me(this,L),e)}get zoomActivationKeyPressed(){return mr(me(this,j))}set zoomActivationKeyPressed(e){Zn(me(this,j),e)}get selectionRectMode(){return mr(me(this,W))}set selectionRectMode(e){Zn(me(this,W),e)}get ariaLiveMessage(){return mr(me(this,q))}set ariaLiveMessage(e){Zn(me(this,q),e)}get selectionMode(){return mr(me(this,F))}set selectionMode(e){Zn(me(this,F),e)}get nodeTypes(){return mr(me(this,H))}set nodeTypes(e){Zn(me(this,H),e)}get edgeTypes(){return mr(me(this,U))}set edgeTypes(e){Zn(me(this,U),e)}get noPanClass(){return mr(me(this,V))}set noPanClass(e){Zn(me(this,V),e)}get noDragClass(){return mr(me(this,B))}set noDragClass(e){Zn(me(this,B),e)}get noWheelClass(){return mr(me(this,K))}set noWheelClass(e){Zn(me(this,K),e)}get ariaLabelConfig(){return mr(me(this,Z))}set ariaLabelConfig(e){Zn(me(this,Z),e)}get _viewport(){return mr(me(this,Y))}set _viewport(e){Zn(me(this,Y),e)}get viewport(){var t;return null!=(t=e.viewport)?t:this._viewport}set viewport(t){e.viewport&&(e.viewport=t),this._viewport=t}get _connection(){return mr(me(this,X))}set _connection(e){Zn(me(this,X),e)}get connection(){return mr(me(this,G))}set connection(e){Zn(me(this,G),e)}get connectionMode(){return mr(me(this,J))}set connectionMode(e){Zn(me(this,J),e)}get connectionRadius(){return mr(me(this,Q))}set connectionRadius(e){Zn(me(this,Q),e)}get isValidConnection(){return mr(me(this,ee))}set isValidConnection(e){Zn(me(this,ee),e)}get selectNodesOnDrag(){return mr(me(this,te))}set selectNodesOnDrag(e){Zn(me(this,te),e)}get defaultMarkerColor(){return mr(me(this,ne))}set defaultMarkerColor(e){Zn(me(this,ne),e)}get markers(){return mr(me(this,oe))}set markers(e){Zn(me(this,oe),e)}get onlyRenderVisibleElements(){return mr(me(this,re))}set onlyRenderVisibleElements(e){Zn(me(this,re),e)}get onerror(){return mr(me(this,ie))}set onerror(e){Zn(me(this,ie),e)}get ondelete(){return mr(me(this,ae))}set ondelete(e){Zn(me(this,ae),e)}get onbeforedelete(){return mr(me(this,se))}set onbeforedelete(e){Zn(me(this,se),e)}get onbeforeconnect(){return mr(me(this,le))}set onbeforeconnect(e){Zn(me(this,le),e)}get onconnect(){return mr(me(this,de))}set onconnect(e){Zn(me(this,de),e)}get onconnectstart(){return mr(me(this,ue))}set onconnectstart(e){Zn(me(this,ue),e)}get onconnectend(){return mr(me(this,ce))}set onconnectend(e){Zn(me(this,ce),e)}get onbeforereconnect(){return mr(me(this,he))}set onbeforereconnect(e){Zn(me(this,he),e)}get onreconnect(){return mr(me(this,ve))}set onreconnect(e){Zn(me(this,ve),e)}get onreconnectstart(){return mr(me(this,we))}set onreconnectstart(e){Zn(me(this,we),e)}get onreconnectend(){return mr(me(this,be))}set onreconnectend(e){Zn(me(this,be),e)}get clickConnect(){return mr(me(this,ke))}set clickConnect(e){Zn(me(this,ke),e)}get onclickconnectstart(){return mr(me(this,_e))}set onclickconnectstart(e){Zn(me(this,_e),e)}get onclickconnectend(){return mr(me(this,Se))}set onclickconnectend(e){Zn(me(this,Se),e)}get clickConnectStartHandle(){return mr(me(this,Te))}set clickConnectStartHandle(e){Zn(me(this,Te),e)}get onselectiondrag(){return mr(me(this,Ce))}set onselectiondrag(e){Zn(me(this,Ce),e)}get onselectiondragstart(){return mr(me(this,Ee))}set onselectiondragstart(e){Zn(me(this,Ee),e)}get onselectiondragstop(){return mr(me(this,$e))}set onselectiondragstop(e){Zn(me(this,$e),e)}get colorMode(){return mr(me(this,Ae))}set colorMode(e){Zn(me(this,Ae),e)}resetStoreValues(){var t;this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=su,this.clickConnectStartHandle=null,this.viewport=null!=(t=e.props.initialViewport)?t:{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}}function _p(){const e=Yt(Sp);if(!e)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}const Sp=Symbol();function Tp(e){const t=kp(e);const n=(e,n=!1)=>{t.nodes=t.nodes.map(t=>{const o=e.get(t.id);return o?fe(pe({},t),{position:o.position,dragging:n}):t})};function o(e,n){const o=t.panZoom;return o?o.scaleBy(e,n):Promise.resolve(!1)}function r(e,t=null){let n=!1;const o=e.map(e=>(!t||t.has(e.id))&&e.selected?(n=!0,fe(pe({},e),{selected:!1})):e);return[n,o]}function i(e){const n=(null==e?void 0:e.nodes)?new Set(e.nodes.map(e=>e.id)):null,[o,i]=r(t.nodes,n);o&&(t.nodes=i);const a=(null==e?void 0:e.edges)?new Set(e.edges.map(e=>e.id)):null,[s,l]=r(t.edges,a);s&&(t.edges=l)}function a(e){const n=t.multiselectionKeyPressed;t.nodes=t.nodes.map(o=>{const r=e.includes(o.id),i=n&&o.selected||r;if(o.selected!==i){const e=t.nodeLookup.get(o.id);return e&&(e.selected=i),o.selected=i,pe({},o)}return o}),n||i({nodes:[]})}function s(e){const n=t.multiselectionKeyPressed;t.edges=t.edges.map(t=>{const o=e.includes(t.id),r=n&&t.selected||o;return t.selected!==r?fe(pe({},t),{selected:r}):t}),n||i({edges:[]})}const l=Object.assign(t,{setNodeTypes:function(e){t.nodeTypes=pe(pe({},bp),e)},setEdgeTypes:function(e){t.edgeTypes=pe(pe({},xp),e)},addEdge:function(e){t.edges=((e,t)=>{if(!e.source||!e.target)return t;let n;return n=vu(e)?pe({},e):fe(pe({},e),{id:lc(e)}),((e,t)=>t.some(t=>!(t.source!==e.source||t.target!==e.target||t.sourceHandle!==e.sourceHandle&&(t.sourceHandle||e.sourceHandle)||t.targetHandle!==e.targetHandle&&(t.targetHandle||e.targetHandle))))(n,t)?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n))})(e,t.edges)},updateNodePositions:n,updateNodeInternals:function(e){var n,o,r,i,a,s;const{changes:l,updatedInternals:d}=Tc(e,t.nodeLookup,t.parentLookup,t.domNode,t.nodeOrigin);if(!d)return;!function(e,t,n){const o=kc(bc,n);for(const r of e.values())if(r.parentId)_c(r,e,t,o);else{const e=yu(r,o.nodeOrigin),t=Vu(r.extent)?r.extent:o.nodeExtent,n=Tu(e,t,Bu(r));r.internals.positionAbsolute=n}}(t.nodeLookup,t.parentLookup,{nodeOrigin:t.nodeOrigin,nodeExtent:t.nodeExtent}),t.fitViewQueued&&t.resolveFitView();const u=new Map;for(const c of l){const e=null==(n=t.nodeLookup.get(c.id))?void 0:n.internals.userNode;if(!e)continue;const l=pe({},e);switch(c.type){case"dimensions":{const e=pe(pe({},l.measured),c.dimensions);c.setAttributes&&(l.width=null!=(r=null==(o=c.dimensions)?void 0:o.width)?r:l.width,l.height=null!=(a=null==(i=c.dimensions)?void 0:i.height)?a:l.height),l.measured=e;break}case"position":l.position=null!=(s=c.position)?s:l.position}u.set(c.id,l)}t.nodes=t.nodes.map(e=>{var t;return null!=(t=u.get(e.id))?t:e})},zoomIn:function(e){return o(1.2,e)},zoomOut:function(e){return o(1/1.2,e)},fitView:function(e){var n;const o=null!=(n=t.fitViewResolver)?n:Promise.withResolvers();return t.fitViewQueued=!0,t.fitViewOptions=e,t.fitViewResolver=o,t.nodes=[...t.nodes],o.promise},setCenter:function(e,n,o){return xe(this,null,function*(){const r=void 0!==(null==o?void 0:o.zoom)?o.zoom:t.maxZoom,i=t.panZoom;return i?(yield i.setViewport({x:t.width/2-e*r,y:t.height/2-n*r,zoom:r},{duration:null==o?void 0:o.duration,ease:null==o?void 0:o.ease,interpolate:null==o?void 0:o.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)})},setMinZoom:function(e){const n=t.panZoom;n&&(n.setScaleExtent([e,t.maxZoom]),t.minZoom=e)},setMaxZoom:function(e){const n=t.panZoom;n&&(n.setScaleExtent([t.minZoom,e]),t.maxZoom=e)},setTranslateExtent:function(e){const n=t.panZoom;n&&(n.setTranslateExtent(e),t.translateExtent=e)},setPaneClickDistance:function(e){var n;null==(n=t.panZoom)||n.setClickDistance(e)},unselectNodesAndEdges:i,addSelectedNodes:a,addSelectedEdges:s,handleNodeSelection:function(e,n,o){const r=t.nodeLookup.get(e);r?(t.selectionRect=null,t.selectionRectMode=null,r.selected?(n||r.selected&&t.multiselectionKeyPressed)&&(i({nodes:[r],edges:[]}),requestAnimationFrame(()=>null==o?void 0:o.blur())):a([e])):console.warn("012",Xd(e))},handleEdgeSelection:function(e){const n=t.edgeLookup.get(e);if(!n)return void console.warn("012",Xd(e));(n.selectable||t.elementsSelectable&&void 0===n.selectable)&&(t.selectionRect=null,t.selectionRectMode=null,n.selected?n.selected&&t.multiselectionKeyPressed&&i({nodes:[],edges:[n]}):s([e]))},moveSelectedNodes:function(e,o){var r,i;const{nodeExtent:a,snapGrid:s,nodeOrigin:l,nodeLookup:d,nodesDraggable:u,onerror:c}=t,p=new Map,f=null!=(r=null==s?void 0:s[0])?r:5,h=null!=(i=null==s?void 0:s[1])?i:5,g=e.x*f*o,v=e.y*h*o;for(const t of d.values()){if(!(t.selected&&(t.draggable||u&&void 0===t.draggable)))continue;let e={x:t.internals.positionAbsolute.x+g,y:t.internals.positionAbsolute.y+v};s&&(e=ju(e,s));const{position:n,positionAbsolute:o}=ku({nodeId:t.id,nextPosition:e,nodeLookup:d,nodeExtent:a,nodeOrigin:l,onError:c});t.position=n,t.internals.positionAbsolute=o,p.set(t.id,t)}n(p)},panBy:function(e){return function(e){return xe(this,arguments,function*({delta:e,panZoom:t,transform:n,translateExtent:o,width:r,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const a=yield t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,i]],o),s=!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]);return Promise.resolve(s)})}({delta:e,panZoom:t.panZoom,transform:[t.viewport.x,t.viewport.y,t.viewport.zoom],translateExtent:t.translateExtent,width:t.width,height:t.height})},updateConnection:e=>{t._connection=pe({},e)},cancelConnection:function(){t._connection=su},reset:function(){t.resetStoreValues(),i()}});return l}function Cp(e,t){const{minZoom:n,maxZoom:o,initialViewport:r,onPanZoomStart:i,onPanZoom:a,onPanZoomEnd:s,translateExtent:l,paneClickDistance:d,setPanZoomInstance:u,onDraggingChange:c,onTransformChange:p}=t,f=Uc({domNode:e,minZoom:n,maxZoom:o,translateExtent:l,viewport:r,paneClickDistance:d,onPanZoom:a,onPanZoomStart:i,onPanZoomEnd:s,onDraggingChange:c}),h=f.getViewport();return r.x===h.x&&r.y===h.y&&r.zoom===h.zoom||p([h.x,h.y,h.zoom]),u(f),f.update(t),{update(e){f.update(e)}}}var Ep=Ir('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function $p(e,t){return n=>{n.target===t&&(null==e||e(n))}}function Ap(e){return t=>{const n=e.has(t.id);return!!t.selected!==n?fe(pe({},t),{selected:n}):t}}function Np(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}var Op=Ir("<div><!></div>");$r(["click","pointerdown","pointermove","pointerup","contextmenu"]);var Mp=Ir('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function Ip(e,t){const{store:n,onDrag:o,onDragStart:r,onDragStop:i,onNodeMouseDown:a}=t,s=Nc({onDrag:o,onDragStart:r,onDragStop:i,onNodeMouseDown:a,getStoreItems:()=>{const{snapGrid:e,viewport:t}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:e||[0,0],snapToGrid:!!e,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[t.x,t.y,t.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function l(e,t){t.disabled?s.destroy():s.update({domNode:e,noDragClassName:t.noDragClass,handleSelector:t.handleSelector,nodeId:t.nodeId,isSelectable:t.isSelectable,nodeClickDistance:t.nodeClickDistance})}return l(e,t),{update(t){l(e,t)},destroy(){s.destroy()}}}var Pp=Ir('<div aria-live="assertive" aria-atomic="true" class="a11y-live-msg svelte-13pq11u"> </div>'),zp=Ir('<div class="a11y-hidden svelte-13pq11u"> </div> <div class="a11y-hidden svelte-13pq11u"> </div> <!>',1);const Dp="svelte-flow__node-desc",Rp="svelte-flow__edge-desc",Lp="svelte-flow__aria-live";var jp=Ir("<div><!></div>");function Wp(e,t){Gt(t,!0);let n=ia(t,"store",15),o=zn(()=>tt(t.node.data,()=>({}),!0)),r=zn(()=>tt(t.node.selected,!1)),i=zn(()=>t.node.draggable),a=zn(()=>t.node.selectable),s=zn(()=>tt(t.node.deletable,!0)),l=zn(()=>t.node.connectable),d=zn(()=>t.node.focusable),u=zn(()=>tt(t.node.hidden,!1)),c=zn(()=>tt(t.node.dragging,!1)),p=zn(()=>tt(t.node.style,"")),f=zn(()=>t.node.class),h=zn(()=>tt(t.node.type,"default")),g=zn(()=>t.node.parentId),v=zn(()=>t.node.sourcePosition),m=zn(()=>t.node.targetPosition),y=zn(()=>tt(t.node.measured,()=>({width:0,height:0}),!0).width),w=zn(()=>tt(t.node.measured,()=>({width:0,height:0}),!0).height),b=zn(()=>t.node.initialWidth),x=zn(()=>t.node.initialHeight),k=zn(()=>t.node.width),_=zn(()=>t.node.height),S=zn(()=>t.node.dragHandle),T=zn(()=>tt(t.node.internals.z,0)),C=zn(()=>t.node.internals.positionAbsolute.x),E=zn(()=>t.node.internals.positionAbsolute.y),$=zn(()=>t.node.internals.userNode),{id:A}=t.node,N=zn(()=>{var e;return null!=(e=mr(i))?e:n().nodesDraggable}),O=zn(()=>{var e;return null!=(e=mr(a))?e:n().elementsSelectable}),M=zn(()=>{var e;return null!=(e=mr(l))?e:n().nodesConnectable}),I=zn(()=>Ku(t.node)),P=zn(()=>!!t.node.internals.handleBounds),z=zn(()=>mr(I)&&mr(P)),D=zn(()=>{var e;return null!=(e=mr(d))?e:n().nodesFocusable});let R=zn(()=>{return e=A,n().parentLookup.has(e);var e}),L=Bn(null),j=null,W=mr(h),q=mr(v),F=mr(m),H=zn(()=>{var e;return null!=(e=n().nodeTypes[mr(h)])?e:Xc}),U=zn(()=>n().ariaLabelConfig);Xt("svelteflow__node_connectable",{get value(){return mr(M)}}),Xt("svelteflow__node_id",A);let V=zn(()=>{var e,t;const n=void 0===mr(y)?null!=(e=mr(k))?e:mr(b):mr(k),o=void 0===mr(w)?null!=(t=mr(_))?t:mr(x):mr(_);if(void 0!==n||void 0!==o||void 0!==mr(p))return`${mr(p)};${n?`width:${op(n)};`:""}${o?`height:${op(o)};`:""}`});function B(e){var o;mr(O)&&(!n().selectNodesOnDrag||!mr(N)||n().nodeDragThreshold>0)&&n().handleNodeSelection(A),null==(o=t.onnodeclick)||o.call(t,{node:mr($),event:e})}function K(e){if(!Ju(e)&&!n().disableKeyboardA11y)if(Qd.includes(e.key)&&mr(O)){const t="Escape"===e.key;n().handleNodeSelection(A,t,mr(L))}else mr(N)&&t.node.selected&&Object.prototype.hasOwnProperty.call(rp,e.key)&&(e.preventDefault(),n(n().ariaLiveMessage=mr(U)["node.a11yDescription.ariaLiveMessage"]({direction:e.key.replace("Arrow","").toLowerCase(),x:~~t.node.internals.positionAbsolute.x,y:~~t.node.internals.positionAbsolute.y}),!0),n().moveSelectedNodes(rp[e.key],e.shiftKey?4:1))}To(()=>{(mr(h)!==W||mr(v)!==q||mr(m)!==F)&&null!==mr(L)&&requestAnimationFrame(()=>{null!==mr(L)&&n().updateNodeInternals(new Map([[A,{id:A,nodeElement:mr(L),force:!0}]]))}),W=mr(h),q=mr(v),F=mr(m)}),To(()=>{!t.resizeObserver||mr(z)&&mr(L)===j||(j&&t.resizeObserver.unobserve(j),mr(L)&&t.resizeObserver.observe(mr(L)),j=mr(L))}),ei(()=>{var e;j&&(null==(e=t.resizeObserver)||e.unobserve(j))});const Z=()=>{var e,o,r;if(n().disableKeyboardA11y||!n().autoPanOnNodeFocus||!(null==(e=mr(L))?void 0:e.matches(":focus-visible")))return;const{width:i,height:a,viewport:s}=n();bu(new Map([[A,t.node]]),{x:0,y:0,width:i,height:a},[s.x,s.y,s.zoom],!0).length>0||n().setCenter(t.node.position.x+(null!=(o=t.node.measured.width)?o:0)/2,t.node.position.y+(null!=(r=t.node.measured.height)?r:0)/2,{zoom:s.zoom})};var Y=Rr(),X=vo(Y),G=e=>{var i=jp();Ii(i,(e,o)=>{var r;return fe(pe({"data-id":A,class:["svelte-flow__node",`svelte-flow__node-${mr(h)}`,mr(f)],style:mr(V),onclick:B,onpointerenter:t.onnodepointerenter?e=>t.onnodepointerenter({node:mr($),event:e}):void 0,onpointerleave:t.onnodepointerleave?e=>t.onnodepointerleave({node:mr($),event:e}):void 0,onpointermove:t.onnodepointermove?e=>t.onnodepointermove({node:mr($),event:e}):void 0,oncontextmenu:t.onnodecontextmenu?e=>t.onnodecontextmenu({node:mr($),event:e}):void 0,onkeydown:mr(D)?K:void 0,onfocus:mr(D)?Z:void 0,tabIndex:mr(D)?0:void 0,role:null!=(r=t.node.ariaRole)?r:mr(D)?"group":void 0,"aria-roledescription":"node","aria-describedby":n().disableKeyboardA11y?void 0:`${Dp}-${n().flowId}`},t.node.domAttributes),{[Ti]:e,[Ci]:o})},[()=>({dragging:mr(c),selected:mr(r),draggable:mr(N),connectable:mr(M),selectable:mr(O),nopan:mr(N),parent:mr(R)}),()=>{var e,t;return{"z-index":mr(T),transform:`translate(${null!=(e=mr(C))?e:""}px, ${null!=(t=mr(E))?t:""}px)`,visibility:mr(I)?"visible":"hidden"}}]),ui(go(i),()=>mr(H),(e,t)=>{t(e,{get data(){return mr(o)},get id(){return A},get selected(){return mr(r)},get selectable(){return mr(O)},get deletable(){return mr(s)},get sourcePosition(){return mr(v)},get targetPosition(){return mr(m)},get zIndex(){return mr(T)},get dragging(){return mr(c)},get draggable(){return mr(N)},get dragHandle(){return mr(S)},get parentId(){return mr(g)},get type(){return mr(h)},get isConnectable(){return mr(M)},get positionAbsoluteX(){return mr(C)},get positionAbsoluteY(){return mr(E)},get width(){return mr(k)},get height(){return mr(_)}})}),ci(i,(e,t)=>null==Ip?void 0:Ip(e,t),()=>({nodeId:A,isSelectable:mr(O),disabled:!mr(N),handleSelector:mr(S),noDragClass:n().noDragClass,nodeClickDistance:t.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(e,n,o,r)=>{var i;null==(i=t.onnodedrag)||i.call(t,{event:e,targetNode:o,nodes:r})},onDragStart:(e,n,o,r)=>{var i;null==(i=t.onnodedragstart)||i.call(t,{event:e,targetNode:o,nodes:r})},onDragStop:(e,n,o,r)=>{var i;null==(i=t.onnodedragstop)||i.call(t,{event:e,targetNode:o,nodes:r})},store:n()})),Ui(i,e=>Zn(L,e),()=>mr(L)),Lr(e,i)};ni(X,e=>{mr(u)||e(G)}),Lr(e,Y),Jt()}var qp=Ir('<div class="svelte-flow__nodes"></div>');var Fp=zr('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');var Hp=zr("<defs></defs>");function Up(e,t){Gt(t,!0);const n=_p();var o=Hp();ri(o,21,()=>n.markers,e=>e.id,(e,t)=>{!function(e,t){Gt(t,!0);let n=ia(t,"width",3,12.5),o=ia(t,"height",3,12.5),r=ia(t,"markerUnits",3,"strokeWidth"),i=ia(t,"orient",3,"auto-start-reverse"),a=ia(t,"color",3,"none");var s=Kp(),l=go(s),d=e=>{var n=Vp();let o;No(e=>{Mi(n,"stroke-width",t.strokeWidth),o=bi(n,"",o,e)},[()=>({stroke:a()})]),Lr(e,n)},u=e=>{var n=Rr(),o=vo(n),r=e=>{var n=Bp();let o;No(e=>{Mi(n,"stroke-width",t.strokeWidth),o=bi(n,"",o,e)},[()=>({stroke:a(),fill:a()})]),Lr(e,n)};ni(o,e=>{t.type===uu.ArrowClosed&&e(r)},!0),Lr(e,n)};ni(l,e=>{t.type===uu.Arrow?e(d):e(u,!1)}),No(()=>{Mi(s,"id",t.id),Mi(s,"markerWidth",`${n()}`),Mi(s,"markerHeight",`${o()}`),Mi(s,"markerUnits",r()),Mi(s,"orient",i())}),Lr(e,s),Jt()}(e,ra(()=>mr(t)))}),Lr(e,o),Jt()}var Vp=zr('<polyline class="arrow" fill="none" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4"></polyline>'),Bp=zr('<polyline class="arrowclosed" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),Kp=zr('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');var Zp=Ir('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function Yp(e,t){Gt(t,!0);let n=ia(t,"store",15);var o=Zp(),r=go(o);Up(go(r),{}),ri(mo(r,2),17,()=>n().visible.edges.values(),e=>e.id,(e,o)=>{!function(e,t){Gt(t,!0);let n=zn(()=>t.edge.source),o=zn(()=>t.edge.target),r=zn(()=>t.edge.sourceX),i=zn(()=>t.edge.sourceY),a=zn(()=>t.edge.targetX),s=zn(()=>t.edge.targetY),l=zn(()=>t.edge.sourcePosition),d=zn(()=>t.edge.targetPosition),u=zn(()=>tt(t.edge.animated,!1)),c=zn(()=>tt(t.edge.selected,!1)),p=zn(()=>t.edge.label),f=zn(()=>t.edge.labelStyle),h=zn(()=>tt(t.edge.data,()=>({}),!0)),g=zn(()=>t.edge.style),v=zn(()=>t.edge.interactionWidth),m=zn(()=>tt(t.edge.type,"default")),y=zn(()=>t.edge.sourceHandle),w=zn(()=>t.edge.targetHandle),b=zn(()=>t.edge.markerStart),x=zn(()=>t.edge.markerEnd),k=zn(()=>t.edge.selectable),_=zn(()=>t.edge.focusable),S=zn(()=>tt(t.edge.deletable,!0)),T=zn(()=>t.edge.hidden),C=zn(()=>t.edge.zIndex),E=zn(()=>t.edge.class),$=zn(()=>t.edge.ariaLabel),A=null;const{id:N}=t.edge;Xt("svelteflow__edge_id",N);let O=zn(()=>{var e;return null!=(e=mr(k))?e:t.store.elementsSelectable}),M=zn(()=>{var e;return null!=(e=mr(_))?e:t.store.edgesFocusable}),I=zn(()=>{var e;return null!=(e=t.store.edgeTypes[mr(m)])?e:dp}),P=zn(()=>mr(b)?`url('#${wc(mr(b),t.store.flowId)}')`:void 0),z=zn(()=>mr(x)?`url('#${wc(mr(x),t.store.flowId)}')`:void 0);function D(e){var n;const o=t.store.edgeLookup.get(N);o&&(mr(O)&&t.store.handleEdgeSelection(N),null==(n=t.onedgeclick)||n.call(t,{event:e,edge:o}))}function R(e,n){const o=t.store.edgeLookup.get(N);o&&n({event:e,edge:o})}function L(e){if(!t.store.disableKeyboardA11y&&Qd.includes(e.key)&&mr(O)){const{unselectNodesAndEdges:n,addSelectedEdges:o}=t.store;"Escape"===e.key?(null==A||A.blur(),n({edges:[t.edge]})):o([N])}}var j=Rr(),W=vo(j),q=e=>{var b=Fp();let x;var k=go(b);Ii(k,e=>{var r;return fe(pe({class:["svelte-flow__edge",mr(E)],"data-id":N,onclick:D,oncontextmenu:t.onedgecontextmenu?e=>{R(e,t.onedgecontextmenu)}:void 0,onpointerenter:t.onedgepointerenter?e=>{R(e,t.onedgepointerenter)}:void 0,onpointerleave:t.onedgepointerleave?e=>{R(e,t.onedgepointerleave)}:void 0,"aria-label":null===mr($)?void 0:mr($)?mr($):`Edge from ${mr(n)} to ${mr(o)}`,"aria-describedby":mr(M)?`${Rp}-${t.store.flowId}`:void 0,role:null!=(r=t.edge.ariaRole)?r:mr(M)?"group":"img","aria-roledescription":"edge",onkeydown:mr(M)?L:void 0,tabindex:mr(M)?0:void 0},t.edge.domAttributes),{[Ti]:e})},[()=>({animated:mr(u),selected:mr(c),selectable:mr(O)})]),ui(go(k),()=>mr(I),(e,t)=>{t(e,{get id(){return N},get source(){return mr(n)},get target(){return mr(o)},get sourceX(){return mr(r)},get sourceY(){return mr(i)},get targetX(){return mr(a)},get targetY(){return mr(s)},get sourcePosition(){return mr(l)},get targetPosition(){return mr(d)},get animated(){return mr(u)},get selected(){return mr(c)},get label(){return mr(p)},get labelStyle(){return mr(f)},get data(){return mr(h)},get style(){return mr(g)},get interactionWidth(){return mr(v)},get selectable(){return mr(O)},get deletable(){return mr(S)},get type(){return mr(m)},get sourceHandleId(){return mr(y)},get targetHandleId(){return mr(w)},get markerStart(){return mr(P)},get markerEnd(){return mr(z)}})}),Ui(k,e=>A=e,()=>A),No(e=>x=bi(b,"",x,e),[()=>({"z-index":mr(C)})]),Lr(e,b)};ni(W,e=>{mr(T)||e(q)}),Lr(e,j),Jt()}(e,{get edge(){return mr(o)},get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return n()},set store(e){n(e)}})}),Lr(e,o),Jt()}var Xp=Ir('<div class="svelte-flow__selection svelte-1vr3gfi"></div>');function Gp(e,t){Gt(t,!0);let n=ia(t,"x",3,0),o=ia(t,"y",3,0),r=ia(t,"width",3,0),i=ia(t,"height",3,0),a=ia(t,"isVisible",3,!0);var s=Rr(),l=vo(s),d=e=>{var t=Xp();let a;No(e=>a=bi(t,"",a,e),[()=>({width:"string"==typeof r()?r():op(r()),height:"string"==typeof i()?i():op(i()),transform:`translate(${n()}px, ${o()}px)`})]),Lr(e,t)};ni(l,e=>{a()&&e(d)}),Lr(e,s),Jt()}function Jp(e,t){var n;const o=t.store.nodes.filter(e=>e.selected);null==(n=t.onselectioncontextmenu)||n.call(t,{nodes:o,event:e})}function Qp(e,t){var n;const o=t.store.nodes.filter(e=>e.selected);null==(n=t.onselectionclick)||n.call(t,{nodes:o,event:e})}var ef=Ir("<div><!></div>");function tf(e){switch(e){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function nf(e,t){let n,{enabled:o=!0,trigger:r,type:i="keydown"}=t;function a(t){var n;const o=Array.isArray(r)?r:[r],i=[t.metaKey,t.altKey,t.shiftKey,t.ctrlKey].reduce((e,t,n)=>t?e|1<<n:e,0);for(const r of o){const o=pe({preventDefault:!1,enabled:!0},r),{modifier:a,key:s,callback:l,preventDefault:d,enabled:u}=o;if(u){if(t.key!==s)continue;if(null===a||!1===a){if(0!==i)continue}else if(void 0!==a&&(null==(n=null==a?void 0:a[0])?void 0:n.length)>0){const e=Array.isArray(a)?a:[a];let t=!1;for(const n of e){if((Array.isArray(n)?n:[n]).reduce((e,t)=>e|tf(t),0)===i){t=!0;break}}if(!t)continue}d&&t.preventDefault();const r={node:e,trigger:o,originalEvent:t};e.dispatchEvent(new CustomEvent("shortcut",{detail:r})),null==l||l(r)}}}return o&&(n=Cr(e,i,a)),{update:t=>{const{enabled:s=!0,type:l="keydown"}=t;!o||s&&i===l?!o&&s&&(n=Cr(e,l,a)):null==n||n(),o=s,i=l,r=t.trigger},destroy:()=>{null==n||n()}}}function of(){const e=zn(_p),t=t=>{var n,o,r,i;const a=np(t)?t:mr(e).nodeLookup.get(t.id),s=a.parentId?function(e,t={width:0,height:0},n,o,r){var i,a;const s=pe({},e),l=o.get(n);if(l){const e=l.origin||r;s.x+=l.internals.positionAbsolute.x-(null!=(i=t.width)?i:0)*e[0],s.y+=l.internals.positionAbsolute.y-(null!=(a=t.height)?a:0)*e[1]}return s}(a.position,a.measured,a.parentId,mr(e).nodeLookup,mr(e).nodeOrigin):a.position,l=fe(pe({},a),{position:s,width:null!=(o=null==(n=a.measured)?void 0:n.width)?o:a.width,height:null!=(i=null==(r=a.measured)?void 0:r.height)?i:a.height});return Mu(l)};function n(t,n,o={replace:!1}){mr(e).nodes=wr(()=>mr(e).nodes).map(e=>{if(e.id===t){const t="function"==typeof n?n(e):n;return(null==o?void 0:o.replace)&&np(t)?t:pe(pe({},e),t)}return e})}const o=t=>mr(e).nodeLookup.get(t);return{zoomIn:mr(e).zoomIn,zoomOut:mr(e).zoomOut,getInternalNode:o,getNode:e=>{var t;return null==(t=o(e))?void 0:t.internals.userNode},getNodes:t=>void 0===t?mr(e).nodes:rf(mr(e).nodeLookup,t),getEdge:t=>mr(e).edgeLookup.get(t),getEdges:t=>void 0===t?mr(e).edges:rf(mr(e).edgeLookup,t),setZoom:(t,n)=>{const o=mr(e).panZoom;return o?o.scaleTo(t,{duration:null==n?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>mr(e).viewport.zoom,setViewport:(t,n)=>xe(null,null,function*(){var o,r,i;const a=mr(e).viewport;return mr(e).panZoom?(yield mr(e).panZoom.setViewport({x:null!=(o=t.x)?o:a.x,y:null!=(r=t.y)?r:a.y,zoom:null!=(i=t.zoom)?i:a.zoom},n),Promise.resolve(!0)):Promise.resolve(!1)}),getViewport:()=>Lt(mr(e).viewport),setCenter:(t,n,o)=>xe(null,null,function*(){return mr(e).setCenter(t,n,o)}),fitView:t=>mr(e).fitView(t),fitBounds:(t,n)=>xe(null,null,function*(){var o;if(!mr(e).panZoom)return Promise.resolve(!1);const r=Hu(t,mr(e).width,mr(e).height,mr(e).minZoom,mr(e).maxZoom,null!=(o=null==n?void 0:n.padding)?o:.1);return yield mr(e).panZoom.setViewport(r,{duration:null==n?void 0:n.duration,ease:null==n?void 0:n.ease,interpolate:null==n?void 0:n.interpolate}),Promise.resolve(!0)}),getIntersectingNodes:(n,o=!0,r)=>{const i=Du(n),a=i?n:t(n);return a?(r||mr(e).nodes).filter(t=>{const r=mr(e).nodeLookup.get(t.id);if(!r||!i&&t.id===n.id)return!1;const s=Mu(r),l=zu(s,a);return o&&l>0||l>=s.width*s.height||l>=a.width*a.height}):[]},isNodeIntersecting:(e,n,o=!0)=>{const r=Du(e)?e:t(e);if(!r)return!1;const i=zu(r,n);return o&&i>0||i>=r.width*r.height},deleteElements:t=>xe(null,[t],function*({nodes:t=[],edges:n=[]}){var o,r;const{nodes:i,edges:a}=yield _u({nodesToRemove:t,edgesToRemove:n,nodes:mr(e).nodes,edges:mr(e).edges,onBeforeDelete:mr(e).onbeforedelete});return i&&(mr(e).nodes=wr(()=>mr(e).nodes).filter(e=>!i.some(({id:t})=>t===e.id))),a&&(mr(e).edges=wr(()=>mr(e).edges).filter(e=>!a.some(({id:t})=>t===e.id))),(i.length>0||a.length>0)&&(null==(r=(o=mr(e)).ondelete)||r.call(o,{nodes:i,edges:a})),{deletedNodes:i,deletedEdges:a}}),screenToFlowPosition:(t,n={snapToGrid:!0})=>{if(!mr(e).domNode)return t;const o=!!n.snapToGrid&&mr(e).snapGrid,{x:r,y:i,zoom:a}=mr(e).viewport,{x:s,y:l}=mr(e).domNode.getBoundingClientRect(),d={x:t.x-s,y:t.y-l};return Wu(d,[r,i,a],null!==o,o||[1,1])},flowToScreenPosition:t=>{if(!mr(e).domNode)return t;const{x:n,y:o,zoom:r}=mr(e).viewport,{x:i,y:a}=mr(e).domNode.getBoundingClientRect(),s=qu(t,[n,o,r]);return{x:s.x+i,y:s.y+a}},toObject:()=>structuredClone({nodes:[...mr(e).nodes],edges:[...mr(e).edges],viewport:pe({},mr(e).viewport)}),updateNode:n,updateNodeData:(t,o,r)=>{var i;const a=null==(i=mr(e).nodeLookup.get(t))?void 0:i.internals.userNode;if(!a)return;const s="function"==typeof o?o(a):o;n(t,e=>fe(pe({},e),{data:(null==r?void 0:r.replace)?s:pe(pe({},e.data),s)}))},updateEdge:function(t,n,o={replace:!1}){mr(e).edges=wr(()=>mr(e).edges).map(e=>{if(e.id===t){const t="function"==typeof n?n(e):n;return o.replace&&vu(t)?t:pe(pe({},e),t)}return e})},getNodesBounds:t=>((e,t={nodeOrigin:[0,0]})=>{if(0===e.length)return{x:0,y:0,width:0,height:0};const n=e.reduce((e,n)=>{const o="string"==typeof n;let r=t.nodeLookup||o?void 0:n;t.nodeLookup&&(r=o?t.nodeLookup.get(n):mu(n)?n:t.nodeLookup.get(n.id));const i=r?Iu(r,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Au(e,i)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ou(n)})(t,{nodeLookup:mr(e).nodeLookup,nodeOrigin:mr(e).nodeOrigin}),getHandleConnections:({type:t,id:n,nodeId:o})=>{var r,i;return Array.from(null!=(i=null==(r=mr(e).connectionLookup.get(`${o}-${t}-${null!=n?n:null}`))?void 0:r.values())?i:[])}}}function rf(e,t){var n;const o=[];for(const r of t){const t=e.get(r);if(t){const e="internals"in t?null==(n=t.internals)?void 0:n.userNode:t;o.push(e)}}return o}function af(e,t){Gt(t,!0);let n=ia(t,"store",15),o=ia(t,"selectionKey",3,"Shift"),r=ia(t,"multiSelectionKey",19,()=>Uu()?"Meta":"Control"),i=ia(t,"deleteKey",3,"Backspace"),a=ia(t,"panActivationKey",3," "),s=ia(t,"zoomActivationKey",19,()=>Uu()?"Meta":"Control"),{deleteElements:l}=of();function d(e){return null!==e&&"object"==typeof e}function u(e){return d(e)&&e.modifier||[]}function c(e,t){return(Array.isArray(e)?e:[e]).map(e=>{const n=function(e){return null==e?"":d(e)?e.key:e}(e);return{key:n,modifier:u(e),enabled:null!==n,callback:t}})}function p(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}Er("blur",io,p),Er("contextmenu",io,p),ci(io,(e,t)=>null==nf?void 0:nf(e,t),()=>({trigger:c(o(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),ci(io,(e,t)=>null==nf?void 0:nf(e,t),()=>({trigger:c(o(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),ci(io,(e,t)=>null==nf?void 0:nf(e,t),()=>({trigger:c(r(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),ci(io,(e,t)=>null==nf?void 0:nf(e,t),()=>({trigger:c(r(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),ci(io,(e,t)=>null==nf?void 0:nf(e,t),()=>({trigger:c(i(),e=>{e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey||Ju(e.originalEvent)||(n(n().deleteKeyPressed=!0,!0),function(){const e=n().nodes.filter(e=>e.selected),t=n().edges.filter(e=>e.selected);l({nodes:e,edges:t})}())}),type:"keydown"})),ci(io,(e,t)=>null==nf?void 0:nf(e,t),()=>({trigger:c(i(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),ci(io,(e,t)=>null==nf?void 0:nf(e,t),()=>({trigger:c(a(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),ci(io,(e,t)=>null==nf?void 0:nf(e,t),()=>({trigger:c(a(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),ci(io,(e,t)=>null==nf?void 0:nf(e,t),()=>({trigger:c(s(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),ci(io,(e,t)=>null==nf?void 0:nf(e,t),()=>({trigger:c(s(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),Jt()}$r(["contextmenu","click","keydown"]);var sf=zr('<path fill="none" class="svelte-flow__connection-path"></path>'),lf=zr('<svg class="svelte-flow__connectionline"><g><!></g></svg>');var df=Ir("<div><!></div>");function uf(e,t){Gt(t,!0);let n=ia(t,"position",3,"top-right"),o=na(t,["$$slots","$$events","$$legacy","position","style","class","children"]),r=zn(()=>`${n()}`.split("-"));var i=df();Ii(i,e=>pe({class:e,style:t.style},o),[()=>["svelte-flow__panel",t.class,...mr(r)]]),Jr(go(i),()=>{var e;return null!=(e=t.children)?e:Je}),Lr(e,i),Jt()}var cf=Ir('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');var pf=Ir("<div><!></div>");var ff=Ir('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),hf=Ir("<!> <!>",1),gf=Ir("<!> <!> <!> <!> <!>",1);function vf(e,t){Gt(t,!0);let n=ia(t,"paneClickDistance",3,1),o=ia(t,"nodeClickDistance",3,1),r=ia(t,"panOnScrollMode",19,()=>ou.Free),i=ia(t,"preventScrolling",3,!0),a=ia(t,"zoomOnScroll",3,!0),s=ia(t,"zoomOnDoubleClick",3,!0),l=ia(t,"zoomOnPinch",3,!0),d=ia(t,"panOnScroll",3,!1),u=ia(t,"panOnDrag",3,!0),c=ia(t,"selectionOnDrag",3,!0),p=ia(t,"connectionLineType",19,()=>lu.Bezier),f=ia(t,"nodes",31,()=>eo([])),h=ia(t,"edges",31,()=>eo([])),g=ia(t,"viewport",15,void 0),v=na(t,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),m=Tp({props:v,width:t.width,height:t.height,get nodes(){return f()},set nodes(e){f(e)},get edges(){return h()},set edges(e){h(e)},get viewport(){return g()},set viewport(e){g(e)}});const y=Yt(Sp);y&&y.setStore&&y.setStore(m),Xt(Sp,{provider:!1,getStore:()=>m}),To(()=>{var e;const n={nodes:m.selectedNodes,edges:m.selectedEdges};null==(e=wr(()=>t.onselectionchange))||e(n);for(const t of m.selectionChangeHandlers.values())t(n)}),ei(()=>{m.reset()}),function(e,t){Gt(t,!0);let n=ia(t,"domNode",15),o=ia(t,"clientWidth",15),r=ia(t,"clientHeight",15),i=zn(()=>t.rest.class),a=zn(()=>function(e,t){var n={};for(var o in e)t.includes(o)||(n[o]=e[o]);return n}(t.rest,["id","class","nodeTypes","edgeTypes","colorMode","isValidConnection","onmove","onmovestart","onmoveend","onflowerror","ondelete","onbeforedelete","onbeforeconnect","onconnect","onconnectstart","onconnectend","onbeforereconnect","onreconnect","onreconnectstart","onreconnectend","onclickconnectstart","onclickconnectend","oninit","onselectionchange","onselectiondragstart","onselectiondrag","onselectiondragstop","onselectionstart","onselectionend","clickConnect","fitView","fitViewOptions","nodeOrigin","nodeDragThreshold","connectionDragThreshold","minZoom","maxZoom","initialViewport","connectionRadius","connectionMode","selectionMode","selectNodesOnDrag","snapGrid","defaultMarkerColor","translateExtent","nodeExtent","onlyRenderVisibleElements","autoPanOnConnect","autoPanOnNodeDrag","colorModeSSR","style","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","elementsSelectable","nodesFocusable","edgesFocusable","disableKeyboardA11y","noDragClass","noPanClass","noWheelClass","ariaLabelConfig"]));function s(e){e.currentTarget.scrollTo({top:0,left:0,behavior:"auto"}),t.rest.onscroll&&t.rest.onscroll(e)}var l=pf();Ii(l,e=>fe(pe({class:["svelte-flow","svelte-flow__container",mr(i),t.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",onscroll:s},mr(a)),{[Ci]:e}),[()=>({width:op(t.width),height:op(t.height)})],void 0,"svelte-mkap6j"),Jr(go(l),()=>{var e;return null!=(e=t.children)?e:Je}),Ui(l,e=>n(e),()=>n()),Fi(l,"clientHeight",r),Fi(l,"clientWidth",o),Lr(e,l),Jt()}(e,{get colorMode(){return m.colorMode},get width(){return t.width},get height(){return t.height},get rest(){return v},get domNode(){return m.domNode},set domNode(e){m.domNode=e},get clientWidth(){return m.width},set clientWidth(e){m.width=e},get clientHeight(){return m.height},set clientHeight(e){m.height=e},children:(e,f)=>{var h=gf(),g=vo(h);af(0,{get selectionKey(){return t.selectionKey},get deleteKey(){return t.deleteKey},get panActivationKey(){return t.panActivationKey},get multiSelectionKey(){return t.multiSelectionKey},get zoomActivationKey(){return t.zoomActivationKey},get store(){return m},set store(e){m=e}});var v=mo(g,2);!function(e,t){Gt(t,!0);let n=ia(t,"store",15),o=ia(t,"panOnScrollMode",19,()=>ou.Free),r=ia(t,"preventScrolling",3,!0),i=ia(t,"zoomOnScroll",3,!0),a=ia(t,"zoomOnDoubleClick",3,!0),s=ia(t,"zoomOnPinch",3,!0),l=ia(t,"panOnDrag",3,!0),d=ia(t,"panOnScroll",3,!1),u=ia(t,"paneClickDistance",3,1),c=zn(()=>n().panActivationKeyPressed||l()),p=zn(()=>n().panActivationKeyPressed||d());const{viewport:f}=n();let h=!1;To(()=>{var e;!h&&n().viewportInitialized&&(null==(e=t.oninit)||e.call(t),h=!0)});var g=Ep();Jr(go(g),()=>t.children),ci(g,(e,t)=>null==Cp?void 0:Cp(e,t),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:f,onDraggingChange:e=>{n(n().dragging=e,!0)},setPanZoomInstance:e=>{n(n().panZoom=e,!0)},onPanZoomStart:t.onmovestart,onPanZoom:t.onmove,onPanZoomEnd:t.onmoveend,zoomOnScroll:i(),zoomOnDoubleClick:a(),zoomOnPinch:s(),panOnScroll:mr(p),panOnDrag:mr(c),panOnScrollSpeed:.5,panOnScrollMode:o()||ou.Free,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:"boolean"!=typeof r()||r(),noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:u(),onTransformChange:e=>{n(n().viewport={x:e[0],y:e[1],zoom:e[2]},!0)}})),Lr(e,g),Jt()}(v,{get panOnScrollMode(){return r()},get preventScrolling(){return i()},get zoomOnScroll(){return a()},get zoomOnDoubleClick(){return s()},get zoomOnPinch(){return l()},get panOnScroll(){return d()},get panOnDrag(){return u()},get paneClickDistance(){return n()},get onmovestart(){return t.onmovestart},get onmove(){return t.onmove},get onmoveend(){return t.onmoveend},get oninit(){return t.oninit},get store(){return m},set store(e){m=e},children:(e,n)=>{!function(e,t){Gt(t,!0);let n,o=ia(t,"store",15),r=ia(t,"panOnDrag",3,!0),i=null,a=new Set,s=new Set,l=zn(()=>o().panActivationKeyPressed||r()),d=zn(()=>o().selectionKeyPressed||o().selectionRect||t.selectionOnDrag&&!0!==mr(l)),u=zn(()=>o().elementsSelectable&&(mr(d)||"user"===o().selectionRectMode)),c=!1;function p(e){var n;c||o().connection.inProgress?c=!1:(null==(n=t.onpaneclick)||n.call(t,{event:e}),o().unselectNodesAndEdges(),o(o().selectionRectMode=null,!0))}function f(e){var r,a,s;if(i=null==n?void 0:n.getBoundingClientRect(),!o().elementsSelectable||!mr(d)||0!==e.button||e.target!==n||!i)return;null==(a=null==(r=e.target)?void 0:r.setPointerCapture)||a.call(r,e.pointerId);const{x:l,y:u}=ec(e,i);o().unselectNodesAndEdges(),o(o().selectionRect={width:0,height:0,startX:l,startY:u,x:l,y:u},!0),null==(s=t.onselectionstart)||s.call(t,e)}function h(e){var t,n;if(!mr(d)||!i||!o().selectionRect)return;c=!0;const r=ec(e,i),{startX:l=0,startY:u=0}=o().selectionRect,p=fe(pe({},o().selectionRect),{x:r.x<l?r.x:l,y:r.y<u?r.y:u,width:Math.abs(r.x-l),height:Math.abs(r.y-u)}),f=a,h=s;a=new Set(bu(o().nodeLookup,p,[o().viewport.x,o().viewport.y,o().viewport.zoom],o().selectionMode===iu.Partial,!0).map(e=>e.id));const g=null==(t=o().defaultEdgeOptions.selectable)||t;s=new Set;for(const i of a){const e=o().connectionLookup.get(i);if(e)for(const{edgeId:t}of e.values()){const e=o().edgeLookup.get(t);e&&(null!=(n=e.selectable)?n:g)&&s.add(t)}}Np(f,a)||o(o().nodes=o().nodes.map(Ap(a)),!0),Np(h,s)||o(o().edges=o().edges.map(Ap(s)),!0),o(o().selectionRectMode="user",!0),o(o().selectionRect=p,!0)}function g(e){var r,i,s;0===e.button&&(null==(i=null==(r=e.target)?void 0:r.releasePointerCapture)||i.call(r,e.pointerId),mr(d)||"user"!==o().selectionRectMode||e.target!==n||null==p||p(e),o(o().selectionRect=null,!0),a.size>0&&o(o().selectionRectMode="nodes",!0),o().selectionKeyPressed&&(c=!1),null==(s=t.onselectionend)||s.call(t,e))}const v=e=>{var n;Array.isArray(mr(l))&&mr(l).includes(2)?e.preventDefault():null==(n=t.onpanecontextmenu)||n.call(t,{event:e})};var m=Op();let y;var w=zn(()=>mr(u)?void 0:$p(p,n));m.__click=function(...e){var t;null==(t=mr(w))||t.apply(this,e)},m.__pointerdown=function(...e){var t;null==(t=mr(u)?f:void 0)||t.apply(this,e)},m.__pointermove=function(...e){var t;null==(t=mr(u)?h:void 0)||t.apply(this,e)},m.__pointerup=function(...e){var t;null==(t=mr(u)?g:void 0)||t.apply(this,e)};var b=zn(()=>$p(v,n));m.__contextmenu=function(...e){var t;null==(t=mr(b))||t.apply(this,e)},Jr(go(m),()=>t.children),Ui(m,e=>n=e,()=>n),No(e=>y=yi(m,1,"svelte-flow__pane svelte-flow__container",null,y,e),[()=>({draggable:!0===r()||Array.isArray(r())&&r().includes(0),dragging:o().dragging,selection:mr(d)})]),Lr(e,m),Jt()}(e,{get onpaneclick(){return t.onpaneclick},get onpanecontextmenu(){return t.onpanecontextmenu},get onselectionstart(){return t.onselectionstart},get onselectionend(){return t.onselectionend},get panOnDrag(){return u()},get selectionOnDrag(){return c()},get store(){return m},set store(e){m=e},children:(e,n)=>{var r=hf(),i=vo(r);!function(e,t){Gt(t,!0);var n=Mp();let o;Jr(go(n),()=>t.children),No(e=>o=bi(n,"",o,e),[()=>{var e,n,o;return{transform:`translate(${null!=(e=t.store.viewport.x)?e:""}px, ${null!=(n=t.store.viewport.y)?n:""}px) scale(${null!=(o=t.store.viewport.zoom)?o:""})`}}]),Lr(e,n),Jt()}(i,{get store(){return m},set store(e){m=e},children:(e,n)=>{var r=ff(),i=mo(vo(r),2);Yp(i,{get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return m},set store(e){m=e}});var a=mo(i,4);!function(e,t){Gt(t,!0);let n=zn(()=>{if(!t.store.connection.inProgress)return"";const e={sourceX:t.store.connection.from.x,sourceY:t.store.connection.from.y,sourcePosition:t.store.connection.fromPosition,targetX:t.store.connection.to.x,targetY:t.store.connection.to.y,targetPosition:t.store.connection.toPosition};switch(t.type){case lu.Bezier:{const[t]=rc(e);return t}case lu.Straight:{const[t]=dc(e);return t}case lu.Step:case lu.SmoothStep:{const[n]=fc(fe(pe({},e),{borderRadius:t.type===lu.Step?0:void 0}));return n}}});var o=Rr(),r=vo(o),i=e=>{var o=lf(),r=go(o),i=go(r),a=e=>{var n=Rr();ui(vo(n),()=>t.LineComponent,(e,t)=>{t(e,{})}),Lr(e,n)},s=e=>{var o=sf();No(()=>{Mi(o,"d",mr(n)),bi(o,t.style)}),Lr(e,o)};ni(i,e=>{t.LineComponent?e(a):e(s,!1)}),No(e=>{Mi(o,"width",t.store.width),Mi(o,"height",t.store.height),bi(o,t.containerStyle),yi(r,0,e)},[()=>{return hi(["svelte-flow__connection",(e=t.store.connection.isValid,null===e?null:e?"valid":"invalid")]);var e}]),Lr(e,o)};ni(r,e=>{t.store.connection.inProgress&&e(i)}),Lr(e,o),Jt()}(a,{get type(){return p()},get LineComponent(){return t.connectionLineComponent},get containerStyle(){return t.connectionLineContainerStyle},get style(){return t.connectionLineStyle},get store(){return m},set store(e){m=e}});var s=mo(a,2);!function(e,t){Gt(t,!0);let n=ia(t,"store",15);const o="undefined"==typeof ResizeObserver?null:new ResizeObserver(e=>{const t=new Map;e.forEach(e=>{const n=e.target.getAttribute("data-id");t.set(n,{id:n,nodeElement:e.target,force:!0})}),n().updateNodeInternals(t)});ei(()=>{null==o||o.disconnect()});var r=qp();ri(r,21,()=>n().visible.nodes.values(),e=>e.id,(e,r)=>{Wp(e,{get node(){return mr(r)},get resizeObserver(){return o},get nodeClickDistance(){return t.nodeClickDistance},get onnodeclick(){return t.onnodeclick},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get onnodecontextmenu(){return t.onnodecontextmenu},get store(){return n()},set store(e){n(e)}})}),Lr(e,r),Jt()}(s,{get nodeClickDistance(){return o()},get onnodeclick(){return t.onnodeclick},get onnodecontextmenu(){return t.onnodecontextmenu},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return m},set store(e){m=e}}),function(e,t){Gt(t,!0);let n=Bn(void 0);To(()=>{var e;t.store.disableKeyboardA11y||null==(e=mr(n))||e.focus({preventScroll:!0})});let o=zn(()=>"nodes"===t.store.selectionRectMode?(t.store.nodes,wu(t.store.nodeLookup,{filter:e=>!!e.selected})):null);function r(e){Object.prototype.hasOwnProperty.call(rp,e.key)&&(e.preventDefault(),t.store.moveSelectedNodes(rp[e.key],e.shiftKey?4:1))}var i=Rr(),a=vo(i),s=e=>{var i=ef();let a;i.__contextmenu=[Jp,t],i.__click=[Qp,t],i.__keydown=function(...e){var n;null==(n=t.store.disableKeyboardA11y?void 0:r)||n.apply(this,e)},Gp(go(i),{width:"100%",height:"100%",x:0,y:0}),ci(i,(e,t)=>null==Ip?void 0:Ip(e,t),()=>({disabled:!1,store:t.store,onDrag:(e,n,o,r)=>{var i;null==(i=t.onnodedrag)||i.call(t,{event:e,targetNode:null,nodes:r})},onDragStart:(e,n,o,r)=>{var i;null==(i=t.onnodedragstart)||i.call(t,{event:e,targetNode:null,nodes:r})},onDragStop:(e,n,o,r)=>{var i;null==(i=t.onnodedragstop)||i.call(t,{event:e,targetNode:null,nodes:r})}})),Ui(i,e=>Zn(n,e),()=>mr(n)),No(e=>{yi(i,1,hi(["svelte-flow__selection-wrapper",t.store.noPanClass]),"svelte-sf2y5e"),Mi(i,"role",t.store.disableKeyboardA11y?void 0:"button"),Mi(i,"tabindex",t.store.disableKeyboardA11y?void 0:-1),a=bi(i,"",a,e)},[()=>{var e,t;return{width:op(mr(o).width),height:op(mr(o).height),transform:`translate(${null!=(e=mr(o).x)?e:""}px, ${null!=(t=mr(o).y)?t:""}px)`}}]),Lr(e,i)};ni(a,e=>{"nodes"===t.store.selectionRectMode&&mr(o)&&Ru(mr(o).x)&&Ru(mr(o).y)&&e(s)}),Lr(e,i),Jt()}(mo(s,2),{get onselectionclick(){return t.onselectionclick},get onselectioncontextmenu(){return t.onselectioncontextmenu},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return m},set store(e){m=e}}),Lr(e,r)},$$slots:{default:!0}});var a=mo(i,2);{let e=zn(()=>!(!m.selectionRect||"user"!==m.selectionRectMode)),t=zn(()=>{var e;return null==(e=m.selectionRect)?void 0:e.width}),n=zn(()=>{var e;return null==(e=m.selectionRect)?void 0:e.height}),o=zn(()=>{var e;return null==(e=m.selectionRect)?void 0:e.x}),r=zn(()=>{var e;return null==(e=m.selectionRect)?void 0:e.y});Gp(a,{get isVisible(){return mr(e)},get width(){return mr(t)},get height(){return mr(n)},get x(){return mr(o)},get y(){return mr(r)}})}Lr(e,r)},$$slots:{default:!0}})},$$slots:{default:!0}});var y=mo(v,2);!function(e,t){Gt(t,!0);let n=ia(t,"position",3,"bottom-right");var o=Rr(),r=vo(o),i=e=>{uf(e,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(e,t)=>{Lr(e,cf())},$$slots:{default:!0}})};ni(r,e=>{var n;(null==(n=t.proOptions)?void 0:n.hideAttribution)||e(i)}),Lr(e,o),Jt()}(y,{get proOptions(){return t.proOptions},get position(){return t.attributionPosition}});var w=mo(y,2);!function(e,t){Gt(t,!0);var n=zp(),o=vo(n),r=go(o),i=mo(o,2),a=go(i),s=mo(i,2),l=e=>{var n=Pp(),o=go(n);No(()=>{Mi(n,"id",`${Lp}-${t.store.flowId}`),Br(o,t.store.ariaLiveMessage)}),Lr(e,n)};ni(s,e=>{t.store.disableKeyboardA11y||e(l)}),No(()=>{Mi(o,"id",`${Dp}-${t.store.flowId}`),Br(r,t.store.disableKeyboardA11y?t.store.ariaLabelConfig["node.a11yDescription.default"]:t.store.ariaLabelConfig["node.a11yDescription.keyboardDisabled"]),Mi(i,"id",`${Rp}-${t.store.flowId}`),Br(a,t.store.ariaLabelConfig["edge.a11yDescription.default"])}),Lr(e,n),Jt()}(w,{get store(){return m}}),Jr(mo(w,2),()=>{var e;return null!=(e=t.children)?e:Je}),Lr(e,h)},$$slots:{default:!0}}),Jt()}var mf=Ir("<button><!></button>");function yf(e,t){let n=na(t,["$$slots","$$events","$$legacy","class","bgColor","bgColorHover","color","colorHover","borderColor","onclick","children"]);var o=mf();Ii(o,e=>fe(pe({type:"button",onclick:t.onclick,class:["svelte-flow__controls-button",t.class]},n),{[Ci]:e}),[()=>({"--xy-controls-button-background-color-props":t.bgColor,"--xy-controls-button-background-color-hover-props":t.bgColorHover,"--xy-controls-button-color-props":t.color,"--xy-controls-button-color-hover-props":t.colorHover,"--xy-controls-button-border-color-props":t.borderColor})]),Jr(go(o),()=>{var e;return null!=(e=t.children)?e:Je}),Lr(e,o)}var wf=zr('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');var bf=zr('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');var xf=zr('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');var kf=zr('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');var _f=zr('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');var Sf,Tf,Cf=Ir("<!> <!>",1),Ef=Ir("<!> <!> <!> <!> <!> <!>",1);function $f(e,t){Gt(t,!0);let n=ia(t,"position",3,"bottom-left"),o=ia(t,"orientation",3,"vertical"),r=ia(t,"showZoom",3,!0),i=ia(t,"showFitView",3,!0),a=ia(t,"showLock",3,!0),s=na(t,["$$slots","$$events","$$legacy","position","orientation","showZoom","showFitView","showLock","style","class","buttonBgColor","buttonBgColorHover","buttonColor","buttonColorHover","buttonBorderColor","fitViewOptions","children","before","after"]),l=zn(_p);const d={bgColor:t.buttonBgColor,bgColorHover:t.buttonBgColorHover,color:t.buttonColor,colorHover:t.buttonColorHover,borderColor:t.buttonBorderColor};let u=zn(()=>mr(l).nodesDraggable||mr(l).nodesConnectable||mr(l).elementsSelectable),c=zn(()=>mr(l).viewport.zoom<=mr(l).minZoom),p=zn(()=>mr(l).viewport.zoom>=mr(l).maxZoom),f=zn(()=>mr(l).ariaLabelConfig),h=zn(()=>"horizontal"===o()?"horizontal":"vertical");const g=()=>{mr(l).zoomIn()},v=()=>{mr(l).zoomOut()},m=()=>{mr(l).fitView(t.fitViewOptions)},y=()=>{let e=!mr(u);mr(l).nodesDraggable=e,mr(l).nodesConnectable=e,mr(l).elementsSelectable=e};{let o=zn(()=>["svelte-flow__controls",mr(h),t.class]);uf(e,ra({get class(){return mr(o)},get position(){return n()},"data-testid":"svelte-flow__controls",get"aria-label"(){return mr(f)["controls.ariaLabel"]},get style(){return t.style}},()=>s,{children:(e,n)=>{var o=Ef(),s=vo(o),l=e=>{var n=Rr();Jr(vo(n),()=>t.before),Lr(e,n)};ni(s,e=>{t.before&&e(l)});var h=mo(s,2),w=e=>{var t=Cf(),n=vo(t);yf(n,ra({onclick:g,class:"svelte-flow__controls-zoomin",get title(){return mr(f)["controls.zoomIn.ariaLabel"]},get"aria-label"(){return mr(f)["controls.zoomIn.ariaLabel"]},get disabled(){return mr(p)}},()=>d,{children:(e,t)=>{!function(e){Lr(e,wf())}(e)},$$slots:{default:!0}})),yf(mo(n,2),ra({onclick:v,class:"svelte-flow__controls-zoomout",get title(){return mr(f)["controls.zoomOut.ariaLabel"]},get"aria-label"(){return mr(f)["controls.zoomOut.ariaLabel"]},get disabled(){return mr(c)}},()=>d,{children:(e,t)=>{!function(e){Lr(e,bf())}(e)},$$slots:{default:!0}})),Lr(e,t)};ni(h,e=>{r()&&e(w)});var b=mo(h,2),x=e=>{yf(e,ra({class:"svelte-flow__controls-fitview",onclick:m,get title(){return mr(f)["controls.fitView.ariaLabel"]},get"aria-label"(){return mr(f)["controls.fitView.ariaLabel"]}},()=>d,{children:(e,t)=>{!function(e){Lr(e,xf())}(e)},$$slots:{default:!0}}))};ni(b,e=>{i()&&e(x)});var k=mo(b,2),_=e=>{yf(e,ra({class:"svelte-flow__controls-interactive",onclick:y,get title(){return mr(f)["controls.interactive.ariaLabel"]},get"aria-label"(){return mr(f)["controls.interactive.ariaLabel"]}},()=>d,{children:(e,t)=>{var n=Rr(),o=vo(n),r=e=>{!function(e){Lr(e,_f())}(e)},i=e=>{!function(e){Lr(e,kf())}(e)};ni(o,e=>{mr(u)?e(r):e(i,!1)}),Lr(e,n)},$$slots:{default:!0}}))};ni(k,e=>{a()&&e(_)});var S=mo(k,2),T=e=>{var n=Rr();Jr(vo(n),()=>t.children),Lr(e,n)};ni(S,e=>{t.children&&e(T)});var C=mo(S,2),E=e=>{var n=Rr();Jr(vo(n),()=>t.after),Lr(e,n)};ni(C,e=>{t.after&&e(E)}),Lr(e,o)},$$slots:{default:!0}}))}Jt()}(Tf=Sf||(Sf={})).Lines="lines",Tf.Dots="dots",Tf.Cross="cross";var Af=zr("<circle></circle>");var Nf=zr("<path></path>");const Of={[Sf.Dots]:1,[Sf.Lines]:1,[Sf.Cross]:6};var Mf=zr('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function If(e,t){Gt(t,!0);let n=ia(t,"variant",19,()=>Sf.Dots),o=ia(t,"gap",3,20),r=ia(t,"lineWidth",3,1),i=zn(_p),a=zn(()=>n()===Sf.Dots),s=zn(()=>n()===Sf.Cross),l=zn(()=>Array.isArray(o())?o():[o(),o()]),d=zn(()=>{var e;return`background-pattern-${mr(i).flowId}-${null!=(e=t.id)?e:""}`}),u=zn(()=>[mr(l)[0]*mr(i).viewport.zoom||1,mr(l)[1]*mr(i).viewport.zoom||1]),c=zn(()=>{var e;return(null!=(e=t.size)?e:Of[n()])*mr(i).viewport.zoom}),p=zn(()=>mr(s)?[mr(c),mr(c)]:mr(u)),f=zn(()=>mr(a)?[mr(c)/2,mr(c)/2]:[mr(p)[0]/2,mr(p)[1]/2]);var h=Mf();let g;var v=go(h),m=go(v),y=e=>{{let n=zn(()=>mr(c)/2);!function(e,t){var n=Af();No(()=>{Mi(n,"cx",t.radius),Mi(n,"cy",t.radius),Mi(n,"r",t.radius),yi(n,0,hi(["svelte-flow__background-pattern","dots",t.class]))}),Lr(e,n)}(e,{get radius(){return mr(n)},get class(){return t.patternClass}})}},w=e=>{!function(e,t){Gt(t,!0);var n=Nf();No(()=>{Mi(n,"stroke-width",t.lineWidth),Mi(n,"d",`M${t.dimensions[0]/2} 0 V${t.dimensions[1]} M0 ${t.dimensions[1]/2} H${t.dimensions[0]}`),yi(n,0,hi(["svelte-flow__background-pattern",t.variant,t.class]))}),Lr(e,n),Jt()}(e,{get dimensions(){return mr(p)},get variant(){return n()},get lineWidth(){return r()},get class(){return t.patternClass}})};ni(m,e=>{mr(a)?e(y):e(w,!1)});var b=mo(v);No(e=>{yi(h,0,hi(["svelte-flow__background","svelte-flow__container",t.class])),g=bi(h,"",g,e),Mi(v,"id",mr(d)),Mi(v,"x",mr(i).viewport.x%mr(u)[0]),Mi(v,"y",mr(i).viewport.y%mr(u)[1]),Mi(v,"width",mr(u)[0]),Mi(v,"height",mr(u)[1]),Mi(v,"patternTransform",`translate(-${mr(f)[0]},-${mr(f)[1]})`),Mi(b,"fill",`url(#${mr(d)})`)},[()=>({"--xy-background-color-props":t.bgColor,"--xy-background-pattern-color-props":t.patternColor})]),Lr(e,h),Jt()}var Pf=zr("<rect></rect>");function zf(e,t){const n=function({domNode:e,panZoom:t,getTransform:n,getViewScale:o}){const r=_s(e);return{update:function({translateExtent:e,width:i,height:a,zoomStep:s=1,pannable:l=!0,zoomable:d=!0,inversePan:u=!1}){let c=[0,0];const p=Kd().on("start",e=>{var t,n;"mousedown"!==e.sourceEvent.type&&"touchstart"!==e.sourceEvent.type||(c=[null!=(t=e.sourceEvent.clientX)?t:e.sourceEvent.touches[0].clientX,null!=(n=e.sourceEvent.clientY)?n:e.sourceEvent.touches[0].clientY])}).on("zoom",l?r=>{var s,l;const d=n();if("mousemove"!==r.sourceEvent.type&&"touchmove"!==r.sourceEvent.type||!t)return;const p=[null!=(s=r.sourceEvent.clientX)?s:r.sourceEvent.touches[0].clientX,null!=(l=r.sourceEvent.clientY)?l:r.sourceEvent.touches[0].clientY],f=[p[0]-c[0],p[1]-c[1]];c=p;const h=o()*Math.max(d[2],Math.log(d[2]))*(u?-1:1),g={x:d[0]-f[0]*h,y:d[1]-f[1]*h},v=[[0,0],[i,a]];t.setViewportConstrained({x:g.x,y:g.y,zoom:d[2]},v,e)}:null).on("zoom.wheel",d?e=>{if("wheel"!==e.sourceEvent.type||!t)return;const o=n(),r=e.sourceEvent.ctrlKey&&Uu()?10:1,i=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*s,a=o[2]*Math.pow(2,i*r);t.scaleTo(a)}:null);r.call(p,{})},destroy:function(){r.on("zoom",null)},pointer:Ss}}({domNode:e,panZoom:t.panZoom,getTransform:()=>{const{viewport:e}=t.store;return[e.x,e.y,e.zoom]},getViewScale:t.getViewScale});return n.update({translateExtent:t.translateExtent,width:t.width,height:t.height,inversePan:t.inversePan,zoomStep:t.zoomStep,pannable:t.pannable,zoomable:t.zoomable}),{update:function(e){n.update({translateExtent:e.translateExtent,width:e.width,height:e.height,inversePan:e.inversePan,zoomStep:e.zoomStep,pannable:e.pannable,zoomable:e.zoomable})},destroy(){n.destroy()}}}const Df=e=>e instanceof Function?e:()=>e;var Rf=zr("<title> </title>"),Lf=zr('<svg class="svelte-flow__minimap-svg" role="img"><!><!><path class="svelte-flow__minimap-mask" fill-rule="evenodd" pointer-events="none"></path></svg>'),jf=Ir('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Wf(e,t){Gt(t,!0);let n=ia(t,"position",3,"bottom-right"),o=ia(t,"nodeStrokeColor",3,"transparent"),r=ia(t,"nodeClass",3,""),i=ia(t,"nodeBorderRadius",3,5),a=ia(t,"nodeStrokeWidth",3,2),s=ia(t,"width",3,200),l=ia(t,"height",3,150),d=ia(t,"pannable",3,!0),u=ia(t,"zoomable",3,!0),c=na(t,["$$slots","$$events","$$legacy","position","ariaLabel","nodeStrokeColor","nodeColor","nodeClass","nodeBorderRadius","nodeStrokeWidth","bgColor","maskColor","maskStrokeColor","maskStrokeWidth","width","height","pannable","zoomable","inversePan","zoomStep","class"]),p=zn(_p),f=zn(()=>mr(p).ariaLabelConfig);const h=void 0===t.nodeColor?void 0:Df(t.nodeColor),g=Df(o()),v=Df(r()),m="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";let y=zn(()=>`svelte-flow__minimap-desc-${mr(p).flowId}`),w=zn(()=>({x:-mr(p).viewport.x/mr(p).viewport.zoom,y:-mr(p).viewport.y/mr(p).viewport.zoom,width:mr(p).width/mr(p).viewport.zoom,height:mr(p).height/mr(p).viewport.zoom})),b=zn(()=>mr(p).nodeLookup.size>0?Pu(wu(mr(p).nodeLookup,{filter:e=>!e.hidden}),mr(w)):mr(w)),x=zn(()=>mr(b).width/s()),k=zn(()=>mr(b).height/l()),_=zn(()=>Math.max(mr(x),mr(k))),S=zn(()=>mr(_)*s()),T=zn(()=>mr(_)*l()),C=zn(()=>5*mr(_)),E=zn(()=>mr(b).x-(mr(S)-mr(b).width)/2-mr(C)),$=zn(()=>mr(b).y-(mr(T)-mr(b).height)/2-mr(C)),A=zn(()=>mr(S)+2*mr(C)),N=zn(()=>mr(T)+2*mr(C));const O=()=>mr(_);var M,I,P=jf(),z=vo(P);{let e=zn(()=>["svelte-flow__minimap",t.class]);M=z,I=()=>({"--xy-minimap-background-color-props":t.bgColor}),Ao(()=>{var e=I();for(var t in e){var n=e[t];n?M.style.setProperty(t,n):M.style.removeProperty(t)}}),uf(z.lastChild,ra({get position(){return n()},get class(){return mr(e)},"data-testid":"svelte-flow__minimap"},()=>c,{children:(e,n)=>{var o=Rr(),r=vo(o),c=e=>{var n=Lf();let o;var r=go(n),c=e=>{var n=Rf(),o=go(n);No(()=>{var e;Mi(n,"id",mr(y)),Br(o,null!=(e=t.ariaLabel)?e:mr(f)["minimap.ariaLabel"])}),Lr(e,n)};ni(r,e=>{var n;(null!=(n=t.ariaLabel)?n:mr(f)["minimap.ariaLabel"])&&e(c)});var b=mo(r);ri(b,17,()=>mr(p).nodes,e=>e.id,(e,t)=>{const n=zn(()=>mr(p).nodeLookup.get(mr(t).id));var o=Rr(),r=vo(o),s=e=>{const t=zn(()=>Bu(mr(n)));{let o=zn(()=>null==h?void 0:h(mr(n))),r=zn(()=>g(mr(n))),s=zn(()=>v(mr(n)));!function(e,t){let n=ia(t,"borderRadius",3,5),o=ia(t,"strokeWidth",3,2);var r=Pf();let i,a;No((e,o)=>{i=yi(r,0,hi(["svelte-flow__minimap-node",t.class]),null,i,e),Mi(r,"x",t.x),Mi(r,"y",t.y),Mi(r,"rx",n()),Mi(r,"ry",n()),Mi(r,"width",t.width),Mi(r,"height",t.height),Mi(r,"shape-rendering",t.shapeRendering),a=bi(r,"",a,o)},[()=>({selected:t.selected}),()=>({fill:t.color,stroke:t.strokeColor,"stroke-width":o()})]),Lr(e,r)}(e,ra({get x(){return mr(n).internals.positionAbsolute.x},get y(){return mr(n).internals.positionAbsolute.y}},()=>mr(t),{get selected(){return mr(n).selected},get color(){return mr(o)},get borderRadius(){return i()},get strokeColor(){return mr(r)},get strokeWidth(){return a()},get shapeRendering(){return m},get class(){return mr(s)}}))}};ni(r,e=>{mr(n)&&Ku(mr(n))&&e(s)}),Lr(e,o)});var x=mo(b);ci(n,(e,t)=>null==zf?void 0:zf(e,t),()=>({store:mr(p),panZoom:mr(p).panZoom,getViewScale:O,translateExtent:mr(p).translateExtent,width:mr(p).width,height:mr(p).height,inversePan:t.inversePan,zoomStep:t.zoomStep,pannable:d(),zoomable:u()})),No(e=>{var t,r,i,a,d,u,c,p;Mi(n,"width",s()),Mi(n,"height",l()),Mi(n,"viewBox",`${null!=(t=mr(E))?t:""} ${null!=(r=mr($))?r:""} ${null!=(i=mr(A))?i:""} ${null!=(a=mr(N))?a:""}`),Mi(n,"aria-labelledby",mr(y)),o=bi(n,"",o,e),Mi(x,"d",`M${mr(E)-mr(C)},${mr($)-mr(C)}h${mr(A)+2*mr(C)}v${mr(N)+2*mr(C)}h${-mr(A)-2*mr(C)}z\n      M${null!=(d=mr(w).x)?d:""},${null!=(u=mr(w).y)?u:""}h${null!=(c=mr(w).width)?c:""}v${null!=(p=mr(w).height)?p:""}h${-mr(w).width}z`)},[()=>({"--xy-minimap-mask-background-color-props":t.maskColor,"--xy-minimap-mask-stroke-color-props":t.maskStrokeColor,"--xy-minimap-mask-stroke-width-props":t.maskStrokeWidth?t.maskStrokeWidth*mr(_):void 0})]),Lr(e,n)};ni(r,e=>{mr(p).panZoom&&e(c)}),Lr(e,o)},$$slots:{default:!0}}))}Lr(e,P),Jt()}const qf=/^[a-z0-9]+(-[a-z0-9]+)*$/,Ff=(e,t,n,o="")=>{const r=e.split(":");if("@"===e.slice(0,1)){if(r.length<2||r.length>3)return null;o=r.shift().slice(1)}if(r.length>3||!r.length)return null;if(r.length>1){const e=r.pop(),n=r.pop(),i={provider:r.length>0?r[0]:o,prefix:n,name:e};return t&&!Hf(i)?null:i}const i=r[0],a=i.split("-");if(a.length>1){const e={provider:o,prefix:a.shift(),name:a.join("-")};return t&&!Hf(e)?null:e}if(n&&""===o){const e={provider:o,prefix:"",name:i};return t&&!Hf(e,n)?null:e}return null},Hf=(e,t)=>!!e&&!(!(t&&""===e.prefix||e.prefix)||!e.name);const Uf=Object.freeze({left:0,top:0,width:16,height:16}),Vf=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Bf=Object.freeze(pe(pe({},Uf),Vf)),Kf=Object.freeze(fe(pe({},Bf),{body:"",hidden:!1}));function Zf(e,t){const n=function(e,t){const n={};!e.hFlip!=!t.hFlip&&(n.hFlip=!0),!e.vFlip!=!t.vFlip&&(n.vFlip=!0);const o=((e.rotate||0)+(t.rotate||0))%4;return o&&(n.rotate=o),n}(e,t);for(const o in Kf)o in Vf?o in e&&!(o in n)&&(n[o]=Vf[o]):o in t?n[o]=t[o]:o in e&&(n[o]=e[o]);return n}function Yf(e,t,n){const o=e.icons,r=e.aliases||Object.create(null);let i={};function a(e){i=Zf(o[e]||r[e],i)}return a(t),n.forEach(a),Zf(e,i)}function Xf(e,t){const n=[];if("object"!=typeof e||"object"!=typeof e.icons)return n;e.not_found instanceof Array&&e.not_found.forEach(e=>{t(e,null),n.push(e)});const o=function(e){const t=e.icons,n=e.aliases||Object.create(null),o=Object.create(null);return Object.keys(t).concat(Object.keys(n)).forEach(function e(r){if(t[r])return o[r]=[];if(!(r in o)){o[r]=null;const t=n[r]&&n[r].parent,i=t&&e(t);i&&(o[r]=[t].concat(i))}return o[r]}),o}(e);for(const r in o){const i=o[r];i&&(t(r,Yf(e,r,i)),n.push(r))}return n}const Gf=pe({provider:"",aliases:{},not_found:{}},Uf);function Jf(e,t){for(const n in t)if(n in e&&typeof e[n]!=typeof t[n])return!1;return!0}function Qf(e){if("object"!=typeof e||null===e)return null;const t=e;if("string"!=typeof t.prefix||!e.icons||"object"!=typeof e.icons)return null;if(!Jf(e,Gf))return null;const n=t.icons;for(const r in n){const e=n[r];if(!r||"string"!=typeof e.body||!Jf(e,Kf))return null}const o=t.aliases||Object.create(null);for(const r in o){const e=o[r],t=e.parent;if(!r||"string"!=typeof t||!n[t]&&!o[t]||!Jf(e,Kf))return null}return t}const eh=Object.create(null);function th(e,t){const n=eh[e]||(eh[e]=Object.create(null));return n[t]||(n[t]=function(e,t){return{provider:e,prefix:t,icons:Object.create(null),missing:new Set}}(e,t))}function nh(e,t){return Qf(t)?Xf(t,(t,n)=>{n?e.icons[t]=n:e.missing.add(t)}):[]}let oh=!1;function rh(e){return"boolean"==typeof e&&(oh=e),oh}function ih(e,t){const n=Ff(e,!0,oh);if(!n)return!1;const o=th(n.provider,n.prefix);return t?function(e,t,n){try{if("string"==typeof n.body)return e.icons[t]=pe({},n),!0}catch(o){}return!1}(o,n.name,t):(o.missing.add(n.name),!0)}const ah=Object.freeze({width:null,height:null}),sh=Object.freeze(pe(pe({},ah),Vf)),lh=/(-?[0-9.]*[0-9]+[0-9.]*)/g,dh=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function uh(e,t,n){if(1===t)return e;if(n=n||100,"number"==typeof e)return Math.ceil(e*t*n)/n;if("string"!=typeof e)return e;const o=e.split(lh);if(null===o||!o.length)return e;const r=[];let i=o.shift(),a=dh.test(i);for(;;){if(a){const e=parseFloat(i);isNaN(e)?r.push(i):r.push(Math.ceil(e*t*n)/n)}else r.push(i);if(i=o.shift(),void 0===i)return r.join("");a=!a}}const ch=/\sid="(\S+)"/g,ph=new Map;function fh(e){const t=[];let n;for(;n=ch.exec(e);)t.push(n[1]);if(!t.length)return e;const o="suffix"+(16777216*Math.random()|Date.now()).toString(16);return t.forEach(t=>{const n=function(e){e=e.replace(/[0-9]+$/,"")||"a";const t=ph.get(e)||0;return ph.set(e,t+1),t?`${e}${t}`:e}(t),r=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+r+')([")]|\\.[a-z])',"g"),"$1"+n+o+"$3")}),e=e.replace(new RegExp(o,"g"),"")}const hh=Object.create(null);function gh(e){return hh[e]||hh[""]}function vh(e){let t;if("string"==typeof e.resources)t=[e.resources];else if(t=e.resources,!(t instanceof Array&&t.length))return null;return{resources:t,path:e.path||"/",maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:!0===e.random,index:e.index||0,dataAfterTimeout:!1!==e.dataAfterTimeout}}const mh=Object.create(null),yh=["https://api.simplesvg.com","https://api.unisvg.com"],wh=[];for(;yh.length>0;)1===yh.length||Math.random()>.5?wh.push(yh.shift()):wh.push(yh.pop());function bh(e,t){const n=vh(t);return null!==n&&(mh[e]=n,!0)}function xh(e){return mh[e]}mh[""]=vh({resources:["https://api.iconify.design"].concat(wh)});let kh=(()=>{let e;try{if(e=fetch,"function"==typeof e)return e}catch(t){}})();const _h={prepare:(e,t,n)=>{const o=[],r=function(e,t){const n=xh(e);if(!n)return 0;let o;if(n.maxURL){let e=0;n.resources.forEach(t=>{const n=t;e=Math.max(e,n.length)});const r=t+".json?icons=";o=n.maxURL-e-n.path.length-r.length}else o=0;return o}(e,t),i="icons";let a={type:i,provider:e,prefix:t,icons:[]},s=0;return n.forEach((n,l)=>{s+=n.length+1,s>=r&&l>0&&(o.push(a),a={type:i,provider:e,prefix:t,icons:[]},s=n.length),a.icons.push(n)}),o.push(a),o},send:(e,t,n)=>{if(!kh)return void n("abort",424);let o=function(e){if("string"==typeof e){const t=xh(e);if(t)return t.path}return"/"}(t.provider);switch(t.type){case"icons":{const e=t.prefix,n=t.icons.join(",");o+=e+".json?"+new URLSearchParams({icons:n}).toString();break}case"custom":{const e=t.uri;o+="/"===e.slice(0,1)?e.slice(1):e;break}default:return void n("abort",400)}let r=503;kh(e+o).then(e=>{const t=e.status;if(200===t)return r=501,e.json();setTimeout(()=>{n(function(e){return 404===e}(t)?"abort":"next",t)})}).then(e=>{"object"==typeof e&&null!==e?setTimeout(()=>{n("success",e)}):setTimeout(()=>{404===e?n("abort",e):n("next",r)})}).catch(()=>{n("next",r)})}};function Sh(e,t){e.forEach(e=>{const n=e.loaderCallbacks;n&&(e.loaderCallbacks=n.filter(e=>e.id!==t))})}let Th=0;const Ch={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function Eh(e,t,n,o){const r=e.resources.length,i=e.random?Math.floor(Math.random()*r):e.index;let a;if(e.random){let t=e.resources.slice(0);for(a=[];t.length>1;){const e=Math.floor(Math.random()*t.length);a.push(t[e]),t=t.slice(0,e).concat(t.slice(e+1))}a=a.concat(t)}else a=e.resources.slice(i).concat(e.resources.slice(0,i));const s=Date.now();let l,d="pending",u=0,c=null,p=[],f=[];function h(){c&&(clearTimeout(c),c=null)}function g(){"pending"===d&&(d="aborted"),h(),p.forEach(e=>{"pending"===e.status&&(e.status="aborted")}),p=[]}function v(e,t){t&&(f=[]),"function"==typeof e&&f.push(e)}function m(){d="failed",f.forEach(e=>{e(void 0,l)})}function y(){p.forEach(e=>{"pending"===e.status&&(e.status="aborted")}),p=[]}function w(){if("pending"!==d)return;h();const o=a.shift();if(void 0===o)return p.length?void(c=setTimeout(()=>{h(),"pending"===d&&(y(),m())},e.timeout)):void m();const r={status:"pending",resource:o,callback:(t,n)=>{!function(t,n,o){const r="success"!==n;switch(p=p.filter(e=>e!==t),d){case"pending":break;case"failed":if(r||!e.dataAfterTimeout)return;break;default:return}if("abort"===n)return l=o,void m();if(r)return l=o,void(p.length||(a.length?w():m()));if(h(),y(),!e.random){const n=e.resources.indexOf(t.resource);-1!==n&&n!==e.index&&(e.index=n)}d="completed",f.forEach(e=>{e(o)})}(r,t,n)}};p.push(r),u++,c=setTimeout(w,e.rotate),n(o,t,r.callback)}return"function"==typeof o&&f.push(o),setTimeout(w),function(){return{startTime:s,payload:t,status:d,queriesSent:u,queriesPending:p.length,subscribe:v,abort:g}}}function $h(e){const t=pe(pe({},Ch),e);let n=[];function o(){n=n.filter(e=>"pending"===e().status)}return{query:function(e,r,i){const a=Eh(t,e,r,(e,t)=>{o(),i&&i(e,t)});return n.push(a),a},find:function(e){return n.find(t=>e(t))||null},setIndex:e=>{t.index=e},getIndex:()=>t.index,cleanup:o}}function Ah(){}const Nh=Object.create(null);function Oh(e,t,n){let o,r;if("string"==typeof e){const t=gh(e);if(!t)return n(void 0,424),Ah;r=t.send;const i=function(e){if(!Nh[e]){const t=xh(e);if(!t)return;Nh[e]={config:t,redundancy:$h(t)}}return Nh[e]}(e);i&&(o=i.redundancy)}else{const t=vh(e);if(t){o=$h(t);const n=gh(e.resources?e.resources[0]:"");n&&(r=n.send)}}return o&&r?o.query(t,r,n)().abort:(n(void 0,424),Ah)}function Mh(){}function Ih(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout(()=>{e.iconsLoaderFlag=!1,function(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout(()=>{e.pendingCallbacksFlag=!1;const t=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!t.length)return;let n=!1;const o=e.provider,r=e.prefix;t.forEach(t=>{const i=t.icons,a=i.pending.length;i.pending=i.pending.filter(t=>{if(t.prefix!==r)return!0;const a=t.name;if(e.icons[a])i.loaded.push({provider:o,prefix:r,name:a});else{if(!e.missing.has(a))return n=!0,!0;i.missing.push({provider:o,prefix:r,name:a})}return!1}),i.pending.length!==a&&(n||Sh([e],t.id),t.callback(i.loaded.slice(0),i.missing.slice(0),i.pending.slice(0),t.abort))})}))}(e)}))}function Ph(e,t,n){function o(){const n=e.pendingIcons;t.forEach(t=>{n&&n.delete(t),e.icons[t]||e.missing.add(t)})}if(n&&"object"==typeof n)try{if(!nh(e,n).length)return void o()}catch(r){console.error(r)}o(),Ih(e)}function zh(e,t){e instanceof Promise?e.then(e=>{t(e)}).catch(()=>{t(null)}):t(e)}function Dh(e,t){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(t).sort():e.iconsToLoad=t,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout(()=>{e.iconsQueueFlag=!1;const{provider:t,prefix:n}=e,o=e.iconsToLoad;if(delete e.iconsToLoad,!o||!o.length)return;const r=e.loadIcon;if(e.loadIcons&&(o.length>1||!r))return void zh(e.loadIcons(o,n,t),t=>{Ph(e,o,t)});if(r)return void o.forEach(o=>{zh(r(o,n,t),t=>{Ph(e,[o],t?{prefix:n,icons:{[o]:t}}:null)})});const{valid:i,invalid:a}=function(e){const t=[],n=[];return e.forEach(e=>{(e.match(qf)?t:n).push(e)}),{valid:t,invalid:n}}(o);if(a.length&&Ph(e,a,null),!i.length)return;const s=n.match(qf)?gh(t):null;s?s.prepare(t,n,i).forEach(n=>{Oh(t,n,t=>{Ph(e,n.icons,t)})}):Ph(e,i,null)}))}const Rh=(e,t)=>{const n=function(e){const t={loaded:[],missing:[],pending:[]},n=Object.create(null);e.sort((e,t)=>e.provider!==t.provider?e.provider.localeCompare(t.provider):e.prefix!==t.prefix?e.prefix.localeCompare(t.prefix):e.name.localeCompare(t.name));let o={provider:"",prefix:"",name:""};return e.forEach(e=>{if(o.name===e.name&&o.prefix===e.prefix&&o.provider===e.provider)return;o=e;const r=e.provider,i=e.prefix,a=e.name,s=n[r]||(n[r]=Object.create(null)),l=s[i]||(s[i]=th(r,i));let d;d=a in l.icons?t.loaded:""===i||l.missing.has(a)?t.missing:t.pending;const u={provider:r,prefix:i,name:a};d.push(u)}),t}(function(e,t=!0,n=!1){const o=[];return e.forEach(e=>{const r="string"==typeof e?Ff(e,t,n):e;r&&o.push(r)}),o}(e,!0,rh()));if(!n.pending.length){let e=!0;return t&&setTimeout(()=>{e&&t(n.loaded,n.missing,n.pending,Mh)}),()=>{e=!1}}const o=Object.create(null),r=[];let i,a;return n.pending.forEach(e=>{const{provider:t,prefix:n}=e;if(n===a&&t===i)return;i=t,a=n,r.push(th(t,n));const s=o[t]||(o[t]=Object.create(null));s[n]||(s[n]=[])}),n.pending.forEach(e=>{const{provider:t,prefix:n,name:r}=e,i=th(t,n),a=i.pendingIcons||(i.pendingIcons=new Set);a.has(r)||(a.add(r),o[t][n].push(r))}),r.forEach(e=>{const t=o[e.provider][e.prefix];t.length&&Dh(e,t)}),t?function(e,t,n){const o=Th++,r=Sh.bind(null,n,o);if(!t.pending.length)return r;const i={id:o,icons:t,callback:e,abort:r};return n.forEach(e=>{(e.loaderCallbacks||(e.loaderCallbacks=[])).push(i)}),r}(t,n,r):Mh};const Lh=/[\s,]+/;function jh(e,t){t.split(Lh).forEach(t=>{switch(t.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0}})}function Wh(e,t=0){const n=e.replace(/^-?[0-9.]*/,"");function o(e){for(;e<0;)e+=4;return e%4}if(""===n){const t=parseInt(e);return isNaN(t)?0:o(t)}if(n!==e){let t=0;switch(n){case"%":t=25;break;case"deg":t=90}if(t){let r=parseFloat(e.slice(0,e.length-n.length));return isNaN(r)?0:(r/=t,r%1==0?o(r):0)}}return t}const qh=fe(pe({},sh),{inline:!1}),Fh={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},Hh={display:"inline-block"},Uh={"background-color":"currentColor"},Vh={"background-color":"transparent"},Bh={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},Kh={"-webkit-mask":Uh,mask:Uh,background:Vh};for(const x_ in Kh){const e=Kh[x_];for(const t in Bh)e[x_+"-"+t]=Bh[t]}function Zh(e,t){const n=function(e,t){const n=pe({},e);for(const o in t){const e=t[o],r=typeof e;o in ah?(null===e||e&&("string"===r||"number"===r))&&(n[o]=e):r===typeof n[o]&&(n[o]="rotate"===o?e%4:e)}return n}(qh,t),o=t.mode||"svg",r="svg"===o?pe({},Fh):{};-1===e.body.indexOf("xlink:")&&delete r["xmlns:xlink"];let i="string"==typeof t.style?t.style:"";for(let v in t){const e=t[v];if(void 0!==e)switch(v){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":n[v]=!0===e||"true"===e||1===e;break;case"flip":"string"==typeof e&&jh(n,e);break;case"color":i=i+(i.length>0&&";"!==i.trim().slice(-1)?";":"")+"color: "+e+"; ";break;case"rotate":"string"==typeof e?n[v]=Wh(e):"number"==typeof e&&(n[v]=e);break;case"ariaHidden":case"aria-hidden":!0!==e&&"true"!==e&&delete r["aria-hidden"];break;default:if("on:"===v.slice(0,3))break;void 0===qh[v]&&(r[v]=e)}}const a=function(e,t){const n=pe(pe({},Bf),e),o=pe(pe({},sh),t),r={left:n.left,top:n.top,width:n.width,height:n.height};let i=n.body;[n,o].forEach(e=>{const t=[],n=e.hFlip,o=e.vFlip;let a,s=e.rotate;switch(n?o?s+=2:(t.push("translate("+(r.width+r.left).toString()+" "+(0-r.top).toString()+")"),t.push("scale(-1 1)"),r.top=r.left=0):o&&(t.push("translate("+(0-r.left).toString()+" "+(r.height+r.top).toString()+")"),t.push("scale(1 -1)"),r.top=r.left=0),s<0&&(s-=4*Math.floor(s/4)),s%=4,s){case 1:a=r.height/2+r.top,t.unshift("rotate(90 "+a.toString()+" "+a.toString()+")");break;case 2:t.unshift("rotate(180 "+(r.width/2+r.left).toString()+" "+(r.height/2+r.top).toString()+")");break;case 3:a=r.width/2+r.left,t.unshift("rotate(-90 "+a.toString()+" "+a.toString()+")")}s%2==1&&(r.left!==r.top&&(a=r.left,r.left=r.top,r.top=a),r.width!==r.height&&(a=r.width,r.width=r.height,r.height=a)),t.length&&(i=function(e,t,n){const o=function(e,t="defs"){let n="";const o=e.indexOf("<"+t);for(;o>=0;){const r=e.indexOf(">",o),i=e.indexOf("</"+t);if(-1===r||-1===i)break;const a=e.indexOf(">",i);if(-1===a)break;n+=e.slice(r+1,i).trim(),e=e.slice(0,o).trim()+e.slice(a+1)}return{defs:n,content:e}}(e);return r=o.defs,i=t+o.content+n,r?"<defs>"+r+"</defs>"+i:i;var r,i}(i,'<g transform="'+t.join(" ")+'">',"</g>"))});const a=o.width,s=o.height,l=r.width,d=r.height;let u,c;null===a?(c=null===s?"1em":"auto"===s?d:s,u=uh(c,l/d)):(u="auto"===a?l:a,c=null===s?uh(u,d/l):"auto"===s?d:s);const p={},f=(e,t)=>{(e=>"unset"===e||"undefined"===e||"none"===e)(t)||(p[e]=t.toString())};f("width",u),f("height",c);const h=[r.left,r.top,l,d];return p.viewBox=h.join(" "),{attributes:p,viewBox:h,body:i}}(e,n),s=a.attributes;if(n.inline&&(i="vertical-align: -0.125em; "+i),"svg"===o)return Object.assign(r,s),""!==i&&(r.style=i),{svg:!0,attributes:r,body:fh(a.body)};const{body:l,width:d,height:u}=e,c="mask"===o||"bg"!==o&&-1!==l.indexOf("currentColor"),p=function(e,t){let n=-1===e.indexOf("xlink:")?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const o in t)n+=" "+o+'="'+t[o]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+e+"</svg>"}(l,fe(pe({},s),{width:d+"",height:u+""}));const f={"--svg":'url("'+function(e){return"data:image/svg+xml,"+function(e){return e.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}(e)}(p)+'")'},h=e=>{const t=s[e];t&&(f[e]=function(e){return e+(e.match(/^[-0-9.]+$/)?"px":"")}(t))};h("width"),h("height"),Object.assign(f,Hh,c?Uh:Vh);let g="";for(const v in f)g+=v+": "+f[v]+";";return r.style=g+i,{svg:!1,attributes:r}}var Yh;if(rh(!0),Yh=_h,hh[""]=Yh,"undefined"!=typeof document&&"undefined"!=typeof window){const e=window;if(void 0!==e.IconifyPreload){const t=e.IconifyPreload,n="Invalid IconifyPreload syntax.";"object"==typeof t&&null!==t&&(t instanceof Array?t:[t]).forEach(e=>{try{("object"!=typeof e||null===e||e instanceof Array||"object"!=typeof e.icons||"string"!=typeof e.prefix||!function(e,t){if("object"!=typeof e)return!1;if("string"!=typeof t&&(t=e.provider||""),oh&&!t&&!e.prefix){let t=!1;return Qf(e)&&(e.prefix="",Xf(e,(e,n)=>{ih(e,n)&&(t=!0)})),t}const n=e.prefix;return!!Hf({prefix:n,name:"a"})&&!!nh(th(t,n),e)}(e))&&console.error(n)}catch(t){console.error(n)}})}if(void 0!==e.IconifyProviders){const t=e.IconifyProviders;if("object"==typeof t&&null!==t)for(let e in t){const n="IconifyProviders["+e+"] is invalid.";try{const o=t[e];if("object"!=typeof o||!o||void 0===o.resources)continue;bh(e,o)||console.error(n)}catch(b_){console.error(n)}}}}function Xh(e,t,n,o){function r(){t.loading&&(t.loading.abort(),t.loading=null)}if("object"==typeof e&&null!==e&&"string"==typeof e.body)return t.name="",r(),{data:pe(pe({},Bf),e)};let i;if("string"!=typeof e||null===(i=Ff(e,!1,!0)))return r(),null;const a=function(e){const t="string"==typeof e?Ff(e,!0,oh):e;if(t){const e=th(t.provider,t.prefix),n=t.name;return e.icons[n]||(e.missing.has(n)?null:void 0)}}(i);if(!a)return function(){try{return"object"!=typeof window}catch(e){return!0}}()||t.loading&&t.loading.name===e||(r(),t.name="",t.loading={name:e,abort:Rh([i],n)}),null;r(),t.name!==e&&(t.name=e,o&&!t.destroyed&&setTimeout(()=>{o(e)}));const s=["iconify"];return""!==i.prefix&&s.push("iconify--"+i.prefix),""!==i.provider&&s.push("iconify--"+i.provider),{data:a,classes:s}}var Gh=zr("<svg><!></svg>"),Jh=Ir("<span></span>");function Qh(e,t){Gt(t,!0);const n={name:"",loading:null,destroyed:!1},o=na(t,["$$slots","$$events","$$legacy"]);let r=Bn(0),i=zn(()=>(mr(r),Xh(t.icon,n,s,t.onload))),a=zn(()=>{const e=mr(i)?function(e,t){return e?Zh(pe(pe({},Bf),e),t):null}(mr(i).data,o):null;return e&&mr(i).classes&&(e.attributes.class=("string"==typeof o.class?o.class+" ":"")+mr(i).classes.join(" ")),e});function s(){!function(e,t=1){var n=mr(e),o=1===t?n++:n--;Zn(e,n)}(r)}ei(()=>{n.destroyed=!0,n.loading&&(n.loading.abort(),n.loading=null)});var l=Rr(),d=vo(l),u=e=>{var t=Rr(),n=vo(t),o=e=>{var t=Gh();Ii(t,()=>pe({},mr(a).attributes)),di(go(t),()=>mr(a).body,!0),Lr(e,t)},r=e=>{var t=Jh();Ii(t,()=>pe({},mr(a).attributes)),Lr(e,t)};ni(n,e=>{mr(a).svg?e(o):e(r,!1)}),Lr(e,t)};ni(d,e=>{mr(a)&&e(u)}),Lr(e,l),Jt()}var eg=Ir('<div class="flowdrop-canvas-banner svelte-jbf3xv"><div class="flowdrop-card"><div class="flowdrop-card__body flowdrop-text--center"><div class="flowdrop-canvas-banner__icon svelte-jbf3xv"><!></div> <h3 class="flowdrop-canvas-banner__title svelte-jbf3xv"> </h3> <p class="flowdrop-canvas-banner__description svelte-jbf3xv"> </p></div></div></div>');function tg(e,t){var n=eg(),o=go(n),r=go(o),i=go(r),a=go(i),s=e=>{Qh(e,{get icon(){return t.iconName},class:"flowdrop-canvas-banner__icon-svg"})};ni(a,e=>{t.iconName&&e(s)});var l=mo(i,2),d=go(l),u=go(mo(l,2));No(()=>{Br(d,t.title),Br(u,t.description)}),Lr(e,n)}var ng=Ir('<div class="flow-drop-zone svelte-qx43wk" role="application" aria-label="Workflow canvas"><!></div>');class og{constructor(e){ge(this,"portConfig"),ge(this,"compatibilityMap"),this.portConfig=e,this.compatibilityMap=new Map,this.buildCompatibilityMap()}buildCompatibilityMap(){this.compatibilityMap.clear();for(const e of this.portConfig.dataTypes)this.compatibilityMap.has(e.id)||this.compatibilityMap.set(e.id,new Set),this.compatibilityMap.get(e.id).add(e.id);for(const e of this.portConfig.compatibilityRules)this.compatibilityMap.has(e.from)||this.compatibilityMap.set(e.from,new Set),this.compatibilityMap.get(e.from).add(e.to);for(const e of this.portConfig.dataTypes)if(e.aliases)for(const t of e.aliases){const n=this.compatibilityMap.get(e.id);n&&(this.compatibilityMap.set(t,new Set(n)),n.add(t))}}areDataTypesCompatible(e,t){const n=this.compatibilityMap.get(e);return!!n&&n.has(t)}getCompatibleTypes(e){const t=this.compatibilityMap.get(e);return t?Array.from(t):[]}getDataTypeConfig(e){return this.portConfig.dataTypes.find(t=>{var n;return t.id===e||(null==(n=t.aliases)?void 0:n.includes(e))})}getEnabledDataTypes(){return this.portConfig.dataTypes.filter(e=>!1!==e.enabled)}}let rg=null;function ig(e){rg=new og(e)}function ag(){if(!rg)throw new Error("Port compatibility checker not initialized. Call initializePortCompatibility() first.");return rg}function sg(e,t){return rg?rg.areDataTypesCompatible(e,t):e===t}function lg(e,t,n){const o=n.find(t=>t.id===e.data.metadata.id);if(!o)return[];const r=[],i=o.outputs;for(const a of t){if(a.id===e.id)continue;const t=n.find(e=>e.id===a.data.metadata.id);if(!t)continue;const o=t.inputs;for(const n of i)for(const t of o){const o=sg(n.dataType,t.dataType);r.push({sourceNodeId:e.id,sourcePortId:n.id,sourcePort:n,targetNodeId:a.id,targetPortId:t.id,targetPort:t,compatible:o})}}return r}function dg(e,t,n,o,r,i){const a=r.find(t=>t.id===e),s=r.find(e=>e.id===n);if(!a)return{valid:!1,error:"Source node not found"};if(!s)return{valid:!1,error:"Target node not found"};if(e===n)return{valid:!1,error:"Cannot connect node to itself"};const l=i.find(e=>e.id===a.data.metadata.id),d=i.find(e=>e.id===s.data.metadata.id);if(!l||!d)return{valid:!1,error:"Node metadata not found"};const u=l.outputs.find(e=>e.id===t),c=d.inputs.find(e=>e.id===o);return u?c?sg(u.dataType,c.dataType)?{valid:!0}:{valid:!1,error:`Incompatible data types: ${u.dataType} cannot connect to ${c.dataType}`}:{valid:!1,error:"Target port not found"}:{valid:!1,error:"Source port not found"}}function ug(e,t,n){const o=t.find(t=>t.id===e);if(!o)return[];const r=n.find(e=>e.id===o.data.metadata.id);if(!r)return[];const i=[],a=t.filter(t=>t.id!==e);for(const s of a){const e=n.find(e=>e.id===s.data.metadata.id);if(e){for(const t of e.outputs)for(const e of r.inputs){const n=sg(t.dataType,e.dataType);i.push({nodeId:s.id,nodeName:s.data.label,portId:t.id,portName:t.name,portType:"output",dataType:t.dataType,compatible:n})}for(const t of r.outputs)for(const n of e.inputs){const e=sg(t.dataType,n.dataType);i.push({nodeId:s.id,nodeName:s.data.label,portId:n.id,portName:n.name,portType:"input",dataType:n.dataType,compatible:e})}}}return i}function cg(e,t){const n=new Set,o=new Set;function r(e){if(o.has(e))return!0;if(n.has(e))return!1;n.add(e),o.add(e);const i=t.filter(t=>t.source===e);for(const t of i)if(r(t.target))return!0;return o.delete(e),!1}for(const i of e)if(!n.has(i.id)&&r(i.id))return!0;return!1}function pg(e,t){const n=new Map,o=new Map;for(const a of e)n.set(a.id,0),o.set(a.id,[]);for(const a of t){const e=n.get(a.target)||0;n.set(a.target,e+1);const t=o.get(a.source)||[];t.push(a.target),o.set(a.source,t)}const r=[],i=[];for(const[a,s]of n)0===s&&r.push(a);for(;r.length>0;){const e=r.shift();i.push(e);const t=o.get(e)||[];for(const o of t){const e=n.get(o)-1;n.set(o,e),0===e&&r.push(o)}}return i}const fg={inputs:"var(--color-ref-emerald-500)",outputs:"var(--color-ref-blue-600)",prompts:"var(--color-ref-amber-500)",models:"var(--color-ref-indigo-500)",processing:"var(--color-ref-teal-500)",logic:"var(--color-ref-purple-600)",data:"var(--color-ref-orange-500)",helpers:"var(--color-ref-slate-500)",tools:"var(--color-ref-amber-500)","vector stores":"var(--color-ref-emerald-500)",embeddings:"var(--color-ref-indigo-500)",memories:"var(--color-ref-blue-600)",agents:"var(--color-ref-teal-500)",ai:"var(--color-ref-purple-500)",bundles:"var(--color-ref-slate-500)"},hg={string:"var(--color-ref-emerald-500)",text:"var(--color-ref-emerald-500)",number:"var(--color-ref-blue-600)",integer:"var(--color-ref-blue-600)",float:"var(--color-ref-blue-600)",boolean:"var(--color-ref-purple-600)",array:"var(--color-ref-amber-500)",list:"var(--color-ref-amber-500)",object:"var(--color-ref-orange-500)",json:"var(--color-ref-orange-500)",mixed:"var(--color-ref-orange-500)",file:"var(--color-ref-red-500)",document:"var(--color-ref-red-500)",image:"var(--color-ref-pink-500)",picture:"var(--color-ref-pink-500)",audio:"var(--color-ref-indigo-500)",sound:"var(--color-ref-indigo-500)",video:"var(--color-ref-teal-500)",movie:"var(--color-ref-teal-500)",url:"var(--color-ref-cyan-500)",email:"var(--color-ref-cyan-500)",date:"var(--color-ref-lime-500)",datetime:"var(--color-ref-lime-500)",time:"var(--color-ref-lime-500)",tool:"var(--color-ref-amber-500)",trigger:"var(--color-ref-gray-950)",branch:"var(--color-ref-purple-500)"};function gg(e){return fg[e]||"var(--color-ref-slate-500)"}function vg(e){try{const t=ag().getDataTypeConfig(e);if(null==t?void 0:t.color)return t.color}catch(b_){}return hg[e.toLowerCase()]||"var(--color-ref-slate-500)"}function mg(e){try{return ag().getDataTypeConfig(e)}catch(t){return void console.warn("Port compatibility checker not initialized:",t)}}function yg(){try{return ag().getEnabledDataTypes()}catch(e){return console.warn("Port compatibility checker not initialized:",e),[]}}const wg={background:"flowdrop-color--base-light",accent:"flowdrop-color--neutral",text:"flowdrop-color--base-text",border:"flowdrop-color--base-border"};function bg(e){return fg[e]||"var(--color-ref-slate-500)"}function xg(e){return bg(e)}function kg(e){return bg(e)}function _g(e){return bg(e)}function Sg(e){return bg(e)}function Tg(e,t=!1,n=!1,o=!1){const r=bg(e);return t?{background:"var(--color-ref-red-50)",accent:"var(--color-ref-red-500)",text:"var(--color-ref-red-900)",border:"var(--color-ref-red-200)"}:n?{background:"var(--color-ref-blue-50)",accent:"var(--color-ref-blue-500)",text:"var(--color-ref-blue-900)",border:"var(--color-ref-blue-200)"}:o?{background:"var(--color-ref-indigo-50)",accent:"var(--color-ref-indigo-500)",text:"var(--color-ref-indigo-900)",border:"var(--color-ref-indigo-200)"}:{background:r,accent:r,text:"var(--color-ref-slate-900)",border:r}}function Cg(e,t=!1,n=!1,o=!1){return Tg(e,t,n,o).background}function Eg(e,t=!1,n=!1,o=!1){return Tg(e,t,n,o).accent}function $g(e,t=!1,n=!1,o=!1){return Tg(e,t,n,o).text}function Ag(e,t=!1,n=!1,o=!1){return Tg(e,t,n,o).border}function Ng(e){return vg(e)}function Og(e){if(e.endsWith("[]")){const t=e.slice(0,-2),n=mg(e);return{baseType:e,isArray:!0,displayName:(null==n?void 0:n.name)||`${t}[]`,elementType:t}}{const t=mg(e);return{baseType:e,isArray:!1,displayName:(null==t?void 0:t.name)||e}}}function Mg(e){return Og(e).displayName}function Ig(e){return e.endsWith("[]")||"array"===e||"list"===e}function Pg(e){return e.endsWith("[]")?e.slice(0,-2):null}var zg=zr('<path fill="none" class="animated"></path><circle fill="#fff"></circle>',1);function Dg(e,t){Gt(t,!0);const n=function(){const e=zn(_p),t=zn(()=>mr(e).connection);return{get current(){return mr(t)}}}();let o=zn(()=>{if(n.current.inProgress){const{from:e,to:t}=n.current;return`M${e.x},${e.y} C ${e.x} ${t.y} ${e.x} ${t.y} ${t.x},${t.y}`}return null});var r=Rr(),i=vo(r),a=e=>{var t=zg(),r=vo(t);Mi(r,"stroke-width",1.5);var i=mo(r);Mi(i,"r",3),Mi(i,"stroke-width",1.5),No((e,t)=>{Mi(r,"stroke",e),Mi(r,"d",mr(o)),Mi(i,"cx",n.current.to.x),Mi(i,"cy",n.current.to.y),Mi(i,"stroke",t)},[()=>Ng(n.current.fromHandle.id),()=>Ng(n.current.fromHandle.id)]),Lr(e,t)};ni(i,e=>{n.current.inProgress&&e(a)}),Lr(e,r),Jt()}const Rg=Ki(null),Lg=Ki(!1);let jg=null,Wg=null,qg=null;function Fg(e){Wg=e}function Hg(e){qg=e}function Ug(e){if(!e)return null;const t={name:e.name,description:e.description,nodes:e.nodes.map(e=>({id:e.id,position:e.position,data:{label:e.data.label,config:e.data.config}})),edges:e.edges.map(e=>({id:e.id,source:e.source,target:e.target,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle}))};return JSON.stringify(t)}function Vg(e){const t=Yi(Rg);t&&qg&&qg(t,e),function(){const e=Ug(Yi(Rg))!==jg;e!==Yi(Lg)&&(Lg.set(e),Wg&&Wg(e))}()}function Bg(){const e=Yi(Rg);jg=Ug(e),Lg.set(!1),Wg&&Wg(!1)}function Kg(){return Yi(Lg)}function Zg(){return Yi(Rg)}const Yg=Zi(Rg,e=>{var t;return null!=(t=null==e?void 0:e.id)?t:null}),Xg=Zi(Rg,e=>{var t;return null!=(t=null==e?void 0:e.name)?t:"Untitled Workflow"}),Gg=Zi(Rg,e=>{var t;return null!=(t=null==e?void 0:e.nodes)?t:[]}),Jg=Zi(Rg,e=>{var t;return null!=(t=null==e?void 0:e.edges)?t:[]}),Qg=Zi(Rg,e=>{var t;return null!=(t=null==e?void 0:e.metadata)?t:{version:"1.0.0",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),versionId:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,updateNumber:0}});function ev(e,t,n){if(!e)return!0;if(e.nodes.length!==t.length)return!0;for(let o=0;o<t.length;o++){const n=e.nodes[o],r=t[o];if(!n||!r)return!0;if(n.id!==r.id)return!0;if(n.position.x!==r.position.x||n.position.y!==r.position.y)return!0;if(JSON.stringify(n.data)!==JSON.stringify(r.data))return!0}if(e.edges.length!==n.length)return!0;for(let o=0;o<n.length;o++){const t=e.edges[o],r=n[o];if(!t||!r)return!0;if(t.id!==r.id)return!0;if(t.source!==r.source||t.target!==r.target)return!0}return!1}const tv={initialize:e=>{Rg.set(e),jg=Ug(e),Lg.set(!1),Wg&&Wg(!1)},updateWorkflow:e=>{Rg.set(e),Vg("metadata")},updateNodes:e=>{Rg.update(t=>{var n,o;if(!t)return null;if(!ev(t,e,t.edges))return t;const r=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`;return fe(pe({},t),{nodes:e,metadata:fe(pe({},t.metadata),{updatedAt:(new Date).toISOString(),versionId:r,updateNumber:(null!=(o=null==(n=t.metadata)?void 0:n.updateNumber)?o:0)+1})})}),Vg("node_move")},updateEdges:e=>{Rg.update(t=>{var n,o;if(!t)return null;if(!ev(t,t.nodes,e))return t;const r=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`;return fe(pe({},t),{edges:e,metadata:fe(pe({},t.metadata),{updatedAt:(new Date).toISOString(),versionId:r,updateNumber:(null!=(o=null==(n=t.metadata)?void 0:n.updateNumber)?o:0)+1})})}),Vg("edge_add")},updateName:e=>{Rg.update(t=>t?fe(pe({},t),{name:e,metadata:fe(pe({},t.metadata),{updatedAt:(new Date).toISOString()})}):null),Vg("name")},addNode:e=>{Rg.update(t=>t?fe(pe({},t),{nodes:[...t.nodes,e],metadata:fe(pe({},t.metadata),{updatedAt:(new Date).toISOString()})}):null),Vg("node_add")},removeNode:e=>{Rg.update(t=>t?fe(pe({},t),{nodes:t.nodes.filter(t=>t.id!==e),edges:t.edges.filter(t=>t.source!==e&&t.target!==e),metadata:fe(pe({},t.metadata),{updatedAt:(new Date).toISOString()})}):null),Vg("node_remove")},addEdge:e=>{Rg.update(t=>t?fe(pe({},t),{edges:[...t.edges,e],metadata:fe(pe({},t.metadata),{updatedAt:(new Date).toISOString()})}):null),Vg("edge_add")},removeEdge:e=>{Rg.update(t=>t?fe(pe({},t),{edges:t.edges.filter(t=>t.id!==e),metadata:fe(pe({},t.metadata),{updatedAt:(new Date).toISOString()})}):null),Vg("edge_remove")},updateNode:(e,t)=>{Rg.update(n=>n?fe(pe({},n),{nodes:n.nodes.map(n=>n.id===e?pe(pe({},n),t):n),metadata:fe(pe({},n.metadata),{updatedAt:(new Date).toISOString()})}):null),Vg("node_config")},clear:()=>{Rg.set(null),jg=null,Lg.set(!1),Wg&&Wg(!1)},updateMetadata:e=>{Rg.update(t=>t?fe(pe({},t),{metadata:fe(pe(pe({},t.metadata),e),{updatedAt:(new Date).toISOString()})}):null),Vg("metadata")},batchUpdate:e=>{Rg.update(t=>t?fe(pe(pe(pe(pe(pe({},t),e.nodes&&{nodes:e.nodes}),e.edges&&{edges:e.edges}),e.name&&{name:e.name}),void 0!==e.description&&{description:e.description}),{metadata:fe(pe(pe({},t.metadata),e.metadata&&pe({},e.metadata)),{updatedAt:(new Date).toISOString()})}):null),Vg("metadata")}},nv=Zi([Gg,Jg,Xg],([e,t,n])=>({nodes:e,edges:t,name:n})),ov=Zi([Gg,Jg],([e,t])=>({hasNodes:e.length>0,hasEdges:t.length>0,nodeCount:e.length,edgeCount:t.length,isValid:e.length>0&&t.length>=0})),rv=Zi(Qg,e=>{var t;return{createdAt:e.createdAt,updatedAt:e.updatedAt,version:null!=(t=e.version)?t:"1.0.0"}}),iv={NODE:"mdi:cube",CATEGORY:"mdi:folder",ADD:"mdi:plus",REMOVE:"mdi:minus",EDIT:"mdi:pencil",SAVE:"mdi:content-save",LOAD:"mdi:folder-open",EXPORT:"mdi:download",IMPORT:"mdi:upload",SEARCH:"mdi:magnify",CLOSE:"mdi:close",SETTINGS:"mdi:cog",HELP:"mdi:help-circle",SUCCESS:"mdi:check-circle",ERROR:"mdi:alert-circle",WARNING:"mdi:alert",INFO:"mdi:information",LOADING:"mdi:loading",HOME:"mdi:home",BACK:"mdi:arrow-left",FORWARD:"mdi:arrow-right",UP:"mdi:arrow-up",DOWN:"mdi:arrow-down",WORKFLOW:"mdi:graph",NODE_ADD:"mdi:plus-circle",NODE_DELETE:"mdi:minus-circle",CONNECTION:"mdi:connection",DATA:"mdi:database",FILE:"mdi:file",TEXT:"mdi:text",JSON:"mdi:code-json",MODEL:"mdi:chip",BRAIN:"mdi:brain",VECTOR:"mdi:vector-point",ROBOT:"mdi:robot",TOOL:"mdi:wrench",CALCULATOR:"mdi:calculator",CLOCK:"mdi:clock",CHAT:"mdi:chat",MESSAGE:"mdi:message",EMAIL:"mdi:email",WEBHOOK:"mdi:webhook",STORAGE:"mdi:database",MEMORY:"mdi:memory",CACHE:"mdi:cached",PROCESS:"mdi:cog",FILTER:"mdi:filter",SORT:"mdi:sort",TRANSFORM:"mdi:transform",LOGIC:"mdi:git-branch",CONDITION:"mdi:source-fork",LOOP:"mdi:loop",API:"mdi:api",LINK:"mdi:link",PLUGIN:"mdi:puzzle",BUNDLE:"mdi:package-variant"},av={inputs:"mdi:arrow-down-circle",outputs:"mdi:arrow-up-circle",prompts:"mdi:message-text",models:"mdi:robot",processing:"mdi:cog",logic:"mdi:source-branch",data:"mdi:database",helpers:"mdi:help-circle",tools:"mdi:wrench","vector stores":"mdi:vector-square",embeddings:"mdi:vector-polygon",memories:"mdi:brain",agents:"mdi:account-cog",ai:"mdi:artificial-intelligence",bundles:"mdi:package-variant"};function sv(e,t){return e||(t&&av[t]?av[t]:iv.NODE)}function lv(e){return av[e]||iv.CATEGORY}function dv(e){return iv[e]}function uv(e){return/^[a-z-]+:[a-z-]+$/.test(e)}function cv(e,t=iv.NODE){return uv(e)?e:t}function pv(){}var fv=(e,t)=>{Zn(t,!1)},hv=(e,t)=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t())},gv=Ir('<span class="flowdrop-badge flowdrop-badge--error flowdrop-badge--sm svelte-f368uu">Required</span>'),vv=Ir('<p class="flowdrop-text--xs flowdrop-text--gray flowdrop-truncate svelte-f368uu"> </p>'),mv=Ir('<div class="flowdrop-workflow-node__port svelte-f368uu"><!> <div class="flowdrop-flex--1 flowdrop-min-w--0 svelte-f368uu"><div class="flowdrop-flex flowdrop-gap--2 svelte-f368uu"><span class="flowdrop-text--xs flowdrop-font--medium svelte-f368uu"> </span> <span class="flowdrop-badge flowdrop-badge--sm svelte-f368uu"> </span> <!></div> <!></div></div>'),yv=Ir('<div class="flowdrop-workflow-node__ports svelte-f368uu"><div class="flowdrop-workflow-node__ports-header svelte-f368uu"><h5 class="flowdrop-workflow-node__ports-title svelte-f368uu">Inputs</h5></div> <div class="flowdrop-workflow-node__ports-list svelte-f368uu"></div></div>'),wv=Ir('<p class="flowdrop-text--xs flowdrop-text--gray flowdrop-truncate svelte-f368uu"> </p>'),bv=Ir('<div class="flowdrop-workflow-node__port svelte-f368uu"><div class="flowdrop-flex--1 flowdrop-min-w--0 flowdrop-text--right svelte-f368uu"><div class="flowdrop-flex flowdrop-gap--2 flowdrop-justify--end svelte-f368uu"><span class="flowdrop-text--xs flowdrop-font--medium svelte-f368uu"> </span> <span class="flowdrop-badge flowdrop-badge--sm svelte-f368uu"> </span></div> <!></div> <!></div>'),xv=Ir('<div class="flowdrop-workflow-node__ports svelte-f368uu"><div class="flowdrop-workflow-node__ports-header svelte-f368uu"><h5 class="flowdrop-workflow-node__ports-title svelte-f368uu">Outputs</h5></div> <div class="flowdrop-workflow-node__ports-list svelte-f368uu"></div></div>'),kv=Ir('<div role="button" tabindex="0"><div class="flowdrop-workflow-node__header svelte-f368uu"><div class="flowdrop-flex flowdrop-gap--3 flowdrop-items--center svelte-f368uu"><div class="flowdrop-workflow-node__icon svelte-f368uu"><!></div> <h3 class="flowdrop-text--sm flowdrop-font--medium flowdrop-truncate flowdrop-flex--1 svelte-f368uu"> </h3> <div class="flowdrop-flex flowdrop-gap--2 flowdrop-items--center svelte-f368uu"></div></div> <p class="flowdrop-text--xs flowdrop-text--gray flowdrop-truncate flowdrop-mt--1 svelte-f368uu"> </p></div> <!> <!> <button class="flowdrop-workflow-node__config-btn svelte-f368uu" title="Configure node"><!></button></div>');function _v(e,t){Gt(t,!0);let n=Bn(!1);function o(){r()}function r(){if(t.data.onConfigOpen){const e={id:t.data.nodeId||"unknown",type:"workflowNode",data:t.data};t.data.onConfigOpen(e)}}var i=kv();let a;i.__click=[pv],i.__dblclick=o,i.__mouseup=[fv,n],i.__keydown=[hv,o];var s=go(i),l=go(s),d=go(l),u=go(d);{let e=zn(()=>sv(t.data.metadata.icon,t.data.metadata.category));Qh(u,{get icon(){return mr(e)}})}var c=go(mo(d,2)),p=mo(l,2),f=go(p),h=mo(s,2),g=e=>{var n=yv();ri(mo(go(n),2),21,()=>t.data.metadata.inputs,e=>e.id,(e,n)=>{var o=mv(),r=go(o);{let e=zn(()=>`${t.data.nodeId}-input-${mr(n).id}`),o=zn(()=>vg(mr(n).dataType));Zc(r,{type:"target",get position(){return pu.Left},get id(){return mr(e)},class:"flowdrop-workflow-node__handle",get style(){var e;return`top: 50%; transform: translateY(-50%); margin-left: -32px; background-color: ${null!=(e=mr(o))?e:""}; border-color: '#ffffff';`},role:"button",tabindex:0,get"aria-label"(){var e;return`Connect to ${null!=(e=mr(n).name)?e:""} input port`}})}var i=go(mo(r,2)),a=go(i),s=go(a),l=mo(a,2),d=go(l),u=mo(l,2),c=e=>{Lr(e,gv())};ni(u,e=>{mr(n).required&&e(c)});var p=mo(i,2),f=e=>{var t=vv(),o=go(t);No(()=>Br(o,mr(n).description)),Lr(e,t)};ni(p,e=>{mr(n).description&&e(f)}),No(e=>{Br(s,mr(n).name),bi(l,`background-color: ${null!=e?e:""}; color: #fff;`),Br(d,mr(n).dataType)},[()=>vg(mr(n).dataType)]),Lr(e,o)}),Lr(e,n)};ni(h,e=>{t.data.metadata.inputs.length>0&&e(g)});var v=mo(h,2),m=e=>{var n=xv();ri(mo(go(n),2),21,()=>t.data.metadata.outputs,e=>e.id,(e,n)=>{var o=bv(),r=go(o),i=go(r),a=go(i),s=go(a),l=mo(a,2),d=go(l),u=mo(i,2),c=e=>{var t=wv(),o=go(t);No(()=>Br(o,mr(n).description)),Lr(e,t)};ni(u,e=>{mr(n).description&&e(c)});var p=mo(r,2);{let e=zn(()=>`${t.data.nodeId}-output-${mr(n).id}`),o=zn(()=>vg(mr(n).dataType));Zc(p,{type:"source",get position(){return pu.Right},get id(){return mr(e)},class:"flowdrop-workflow-node__handle",get style(){var e;return`top: 50%; transform: translateY(-50%); margin-right: -32px; background-color: ${null!=(e=mr(o))?e:""}; border-color: '#ffffff';`},role:"button",tabindex:0,get"aria-label"(){var e;return`Connect from ${null!=(e=mr(n).name)?e:""} output port`}})}No(e=>{Br(s,mr(n).name),bi(l,`background-color: ${null!=e?e:""}; color: #fff;`),Br(d,mr(n).dataType)},[()=>vg(mr(n).dataType)]),Lr(e,o)}),Lr(e,n)};ni(v,e=>{t.data.metadata.outputs.length>0&&e(m)});var y=mo(v,2);y.__click=r,Qh(go(y),{icon:"mdi:cog"}),No((e,o)=>{var r,s,l;a=yi(i,1,"flowdrop-workflow-node svelte-f368uu",null,a,e),Mi(i,"data-handle-interaction",mr(n)),Mi(i,"aria-label",`Workflow node: ${null!=(r=t.data.metadata.name)?r:""}`),Mi(i,"aria-describedby",`node-description-${null!=(s=t.data.nodeId||"unknown")?s:""}`),bi(d,`background-color: ${null!=o?o:""}`),Br(c,t.data.label),Mi(p,"id",`node-description-${null!=(l=t.data.nodeId||"unknown")?l:""}`),Br(f,t.data.metadata.description)},[()=>({"flowdrop-workflow-node--selected":t.selected}),()=>gg(t.data.metadata.category)]),Lr(e,i),Jt()}function Sv(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}$r(["click","dblclick","mouseup","keydown"]);var Tv={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function Cv(e){Tv=e}var Ev={exec:()=>null};function $v(e,t=""){let n="string"==typeof e?e:e.source,o={replace:(e,t)=>{let r="string"==typeof t?t:t.source;return r=r.replace(Av.caret,"$1"),n=n.replace(e,r),o},getRegex:()=>new RegExp(n,t)};return o}var Av={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},Nv=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Ov=/(?:[*+-]|\d{1,9}[.)])/,Mv=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Iv=$v(Mv).replace(/bull/g,Ov).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Pv=$v(Mv).replace(/bull/g,Ov).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),zv=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Dv=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Rv=$v(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Dv).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Lv=$v(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ov).getRegex(),jv="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Wv=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,qv=$v("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",Wv).replace("tag",jv).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Fv=$v(zv).replace("hr",Nv).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",jv).getRegex(),Hv={blockquote:$v(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Fv).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:Rv,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:Nv,html:qv,lheading:Iv,list:Lv,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:Fv,table:Ev,text:/^[^\n]+/},Uv=$v("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Nv).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",jv).getRegex(),Vv=fe(pe({},Hv),{lheading:Pv,table:Uv,paragraph:$v(zv).replace("hr",Nv).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Uv).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",jv).getRegex()}),Bv=fe(pe({},Hv),{html:$v("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Wv).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ev,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:$v(zv).replace("hr",Nv).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Iv).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),Kv=/^( {2,}|\\)\n(?!\s*$)/,Zv=/[\p{P}\p{S}]/u,Yv=/[\s\p{P}\p{S}]/u,Xv=/[^\s\p{P}\p{S}]/u,Gv=$v(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Yv).getRegex(),Jv=/(?!~)[\p{P}\p{S}]/u,Qv=$v(/link|code|html/,"g").replace("link",new RegExp("\\[(?:[^\\[\\]`]|(?<!`)(?<a>`+)[^`]+\\k<a>(?!`))*?\\]\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)]|\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)])*\\))*\\)")).replace("code",new RegExp("(?<!`)(?<b>`+)[^`]+\\k<b>(?!`)")).replace("html",/<(?! )[^<>]*?>/).getRegex(),em=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,tm=$v(em,"u").replace(/punct/g,Zv).getRegex(),nm=$v(em,"u").replace(/punct/g,Jv).getRegex(),om="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",rm=$v(om,"gu").replace(/notPunctSpace/g,Xv).replace(/punctSpace/g,Yv).replace(/punct/g,Zv).getRegex(),im=$v(om,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,Jv).getRegex(),am=$v("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Xv).replace(/punctSpace/g,Yv).replace(/punct/g,Zv).getRegex(),sm=$v(/\\(punct)/,"gu").replace(/punct/g,Zv).getRegex(),lm=$v(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),dm=$v(Wv).replace("(?:--\x3e|$)","--\x3e").getRegex(),um=$v("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",dm).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),cm=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,pm=$v(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",cm).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),fm=$v(/^!?\[(label)\]\[(ref)\]/).replace("label",cm).replace("ref",Dv).getRegex(),hm=$v(/^!?\[(ref)\](?:\[\])?/).replace("ref",Dv).getRegex(),gm=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,vm={_backpedal:Ev,anyPunctuation:sm,autolink:lm,blockSkip:Qv,br:Kv,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:Ev,emStrongLDelim:tm,emStrongRDelimAst:rm,emStrongRDelimUnd:am,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:pm,nolink:hm,punctuation:Gv,reflink:fm,reflinkSearch:$v("reflink|nolink(?!\\()","g").replace("reflink",fm).replace("nolink",hm).getRegex(),tag:um,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:Ev},mm=fe(pe({},vm),{link:$v(/^!?\[(label)\]\((.*?)\)/).replace("label",cm).getRegex(),reflink:$v(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",cm).getRegex()}),ym=fe(pe({},vm),{emStrongRDelimAst:im,emStrongLDelim:nm,url:$v(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",gm).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:$v(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",gm).getRegex()}),wm=fe(pe({},ym),{br:$v(Kv).replace("{2,}","*").getRegex(),text:$v(ym.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),bm={normal:Hv,gfm:Vv,pedantic:Bv},xm={normal:vm,gfm:ym,breaks:wm,pedantic:mm},km={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},_m=e=>km[e];function Sm(e,t){if(t){if(Av.escapeTest.test(e))return e.replace(Av.escapeReplace,_m)}else if(Av.escapeTestNoEncode.test(e))return e.replace(Av.escapeReplaceNoEncode,_m);return e}function Tm(e){try{e=encodeURI(e).replace(Av.percentDecode,"%")}catch(b_){return null}return e}function Cm(e,t){var n;let o=e.replace(Av.findPipe,(e,t,n)=>{let o=!1,r=t;for(;--r>=0&&"\\"===n[r];)o=!o;return o?"|":" |"}).split(Av.splitPipe),r=0;if(o[0].trim()||o.shift(),o.length>0&&!(null==(n=o.at(-1))?void 0:n.trim())&&o.pop(),t)if(o.length>t)o.splice(t);else for(;o.length<t;)o.push("");for(;r<o.length;r++)o[r]=o[r].trim().replace(Av.slashPipe,"|");return o}function Em(e,t,n){let o=e.length;if(0===o)return"";let r=0;for(;r<o;){if(e.charAt(o-r-1)!==t)break;r++}return e.slice(0,o-r)}function $m(e,t,n,o,r){let i=t.href,a=t.title||null,s=e[1].replace(r.other.outputLinkReplace,"$1");o.state.inLink=!0;let l={type:"!"===e[0].charAt(0)?"image":"link",raw:n,href:i,title:a,text:s,tokens:o.inlineTokens(s)};return o.state.inLink=!1,l}var Am=class{constructor(e){ge(this,"options"),ge(this,"rules"),ge(this,"lexer"),this.options=e||Tv}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:Em(e,"\n")}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let e=t[0],n=function(e,t,n){let o=e.match(n.other.indentCodeCompensation);if(null===o)return t;let r=o[1];return t.split("\n").map(e=>{let t=e.match(n.other.beginningSpace);if(null===t)return e;let[o]=t;return o.length>=r.length?e.slice(r.length):e}).join("\n")}(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let t=Em(e,"#");(this.options.pedantic||!t||this.rules.other.endingSpaceChar.test(t))&&(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Em(t[0],"\n")}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let e=Em(t[0],"\n").split("\n"),n="",o="",r=[];for(;e.length>0;){let t,i=!1,a=[];for(t=0;t<e.length;t++)if(this.rules.other.blockquoteStart.test(e[t]))a.push(e[t]),i=!0;else{if(i)break;a.push(e[t])}e=e.slice(t);let s=a.join("\n"),l=s.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}\n${s}`:s,o=o?`${o}\n${l}`:l;let d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,r,!0),this.lexer.state.top=d,0===e.length)break;let u=r.at(-1);if("code"===(null==u?void 0:u.type))break;if("blockquote"===(null==u?void 0:u.type)){let t=u,i=t.raw+"\n"+e.join("\n"),a=this.blockquote(i);r[r.length-1]=a,n=n.substring(0,n.length-t.raw.length)+a.raw,o=o.substring(0,o.length-t.text.length)+a.text;break}if("list"===(null==u?void 0:u.type)){let t=u,i=t.raw+"\n"+e.join("\n"),a=this.list(i);r[r.length-1]=a,n=n.substring(0,n.length-u.raw.length)+a.raw,o=o.substring(0,o.length-t.raw.length)+a.raw,e=i.substring(r.at(-1).raw.length).split("\n");continue}}return{type:"blockquote",raw:n,tokens:r,text:o}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),o=n.length>1,r={type:"list",raw:"",ordered:o,start:o?+n.slice(0,-1):"",loose:!1,items:[]};n=o?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=o?n:"[*+-]");let i=this.rules.other.listItemRegex(n),a=!1;for(;e;){let n=!1,o="",s="";if(!(t=i.exec(e))||this.rules.block.hr.test(e))break;o=t[0],e=e.substring(o.length);let l=t[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,e=>" ".repeat(3*e.length)),d=e.split("\n",1)[0],u=!l.trim(),c=0;if(this.options.pedantic?(c=2,s=l.trimStart()):u?c=t[1].length+1:(c=t[2].search(this.rules.other.nonSpaceChar),c=c>4?1:c,s=l.slice(c),c+=t[1].length),u&&this.rules.other.blankLine.test(d)&&(o+=d+"\n",e=e.substring(d.length+1),n=!0),!n){let t=this.rules.other.nextBulletRegex(c),n=this.rules.other.hrRegex(c),r=this.rules.other.fencesBeginRegex(c),i=this.rules.other.headingBeginRegex(c),a=this.rules.other.htmlBeginRegex(c);for(;e;){let p,f=e.split("\n",1)[0];if(d=f,this.options.pedantic?(d=d.replace(this.rules.other.listReplaceNesting,"  "),p=d):p=d.replace(this.rules.other.tabCharGlobal,"    "),r.test(d)||i.test(d)||a.test(d)||t.test(d)||n.test(d))break;if(p.search(this.rules.other.nonSpaceChar)>=c||!d.trim())s+="\n"+p.slice(c);else{if(u||l.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||r.test(l)||i.test(l)||n.test(l))break;s+="\n"+d}!u&&!d.trim()&&(u=!0),o+=f+"\n",e=e.substring(f.length+1),l=p.slice(c)}}r.loose||(a?r.loose=!0:this.rules.other.doubleBlankLine.test(o)&&(a=!0));let p,f=null;this.options.gfm&&(f=this.rules.other.listIsTask.exec(s),f&&(p="[ ] "!==f[0],s=s.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:o,task:!!f,checked:p,loose:!1,text:s,tokens:[]}),r.raw+=o}let s=r.items.at(-1);if(!s)return;s.raw=s.raw.trimEnd(),s.text=s.text.trimEnd(),r.raw=r.raw.trimEnd();for(let e=0;e<r.items.length;e++)if(this.lexer.state.top=!1,r.items[e].tokens=this.lexer.blockTokens(r.items[e].text,[]),!r.loose){let t=r.items[e].tokens.filter(e=>"space"===e.type),n=t.length>0&&t.some(e=>this.rules.other.anyLine.test(e.raw));r.loose=n}if(r.loose)for(let e=0;e<r.items.length;e++)r.items[e].loose=!0;return r}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:o}}}table(e){var t;let n=this.rules.block.table.exec(e);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;let o=Cm(n[1]),r=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(null==(t=n[3])?void 0:t.trim())?n[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],a={type:"table",raw:n[0],header:[],align:[],rows:[]};if(o.length===r.length){for(let e of r)this.rules.other.tableAlignRight.test(e)?a.align.push("right"):this.rules.other.tableAlignCenter.test(e)?a.align.push("center"):this.rules.other.tableAlignLeft.test(e)?a.align.push("left"):a.align.push(null);for(let e=0;e<o.length;e++)a.header.push({text:o[e],tokens:this.lexer.inline(o[e]),header:!0,align:a.align[e]});for(let e of i)a.rows.push(Cm(e,a.header.length).map((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:a.align[t]})));return a}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let t=Em(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{let e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let n=0;for(let o=0;o<e.length;o++)if("\\"===e[o])o++;else if(e[o]===t[0])n++;else if(e[o]===t[1]&&(n--,n<0))return o;return n>0?-2:-1}(t[2],"()");if(-2===e)return;if(e>-1){let n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],o="";if(this.options.pedantic){let e=this.rules.other.pedanticHrefTitle.exec(n);e&&(n=e[1],o=e[3])}else o=t[3]?t[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(n=this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?n.slice(1):n.slice(1,-1)),$m(t,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=t[(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!e){let e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return $m(n,e,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let o=this.rules.inline.emStrongLDelim.exec(e);if(!(!o||o[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!o[1]&&!o[2]||!n||this.rules.inline.punctuation.exec(n))){let n,r,i=[...o[0]].length-1,a=i,s=0,l="*"===o[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+i);null!=(o=l.exec(t));){if(n=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!n)continue;if(r=[...n].length,o[3]||o[4]){a+=r;continue}if((o[5]||o[6])&&i%3&&!((i+r)%3)){s+=r;continue}if(a-=r,a>0)continue;r=Math.min(r,r+a+s);let t=[...o[0]][0].length,l=e.slice(0,i+o.index+t+r);if(Math.min(i,r)%2){let e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}let d=l.slice(2,-2);return{type:"strong",raw:l,text:d,tokens:this.lexer.inlineTokens(d)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(e),o=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return n&&o&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let e,n;return"@"===t[2]?(e=t[1],n="mailto:"+e):(e=t[1],n=e),{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e){var t,n;let o;if(o=this.rules.inline.url.exec(e)){let e,r;if("@"===o[2])e=o[0],r="mailto:"+e;else{let i;do{i=o[0],o[0]=null!=(n=null==(t=this.rules.inline._backpedal.exec(o[0]))?void 0:t[0])?n:""}while(i!==o[0]);e=o[0],r="www."===o[1]?"http://"+o[0]:o[0]}return{type:"link",raw:o[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},Nm=class e{constructor(e){ge(this,"tokens"),ge(this,"options"),ge(this,"state"),ge(this,"tokenizer"),ge(this,"inlineQueue"),this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Tv,this.options.tokenizer=this.options.tokenizer||new Am,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:Av,block:bm.normal,inline:xm.normal};this.options.pedantic?(t.block=bm.pedantic,t.inline=xm.pedantic):this.options.gfm&&(t.block=bm.gfm,this.options.breaks?t.inline=xm.breaks:t.inline=xm.gfm),this.tokenizer.rules=t}static get rules(){return{block:bm,inline:xm}}static lex(t,n){return new e(n).lex(t)}static lexInline(t,n){return new e(n).inlineTokens(t)}lex(e){e=e.replace(Av.carriageReturn,"\n"),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let e=this.inlineQueue[t];this.inlineTokens(e.src,e.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){var o,r,i;for(this.options.pedantic&&(e=e.replace(Av.tabCharGlobal,"    ").replace(Av.spaceLine,""));e;){let a;if(null==(r=null==(o=this.options.extensions)?void 0:o.block)?void 0:r.some(n=>!!(a=n.call({lexer:this},e,t))&&(e=e.substring(a.raw.length),t.push(a),!0)))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);let n=t.at(-1);1===a.raw.length&&void 0!==n?n.raw+="\n":t.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);let n=t.at(-1);"paragraph"===(null==n?void 0:n.type)||"text"===(null==n?void 0:n.type)?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+a.raw,n.text+="\n"+a.text,this.inlineQueue.at(-1).src=n.text):t.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);let n=t.at(-1);"paragraph"===(null==n?void 0:n.type)||"text"===(null==n?void 0:n.type)?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+a.raw,n.text+="\n"+a.raw,this.inlineQueue.at(-1).src=n.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title},t.push(a));continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),t.push(a);continue}let s=e;if(null==(i=this.options.extensions)?void 0:i.startBlock){let t,n=1/0,o=e.slice(1);this.options.extensions.startBlock.forEach(e=>{t=e.call({lexer:this},o),"number"==typeof t&&t>=0&&(n=Math.min(n,t))}),n<1/0&&n>=0&&(s=e.substring(0,n+1))}if(this.state.top&&(a=this.tokenizer.paragraph(s))){let o=t.at(-1);n&&"paragraph"===(null==o?void 0:o.type)?(o.raw+=(o.raw.endsWith("\n")?"":"\n")+a.raw,o.text+="\n"+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(a),n=s.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);let n=t.at(-1);"text"===(null==n?void 0:n.type)?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+a.raw,n.text+="\n"+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=n.text):t.push(a);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var n,o,r,i,a,s;let l=e,d=null;if(this.tokens.links){let e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(d=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(d[0].slice(d[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,d.index)+"["+"a".repeat(d[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(d=this.tokenizer.rules.inline.anyPunctuation.exec(l));)l=l.slice(0,d.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(d=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,d.index)+"["+"a".repeat(d[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);l=null!=(r=null==(o=null==(n=this.options.hooks)?void 0:n.emStrongMask)?void 0:o.call({lexer:this},l))?r:l;let u=!1,c="";for(;e;){let n;if(u||(c=""),u=!1,null==(a=null==(i=this.options.extensions)?void 0:i.inline)?void 0:a.some(o=>!!(n=o.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))continue;if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length);let o=t.at(-1);"text"===n.type&&"text"===(null==o?void 0:o.type)?(o.raw+=n.raw,o.text+=n.text):t.push(n);continue}if(n=this.tokenizer.emStrong(e,l,c)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.autolink(e)){e=e.substring(n.raw.length),t.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e))){e=e.substring(n.raw.length),t.push(n);continue}let o=e;if(null==(s=this.options.extensions)?void 0:s.startInline){let t,n=1/0,r=e.slice(1);this.options.extensions.startInline.forEach(e=>{t=e.call({lexer:this},r),"number"==typeof t&&t>=0&&(n=Math.min(n,t))}),n<1/0&&n>=0&&(o=e.substring(0,n+1))}if(n=this.tokenizer.inlineText(o)){e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(c=n.raw.slice(-1)),u=!0;let o=t.at(-1);"text"===(null==o?void 0:o.type)?(o.raw+=n.raw,o.text+=n.text):t.push(n);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return t}},Om=class{constructor(e){ge(this,"options"),ge(this,"parser"),this.options=e||Tv}space(e){return""}code({text:e,lang:t,escaped:n}){var o;let r=null==(o=(t||"").match(Av.notSpaceStart))?void 0:o[0],i=e.replace(Av.endingNewline,"")+"\n";return r?'<pre><code class="language-'+Sm(r)+'">'+(n?i:Sm(i,!0))+"</code></pre>\n":"<pre><code>"+(n?i:Sm(i,!0))+"</code></pre>\n"}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return"<hr>\n"}list(e){let t=e.ordered,n=e.start,o="";for(let i=0;i<e.items.length;i++){let t=e.items[i];o+=this.listitem(t)}let r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+o+"</"+r+">\n"}listitem(e){var t;let n="";if(e.task){let o=this.checkbox({checked:!!e.checked});e.loose?"paragraph"===(null==(t=e.tokens[0])?void 0:t.type)?(e.tokens[0].text=o+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=o+" "+Sm(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:o+" ",text:o+" ",escaped:!0}):n+=o+" "}return n+=this.parser.parse(e.tokens,!!e.loose),`<li>${n}</li>\n`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t="",n="";for(let r=0;r<e.header.length;r++)n+=this.tablecell(e.header[r]);t+=this.tablerow({text:n});let o="";for(let r=0;r<e.rows.length;r++){let t=e.rows[r];n="";for(let e=0;e<t.length;e++)n+=this.tablecell(t[e]);o+=this.tablerow({text:n})}return o&&(o=`<tbody>${o}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+o+"</table>\n"}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Sm(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let o=this.parser.parseInline(n),r=Tm(e);if(null===r)return o;let i='<a href="'+(e=r)+'"';return t&&(i+=' title="'+Sm(t)+'"'),i+=">"+o+"</a>",i}image({href:e,title:t,text:n,tokens:o}){o&&(n=this.parser.parseInline(o,this.parser.textRenderer));let r=Tm(e);if(null===r)return Sm(n);let i=`<img src="${e=r}" alt="${n}"`;return t&&(i+=` title="${Sm(t)}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Sm(e.text)}},Mm=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Im=class e{constructor(e){ge(this,"options"),ge(this,"renderer"),ge(this,"textRenderer"),this.options=e||Tv,this.options.renderer=this.options.renderer||new Om,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Mm}static parse(t,n){return new e(n).parse(t)}static parseInline(t,n){return new e(n).parseInline(t)}parse(e,t=!0){var n,o;let r="";for(let i=0;i<e.length;i++){let a=e[i];if(null==(o=null==(n=this.options.extensions)?void 0:n.renderers)?void 0:o[a.type]){let e=a,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(e.type)){r+=t||"";continue}}let s=a;switch(s.type){case"space":r+=this.renderer.space(s);continue;case"hr":r+=this.renderer.hr(s);continue;case"heading":r+=this.renderer.heading(s);continue;case"code":r+=this.renderer.code(s);continue;case"table":r+=this.renderer.table(s);continue;case"blockquote":r+=this.renderer.blockquote(s);continue;case"list":r+=this.renderer.list(s);continue;case"html":r+=this.renderer.html(s);continue;case"def":r+=this.renderer.def(s);continue;case"paragraph":r+=this.renderer.paragraph(s);continue;case"text":{let n=s,o=this.renderer.text(n);for(;i+1<e.length&&"text"===e[i+1].type;)n=e[++i],o+="\n"+this.renderer.text(n);r+=t?this.renderer.paragraph({type:"paragraph",raw:o,text:o,tokens:[{type:"text",raw:o,text:o,escaped:!0}]}):o;continue}default:{let e='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return r}parseInline(e,t=this.renderer){var n,o;let r="";for(let i=0;i<e.length;i++){let a=e[i];if(null==(o=null==(n=this.options.extensions)?void 0:n.renderers)?void 0:o[a.type]){let e=this.options.extensions.renderers[a.type].call({parser:this},a);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=e||"";continue}}let s=a;switch(s.type){case"escape":case"text":r+=t.text(s);break;case"html":r+=t.html(s);break;case"link":r+=t.link(s);break;case"image":r+=t.image(s);break;case"strong":r+=t.strong(s);break;case"em":r+=t.em(s);break;case"codespan":r+=t.codespan(s);break;case"br":r+=t.br(s);break;case"del":r+=t.del(s);break;default:{let e='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return r}},Pm=(oe=class{constructor(e){ge(this,"options"),ge(this,"block"),this.options=e||Tv}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?Nm.lex:Nm.lexInline}provideParser(){return this.block?Im.parse:Im.parseInline}},ge(oe,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),ge(oe,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),oe),zm=new class{constructor(...e){ge(this,"defaults",{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}),ge(this,"options",this.setOptions),ge(this,"parse",this.parseMarkdown(!0)),ge(this,"parseInline",this.parseMarkdown(!1)),ge(this,"Parser",Im),ge(this,"Renderer",Om),ge(this,"TextRenderer",Mm),ge(this,"Lexer",Nm),ge(this,"Tokenizer",Am),ge(this,"Hooks",Pm),this.use(...e)}walkTokens(e,t){var n,o;let r=[];for(let i of e)switch(r=r.concat(t.call(this,i)),i.type){case"table":{let e=i;for(let n of e.header)r=r.concat(this.walkTokens(n.tokens,t));for(let n of e.rows)for(let e of n)r=r.concat(this.walkTokens(e.tokens,t));break}case"list":{let e=i;r=r.concat(this.walkTokens(e.items,t));break}default:{let e=i;(null==(o=null==(n=this.defaults.extensions)?void 0:n.childTokens)?void 0:o[e.type])?this.defaults.extensions.childTokens[e.type].forEach(n=>{let o=e[n].flat(1/0);r=r.concat(this.walkTokens(o,t))}):e.tokens&&(r=r.concat(this.walkTokens(e.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(e=>{let n=pe({},e);if(n.async=this.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach(e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){let n=t.renderers[e.name];t.renderers[e.name]=n?function(...t){let o=e.renderer.apply(this,t);return!1===o&&(o=n.apply(this,t)),o}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");let n=t[e.level];n?n.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)}),n.extensions=t),e.renderer){let t=this.defaults.renderer||new Om(this.defaults);for(let n in e.renderer){if(!(n in t))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;let o=n,r=e.renderer[o],i=t[o];t[o]=(...e)=>{let n=r.apply(t,e);return!1===n&&(n=i.apply(t,e)),n||""}}n.renderer=t}if(e.tokenizer){let t=this.defaults.tokenizer||new Am(this.defaults);for(let n in e.tokenizer){if(!(n in t))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;let o=n,r=e.tokenizer[o],i=t[o];t[o]=(...e)=>{let n=r.apply(t,e);return!1===n&&(n=i.apply(t,e)),n}}n.tokenizer=t}if(e.hooks){let t=this.defaults.hooks||new Pm;for(let n in e.hooks){if(!(n in t))throw new Error(`hook '${n}' does not exist`);if(["options","block"].includes(n))continue;let o=n,r=e.hooks[o],i=t[o];Pm.passThroughHooks.has(n)?t[o]=e=>{if(this.defaults.async&&Pm.passThroughHooksRespectAsync.has(n))return(()=>xe(this,null,function*(){let n=yield r.call(t,e);return i.call(t,n)}))();let o=r.call(t,e);return i.call(t,o)}:t[o]=(...e)=>{if(this.defaults.async)return(()=>xe(this,null,function*(){let n=yield r.apply(t,e);return!1===n&&(n=yield i.apply(t,e)),n}))();let n=r.apply(t,e);return!1===n&&(n=i.apply(t,e)),n}}n.hooks=t}if(e.walkTokens){let t=this.defaults.walkTokens,o=e.walkTokens;n.walkTokens=function(e){let n=[];return n.push(o.call(this,e)),t&&(n=n.concat(t.call(this,e))),n}}this.defaults=pe(pe({},this.defaults),n)}),this}setOptions(e){return this.defaults=pe(pe({},this.defaults),e),this}lexer(e,t){return Nm.lex(e,null!=t?t:this.defaults)}parser(e,t){return Im.parse(e,null!=t?t:this.defaults)}parseMarkdown(e){return(t,n)=>{let o=pe({},n),r=pe(pe({},this.defaults),o),i=this.onError(!!r.silent,!!r.async);if(!0===this.defaults.async&&!1===o.async)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||null===t)return i(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=e),r.async)return(()=>xe(this,null,function*(){let n=r.hooks?yield r.hooks.preprocess(t):t,o=yield(r.hooks?yield r.hooks.provideLexer():e?Nm.lex:Nm.lexInline)(n,r),i=r.hooks?yield r.hooks.processAllTokens(o):o;r.walkTokens&&(yield Promise.all(this.walkTokens(i,r.walkTokens)));let a=yield(r.hooks?yield r.hooks.provideParser():e?Im.parse:Im.parseInline)(i,r);return r.hooks?yield r.hooks.postprocess(a):a}))().catch(i);try{r.hooks&&(t=r.hooks.preprocess(t));let n=(r.hooks?r.hooks.provideLexer():e?Nm.lex:Nm.lexInline)(t,r);r.hooks&&(n=r.hooks.processAllTokens(n)),r.walkTokens&&this.walkTokens(n,r.walkTokens);let o=(r.hooks?r.hooks.provideParser():e?Im.parse:Im.parseInline)(n,r);return r.hooks&&(o=r.hooks.postprocess(o)),o}catch(a){return i(a)}}}onError(e,t){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){let e="<p>An error occurred:</p><pre>"+Sm(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}};function Dm(e,t){return zm.parse(e,t)}Dm.options=Dm.setOptions=function(e){return zm.setOptions(e),Dm.defaults=zm.defaults,Cv(Dm.defaults),Dm},Dm.getDefaults=Sv,Dm.defaults=Tv,Dm.use=function(...e){return zm.use(...e),Dm.defaults=zm.defaults,Cv(Dm.defaults),Dm},Dm.walkTokens=function(e,t){return zm.walkTokens(e,t)},Dm.parseInline=zm.parseInline,Dm.Parser=Im,Dm.parser=Im.parse,Dm.Renderer=Om,Dm.TextRenderer=Mm,Dm.Lexer=Nm,Dm.lexer=Nm.lex,Dm.Tokenizer=Am,Dm.Hooks=Pm,Dm.parse=Dm,Dm.options,Dm.setOptions,Dm.use,Dm.walkTokens,Dm.parseInline,Im.parse,Nm.lex;var Rm=Ir("<div><!></div>");function Lm(e,t){Gt(t,!0);let n=zn(()=>Dm.parse(t.content||"")),o=zn(()=>t.className||"markdown-display");var r=Rm();di(go(r),()=>mr(n)),No(()=>yi(r,1,hi(mr(o)))),Lr(e,r),Jt()}function jm(e,t,n,o,r){const i=e.target;Zn(t,i.value,!0),o.data.config&&(o.data.config.content=i.value,r("configChange",{config:o.data.config}))}function Wm(e,t,n,o,r){const i=e.target;Zn(t,i.value,!0),o.data.config&&(o.data.config.noteType=i.value,r("configChange",{config:o.data.config}))}function qm(e,t,n){Zn(t,!mr(t)),n("editModeChange",{isEditing:mr(t)})}function Fm(){}function Hm(e,t){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t())}var Um=Ir("<option> </option>"),Vm=Ir('<div class="flowdrop-notes-node__edit svelte-1916eok"><div class="flowdrop-notes-node__type-selector svelte-1916eok"><label for="note-type" class="flowdrop-notes-node__label svelte-1916eok">Note Type:</label> <select id="note-type" class="flowdrop-notes-node__select svelte-1916eok"></select></div> <div class="flowdrop-notes-node__textarea-container svelte-1916eok"><label for="note-content" class="flowdrop-notes-node__label svelte-1916eok">Content (Markdown):</label> <textarea id="note-content" class="flowdrop-notes-node__textarea svelte-1916eok" placeholder="Write your note in Markdown..."></textarea></div> <div class="flowdrop-notes-node__edit-actions svelte-1916eok"><button class="flowdrop-notes-node__btn flowdrop-notes-node__btn--save svelte-1916eok"><!> Save</button> <button class="flowdrop-notes-node__btn flowdrop-notes-node__btn--cancel svelte-1916eok"><!> Cancel</button></div></div>'),Bm=Ir('<div class="flowdrop-notes-node__processing svelte-1916eok"><div class="flowdrop-notes-node__spinner svelte-1916eok"></div> <span>Processing...</span></div>'),Km=Ir('<div class="flowdrop-notes-node__error svelte-1916eok"><!> <span>Error occurred</span></div>'),Zm=Ir('<div><div class="flowdrop-notes-node__header svelte-1916eok"><div class="flowdrop-notes-node__header-left svelte-1916eok"><!> <span class="flowdrop-notes-node__type svelte-1916eok"> </span></div> <button class="flowdrop-notes-node__edit-btn svelte-1916eok" title="Edit note"><!></button></div> <div class="flowdrop-notes-node__body svelte-1916eok"><!></div> <!> <!></div>'),Ym=Ir('<div role="button" tabindex="0"><!> <button class="flowdrop-notes-node__config-btn svelte-1916eok" title="Configure note"><!></button></div>');function Xm(e,t){var n,o;Gt(t,!0);const r=ti(),i=na(t,["$$slots","$$events","$$legacy"]);let a=Bn(!1),s=Bn(eo((null==(n=t.data.config)?void 0:n.content)||"Add your notes here...")),l=Bn(eo((null==(o=t.data.config)?void 0:o.noteType)||"info"));To(()=>{var e,n;const o=(null==(e=t.data.config)?void 0:e.content)||"Add your notes here...",r=(null==(n=t.data.config)?void 0:n.noteType)||"info";mr(s)!==o&&Zn(s,o,!0),mr(l)!==r&&Zn(l,r,!0)});const d={info:{name:"Info",bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-800",iconColor:"text-blue-500",icon:"mdi:information"},warning:{name:"Warning",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-800",iconColor:"text-yellow-500",icon:"mdi:alert"},success:{name:"Success",bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-800",iconColor:"text-green-500",icon:"mdi:check-circle"},error:{name:"Error",bgColor:"bg-red-50",borderColor:"border-red-200",textColor:"text-red-800",iconColor:"text-red-500",icon:"mdi:close-circle"},note:{name:"Note",bgColor:"bg-gray-50",borderColor:"border-gray-200",textColor:"text-gray-800",iconColor:"text-gray-500",icon:"mdi:note-text"}};let u=zn(()=>d[mr(l)]||d.info);function c(){if(t.data.onConfigOpen){const e={id:t.data.nodeId||"unknown",type:"note",data:t.data};t.data.onConfigOpen(e)}}function p(){c()}var f=Ym();let h;f.__click=[Fm],f.__dblclick=p,f.__keydown=[Hm,p];var g=go(f),v=e=>{var n,o=Vm(),u=go(o),c=mo(go(u),2);c.__change=[Wm,l,i,t,r],ri(c,21,()=>Object.entries(d),([e,t])=>e,(e,t)=>{var n=zn(()=>nt(mr(t),2));let o=()=>mr(n)[0];var r=Um(),i=go(r),a={};No(()=>{var e;Br(i,mr(n)[1].name),a!==(a=o())&&(r.value=null!=(e=r.__value=o())?e:"")}),Lr(e,r)}),ki(c);var p=mo(u,2),f=mo(go(p),2);f.__input=[jm,s,i,t,r];var h=go(mo(p,2));h.__click=[qm,a,r],Qh(go(h),{icon:"mdi:check"});var g=mo(h,2);g.__click=[qm,a,r],Qh(go(g),{icon:"mdi:close"}),No(()=>{var e;n!==(n=mr(l))&&(c.value=null!=(e=c.__value=mr(l))?e:"",xi(c,mr(l))),Ai(f,mr(s))}),Lr(e,o)},m=e=>{var n=Zm(),o=go(n),i=go(o),l=go(i);Qh(l,{get icon(){return mr(u).icon},get class(){var e;return`flowdrop-notes-node__icon ${null!=(e=mr(u).iconColor)?e:""}`}});var d=go(mo(l,2)),c=mo(i,2);c.__click=[qm,a,r],Qh(go(c),{icon:"mdi:pencil"});var p=mo(o,2);Lm(go(p),{get content(){return mr(s)},className:"flowdrop-notes-node__markdown"});var f=mo(p,2),h=e=>{Lr(e,Bm())};ni(f,e=>{t.isProcessing&&e(h)});var g=mo(f,2),v=e=>{var t=Km();Qh(go(t),{icon:"mdi:alert-circle",class:"flowdrop-notes-node__error-icon"}),Lr(e,t)};ni(g,e=>{t.isError&&e(v)}),No(()=>{var e,t;yi(n,1,`flowdrop-notes-node__content ${null!=(e=mr(u).borderColor)?e:""} ${null!=(t=mr(u).textColor)?t:""}`,"svelte-1916eok"),Br(d,mr(u).name)}),Lr(e,n)};ni(g,e=>{mr(a)||t.isEditing?e(v):e(m,!1)});var y=mo(g,2);y.__click=c,Qh(go(y),{icon:"mdi:cog"}),No(e=>{var t;return h=yi(f,1,`flowdrop-notes-node ${null!=(t=mr(u).bgColor)?t:""}`,"svelte-1916eok",h,e)},[()=>({"flowdrop-notes-node--selected":t.selected,"flowdrop-notes-node--processing":t.isProcessing,"flowdrop-notes-node--error":t.isError})]),Lr(e,f),Jt()}function Gm(){}function Jm(e,t){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t())}$r(["click","dblclick","keydown","change","input"]);var Qm=Ir('<div class="flowdrop-simple-node__compact-content svelte-sjb4nj"><!></div>'),ey=Ir('<div class="flowdrop-simple-node__header svelte-sjb4nj"><div class="flowdrop-simple-node__header-content svelte-sjb4nj"><div class="flowdrop-simple-node__icon-container svelte-sjb4nj"><!></div> <h3 class="flowdrop-simple-node__title svelte-sjb4nj"> </h3></div> <p class="flowdrop-simple-node__description svelte-sjb4nj"> </p></div>'),ty=Ir('<div class="flowdrop-simple-node__processing svelte-sjb4nj"><div class="flowdrop-simple-node__spinner svelte-sjb4nj"></div></div>'),ny=Ir('<div class="flowdrop-simple-node__error svelte-sjb4nj"><!></div>'),oy=Ir('<!> <!> <div role="button" tabindex="0"><!> <!> <!> <button class="flowdrop-simple-node__config-btn svelte-sjb4nj" title="Configure node"><!></button></div> <!> <!>',1);function ry(e,t){Gt(t,!0);let n=zn(()=>{var e,n;return(null==(e=t.data.metadata)?void 0:e.icon)||(null==(n=t.data.config)?void 0:n.icon)||"mdi:square"}),o=zn(()=>{var e,n;return(null==(e=t.data.metadata)?void 0:e.color)||(null==(n=t.data.config)?void 0:n.color)||"#6366f1"}),r=zn(()=>{var e;return(null==(e=t.data.config)?void 0:e.layout)||"normal"});const i={compact:{width:"80px",height:"80px",iconSize:"2rem",showHeader:!1},normal:{width:"18rem",height:"auto",iconSize:"1rem",showHeader:!0}};let a=zn(()=>i[mr(r)]||i.normal),s=zn(()=>"compact"===mr(r));function l(){if(t.data.onConfigOpen){const e={id:t.data.nodeId||"unknown",type:"simple",data:t.data};t.data.onConfigOpen(e)}}function d(){l()}let u=zn(()=>{var e,n;return null==(n=null==(e=t.data.metadata)?void 0:e.inputs)?void 0:n.find(e=>"trigger"===e.dataType)}),c=zn(()=>{var e,n;return null==(n=null==(e=t.data.metadata)?void 0:e.outputs)?void 0:n.find(e=>"trigger"===e.dataType)}),p=zn(()=>{var e,n;return null==(n=null==(e=t.data.metadata)?void 0:e.inputs)?void 0:n.find(e=>"trigger"!==e.dataType)}),f=zn(()=>{var e,n;return null==(n=null==(e=t.data.metadata)?void 0:e.outputs)?void 0:n.find(e=>"trigger"!==e.dataType)}),h=zn(()=>!!mr(u)&&!!mr(p)),g=zn(()=>!!mr(c)&&!!mr(f));var v=oy(),m=vo(v),y=e=>{{let n=zn(()=>Ng(mr(p).dataType)),o=zn(()=>mr(h)?"25%":"50%"),r=zn(()=>`${t.data.nodeId}-input-${mr(p).id}`);Zc(e,{type:"target",get position(){return pu.Left},get style(){var e,t;return`background-color: ${null!=(e=mr(n))?e:""}; border-color: '#ffffff'; top: ${null!=(t=mr(o))?t:""}; z-index: 30;`},get id(){return mr(r)}})}};ni(m,e=>{mr(p)&&e(y)});var w=mo(m,2),b=e=>{{let n=zn(()=>Ng(mr(u).dataType)),o=zn(()=>mr(h)?"75%":"50%"),r=zn(()=>`${t.data.nodeId}-input-${mr(u).id}`);Zc(e,{type:"target",get position(){return pu.Left},get style(){var e,t;return`background-color: ${null!=(e=mr(n))?e:""}; border-color: '#ffffff'; top: ${null!=(t=mr(o))?t:""}; z-index: 30;`},get id(){return mr(r)}})}};ni(w,e=>{mr(u)&&e(b)});var x=mo(w,2);let k;x.__click=[Gm],x.__dblclick=d,x.__keydown=[Jm,d];var _=go(x),S=e=>{var t=Qm();Qh(go(t),{get icon(){return mr(n)},class:"flowdrop-simple-node__compact-icon",get style(){var e,t;return`color: ${null!=(e=mr(o))?e:""}; font-size: ${null!=(t=mr(a).iconSize)?t:""};`}}),Lr(e,t)},T=e=>{var r=ey(),i=go(r),a=go(i);Qh(go(a),{get icon(){return mr(n)},class:"flowdrop-simple-node__icon"});var s=go(mo(a,2)),l=go(mo(i,2));No(()=>{var e,n;bi(a,`background-color: ${null!=(e=mr(o))?e:""}`),Br(s,t.data.label),Br(l,(null==(n=t.data.metadata)?void 0:n.description)||"A configurable simple node")}),Lr(e,r)};ni(_,e=>{mr(s)?e(S):e(T,!1)});var C=mo(_,2),E=e=>{Lr(e,ty())};ni(C,e=>{t.isProcessing&&e(E)});var $=mo(C,2),A=e=>{var t=ny();Qh(go(t),{icon:"mdi:alert-circle",class:"flowdrop-simple-node__error-icon"}),Lr(e,t)};ni($,e=>{t.isError&&e(A)});var N=mo($,2);N.__click=l,Qh(go(N),{icon:"mdi:cog"});var O=mo(x,2),M=e=>{{let n=zn(()=>`${t.data.nodeId}-output-${mr(f).id}`),o=zn(()=>Ng(mr(f).dataType)),r=zn(()=>mr(g)?"25%":"50%");Zc(e,{type:"source",get position(){return pu.Right},get id(){return mr(n)},get style(){var e,t;return`background-color: ${null!=(e=mr(o))?e:""}; border-color: '#ffffff'; top: ${null!=(t=mr(r))?t:""}; z-index: 30;`}})}};ni(O,e=>{mr(f)&&e(M)});var I=mo(O,2),P=e=>{{let n=zn(()=>`${t.data.nodeId}-output-${mr(c).id}`),o=zn(()=>Ng(mr(c).dataType)),r=zn(()=>mr(g)?"75%":"50%");Zc(e,{type:"source",get position(){return pu.Right},get id(){return mr(n)},get style(){var e,t;return`background-color: ${null!=(e=mr(o))?e:""}; border-color: '#ffffff'; top: ${null!=(t=mr(r))?t:""}; z-index: 30;`}})}};ni(I,e=>{mr(c)&&e(P)}),No(e=>k=yi(x,1,"flowdrop-simple-node svelte-sjb4nj",null,k,e),[()=>({"flowdrop-simple-node--compact":mr(s),"flowdrop-simple-node--normal":!mr(s),"flowdrop-simple-node--selected":t.selected,"flowdrop-simple-node--processing":t.isProcessing,"flowdrop-simple-node--error":t.isError})]),Lr(e,v),Jt()}function iy(e,t){t()}function ay(e,t){t()}function sy(e,t){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t())}$r(["click","dblclick","keydown"]);var ly=Ir('<div class="flowdrop-square-node__processing svelte-np6iuc"><div class="flowdrop-square-node__spinner svelte-np6iuc"></div></div>'),dy=Ir('<div class="flowdrop-square-node__error svelte-np6iuc"><!></div>'),uy=Ir('<!> <!> <div role="button" tabindex="0"><div class="flowdrop-square-node__compact-content svelte-np6iuc"><!></div> <!> <!> <button class="flowdrop-square-node__config-btn svelte-np6iuc" title="Configure node"><!></button></div> <!> <!>',1);function cy(e,t){Gt(t,!0);let n=zn(()=>{var e,n;return(null==(e=t.data.metadata)?void 0:e.icon)||(null==(n=t.data.config)?void 0:n.icon)||"mdi:square"}),o=zn(()=>{var e,n;return(null==(e=t.data.metadata)?void 0:e.color)||(null==(n=t.data.config)?void 0:n.color)||"#6366f1"});const r="2rem";function i(){if(t.data.onConfigOpen){const e={id:t.data.nodeId||"unknown",type:"square",data:t.data};t.data.onConfigOpen(e)}}let a=zn(()=>{var e,n;return null==(n=null==(e=t.data.metadata)?void 0:e.inputs)?void 0:n.find(e=>"trigger"===e.dataType)}),s=zn(()=>{var e,n;return null==(n=null==(e=t.data.metadata)?void 0:e.outputs)?void 0:n.find(e=>"trigger"===e.dataType)}),l=zn(()=>{var e,n;return null==(n=null==(e=t.data.metadata)?void 0:e.inputs)?void 0:n.find(e=>"trigger"!==e.dataType)}),d=zn(()=>{var e,n;return null==(n=null==(e=t.data.metadata)?void 0:e.outputs)?void 0:n.find(e=>"trigger"!==e.dataType)}),u=zn(()=>!!mr(a)&&!!mr(l)),c=zn(()=>!!mr(s)&&!!mr(d));var p=uy(),f=vo(p),h=e=>{{let n=zn(()=>Ng(mr(l).dataType)),o=zn(()=>mr(u)?"25%":"50%"),r=zn(()=>`${t.data.nodeId}-input-${mr(l).id}`);Zc(e,{type:"target",get position(){return pu.Left},get style(){var e,t;return`background-color: ${null!=(e=mr(n))?e:""}; border-color: '#ffffff'; top: ${null!=(t=mr(o))?t:""}; z-index: 30;`},get id(){return mr(r)}})}};ni(f,e=>{mr(l)&&e(h)});var g=mo(f,2),v=e=>{{let n=zn(()=>Ng(mr(a).dataType)),o=zn(()=>mr(u)?"75%":"50%"),r=zn(()=>`${t.data.nodeId}-input-${mr(a).id}`);Zc(e,{type:"target",get position(){return pu.Left},get style(){var e,t;return`background-color: ${null!=(e=mr(n))?e:""}; border-color: '#ffffff'; top: ${null!=(t=mr(o))?t:""}; z-index: 30;`},get id(){return mr(r)}})}};ni(g,e=>{mr(a)&&e(v)});var m=mo(g,2);let y;m.__click=[ay,i],m.__dblclick=[iy,i],m.__keydown=[sy,i];var w=go(m);Qh(go(w),{get icon(){return mr(n)},class:"flowdrop-square-node__compact-icon",get style(){var e;return`color: ${null!=(e=mr(o))?e:""}; font-size: ${r};`}});var b=mo(w,2),x=e=>{Lr(e,ly())};ni(b,e=>{t.isProcessing&&e(x)});var k=mo(b,2),_=e=>{var t=dy();Qh(go(t),{icon:"mdi:alert-circle",class:"flowdrop-square-node__error-icon"}),Lr(e,t)};ni(k,e=>{t.isError&&e(_)});var S=mo(k,2);S.__click=i,Qh(go(S),{icon:"mdi:cog"});var T=mo(m,2),C=e=>{{let n=zn(()=>`${t.data.nodeId}-output-${mr(d).id}`),o=zn(()=>Ng(mr(d).dataType)),r=zn(()=>mr(c)?"25%":"50%");Zc(e,{type:"source",get position(){return pu.Right},get id(){return mr(n)},get style(){var e,t;return`background-color: ${null!=(e=mr(o))?e:""}; border-color: '#ffffff'; top: ${null!=(t=mr(r))?t:""}; z-index: 30;`}})}};ni(T,e=>{mr(d)&&e(C)});var E=mo(T,2),$=e=>{{let n=zn(()=>`${t.data.nodeId}-output-${mr(s).id}`),o=zn(()=>Ng(mr(s).dataType)),r=zn(()=>mr(c)?"75%":"50%");Zc(e,{type:"source",get position(){return pu.Right},get id(){return mr(n)},get style(){var e,t;return`background-color: ${null!=(e=mr(o))?e:""}; border-color: '#ffffff'; top: ${null!=(t=mr(r))?t:""}; z-index: 30;`}})}};ni(E,e=>{mr(s)&&e($)}),No(e=>y=yi(m,1,"flowdrop-square-node flowdrop-square-node--compact svelte-np6iuc",null,y,e),[()=>({"flowdrop-square-node--selected":t.selected,"flowdrop-square-node--processing":t.isProcessing,"flowdrop-square-node--error":t.isError})]),Lr(e,p),Jt()}function py(){}function fy(e,t){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t())}$r(["click","dblclick","keydown"]);var hy=Ir('<div class="flowdrop-tool-node__processing svelte-1610wt3"><div class="flowdrop-tool-node__spinner svelte-1610wt3"></div></div>'),gy=Ir('<div class="flowdrop-tool-node__error svelte-1610wt3"><!></div>'),vy=Ir('<!> <div role="button" tabindex="0"><div class="flowdrop-tool-node__header svelte-1610wt3"><div class="flowdrop-tool-node__header-content svelte-1610wt3"><div class="flowdrop-tool-node__icon-container svelte-1610wt3"><!></div> <div class="flowdrop-tool-node__info svelte-1610wt3"><h3 class="flowdrop-tool-node__title svelte-1610wt3"> </h3> <div class="flowdrop-tool-node__version svelte-1610wt3"> </div></div> <div class="flowdrop-tool-node__badge svelte-1610wt3">TOOL</div></div> <p class="flowdrop-tool-node__description svelte-1610wt3"> </p></div> <!> <!> <button class="flowdrop-tool-node__config-btn svelte-1610wt3" title="Configure tool"><!></button></div> <!>',1);function my(e,t){Gt(t,!0);let n=zn(()=>{var e,n;return(null==(e=t.data.metadata)?void 0:e.icon)||(null==(n=t.data.config)?void 0:n.icon)||"mdi:tools"}),o=zn(()=>{var e,n;return(null==(e=t.data.metadata)?void 0:e.color)||(null==(n=t.data.config)?void 0:n.color)||"#f59e0b"}),r=zn(()=>{var e,n;return(null==(e=t.data.metadata)?void 0:e.name)||(null==(n=t.data.config)?void 0:n.toolName)||t.data.label||"Tool"}),i=zn(()=>{var e,n;return(null==(e=t.data.metadata)?void 0:e.description)||(null==(n=t.data.config)?void 0:n.toolDescription)||"A configurable tool for agents"}),a=zn(()=>{var e,n;return(null==(e=t.data.metadata)?void 0:e.version)||(null==(n=t.data.config)?void 0:n.toolVersion)||"1.0.0"}),s=zn(()=>{var e,n;return(null==(n=null==(e=t.data.metadata)?void 0:e.inputs)?void 0:n.some(e=>"tool"===e.dataType))||!1}),l=zn(()=>{var e,n;return(null==(n=null==(e=t.data.metadata)?void 0:e.outputs)?void 0:n.some(e=>"tool"===e.dataType))||!1}),d=zn(()=>{var e,n;return null==(n=null==(e=t.data.metadata)?void 0:e.inputs)?void 0:n.find(e=>"tool"===e.dataType)}),u=zn(()=>{var e,n;return null==(n=null==(e=t.data.metadata)?void 0:e.outputs)?void 0:n.find(e=>"tool"===e.dataType)});function c(){if(t.data.onConfigOpen){const e={id:t.data.nodeId||"unknown",type:"tool",data:t.data};t.data.onConfigOpen(e)}}function p(){c()}var f=vy(),h=vo(f),g=e=>{{let n=zn(()=>`${t.data.nodeId}-input-${mr(d).id}`),o=zn(()=>Ng("tool"));Zc(e,{type:"target",get position(){return pu.Left},get id(){return mr(n)},get style(){var e;return`background-color: ${null!=(e=mr(o))?e:""}; border-color: '#ffffff';`}})}};ni(h,e=>{mr(s)&&mr(d)&&e(g)});var v=mo(h,2);let m;v.__click=[py],v.__dblclick=p,v.__keydown=[fy,p];var y=go(v),w=go(y),b=go(w);Qh(go(b),{get icon(){return mr(n)},class:"flowdrop-tool-node__icon"});var x=go(mo(b,2)),k=go(x),_=go(mo(x,2)),S=go(mo(w,2)),T=mo(y,2),C=e=>{Lr(e,hy())};ni(T,e=>{t.isProcessing&&e(C)});var E=mo(T,2),$=e=>{var t=gy();Qh(go(t),{icon:"mdi:alert-circle",class:"flowdrop-tool-node__error-icon"}),Lr(e,t)};ni(E,e=>{t.isError&&e($)});var A=mo(E,2);A.__click=c,Qh(go(A),{icon:"mdi:cog"});var N=mo(v,2),O=e=>{{let n=zn(()=>`${t.data.nodeId}-output-${mr(u).id}`),o=zn(()=>Ng("tool"));Zc(e,{type:"source",get position(){return pu.Right},get id(){return mr(n)},get style(){var e;return`background-color: ${null!=(e=mr(o))?e:""}; border-color: '#ffffff';`}})}};ni(N,e=>{mr(l)&&mr(u)&&e(O)}),No(e=>{var t,n;m=yi(v,1,"flowdrop-tool-node svelte-1610wt3",null,m,e),bi(b,`background-color: ${null!=(t=mr(o))?t:""}`),Br(k,mr(r)),Br(_,`v${null!=(n=mr(a))?n:""}`),Br(S,mr(i))},[()=>({"flowdrop-tool-node--selected":t.selected,"flowdrop-tool-node--processing":t.isProcessing,"flowdrop-tool-node--error":t.isError})]),Lr(e,f),Jt()}function yy(e,t,n){n.data.onConfigOpen&&n.data.onConfigOpen({id:n.data.nodeId||"",type:"gateway",data:n.data})}function wy(e,t){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t())}$r(["click","dblclick","keydown"]);var by=Ir('<span class="flowdrop-badge flowdrop-badge--error flowdrop-badge--sm svelte-wonp7b">Required</span>'),xy=Ir('<p class="flowdrop-text--xs flowdrop-text--gray flowdrop-truncate svelte-wonp7b"> </p>'),ky=Ir('<div class="flowdrop-workflow-node__port svelte-wonp7b"><!> <div class="flowdrop-flex--1 flowdrop-min-w--0 svelte-wonp7b"><div class="flowdrop-flex flowdrop-gap--2 svelte-wonp7b"><span class="flowdrop-text--xs flowdrop-font--medium svelte-wonp7b"> </span> <span class="flowdrop-badge flowdrop-badge--sm svelte-wonp7b"> </span> <!></div> <!></div></div>'),_y=Ir('<div class="flowdrop-workflow-node__ports svelte-wonp7b"><div class="flowdrop-workflow-node__ports-header svelte-wonp7b"><h5 class="flowdrop-workflow-node__ports-title svelte-wonp7b">Inputs</h5></div> <div class="flowdrop-workflow-node__ports-list svelte-wonp7b"></div></div>'),Sy=Ir("<span><!></span>"),Ty=Ir('<div class="flowdrop-workflow-node__port svelte-wonp7b"><div class="flowdrop-flex--1 flowdrop-min-w--0 flowdrop-text--right svelte-wonp7b"><div class="flowdrop-flex flowdrop-gap--2 flowdrop-justify--end flowdrop-items--center svelte-wonp7b"><!> <span> </span> <span class="flowdrop-badge flowdrop-badge--sm svelte-wonp7b">trigger</span></div></div> <!></div>'),Cy=Ir('<div class="flowdrop-workflow-node__ports svelte-wonp7b"><div class="flowdrop-workflow-node__ports-header svelte-wonp7b"><h5 class="flowdrop-workflow-node__ports-title svelte-wonp7b"><!> <span> </span></h5></div> <div class="flowdrop-workflow-node__ports-list svelte-wonp7b"></div></div>'),Ey=Ir('<div class="flowdrop-workflow-node__ports svelte-wonp7b"><div class="workflow-node__no-branches svelte-wonp7b"><!> <span>No branches configured</span></div></div>'),$y=Ir('<div role="button" tabindex="0"><div class="flowdrop-workflow-node__header svelte-wonp7b"><div class="flowdrop-flex flowdrop-gap--3 flowdrop-items--center svelte-wonp7b"><div class="flowdrop-workflow-node__icon svelte-wonp7b"><!></div> <h3 class="flowdrop-text--sm flowdrop-font--medium flowdrop-truncate flowdrop-flex--1 svelte-wonp7b"> </h3></div> <p class="flowdrop-text--xs flowdrop-text--gray flowdrop-truncate flowdrop-mt--1 svelte-wonp7b"> </p></div> <!> <!> <button class="flowdrop-workflow-node__config-btn svelte-wonp7b" title="Configure node"><!></button></div>');function Ay(e,t){Gt(t,!0);let n=na(t,["$$slots","$$events","$$legacy"]),o=zn(()=>{var e;return(null==(e=t.data.config)?void 0:e.branches)||[]}),r=zn(()=>{var e,n;return(null==(n=null==(e=t.data.executionInfo)?void 0:e.output)?void 0:n.active_branches)||[]});function i(){}var a=$y();let s;a.__click=i,a.__dblclick=[yy,n,t],a.__keydown=[wy,i];var l=go(a),d=go(l),u=go(d),c=go(u);{let e=zn(()=>sv(t.data.metadata.icon,t.data.metadata.category));Qh(c,{get icon(){return mr(e)}})}var p=go(mo(u,2)),f=mo(d,2),h=go(f),g=mo(l,2),v=e=>{var n=_y();ri(mo(go(n),2),21,()=>t.data.metadata.inputs,e=>e.id,(e,n)=>{var o=ky(),r=go(o);{let e=zn(()=>`${t.data.nodeId}-input-${mr(n).id}`),o=zn(()=>vg(mr(n).dataType));Zc(r,{type:"target",get position(){return pu.Left},get id(){return mr(e)},class:"flowdrop-workflow-node__handle",get style(){var e;return`top: 50%; transform: translateY(-50%); margin-left: -32px; background-color: ${null!=(e=mr(o))?e:""}; border-color: '#ffffff';`},role:"button",tabindex:0,get"aria-label"(){var e;return`Connect to ${null!=(e=mr(n).name)?e:""} input port`}})}var i=go(mo(r,2)),a=go(i),s=go(a),l=mo(a,2),d=go(l),u=mo(l,2),c=e=>{Lr(e,by())};ni(u,e=>{mr(n).required&&e(c)});var p=mo(i,2),f=e=>{var t=xy(),o=go(t);No(()=>Br(o,mr(n).description)),Lr(e,t)};ni(p,e=>{mr(n).description&&e(f)}),No(e=>{Br(s,mr(n).name),bi(l,`background-color: ${null!=e?e:""}; color: #fff;`),Br(d,mr(n).dataType)},[()=>vg(mr(n).dataType)]),Lr(e,o)}),Lr(e,n)};ni(g,e=>{t.data.metadata.inputs.length>0&&e(v)});var m=mo(g,2),y=e=>{var n=Cy(),i=go(n),a=go(i),s=go(a);Qh(s,{icon:"mdi:source-branch"});var l=go(mo(s,2));ri(mo(i,2),21,()=>mr(o),e=>e.name,(e,n)=>{const o=zn(()=>{return e=mr(n).name,mr(r).includes(e);var e});var i=Ty(),a=go(i),s=go(a),l=go(s),d=e=>{var t=Sy();Qh(go(t),{icon:"mdi:check-circle"}),No(e=>bi(t,`color: ${null!=e?e:""};`),[()=>vg("trigger")]),Lr(e,t)};ni(l,e=>{mr(o)&&e(d)});var u=mo(l,2);let c;var p=go(u),f=mo(u,2),h=mo(a,2);{let e=zn(()=>`${t.data.nodeId}-output-${mr(n).name}`),r=zn(()=>"flowdrop-workflow-node__handle "+(mr(o)?"flowdrop-workflow-node__handle--active":"")),i=zn(()=>(mr(o),vg("trigger")));Zc(h,{type:"source",get position(){return pu.Right},get id(){return mr(e)},get class(){return mr(r)},get style(){var e;return`top: 50%; transform: translateY(-50%); margin-right: -32px; background-color: ${null!=(e=mr(i))?e:""}; border-color: '#ffffff';`},role:"button",tabindex:0,get"aria-label"(){var e;return`Connect from ${null!=(e=mr(n).name)?e:""} branch`}})}No((e,t)=>{c=yi(u,1,"flowdrop-text--xs flowdrop-font--medium svelte-wonp7b",null,c,e),Br(p,mr(n).name),bi(f,`background-color: ${null!=t?t:""}; color: #fff;`)},[()=>({"flowdrop-text--active":mr(o)}),()=>vg("trigger")]),Lr(e,i)}),No(()=>{var e;return Br(l,`Branches (${null!=(e=mr(o).length)?e:""})`)}),Lr(e,n)},w=e=>{var t=Ey(),n=go(t);Qh(go(n),{icon:"mdi:alert-circle-outline"}),Lr(e,t)};ni(m,e=>{mr(o).length>0?e(y):e(w,!1)});var b=mo(m,2);b.__click=[yy,n,t],Qh(go(b),{icon:"mdi:cog"}),No((e,n)=>{var o,r,i;s=yi(a,1,"flowdrop-workflow-node flowdrop-workflow-node--gateway svelte-wonp7b",null,s,e),Mi(a,"aria-label",`Gateway node: ${null!=(o=t.data.metadata.name)?o:""}`),Mi(a,"aria-describedby",`node-description-${null!=(r=t.data.nodeId||"unknown")?r:""}`),bi(u,`background-color: ${null!=n?n:""}`),Br(p,t.data.label),Mi(f,"id",`node-description-${null!=(i=t.data.nodeId||"unknown")?i:""}`),Br(h,t.data.metadata.description)},[()=>({"flowdrop-workflow-node--selected":t.selected}),()=>gg(t.data.metadata.category)]),Lr(e,a),Jt()}$r(["click","dblclick","keydown"]);var Ny=Ir("<span> </span>");function Oy(e,t){Gt(t,!0);var n=Ny(),o=go(n);No(()=>{var e;yi(n,1,`status-label ${null!=(e=t.class||"")?e:""}`,"svelte-pxebix"),Br(o,t.label)}),Lr(e,n),Jt()}function My(e){const t={idle:"#6b7280",pending:"#f59e0b",running:"#3b82f6",completed:"#10b981",failed:"#ef4444",cancelled:"#6b7280",skipped:"#8b5cf6"};return t[e]||t.idle}function Iy(e){const t={idle:"mdi:circle-outline",pending:"mdi:clock-outline",running:"mdi:loading",completed:"mdi:check-circle",failed:"mdi:alert-circle",cancelled:"mdi:cancel",skipped:"mdi:skip-next"};return t[e]||t.idle}function Py(e){const t={idle:"Idle",pending:"Pending",running:"Running",completed:"Completed",failed:"Failed",cancelled:"Cancelled",skipped:"Skipped"};return t[e]||t.idle}function zy(e){const t={idle:"#f9fafb",pending:"#fef3c7",running:"#dbeafe",completed:"#d1fae5",failed:"#fee2e2",cancelled:"#f3f4f6",skipped:"#ede9fe"};return t[e]||t.idle}function Dy(e){const t={idle:"#6b7280",pending:"#d97706",running:"#1d4ed8",completed:"#059669",failed:"#dc2626",cancelled:"#6b7280",skipped:"#7c3aed"};return t[e]||t.idle}function Ry(){return{status:"idle",executionCount:0,isExecuting:!1}}function Ly(e){return fe(pe({},e),{status:"running",isExecuting:!0})}function jy(e,t){return fe(pe({},e),{status:"completed",executionCount:e.executionCount+1,lastExecuted:(new Date).toISOString(),lastExecutionDuration:t,isExecuting:!1,lastError:void 0})}function Wy(e,t,n){return fe(pe({},e),{status:"failed",executionCount:e.executionCount+1,lastExecuted:(new Date).toISOString(),lastExecutionDuration:n,isExecuting:!1,lastError:t})}function qy(e){return fe(pe({},e),{status:"idle",isExecuting:!1,lastError:void 0})}function Fy(e){if(!e)return"N/A";if(e<1e3)return`${Math.round(e)}ms`;if(e<6e4)return`${(e/1e3).toFixed(1)}s`;return`${Math.floor(e/6e4)}m ${Math.floor(e%6e4/1e3)}s`}function Hy(e){if(!e)return"Never";const t=new Date(e),n=(new Date).getTime()-t.getTime();if(n<6e4)return"Just now";if(n<36e5){return`${Math.floor(n/6e4)}m ago`}if(n<864e5){return`${Math.floor(n/36e5)}h ago`}return t.toLocaleDateString()}var Uy=Ir('<div class="node-status-overlay__count svelte-1evo6ij"> </div>'),Vy=Ir('<div class="node-status-overlay__detail-item svelte-1evo6ij"><span class="node-status-overlay__detail-label svelte-1evo6ij">Last Run:</span> <span class="node-status-overlay__detail-value svelte-1evo6ij"> </span></div>'),By=Ir('<div class="node-status-overlay__detail-item svelte-1evo6ij"><span class="node-status-overlay__detail-label svelte-1evo6ij">Duration:</span> <span class="node-status-overlay__detail-value svelte-1evo6ij"> </span></div>'),Ky=Ir('<div class="node-status-overlay__detail-item node-status-overlay__detail-item--error svelte-1evo6ij"><span class="node-status-overlay__detail-label svelte-1evo6ij">Error:</span> <span class="node-status-overlay__detail-value svelte-1evo6ij"> </span></div>'),Zy=Ir('<div class="node-status-overlay__details svelte-1evo6ij"><div class="node-status-overlay__detail-item svelte-1evo6ij"><span class="node-status-overlay__detail-label svelte-1evo6ij">Status:</span> <span class="node-status-overlay__detail-value svelte-1evo6ij"> </span></div> <div class="node-status-overlay__detail-item svelte-1evo6ij"><span class="node-status-overlay__detail-label svelte-1evo6ij">Executions:</span> <span class="node-status-overlay__detail-value svelte-1evo6ij"> </span></div> <!> <!> <!></div>'),Yy=Ir('<div role="status"><div class="node-status-overlay__status-display svelte-1evo6ij"><div class="node-status-overlay__status-icon svelte-1evo6ij"><!></div> <!></div> <!> <!></div>');function Xy(e,t){Gt(t,!0);let n=eo(t.position||"top-right"),o=eo(t.size||"md"),r=eo(t.showDetails||!1),i=Bn(!1);const a={sm:{statusSize:"18px",iconSize:"10px",labelSize:"0.75rem",padding:"6px 12px"},md:{statusSize:"24px",iconSize:"14px",labelSize:"0.875rem",padding:"8px 16px"},lg:{statusSize:"28px",iconSize:"16px",labelSize:"1rem",padding:"10px 20px"}}[o],s={"top-left":"top: -24px; left: 50%; transform: translateX(-50%);","top-right":"top: -24px; left: 50%; transform: translateX(-50%);","bottom-left":"top: -24px; left: 50%; transform: translateX(-50%);","bottom-right":"top: -24px; left: 50%; transform: translateX(-50%);"};let l=zn(()=>t.executionInfo||{status:"idle",executionCount:0,isExecuting:!1}),d=zn(()=>"idle"!==mr(l).status||mr(l).executionCount>0||mr(l).isExecuting);var u=Rr(),c=vo(u),p=e=>{var t=Yy();let d;var u=go(t),c=go(u),p=go(c);{let e=zn(()=>Iy(mr(l).status));Qh(p,{get icon(){return mr(e)},class:"node-status-overlay__icon"})}var f=mo(c,2);{let e=zn(()=>Py(mr(l).status));Oy(f,{get label(){return mr(e)},class:"node-status-overlay__label"})}var h=mo(u,2),g=e=>{var t=Uy(),n=go(t);No(()=>Br(n,mr(l).executionCount)),Lr(e,t)};ni(h,e=>{mr(l).executionCount>0&&e(g)});var v=mo(h,2),m=e=>{var t=Zy(),n=go(t),o=mo(go(n),2),r=go(o),i=mo(n,2),a=mo(go(i),2),s=go(a),d=mo(i,2),u=e=>{var t=Vy(),n=mo(go(t),2),o=go(n);No(e=>Br(o,e),[()=>Hy(mr(l).lastExecuted)]),Lr(e,t)};ni(d,e=>{mr(l).lastExecuted&&e(u)});var c=mo(d,2),p=e=>{var t=By(),n=mo(go(t),2),o=go(n);No(e=>Br(o,e),[()=>Fy(mr(l).lastExecutionDuration)]),Lr(e,t)};ni(c,e=>{mr(l).lastExecutionDuration&&e(p)});var f=mo(c,2),h=e=>{var t=Ky(),n=mo(go(t),2),o=go(n);No(()=>Br(o,mr(l).lastError)),Lr(e,t)};ni(f,e=>{mr(l).lastError&&e(h)}),No(e=>{Br(r,e),Br(s,mr(l).executionCount)},[()=>Py(mr(l).status)]),Lr(e,t)};ni(v,e=>{r&&mr(i)&&e(m)}),No((e,o,r,i,p)=>{var f,h,g,v,m,y;d=yi(t,1,"node-status-overlay svelte-1evo6ij",null,d,e),bi(t,`\n\t\t\t${null!=(f=s[n])?f:""}\n\t\t\t--status-size: ${null!=(h=a.statusSize)?h:""};\n\t\t\t--label-size: ${null!=(g=a.labelSize)?g:""};\n\t\t\t--icon-size: ${null!=(v=a.iconSize)?v:""};\n\t\t\t--padding: ${null!=(m=a.padding)?m:""};\n\t\t`),Mi(t,"title",`${null!=o?o:""} - Executed ${null!=(y=mr(l).executionCount)?y:""} times`),Mi(t,"aria-label",`Node execution status: ${null!=r?r:""}`),bi(u,`background-color: ${null!=i?i:""}`),bi(c,`background-color: ${null!=p?p:""}`)},[()=>({"node-status-overlay--hovered":mr(i),"node-status-overlay--top-left":!0,"node-status-overlay--sm":"sm"===o,"node-status-overlay--md":"md"===o,"node-status-overlay--lg":"lg"===o}),()=>Py(mr(l).status),()=>Py(mr(l).status),()=>zy(mr(l).status),()=>My(mr(l).status)]),Er("mouseenter",t,()=>Zn(i,!0)),Er("mouseleave",t,()=>Zn(i,!1)),Lr(e,t)};ni(c,e=>{mr(d)&&e(p)}),Lr(e,u),Jt()}const Gy={position:"top-right",size:"md",showDetails:!0};function Jy(e,t,n={}){var o;return{nodeId:e,executionInfo:t,statusPosition:n.position||Gy.position,statusSize:n.size||Gy.size,showStatusDetails:null!=(o=n.showDetails)?o:Gy.showDetails}}function Qy(e){return!!e&&("idle"!==e.status||e.executionCount>0||e.isExecuting)}function ew(e){switch(e){case"tool":return"top-left";case"note":return"bottom-right";default:return"top-right"}}function tw(e){switch(e){case"tool":case"note":return"sm";default:return"md"}}const nw={note:"note",simple:"simple",square:"square",tool:"tool",gateway:"gateway",default:"workflowNode"};function ow(e){return nw[e]||"workflowNode"}function rw(e){return e.supportedTypes&&e.supportedTypes.length>0?e.supportedTypes:e.type?[e.type]:["default"]}function iw(e){return rw(e)[0]}function aw(e,t){const n=rw(e);return t&&n.includes(t)?t:iw(e)}function sw(e,t){return ow(aw(e,t))}function lw(e,t){return rw(e).includes(t)}function dw(e){const t=rw(e),n={note:"Note (sticky note style)",simple:"Simple (compact layout)",square:"Square (geometric layout)",tool:"Tool (specialized for agent tools)",gateway:"Gateway (branching control flow)",default:"Default (standard workflow node)"};return{enum:t,enumNames:t.map(e=>n[e]||e)}}function uw(e,t){const{enum:n,enumNames:o}=dw(e);return{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:t||iw(e),enum:n,enumNames:o}}var cw=Ir('<div class="universal-node svelte-1fakkxg"><!> <!></div>');function pw(e,t){Gt(t,!0);let n=ia(t,"selected",3,!1),o=zn(()=>{var e;return null==(e=t.data.config)?void 0:e.nodeType}),r=zn(()=>t.data.metadata?sw(t.data.metadata,mr(o)):"workflowNode"),i=zn(()=>function(e){switch(e){case"note":return Xm;case"simple":return ry;case"square":return cy;case"tool":return my;case"gateway":return Ay;default:return _v}}(mr(r))),a=zn(()=>t.data.executionInfo),s=zn(()=>Qy(mr(a))&&"note"!==mr(r));function l(){return ew(mr(r))}function d(){return tw(mr(r))}var u=cw(),c=go(u),p=e=>{_v(e,{get data(){return t.data},get selected(){return n()}})},f=e=>{var o=Rr(),r=vo(o),a=e=>{Xm(e,{get data(){return t.data},get selected(){return n()}})},s=e=>{var o=Rr(),r=vo(o),a=e=>{ry(e,{get data(){return t.data},get selected(){return n()}})},s=e=>{var o=Rr(),r=vo(o),a=e=>{cy(e,{get data(){return t.data},get selected(){return n()}})},s=e=>{var o=Rr(),r=vo(o),a=e=>{my(e,{get data(){return t.data},get selected(){return n()}})},s=e=>{var o=Rr(),r=vo(o),a=e=>{Ay(e,{get data(){return t.data},get selected(){return n()}})};ni(r,e=>{mr(i)===Ay&&e(a)},!0),Lr(e,o)};ni(r,e=>{mr(i)===my?e(a):e(s,!1)},!0),Lr(e,o)};ni(r,e=>{mr(i)===cy?e(a):e(s,!1)},!0),Lr(e,o)};ni(r,e=>{mr(i)===ry?e(a):e(s,!1)},!0),Lr(e,o)};ni(r,e=>{mr(i)===Xm?e(a):e(s,!1)},!0),Lr(e,o)};ni(c,e=>{mr(i)===_v?e(p):e(f,!1)});var h=mo(c,2),g=e=>{{let n=zn(()=>t.data.nodeId||"unknown"),o=zn(l),r=zn(d);Xy(e,{get nodeId(){return mr(n)},get executionInfo(){return mr(a)},get position(){return mr(o)},get size(){return mr(r)},showDetails:!0})}};ni(h,e=>{mr(s)&&e(g)}),Lr(e,u),Jt()}let fw=null;function hw(e){fw=e}function gw(){return fw}function vw(e){console.warn("⚠️ setApiBaseUrl() is deprecated. Use setEndpointConfig() with a full EndpointConfig object instead."),fw?fw.baseUrl=e.replace(/\/$/,""):Promise.resolve().then(()=>Pe).then(({createEndpointConfig:t})=>{fw=t(e)}).catch(()=>{})}function mw(e,t,n){return xe(this,arguments,function*(e,t,n,o={}){if(!fw)throw new Error("Endpoint configuration not set. Call setEndpointConfig() first.");const r=Oe(fw,t,n),i=Me(fw,e),a=Ie(fw,e),s=yield fetch(r,pe({method:i,headers:a},o)),l=s.headers.get("content-type"),d=null==l?void 0:l.includes("application/json");if(!s.ok){let e=`HTTP ${s.status}: ${s.statusText}`;if(d)try{const t=yield s.json();e=t.error||t.message||e}catch(b_){}else try{const t=yield s.text();e=`${e}. Server returned: ${t.substring(0,200).trim()}...`}catch(b_){}throw new Error(e)}return yield s.json()})}const yw={getNodes(e){return xe(this,null,function*(){if(!fw)throw new Error("Endpoint configuration not set");const t=new URLSearchParams;(null==e?void 0:e.category)&&t.append("category",e.category),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.offset)&&t.append("offset",e.offset.toString());return(yield mw("nodes.list",fw.endpoints.nodes.list+"?"+t.toString())).data||[]})},getNode(e){return xe(this,null,function*(){if(!fw)throw new Error("Endpoint configuration not set");const t=yield mw("nodes.get",fw.endpoints.nodes.get,{id:e});if(!t.data)throw new Error("Node not found");return t.data})}},ww={getWorkflows(e){return xe(this,null,function*(){if(!fw)throw new Error("Endpoint configuration not set");const t=new URLSearchParams;(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.offset)&&t.append("offset",e.offset.toString());return(yield mw("workflows.list",fw.endpoints.workflows.list+"?"+t.toString())).data||[]})},getWorkflow(e){return xe(this,null,function*(){if(!fw)throw new Error("Endpoint configuration not set");const t=yield mw("workflows.get",fw.endpoints.workflows.get,{id:e});if(!t.data)throw new Error("Workflow not found");return t.data})},createWorkflow(e){return xe(this,null,function*(){if(!fw)throw new Error("Endpoint configuration not set");const t=fe(pe({},e),{label:e.name,name:e.name}),n=yield mw("workflows.create",fw.endpoints.workflows.create,void 0,{method:"POST",body:JSON.stringify(t)});if(!n.data)throw new Error("Failed to create workflow");return n.data})},updateWorkflow(e,t){return xe(this,null,function*(){if(!fw)throw new Error("Endpoint configuration not set");const n=t.name?fe(pe({},t),{label:t.name,name:t.name}):t,o=yield mw("workflows.update",fw.endpoints.workflows.update,{id:e},{method:"PUT",body:JSON.stringify(n)});if(!o.data)throw new Error("Failed to update workflow");return o.data})},deleteWorkflow(e){return xe(this,null,function*(){if(!fw)throw new Error("Endpoint configuration not set");yield mw("workflows.delete",fw.endpoints.workflows.delete,{id:e},{method:"DELETE"})})},saveWorkflow(e){return xe(this,null,function*(){if(e.id&&e.id.length>0&&!e.id.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i))return this.updateWorkflow(e.id,e);{const t=e,{id:n}=t,o=he(t,["id"]);return this.createWorkflow(o)}})}},bw={nodes:yw,workflows:ww},xw=Object.freeze(Object.defineProperty({__proto__:null,api:bw,getEndpointConfig:gw,nodeApi:yw,setApiBaseUrl:vw,setEndpointConfig:hw,workflowApi:ww},Symbol.toStringTag,{value:"Module"})),kw=[];for(let x_=0;x_<256;++x_)kw.push((x_+256).toString(16).slice(1));let _w;const Sw=new Uint8Array(16);const Tw={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Cw(e,t,n){var o,r,i;if(Tw.randomUUID&&!t&&!e)return Tw.randomUUID();const a=null!=(i=null!=(r=(e=e||{}).random)?r:null==(o=e.rng)?void 0:o.call(e))?i:function(){if(!_w){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");_w=crypto.getRandomValues.bind(crypto)}return _w(Sw)}();if(a.length<16)throw new Error("Random bytes length must be >= 16");if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=a[e];return t}return function(e,t=0){return(kw[e[t+0]]+kw[e[t+1]]+kw[e[t+2]]+kw[e[t+3]]+"-"+kw[e[t+4]]+kw[e[t+5]]+"-"+kw[e[t+6]]+kw[e[t+7]]+"-"+kw[e[t+8]]+kw[e[t+9]]+"-"+kw[e[t+10]]+kw[e[t+11]]+kw[e[t+12]]+kw[e[t+13]]+kw[e[t+14]]+kw[e[t+15]]).toLowerCase()}(a)}const Ew=Object.freeze(Object.defineProperty({__proto__:null,v4:Cw},Symbol.toStringTag,{value:"Module"})),$w=class e{constructor(){ge(this,"cache",new Map),ge(this,"cacheTimeout",3e4),ge(this,"lastFetch",0),ge(this,"apiUnavailable",!1),ge(this,"apiUnavailableUntil",0)}static getInstance(){return e.instance||(e.instance=new e),e.instance}getNodeExecutionInfo(e,t){return xe(this,null,function*(){if(!t)return null;try{const n=gw(),o=Oe(n,n.endpoints.pipelines.get,{id:t}),r=yield fetch(o);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const i=yield r.json(),a=i.jobs||[],s=i.node_statuses||{},l=a.find(t=>t.node_id===e),d=s[e];if(!l&&!d)return{status:"idle",executionCount:0,isExecuting:!1};const u={status:this.mapJobStatusToExecutionStatus((null==d?void 0:d.status)||(null==l?void 0:l.status)||"idle"),executionCount:(null==l?void 0:l.execution_count)||0,isExecuting:"running"===(null==d?void 0:d.status)||"running"===(null==l?void 0:l.status),lastExecuted:(null==l?void 0:l.last_executed)||(null==d?void 0:d.last_executed),lastExecutionDuration:(null==l?void 0:l.execution_time)||(null==d?void 0:d.execution_time),lastError:(null==l?void 0:l.error)||(null==d?void 0:d.error)};return this.cache.set(e,u),u}catch(n){return console.error("Failed to fetch node execution info:",n),null}})}getMultipleNodeExecutionInfo(e,t){return xe(this,null,function*(){if(!t)return{};if(this.apiUnavailable&&Date.now()<this.apiUnavailableUntil){const t={};return e.forEach(e=>{t[e]={status:"idle",executionCount:0,isExecuting:!1}}),t}try{const n=gw(),o=Oe(n,n.endpoints.pipelines.get,{id:t}),r=yield fetch(o);if(!r.ok){if(404===r.status){console.warn(`Pipeline API endpoint not available for pipeline ${t}`),this.apiUnavailable=!0,this.apiUnavailableUntil=Date.now()+3e5;const n={};return e.forEach(e=>{n[e]={status:"idle",executionCount:0,isExecuting:!1}}),n}throw new Error(`HTTP error! status: ${r.status}`)}const i=(yield r.json()).jobs||[],a={};return e.forEach(e=>{a[e]={status:"idle",executionCount:0,isExecuting:!1}}),i.forEach(t=>{const n=t.node_id;e.includes(n)&&(a[n]={status:this.mapJobStatusToExecutionStatus(t.status),executionCount:t.execution_count||0,isExecuting:"running"===t.status,lastExecuted:t.completed||t.started,lastExecutionDuration:t.execution_time,lastError:t.error_message},this.cache.set(n,a[n]))}),a}catch(n){console.error("Failed to fetch multiple node execution info:",n);const t={};return e.forEach(e=>{t[e]={status:"idle",executionCount:0,isExecuting:!1}}),t}})}getAllNodeExecutionCounts(){return xe(this,null,function*(){try{const e=Oe(gw(),"/node-execution-counts"),t=yield fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const n=yield t.json();return n.success&&n.data?n.data:{}}catch(e){return console.error("Failed to fetch all node execution counts:",e),{}}})}getCachedNodeExecutionInfo(e){return this.cache.get(e)||null}clearNodeCache(e){this.cache.delete(e)}clearAllCache(){this.cache.clear(),this.lastFetch=0}isCacheStale(){return Date.now()-this.lastFetch>this.cacheTimeout}updateNodeExecutionInfo(e,t){const n=this.cache.get(e);n?this.cache.set(e,pe(pe({},n),t)):this.cache.set(e,pe({status:"idle",executionCount:0,isExecuting:!1},t))}mapJobStatusToExecutionStatus(e){switch(e){case"pending":return"pending";case"running":return"running";case"completed":return"completed";case"failed":return"failed";case"cancelled":return"cancelled";case"skipped":return"skipped";default:return"idle"}}updateMultipleNodeExecutionInfo(e){Object.entries(e).forEach(([e,t])=>{this.updateNodeExecutionInfo(e,t)})}resetApiAvailability(){this.apiUnavailable=!1,this.apiUnavailableUntil=0}};ge($w,"instance");let Aw=$w;const Nw=Aw.getInstance();class Ow{static applyConnectionStyling(e,t,n){const o="tool"===t.type;o?(e.style="stroke-dasharray: 0 4 0; stroke: amber !important;",e.class="flowdrop--edge--tool"):e.style="stroke: grey;",e.data=fe(pe({},e.data),{isToolConnection:o,targetNodeType:n.type,targetCategory:n.data.metadata.category}),o||(e.markerEnd={type:uu.ArrowClosed,width:16,height:16,color:"grey"})}static updateEdgeStyles(e,t){return e.map(e=>{const n=t.find(t=>t.id===e.source),o=t.find(t=>t.id===e.target);if(!n||!o)return e;const r=pe({},e);return this.applyConnectionStyling(r,n,o),r})}}class Mw{static loadNodesFromApi(e){return xe(this,null,function*(){if(e&&e.length>0)return e;try{return yield yw.getNodes()}catch(t){return console.error("❌ Failed to load nodes from API:",t),[{id:"text-input",name:"Text Input",category:"inputs",description:"Simple text input field",version:"1.0.0",icon:"mdi:text-box",inputs:[],outputs:[{id:"text",name:"text",type:"output",dataType:"string"}]},{id:"text-output",name:"Text Output",category:"outputs",description:"Display text output",version:"1.0.0",icon:"mdi:text-box-outline",inputs:[{id:"text",name:"text",type:"input",dataType:"string"}],outputs:[]}]}})}static loadNodeExecutionInfo(e,t){return xe(this,null,function*(){if(!(null==e?void 0:e.nodes))return{};if(!t)return{};try{const n=e.nodes.map(e=>e.id);return yield Nw.getMultipleNodeExecutionInfo(n,t)}catch(n){return console.error("Failed to load node execution info:",n),{}}})}static createNodeFromDrop(e,t,n=[]){try{const o=JSON.parse(e);let r,i;if("node"===o.type)r=o.nodeData.metadata,i=o.nodeData;else{r=o;let e={};r.configSchema&&"object"==typeof r.configSchema&&(r.configSchema.properties?Object.entries(r.configSchema.properties).forEach(([t,n])=>{n&&"object"==typeof n&&"default"in n&&(e[t]=n.default)}):e=pe({},r.configSchema)),i={label:r.name,config:e,metadata:r}}const a=function(e,t){const n=t.filter(t=>{var n,o;return(null==(o=null==(n=t.data)?void 0:n.metadata)?void 0:o.id)===e}).map(e=>e.id).map(t=>{const n=t.match(new RegExp(`^${e}\\.(\\d+)$`));return n?parseInt(n[1],10):0}).filter(e=>e>0),o=n.length>0?Math.max(...n)+1:1;return`${e}.${o}`}(r.id,n);return{id:a,type:"universalNode",position:t,deletable:!0,data:fe(pe({},i),{nodeId:a})}}catch(o){return console.error("Error parsing node data:",o),null}}}class Iw{static generateMetadata(e){return fe(pe({},e),{updatedAt:(new Date).toISOString(),versionId:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,updateNumber:((null==e?void 0:e.updateNumber)||0)+1})}static updateWorkflow(e,t,n){return fe(pe({},e),{nodes:t,edges:n,metadata:this.generateMetadata(e.metadata)})}static clearWorkflow(e){return fe(pe({},e),{nodes:[],edges:[],metadata:this.generateMetadata(e.metadata)})}static updateNodeConfig(e,t,n){return fe(pe({},e),{nodes:e.nodes.map(e=>e.id===t?fe(pe({},e),{data:fe(pe({},e.data),{config:pe({},n)})}):e),metadata:this.generateMetadata(e.metadata)})}static addNode(e,t){return fe(pe({},e),{nodes:[...e.nodes,t],metadata:this.generateMetadata(e.metadata)})}static saveWorkflow(e){return xe(this,null,function*(){var t;if(!e)return console.warn("No workflow data available to save"),null;try{let n;n=e.id?e.id:Cw();const o={id:n,name:e.name||"Untitled Workflow",nodes:e.nodes||[],edges:e.edges||[],metadata:{version:"1.0.0",createdAt:(null==(t=e.metadata)?void 0:t.createdAt)||(new Date).toISOString(),updatedAt:(new Date).toISOString()}},r=yield ww.saveWorkflow(o);return r.id&&r.id!==o.id&&tv.batchUpdate({nodes:o.nodes,edges:o.edges,name:o.name,metadata:pe(pe({},o.metadata),r.metadata)}),r}catch(n){throw console.error("❌ Failed to save workflow:",n),n}})}static exportWorkflow(e){var t;if(!e)return void console.warn("No workflow data available to export");const n={id:e.id||Cw(),name:e.name||"Untitled Workflow",nodes:e.nodes||[],edges:e.edges||[],metadata:{version:"1.0.0",createdAt:(null==(t=e.metadata)?void 0:t.createdAt)||(new Date).toISOString(),updatedAt:(new Date).toISOString()}},o=JSON.stringify(n,null,2),r=new Blob([o],{type:"application/json"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=`${n.name}.json`,a.click(),URL.revokeObjectURL(i)}static checkWorkflowCycles(e,t){return cg(e,t)}}class Pw{static configureEndpoints(e){hw(e)}}var zw=Ir("<!> <!> <!>",1),Dw=Ir("<!> <!>",1),Rw=Ir('<span class="flowdrop-text--xs flowdrop-text--gray">•</span> <span class="flowdrop-text--xs flowdrop-font--medium flowdrop-text--error svelte-12xzyp5">⚠️ Cycles detected</span>',1),Lw=Ir('<div class="flowdrop-workflow-editor svelte-12xzyp5"><div class="flowdrop-workflow-editor__main svelte-12xzyp5"><div class="flowdrop-canvas svelte-12xzyp5"><!></div> <div class="flowdrop-status-bar svelte-12xzyp5"><div class="flowdrop-status-bar__content svelte-12xzyp5"><div class="flowdrop-flex flowdrop-gap--4"><span class="flowdrop-text--xs flowdrop-text--gray"> </span> <span class="flowdrop-text--xs flowdrop-text--gray">•</span> <span class="flowdrop-text--xs flowdrop-text--gray"> </span> <!></div></div></div></div></div>');function jw(e,t){Gt(t,!0);const n=()=>Ji(Rg,"$workflowStore",o),[o,r]=Qi();let i=na(t,["$$slots","$$events","$$legacy"]),a=Bn(null);To(()=>{n()&&Zn(a,n(),!0)});let s,l=Bn(eo([])),d=Bn(eo([])),u=null,c=null,p=null;To(()=>{if(mr(a)){Zn(l,mr(a).nodes.map(e=>fe(pe({},e),{data:fe(pe({},e.data),{onConfigOpen:t.openConfigSidebar})})),!0),Zn(d,mr(a).edges,!0);const e=mr(a).id!==p,n=t.pipelineId!==s;t.pipelineId&&(e||n)&&(u&&(clearTimeout(u),u=null),c&&(c.abort(),c=null),p=mr(a).id,s=i.pipelineId,u="undefined"!=typeof requestIdleCallback?requestIdleCallback(()=>{h()},{timeout:500}):setTimeout(()=>{h()},300))}});const f=function(e,t){let n=null,o=0;return function(...r){const i=Date.now();!o||i-o>=t?(e(...r),o=i):(n&&clearTimeout(n),n=setTimeout(()=>{e(...r),o=Date.now()},t-(i-o)))}}(()=>{mr(a)&&tv.updateWorkflow(mr(a))},16);function h(){return xe(this,null,function*(){var e;if((null==(e=mr(a))?void 0:e.nodes)&&t.pipelineId)try{c=new AbortController;const e=yield Mw.loadNodeExecutionInfo(mr(a),t.pipelineId);if(null==c?void 0:c.signal.aborted)return;const n={status:"idle",executionCount:0,isExecuting:!1},o=mr(a).nodes.map(o=>fe(pe({},o),{data:fe(pe({},o.data),{executionInfo:e[o.id]||n,onConfigOpen:t.openConfigSidebar})}));Zn(l,o,!0),mr(a).nodes=o,c=null}catch(n){n instanceof Error&&"AbortError"!==n.name&&console.error("Failed to load node execution info:",n)}})}function g(){mr(a)&&(Zn(a,Iw.updateWorkflow(mr(a),mr(l),mr(d)),!0),f())}let v=Bn(eo([])),m=Bn(eo([]));To(()=>{const e=!function(e,t){var n,o,r,i;if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++){const s=e[a],l=t[a];if((null==s?void 0:s.id)!==(null==l?void 0:l.id))return!1;if((null==(n=null==s?void 0:s.position)?void 0:n.x)!==(null==(o=null==l?void 0:l.position)?void 0:o.x)||(null==(r=null==s?void 0:s.position)?void 0:r.y)!==(null==(i=null==l?void 0:l.position)?void 0:i.y))return!1;if((null==s?void 0:s.selected)!==(null==l?void 0:l.selected))return!1}return!0}(mr(l),mr(v)),t=!function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const o=e[n],r=t[n];if((null==o?void 0:o.id)!==(null==r?void 0:r.id)||(null==o?void 0:o.source)!==(null==r?void 0:r.source)||(null==o?void 0:o.target)!==(null==r?void 0:r.target)||(null==o?void 0:o.sourceHandle)!==(null==r?void 0:r.sourceHandle)||(null==o?void 0:o.targetHandle)!==(null==r?void 0:r.targetHandle))return!1}return!0}(mr(d),mr(m));(e||t)&&mr(a)&&(g(),Zn(v,[...mr(l)],!0),Zn(m,[...mr(d)],!0))});const y={universalNode:pw,workflowNode:pw,note:pw,simple:pw,square:pw,tool:pw,gateway:pw},w={};function b(e){return xe(this,null,function*(){yield vr(),function(){xe(this,null,function*(){yield vr();const e=Ow.updateEdgeStyles(mr(d),mr(l));mr(a)&&(Zn(a,Iw.updateWorkflow(mr(a),mr(l),e),!0),f())})}(),mr(a)&&g()})}function x(e){const t=new Set(e.nodes.map(e=>e.id));Zn(d,mr(d).filter(e=>!t.has(e.source)&&!t.has(e.target)),!0),mr(a)&&g()}function k(e,t){return xe(this,null,function*(){const n=Mw.createNodeFromDrop(e,t,mr(l));n&&mr(a)?(Zn(a,Iw.addNode(mr(a),n),!0),f(),yield vr()):mr(a)||console.warn("No currentWorkflow available for new node")})}To(()=>{t.endpointConfig&&Pw.configureEndpoints(t.endpointConfig)}),function(e,t){Gt(t,!0);let n=Bn(Tp({props:{},nodes:[],edges:[]}));Xt(Sp,{provider:!0,getStore:()=>mr(n),setStore:e=>{Zn(n,e)}}),ei(()=>{mr(n).reset()});var o=Rr();Jr(vo(o),()=>{var e;return null!=(e=t.children)?e:Je}),Lr(e,o),Jt()}(e,{children:(e,t)=>{var n=Lw(),o=go(n),r=go(o);!function(e,t){Gt(t,!0);const{screenToFlowPosition:n}=of();var o=ng();Jr(go(o),()=>t.children),Er("dragover",o,function(e){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy")}),Er("drop",o,function(e){var o;e.preventDefault();const r=null==(o=e.dataTransfer)?void 0:o.getData("application/json");if(r){const o=n({x:e.clientX,y:e.clientY});t.ondrop(r,o)}}),Lr(e,o),Jt()}(go(r),{ondrop:k,children:(e,t)=>{var n=Dw(),o=vo(n);vf(o,{get nodeTypes(){return y},get defaultEdgeOptions(){return w},onconnect:b,ondelete:x,minZoom:.2,maxZoom:3,clickConnect:!0,elevateEdgesOnSelect:!0,get connectionLineType(){return lu.Bezier},get connectionLineComponent(){return Dg},snapGrid:[10,10],fitView:!0,get nodes(){return mr(l)},set nodes(e){Zn(l,e,!0)},get edges(){return mr(d)},set edges(e){Zn(d,e,!0)},children:(e,t)=>{var n=zw(),o=vo(n);$f(o,{});var r=mo(o,2);If(r,{gap:10,bgColor:"var(--flowdrop-background-color)",get variant(){return Sf.Dots}}),Wf(mo(r,2),{}),Lr(e,n)},$$slots:{default:!0}});var r=mo(o,2),i=e=>{tg(e,{title:"Drag components here to start building",description:"Use the sidebar to add components to your workflow",iconName:"mdi:graph"})};ni(r,e=>{0===mr(l).length&&e(i)}),Lr(e,n)},$$slots:{default:!0}});var i=go(mo(r,2)),a=go(i),s=go(a),u=go(s),c=mo(s,4),p=go(c),f=mo(c,2),h=e=>{Lr(e,Rw())};ni(f,e=>{Iw.checkWorkflowCycles(mr(l),mr(d))&&e(h)}),No(()=>{var e,t;Br(u,`${null!=(e=mr(l).length)?e:""} nodes`),Br(p,`${null!=(t=mr(d).length)?t:""} connections`)}),Lr(e,n)},$$slots:{default:!0}}),Jt(),r()}var Ww=Ir('<p class="flowdrop-text--xs flowdrop-text--gray"> </p>'),qw=Ir('<div class="flowdrop-loading svelte-1k9ngdq"><div></div> <!></div>');function Fw(e,t){Gt(t,!0);let n=zn(()=>t.size||"md"),o=zn(()=>t.text||"Loading..."),r=zn(()=>!1!==t.showText);var i=qw(),a=go(i),s=mo(a,2),l=e=>{var t=Ww(),n=go(t);No(()=>Br(n,mr(o))),Lr(e,t)};ni(s,e=>{mr(r)&&e(l)}),No(()=>{var e;return yi(a,1,`flowdrop-spinner flowdrop-spinner--${null!=(e=mr(n))?e:""}`,"svelte-1k9ngdq")}),Lr(e,i),Jt()}function Hw(){}var Uw=Ir('<div class="flowdrop-hero"><div class="flowdrop-hero__content"><div class="flowdrop-hero__icon">📦</div> <h3 class="flowdrop-hero__title">No node types available</h3> <p class="flowdrop-hero__description">Node type definitions will appear here</p> <div class="flowdrop-mb--4"><!></div></div></div>'),Vw=Ir('<div class="flowdrop-mb--4"><!></div>'),Bw=Ir('<div class="flowdrop-hero"><div class="flowdrop-hero__content"><div class="flowdrop-hero__icon">🔍</div> <h3 class="flowdrop-hero__title">No components found</h3> <p class="flowdrop-hero__description">Try adjusting your search</p> <!></div></div>'),Kw=Ir('<div class="flowdrop-card flowdrop-card--compact flowdrop-node-item svelte-t4x2yp" draggable="true" role="button" tabindex="0"><div class="flowdrop-card__body flowdrop-p--1 flowdrop-py--1 svelte-t4x2yp"><div class="flowdrop-flex flowdrop-gap--2 flowdrop-items--center svelte-t4x2yp"><div class="flowdrop-node-icon svelte-t4x2yp"><!></div> <h4 class="flowdrop-text--sm flowdrop-font--medium flowdrop-truncate flowdrop-flex--1 svelte-t4x2yp"> </h4></div> <p class="flowdrop-text--xs flowdrop-text--gray flowdrop-truncate flowdrop-mt--1 flowdrop-ml--0 svelte-t4x2yp"> </p></div></div>'),Zw=Ir('<div class="flowdrop-node-list svelte-t4x2yp"></div>'),Yw=Ir('<div class="flowdrop-p--4 svelte-t4x2yp"><div class="flowdrop-divider"><h3 class="flowdrop-divider__text">Search Results</h3></div> <!></div>'),Xw=(e,t,n)=>t(mr(n)),Gw=(e,t,n)=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t(mr(n)))},Jw=Ir('<div class="flowdrop-card flowdrop-card--compact flowdrop-node-item svelte-t4x2yp" draggable="true" role="button" tabindex="0"><div class="flowdrop-card__body flowdrop-p--1 flowdrop-py--1 svelte-t4x2yp"><div class="flowdrop-flex flowdrop-gap--2 flowdrop-items--center svelte-t4x2yp"><div class="flowdrop-node-icon svelte-t4x2yp"><!></div> <h4 class="flowdrop-text--sm flowdrop-font--medium flowdrop-truncate flowdrop-flex--1 svelte-t4x2yp"> </h4></div> <p class="flowdrop-text--xs flowdrop-text--gray flowdrop-truncate flowdrop-mt--1 flowdrop-ml--0 svelte-t4x2yp"> </p></div></div>'),Qw=Ir('<details class="flowdrop-details"><summary class="flowdrop-details__summary"><div class="flowdrop-flex flowdrop-gap--2 flowdrop-items--center svelte-t4x2yp"><span class="flowdrop-node-icon svelte-t4x2yp"><!></span> <span> </span></div> <div class="flowdrop-badge flowdrop-badge--secondary"> </div></summary> <div class="flowdrop-details__content"><div class="flowdrop-node-list svelte-t4x2yp"></div></div></details>'),eb=Ir('<div class="flowdrop-p--4 svelte-t4x2yp"><div class="flowdrop-category-list svelte-t4x2yp"></div></div>'),tb=Ir('<span class="flowdrop-text--xs flowdrop-text--gray">Loading components...</span>'),nb=Ir('<span class="flowdrop-text--xs flowdrop-text--gray"> </span> <span class="flowdrop-text--xs flowdrop-text--gray"> </span>',1),ob=Ir('<div class="flowdrop-sidebar flowdrop-sidebar--container svelte-t4x2yp" role="complementary" aria-label="Components sidebar"><div class="flowdrop-sidebar__header svelte-t4x2yp"><div class="flowdrop-sidebar__title svelte-t4x2yp"><h2 class="flowdrop-text--lg flowdrop-font--bold svelte-t4x2yp">Components</h2></div></div> <div class="flowdrop-sidebar__search svelte-t4x2yp"><div class="flowdrop-join flowdrop-w--full svelte-t4x2yp"><div class="flowdrop-join__item flowdrop-flex--1 svelte-t4x2yp"><input type="text" placeholder="Search components..." class="flowdrop-input flowdrop-join__item flowdrop-w--full svelte-t4x2yp"/></div> <button class="flowdrop-btn flowdrop-join__item svelte-t4x2yp" aria-label="Search components"><!></button></div></div> <div class="flowdrop-sidebar__content svelte-t4x2yp"><!></div> <div class="flowdrop-sidebar__footer svelte-t4x2yp"><div class="flowdrop-flex flowdrop-gap--4"><div class="flowdrop-flex flowdrop-gap--4"><!></div></div></div></div>');function rb(e,t){Gt(t,!0);let n=Bn(""),o=eo(t.selectedCategory||"all"),r=zn(s),i=zn(a);function a(){const e=t.nodes||[];if(0===e.length)return[];const n=new hp;return e.forEach(e=>n.add(e.category)),Array.from(n).sort()}function s(){let e=t.nodes||[];if("all"!==o&&(e=e.filter(e=>e.category===o)),mr(n).trim()){const t=mr(n).toLowerCase();e=e.filter(e=>{var n;return e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||(null==(n=e.tags)?void 0:n.some(e=>e.toLowerCase().includes(t)))})}return[...e].sort((e,t)=>e.name.localeCompare(t.name))}function l(e,t){if(!e.dataTransfer)return;let n={};t.configSchema&&"object"==typeof t.configSchema&&t.configSchema.properties&&"object"==typeof t.configSchema.properties&&Object.entries(t.configSchema.properties).forEach(([e,t])=>{t&&"object"==typeof t&&"default"in t&&(n[e]=t.default)});const o={type:"node",nodeType:t.id,nodeData:{label:t.name,config:n,metadata:t}},r=JSON.stringify(o);if(e.dataTransfer.setData("application/json",r),e.dataTransfer.setData("text/plain",t.name),e.dataTransfer.effectAllowed="copy",e.target){const t=e.target.getBoundingClientRect();e.dataTransfer.setDragImage(e.target,t.width/2,t.height/2)}}function d(e){}function u(e){let o=function(e){return[...t.nodes||[]].filter(t=>t.category===e).sort((e,t)=>e.name.localeCompare(t.name))}(e);if(mr(n).trim()){const e=mr(n).toLowerCase();o=o.filter(t=>{var n;return t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||(null==(n=t.tags)?void 0:n.some(t=>t.toLowerCase().includes(e)))})}return o}var c=ob(),p=mo(go(c),2),f=go(p),h=go(f),g=go(h);g.__input=[Hw],Qh(go(mo(h,2)),{icon:"mdi:magnify",class:"flowdrop-icon"});var v=mo(p,2),m=go(v),y=e=>{var t=Uw(),n=go(t),o=mo(go(n),6);Fw(go(o),{size:"md",text:"Loading from server..."}),Lr(e,t)},w=e=>{var o=Rr(),a=vo(o),s=e=>{var n=Yw(),o=mo(go(n),2),i=e=>{var n=Bw(),o=go(n),r=mo(go(o),6),i=e=>{var t=Vw();Fw(go(t),{size:"sm",text:"Loading components..."}),Lr(e,t)};ni(r,e=>{var n;0===(null==(n=t.nodes)?void 0:n.length)&&e(i)}),Lr(e,n)},a=e=>{var t=Zw();ri(t,21,()=>mr(r),e=>e.id,(e,t)=>{var n=Kw(),o=go(n),r=go(o),i=go(r),a=go(i);{let e=zn(()=>sv(mr(t).icon,mr(t).category));Qh(a,{get icon(){return mr(e)}})}var s=go(mo(i,2)),d=go(mo(r,2));No(e=>{bi(i,`background-color: ${null!=e?e:""}`),Br(s,mr(t).name),Br(d,mr(t).description)},[()=>gg(mr(t).category)]),Er("dragstart",n,e=>l(e,mr(t))),Lr(e,n)}),Lr(e,t)};ni(o,e=>{0===mr(r).length?e(i):e(a,!1)}),Lr(e,n)},c=e=>{var t=eb();ri(go(t),20,()=>mr(i),e=>e,(e,t)=>{const n=zn(()=>u(t));var o=Rr(),r=vo(o),i=e=>{var o=Qw(),r=go(o),i=go(r),a=go(i),s=go(a);{let e=zn(()=>lv(t));Qh(s,{get icon(){return mr(e)}})}var u=go(mo(a,2)),c=go(mo(i,2));ri(go(mo(r,2)),21,()=>mr(n),e=>e.id,(e,t)=>{var n=Jw();n.__click=[Xw,d,t],n.__keydown=[Gw,d,t];var o=go(n),r=go(o),i=go(r),a=go(i);{let e=zn(()=>sv(mr(t).icon,mr(t).category));Qh(a,{get icon(){return mr(e)}})}var s=go(mo(i,2)),u=go(mo(r,2));No(e=>{bi(i,`background-color: ${null!=e?e:""}`),Br(s,mr(t).name),Br(u,mr(t).description)},[()=>gg(mr(t).category)]),Er("dragstart",n,e=>l(e,mr(t))),Lr(e,n)}),No((e,t)=>{bi(a,`background-color: ${null!=e?e:""}`),Br(u,t),Br(c,mr(n).length)},[()=>gg(t),()=>function(e){return{inputs:"Inputs",outputs:"Outputs",prompts:"Prompts",models:"Models",processing:"Processing",logic:"Logic",data:"Data",tools:"Tools",helpers:"Helpers","vector stores":"Vector Stores",embeddings:"Embeddings",memories:"Memories",agents:"Agents",ai:"AI",bundles:"Bundles"}[e]||e}(t)]),Lr(e,o)};ni(r,e=>{mr(n).length>0&&e(i)}),Lr(e,o)}),Lr(e,t)};ni(a,e=>{mr(n).trim()?e(s):e(c,!1)},!0),Lr(e,o)};ni(m,e=>{var n;0===(null==(n=t.nodes)?void 0:n.length)?e(y):e(w,!1)});var b=go(mo(v,2)),x=go(b),k=go(x),_=e=>{Lr(e,tb())},S=e=>{var n=nb(),o=vo(n),i=go(o),a=go(mo(o,2));No(()=>{var e,n,o;Br(i,`Total: ${null!=(n=(null==(e=t.nodes)?void 0:e.length)||0)?n:""} components`),Br(a,`Showing: ${null!=(o=mr(r).length)?o:""}`)}),Lr(e,n)};ni(k,e=>{var n;0===(null==(n=t.nodes)?void 0:n.length)?e(_):e(S,!1)}),Ri(g,()=>mr(n),e=>Zn(n,e)),Lr(e,c),Jt()}$r(["input","click","keydown"]);var ib=Ir("<div><!></div>");function ab(e,t){Gt(t,!0);const n={sm:{iconSize:"12px",backgroundSize:"20px",backgroundRadius:"0.25rem"},md:{iconSize:"16px",backgroundSize:"24px",backgroundRadius:"0.375rem"},lg:{iconSize:"24px",backgroundSize:"48px",backgroundRadius:"0.5rem"},xl:{iconSize:"28px",backgroundSize:"56px",backgroundRadius:"0.75rem"}}[t.size||"md"],o=zn(()=>My(t.status)),r=zn(()=>Iy(t.status));var i=Rr(),a=vo(i),s=e=>{var i=ib();Qh(go(i),{get icon(){return mr(r)},class:"status-icon__icon"}),No(()=>{var e,r,a,s,l;yi(i,1,`status-icon status-icon--with-background ${null!=(e=t.class||"")?e:""}`,"svelte-c8p61c"),bi(i,`\n\t\t\t--icon-size: ${null!=(r=n.iconSize)?r:""};\n\t\t\t--background-size: ${null!=(a=n.backgroundSize)?a:""};\n\t\t\t--background-radius: ${null!=(s=n.backgroundRadius)?s:""};\n\t\t\t--status-color: ${null!=(l=mr(o))?l:""};\n\t\t`),Mi(i,"title",t.status)}),Lr(e,i)},l=e=>{{let i=zn(()=>t.class||"");Qh(e,{get icon(){return mr(r)},get class(){var e;return`status-icon status-icon--icon-only ${null!=(e=mr(i))?e:""}`},get style(){var e,t;return`\n\t\t\t--icon-size: ${null!=(e=n.iconSize)?e:""};\n\t\t\t--status-color: ${null!=(t=mr(o))?t:""};\n\t\t`}})}};ni(a,e=>{t.showBackground?e(s):e(l,!1)}),Lr(e,i),Jt()}var sb=(e,t,n,o)=>{const r=e.currentTarget.checked,i=Array.isArray(mr(t)[n()])?[...mr(t)[n()]]:[];r?i.includes(String(mr(o)))||(mr(t)[n()]=[...i,String(mr(o))]):mr(t)[n()]=i.filter(e=>e!==String(mr(o)))},lb=Ir('<label class="flowdrop-config-sidebar__checkbox-item svelte-z7psbx"><input type="checkbox" class="flowdrop-config-sidebar__checkbox svelte-z7psbx"/> <span class="flowdrop-config-sidebar__checkbox-label svelte-z7psbx"> </span></label>'),db=Ir('<div class="flowdrop-config-sidebar__checkbox-group svelte-z7psbx"></div>'),ub=Ir("<option> </option>"),cb=Ir('<select class="flowdrop-config-sidebar__select svelte-z7psbx"></select>'),pb=Ir('<textarea class="flowdrop-config-sidebar__textarea svelte-z7psbx" rows="4"></textarea>'),fb=Ir('<input type="text" class="flowdrop-config-sidebar__input svelte-z7psbx"/>'),hb=Ir('<input type="number" class="flowdrop-config-sidebar__input svelte-z7psbx"/>'),gb=(e,t,n)=>{mr(t)[n()]=e.currentTarget.checked},vb=Ir('<input type="checkbox" class="flowdrop-config-sidebar__checkbox svelte-z7psbx"/>'),mb=Ir("<option> </option>"),yb=Ir('<select class="flowdrop-config-sidebar__select svelte-z7psbx"><!></select>'),wb=Ir('<input type="text" class="flowdrop-config-sidebar__input svelte-z7psbx"/>'),bb=Ir('<p class="flowdrop-config-sidebar__field-description svelte-z7psbx"> </p>'),xb=Ir('<div class="flowdrop-config-sidebar__field svelte-z7psbx"><label class="flowdrop-config-sidebar__field-label svelte-z7psbx"> </label> <!> <!></div>'),kb=Ir('<div class="flowdrop-config-sidebar__debug svelte-z7psbx"><p><strong>Debug - Config Schema:</strong></p> <pre class="svelte-z7psbx"> </pre></div>'),_b=Ir('<div class="flowdrop-config-sidebar__form svelte-z7psbx"><!></div> <div class="flowdrop-config-sidebar__footer svelte-z7psbx"><button class="flowdrop-config-sidebar__button flowdrop-config-sidebar__button--secondary svelte-z7psbx">Cancel</button> <button class="flowdrop-config-sidebar__button flowdrop-config-sidebar__button--primary svelte-z7psbx">Save Changes</button></div>',1),Sb=Ir('<p class="flowdrop-config-sidebar__no-config svelte-z7psbx">No configuration options available for this node.</p>');function Tb(e,t){Gt(t,!0);const n=zn(()=>{var e;return null==(e=t.node.data.metadata)?void 0:e.configSchema}),o=zn(()=>t.node.data.config||{});let r=Bn(eo({}));function i(){var e;const o=document.querySelector(".flowdrop-config-sidebar__form"),i=pe({},mr(r));if(o){o.querySelectorAll("input, select, textarea").forEach(e=>{if(e.id)if("checkbox"===e.type)i[e.id]=e.checked;else if("number"===e.type)i[e.id]=e.value?Number(e.value):e.value;else if("hidden"===e.type)try{const t=JSON.parse(e.value);i[e.id]=t}catch(b_){i[e.id]=e.value}else i[e.id]=e.value})}t.node.data.config&&(null==(e=mr(n))?void 0:e.properties)&&Object.entries(mr(n).properties).forEach(([e,n])=>{"hidden"===n.format&&!(e in i)&&e in t.node.data.config&&(i[e]=t.node.data.config[e])}),t.onSave(i)}To(()=>{var e;if(null==(e=mr(n))?void 0:e.properties){const e={};Object.entries(mr(n).properties).forEach(([t,n])=>{const r=n;e[t]=void 0!==mr(o)[t]?mr(o)[t]:r.default}),Zn(r,e,!0)}});var a=Rr(),s=vo(a),l=e=>{var o=_b(),a=vo(o),s=go(a),l=e=>{var t=Rr();ri(vo(t),17,()=>Object.entries(mr(n).properties),([e,t])=>e,(e,t)=>{var n=zn(()=>nt(mr(t),2));let o=()=>mr(n)[0];const i=zn(()=>mr(n)[1]);var a=Rr(),s=vo(a),l=e=>{var t=xb(),n=go(t),a=go(n),s=mo(n,2),l=e=>{var t=db();ri(t,21,()=>mr(i).enum,e=>String(e),(e,t)=>{var n=lb(),i=go(n);i.__change=[sb,r,o,t];var a=go(mo(i,2));No((e,t,n)=>{Ai(i,e),Ni(i,t),Br(a,n)},[()=>String(mr(t)),()=>Array.isArray(mr(r)[o()])&&mr(r)[o()].includes(String(mr(t))),()=>String(mr(t))]),Lr(e,n)}),Lr(e,t)},d=e=>{var t=Rr(),n=vo(t),a=e=>{var t=cb();ri(t,21,()=>mr(i).enum,e=>String(e),(e,t)=>{var n=ub(),o=go(n),r={};No((e,t)=>{var i;Br(o,e),r!==(r=t)&&(n.value=null!=(i=n.__value=t)?i:"")},[()=>String(mr(t)),()=>String(mr(t))]),Lr(e,n)}),No(()=>Mi(t,"id",o())),_i(t,()=>mr(r)[o()],e=>mr(r)[o()]=e),Lr(e,t)},s=e=>{var t=Rr(),n=vo(t),a=e=>{var t=pb();No(e=>{Mi(t,"id",o()),Mi(t,"placeholder",e)},[()=>String(mr(i).placeholder||"")]),Ri(t,()=>mr(r)[o()],e=>mr(r)[o()]=e),Lr(e,t)},s=e=>{var t=Rr(),n=vo(t),a=e=>{var t=fb();No(e=>{Mi(t,"id",o()),Mi(t,"placeholder",e)},[()=>String(mr(i).placeholder||"")]),Ri(t,()=>mr(r)[o()],e=>mr(r)[o()]=e),Lr(e,t)},s=e=>{var t=Rr(),n=vo(t),a=e=>{var t=hb();No(e=>{Mi(t,"id",o()),Mi(t,"placeholder",e)},[()=>String(mr(i).placeholder||"")]),Ri(t,()=>mr(r)[o()],e=>mr(r)[o()]=e),Lr(e,t)},s=e=>{var t=Rr(),n=vo(t),a=e=>{var t=vb();t.__change=[gb,r,o],No(e=>{Mi(t,"id",o()),Ni(t,e)},[()=>Boolean(mr(r)[o()]||mr(i).default||!1)]),Lr(e,t)},s=e=>{var t=Rr(),n=vo(t),a=e=>{var t=yb(),n=go(t),a=e=>{var t=Rr();ri(vo(t),17,()=>mr(i).options,e=>String(e.value),(e,t)=>{const n=zn(()=>mr(t));var o=mb(),r=go(o),i={};No((e,t)=>{var n;Br(r,e),i!==(i=t)&&(o.value=null!=(n=o.__value=t)?n:"")},[()=>String(mr(n).label),()=>String(mr(n).value)]),Lr(e,o)}),Lr(e,t)};ni(n,e=>{mr(i).options&&e(a)}),No(()=>Mi(t,"id",o())),_i(t,()=>mr(r)[o()],e=>mr(r)[o()]=e),Lr(e,t)},s=e=>{var t=wb();No(e=>{Mi(t,"id",o()),Mi(t,"placeholder",e)},[()=>String(mr(i).placeholder||"")]),Ri(t,()=>mr(r)[o()],e=>mr(r)[o()]=e),Lr(e,t)};ni(n,e=>{"select"===mr(i).type||mr(i).options?e(a):e(s,!1)},!0),Lr(e,t)};ni(n,e=>{"boolean"===mr(i).type?e(a):e(s,!1)},!0),Lr(e,t)};ni(n,e=>{"number"===mr(i).type?e(a):e(s,!1)},!0),Lr(e,t)};ni(n,e=>{"string"===mr(i).type?e(a):e(s,!1)},!0),Lr(e,t)};ni(n,e=>{"string"===mr(i).type&&"multiline"===mr(i).format?e(a):e(s,!1)},!0),Lr(e,t)};ni(n,e=>{mr(i).enum?e(a):e(s,!1)},!0),Lr(e,t)};ni(s,e=>{mr(i).enum&&mr(i).multiple?e(l):e(d,!1)});var u=mo(s,2),c=e=>{var t=bb(),n=go(t);No(e=>Br(n,e),[()=>String(mr(i).description)]),Lr(e,t)};ni(u,e=>{mr(i).description&&e(c)}),No(()=>{Mi(n,"for",o()),Br(a,mr(i).title||mr(i).description||o())}),Lr(e,t)};ni(s,e=>{"hidden"!==mr(i).format&&e(l)}),Lr(e,a)}),Lr(e,t)},d=e=>{var t=kb(),o=mo(go(t),2),r=go(o);No(e=>Br(r,e),[()=>JSON.stringify(mr(n),null,2)]),Lr(e,t)};ni(s,e=>{mr(n).properties?e(l):e(d,!1)});var u=go(mo(a,2));u.__click=function(...e){var n;null==(n=t.onCancel)||n.apply(this,e)},mo(u,2).__click=i,Lr(e,o)},d=e=>{Lr(e,Sb())};ni(s,e=>{mr(n)?e(l):e(d,!1)}),Lr(e,a),Jt()}function Cb(e,t,n){t("save",{values:mr(n)})}function Eb(e,t){t("cancel")}function $b(e,t){"Escape"===e.key&&t()}function Ab(e,t){e.target===e.currentTarget&&t()}$r(["change","click"]);var Nb=Ir('<div class="config-modal-backdrop svelte-6j0qva" role="dialog" aria-modal="true" aria-labelledby="config-modal-title" tabindex="-1"><div class="config-modal svelte-6j0qva"><div class="config-modal__header svelte-6j0qva"><h2 id="config-modal-title" class="config-modal__title svelte-6j0qva"> </h2> <button type="button" class="config-modal__close-btn svelte-6j0qva" aria-label="Close configuration modal"><span aria-hidden="true">×</span></button></div> <div class="config-modal__content svelte-6j0qva"><!></div> <div class="config-modal__footer svelte-6j0qva"><button type="button" class="config-modal__btn config-modal__btn--secondary svelte-6j0qva">Cancel</button> <button type="button" class="config-modal__btn config-modal__btn--primary svelte-6j0qva">Save Configuration</button></div></div></div>');function Ob(e,t){Gt(t,!0);let n=zn(()=>pe({},t.configValues));const o=ti();function r(){o("close")}var i=Rr(),a=vo(i),s=e=>{var i=Nb();i.__click=[Ab,r],i.__keydown=[$b,r];var a=go(i),s=go(a),l=go(s),d=go(l);mo(l,2).__click=r;var u=mo(s,2);Tb(go(u),{get schema(){return t.configSchema},get values(){return mr(n)},$$events:{change:({detail:e})=>{Zn(n,e.values)}}});var c=go(mo(u,2));c.__click=[Eb,o],mo(c,2).__click=[Cb,o,n],No(()=>{var e;return Br(d,`Configure: ${null!=(e=t.nodeLabel)?e:""}`)}),Lr(e,i)};ni(a,e=>{t.isOpen&&e(s)}),Lr(e,i),Jt()}function Mb(e,t,n,o,r,i){var a;Zn(t,pe({},o.configValues),!0),Zn(r,!1),null==(a=o.onCancel)||a.call(o),i("cancel")}function Ib(e,t,n){"Escape"===e.key?t():"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&n()}$r(["click","keydown"]);var Pb=Ir('<div class="config-sidebar__changes-indicator svelte-7lz0nr" title="Unsaved changes"><!></div>'),zb=Ir('<div class="config-sidebar__detail-item svelte-7lz0nr"><span class="config-sidebar__detail-label svelte-7lz0nr">Version:</span> <span class="config-sidebar__detail-value svelte-7lz0nr"> </span></div>'),Db=Ir('<div class="config-sidebar__port config-sidebar__port--input svelte-7lz0nr"><!> <span class="config-sidebar__port-name svelte-7lz0nr"> </span> <span class="config-sidebar__port-type svelte-7lz0nr"> </span></div>'),Rb=Ir('<div class="config-sidebar__detail-section svelte-7lz0nr"><h4 class="config-sidebar__detail-subtitle svelte-7lz0nr">Input Ports</h4> <div class="config-sidebar__ports svelte-7lz0nr"></div></div>'),Lb=Ir('<div class="config-sidebar__port config-sidebar__port--output svelte-7lz0nr"><!> <span class="config-sidebar__port-name svelte-7lz0nr"> </span> <span class="config-sidebar__port-type svelte-7lz0nr"> </span></div>'),jb=Ir('<div class="config-sidebar__detail-section svelte-7lz0nr"><h4 class="config-sidebar__detail-subtitle svelte-7lz0nr">Output Ports</h4> <div class="config-sidebar__ports svelte-7lz0nr"></div></div>'),Wb=Ir('<span class="config-sidebar__tag svelte-7lz0nr"> </span>'),qb=Ir('<div class="config-sidebar__detail-section svelte-7lz0nr"><h4 class="config-sidebar__detail-subtitle svelte-7lz0nr">Tags</h4> <div class="config-sidebar__tags svelte-7lz0nr"></div></div>'),Fb=Ir('<div class="config-sidebar__separator svelte-7lz0nr"></div>'),Hb=Ir('<div class="config-sidebar__details svelte-7lz0nr"><h3 class="config-sidebar__section-title svelte-7lz0nr">Node Details</h3> <div class="config-sidebar__detail-grid svelte-7lz0nr"><div class="config-sidebar__detail-item svelte-7lz0nr"><span class="config-sidebar__detail-label svelte-7lz0nr">Type:</span> <span class="config-sidebar__detail-value svelte-7lz0nr"> </span></div> <div class="config-sidebar__detail-item svelte-7lz0nr"><span class="config-sidebar__detail-label svelte-7lz0nr">Category:</span> <span class="config-sidebar__detail-value config-sidebar__detail-value--badge svelte-7lz0nr"> </span></div> <!></div> <div class="config-sidebar__detail-item config-sidebar__detail-item--full svelte-7lz0nr"><span class="config-sidebar__detail-label svelte-7lz0nr">Description:</span> <p class="config-sidebar__detail-description svelte-7lz0nr"> </p></div> <!> <!> <!></div> <!>',1),Ub=Ir('<input type="hidden" class="svelte-7lz0nr"/>'),Vb=Ir('<span class="config-sidebar__required svelte-7lz0nr">*</span>'),Bb=Ir('<p class="config-sidebar__description svelte-7lz0nr"> </p>'),Kb=(e,t,n,o,r,i)=>{const a=e.target.checked,s=Array.isArray(mr(t)[n()])?[...mr(t)[n()]]:[];a?s.includes(o)||r(n(),[...s,o],i().type):r(n(),s.filter(e=>e!==o),i().type)},Zb=Ir('<div class="config-sidebar__checkbox-wrapper svelte-7lz0nr"><input type="checkbox" class="config-sidebar__checkbox svelte-7lz0nr"/> <label class="config-sidebar__checkbox-label svelte-7lz0nr"> </label></div>'),Yb=Ir('<div class="config-sidebar__checkbox-group svelte-7lz0nr"></div>'),Xb=(e,t,n,o)=>t(n(),e.target.value,o().type),Gb=Ir('<option class="svelte-7lz0nr"> </option>'),Jb=Ir('<select class="config-sidebar__select svelte-7lz0nr"></select>'),Qb=(e,t,n,o)=>t(n(),e.target.checked,o().type),ex=Ir('<div class="config-sidebar__checkbox-wrapper svelte-7lz0nr"><input type="checkbox" class="config-sidebar__checkbox svelte-7lz0nr"/> <label class="config-sidebar__checkbox-label svelte-7lz0nr"> </label></div>'),tx=(e,t,n,o)=>t(n(),e.target.value,o().type),nx=Ir('<textarea class="config-sidebar__textarea svelte-7lz0nr" rows="4"></textarea>'),ox=(e,t,n,o)=>t(n(),e.target.value,o().type),rx=Ir('<input class="config-sidebar__input svelte-7lz0nr"/>'),ix=Ir('<div class="config-sidebar__field svelte-7lz0nr"><label class="config-sidebar__label svelte-7lz0nr"> <!></label> <!> <!></div>'),ax=Ir('<div class="config-sidebar__config-section svelte-7lz0nr"><h3 class="config-sidebar__section-title svelte-7lz0nr">Configuration</h3> <form class="config-sidebar__form svelte-7lz0nr"></form></div>'),sx=Ir('<div class="config-sidebar__empty svelte-7lz0nr"><!> <p class="config-sidebar__empty-text svelte-7lz0nr">No configuration options available</p></div>'),lx=Ir('<p class="config-sidebar__changes-text svelte-7lz0nr">You have unsaved changes</p>'),dx=Ir('<div role="dialog" aria-label="Configuration sidebar" aria-modal="true" tabindex="-1"><div class="config-sidebar__header svelte-7lz0nr"><div class="config-sidebar__title-section svelte-7lz0nr"><h2 class="config-sidebar__title svelte-7lz0nr"> </h2> <!></div> <button class="config-sidebar__close-btn svelte-7lz0nr" title="Close sidebar (Esc)" aria-label="Close configuration sidebar"><!></button></div> <div class="config-sidebar__content svelte-7lz0nr"><!> <!></div> <div class="config-sidebar__footer svelte-7lz0nr"><div class="config-sidebar__actions svelte-7lz0nr"><button type="button" class="config-sidebar__btn config-sidebar__btn--secondary svelte-7lz0nr"><!> Reset</button> <button type="button" class="config-sidebar__btn config-sidebar__btn--primary svelte-7lz0nr" title="Save configuration (Ctrl+Enter)"><!> Save Changes</button></div> <!></div></div>');function ux(e,t){Gt(t,!0);const n=ti();let o=na(t,["$$slots","$$events","$$legacy"]),r=Bn(eo(pe({},t.configValues))),i=zn(()=>JSON.stringify(mr(r))!==JSON.stringify(t.configValues));function a(e,t,n){let o=t;switch(n){case"number":case"integer":o=""===t?void 0:Number(t);break;case"boolean":o=Boolean(t);break;case"array":try{o="string"==typeof t?JSON.parse(t):t}catch(b_){o=[]}break;case"object":try{o="string"==typeof t?JSON.parse(t):t}catch(b_){o={}}break;default:o=t}Zn(r,fe(pe({},mr(r)),{[e]:o}),!0)}function s(){var e,o;const i={};(null==(e=t.configSchema)?void 0:e.properties)&&Object.entries(t.configSchema.properties).forEach(([e,n])=>{"hidden"===n.format&&e in t.configValues&&(i[e]=t.configValues[e])});const a=pe(pe({},mr(r)),i);null==(o=t.onSave)||o.call(t,a),n("save",{config:a})}function l(){var e;if(mr(i)){if(!confirm("You have unsaved changes. Are you sure you want to close?"))return}Zn(r,pe({},t.configValues),!0),Zn(i,!1),null==(e=t.onClose)||e.call(t),n("close")}To(()=>{t.isOpen?(setTimeout(()=>{const e=document.querySelector(".config-sidebar--open");e&&e.focus()},100),document.body.style.overflow="hidden"):document.body.style.overflow=""});var d=dx();let u;d.__keydown=[Ib,l,s];var c=go(d),p=go(c),f=go(p),h=go(f),g=mo(f,2),v=e=>{var t=Pb();Qh(go(t),{icon:"mdi:circle"}),Lr(e,t)};ni(g,e=>{mr(i)&&e(v)});var m=mo(p,2);m.__click=l,Qh(go(m),{icon:"mdi:close"});var y=mo(c,2),w=go(y),b=e=>{var n=Hb(),o=vo(n),r=mo(go(o),2),i=go(r),a=mo(go(i),2),s=go(a),l=mo(i,2),d=mo(go(l),2),u=go(d),c=mo(l,2),p=e=>{var n=zb(),o=mo(go(n),2),r=go(o);No(()=>Br(r,t.nodeDetails.version)),Lr(e,n)};ni(c,e=>{t.nodeDetails.version&&e(p)});var f=mo(r,2),h=mo(go(f),2),g=go(h),v=mo(f,2),m=e=>{var n=Rb();ri(mo(go(n),2),21,()=>t.nodeDetails.inputs,e=>e.id,(e,t)=>{var n=Db(),o=go(n);Qh(o,{icon:"mdi:arrow-right",class:"config-sidebar__port-icon"});var r=mo(o,2),i=go(r),a=go(mo(r,2));No(()=>{Br(i,mr(t).name),Br(a,mr(t).dataType||mr(t).type)}),Lr(e,n)}),Lr(e,n)};ni(v,e=>{t.nodeDetails.inputs&&t.nodeDetails.inputs.length>0&&e(m)});var y=mo(v,2),w=e=>{var n=jb();ri(mo(go(n),2),21,()=>t.nodeDetails.outputs,e=>e.id,(e,t)=>{var n=Lb(),o=go(n);Qh(o,{icon:"mdi:arrow-left",class:"config-sidebar__port-icon"});var r=mo(o,2),i=go(r),a=go(mo(r,2));No(()=>{Br(i,mr(t).name),Br(a,mr(t).dataType||mr(t).type)}),Lr(e,n)}),Lr(e,n)};ni(y,e=>{t.nodeDetails.outputs&&t.nodeDetails.outputs.length>0&&e(w)});var b=mo(y,2),x=e=>{var n=qb();ri(mo(go(n),2),20,()=>t.nodeDetails.tags,e=>e,(e,t)=>{var n=Wb(),o=go(n);No(()=>Br(o,t)),Lr(e,n)}),Lr(e,n)};ni(b,e=>{t.nodeDetails.tags&&t.nodeDetails.tags.length>0&&e(x)});var k=mo(o,2),_=e=>{Lr(e,Fb())};ni(k,e=>{var n;(null==(n=t.configSchema)?void 0:n.properties)&&e(_)}),No(()=>{Br(s,t.nodeDetails.type),Br(u,t.nodeDetails.category),Br(g,t.nodeDetails.description)}),Lr(e,n)};ni(w,e=>{t.nodeDetails&&e(b)});var x=mo(w,2),k=e=>{var n=ax(),o=mo(go(n),2);ri(o,21,()=>Object.entries(t.configSchema.properties),([e,t])=>e,(e,n)=>{var o=zn(()=>nt(mr(n),2));let i=()=>mr(o)[0],s=()=>mr(o)[1];var l=Rr(),d=vo(l),u=e=>{var t=Ub();No(e=>{var n;Mi(t,"id",`config-${null!=(n=i())?n:""}`),Ai(t,e)},[()=>{var e,t,n,o,a;return"object"==typeof(null!=(e=mr(r)[i()])?e:s().default)?JSON.stringify(null!=(n=null!=(t=mr(r)[i()])?t:s().default)?n:{}):null!=(a=null!=(o=mr(r)[i()])?o:s().default)?a:""}]),Lr(e,t)},c=e=>{var n=ix(),o=go(n),l=go(o),d=mo(l),u=e=>{Lr(e,Vb())};ni(d,e=>{var n,o;(null==(o=null==(n=t.configSchema)?void 0:n.required)?void 0:o.includes(i()))&&e(u)});var c=mo(o,2),p=e=>{var t=Bb(),n=go(t);No(()=>Br(n,s().description)),Lr(e,t)};ni(c,e=>{s().description&&e(p)});var f=mo(c,2),h=e=>{var t=Yb();ri(t,20,()=>s().enum,e=>e,(e,t)=>{var n=Zb(),o=go(n);o.__change=[Kb,r,i,t,a,s];var l=mo(o,2),d=go(l);No(e=>{var n,r;Mi(o,"id",`config-${null!=(n=i())?n:""}-${null!=t?t:""}`),Ai(o,t),Ni(o,e),Mi(l,"for",`config-${null!=(r=i())?r:""}-${null!=t?t:""}`),Br(d,t)},[()=>Array.isArray(mr(r)[i()])&&mr(r)[i()].includes(t)]),Lr(e,n)}),Lr(e,t)},g=e=>{var t=Rr(),n=vo(t),o=e=>{var t,n=Jb();n.__change=[Xb,a,i,s],ri(n,20,()=>s().enum,e=>e,(e,t)=>{var n=Gb(),o=go(n),r={};No(()=>{var e;Br(o,t),r!==(r=t)&&(n.value=null!=(e=n.__value=t)?e:"")}),Lr(e,n)}),ki(n),No(()=>{var e,o,a,l,d,u,c,p;Mi(n,"id",`config-${null!=(e=i())?e:""}`),t!==(t=null!=(a=null!=(o=mr(r)[i()])?o:s().default)?a:"")&&(n.value=null!=(u=n.__value=null!=(d=null!=(l=mr(r)[i()])?l:s().default)?d:"")?u:"",xi(n,null!=(p=null!=(c=mr(r)[i()])?c:s().default)?p:""))}),Lr(e,n)},l=e=>{var t=Rr(),n=vo(t),o=e=>{var t=ex(),n=go(t);n.__change=[Qb,a,i,s];var o=mo(n,2),l=go(o);No(e=>{var t,r;Mi(n,"id",`config-${null!=(t=i())?t:""}`),Ni(n,e),Mi(o,"for",`config-${null!=(r=i())?r:""}`),Br(l,s().title||i())},[()=>{var e,t;return Boolean(null!=(t=null!=(e=mr(r)[i()])?e:s().default)&&t)}]),Lr(e,t)},l=e=>{var t=Rr(),n=vo(t),o=e=>{var t=nx();t.__input=[tx,a,i,s],No((e,n)=>{var o;Mi(t,"id",`config-${null!=(o=i())?o:""}`),Mi(t,"placeholder",e),Ai(t,n)},[()=>s().default?String(s().default):"",()=>{var e,t,n,o;return n=null!=(t=null!=(e=mr(r)[i()])?e:s().default)?t:"","object"===(o=s().type)||"array"===o?"string"==typeof n?n:JSON.stringify(n,null,2):String(null!=n?n:"")}]),Lr(e,t)},l=e=>{var t=rx();t.__input=[ox,a,i,s],No((e,n)=>{var o,a,l;Mi(t,"id",`config-${null!=(o=i())?o:""}`),Mi(t,"type",e),Mi(t,"placeholder",n),Ai(t,null!=(l=null!=(a=mr(r)[i()])?a:s().default)?l:""),Mi(t,"min",s().minimum),Mi(t,"max",s().maximum),Mi(t,"step","number"===s().type?"any":void 0)},[()=>function(e){switch(e){case"number":case"integer":return"number";case"boolean":return"checkbox";default:return"text"}}(s().type),()=>s().default?String(s().default):""]),Lr(e,t)};ni(n,e=>{!function(e){return"multiline"===e.format||"object"===e.type||"array"===e.type}(s())?e(l,!1):e(o)},!0),Lr(e,t)};ni(n,e=>{"boolean"===s().type?e(o):e(l,!1)},!0),Lr(e,t)};ni(n,e=>{s().enum?e(o):e(l,!1)},!0),Lr(e,t)};ni(f,e=>{s().enum&&s().multiple?e(h):e(g,!1)}),No(()=>{var e,t;Mi(o,"for",`config-${null!=(e=i())?e:""}`),Br(l,`${null!=(t=s().title||i())?t:""} `)}),Lr(e,n)};ni(d,e=>{"hidden"===s().format?e(u):e(c,!1)}),Lr(e,l)}),Er("submit",o,e=>{e.preventDefault(),s()}),Lr(e,n)},_=e=>{var n=Rr(),o=vo(n),r=e=>{var t=sx();Qh(go(t),{icon:"mdi:cog-outline",class:"config-sidebar__empty-icon"}),Lr(e,t)};ni(o,e=>{t.nodeDetails||e(r)},!0),Lr(e,n)};ni(x,e=>{var n;(null==(n=t.configSchema)?void 0:n.properties)?e(k):e(_,!1)});var S=go(mo(y,2)),T=go(S);T.__click=[Mb,r,o,t,i,n],Qh(go(T),{icon:"mdi:undo"});var C=mo(T,2);C.__click=s,Qh(go(C),{icon:"mdi:check"});var E=mo(S,2),$=e=>{Lr(e,lx())};ni(E,e=>{mr(i)&&e($)}),No(e=>{u=yi(d,1,"config-sidebar svelte-7lz0nr",null,u,e),Br(h,t.title),T.disabled=!mr(i),C.disabled=!mr(i)},[()=>({"config-sidebar--open":t.isOpen})]),Lr(e,d),Jt()}function cx(e,t){"Escape"===e.key&&t()}function px(e,t){t("clear")}$r(["keydown","click","change","input"]);var fx=Ir('<div class="logs-sidebar__count svelte-hwbso" title="Total log entries"><!> </div>'),hx=Ir('<div class="logs-sidebar__log-node svelte-hwbso"><!> </div>'),gx=Ir('<div><div class="logs-sidebar__log-header svelte-hwbso"><div class="logs-sidebar__log-level svelte-hwbso"><!> <span class="logs-sidebar__log-level-text svelte-hwbso"> </span></div> <div class="logs-sidebar__log-timestamp svelte-hwbso"> </div></div> <div class="logs-sidebar__log-message svelte-hwbso"> </div> <!></div>'),vx=Ir('<div class="logs-sidebar__logs svelte-hwbso"></div>'),mx=Ir('<div class="logs-sidebar__empty svelte-hwbso"><!> <p class="logs-sidebar__empty-text svelte-hwbso"><!></p></div>'),yx=Ir('<p class="logs-sidebar__info-text svelte-hwbso"> </p>'),wx=Ir('<div role="dialog" aria-label="Execution logs sidebar" aria-modal="true" tabindex="-1"><div class="logs-sidebar__header svelte-hwbso"><div class="logs-sidebar__title-section svelte-hwbso"><h2 class="logs-sidebar__title svelte-hwbso"><!></h2> <!></div> <button class="logs-sidebar__close-btn svelte-hwbso" title="Close logs sidebar (Esc)" aria-label="Close logs sidebar"><!></button></div> <div class="logs-sidebar__content svelte-hwbso"><!></div> <div class="logs-sidebar__footer svelte-hwbso"><div class="logs-sidebar__actions svelte-hwbso"><button type="button" class="logs-sidebar__btn logs-sidebar__btn--secondary svelte-hwbso"><!> Clear</button> <button type="button" class="logs-sidebar__btn logs-sidebar__btn--outline svelte-hwbso"><!> Export</button></div> <!></div></div>');function bx(e,t){Gt(t,!0);const n=ti();function o(){var e;null==(e=t.onClose)||e.call(t),n("close")}function r(e){return new Date(e).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3})}To(()=>{t.isOpen?(setTimeout(()=>{const e=document.querySelector(".logs-sidebar--open");e&&e.focus()},100),document.body.style.overflow="hidden"):document.body.style.overflow=""});let i=zn(()=>()=>t.selectedNode?t.logs.filter(e=>{var n;return e.nodeId===(null==(n=t.selectedNode)?void 0:n.id)}):t.logs);let a=Bn(void 0);To(()=>{mr(a)&&t.logs.length>0&&(mr(a).scrollTop=mr(a).scrollHeight)});var s=wx();let l;s.__keydown=[cx,o];var d=go(s),u=go(d),c=go(u),p=go(c),f=e=>{var n=Dr();No(()=>{var e;return Br(n,`Logs: ${null!=(e=t.selectedNode.data.label)?e:""}`)}),Lr(e,n)},h=e=>{Lr(e,Dr("Execution Logs"))};ni(p,e=>{t.selectedNode?e(f):e(h,!1)});var g=mo(c,2),v=e=>{var n=fx(),o=go(n);Qh(o,{icon:"mdi:file-document-outline"});var r=mo(o);No(()=>{var e;return Br(r,` ${null!=(e=t.logs.length)?e:""}`)}),Lr(e,n)};ni(g,e=>{t.logs.length>0&&e(v)});var m=mo(u,2);m.__click=o,Qh(go(m),{icon:"mdi:close"});var y=mo(d,2),w=go(y),b=e=>{var t=vx();ri(t,21,()=>mr(i)(),oi,(e,t)=>{var n=gx();let o;var i=go(n),a=go(i),s=go(a);{let e=zn(()=>function(e){switch(e){case"error":return"mdi:alert-circle";case"warning":return"mdi:alert";case"success":return"mdi:check-circle";case"info":return"mdi:information";default:return"mdi:circle"}}(mr(t).level)),n=zn(()=>function(e){switch(e){case"error":return"#ef4444";case"warning":return"#f59e0b";case"success":return"#10b981";case"info":return"#3b82f6";default:return"#6b7280"}}(mr(t).level));Qh(s,{get icon(){return mr(e)},get style(){var e;return`color: ${null!=(e=mr(n))?e:""}`}})}var l=go(mo(s,2)),d=go(mo(a,2)),u=mo(i,2),c=go(u),p=mo(u,2),f=e=>{var n=hx(),o=go(n);Qh(o,{icon:"mdi:graph"});var r=mo(o);No(()=>{var e;return Br(r,` Node: ${null!=(e=mr(t).nodeId)?e:""}`)}),Lr(e,n)};ni(p,e=>{mr(t).nodeId&&e(f)}),No((e,r,i)=>{o=yi(n,1,"logs-sidebar__log-entry svelte-hwbso",null,o,e),Br(l,r),Br(d,i),Br(c,mr(t).message)},[()=>({"logs-sidebar__log-entry--error":"error"===mr(t).level,"logs-sidebar__log-entry--warning":"warning"===mr(t).level,"logs-sidebar__log-entry--success":"success"===mr(t).level,"logs-sidebar__log-entry--info":"info"===mr(t).level}),()=>mr(t).level.toUpperCase(),()=>r(mr(t).timestamp)]),Lr(e,n)}),Ui(t,e=>Zn(a,e),()=>mr(a)),Lr(e,t)},x=e=>{var n=mx(),o=go(n);Qh(o,{icon:"mdi:file-document-outline",class:"logs-sidebar__empty-icon"});var r=go(mo(o,2)),i=e=>{Lr(e,Dr("No logs available for this node"))},a=e=>{Lr(e,Dr("No execution logs yet"))};ni(r,e=>{t.selectedNode?e(i):e(a,!1)}),Lr(e,n)};ni(w,e=>{mr(i)().length>0?e(b):e(x,!1)});var k=go(mo(y,2)),_=go(k);_.__click=[px,n],Qh(go(_),{icon:"mdi:delete"});var S=mo(_,2);S.__click=function(){const e=mr(i)().map(e=>`[${r(e.timestamp)}] ${e.level.toUpperCase()}: ${e.message}${e.nodeId?` (Node: ${e.nodeId})`:""}`).join("\n"),t=new Blob([e],{type:"text/plain"}),n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download=`pipeline-logs-${(new Date).toISOString().split("T")[0]}.txt`,o.click(),URL.revokeObjectURL(n)},Qh(go(S),{icon:"mdi:download"});var T=mo(k,2),C=e=>{var n=yx(),o=go(n);No(e=>{var n;return Br(o,`${null!=e?e:""} of ${null!=(n=t.logs.length)?n:""} log entries`)},[()=>mr(i)().length]),Lr(e,n)};ni(T,e=>{t.logs.length>0&&e(C)}),No(e=>{l=yi(s,1,"logs-sidebar svelte-hwbso",null,l,e),_.disabled=0===t.logs.length,S.disabled=0===t.logs.length},[()=>({"logs-sidebar--open":t.isOpen})]),Lr(e,s),Jt()}$r(["keydown","click"]);const xx=Ki({url:new URL("http://localhost:3000"),params:{},route:{id:null},status:200,error:null,data:{},form:null});var kx=Ir('<div class="flowdrop-logo svelte-10t2bvg"><svg viewBox="0 0 500 499.99999" version="1.1" id="svg47" width="500" height="500" xmlns="http://www.w3.org/2000/svg"><defs id="defs2"></defs><g id="g6669-7-7-3-3" transform="translate(472.2413,571.30469)"><rect style="fill:#f9f9f9;stroke:#000000;stroke-width:10px" x="-462.2413" y="-561.30469" width="480" height="480" rx="20" ry="20" id="rect15-5-0-8-9-7"></rect><g id="g6893-4-9-5-2" transform="matrix(1.2053353,0,0,1.2053353,-1246.7763,-599.46548)"><path style="fill:#000000;stroke-width:10;stroke-dasharray:none" d="M 850,120 V 310 Z" id="path1152-1-7-1-4"></path><path style="fill:#000000;stroke:#000000;stroke-width:8.29645;stroke-dasharray:none;stroke-opacity:1" d="M 850,110 V 310" id="path1160-08-5-7-1"></path><path style="fill:none;stroke:#000000;stroke-width:7.49273;stroke-dasharray:none;stroke-opacity:1" d="m 850,158.973 v 36.70355 8.15635 c 0,0 1.19184,39.5038 -36.01255,65.25076 -29.46481,20.39086 -52.3819,16.31269 -55.65576,65.25076 v 44.8599" id="path6610-14-5-4-8"></path><path style="fill:none;stroke:#000000;stroke-width:7.5253;stroke-dasharray:none;stroke-opacity:1" d="m 850,158.973 v 37.02335 8.22741 c 0,0 -1.19184,39.84799 36.01255,65.81929 29.46481,20.56853 52.3819,16.45482 55.65576,65.81929 v 45.25076" id="path6610-14-7-2-5-2"></path><path d="m 849.41763,64.456369 25.36824,31.087262 c 6.23336,6.364119 10.06921,15.063569 10.06921,24.656839 0,19.50109 -15.85132,35.30988 -35.42373,35.30988 -19.57241,0 -35.43242,-15.80879 -35.43242,-35.30988 0,-9.49405 3.75813,-18.11351 9.87536,-24.458879 z" style="fill:#009cde;stroke:#000000;stroke-width:8.29645;stroke-dasharray:none;paint-order:fill" id="path21-6-4-4-1-6"></path><circle style="fill:#f46351;stroke:#000000;stroke-width:8.29645;stroke-dasharray:none" cx="849.427" cy="326.5929" id="ellipse23-6-57-9-4-0" r="30"></circle><ellipse style="fill:#ccbaf4;stroke:#000000;stroke-width:8.29645;stroke-dasharray:none" cx="759.99994" cy="369.44669" id="ellipse25-7-9-4-6-3" rx="29.999952" ry="30.000004"></ellipse><ellipse style="fill:#ffc423;stroke:#000000;stroke-width:8.29645;stroke-dasharray:none" cx="939.99963" cy="369.44669" id="ellipse27-8-8-4-0-9" rx="29.999952" ry="30.000004"></ellipse></g></g><g id="g6663-4" transform="matrix(0.87890795,0,0,0.87890795,3770.6486,2734.4692)"></g></svg></div>');function _x(e){Lr(e,kx())}var Sx=Ir('<div class="flowdrop-navbar__status-container svelte-1k3sh4z"><div class="flowdrop-navbar__status svelte-1k3sh4z"><div class="flowdrop-navbar__status-indicator svelte-1k3sh4z"></div> <span class="flowdrop-navbar__status-text svelte-1k3sh4z">Connected</span></div></div>'),Tx=Ir('<a class="flowdrop-navbar__breadcrumb-link svelte-1k3sh4z"><!> <span class="flowdrop-navbar__breadcrumb-text svelte-1k3sh4z"> </span></a>'),Cx=Ir('<span class="flowdrop-navbar__breadcrumb-current svelte-1k3sh4z"><!> <span class="flowdrop-navbar__breadcrumb-text svelte-1k3sh4z"> </span></span>'),Ex=Ir('<li class="flowdrop-navbar__breadcrumb-separator svelte-1k3sh4z"><!></li>'),$x=Ir('<li class="flowdrop-navbar__breadcrumb-item svelte-1k3sh4z"><!></li> <!>',1),Ax=Ir('<div class="flowdrop-navbar__breadcrumb-container svelte-1k3sh4z"><nav class="flowdrop-navbar__breadcrumb svelte-1k3sh4z" aria-label="Breadcrumb"><ol class="flowdrop-navbar__breadcrumb-list svelte-1k3sh4z"></ol></nav></div>'),Nx=Ir('<div class="flowdrop-navbar__title-container svelte-1k3sh4z"><div class="flowdrop-navbar__title svelte-1k3sh4z"><h2 class="flowdrop-navbar__title-text svelte-1k3sh4z"> </h2></div></div>'),Ox=Ir('<span class="flowdrop-navbar__action-icon svelte-1k3sh4z"><!></span>'),Mx=Ir('<a><!> <span class="flowdrop-navbar__action-label svelte-1k3sh4z"> </span></a>'),Ix=(e,t)=>Zn(t,!mr(t)),Px=(e,t,n)=>{var o,r;null==(r=(o=mr(t)).onclick)||r.call(o,e),Zn(n,!1)},zx=Ir('<a class="flowdrop-navbar__dropdown-item svelte-1k3sh4z"><!> <span class="svelte-1k3sh4z"> </span></a>'),Dx=Ir('<div class="flowdrop-navbar__dropdown-menu svelte-1k3sh4z"></div>'),Rx=Ir('<div class="flowdrop-navbar__dropdown svelte-1k3sh4z"><button class="flowdrop-navbar__dropdown-trigger svelte-1k3sh4z" aria-haspopup="true"><!></button> <!></div>'),Lx=Ir("<!> <!>",1),jx=Ir('<div class="flowdrop-navbar svelte-1k3sh4z"><div class="flowdrop-navbar__start svelte-1k3sh4z"><div class="flowdrop-logo--container svelte-1k3sh4z"><div class="flowdrop-flex flowdrop-gap--3 svelte-1k3sh4z"><div class="flowdrop-logo--header svelte-1k3sh4z"><!></div> <div class="svelte-1k3sh4z"><h1 class="flowdrop-text--logo flowdrop-font--bold svelte-1k3sh4z">FlowDrop</h1> <p class="flowdrop-text--tagline flowdrop-text--gray svelte-1k3sh4z">Visual Workflow Manager</p></div></div></div></div> <div class="flowdrop-navbar__center svelte-1k3sh4z"><div class="flowdrop-navbar__center-content svelte-1k3sh4z"><!> <!></div></div> <div class="flowdrop-navbar__actions svelte-1k3sh4z"><!></div> <div class="flowdrop-navbar__end svelte-1k3sh4z"></div></div>');function Wx(e,t){Gt(t,!0);let n=ia(t,"primaryActions",19,()=>[]),o=ia(t,"showStatus",3,!0),r=ia(t,"breadcrumbs",19,()=>[]),i=Bn(!1);"undefined"!=typeof window&&document.addEventListener("click",function(e){e.target.closest(".flowdrop-navbar__dropdown")||Zn(i,!1)});var a=jx(),s=go(a),l=go(s),d=go(l),u=go(d);_x(go(u));var c=mo(s,2),p=go(c),f=go(p),h=e=>{Lr(e,Sx())};ni(f,e=>{o()&&e(h)});var g=mo(f,2),v=e=>{var t=Ax(),n=go(t);ri(go(n),21,r,oi,(e,t,n)=>{var o=$x(),i=vo(o),a=go(i),s=e=>{var n=Tx(),o=go(n),r=e=>{Qh(e,{get icon(){return mr(t).icon},class:"flowdrop-navbar__breadcrumb-icon"})};ni(o,e=>{mr(t).icon&&e(r)});var i=go(mo(o,2));No(()=>{Mi(n,"href",mr(t).href),Br(i,mr(t).label)}),Lr(e,n)},l=e=>{var n=Cx(),o=go(n),r=e=>{Qh(e,{get icon(){return mr(t).icon},class:"flowdrop-navbar__breadcrumb-icon"})};ni(o,e=>{mr(t).icon&&e(r)});var i=go(mo(o,2));No(()=>Br(i,mr(t).label)),Lr(e,n)};ni(a,e=>{mr(t).href&&n<r().length-1?e(s):e(l,!1)});var d=mo(i,2),u=e=>{var t=Ex();Qh(go(t),{icon:"mdi:chevron-right",class:"flowdrop-navbar__breadcrumb-chevron"}),Lr(e,t)};ni(d,e=>{n<r().length-1&&e(u)}),Lr(e,o)}),Lr(e,t)},m=e=>{var n=Rr(),o=vo(n),r=e=>{var n=Nx(),o=go(n),r=go(o),i=go(r);No(()=>Br(i,t.title)),Lr(e,n)};ni(o,e=>{t.title&&e(r)},!0),Lr(e,n)};ni(g,e=>{r().length>0?e(v):e(m,!1)});var y=go(mo(c,2)),w=e=>{var t=Lx(),o=vo(t),r=e=>{const t=zn(()=>n()[0]);var o=Mx();o.__click=function(...e){var n;null==(n=mr(t).onclick)||n.apply(this,e)};var r=go(o),i=e=>{var n=Ox();Qh(go(n),{get icon(){return mr(t).icon},class:"w-4 h-4"}),Lr(e,n)};ni(r,e=>{mr(t).icon&&e(i)});var a=go(mo(r,2));No(()=>{var e;Mi(o,"href",mr(t).href),yi(o,1,`flowdrop-navbar__primary-action flowdrop-navbar__action--${null!=(e=mr(t).variant||"primary")?e:""}`,"svelte-1k3sh4z"),Br(a,mr(t).label)}),Lr(e,o)};ni(o,e=>{n()[0]&&e(r)});var a=mo(o,2),s=e=>{var t=Rx(),o=go(t);o.__click=[Ix,i],Qh(go(o),{icon:"heroicons:chevron-down",class:"w-4 h-4"});var r=mo(o,2),a=e=>{var t=Dx();ri(t,21,()=>n().slice(1),e=>e.label,(e,t)=>{var n=zx();n.__click=[Px,t,i];var o=go(n),r=e=>{Qh(e,{get icon(){return mr(t).icon},class:"w-4 h-4"})};ni(o,e=>{mr(t).icon&&e(r)});var a=go(mo(o,2));No(()=>{Mi(n,"href",mr(t).href),Br(a,mr(t).label)}),Lr(e,n)}),Lr(e,t)};ni(r,e=>{mr(i)&&e(a)}),No(()=>Mi(o,"aria-expanded",mr(i))),Lr(e,t)};ni(a,e=>{n().length>1&&e(s)}),Lr(e,t)};ni(y,e=>{n().length>0&&e(w)}),Lr(e,a),Jt()}$r(["click"]);const qx=[{id:"sample-text-input",name:"Text Input",type:"simple",supportedTypes:["simple","square","default"],version:"1.0.0",description:"User text input field",category:"inputs",icon:"mdi:text-box",color:"#10b981",inputs:[],outputs:[{id:"text",name:"Text",type:"output",dataType:"string",description:"User entered text"}],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"simple",enum:["simple","square","default"],enumNames:["Simple (compact layout)","Square (square layout)","Default (standard workflow node)"]},placeholder:{type:"string",title:"Placeholder",description:"Placeholder text for the input field",default:"Enter text..."},defaultValue:{type:"string",title:"Default Value",description:"Default text value",default:""}}},tags:["input","text","user"]},{id:"sample-file-upload",name:"File Upload",type:"simple",supportedTypes:["simple","default"],version:"1.0.0",description:"File upload input with drag and drop support",category:"inputs",icon:"mdi:file-upload",color:"#f59e0b",inputs:[],outputs:[{id:"file",name:"File",type:"output",dataType:"file",description:"Uploaded file data"}],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"simple",enum:["simple","square","default"],enumNames:["Simple (compact layout)","Square (square layout)","Default (standard workflow node)"]},accept:{type:"string",title:"Accepted File Types",description:"Comma-separated list of accepted file types",default:"*"},maxSize:{type:"number",title:"Maximum File Size (MB)",description:"Maximum file size in megabytes",default:10}}},tags:["input","file","upload"]},{id:"sample-webhook",name:"Webhook",type:"simple",supportedTypes:["simple","default"],version:"1.0.0",description:"Receive data from external webhooks",category:"inputs",icon:"mdi:webhook",color:"#8b5cf6",inputs:[],outputs:[{id:"data",name:"Data",type:"output",dataType:"json",description:"Webhook payload data"}],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"simple",enum:["simple","square","default"],enumNames:["Simple (compact layout)","Square (square layout)","Default (standard workflow node)"]},endpoint:{type:"string",title:"Endpoint",description:"Webhook endpoint URL",default:""},method:{type:"string",title:"HTTP Method",description:"HTTP method for the webhook",default:"POST",enum:["GET","POST","PUT","DELETE"]}}},tags:["input","webhook","external"]},{id:"sample-chat-output",name:"Chat Output",type:"simple",supportedTypes:["simple","default"],version:"1.0.0",description:"Display chat-style output with formatting",category:"outputs",icon:"mdi:chat",color:"#8b5cf6",inputs:[{id:"message",name:"Message",type:"input",dataType:"string",required:!0,description:"Message to display"}],outputs:[],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"simple",enum:["simple","square","default"],enumNames:["Simple (compact layout)","Square (square layout)","Default (standard workflow node)"]},showTimestamp:{type:"boolean",title:"Show Timestamp",description:"Display timestamp with messages",default:!0},maxLength:{type:"number",title:"Maximum Length",description:"Maximum message length",default:2e3},markdown:{type:"boolean",title:"Markdown Support",description:"Enable markdown formatting",default:!0}}},tags:["output","chat","display"]},{id:"sample-text-output",name:"Text Output",type:"simple",supportedTypes:["simple","default"],version:"1.0.0",description:"Display plain text output",category:"outputs",icon:"mdi:text-box",color:"#10b981",inputs:[{id:"text",name:"Text",type:"input",dataType:"string",required:!0,description:"Text to display"}],outputs:[],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"simple",enum:["simple","square","default"],enumNames:["Simple (compact layout)","Square (square layout)","Default (standard workflow node)"]},showTimestamp:{type:"boolean",title:"Show Timestamp",description:"Display timestamp with output",default:!1},maxLength:{type:"number",title:"Maximum Length",description:"Maximum text length",default:1e3}}},tags:["output","text","display"]},{id:"sample-prompt",name:"Prompt",type:"simple",supportedTypes:["simple","default"],version:"1.0.0",description:"Template-based prompt with variables",category:"prompts",icon:"mdi:message-text",color:"#f59e0b",inputs:[{id:"variables",name:"Variables",type:"input",dataType:"json",required:!1,description:"Variables to inject into template"}],outputs:[{id:"prompt",name:"Prompt",type:"output",dataType:"string",description:"Formatted prompt text"}],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"simple",enum:["simple","square","default"],enumNames:["Simple (compact layout)","Square (square layout)","Default (standard workflow node)"]},template:{type:"string",title:"Template",description:"Prompt template with variables",default:"You are a helpful assistant. {input}"},variables:{type:"array",title:"Variables",description:"List of available variables",default:[]}}},tags:["prompt","template","variables"]},{id:"sample-structured-output",name:"Structured Output",type:"default",supportedTypes:["default"],version:"1.0.0",description:"Generate structured output from models",category:"prompts",icon:"mdi:table",color:"#6366f1",inputs:[{id:"model",name:"Model",type:"input",dataType:"json",required:!0,description:"Model to use"},{id:"message",name:"Message",type:"input",dataType:"string",required:!0,description:"Input message"}],outputs:[{id:"dataframe",name:"DataFrame",type:"output",dataType:"json",description:"Structured output as DataFrame"}],configSchema:{type:"object",properties:{schema:{type:"object",title:"Schema",description:"JSON schema for structured output",default:{}},outputType:{type:"string",title:"Output Type",description:"Type of structured output",default:"json",enum:["json","xml","yaml"]}}},tags:["prompt","structured","output","schema"]},{id:"sample-openai",name:"OpenAI",type:"default",supportedTypes:["default"],version:"1.0.0",description:"OpenAI GPT models for text generation",category:"models",icon:"mdi:robot",color:"#10a37f",inputs:[{id:"prompt",name:"Prompt",type:"input",dataType:"string",required:!0,description:"Input prompt for the model"},{id:"system_message",name:"System Message",type:"input",dataType:"string",required:!1,description:"System message to set behavior"}],outputs:[{id:"response",name:"Response",type:"output",dataType:"string",description:"Model response"},{id:"usage",name:"Usage",type:"output",dataType:"json",description:"Token usage information"}],configSchema:{type:"object",properties:{model:{type:"string",title:"Model",description:"OpenAI model to use",default:"gpt-4o-mini",enum:["gpt-4o-mini","gpt-5-chat-latest","gpt-4.1"]},temperature:{type:"number",title:"Temperature",description:"Creativity level (0-2)",default:.7,minimum:0,maximum:2},maxTokens:{type:"number",title:"Max Tokens",description:"Maximum tokens to generate",default:1e3,minimum:1,maximum:4e3},apiKey:{type:"string",title:"API Key",description:"OpenAI API key",default:""}}},tags:["model","openai","gpt","chat"]},{id:"sample-anthropic",name:"Anthropic",type:"default",supportedTypes:["default"],version:"1.0.0",description:"Anthropic Claude models for text generation",category:"models",icon:"mdi:brain",color:"#7c3aed",inputs:[{id:"prompt",name:"Prompt",type:"input",dataType:"string",required:!0,description:"Input prompt for the model"}],outputs:[{id:"response",name:"Response",type:"output",dataType:"string",description:"Model response"}],configSchema:{type:"object",properties:{model:{type:"string",title:"Model",description:"Anthropic model to use",default:"claude-3-sonnet-20240229",enum:["claude-3-sonnet-20240229","claude-3-opus-20240229","claude-3-haiku-20240307"]},temperature:{type:"number",title:"Temperature",description:"Creativity level (0-1)",default:.7,minimum:0,maximum:1},maxTokens:{type:"number",title:"Max Tokens",description:"Maximum tokens to generate",default:1e3,minimum:1,maximum:4e3},apiKey:{type:"string",title:"API Key",description:"Anthropic API key",default:""}}},tags:["model","anthropic","claude"]},{id:"sample-groq",name:"Groq",type:"default",supportedTypes:["default"],version:"1.0.0",description:"Groq fast inference models",category:"models",icon:"mdi:lightning-bolt",color:"#f97316",inputs:[{id:"prompt",name:"Prompt",type:"input",dataType:"string",required:!0,description:"Input prompt for the model"}],outputs:[{id:"response",name:"Response",type:"output",dataType:"string",description:"Model response"}],configSchema:{type:"object",properties:{model:{type:"string",title:"Model",description:"Groq model to use",default:"llama-3.1-8b-instant",enum:["llama-3.1-8b-instant","llama-3.1-70b-versatile","mixtral-8x7b-32768"]},temperature:{type:"number",title:"Temperature",description:"Creativity level (0-1)",default:.7,minimum:0,maximum:1},maxTokens:{type:"number",title:"Max Tokens",description:"Maximum tokens to generate",default:1e3,minimum:1,maximum:4e3},apiKey:{type:"string",title:"API Key",description:"Groq API key",default:""}}},tags:["model","groq","fast","inference"]},{id:"sample-split-text",name:"Split Text",type:"default",supportedTypes:["default"],version:"1.0.0",description:"Split text into chunks for processing",category:"processing",icon:"mdi:content-cut",color:"#f59e0b",inputs:[{id:"text",name:"Text",type:"input",dataType:"string",required:!0,description:"Text to split"}],outputs:[{id:"chunks",name:"Chunks",type:"output",dataType:"string[]",description:"Split text chunks"},{id:"dataframe",name:"DataFrame",type:"output",dataType:"json",description:"Chunks as structured data"}],configSchema:{type:"object",properties:{chunkSize:{type:"number",title:"Chunk Size",description:"Size of each text chunk",default:1e3,minimum:1,maximum:1e4},chunkOverlap:{type:"number",title:"Chunk Overlap",description:"Overlap between chunks",default:200,minimum:0,maximum:1e3},separator:{type:"string",title:"Separator",description:"Text separator for splitting",default:"\n"}}},tags:["processing","text","split","chunking"]},{id:"sample-data-operations",name:"Data Operations",version:"1.0.0",description:"Perform operations on Data objects",category:"processing",icon:"mdi:database-cog",color:"#6366f1",inputs:[{id:"data",name:"Data",type:"input",dataType:"json",required:!0,description:"Data to operate on"}],outputs:[{id:"result",name:"Result",type:"output",dataType:"json",description:"Processed data result"}],configSchema:{type:"object",properties:{operation:{type:"string",title:"Operation",description:"Data operation to perform",default:"select_keys",enum:["select_keys","filter","sort","group"]},keys:{type:"array",title:"Keys",description:"Keys to select or filter by",default:[]},filterKey:{type:"string",title:"Filter Key",description:"Key to filter by",default:""},filterValue:{type:"string",title:"Filter Value",description:"Value to filter by",default:""}}},tags:["processing","data","operations"]},{id:"sample-dataframe-operations",name:"DataFrame Operations",version:"1.0.0",description:"Perform operations on DataFrames",category:"processing",icon:"mdi:table-cog",color:"#84cc16",inputs:[{id:"dataframe",name:"DataFrame",type:"input",dataType:"json",required:!0,description:"DataFrame to operate on"}],outputs:[{id:"result",name:"Result",type:"output",dataType:"json",description:"Processed DataFrame"}],configSchema:{type:"object",properties:{operation:{type:"string",title:"Operation",description:"DataFrame operation to perform",default:"filter",enum:["filter","sort","group","aggregate"]},columnName:{type:"string",title:"Column Name",description:"Column to operate on",default:""},filterValue:{type:"string",title:"Filter Value",description:"Value to filter by",default:""},ascending:{type:"boolean",title:"Ascending",description:"Sort in ascending order",default:!0}}},tags:["processing","dataframe","table","operations"]},{id:"sample-regex-extractor",name:"Regex Extractor",version:"1.0.0",description:"Extract patterns using regular expressions",category:"processing",icon:"mdi:regex",color:"#ec4899",inputs:[{id:"text",name:"Text",type:"input",dataType:"string",required:!0,description:"Text to extract from"}],outputs:[{id:"matches",name:"Matches",type:"output",dataType:"string[]",description:"Extracted matches"}],configSchema:{type:"object",properties:{pattern:{type:"string",title:"Pattern",description:"Regular expression pattern",default:""},flags:{type:"string",title:"Flags",description:"Regex flags",default:"g",enum:["g","i","m","gi","gm","im","gim"]}}},tags:["processing","regex","extract","pattern"]},{id:"sample-smart-function",name:"Smart Function",version:"1.0.0",description:"Use models to generate data processing functions",category:"processing",icon:"mdi:function-variant",color:"#06b6d4",inputs:[{id:"data",name:"Data",type:"input",dataType:"json",required:!0,description:"Data to process"},{id:"model",name:"Model",type:"input",dataType:"json",required:!0,description:"Model for function generation"}],outputs:[{id:"filtered_data",name:"Filtered Data",type:"output",dataType:"json",description:"Processed data"},{id:"dataframe",name:"DataFrame",type:"output",dataType:"json",description:"Processed data as DataFrame"}],configSchema:{type:"object",properties:{filter_instruction:{type:"string",title:"Filter Instruction",description:"Instruction for filtering data",default:""},sample_size:{type:"number",title:"Sample Size",description:"Number of samples to process",default:1e3,minimum:1,maximum:1e4},max_size:{type:"number",title:"Max Size",description:"Maximum size of filtered data",default:1e4,minimum:1,maximum:1e5}}},tags:["processing","smart","function","model"]},{id:"sample-if-else",name:"If-Else",version:"1.0.0",description:"Conditional routing based on text comparison",category:"logic",icon:"mdi:git-branch",color:"#06b6d4",inputs:[{id:"input_text",name:"Input Text",type:"input",dataType:"string",required:!0,description:"Text to evaluate"},{id:"match_text",name:"Match Text",type:"input",dataType:"string",required:!0,description:"Text to compare against"}],outputs:[{id:"true_result",name:"True",type:"output",dataType:"string",description:"Output when condition is true"},{id:"false_result",name:"False",type:"output",dataType:"string",description:"Output when condition is false"}],configSchema:{type:"object",properties:{operator:{type:"string",title:"Operator",description:"Comparison operator",default:"equals",enum:["equals","not_equals","greater_than","less_than","contains"]},caseSensitive:{type:"boolean",title:"Case Sensitive",description:"Whether comparison is case sensitive",default:!1}}},tags:["conditional","logic","routing","if-else"]},{id:"sample-loop",name:"Loop",version:"1.0.0",description:"Iterate over data items",category:"logic",icon:"mdi:loop",color:"#8b5cf6",inputs:[{id:"data",name:"Data",type:"input",dataType:"json[]",required:!0,description:"Data to iterate over"}],outputs:[{id:"item",name:"Item",type:"output",dataType:"json",description:"Current item in iteration"},{id:"done",name:"Done",type:"output",dataType:"json",description:"Aggregated results when complete"}],configSchema:{type:"object",properties:{maxIterations:{type:"number",title:"Max Iterations",description:"Maximum number of loop iterations",default:100,minimum:1,maximum:1e3}}},tags:["conditional","logic","loop","iteration"]},{id:"sample-data-to-dataframe",name:"Data to DataFrame",version:"1.0.0",description:"Convert Data objects to DataFrame",category:"data",icon:"mdi:table-plus",color:"#10b981",inputs:[{id:"data_list",name:"Data List",type:"input",dataType:"json[]",required:!0,description:"List of Data objects to convert"}],outputs:[{id:"dataframe",name:"DataFrame",type:"output",dataType:"json",description:"Converted DataFrame"}],configSchema:{type:"object",properties:{includeText:{type:"boolean",title:"Include Text",description:"Include text in DataFrame conversion",default:!0}}},tags:["data","dataframe","convert","table"]},{id:"sample-message-to-data",name:"Message to Data",version:"1.0.0",description:"Convert Message objects to Data objects",category:"data",icon:"mdi:message-arrow-right",color:"#f59e0b",inputs:[{id:"message",name:"Message",type:"input",dataType:"string",required:!0,description:"Message to convert"}],outputs:[{id:"data",name:"Data",type:"output",dataType:"json",description:"Converted Data object"}],configSchema:{type:"object",properties:{format:{type:"string",title:"Format",description:"Input data format",default:"auto",enum:["auto","json","csv","xml"]}}},tags:["data","message","convert"]},{id:"sample-save-to-file",name:"Save to File",version:"1.0.0",description:"Save data to various file formats",category:"data",icon:"mdi:content-save",color:"#ef4444",inputs:[{id:"data",name:"Data",type:"input",dataType:"json",required:!0,description:"Data to save"}],outputs:[{id:"confirmation",name:"Confirmation",type:"output",dataType:"string",description:"Save confirmation message"}],configSchema:{type:"object",properties:{fileFormat:{type:"string",title:"File Format",description:"Output file format",default:"json",enum:["json","csv","txt","xml"]},filePath:{type:"string",title:"File Path",description:"Output file path",default:"./output/data.json"}}},tags:["data","save","file","export"]},{id:"sample-http-request",name:"HTTP Request",type:"tool",supportedTypes:["tool","default"],version:"1.0.0",description:"Advanced HTTP client with full request/response handling, similar to n8n",category:"tools",icon:"mdi:web",color:"#3b82f6",inputs:[{id:"url",name:"URL",type:"input",dataType:"string",required:!1,description:"Request URL (can be set in config or via input)"},{id:"headers",name:"Headers",type:"input",dataType:"json",required:!1,description:"Additional HTTP headers as JSON object"},{id:"body",name:"Body",type:"input",dataType:"mixed",required:!1,description:"Request body (JSON, string, or form data)"},{id:"query_params",name:"Query Parameters",type:"input",dataType:"json",required:!1,description:"URL query parameters as JSON object"}],outputs:[{id:"response",name:"Response",type:"output",dataType:"json",description:"Complete HTTP response object"},{id:"body",name:"Body",type:"output",dataType:"mixed",description:"Response body (parsed JSON or raw text)"},{id:"headers",name:"Headers",type:"output",dataType:"json",description:"Response headers as JSON object"},{id:"status_code",name:"Status Code",type:"output",dataType:"number",description:"HTTP status code"},{id:"status_text",name:"Status Text",type:"output",dataType:"string",description:"HTTP status text"},{id:"tool",name:"Tool Interface",type:"output",dataType:"tool",description:"Tool interface for agent connections - provides tool metadata and callable interface"}],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"tool",enum:["tool","default"],enumNames:["Tool Node (with metadata port)","Default Node (standard ports)"]},method:{type:"string",title:"HTTP Method",description:"HTTP request method",default:"GET",enum:["GET","POST","PUT","PATCH","DELETE","HEAD","OPTIONS"]},url:{type:"string",title:"URL",description:"Request URL (overridden by input if provided)",default:"https://api.example.com/endpoint"},authentication:{type:"string",title:"Authentication",description:"Authentication method",default:"none",enum:["none","basic","bearer","api_key","oauth2"]},auth_username:{type:"string",title:"Username",description:"Username for basic authentication",default:""},auth_password:{type:"string",title:"Password",description:"Password for basic authentication",default:"",format:"password"},auth_token:{type:"string",title:"Bearer Token",description:"Bearer token for authentication",default:"",format:"password"},api_key_header:{type:"string",title:"API Key Header",description:"Header name for API key authentication",default:"X-API-Key"},api_key_value:{type:"string",title:"API Key Value",description:"API key value",default:"",format:"password"},content_type:{type:"string",title:"Content Type",description:"Request content type",default:"application/json",enum:["application/json","application/x-www-form-urlencoded","multipart/form-data","text/plain","text/xml","application/xml"]},timeout:{type:"integer",title:"Timeout (seconds)",description:"Request timeout in seconds",default:30,minimum:1,maximum:300},follow_redirects:{type:"boolean",title:"Follow Redirects",description:"Automatically follow HTTP redirects",default:!0},ssl_verify:{type:"boolean",title:"Verify SSL",description:"Verify SSL certificates",default:!0},retry_attempts:{type:"integer",title:"Retry Attempts",description:"Number of retry attempts on failure",default:0,minimum:0,maximum:5},retry_delay:{type:"integer",title:"Retry Delay (ms)",description:"Delay between retry attempts in milliseconds",default:1e3,minimum:100,maximum:1e4},response_format:{type:"string",title:"Response Format",description:"How to parse the response body",default:"auto",enum:["auto","json","text","binary","xml"]},include_response_headers:{type:"boolean",title:"Include Response Headers",description:"Include response headers in output",default:!0},custom_headers:{type:"string",title:"Custom Headers (JSON)",description:"Custom headers as JSON string",default:"{}",format:"multiline"},user_agent:{type:"string",title:"User Agent",description:"Custom User-Agent header",default:"FlowDrop-HTTP-Client/1.0"},proxy_url:{type:"string",title:"Proxy URL",description:"HTTP proxy URL (optional)",default:""},ignore_ssl_issues:{type:"boolean",title:"Ignore SSL Issues",description:"Ignore SSL certificate errors (not recommended for production)",default:!1}}},tags:["tools","http","api","request","n8n","automation","integration"]},{id:"sample-json",name:"JSON",type:"tool",supportedTypes:["tool","default"],version:"1.0.0",description:"Parse, manipulate, and transform JSON data like n8n's JSON node",category:"tools",icon:"mdi:code-json",color:"#f59e0b",inputs:[{id:"json_input",name:"JSON Input",type:"input",dataType:"mixed",required:!1,description:"JSON data to process"}],outputs:[{id:"json_output",name:"JSON Output",type:"output",dataType:"json",description:"Processed JSON data"},{id:"tool",name:"Tool Interface",type:"output",dataType:"tool",description:"Tool interface for agent connections - provides tool metadata and callable interface"}],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"tool",enum:["tool","default"],enumNames:["Tool Node (with metadata port)","Default Node (standard ports)"]},operation:{type:"string",title:"Operation",description:"JSON operation to perform",default:"parse",enum:["parse","stringify","extract","merge","filter","transform","validate"]},json_path:{type:"string",title:"JSON Path",description:"JSONPath expression for extraction (e.g., $.data.items[*].name)",default:"$"},merge_strategy:{type:"string",title:"Merge Strategy",description:"How to merge JSON objects",default:"deep",enum:["shallow","deep","overwrite"]},filter_expression:{type:"string",title:"Filter Expression",description:"JavaScript expression for filtering (e.g., item.price > 100)",default:""},transform_expression:{type:"string",title:"Transform Expression",description:"JavaScript expression for transformation",default:"",format:"multiline"},pretty_print:{type:"boolean",title:"Pretty Print",description:"Format JSON output with indentation",default:!0},validate_schema:{type:"string",title:"JSON Schema",description:"JSON Schema for validation (optional)",default:"",format:"multiline"}}},tags:["tools","json","data","transform","n8n","parse"]},{id:"sample-set",name:"Set",type:"tool",supportedTypes:["tool","default"],version:"1.0.0",description:"Set and manipulate data values like n8n's Set node",category:"tools",icon:"mdi:variable",color:"#10b981",inputs:[{id:"input_data",name:"Input Data",type:"input",dataType:"mixed",required:!1,description:"Input data to process"}],outputs:[{id:"output_data",name:"Output Data",type:"output",dataType:"json",description:"Processed output data"},{id:"tool",name:"Tool Interface",type:"output",dataType:"tool",description:"Tool interface for agent connections - provides tool metadata and callable interface"}],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"tool",enum:["tool","default"],enumNames:["Tool Node (with metadata port)","Default Node (standard ports)"]},operation:{type:"string",title:"Operation",description:"Set operation to perform",default:"set",enum:["set","append","prepend","remove","rename","copy","move"]},keep_only_set:{type:"boolean",title:"Keep Only Set Fields",description:"Only keep the fields that are being set",default:!1},values:{type:"string",title:"Values (JSON)",description:"Values to set as JSON object",default:'{\n  "key1": "value1",\n  "key2": "{{ $json.input_field }}",\n  "timestamp": "{{ new Date().toISOString() }}"\n}',format:"multiline"},include_binary_data:{type:"boolean",title:"Include Binary Data",description:"Include binary data in output",default:!1},dot_notation:{type:"boolean",title:"Use Dot Notation",description:"Support dot notation for nested properties (e.g., user.name)",default:!0}}},tags:["tools","set","data","transform","n8n","variables"]},{id:"sample-calculator",name:"Calculator",type:"tool",supportedTypes:["tool","default"],version:"1.0.0",description:"Perform mathematical calculations",category:"tools",icon:"mdi:calculator",color:"#6366f1",inputs:[{id:"expression",name:"Expression",type:"input",dataType:"string",required:!0,description:"Mathematical expression to evaluate"}],outputs:[{id:"result",name:"Result",type:"output",dataType:"number",description:"Calculation result"},{id:"tool",name:"Tool Interface",type:"output",dataType:"tool",description:"Tool interface for agent connections - provides tool metadata and callable interface"}],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"tool",enum:["tool","default"],enumNames:["Tool Node (with metadata port)","Default Node (standard ports)"]},operation:{type:"string",title:"Operation",description:"Mathematical operation to perform",default:"add",enum:["add","subtract","multiply","divide","power","sqrt","average","min","max","median","mode"]},precision:{type:"integer",title:"Precision",description:"Number of decimal places",default:2,minimum:0,maximum:10}}},tags:["tools","calculator","math","compute"]},{id:"sample-date-time",name:"Date & Time",type:"tool",supportedTypes:["tool","default"],version:"1.0.0",description:"Handle date and time operations",category:"tools",icon:"mdi:calendar-clock",color:"#84cc16",inputs:[{id:"date",name:"Date",type:"input",dataType:"string",required:!1,description:"Input date string"}],outputs:[{id:"formatted_date",name:"Formatted Date",type:"output",dataType:"string",description:"Formatted date string"},{id:"timestamp",name:"Timestamp",type:"output",dataType:"number",description:"Unix timestamp"},{id:"tool",name:"Tool Interface",type:"output",dataType:"tool",description:"Tool interface for agent connections - provides tool metadata and callable interface"}],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"tool",enum:["tool","default"],enumNames:["Tool Node (with metadata port)","Default Node (standard ports)"]},format:{type:"string",title:"Format",description:"Date/time format",default:"YYYY-MM-DD"},timezone:{type:"string",title:"Timezone",description:"Timezone for date operations",default:"UTC"}}},tags:["tools","date","time","format"]},{id:"sample-notes",name:"Notes",type:"note",supportedTypes:["note"],version:"1.0.0",description:"Add documentation and comments to your workflow with Markdown support",category:"tools",icon:"mdi:note-text",color:"#fbbf24",inputs:[],outputs:[],configSchema:{type:"object",properties:{content:{type:"string",title:"Note Content",description:"Documentation or comment text (supports Markdown)",default:"# Workflow Notes\n\nAdd your documentation here using **Markdown** formatting.\n\n## Features\n- Supports **bold** and *italic* text\n- Create lists and code blocks\n- Add links and more!"},noteType:{type:"string",title:"Note Type",description:"Visual style and color of the note",default:"info",enum:["info","warning","success","error","note"]}}},tags:["tools","notes","documentation","comments","markdown"]},{id:"sample-simple-node",name:"Simple Node",type:"tool",supportedTypes:["tool","default"],version:"1.0.0",description:"A simple node with optional input and output ports",category:"tools",icon:"mdi:square",color:"#6366f1",inputs:[{id:"input",name:"Input",type:"input",dataType:"mixed",required:!1,description:"Optional input data"}],outputs:[{id:"output",name:"Output",type:"output",dataType:"mixed",description:"Optional output data"},{id:"tool",name:"Tool Interface",type:"output",dataType:"tool",description:"Tool interface for agent connections - provides tool metadata and callable interface"}],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"tool",enum:["tool","default"],enumNames:["Tool (specialized for agent tools)","Default (standard workflow node)"]},icon:{type:"string",title:"Icon",description:"Icon to display in the node (Iconify icon name)",default:"mdi:square"},color:{type:"string",title:"Color",description:"Background color of the node",default:"#6366f1"},layout:{type:"string",title:"Layout",description:"Layout style of the simple node",default:"normal",enum:["compact","normal"]},label:{type:"string",title:"Label",description:"Custom label for the node",default:"Simple Node"},description:{type:"string",title:"Description",description:"Description of what this simple node does",default:"",format:"multiline"}}},tags:["tools","simple","custom","visual","node"]},{id:"sample-trigger-action",name:"Trigger Action",type:"simple",supportedTypes:["simple","square","default"],version:"1.0.0",description:"An action that can be triggered and also processes data",category:"tools",icon:"mdi:lightning-bolt",color:"#f59e0b",inputs:[{id:"trigger",name:"Trigger",type:"input",dataType:"trigger",required:!1,description:"Control flow trigger to execute this action"},{id:"data",name:"Data",type:"input",dataType:"string",required:!1,description:"Optional data input to process"}],outputs:[{id:"trigger",name:"Trigger",type:"output",dataType:"trigger",description:"Control flow trigger after execution"},{id:"result",name:"Result",type:"output",dataType:"string",description:"Processed data output"}],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"simple",enum:["simple","square","default"],enumNames:["Simple (compact layout)","Square (square layout)","Default (standard workflow node)"]},action:{type:"string",title:"Action",description:"The action to perform when triggered",default:"Process data"}}},tags:["trigger","action","control-flow"]},{id:"sample-openai-embeddings",name:"OpenAI Embeddings",version:"1.0.0",description:"Generate embeddings using OpenAI models",category:"embeddings",icon:"mdi:vector-point",color:"#10a37f",inputs:[{id:"text",name:"Text",type:"input",dataType:"string",required:!0,description:"Text to embed"}],outputs:[{id:"embeddings",name:"Embeddings",type:"output",dataType:"number[]",description:"Generated embeddings"}],configSchema:{type:"object",properties:{model:{type:"string",title:"Model",description:"OpenAI embedding model",default:"text-embedding-3-small",enum:["text-embedding-3-small","text-embedding-3-large"]},apiKey:{type:"string",title:"API Key",description:"OpenAI API key",default:""}}},tags:["embeddings","openai","vector"]},{id:"sample-huggingface-embeddings",name:"HuggingFace Embeddings",version:"1.0.0",description:"Generate embeddings using HuggingFace models",category:"embeddings",icon:"mdi:vector-square",color:"#f59e0b",inputs:[{id:"text",name:"Text",type:"input",dataType:"string",required:!0,description:"Text to embed"}],outputs:[{id:"embeddings",name:"Embeddings",type:"output",dataType:"number[]",description:"Generated embeddings"}],configSchema:{type:"object",properties:{model:{type:"string",title:"Model",description:"HuggingFace model name",default:"sentence-transformers/all-MiniLM-L6-v2"},apiToken:{type:"string",title:"API Token",description:"HuggingFace API token",default:""}}},tags:["embeddings","huggingface","vector"]},{id:"sample-conversation-buffer",name:"Conversation Buffer",version:"1.0.0",description:"Store conversation history",category:"memories",icon:"mdi:chat-history",color:"#8b5cf6",inputs:[{id:"message",name:"Message",type:"input",dataType:"string",required:!0,description:"Message to add to buffer"}],outputs:[{id:"history",name:"History",type:"output",dataType:"string[]",description:"Conversation history"}],configSchema:{type:"object",properties:{maxTokens:{type:"number",title:"Max Tokens",description:"Maximum tokens in buffer",default:2e3,minimum:100,maximum:1e4},returnMessages:{type:"boolean",title:"Return Messages",description:"Return messages in response",default:!0}}},tags:["memory","conversation","history","buffer"]},{id:"sample-simple-agent",name:"Simple Agent",version:"1.0.0",description:"Agent for tool orchestration",category:"agents",icon:"mdi:account-cog",color:"#06b6d4",type:"default",supportedTypes:["default","tool"],inputs:[{id:"message",name:"Message",type:"input",dataType:"string",required:!0,description:"User message for agent"},{id:"tools",name:"Tools",type:"input",dataType:"tool",required:!1,description:"Tool interfaces available to agent - connect to tool output ports"}],outputs:[{id:"response",name:"Response",type:"output",dataType:"string",description:"Agent response"},{id:"tools",name:"Tools",type:"input",dataType:"tool",required:!1,description:"Tool interfaces available to agent - connect to tool output ports"}],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"default",enum:["tool","default"],enumNames:["Tool Node (with metadata port)","Default Node (standard ports)"]},model:{type:"string",title:"Model",description:"Chat model to use",default:"gpt-4o-mini",enum:["gpt-4o-mini","gpt-5-chat-latest","claude-3-sonnet"]},temperature:{type:"number",title:"Temperature",description:"Creativity level (0-1)",default:.7,minimum:0,maximum:1},maxIterations:{type:"number",title:"Max Iterations",description:"Maximum agent iterations",default:5,minimum:1,maximum:20}}},tags:["agent","orchestration","tools"]},{id:"sample-chroma-vector-store",name:"Chroma Vector Store",version:"1.0.0",description:"Store and retrieve vectors using Chroma",category:"vector stores",icon:"mdi:database",color:"#84cc16",inputs:[{id:"embeddings",name:"Embeddings",type:"input",dataType:"number[]",required:!0,description:"Embeddings to store"},{id:"query",name:"Query",type:"input",dataType:"string",required:!1,description:"Query for similarity search"}],outputs:[{id:"results",name:"Results",type:"output",dataType:"json[]",description:"Search results"},{id:"metadata",name:"Metadata",type:"output",dataType:"json",description:"Vector store metadata"}],configSchema:{type:"object",properties:{collectionName:{type:"string",title:"Collection Name",description:"Chroma collection name",default:"default"},persistDirectory:{type:"string",title:"Persist Directory",description:"Directory to persist data",default:"./chroma_db"},distanceFunction:{type:"string",title:"Distance Function",description:"Distance function for similarity",default:"cosine",enum:["cosine","euclidean","manhattan"]}}},tags:["integration","vector-store","chroma","embeddings"]},{id:"sample-pinecone-vector-store",name:"Pinecone Vector Store",version:"1.0.0",description:"Store and retrieve vectors using Pinecone",category:"vector stores",icon:"mdi:database-search",color:"#f59e0b",inputs:[{id:"embeddings",name:"Embeddings",type:"input",dataType:"number[]",required:!0,description:"Embeddings to store"},{id:"query",name:"Query",type:"input",dataType:"string",required:!1,description:"Query for similarity search"}],outputs:[{id:"results",name:"Results",type:"output",dataType:"json[]",description:"Search results"}],configSchema:{type:"object",properties:{indexName:{type:"string",title:"Index Name",description:"Pinecone index name",default:"default"},apiKey:{type:"string",title:"API Key",description:"Pinecone API key",default:""},environment:{type:"string",title:"Environment",description:"Pinecone environment",default:"us-west1-gcp"}}},tags:["integration","vector-store","pinecone","embeddings"]},{id:"demo-chat-input",name:"Chat Input",type:"simple",supportedTypes:["simple","default"],version:"1.0.0",description:"Accept chat instructions from content managers about what content changes to make",category:"inputs",icon:"mdi:message-text-outline",color:"#10b981",inputs:[],outputs:[{id:"user_message",name:"User Message",type:"output",dataType:"string",description:"Content manager's instructions for content review"}],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"simple",enum:["simple","default"],enumNames:["Simple (compact layout)","Default (standard workflow node)"]},placeholder:{type:"string",title:"Placeholder Text",description:"Placeholder text shown in the chat input",default:"Enter your content management instructions..."},welcomeMessage:{type:"string",title:"Welcome Message",description:"Initial message shown to content managers",default:"Hi! I can help you review and update your Drupal content. What would you like me to do?"},maxLength:{type:"number",title:"Maximum Message Length",description:"Maximum characters allowed in a single message",default:1e3,minimum:100,maximum:5e3}}},tags:["demo","content-management","input","chat","drupal"]},{id:"demo-drupal-search-rag",name:"Drupal Search API RAG",type:"tool",supportedTypes:["tool","default"],version:"1.0.0",description:"Search and retrieve content from Drupal using Search API with AI-powered relevance",category:"tools",icon:"mdi:database-search-outline",color:"#0678be",inputs:[{id:"search_query",name:"Search Query",type:"input",dataType:"string",required:!0,description:"Search terms to find relevant content"},{id:"content_types",name:"Content Types",type:"input",dataType:"json",required:!1,description:"Array of content types to search (e.g., ['article', 'page', 'blog'])"}],outputs:[{id:"content_results",name:"Content Results",type:"output",dataType:"json",description:"Array of matching content items with metadata"},{id:"search_metadata",name:"Search Metadata",type:"output",dataType:"json",description:"Search statistics and relevance information"},{id:"tool",name:"Tool Interface",type:"output",dataType:"tool",description:"Tool interface for agent connections - provides tool metadata and callable interface"}],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"tool",enum:["tool","default"],enumNames:["Tool Node (with metadata port)","Default Node (standard ports)"]},searchIndex:{type:"string",title:"Search API Index",description:"Name of the Drupal Search API index to query",default:"content_index"},maxResults:{type:"number",title:"Maximum Results",description:"Maximum number of content items to return",default:10,minimum:1,maximum:100},includeFields:{type:"array",title:"Include Fields",description:"Content fields to include in results",default:["title","body","field_tags","created","changed"]},useAiRanking:{type:"boolean",title:"Use AI-Powered Ranking",description:"Use AI to improve search result relevance",default:!0},contentStatus:{type:"string",title:"Content Status",description:"Filter by publication status",default:"published",enum:["published","unpublished","all"]}}},tags:["demo","content-management","drupal","search","rag","ai"]},{id:"ai_content_analyzer",name:"AI Content Analyzer",type:"default",supportedTypes:["default","tool"],version:"1.0.0",description:"AI-powered content analysis for smart text processing and context understanding",category:"ai",icon:"mdi:text-search",color:"#7c3aed",inputs:[{id:"content_to_analyze",name:"Content to Analyze",type:"input",dataType:"string",required:!0,description:"Text content or array of content items for AI analysis"}],outputs:[{id:"analyzed_content",name:"Analyzed Content",type:"output",dataType:"array",description:"Content items with AI analysis results"},{id:"total_analyzed",name:"Total Analyzed",type:"output",dataType:"number",description:"Total number of items analyzed"},{id:"total_replacements",name:"Total Replacements",type:"output",dataType:"number",description:"Total number of replacements made"},{id:"analysis_mode",name:"Analysis Mode",type:"output",dataType:"string",description:"The analysis mode used"},{id:"confidence_threshold",name:"Confidence Threshold",type:"output",dataType:"number",description:"Confidence threshold used for replacements"},{id:"analyzed_at",name:"Analyzed At",type:"output",dataType:"string",description:"Timestamp when analysis was completed"}],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"default",enum:["tool","default"],enumNames:["Tool Node (with metadata port)","Default Node (standard ports)"]},targetText:{type:"string",title:"Target Text",description:"Text to analyze and potentially replace",default:"XB"},replacementText:{type:"string",title:"Replacement Text",description:"Text to replace with when appropriate",default:"Canvas"},analysisMode:{type:"string",title:"Analysis Mode",description:"Type of AI analysis to perform",default:"context_aware"},confidenceThreshold:{type:"number",title:"Confidence Threshold",description:"Minimum confidence level for making replacements (0-1)",default:.8,minimum:0,maximum:1}}},tags:["ai","analysis","content","context","smart-processing"]},{id:"demo-ai-content-analyzer",name:"AI Content Analyzer",type:"default",supportedTypes:["default","tool"],version:"1.0.0",description:"Analyze content for issues like acronym misuse, formatting problems, or content quality",category:"agents",icon:"mdi:text-search",color:"#7c3aed",inputs:[{id:"content",name:"Content",type:"input",dataType:"json",required:!0,description:"Content to analyze"},{id:"analysis_prompt",name:"Analysis Instructions",type:"input",dataType:"string",required:!0,description:"Instructions for what to analyze in the content"},{id:"tools",name:"Tools",type:"input",dataType:"tool",required:!1,description:"Tools available to agent"}],outputs:[{id:"analysis_results",name:"Analysis Results",type:"output",dataType:"json",description:"Detailed analysis findings with recommendations"},{id:"issues_found",name:"Issues Found",type:"output",dataType:"json",description:"Array of specific issues identified"},{id:"confidence_score",name:"Confidence Score",type:"output",dataType:"number",description:"AI confidence in the analysis (0-1)"},{id:"tools",name:"Tools",type:"input",dataType:"tool",required:!1,description:"Tools available to agent"}],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"default",enum:["tool","default"],enumNames:["Tool Node (with metadata port)","Default Node (standard ports)"]},model:{type:"string",title:"AI Model",description:"AI model to use for content analysis",default:"gpt-5-chat-latest",enum:["gpt-4o-mini","gpt-5-chat-latest","claude-3-sonnet","claude-3-haiku"]},analysisType:{type:"string",title:"Analysis Type",description:"Type of content analysis to perform",default:"comprehensive",enum:["acronym_detection","grammar_check","style_review","comprehensive"]},strictness:{type:"string",title:"Analysis Strictness",description:"How strict should the analysis be",default:"balanced",enum:["lenient","balanced","strict"]},includeExamples:{type:"boolean",title:"Include Examples",description:"Include specific examples in analysis results",default:!0},customRules:{type:"string",title:"Custom Analysis Rules",description:"Custom rules or guidelines for content analysis",default:"",format:"multiline"}}},tags:["demo","content-management","ai","analysis","quality-control"]},{id:"demo-ai-content-editor",name:"AI Content Editor",type:"default",supportedTypes:["default","tool"],version:"1.0.0",description:"Make AI-powered edits to content based on analysis results and user instructions",category:"agents",icon:"mdi:file-edit-outline",color:"#f59e0b",inputs:[{id:"original_content",name:"Original Content",type:"input",dataType:"json",required:!0,description:"Original content to be edited"},{id:"analysis_results",name:"Analysis Results",type:"input",dataType:"json",required:!0,description:"Issues and recommendations from content analysis"},{id:"edit_instructions",name:"Edit Instructions",type:"input",dataType:"string",required:!0,description:"Specific instructions for how to edit the content"},{id:"tools",name:"Tools",type:"input",dataType:"tool",required:!1,description:"Tools available to agent"}],outputs:[{id:"edited_content",name:"Edited Content",type:"output",dataType:"json",description:"Content with AI-suggested edits applied"},{id:"edit_summary",name:"Edit Summary",type:"output",dataType:"json",description:"Summary of changes made with explanations"},{id:"change_log",name:"Change Log",type:"output",dataType:"json",description:"Detailed log of all changes made"},{id:"tools",name:"Tools",type:"input",dataType:"tool",required:!1,description:"Tools available to agent"}],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"default",enum:["tool","default"],enumNames:["Tool Node (with metadata port)","Default Node (standard ports)"]},model:{type:"string",title:"AI Model",description:"AI model to use for content editing",default:"gpt-5-chat-latest",enum:["gpt-4o-mini","gpt-5-chat-latest","claude-3-sonnet","claude-3-haiku"]},editingStyle:{type:"string",title:"Editing Style",description:"Style of editing to apply",default:"conservative",enum:["minimal","conservative","moderate","comprehensive"]},preserveFormatting:{type:"boolean",title:"Preserve HTML Formatting",description:"Maintain existing HTML tags and formatting",default:!0},requireApproval:{type:"boolean",title:"Require Human Approval",description:"Flag all changes for human review before applying",default:!0},trackChanges:{type:"boolean",title:"Track Changes",description:"Create detailed tracking of all modifications",default:!0}}},tags:["demo","content-management","ai","editing","automation"]},{id:"demo-draft-creator",name:"Draft Creator",type:"tool",supportedTypes:["tool","default"],version:"1.0.0",description:"Create draft versions of edited content in Drupal for human review and approval",category:"tools",icon:"mdi:file-document-edit-outline",color:"#10b981",inputs:[{id:"edited_content",name:"Edited Content",type:"input",dataType:"json",required:!0,description:"Content with AI edits to save as draft"},{id:"edit_summary",name:"Edit Summary",type:"input",dataType:"json",required:!0,description:"Summary of changes made"},{id:"original_node_id",name:"Original Node ID",type:"input",dataType:"number",required:!0,description:"Drupal node ID of the original content"}],outputs:[{id:"draft_node_id",name:"Draft Node ID",type:"output",dataType:"number",description:"Node ID of the created draft"},{id:"draft_url",name:"Draft URL",type:"output",dataType:"string",description:"URL to view the draft content"},{id:"review_url",name:"Review URL",type:"output",dataType:"string",description:"URL for content reviewers to approve/reject changes"},{id:"tool",name:"Tool Interface",type:"output",dataType:"tool",description:"Tool interface for agent connections - provides tool metadata and callable interface"}],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"tool",enum:["tool","default"],enumNames:["Tool Node (with metadata port)","Default Node (standard ports)"]},draftWorkflow:{type:"string",title:"Draft Workflow",description:"Drupal workflow to use for draft content",default:"editorial",enum:["editorial","simple","custom"]},assignReviewer:{type:"boolean",title:"Auto-assign Reviewer",description:"Automatically assign a content reviewer",default:!0},reviewerRole:{type:"string",title:"Reviewer Role",description:"User role to assign for content review",default:"editor",enum:["editor","content_manager","administrator"]},notifyReviewer:{type:"boolean",title:"Notify Reviewer",description:"Send email notification to assigned reviewer",default:!0},retainOriginal:{type:"boolean",title:"Retain Original",description:"Keep original content unchanged until draft is approved",default:!0},addRevisionLog:{type:"boolean",title:"Add Revision Log",description:"Add detailed revision log entry",default:!0}}},tags:["demo","content-management","drupal","draft","workflow","review"]},{id:"demo-date-format-converter",name:"Date Format Converter",type:"tool",supportedTypes:["tool","default"],version:"1.0.0",description:"Extract and convert dates in content to new formats (demo review step)",category:"tools",icon:"mdi:calendar-edit",color:"#84cc16",inputs:[{id:"content",name:"Content",type:"input",dataType:"json",required:!0,description:"Content containing dates to convert"}],outputs:[{id:"converted_content",name:"Converted Content",type:"output",dataType:"json",description:"Content with dates converted to new format"},{id:"dates_found",name:"Dates Found",type:"output",dataType:"json",description:"Array of dates found and their conversions"},{id:"conversion_log",name:"Conversion Log",type:"output",dataType:"json",description:"Log of all date conversions performed"},{id:"tool",name:"Tool Interface",type:"output",dataType:"tool",description:"Tool interface for agent connections - provides tool metadata and callable interface"}],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"tool",enum:["tool","default"],enumNames:["Tool Node (with metadata port)","Default Node (standard ports)"]},inputFormat:{type:"string",title:"Input Date Format",description:"Expected format of dates in content",default:"MM/dd/yyyy",enum:["MM/dd/yyyy","dd/MM/yyyy","yyyy-MM-dd","auto-detect"]},outputFormat:{type:"string",title:"Output Date Format",description:"Desired format for converted dates",default:"MMMM d, yyyy",enum:["MMMM d, yyyy","dd/MM/yyyy","yyyy-MM-dd","MMM d, yyyy","d MMMM yyyy"]},includeTime:{type:"boolean",title:"Include Time",description:"Include time information in conversions",default:!1},timezone:{type:"string",title:"Timezone",description:"Timezone for date conversions",default:"UTC",enum:["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","Europe/London"]},onlyFutureDates:{type:"boolean",title:"Only Future Dates",description:"Only convert dates that are in the future",default:!1}}},tags:["demo","content-management","dates","formatting","conversion","review-tool"]},{id:"demo-chat-response",name:"Chat Response",type:"simple",supportedTypes:["simple","default"],version:"1.0.0",description:"Display chat-style responses with workflow results and next steps for content managers",category:"outputs",icon:"mdi:message-reply-text",color:"#8b5cf6",inputs:[{id:"workflow_results",name:"Workflow Results",type:"input",dataType:"json",required:!0,description:"Results from the content management workflow"},{id:"summary_message",name:"Summary Message",type:"input",dataType:"string",required:!0,description:"Human-readable summary of what was accomplished"}],outputs:[],configSchema:{type:"object",properties:{nodeType:{type:"string",title:"Node Type",description:"Choose the visual representation for this node",default:"simple",enum:["simple","default"],enumNames:["Simple (compact layout)","Default (standard workflow node)"]},showTimestamp:{type:"boolean",title:"Show Timestamp",description:"Display timestamp with responses",default:!0},includeActionButtons:{type:"boolean",title:"Include Action Buttons",description:"Show action buttons for next steps",default:!0},responseStyle:{type:"string",title:"Response Style",description:"Style of the chat response",default:"professional",enum:["casual","professional","technical","friendly"]},showWorkflowSummary:{type:"boolean",title:"Show Workflow Summary",description:"Include a summary of workflow steps completed",default:!0},enableMarkdown:{type:"boolean",title:"Enable Markdown",description:"Allow markdown formatting in responses",default:!0}}},tags:["demo","content-management","output","chat","response","summary"]}],Fx={id:"sample-simple-chat-workflow",name:"Simple Chat Workflow",description:"A basic workflow demonstrating direct text input to AI model response",nodes:[{id:"sample-workflow-text-input",type:"text-input",position:{x:100,y:100},data:{label:"Text Input",config:{placeholder:"Enter your question...",defaultValue:"Hello, how are you?"},metadata:qx.find(e=>"Text Input"===e.name)}},{id:"sample-workflow-split-text",type:"split-text",position:{x:300,y:100},data:{label:"Split Text",config:{chunkSize:500,chunkOverlap:100,separator:"\n"},metadata:qx.find(e=>"Split Text"===e.name)}},{id:"sample-workflow-openai",type:"openai",position:{x:500,y:100},data:{label:"OpenAI",config:{model:"gpt-4o-mini",temperature:.7,maxTokens:1e3},metadata:qx.find(e=>"OpenAI"===e.name)}},{id:"sample-workflow-note",type:"note",position:{x:500,y:300},data:{label:"Workflow Notes",config:{content:"# Simple Chat Workflow\n\nThis workflow demonstrates a basic chat interaction:\n\n1. **Text Input** - User enters a question\n2. **OpenAI** - Processes the input and generates a response\n3. **Chat Output** - Displays the final response\n\n## Port Types Used\n- **string** - Text data flows between all nodes\n- Only compatible types can connect (string → string)\n\n## Usage\n- Drag a Notes node to add documentation\n- Double-click to edit in Markdown\n- Choose from 5 different note types",noteType:"info"},metadata:qx.find(e=>"Notes"===e.name)}},{id:"sample-workflow-chat-output",type:"chat-output",position:{x:700,y:100},data:{label:"Chat Output",config:{showTimestamp:!0,maxLength:2e3,markdown:!0},metadata:qx.find(e=>"Chat Output"===e.name)}}],edges:[{id:"sample-workflow-edge-1",source:"sample-workflow-text-input",target:"sample-workflow-openai",sourceHandle:"text",targetHandle:"prompt"},{id:"sample-workflow-edge-2",source:"sample-workflow-openai",target:"sample-workflow-chat-output",sourceHandle:"response",targetHandle:"message"}],metadata:{version:"1.0.0",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),author:"FlowDrop",tags:["sample","chat","demo","langflow-style"]}},Hx=Ki([]),Ux=new Map,Vx=e=>{if(Ux.has(e))return;const t=setTimeout(()=>{Ux.delete(e),Zx(e)},1e3);Ux.set(e,t)};function Bx(e,t=!0){t&&e.id&&(e=>{const t=Ux.get(e);t&&clearTimeout(t)})(e.id),Hx.update(t=>t.map(t=>t.id===e.id?pe(pe({},t),e):t))}function Kx(e){Yi(Hx).find(t=>t.id===e.id)?Bx(e):function(e){Hx.update(t=>[e,...t].slice(0,20))}(e)}function Zx(e){Hx.update(t=>void 0===e?[]:t.filter(t=>t.id!==e))}const Yx=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,Xx=(()=>{let e=0;return()=>(e+=1,e.toString())})(),Gx=e=>(t,n)=>{const o=((e,t="blank",n)=>({createdAt:Date.now(),visible:!0,type:t,message:e,pauseDuration:0,icon:null==n?void 0:n.icon,duration:null==n?void 0:n.duration,iconTheme:null==n?void 0:n.iconTheme,position:null==n?void 0:n.position,props:null==n?void 0:n.props,id:(null==n?void 0:n.id)||Xx()}))(t,e,n);return Kx(o),o.id},Jx=(e,t)=>Gx("blank")(e,t);function Qx(e,t){return Jx.success(e,{duration:(null==t?void 0:t.duration)||4e3,position:(null==t?void 0:t.position)||"bottom-center"})}function ek(e,t){return Jx.error(e,{duration:(null==t?void 0:t.duration)||6e3,position:(null==t?void 0:t.position)||"bottom-center"})}function tk(e,t){return Jx.error(e,{duration:(null==t?void 0:t.duration)||5e3,position:(null==t?void 0:t.position)||"bottom-center"})}function nk(e,t){return Jx.success(e,{duration:(null==t?void 0:t.duration)||4e3,position:(null==t?void 0:t.position)||"bottom-center"})}function ok(e,t){return Jx.loading(e,{duration:(null==t?void 0:t.duration)||1/0,position:(null==t?void 0:t.position)||"bottom-center"})}function rk(e){Jx.dismiss(e)}function ik(){Jx.dismiss()}function ak(e,{loading:t,success:n,error:o,options:r}){return Jx.promise(e,pe({loading:t,success:n,error:o},r))}function sk(e,t){return Jx(e,{duration:(null==t?void 0:t.duration)||5e3,position:(null==t?void 0:t.position)||"bottom-center"})}Jx.error=Gx("error"),Jx.success=Gx("success"),Jx.loading=Gx("loading"),Jx.custom=Gx("custom"),Jx.dismiss=e=>{!function(e){Hx.update(t=>(e?Vx(e):t.forEach(e=>{Vx(e.id)}),t.map(t=>t.id===e||void 0===e?fe(pe({},t),{visible:!1}):t)))}(e)},Jx.remove=e=>Zx(e),Jx.promise=(e,t,n)=>{const o=Jx.loading(t.loading,pe(pe({},n),null==n?void 0:n.loading));return e.then(e=>(Jx.success(Yx(t.success,e),pe(pe({id:o},n),null==n?void 0:n.success)),e)).catch(e=>{Jx.error(Yx(t.error,e),pe(pe({id:o},n),null==n?void 0:n.error))}),e};const lk={success:(e,t)=>Qx(t?`${e}: ${t}`:e),error:(e,t)=>ek(`${e} failed: ${t instanceof Error?t.message:t}`),loading:e=>ok(`${e}...`),promise:(e,t,n)=>ak(e,{loading:`${t}...`,success:(null==n?void 0:n.successMessage)||`${t} completed successfully`,error:(null==n?void 0:n.errorMessage)||`${t} failed`})},dk={saved:e=>Qx(e?`Workflow "${e}" saved successfully`:"Workflow saved successfully"),saveError:e=>ek(`Failed to save workflow: ${e instanceof Error?e.message:e}`),deleted:e=>Qx(e?`Workflow "${e}" deleted successfully`:"Workflow deleted successfully"),deleteError:e=>ek(`Failed to delete workflow: ${e instanceof Error?e.message:e}`),executionStarted:e=>nk(e?`Workflow "${e}" execution started`:"Workflow execution started"),executionCompleted:e=>Qx(e?`Workflow "${e}" execution completed`:"Workflow execution completed"),exported:e=>Qx(e?`Workflow "${e}" exported successfully`:"Workflow exported successfully"),executionError:e=>ek(`Workflow execution failed: ${e instanceof Error?e.message:e}`)},uk={created:e=>Qx(e?`Pipeline "${e}" created successfully`:"Pipeline created successfully"),creationError:e=>ek(`Failed to create pipeline: ${e instanceof Error?e.message:e}`),executionStarted:e=>nk(`Pipeline ${e} execution started`),executionCompleted:e=>Qx(`Pipeline ${e} execution completed`),executionError:(e,t)=>ek(`Pipeline ${e} execution failed: ${t instanceof Error?t.message:t}`),statusUpdate:(e,t)=>nk(`Pipeline ${e} status: ${t}`)};function ck(e,t){t()}function pk(e,t,n){return xe(this,null,function*(){var e;try{const o=`${(null==(e=mr(t))?void 0:e.baseUrl)||n.apiBaseUrl||"/api/flowdrop"}/nodes`,r=yield fetch(o),i=yield r.json();r.ok&&i.success?lk.success("API connection test","Connection successful"):lk.error("API connection test","Connection failed")}catch(o){lk.error("API connection test",o instanceof Error?o.message:"Unknown error")}})}function fk(e,t,n){const o=document.querySelector(".flowdrop-sidebar--right");o&&!o.contains(e.target)&&mr(t)&&n()}var hk=Ir('<meta name="description" content="A modern drag-and-drop workflow editor for LLM applications" class="svelte-n72fyi"/>'),gk=(e,t,n)=>{Zn(t,qx,!0),Zn(n,null)},vk=(e,t)=>{const n=prompt("Enter Backend API URL:","/api/flowdrop");if(n){hw(Ne(n)),t()}},mk=(e,t)=>Zn(t,null),yk=Ir('<div class="flowdrop-status flowdrop-status--error svelte-n72fyi"><div class="flowdrop-status__content svelte-n72fyi"><div class="flowdrop-flex flowdrop-gap--3 svelte-n72fyi"><div class="flowdrop-status__indicator flowdrop-status__indicator--error svelte-n72fyi"></div> <span class="flowdrop-text--sm flowdrop-font--medium svelte-n72fyi"> </span></div> <div class="flowdrop-flex flowdrop-gap--2 svelte-n72fyi"><button class="flowdrop-btn flowdrop-btn--sm flowdrop-btn--outline svelte-n72fyi" type="button">Retry</button> <button class="flowdrop-btn flowdrop-btn--sm flowdrop-btn--primary svelte-n72fyi" type="button">Use Sample Data</button> <button class="flowdrop-btn flowdrop-btn--sm flowdrop-btn--outline svelte-n72fyi" type="button">Set API URL</button> <button class="flowdrop-btn flowdrop-btn--sm flowdrop-btn--outline svelte-n72fyi" type="button">Test API</button> <button class="flowdrop-btn flowdrop-btn--ghost flowdrop-btn--sm svelte-n72fyi" type="button">✕</button></div></div></div>'),wk=Ir('<div class="flowdrop-sidebar flowdrop-sidebar--left svelte-n72fyi"><!></div>'),bk=(e,t)=>"Escape"===e.key&&t(),xk=(e,t)=>{navigator.clipboard.writeText(mr(t)().id)},kk=Ir('<div class="flowdrop-sidebar flowdrop-sidebar--right svelte-n72fyi"><div class="flowdrop-config-sidebar svelte-n72fyi"><div class="flowdrop-config-sidebar__header svelte-n72fyi"><h2 class="flowdrop-config-sidebar__title svelte-n72fyi"> </h2> <button class="flowdrop-config-sidebar__close svelte-n72fyi" aria-label="Close configuration sidebar">×</button></div> <div class="flowdrop-config-sidebar__content svelte-n72fyi"><div class="flowdrop-config-sidebar__section svelte-n72fyi"><h3 class="flowdrop-config-sidebar__section-title svelte-n72fyi">Node Details</h3> <div class="flowdrop-config-sidebar__details svelte-n72fyi"><div class="flowdrop-config-sidebar__detail svelte-n72fyi"><span class="flowdrop-config-sidebar__detail-label svelte-n72fyi">Node ID:</span> <div class="flowdrop-config-sidebar__detail-value-with-copy svelte-n72fyi"><span class="flowdrop-config-sidebar__detail-value svelte-n72fyi" style="font-family: monospace;"> </span> <button class="flowdrop-config-sidebar__copy-btn svelte-n72fyi" title="Copy Node ID" aria-label="Copy node ID to clipboard">📋</button></div></div> <div class="flowdrop-config-sidebar__detail svelte-n72fyi"><span class="flowdrop-config-sidebar__detail-label svelte-n72fyi">Type:</span> <span class="flowdrop-config-sidebar__detail-value svelte-n72fyi"> </span></div> <div class="flowdrop-config-sidebar__detail svelte-n72fyi"><span class="flowdrop-config-sidebar__detail-label svelte-n72fyi">Category:</span> <span class="flowdrop-config-sidebar__detail-value svelte-n72fyi"> </span></div> <div class="flowdrop-config-sidebar__detail svelte-n72fyi"><span class="flowdrop-config-sidebar__detail-label svelte-n72fyi">Description:</span> <p class="flowdrop-config-sidebar__detail-description svelte-n72fyi"> </p></div></div></div> <div class="flowdrop-config-sidebar__section svelte-n72fyi"><h3 class="flowdrop-config-sidebar__section-title svelte-n72fyi">Configuration</h3> <!></div></div></div></div>'),_k=Ir('<div class="flowdrop-app svelte-n72fyi"><!> <main class="flowdrop-main svelte-n72fyi"><!> <div class="flowdrop-editor-container svelte-n72fyi"><!> <div role="button" tabindex="0" aria-label="Workflow canvas - click to close sidebar"><!></div> <!></div></main></div>');function Sk(e,t){Gt(t,!0);const n=()=>Ji(Xg,"$workflowName",r),o=()=>Ji(Rg,"$workflowStore",r),[r,i]=Qi();let a=ia(t,"height",3,"100vh"),s=ia(t,"width",3,"100%"),l=ia(t,"showNavbar",3,!1),d=ia(t,"disableSidebar",3,!1),u=ia(t,"lockWorkflow",3,!1),c=ia(t,"readOnly",3,!1),p=ia(t,"nodeStatuses",19,()=>({})),f=ia(t,"navbarActions",19,()=>[]);const h=Ee(t.features);let g=zn(()=>()=>t.navbarTitle?t.navbarTitle:n()&&"Untitled Workflow"!==n()?`Workflow / ${n()}`:"Workflow / New Workflow"),v=Bn(eo([])),m=Bn(null),y=Bn(null),w=Bn(!1),b=Bn(null),x=Bn(!1);const k={type:"object",properties:{name:{type:"string",title:"Workflow Name",description:"The name of the workflow",default:""},description:{type:"string",title:"Description",description:"A description of the workflow",default:""}},required:["name"]};let _=zn(()=>{var e;return{name:n()||"",description:(null==(e=o())?void 0:e.description)||""}}),S=zn(()=>()=>mr(b)&&o()&&o().nodes.find(e=>e.id===mr(b))||null),T=null;function C(){return xe(this,null,function*(){var e;if(t.nodes&&t.nodes.length>0)return void Zn(v,t.nodes,!0);const n=h.showToasts?lk.loading("Loading node types"):null;try{Zn(m,null);const e=yield bw.nodes.getNodes();Zn(v,e,!0),Zn(m,null),n&&rk(n)}catch(o){n&&rk(n);const r=o instanceof Error?o.message:"Unknown error";if(null==(e=t.eventHandlers)?void 0:e.onApiError){if(t.eventHandlers.onApiError(o instanceof Error?o:new Error(r),"fetchNodes"))return void Zn(v,qx,!0)}Zn(m,`API Error: ${r}. Using sample data.`),h.showToasts&&lk.error("Load node types",r),Zn(v,qx,!0)}})}function E(){Zn(w,!1),Zn(b,null)}function $(){Zn(x,!mr(x)),mr(x)&&E()}function A(e){return xe(this,null,function*(){o()&&(ea(Rg,wr(o).name=e.name,wr(o)),ea(Rg,wr(o).description=e.description,wr(o))),Zn(x,!1);try{yield N()}catch(t){console.error("Failed to save workflow to backend:",t)}})}function N(){return xe(this,null,function*(){var e,n,r,i,a;yield vr();const s=o();if(!s)return;if(null==(e=t.eventHandlers)?void 0:e.onBeforeSave){if(!1===(yield t.eventHandlers.onBeforeSave(s)))return}const l=h.showToasts?lk.loading("Saving workflow"):null;try{const{workflowApi:e}=yield Promise.resolve().then(()=>xw),{v4:o}=yield Promise.resolve().then(()=>Ew);let i;i=s.id?s.id:o();const a={id:i,name:s.name||"Untitled Workflow",description:s.description||"",nodes:s.nodes||[],edges:s.edges||[],metadata:{version:"1.0.0",createdAt:(null==(n=s.metadata)?void 0:n.createdAt)||(new Date).toISOString(),updatedAt:(new Date).toISOString()}},d=yield e.saveWorkflow(a);d.id&&d.id!==a.id&&tv.batchUpdate({nodes:a.nodes,edges:a.edges,name:a.name,metadata:pe(pe({},a.metadata),d.metadata)}),Bg(),l&&rk(l),h.showToasts&&lk.success("Save workflow","Workflow saved successfully"),(null==(r=t.eventHandlers)?void 0:r.onAfterSave)&&(yield t.eventHandlers.onAfterSave(d))}catch(d){l&&rk(l);const e=d instanceof Error?d:new Error("Unknown error occurred");(null==(i=t.eventHandlers)?void 0:i.onSaveError)&&s&&(yield t.eventHandlers.onSaveError(e,s));let n=!1;throw(null==(a=t.eventHandlers)?void 0:a.onApiError)&&(n=!0===t.eventHandlers.onApiError(e,"save")),h.showToasts&&!n&&lk.error("Save workflow",e.message),d}})}function O(){return xe(this,null,function*(){var e;try{yield vr();const t=o();if(!t)return;const n={id:t.id||"untitled-workflow",name:t.name||"Untitled Workflow",nodes:t.nodes||[],edges:t.edges||[],metadata:{version:"1.0.0",createdAt:(null==(e=t.metadata)?void 0:e.createdAt)||(new Date).toISOString(),updatedAt:(new Date).toISOString()}},r=JSON.stringify(n,null,2),i=new Blob([r],{type:"application/json"}),a=URL.createObjectURL(i),s=document.createElement("a");s.href=a,s.download=`${n.name}.json`,s.click(),URL.revokeObjectURL(a)}catch(b_){}})}"undefined"!=typeof window&&(window.flowdropSave=N,window.flowdropExport=O),Qr(()=>{xe(null,null,function*(){var e;yield function(){return xe(this,null,function*(){if(t.endpointConfig)return hw(t.endpointConfig),void Zn(y,t.endpointConfig,!0);const{getEndpointConfig:e}=yield Promise.resolve().then(()=>xw),n=e();if(n&&!t.apiBaseUrl)return void Zn(y,n,!0);const o=Ne(t.apiBaseUrl||"/api/flowdrop",{auth:{type:"none"},timeout:1e4,retry:{enabled:!0,maxAttempts:2,delay:1e3,backoff:"exponential"}});hw(o),Zn(y,o,!0)})}(),yield C(),t.workflow&&(tv.initialize(t.workflow),(null==(e=t.eventHandlers)?void 0:e.onWorkflowLoad)&&t.eventHandlers.onWorkflowLoad(t.workflow))});const e=()=>{$()};return window.addEventListener("workflow-settings-toggle",e),()=>{window.removeEventListener("workflow-settings-toggle",e)}}),To(()=>{o()});var M=_k();!function(e){var t;t=document.head.appendChild(po());try{Oo(()=>e(t),gt)}finally{}}(e=>{var t=hk();ao.title="FlowDrop - Visual Workflow Manager",Lr(e,t)});var I=go(M),P=e=>{{let t=zn(()=>mr(g)()),n=zn(()=>f().length>0?f():[{label:"Save",href:"#save",icon:"heroicons:document-arrow-down",variant:"primary",onclick:e=>{e.preventDefault(),N()}},{label:"Export",href:"#export",icon:"heroicons:arrow-down-tray",variant:"outline",onclick:e=>{e.preventDefault(),O()}},{label:"Workflow Settings",href:"#settings",icon:"heroicons:cog-6-tooth",variant:"outline",onclick:e=>{e.preventDefault(),$()}}]);Wx(e,{get title(){return mr(t)},get primaryActions(){return mr(n)},showStatus:!0})}};ni(I,e=>{l()&&!Ji(xx,"$page",r).url.pathname.includes("/edit")&&e(P)});var z=go(mo(I,2)),D=e=>{var n=yk(),o=go(n),r=go(o),i=mo(go(r),2),a=go(i),s=go(mo(r,2));s.__click=[ck,C];var l=mo(s,2);l.__click=[gk,v,m];var d=mo(l,2);d.__click=[vk,C];var u=mo(d,2);u.__click=[pk,y,t],mo(u,2).__click=[mk,m],No(()=>{var e;return Br(a,`Error: ${null!=(e=mr(m))?e:""}`)}),Lr(e,n)};ni(z,e=>{mr(m)&&e(D)});var R=go(mo(z,2)),L=e=>{var t=wk();rb(go(t),{get nodes(){return mr(v)}}),Lr(e,t)};ni(R,e=>{d()||e(L)});var j=mo(R,2);let W;j.__click=[fk,w,E],j.__keydown=[bk,E];var q=go(j);{let e=zn(()=>mr(S)());Ui(jw(q,{get nodes(){return mr(v)},get height(){return a()},get width(){return s()},get endpointConfig(){return mr(y)},get isConfigSidebarOpen(){return mr(w)},get selectedNodeForConfig(){return mr(e)},openConfigSidebar:function(e){mr(w)&&mr(b)===e.id?E():(Zn(b,e.id,!0),Zn(w,!0))},closeConfigSidebar:E,get lockWorkflow(){return u()},get readOnly(){return c()},get nodeStatuses(){return p()},get pipelineId(){return t.pipelineId}}),e=>T=e,()=>T)}var F=mo(j,2),H=e=>{ux(e,{get isOpen(){return mr(x)},title:"Workflow Settings",get configSchema(){return k},get configValues(){return mr(_)},onSave:A,onClose:()=>Zn(x,!1)})},U=e=>{var t=Rr(),n=vo(t),o=e=>{var t=kk(),n=go(t),o=go(n),r=go(o),i=go(r);mo(r,2).__click=E;var a=go(mo(o,2)),s=mo(go(a),2),l=go(s),d=mo(go(l),2),u=go(d),c=go(u);mo(u,2).__click=[xk,S];var p=mo(l,2),f=mo(go(p),2),h=go(f),g=mo(p,2),v=mo(go(g),2),m=go(v),y=mo(g,2),w=mo(go(y),2),x=go(w),k=mo(a,2),_=mo(go(k),2);{let e=zn(()=>mr(S)());Tb(_,{get node(){return mr(e)},onSave:e=>{const t=mr(S)();if(mr(b)&&t){let n={data:fe(pe({},t.data),{config:e})};tv.updateNode(mr(b),n)}E()},onCancel:E})}No((e,t,n,o,r)=>{Br(i,e),Br(c,t),Br(h,n),Br(m,o),Br(x,r)},[()=>mr(S)().data.label,()=>mr(S)().id,()=>{var e;return(null==(e=mr(S)().data.metadata)?void 0:e.type)||mr(S)().type},()=>{var e;return(null==(e=mr(S)().data.metadata)?void 0:e.category)||"general"},()=>{var e;return(null==(e=mr(S)().data.metadata)?void 0:e.description)||"Node configuration"}]),Lr(e,t)};ni(n,e=>{!d()&&mr(S)()&&e(o)},!0),Lr(e,t)};ni(F,e=>{!d()&&mr(x)?e(H):e(U,!1)}),No(e=>{var t,n;bi(M,`height: ${null!=(t="number"==typeof a()?`${a()}px`:a())?t:""}; width: ${null!=(n="number"==typeof s()?`${s()}px`:s())?n:""};`),W=yi(j,1,"flowdrop-editor-main svelte-n72fyi",null,W,e)},[()=>({"pipeline-view":!!t.pipelineId})]),Lr(e,M),Jt(),i()}$r(["click","keydown"]);var Tk=Ir('<div class="pipeline-status-container svelte-wl0635"><!> <!></div>');function Ck(e,t){var n;Gt(t,!0);const o=t.apiClient||new $e((null==(n=t.endpointConfig)?void 0:n.baseUrl)||t.baseUrl||"/api/flowdrop");let r=Bn("unknown"),i=Bn(eo({jobs:[],node_statuses:{},status_summary:{total:0,pending:0,running:0,completed:0,failed:0,cancelled:0}})),a=Bn(eo({})),s=Bn(!1),l=Bn(!1),d=Bn(eo([]));function u(){return xe(this,null,function*(){if(t.pipelineId)try{Zn(s,!0);const e=yield o.getPipelineData(t.pipelineId);if(Zn(r,e.status,!0),Zn(i,{jobs:e.jobs||[],node_statuses:e.node_statuses||{},status_summary:e.job_status_summary||{total:0,pending:0,running:0,completed:0,failed:0,cancelled:0}},!0),mr(i).node_statuses){const e={};t.workflow&&t.workflow.nodes&&t.workflow.nodes.forEach(t=>{e[t.id]="pending"});for(const t in mr(i).node_statuses){const n=mr(i).node_statuses[t].status;["pending","running","completed","failed","cancelled"].includes(n)&&(e[t]="failed"===n?"error":n)}Zn(a,e,!0)}c("info",`Job status updated: ${mr(i).status_summary.total} total jobs`)}catch(e){console.error("Failed to fetch pipeline data:",e),c("error",`Failed to fetch pipeline data: ${e instanceof Error?e.message:"Unknown error"}`)}finally{Zn(s,!1)}})}function c(e,t){Zn(d,[...mr(d),{level:e,message:t,timestamp:(new Date).toISOString()}],!0)}function p(){Zn(l,!mr(l))}function f(){return[{label:mr(s)?"Refreshing...":"Refresh Status",href:"#refresh",icon:mr(s)?"mdi:loading":"mdi:refresh",variant:"outline",onclick:e=>{e.preventDefault(),u()}},{label:"View Logs",href:"#logs",icon:"mdi:file-document-outline",variant:"outline",onclick:e=>{e.preventDefault(),p()}}]}Qr(()=>{u(),t.onActionsReady&&t.onActionsReady(f());const e=()=>u(),n=()=>p();return window.addEventListener("pipeline-refresh",e),window.addEventListener("pipeline-view-logs",n),()=>{window.removeEventListener("pipeline-refresh",e),window.removeEventListener("pipeline-view-logs",n)}}),To(()=>{if(mr(r)&&t.pipelineId&&t.workflow){const e=[{label:"Home",href:"/",icon:"mdi:home"},{label:"Workflows",href:"/",icon:"mdi:view-list"},{label:t.workflow.name||"Workflow",href:`/workflow/${t.workflow.id}/edit`,icon:"mdi:workflow"},{label:"Pipelines",href:`/workflow/${t.workflow.id}/pipelines`,icon:"mdi:source-branch"},{label:`Pipeline ${t.pipelineId} - ${mr(r)}`,icon:"mdi:play-circle"}];window.dispatchEvent(new CustomEvent("page-breadcrumbs-update",{detail:{breadcrumbs:e}}))}}),To(()=>{t.onActionsReady&&t.onActionsReady(f())});let h=null;To(()=>{h&&(clearInterval(h),h=null),"running"===mr(r)&&t.pipelineId&&(h=setInterval(()=>{u()},5e3))}),Qr(()=>()=>{h&&(clearInterval(h),h=null)});var g=Tk(),v=go(g);Sk(v,{get workflow(){return t.workflow},height:"100vh",width:"100%",showNavbar:!1,disableSidebar:!0,lockWorkflow:!0,readOnly:!0,get nodeStatuses(){return mr(a)},get pipelineId(){return t.pipelineId},get endpointConfig(){return t.endpointConfig}});var m=mo(v,2),y=e=>{bx(e,{get logs(){return mr(d)},get isOpen(){return mr(l)},onClose:()=>Zn(l,!1)})};ni(m,e=>{mr(l)&&e(y)}),Lr(e,g),Jt()}function Ek(){return{dragAndDrop:!0,nodeEditing:!0,execution:!0,saveWorkflow:!0,loadWorkflow:!0,undoRedo:!0,nodeSearch:!0,nodeCategories:!0,nodeValidation:!0,collaboration:!1,templates:!1,importExport:!1}}function $k(){return{showSidebar:!0,showToolbar:!0,showMinimap:!0,showGrid:!0,gridSize:20,nodeSpacing:100,canvasPadding:50,navbarHeight:60,zoom:{min:.1,max:2,default:1},colors:{primary:"#3b82f6",secondary:"#64748b",accent:"#f59e0b",background:"#ffffff",text:"#1f2937"},cssClasses:{}}}function Ak(){return{endpoints:Ne("/api/flowdrop"),timeout:3e4,retry:{enabled:!0,maxAttempts:3,delay:1e3},auth:{type:"none"},headers:{"Content-Type":"application/json"}}}function Nk(){return{realTimeUpdates:!0,timeout:300,maxConcurrent:5,showProgress:!0,autoSaveState:!0,caching:{enabled:!0,ttl:3600}}}function Ok(){return{type:"api",autoSaveInterval:5e3,maxUndoSteps:50,keyPrefix:"flowdrop_"}}function Mk(e){return{theme:"auto",features:{dragAndDrop:!0,nodeEditing:!0,execution:!0,saveWorkflow:!0,loadWorkflow:!0,undoRedo:!0,nodeSearch:!0,nodeCategories:!0,nodeValidation:!0,collaboration:!1,templates:!1,importExport:!1},ui:{showSidebar:!0,showToolbar:!0,showMinimap:!0,showGrid:!0,gridSize:20,nodeSpacing:100,canvasPadding:50,navbarHeight:60,zoom:{min:.1,max:2,default:1},colors:{primary:"#3b82f6",secondary:"#64748b",accent:"#f59e0b",background:"#ffffff",text:"#1f2937"},cssClasses:{}},api:fe(pe({},Ak()),{endpoints:e||Ne("/api/flowdrop")}),ports:{dataTypes:[],compatibilityRules:[],defaultDataType:"mixed"},execution:{realTimeUpdates:!0,timeout:300,maxConcurrent:5,showProgress:!0,autoSaveState:!0,caching:{enabled:!0,ttl:3600}},storage:{type:"api",autoSaveInterval:5e3,maxUndoSteps:50,keyPrefix:"flowdrop_"}}}function Ik(e,t){var n,o,r,i,a,s,l,d;return fe(pe(pe({},t),e),{features:pe(pe({},t.features),e.features),ui:fe(pe(pe({},t.ui),e.ui),{zoom:pe(pe({},t.ui.zoom),null==(n=e.ui)?void 0:n.zoom),colors:pe(pe({},t.ui.colors),null==(o=e.ui)?void 0:o.colors),cssClasses:pe(pe({},t.ui.cssClasses),null==(r=e.ui)?void 0:r.cssClasses)}),api:fe(pe(pe({},t.api),e.api),{retry:pe(pe({},t.api.retry),null==(i=e.api)?void 0:i.retry),auth:pe(pe({},t.api.auth),null==(a=e.api)?void 0:a.auth),headers:pe(pe({},t.api.headers),null==(s=e.api)?void 0:s.headers),endpoints:pe(pe({},t.api.endpoints),null==(l=e.api)?void 0:l.endpoints)}),execution:fe(pe(pe({},t.execution),e.execution),{caching:pe(pe({},t.execution.caching),null==(d=e.execution)?void 0:d.caching)}),storage:pe(pe({},t.storage),e.storage)})}function Pk(e){const t=[];return e.features||t.push("features configuration is required"),e.ui||t.push("ui configuration is required"),e.api||t.push("api configuration is required"),e.execution||t.push("execution configuration is required"),e.storage||t.push("storage configuration is required"),e.api.timeout<=0&&t.push("API timeout must be greater than 0"),e.api.retry.maxAttempts<0&&t.push("Retry max attempts must be non-negative"),e.execution.timeout<=0&&t.push("Execution timeout must be greater than 0"),e.execution.maxConcurrent<=0&&t.push("Max concurrent executions must be greater than 0"),e.ui.gridSize<=0&&t.push("Grid size must be greater than 0"),e.ui.nodeSpacing<=0&&t.push("Node spacing must be greater than 0"),e.ui.zoom.min>=e.ui.zoom.max&&t.push("Zoom min must be less than zoom max"),t}function zk(){return Mk(Ne("/api/flowdrop"))}const Dk=new Map;function Rk(e){return xe(this,null,function*(){const t=Cw(),n=fe(pe({},e),{id:t,metadata:pe({version:"1.0.0",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},e.metadata)});return Dk.set(t,n),n})}function Lk(e,t){return xe(this,null,function*(){var n,o,r,i,a,s;const l=Dk.get(e);if(!l)return null;const d=fe(pe(pe({},l),t),{id:e,metadata:{version:(null==(n=l.metadata)?void 0:n.version)||"1.0.0",createdAt:(null==(o=l.metadata)?void 0:o.createdAt)||(new Date).toISOString(),updatedAt:(new Date).toISOString(),author:(null==(r=t.metadata)?void 0:r.author)||(null==(i=l.metadata)?void 0:i.author),tags:(null==(a=t.metadata)?void 0:a.tags)||(null==(s=l.metadata)?void 0:s.tags)}});return Dk.set(e,d),d})}function jk(e){return xe(this,null,function*(){return Dk.get(e)||null})}function Wk(e){return xe(this,null,function*(){let t=Array.from(Dk.values());if(null==e?void 0:e.search){const n=e.search.toLowerCase();t=t.filter(e=>{var t,o,r;return e.name.toLowerCase().includes(n)||(null==(t=e.description)?void 0:t.toLowerCase().includes(n))||(null==(r=null==(o=e.metadata)?void 0:o.tags)?void 0:r.some(e=>e.toLowerCase().includes(n)))})}t.sort((e,t)=>{var n,o;return new Date((null==(n=t.metadata)?void 0:n.updatedAt)||0).getTime()-new Date((null==(o=e.metadata)?void 0:o.updatedAt)||0).getTime()});const n=(null==e?void 0:e.offset)||0,o=(null==e?void 0:e.limit)||t.length;return t.slice(n,n+o)})}function qk(e){return xe(this,null,function*(){return Dk.delete(e)})}function Fk(){return xe(this,null,function*(){return Dk.size})}function Hk(){return xe(this,null,function*(){if(Dk.size>0)return;const e={name:"Sample Chat Workflow",description:"A simple workflow demonstrating chat completion",nodes:[],edges:[],metadata:{version:"1.0.0",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),author:"System",tags:["sample","chat"]}};yield Rk(e)})}function Uk(){return xe(this,null,function*(){var e;let t;try{t=lk.loading("Saving workflow"),yield function(){return xe(this,null,function*(){try{const{getEndpointConfig:e}=yield Promise.resolve().then(()=>xw),t=e();if(t&&t.baseUrl)return}catch(b_){}hw(Ne("undefined"!=typeof window?"localhost"===window.location.hostname&&"5173"===window.location.port?"/api/flowdrop":`${window.location.protocol}//${window.location.host}/api/flowdrop`:"/api/flowdrop",{auth:{type:"none"},timeout:1e4,retry:{enabled:!0,maxAttempts:2,delay:1e3,backoff:"exponential"}}))})}();const n=Yi(Rg);if(!n)return t&&rk(t),void lk.error("Save workflow","No workflow to save");let o;o=n.id?n.id:Cw();const r={id:o,name:n.name||"Untitled Workflow",nodes:n.nodes||[],edges:n.edges||[],metadata:{version:"1.0.0",createdAt:(null==(e=n.metadata)?void 0:e.createdAt)||(new Date).toISOString(),updatedAt:(new Date).toISOString()}};yield ww.saveWorkflow(r),t&&rk(t),dk.saved(r.name)}catch(n){throw t&&rk(t),lk.error("Save workflow",n instanceof Error?n.message:"Unknown error"),n}})}function Vk(){return xe(this,null,function*(){var e;try{const t=Yi(Rg);if(!t)return void lk.error("Export workflow","No workflow to export");const n={id:t.id||"untitled-workflow",name:t.name||"Untitled Workflow",nodes:t.nodes||[],edges:t.edges||[],metadata:{version:"1.0.0",createdAt:(null==(e=t.metadata)?void 0:e.createdAt)||(new Date).toISOString(),updatedAt:(new Date).toISOString()}},o=JSON.stringify(n,null,2),r=new Blob([o],{type:"application/json"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=`${n.name}.json`,a.click(),URL.revokeObjectURL(i),dk.exported(n.name)}catch(t){lk.error("Export workflow",t instanceof Error?t.message:"Unknown error")}})}function Bk(){"undefined"!=typeof window&&(window.flowdropGlobalSave=Uk,window.flowdropGlobalExport=Vk)}const Kk={version:"1.0.0",defaultDataType:"string",dataTypes:[{id:"trigger",name:"Trigger",description:"Control flow of the workflow",color:"var(--color-ref-purple-500)",category:"basic",enabled:!0},{id:"string",name:"String",description:"Text data",color:"var(--color-ref-emerald-500)",category:"basic",enabled:!0},{id:"number",name:"Number",description:"Numeric data",color:"var(--color-ref-blue-600)",category:"numeric",enabled:!0},{id:"boolean",name:"Boolean",description:"True/false values",color:"var(--color-ref-purple-600)",category:"logical",enabled:!0},{id:"array",name:"Array",description:"Ordered list of items",color:"var(--color-ref-amber-500)",category:"collection",enabled:!0},{id:"string[]",name:"String Array",description:"Array of strings",color:"var(--color-ref-emerald-400)",category:"collection",enabled:!0},{id:"number[]",name:"Number Array",description:"Array of numbers",color:"var(--color-ref-blue-400)",category:"collection",enabled:!0},{id:"boolean[]",name:"Boolean Array",description:"Array of true/false values",color:"var(--color-ref-purple-400)",category:"collection",enabled:!0},{id:"json[]",name:"JSON Array",description:"Array of JSON objects",color:"var(--color-ref-orange-400)",category:"collection",enabled:!0},{id:"file[]",name:"File Array",description:"Array of files",color:"var(--color-ref-red-400)",category:"collection",enabled:!0},{id:"image[]",name:"Image Array",description:"Array of images",color:"var(--color-ref-pink-400)",category:"collection",enabled:!0},{id:"json",name:"JSON",description:"JSON structured data",color:"var(--color-ref-orange-500)",category:"complex",enabled:!0},{id:"file",name:"File",description:"File data",color:"var(--color-ref-red-500)",category:"file",enabled:!0},{id:"image",name:"Image",description:"Image data",color:"var(--color-ref-pink-500)",category:"media",enabled:!0},{id:"audio",name:"Audio",description:"Audio data",color:"var(--color-ref-indigo-500)",category:"media",enabled:!0},{id:"video",name:"Video",description:"Video data",color:"var(--color-ref-teal-500)",category:"media",enabled:!0},{id:"url",name:"URL",description:"Web address",color:"var(--color-ref-cyan-500)",category:"special",enabled:!0},{id:"email",name:"Email",description:"Email address",color:"var(--color-ref-cyan-500)",category:"special",enabled:!0},{id:"date",name:"Date",description:"Date value",color:"var(--color-ref-lime-500)",category:"temporal",enabled:!0},{id:"datetime",name:"DateTime",description:"Date and time value",color:"var(--color-ref-lime-500)",category:"temporal",enabled:!0},{id:"time",name:"Time",description:"Time value",color:"var(--color-ref-lime-500)",category:"temporal",enabled:!0}],compatibilityRules:[]};function Zk(e){return xe(this,null,function*(){try{Oe(e,e.endpoints.portConfig);const t=new $e(e.baseUrl),n=yield t.getPortConfig();return n.dataTypes&&Array.isArray(n.dataTypes)?n:(console.warn("Invalid port config received from API, using default"),Kk)}catch(t){return console.error("Error fetching port configuration:",t),Kk}})}function Yk(e){if(!e||"object"!=typeof e)return!1;if(!e.dataTypes||!Array.isArray(e.dataTypes))return!1;if(!e.defaultDataType||"string"!=typeof e.defaultDataType)return!1;for(const t of e.dataTypes)if(!t.id||!t.name||!t.color)return!1;return e.compatibilityRules,!0}const Xk="flowdrop:draft";function Gk(e,t){return t||(e?`${Xk}:${e}`:`${Xk}:new`)}function Jk(e,t){try{const n={workflow:e,metadata:{savedAt:(new Date).toISOString(),workflowId:e.id,workflowName:e.name}};return localStorage.setItem(t,JSON.stringify(n)),!0}catch(n){return console.warn("Failed to save draft to localStorage:",n),!1}}function Qk(e){try{const t=localStorage.getItem(e);if(!t)return null;const n=JSON.parse(t);return n.workflow&&n.metadata?n:(console.warn("Invalid draft structure in localStorage"),null)}catch(t){return console.warn("Failed to load draft from localStorage:",t),null}}function e_(e){try{localStorage.removeItem(e)}catch(t){console.warn("Failed to delete draft from localStorage:",t)}}function t_(e){try{return null!==localStorage.getItem(e)}catch(b_){return!1}}function n_(e){var t;const n=Qk(e);return null!=(t=null==n?void 0:n.metadata)?t:null}class o_{constructor(e){ge(this,"intervalId",null),ge(this,"storageKey"),ge(this,"interval"),ge(this,"enabled"),ge(this,"getWorkflow"),ge(this,"isDirty"),ge(this,"lastSavedHash",null),this.storageKey=e.storageKey,this.interval=e.interval,this.enabled=e.enabled,this.getWorkflow=e.getWorkflow,this.isDirty=e.isDirty}start(){this.enabled&&!this.intervalId&&(this.intervalId=setInterval(()=>{this.saveIfDirty()},this.interval))}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}saveIfDirty(){if(!this.enabled)return!1;const e=this.getWorkflow();if(!e)return!1;if(!this.isDirty())return!1;const t=this.hashWorkflow(e);if(t===this.lastSavedHash)return!1;const n=Jk(e,this.storageKey);return n&&(this.lastSavedHash=t),n}forceSave(){const e=this.getWorkflow();if(!e)return!1;const t=Jk(e,this.storageKey);return t&&(this.lastSavedHash=this.hashWorkflow(e)),t}clearDraft(){e_(this.storageKey),this.lastSavedHash=null}markAsSaved(){const e=this.getWorkflow();e&&(this.lastSavedHash=this.hashWorkflow(e))}updateStorageKey(e){const t=Qk(this.storageKey);t&&this.storageKey!==e&&(e_(this.storageKey),Jk(t.workflow,e)),this.storageKey=e}hashWorkflow(e){const t={name:e.name,description:e.description,nodes:e.nodes.map(e=>({id:e.id,position:e.position,data:e.data})),edges:e.edges.map(e=>({id:e.id,source:e.source,target:e.target,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle}))};return JSON.stringify(t)}isRunning(){return null!==this.intervalId}getStorageKey(){return this.storageKey}}const r_={baseUrl:"/api/flowdrop",endpoints:{workflows:{list:"/workflows",get:"/workflows/{id}",create:"/workflows",update:"/workflows/{id}",delete:"/workflows/{id}",execute:"/workflows/{id}/execute",executionState:"/workflows/{id}/executions/{execution_id}/state"},executions:{active:"/executions/active"},nodes:{list:"/nodes"}}};function i_(e,t,n={}){let o=e.baseUrl+t;for(const[r,i]of Object.entries(n))o=o.replace(`{${r}}`,i);return o}let a_=null,s_=0;function l_(e=!1){return xe(this,null,function*(){const t=Date.now();if(!e&&a_&&t-s_<3e5)return a_;try{const e=yield fetch("/api/config");if(!e.ok)throw new Error(`Failed to fetch runtime config: ${e.statusText}`);const n=yield e.json();return a_=n,s_=t,n}catch(n){console.error("Failed to fetch runtime configuration:",n);const e={apiBaseUrl:"/api/flowdrop",theme:"auto",timeout:3e4,authType:"none",version:"1.0.0",environment:"production"};return a_||(a_=e,s_=t),a_||e}})}function d_(){return a_}function u_(){a_=null,s_=0}function c_(){return xe(this,null,function*(){return l_(!0)})}class p_{constructor(e=[]){ge(this,"nodeTypes",[]),this.nodeTypes=e}createWorkflow(e,t){return{id:Cw(),name:e,description:t,nodes:[],edges:[],metadata:{version:"1.0.0",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}}}addNode(e,t,n,o){const r=this.nodeTypes.find(e=>e.id===t);if(!r)throw new Error(`Node type '${t}' not found`);const i=function(e,t){const n=t.filter(t=>{var n,o;return(null==(o=null==(n=t.data)?void 0:n.metadata)?void 0:o.id)===e}).map(e=>e.id).map(t=>{const n=t.match(new RegExp(`^${e}\\.(\\d+)$`));return n?parseInt(n[1],10):0}).filter(e=>e>0),o=n.length>0?Math.max(...n)+1:1;return`${e}.${o}`}(t,e.nodes),a={id:i,type:t,position:n,data:{label:r.name,config:o||{},metadata:r}};return e.nodes.push(a),e.metadata.updatedAt=(new Date).toISOString(),a}removeNode(e,t){const n=e.nodes.findIndex(e=>e.id===t);return-1!==n&&(e.nodes.splice(n,1),e.edges=e.edges.filter(e=>e.source!==t&&e.target!==t),e.metadata.updatedAt=(new Date).toISOString(),!0)}updateNodePosition(e,t,n){const o=e.nodes.find(e=>e.id===t);return!!o&&(o.position=n,e.metadata.updatedAt=(new Date).toISOString(),!0)}updateNodeConfig(e,t,n){const o=e.nodes.find(e=>e.id===t);return!!o&&(o.data.config=pe(pe({},o.data.config),n),e.metadata.updatedAt=(new Date).toISOString(),!0)}addEdge(e,t,n,o,r){const i={id:Cw(),source:t,target:n,sourceHandle:o,targetHandle:r};return e.edges.push(i),e.metadata.updatedAt=(new Date).toISOString(),i}removeEdge(e,t){const n=e.edges.findIndex(e=>e.id===t);return-1!==n&&(e.edges.splice(n,1),e.metadata.updatedAt=(new Date).toISOString(),!0)}getNodesByType(e,t){return e.nodes.filter(e=>e.type===t)}getNodeEdges(e,t){return e.edges.filter(e=>e.source===t||e.target===t)}getConnectedNodes(e,t){const n=new Set;return e.edges.forEach(e=>{e.source===t?n.add(e.target):e.target===t&&n.add(e.source)}),e.nodes.filter(e=>n.has(e.id))}validateWorkflow(e){const t=[],n=[];0===e.nodes.length&&n.push("Workflow has no nodes");const o=new Set(e.nodes.map(e=>e.id));e.edges.forEach(e=>{o.has(e.source)||t.push(`Edge ${e.id} references non-existent source node ${e.source}`),o.has(e.target)||t.push(`Edge ${e.id} references non-existent target node ${e.target}`)}),e.edges.forEach(e=>{e.source===e.target&&t.push(`Node ${e.source} cannot connect to itself`)});const r=new Map;e.nodes.forEach(e=>{r.set(e.id,(r.get(e.id)||0)+1)}),r.forEach((e,n)=>{e>1&&t.push(`Duplicate node ID: ${n}`)});const i=new Map;return e.edges.forEach(e=>{i.set(e.id,(i.get(e.id)||0)+1)}),i.forEach((e,n)=>{e>1&&t.push(`Duplicate edge ID: ${n}`)}),{valid:0===t.length,errors:t,warnings:n}}exportWorkflow(e){return JSON.stringify(e,null,2)}importWorkflow(e){var t,n,o,r;try{const i=JSON.parse(e),a=this.validateWorkflow(i);if(!a.valid)throw new Error(`Invalid workflow: ${a.errors.join(", ")}`);return i.metadata={version:(null==(t=i.metadata)?void 0:t.version)||"1.0.0",createdAt:(null==(n=i.metadata)?void 0:n.createdAt)||(new Date).toISOString(),updatedAt:(new Date).toISOString(),author:null==(o=i.metadata)?void 0:o.author,tags:null==(r=i.metadata)?void 0:r.tags},i}catch(i){throw new Error(`Failed to import workflow: ${i instanceof Error?i.message:"Unknown error"}`)}}fromSvelteFlow(e){return{id:e.id,name:e.name,description:e.description,nodes:e.nodes.map(e=>({id:e.id,type:e.data.metadata.id,position:e.position,data:{label:e.data.label,config:e.data.config,metadata:e.data.metadata}})),edges:e.edges.map(e=>({id:e.id,source:e.source,target:e.target,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),metadata:e.metadata}}toSvelteFlow(e){return{id:e.id,name:e.name,description:e.description,nodes:e.nodes.map(e=>({id:e.id,type:"workflowNode",position:e.position,deletable:!0,data:{label:e.data.label,config:e.data.config,metadata:e.data.metadata,nodeId:e.id}})),edges:e.edges.map(e=>({id:e.id,source:e.source,target:e.target,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),metadata:e.metadata}}getWorkflowStats(e){var t;const n=new Map;return e.nodes.forEach(e=>{n.set(e.type,(n.get(e.type)||0)+1)}),{totalNodes:e.nodes.length,totalEdges:e.edges.length,nodeTypeCounts:Object.fromEntries(n),lastModified:null==(t=e.metadata)?void 0:t.updatedAt}}cloneWorkflow(e,t){var n,o,r;const i=JSON.parse(JSON.stringify(e)),a=new Map,s=new Map;return i.nodes.forEach(e=>{const t=e.id,n=e.data.metadata.id,o=(s.get(n)||0)+1;s.set(n,o),e.id=`${n}.${o}`,a.set(t,e.id)}),i.edges.forEach(e=>{e.id=Cw(),e.source=a.get(e.source)||e.source,e.target=a.get(e.target)||e.target}),i.id=Cw(),i.name=t||`${e.name} (Copy)`,i.metadata={version:(null==(n=i.metadata)?void 0:n.version)||"1.0.0",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),author:null==(o=i.metadata)?void 0:o.author,tags:null==(r=i.metadata)?void 0:r.tags},i}}class f_{constructor(e){ge(this,"config"),ge(this,"defaultHeaders"),this.config=pe({timeout:3e4},e),this.defaultHeaders=pe({"Content-Type":"application/json"},e.headers),e.apiKey&&(this.defaultHeaders.Authorization=`Bearer ${e.apiKey}`)}request(e,t,n){return xe(this,arguments,function*(e,t,n,o={}){const r=`${this.config.baseUrl}${t}`,i=pe(pe({},this.defaultHeaders),o.headers),a=o.timeout||this.config.timeout,s=new AbortController,l=setTimeout(()=>s.abort(),a);try{const t=yield fetch(r,{method:e,headers:i,body:n?JSON.stringify(n):void 0,signal:s.signal});if(clearTimeout(l),!t.ok){const e=yield t.json().catch(()=>({}));throw new h_(t.status,e.error||`HTTP ${t.status}`,e.code,e.details)}return yield t.json()}catch(d){if(clearTimeout(l),d instanceof h_)throw d;if(d instanceof Error&&"AbortError"===d.name)throw new h_(408,"Request timeout","TIMEOUT");throw new h_(500,d instanceof Error?d.message:"Network error","NETWORK_ERROR")}})}healthCheck(){return xe(this,null,function*(){return this.request("GET","/health")})}getNodeTypes(e){return xe(this,null,function*(){const t=new URLSearchParams;(null==e?void 0:e.category)&&t.append("category",e.category),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.offset)&&t.append("offset",e.offset.toString());const n="/nodes"+(t.toString()?`?${t.toString()}`:"");return this.request("GET",n)})}getNodeType(e){return xe(this,null,function*(){return this.request("GET",`/nodes/${e}`)})}getWorkflows(e){return xe(this,null,function*(){const t=new URLSearchParams;(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.tags)&&t.append("tags",e.tags),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.offset)&&t.append("offset",e.offset.toString()),(null==e?void 0:e.sort)&&t.append("sort",e.sort),(null==e?void 0:e.order)&&t.append("order",e.order);const n="/workflows"+(t.toString()?`?${t.toString()}`:"");return this.request("GET",n)})}getWorkflow(e){return xe(this,null,function*(){return this.request("GET",`/workflows/${e}`)})}createWorkflow(e){return xe(this,null,function*(){return this.request("POST","/workflows",e)})}updateWorkflow(e,t){return xe(this,null,function*(){return this.request("PUT",`/workflows/${e}`,t)})}deleteWorkflow(e){return xe(this,null,function*(){return this.request("DELETE",`/workflows/${e}`)})}executeWorkflow(e,t){return xe(this,null,function*(){return this.request("POST",`/workflows/${e}/execute`,t)})}getExecutionStatus(e){return xe(this,null,function*(){return this.request("GET",`/executions/${e}`)})}cancelExecution(e){return xe(this,null,function*(){return this.request("POST",`/executions/${e}/cancel`)})}exportWorkflow(e,t="json"){return xe(this,null,function*(){return this.request("GET",`/workflows/${e}/export?format=${t}`)})}importWorkflow(e){return xe(this,null,function*(){return this.request("POST","/workflows/import",e)})}validateWorkflow(e){return xe(this,null,function*(){return this.request("POST","/workflows/validate",e)})}waitForExecution(e,t=1e3){return xe(this,null,function*(){for(var n,o,r;;){const i=yield this.getExecutionStatus(e);if("completed"===(null==(n=i.data)?void 0:n.status)||"failed"===(null==(o=i.data)?void 0:o.status)||"cancelled"===(null==(r=i.data)?void 0:r.status))return i;yield new Promise(e=>setTimeout(e,t))}})}getWorkflowsByTag(e,t){return xe(this,null,function*(){return this.getWorkflows(fe(pe({},t),{tags:e}))})}getNodeTypesByCategory(e,t){return xe(this,null,function*(){return this.getNodeTypes(fe(pe({},t),{category:e}))})}}class h_ extends Error{constructor(e,t,n,o){super(t),ge(this,"status"),ge(this,"code"),ge(this,"details"),this.status=e,this.code=n,this.details=o,this.name="ApiError"}}function g_(e){return xe(this,arguments,function*(e,t={}){const{workflow:n,nodes:o,endpointConfig:r,portConfig:i,height:a="100vh",width:s="100%",showNavbar:l=!1,disableSidebar:d,lockWorkflow:u,readOnly:c,nodeStatuses:p,pipelineId:f,navbarTitle:h,navbarActions:g,authProvider:v,eventHandlers:m,features:y,draftStorageKey:w}=t,b=Ee(y);let x;if(r){const{defaultEndpointConfig:e}=yield Promise.resolve().then(()=>Pe);x=fe(pe(pe({},e),r),{endpoints:pe(pe({},e.endpoints),r.endpoints)})}else{const{defaultEndpointConfig:e}=yield Promise.resolve().then(()=>Pe);x=e}let k=i;if(!k&&x)try{k=yield Zk(x)}catch(C){console.warn("Failed to fetch port config from API, using default:",C),k=Kk}else k||(k=Kk);ig(k),(null==m?void 0:m.onDirtyStateChange)&&Fg(m.onDirtyStateChange),(null==m?void 0:m.onWorkflowChange)&&Hg(m.onWorkflowChange);const _=Kr(Sk,{target:e,props:{workflow:n,nodes:o,height:a,width:s,showNavbar:l,disableSidebar:d,lockWorkflow:u,readOnly:c,nodeStatuses:p,pipelineId:f,navbarTitle:h,navbarActions:g,endpointConfig:x,authProvider:v,eventHandlers:m,features:b}});let S=null;if(b.autoSaveDraft){const e=Gk(null==n?void 0:n.id,w);S=new o_({storageKey:e,interval:b.autoSaveDraftInterval,enabled:b.autoSaveDraft,getWorkflow:Zg,isDirty:Kg}),S.start()}const T={svelteApp:_,draftManager:S,eventHandlers:null!=m?m:null};return{destroy:()=>{var e;if(null==(e=T.eventHandlers)?void 0:e.onBeforeUnmount){const e=Zg();e&&T.eventHandlers.onBeforeUnmount(e,Kg())}T.draftManager&&(Kg()&&T.draftManager.forceSave(),T.draftManager.stop()),Fg(null),Hg(null),Xr(T.svelteApp)},isDirty:()=>Kg(),markAsSaved:()=>{Bg(),T.draftManager&&T.draftManager.markAsSaved()},getWorkflow:()=>Zg(),save:()=>xe(null,null,function*(){"undefined"!=typeof window&&window.flowdropSave?yield window.flowdropSave():console.warn("⚠️ Save functionality not available")}),export:()=>{"undefined"!=typeof window&&window.flowdropExport?window.flowdropExport():console.warn("⚠️ Export functionality not available")}}})}function v_(e){return xe(this,arguments,function*(e,t={}){const{nodes:n=[],endpointConfig:o,portConfig:r}=t;let i;if(o){const{defaultEndpointConfig:e}=yield Promise.resolve().then(()=>Pe);i=fe(pe(pe({},e),o),{endpoints:pe(pe({},e.endpoints),o.endpoints)})}else{const{defaultEndpointConfig:e}=yield Promise.resolve().then(()=>Pe);i=e}let a=r;if(!a&&i)try{a=yield Zk(i)}catch(l){console.warn("Failed to fetch port config from API, using default:",l),a=Kk}else a||(a=Kk);ig(a);const s=Kr(jw,{target:e,props:{nodes:n,endpointConfig:i}});return{destroy:()=>{Xr(s)},isDirty:()=>Kg(),markAsSaved:()=>Bg(),getWorkflow:()=>Zg(),save:()=>xe(null,null,function*(){"undefined"!=typeof window&&window.flowdropSave?yield window.flowdropSave():console.warn("⚠️ Save functionality not available")}),export:()=>{"undefined"!=typeof window&&window.flowdropExport?window.flowdropExport():console.warn("⚠️ Export functionality not available")}}})}function m_(e){e&&"function"==typeof e.destroy&&e.destroy()}function y_(e){m_(e)}const w_=Object.freeze(Object.defineProperty({__proto__:null,ApiClient:f_,ApiError:ze,CATEGORY_COLOR_TOKENS:fg,CATEGORY_ICONS:av,CallbackAuthProvider:_e,CanvasBanner:tg,ConfigForm:Tb,ConfigModal:Ob,ConfigSidebar:ux,ConfigurationHelper:Pw,ConnectionLine:Dg,DATA_TYPE_COLOR_TOKENS:hg,DEFAULT_COLORS:wg,DEFAULT_FEATURES:Ce,DEFAULT_ICONS:iv,DEFAULT_NODE_STATUS_CONFIG:Gy,DEFAULT_PORT_CONFIG:Kk,DraftAutoSaveManager:o_,EdgeStylingHelper:Ow,EnhancedFlowDropApiClient:De,FlowDropApiClient:$e,GatewayNode:Ay,LoadingSpinner:Fw,Logo:_x,LogsSidebar:bx,MarkdownDisplay:Lm,Navbar:Wx,NoAuthProvider:Se,NodeExecutionService:Aw,NodeOperationsHelper:Mw,NodeSidebar:rb,NodeStatusOverlay:Xy,NotesNodeComponent:Xm,PipelineStatus:Ck,PortCompatibilityChecker:og,SimpleNodeComponent:ry,SquareNode:cy,StaticAuthProvider:ke,StatusIcon:ab,StatusLabel:Oy,ToolNodeComponent:my,UniversalNode:pw,WorkflowAdapter:p_,WorkflowEditor:jw,WorkflowNodeComponent:_v,WorkflowOperationsHelper:Iw,api:bw,apiToasts:lk,areDataTypesCompatible:sg,buildEndpointUrl:Oe,clearRuntimeConfigCache:u_,createAuthProviderFromLegacyConfig:Te,createConfigFromEnv:zk,createDefaultAPIConfig:Ak,createDefaultConfig:Mk,createDefaultExecutionConfig:Nk,createDefaultExecutionInfo:Ry,createDefaultFeatures:Ek,createDefaultStorageConfig:Ok,createDefaultUIConfig:$k,createEndpointConfig:Ne,createNodeTypeConfigProperty:uw,createNodeWrapperConfig:Jy,defaultApiConfig:r_,defaultEndpointConfig:Ae,deleteDraft:e_,deleteWorkflow:qk,dismissAllToasts:ik,dismissToast:rk,fetchPortConfig:Zk,fetchRuntimeConfig:l_,formatExecutionDuration:Fy,formatLastExecuted:Hy,getArrayElementType:Pg,getAvailableDataTypes:yg,getAvailableNodeTypes:rw,getCategoryAccent:kg,getCategoryBackground:xg,getCategoryBorder:Sg,getCategoryColorToken:gg,getCategoryColors:bg,getCategoryIcon:lv,getCategoryText:_g,getComponentNameForNodeType:ow,getConnectionSuggestions:ug,getDataTypeColor:Ng,getDataTypeColorToken:vg,getDataTypeConfig:mg,getDataTypeDisplayText:Mg,getDefaultIcon:dv,getDraftMetadata:n_,getDraftStorageKey:Gk,getEndpointConfig:gw,getEndpointHeaders:Ie,getEndpointMethod:Me,getEndpointUrl:i_,getExecutionOrder:pg,getNodeAccent:Eg,getNodeBackground:Cg,getNodeBorder:Ag,getNodeColors:Tg,getNodeIcon:sv,getNodeText:$g,getNodeTypeEnumOptions:dw,getOptimalStatusPosition:ew,getOptimalStatusSize:tw,getPortCompatibilityChecker:ag,getPossibleConnections:lg,getPrimaryNodeType:iw,getRuntimeConfig:d_,getStatusBackgroundColor:zy,getStatusColor:My,getStatusIcon:Iy,getStatusLabel:Py,getStatusTextColor:Dy,getValidIcon:cv,getWorkflow:jk,getWorkflowCount:Fk,getWorkflowFromStore:Zg,getWorkflows:Wk,globalExportWorkflow:Vk,globalSaveWorkflow:Uk,hasCycles:cg,hasDraft:t_,initRuntimeConfig:c_,initializeGlobalSave:Bk,initializePortCompatibility:ig,initializeSampleWorkflows:Hk,isArrayDataType:Ig,isDirty:Kg,isDirtyStore:Lg,isNodeTypeSupported:lw,isValidIcon:uv,loadDraft:Qk,markAsSaved:Bg,mergeConfig:Ik,mergeFeatures:Ee,mountFlowDropApp:g_,mountWorkflowEditor:v_,nodeApi:yw,nodeExecutionService:Nw,parseDataTypeDisplay:Og,pipelineToasts:uk,resetExecutionInfo:qy,resolveComponentName:sw,resolveNodeType:aw,sampleNodes:qx,sampleWorkflow:Fx,saveDraft:Jk,saveWorkflow:Rk,setApiBaseUrl:vw,setEndpointConfig:hw,setOnDirtyStateChange:Fg,setOnWorkflowChange:Hg,shouldShowNodeStatus:Qy,showConfirmation:sk,showError:ek,showInfo:nk,showLoading:ok,showPromise:ak,showSuccess:Qx,showWarning:tk,unmountFlowDropApp:m_,unmountWorkflowEditor:y_,updateExecutionComplete:jy,updateExecutionFailed:Wy,updateExecutionStart:Ly,updateWorkflow:Lk,validateConfig:Pk,validateConnection:dg,validatePortConfig:Yk,workflowActions:tv,workflowApi:ww,workflowChanged:nv,workflowEdges:Jg,workflowId:Yg,workflowMetadata:Qg,workflowMetadataChanged:rv,workflowName:Xg,workflowNodes:Gg,workflowStore:Rg,workflowToasts:dk,workflowValidation:ov},Symbol.toStringTag,{value:"Module"}));return e.ApiClient=f_,e.ApiError=ze,e.CATEGORY_COLOR_TOKENS=fg,e.CATEGORY_ICONS=av,e.CallbackAuthProvider=_e,e.CanvasBanner=tg,e.ConfigForm=Tb,e.ConfigModal=Ob,e.ConfigSidebar=ux,e.ConfigurationHelper=Pw,e.ConnectionLine=Dg,e.DATA_TYPE_COLOR_TOKENS=hg,e.DEFAULT_COLORS=wg,e.DEFAULT_FEATURES=Ce,e.DEFAULT_ICONS=iv,e.DEFAULT_NODE_STATUS_CONFIG=Gy,e.DEFAULT_PORT_CONFIG=Kk,e.DraftAutoSaveManager=o_,e.EdgeStylingHelper=Ow,e.EnhancedFlowDropApiClient=De,e.FlowDropApiClient=$e,e.FlowDropUtils=w_,e.GatewayNode=Ay,e.LoadingSpinner=Fw,e.Logo=_x,e.LogsSidebar=bx,e.MarkdownDisplay=Lm,e.Navbar=Wx,e.NoAuthProvider=Se,e.NodeExecutionService=Aw,e.NodeOperationsHelper=Mw,e.NodeSidebar=rb,e.NodeStatusOverlay=Xy,e.NotesNodeComponent=Xm,e.PipelineStatus=Ck,e.PortCompatibilityChecker=og,e.SimpleNodeComponent=ry,e.SquareNode=cy,e.StaticAuthProvider=ke,e.StatusIcon=ab,e.StatusLabel=Oy,e.ToolNodeComponent=my,e.UniversalNode=pw,e.WorkflowAdapter=p_,e.WorkflowEditor=jw,e.WorkflowNodeComponent=_v,e.WorkflowOperationsHelper=Iw,e.api=bw,e.apiToasts=lk,e.areDataTypesCompatible=sg,e.buildEndpointUrl=Oe,e.clearRuntimeConfigCache=u_,e.createAuthProviderFromLegacyConfig=Te,e.createConfigFromEnv=zk,e.createDefaultAPIConfig=Ak,e.createDefaultConfig=Mk,e.createDefaultExecutionConfig=Nk,e.createDefaultExecutionInfo=Ry,e.createDefaultFeatures=Ek,e.createDefaultStorageConfig=Ok,e.createDefaultUIConfig=$k,e.createEndpointConfig=Ne,e.createNodeTypeConfigProperty=uw,e.createNodeWrapperConfig=Jy,e.defaultApiConfig=r_,e.defaultEndpointConfig=Ae,e.deleteDraft=e_,e.deleteWorkflow=qk,e.dismissAllToasts=ik,e.dismissToast=rk,e.fetchPortConfig=Zk,e.fetchRuntimeConfig=l_,e.formatExecutionDuration=Fy,e.formatLastExecuted=Hy,e.getArrayElementType=Pg,e.getAvailableDataTypes=yg,e.getAvailableNodeTypes=rw,e.getCategoryAccent=kg,e.getCategoryBackground=xg,e.getCategoryBorder=Sg,e.getCategoryColorToken=gg,e.getCategoryColors=bg,e.getCategoryIcon=lv,e.getCategoryText=_g,e.getComponentNameForNodeType=ow,e.getConnectionSuggestions=ug,e.getDataTypeColor=Ng,e.getDataTypeColorToken=vg,e.getDataTypeConfig=mg,e.getDataTypeDisplayText=Mg,e.getDefaultIcon=dv,e.getDraftMetadata=n_,e.getDraftStorageKey=Gk,e.getEndpointConfig=gw,e.getEndpointHeaders=Ie,e.getEndpointMethod=Me,e.getEndpointUrl=i_,e.getExecutionOrder=pg,e.getNodeAccent=Eg,e.getNodeBackground=Cg,e.getNodeBorder=Ag,e.getNodeColors=Tg,e.getNodeIcon=sv,e.getNodeText=$g,e.getNodeTypeEnumOptions=dw,e.getOptimalStatusPosition=ew,e.getOptimalStatusSize=tw,e.getPortCompatibilityChecker=ag,e.getPossibleConnections=lg,e.getPrimaryNodeType=iw,e.getRuntimeConfig=d_,e.getStatusBackgroundColor=zy,e.getStatusColor=My,e.getStatusIcon=Iy,e.getStatusLabel=Py,e.getStatusTextColor=Dy,e.getValidIcon=cv,e.getWorkflow=jk,e.getWorkflowCount=Fk,e.getWorkflowFromStore=Zg,e.getWorkflows=Wk,e.globalExportWorkflow=Vk,e.globalSaveWorkflow=Uk,e.hasCycles=cg,e.hasDraft=t_,e.initRuntimeConfig=c_,e.initializeGlobalSave=Bk,e.initializePortCompatibility=ig,e.initializeSampleWorkflows=Hk,e.isArrayDataType=Ig,e.isDirty=Kg,e.isDirtyStore=Lg,e.isNodeTypeSupported=lw,e.isValidIcon=uv,e.loadDraft=Qk,e.markAsSaved=Bg,e.mergeConfig=Ik,e.mergeFeatures=Ee,e.mountFlowDropApp=g_,e.mountWorkflowEditor=v_,e.nodeApi=yw,e.nodeExecutionService=Nw,e.parseDataTypeDisplay=Og,e.pipelineToasts=uk,e.resetExecutionInfo=qy,e.resolveComponentName=sw,e.resolveNodeType=aw,e.sampleNodes=qx,e.sampleWorkflow=Fx,e.saveDraft=Jk,e.saveWorkflow=Rk,e.setApiBaseUrl=vw,e.setEndpointConfig=hw,e.setOnDirtyStateChange=Fg,e.setOnWorkflowChange=Hg,e.shouldShowNodeStatus=Qy,e.showConfirmation=sk,e.showError=ek,e.showInfo=nk,e.showLoading=ok,e.showPromise=ak,e.showSuccess=Qx,e.showWarning=tk,e.unmountFlowDropApp=m_,e.unmountWorkflowEditor=y_,e.updateExecutionComplete=jy,e.updateExecutionFailed=Wy,e.updateExecutionStart=Ly,e.updateWorkflow=Lk,e.validateConfig=Pk,e.validateConnection=dg,e.validatePortConfig=Yk,e.workflowActions=tv,e.workflowApi=ww,e.workflowChanged=nv,e.workflowEdges=Jg,e.workflowId=Yg,e.workflowMetadata=Qg,e.workflowMetadataChanged=rv,e.workflowName=Xg,e.workflowNodes=Gg,e.workflowStore=Rg,e.workflowToasts=dk,e.workflowValidation=ov,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e}({});
//# sourceMappingURL=flowdrop.iife.js.map
