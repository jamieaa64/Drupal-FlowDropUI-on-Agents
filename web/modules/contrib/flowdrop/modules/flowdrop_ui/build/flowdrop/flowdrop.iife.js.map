{"version":3,"file":"flowdrop.iife.js","sources":["../../node_modules/@d34dman/flowdrop/dist/types/auth.js","../../node_modules/@d34dman/flowdrop/dist/types/events.js","../../node_modules/@d34dman/flowdrop/dist/api/client.js","../../node_modules/@d34dman/flowdrop/dist/config/endpoints.js","../../node_modules/@d34dman/flowdrop/dist/api/enhanced-client.js","../../node_modules/svelte/src/internal/disclose-version.js","../../node_modules/svelte/src/version.js","../../node_modules/svelte/src/constants.js","../../node_modules/esm-env/dev-fallback.js","../../node_modules/svelte/src/internal/shared/utils.js","../../node_modules/svelte/src/internal/client/constants.js","../../node_modules/svelte/src/internal/shared/errors.js","../../node_modules/svelte/src/internal/client/errors.js","../../node_modules/svelte/src/internal/client/warnings.js","../../node_modules/svelte/src/internal/client/reactivity/equality.js","../../node_modules/svelte/src/internal/shared/warnings.js","../../node_modules/svelte/src/internal/shared/clone.js","../../node_modules/svelte/src/internal/client/dev/tracing.js","../../node_modules/svelte/src/internal/client/context.js","../../node_modules/svelte/src/internal/client/dom/task.js","../../node_modules/svelte/src/internal/client/error-handling.js","../../node_modules/svelte/src/internal/client/reactivity/batch.js","../../node_modules/svelte/src/reactivity/create-subscriber.js","../../node_modules/svelte/src/internal/client/reactivity/effects.js","../../node_modules/svelte/src/internal/client/dom/blocks/boundary.js","../../node_modules/svelte/src/internal/client/reactivity/async.js","../../node_modules/svelte/src/internal/client/reactivity/deriveds.js","../../node_modules/svelte/src/internal/client/reactivity/sources.js","../../node_modules/svelte/src/internal/client/runtime.js","../../node_modules/svelte/src/internal/client/proxy.js","../../node_modules/svelte/src/internal/client/dom/operations.js","../../node_modules/svelte/src/internal/client/dev/equality.js","../../node_modules/svelte/src/internal/client/dom/elements/misc.js","../../node_modules/svelte/src/internal/client/dom/elements/bindings/shared.js","../../node_modules/svelte/src/internal/client/dom/elements/events.js","../../node_modules/svelte/src/internal/client/dom/reconciler.js","../../node_modules/svelte/src/internal/client/dom/template.js","../../node_modules/svelte/src/utils.js","../../node_modules/svelte/src/internal/client/render.js","../../node_modules/svelte/src/internal/client/dom/blocks/branches.js","../../node_modules/svelte/src/internal/client/dom/blocks/snippet.js","../../node_modules/svelte/src/index-client.js","../../node_modules/svelte/src/internal/client/dom/blocks/if.js","../../node_modules/svelte/src/internal/client/dom/blocks/each.js","../../node_modules/svelte/src/internal/client/dom/hydration.js","../../node_modules/svelte/src/internal/client/dom/blocks/html.js","../../node_modules/svelte/src/internal/client/dom/blocks/svelte-component.js","../../node_modules/svelte/src/internal/client/dom/elements/actions.js","../../node_modules/svelte/src/internal/client/dom/elements/attachments.js","../../node_modules/clsx/dist/clsx.mjs","../../node_modules/svelte/src/internal/shared/attributes.js","../../node_modules/svelte/src/internal/client/dom/elements/class.js","../../node_modules/svelte/src/internal/client/dom/elements/style.js","../../node_modules/svelte/src/internal/client/dom/elements/bindings/select.js","../../node_modules/svelte/src/internal/client/dom/elements/attributes.js","../../node_modules/svelte/src/internal/client/dom/elements/bindings/input.js","../../node_modules/svelte/src/internal/client/dom/elements/bindings/size.js","../../node_modules/svelte/src/internal/client/dom/elements/bindings/this.js","../../node_modules/svelte/src/store/utils.js","../../node_modules/svelte/src/store/shared/index.js","../../node_modules/svelte/src/internal/client/reactivity/store.js","../../node_modules/svelte/src/internal/client/reactivity/props.js","../../node_modules/d3-dispatch/src/dispatch.js","../../node_modules/d3-selection/src/namespaces.js","../../node_modules/d3-selection/src/namespace.js","../../node_modules/d3-selection/src/creator.js","../../node_modules/d3-selection/src/selector.js","../../node_modules/d3-selection/src/selectorAll.js","../../node_modules/d3-selection/src/selection/selectAll.js","../../node_modules/d3-selection/src/array.js","../../node_modules/d3-selection/src/matcher.js","../../node_modules/d3-selection/src/selection/selectChild.js","../../node_modules/d3-selection/src/selection/selectChildren.js","../../node_modules/d3-selection/src/selection/sparse.js","../../node_modules/d3-selection/src/selection/enter.js","../../node_modules/d3-selection/src/selection/data.js","../../node_modules/d3-selection/src/selection/sort.js","../../node_modules/d3-selection/src/selection/attr.js","../../node_modules/d3-selection/src/window.js","../../node_modules/d3-selection/src/selection/style.js","../../node_modules/d3-selection/src/selection/property.js","../../node_modules/d3-selection/src/selection/classed.js","../../node_modules/d3-selection/src/selection/text.js","../../node_modules/d3-selection/src/selection/html.js","../../node_modules/d3-selection/src/selection/raise.js","../../node_modules/d3-selection/src/selection/lower.js","../../node_modules/d3-selection/src/selection/insert.js","../../node_modules/d3-selection/src/selection/remove.js","../../node_modules/d3-selection/src/selection/clone.js","../../node_modules/d3-selection/src/selection/on.js","../../node_modules/d3-selection/src/selection/dispatch.js","../../node_modules/d3-selection/src/selection/index.js","../../node_modules/d3-selection/src/select.js","../../node_modules/d3-selection/src/pointer.js","../../node_modules/d3-selection/src/sourceEvent.js","../../node_modules/d3-selection/src/selection/select.js","../../node_modules/d3-selection/src/selection/filter.js","../../node_modules/d3-selection/src/constant.js","../../node_modules/d3-selection/src/selection/exit.js","../../node_modules/d3-selection/src/selection/join.js","../../node_modules/d3-selection/src/selection/merge.js","../../node_modules/d3-selection/src/selection/order.js","../../node_modules/d3-selection/src/selection/call.js","../../node_modules/d3-selection/src/selection/nodes.js","../../node_modules/d3-selection/src/selection/node.js","../../node_modules/d3-selection/src/selection/size.js","../../node_modules/d3-selection/src/selection/empty.js","../../node_modules/d3-selection/src/selection/each.js","../../node_modules/d3-selection/src/selection/append.js","../../node_modules/d3-selection/src/selection/datum.js","../../node_modules/d3-selection/src/selection/iterator.js","../../node_modules/d3-drag/src/noevent.js","../../node_modules/d3-drag/src/nodrag.js","../../node_modules/d3-drag/src/constant.js","../../node_modules/d3-drag/src/event.js","../../node_modules/d3-drag/src/drag.js","../../node_modules/d3-color/src/define.js","../../node_modules/d3-color/src/color.js","../../node_modules/d3-interpolate/src/constant.js","../../node_modules/d3-interpolate/src/color.js","../../node_modules/d3-interpolate/src/rgb.js","../../node_modules/d3-interpolate/src/numberArray.js","../../node_modules/d3-interpolate/src/array.js","../../node_modules/d3-interpolate/src/date.js","../../node_modules/d3-interpolate/src/number.js","../../node_modules/d3-interpolate/src/object.js","../../node_modules/d3-interpolate/src/string.js","../../node_modules/d3-interpolate/src/value.js","../../node_modules/d3-interpolate/src/transform/decompose.js","../../node_modules/d3-interpolate/src/transform/parse.js","../../node_modules/d3-interpolate/src/transform/index.js","../../node_modules/d3-interpolate/src/zoom.js","../../node_modules/d3-timer/src/timer.js","../../node_modules/d3-timer/src/timeout.js","../../node_modules/d3-transition/src/transition/schedule.js","../../node_modules/d3-transition/src/interrupt.js","../../node_modules/d3-transition/src/transition/tween.js","../../node_modules/d3-transition/src/transition/interpolate.js","../../node_modules/d3-transition/src/transition/attr.js","../../node_modules/d3-transition/src/transition/attrTween.js","../../node_modules/d3-transition/src/transition/delay.js","../../node_modules/d3-transition/src/transition/duration.js","../../node_modules/d3-transition/src/transition/selection.js","../../node_modules/d3-transition/src/transition/style.js","../../node_modules/d3-transition/src/transition/index.js","../../node_modules/d3-transition/src/transition/select.js","../../node_modules/d3-transition/src/transition/selectAll.js","../../node_modules/d3-transition/src/transition/filter.js","../../node_modules/d3-transition/src/transition/merge.js","../../node_modules/d3-transition/src/transition/transition.js","../../node_modules/d3-transition/src/transition/on.js","../../node_modules/d3-transition/src/transition/styleTween.js","../../node_modules/d3-transition/src/transition/text.js","../../node_modules/d3-transition/src/transition/textTween.js","../../node_modules/d3-transition/src/transition/remove.js","../../node_modules/d3-transition/src/transition/ease.js","../../node_modules/d3-transition/src/transition/easeVarying.js","../../node_modules/d3-transition/src/transition/end.js","../../node_modules/d3-transition/src/selection/transition.js","../../node_modules/d3-ease/src/cubic.js","../../node_modules/d3-transition/src/selection/index.js","../../node_modules/d3-transition/src/selection/interrupt.js","../../node_modules/d3-zoom/src/constant.js","../../node_modules/d3-zoom/src/event.js","../../node_modules/d3-zoom/src/transform.js","../../node_modules/d3-zoom/src/noevent.js","../../node_modules/d3-zoom/src/zoom.js","../../node_modules/@xyflow/system/dist/esm/index.js","../../node_modules/@xyflow/svelte/dist/lib/components/Handle/Handle.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/nodes/DefaultNode.svelte","../../node_modules/@xyflow/svelte/dist/lib/actions/portal/portal.svelte.js","../../node_modules/@xyflow/svelte/dist/lib/actions/portal/utils.svelte.js","../../node_modules/@xyflow/svelte/dist/lib/utils/index.js","../../node_modules/@xyflow/svelte/dist/lib/components/edges/BaseEdge.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/EdgeLabel/EdgeLabel.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/edges/BezierEdge.svelte","../../node_modules/svelte/src/reactivity/set.js","../../node_modules/svelte/src/reactivity/reactive-value.js","../../node_modules/svelte/src/reactivity/media-query.js","../../node_modules/@xyflow/svelte/dist/lib/store/visibleElements.js","../../node_modules/@xyflow/svelte/dist/lib/store/initial-store.svelte.js","../../node_modules/@xyflow/svelte/dist/lib/components/nodes/InputNode.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/nodes/OutputNode.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/nodes/GroupNode.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/edges/StraightEdgeInternal.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/edges/SmoothStepEdgeInternal.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/edges/StepEdgeInternal.svelte","../../node_modules/@xyflow/svelte/dist/lib/hooks/useStore.js","../../node_modules/@xyflow/svelte/dist/lib/store/index.js","../../node_modules/@xyflow/svelte/dist/lib/actions/zoom/index.js","../../node_modules/@xyflow/svelte/dist/lib/container/Pane/Pane.svelte","../../node_modules/@xyflow/svelte/dist/lib/actions/drag/index.js","../../node_modules/@xyflow/svelte/dist/lib/components/A11yDescriptions/index.js","../../node_modules/@xyflow/svelte/dist/lib/components/NodeWrapper/NodeWrapper.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/EdgeRenderer/MarkerDefinition/MarkerDefinition.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/EdgeRenderer/MarkerDefinition/Marker.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/EdgeRenderer/EdgeRenderer.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/EdgeWrapper/EdgeWrapper.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/Selection/Selection.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/NodeSelection/NodeSelection.svelte","../../node_modules/@svelte-put/shortcut/src/shortcut.js","../../node_modules/@xyflow/svelte/dist/lib/hooks/useSvelteFlow.svelte.js","../../node_modules/@xyflow/svelte/dist/lib/components/KeyHandler/KeyHandler.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/Panel/Panel.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/SvelteFlow/SvelteFlow.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/SvelteFlow/Wrapper.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/Zoom/Zoom.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/Viewport/Viewport.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/ConnectionLine/ConnectionLine.svelte","../../node_modules/@xyflow/svelte/dist/lib/container/NodeRenderer/NodeRenderer.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/Attribution/Attribution.svelte","../../node_modules/@xyflow/svelte/dist/lib/components/A11yDescriptions/A11yDescriptions.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/ControlButton.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Background/types.js","../../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/Controls.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Background/Background.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Background/DotPattern.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Background/LinePattern.svelte","../../node_modules/@xyflow/svelte/dist/lib/plugins/Minimap/interactive.js","../../node_modules/@xyflow/svelte/dist/lib/plugins/Minimap/Minimap.svelte","../../node_modules/svelte/src/internal/client/dom/blocks/css-props.js","../../node_modules/@xyflow/svelte/dist/lib/plugins/Minimap/MinimapNode.svelte","../../node_modules/@iconify/svelte/dist/functions.js","../../node_modules/@iconify/svelte/dist/Icon.svelte","../../node_modules/@d34dman/flowdrop/dist/components/CanvasBanner.svelte","../../node_modules/@d34dman/flowdrop/dist/utils/connections.js","../../node_modules/@d34dman/flowdrop/dist/utils/colors.js","../../node_modules/@d34dman/flowdrop/dist/components/ConnectionLine.svelte","../../node_modules/@xyflow/svelte/dist/lib/hooks/useConnection.svelte.js","../../node_modules/@d34dman/flowdrop/dist/stores/workflowStore.js","../../node_modules/@d34dman/flowdrop/dist/utils/icons.js","../../node_modules/@d34dman/flowdrop/dist/components/WorkflowNode.svelte","../../node_modules/marked/lib/marked.esm.js","../../node_modules/@d34dman/flowdrop/dist/components/MarkdownDisplay.svelte","../../node_modules/@d34dman/flowdrop/dist/components/NotesNode.svelte","../../node_modules/@d34dman/flowdrop/dist/components/SimpleNode.svelte","../../node_modules/@d34dman/flowdrop/dist/components/SquareNode.svelte","../../node_modules/@d34dman/flowdrop/dist/components/ToolNode.svelte","../../node_modules/@d34dman/flowdrop/dist/components/GatewayNode.svelte","../../node_modules/@d34dman/flowdrop/dist/components/StatusLabel.svelte","../../node_modules/@d34dman/flowdrop/dist/utils/nodeStatus.js","../../node_modules/@d34dman/flowdrop/dist/components/NodeStatusOverlay.svelte","../../node_modules/@d34dman/flowdrop/dist/utils/nodeWrapper.js","../../node_modules/@d34dman/flowdrop/dist/utils/nodeTypes.js","../../node_modules/@d34dman/flowdrop/dist/components/UniversalNode.svelte","../../node_modules/@d34dman/flowdrop/dist/services/api.js","../../node_modules/uuid/dist/esm-browser/stringify.js","../../node_modules/uuid/dist/esm-browser/rng.js","../../node_modules/uuid/dist/esm-browser/native.js","../../node_modules/uuid/dist/esm-browser/v4.js","../../node_modules/@d34dman/flowdrop/dist/services/nodeExecutionService.js","../../node_modules/@d34dman/flowdrop/dist/helpers/workflowEditorHelper.js","../../node_modules/@d34dman/flowdrop/dist/components/WorkflowEditor.svelte","../../node_modules/@d34dman/flowdrop/dist/utils/performanceUtils.js","../../node_modules/@xyflow/svelte/dist/lib/components/SvelteFlowProvider/SvelteFlowProvider.svelte","../../node_modules/@d34dman/flowdrop/dist/components/FlowDropZone.svelte","../../node_modules/@d34dman/flowdrop/dist/components/LoadingSpinner.svelte","../../node_modules/@d34dman/flowdrop/dist/components/NodeSidebar.svelte","../../node_modules/@d34dman/flowdrop/dist/components/StatusIcon.svelte","../../node_modules/@d34dman/flowdrop/dist/components/ConfigForm.svelte","../../node_modules/@d34dman/flowdrop/dist/components/ConfigModal.svelte","../../node_modules/@d34dman/flowdrop/dist/components/ConfigSidebar.svelte","../../node_modules/@d34dman/flowdrop/dist/components/LogsSidebar.svelte","../../src/lib/mocks/app-stores.js","../../node_modules/@d34dman/flowdrop/dist/components/Navbar.svelte","../../node_modules/@d34dman/flowdrop/dist/data/samples.js","../../node_modules/svelte-5-french-toast/dist/core/store.js","../../node_modules/svelte-5-french-toast/dist/core/types.js","../../node_modules/svelte-5-french-toast/dist/core/utils.js","../../node_modules/svelte-5-french-toast/dist/core/toast.js","../../node_modules/@d34dman/flowdrop/dist/services/toastService.js","../../node_modules/@d34dman/flowdrop/dist/components/App.svelte","../../node_modules/svelte/src/internal/client/dom/blocks/svelte-head.js","../../node_modules/@d34dman/flowdrop/dist/components/PipelineStatus.svelte","../../node_modules/@d34dman/flowdrop/dist/utils/config.js","../../node_modules/@d34dman/flowdrop/dist/services/workflowStorage.js","../../node_modules/@d34dman/flowdrop/dist/services/globalSave.js","../../node_modules/@d34dman/flowdrop/dist/config/defaultPortConfig.js","../../node_modules/@d34dman/flowdrop/dist/services/portConfigApi.js","../../node_modules/@d34dman/flowdrop/dist/services/draftStorage.js","../../node_modules/@d34dman/flowdrop/dist/config/apiConfig.js","../../node_modules/@d34dman/flowdrop/dist/config/runtimeConfig.js","../../node_modules/@d34dman/flowdrop/dist/adapters/WorkflowAdapter.js","../../node_modules/@d34dman/flowdrop/dist/clients/ApiClient.js","../../node_modules/@d34dman/flowdrop/dist/svelte-app.js"],"sourcesContent":["/**\n * Authentication Provider Types for FlowDrop\n *\n * Provides interfaces and implementations for authentication in FlowDrop.\n * AuthProvider is passed at mount time and cannot be changed without remounting.\n *\n * @module types/auth\n */\n/**\n * Static authentication provider\n *\n * Provides authentication using static credentials configured at instantiation.\n * Suitable for simple use cases where tokens don't change during the session.\n * Also used internally for backward compatibility with existing endpointConfig.auth.\n *\n * @example\n * ```typescript\n * // Bearer token authentication\n * const authProvider = new StaticAuthProvider({\n *   type: \"bearer\",\n *   token: \"your-jwt-token\"\n * });\n *\n * // API key authentication\n * const authProvider = new StaticAuthProvider({\n *   type: \"api_key\",\n *   apiKey: \"your-api-key\"\n * });\n *\n * // Custom headers\n * const authProvider = new StaticAuthProvider({\n *   type: \"custom\",\n *   headers: {\n *     \"X-Custom-Auth\": \"value\",\n *     \"X-Tenant-ID\": \"tenant123\"\n *   }\n * });\n * ```\n */\nexport class StaticAuthProvider {\n    /** Cached authentication headers */\n    headers;\n    /**\n     * Create a new StaticAuthProvider\n     *\n     * @param config - Static authentication configuration\n     */\n    constructor(config) {\n        this.headers = {};\n        switch (config.type) {\n            case \"bearer\":\n                if (config.token) {\n                    this.headers[\"Authorization\"] = `Bearer ${config.token}`;\n                }\n                break;\n            case \"api_key\":\n                if (config.apiKey) {\n                    this.headers[\"X-API-Key\"] = config.apiKey;\n                }\n                break;\n            case \"custom\":\n                if (config.headers) {\n                    this.headers = { ...config.headers };\n                }\n                break;\n            case \"none\":\n            default:\n                // No headers needed\n                break;\n        }\n    }\n    /**\n     * Get authentication headers\n     *\n     * Returns the statically configured headers.\n     *\n     * @returns Promise resolving to authentication headers\n     */\n    async getAuthHeaders() {\n        return this.headers;\n    }\n    /**\n     * Check if authenticated\n     *\n     * Returns true if any auth headers are configured.\n     *\n     * @returns true if headers are configured\n     */\n    isAuthenticated() {\n        return Object.keys(this.headers).length > 0;\n    }\n    /**\n     * Handle unauthorized response\n     *\n     * Static provider cannot refresh tokens, so always returns false.\n     *\n     * @returns Promise resolving to false (cannot refresh)\n     */\n    async onUnauthorized() {\n        // Static provider cannot refresh tokens\n        return false;\n    }\n    /**\n     * Handle forbidden response\n     *\n     * Static provider has no special handling for 403.\n     */\n    async onForbidden() {\n        // No special handling for static provider\n    }\n}\n/**\n * Callback-based authentication provider\n *\n * Provides authentication using callback functions for dynamic token retrieval.\n * Ideal for enterprise integrations where the parent application manages auth.\n *\n * @example\n * ```typescript\n * const authProvider = new CallbackAuthProvider({\n *   getToken: async () => {\n *     return authService.getAccessToken();\n *   },\n *   onUnauthorized: async () => {\n *     const refreshed = await authService.refreshToken();\n *     return refreshed;\n *   },\n *   onForbidden: async () => {\n *     showError(\"You don't have permission to access this resource\");\n *   }\n * });\n * ```\n */\nexport class CallbackAuthProvider {\n    /** Function to get the current token */\n    getToken;\n    /** Optional unauthorized callback */\n    onUnauthorizedCallback;\n    /** Optional forbidden callback */\n    onForbiddenCallback;\n    /**\n     * Create a new CallbackAuthProvider\n     *\n     * @param config - Callback authentication configuration\n     */\n    constructor(config) {\n        this.getToken = config.getToken;\n        this.onUnauthorizedCallback = config.onUnauthorized;\n        this.onForbiddenCallback = config.onForbidden;\n    }\n    /**\n     * Get authentication headers\n     *\n     * Calls the getToken callback to retrieve the current token.\n     *\n     * @returns Promise resolving to authentication headers\n     */\n    async getAuthHeaders() {\n        const token = await this.getToken();\n        if (token) {\n            return { Authorization: `Bearer ${token}` };\n        }\n        return {};\n    }\n    /**\n     * Check if authenticated\n     *\n     * For callback-based auth, we assume authenticated if getToken exists.\n     * The actual token validity is checked when making requests.\n     *\n     * @returns true (assumes authenticated, actual check happens on request)\n     */\n    isAuthenticated() {\n        // For callback-based auth, we assume authenticated if getToken exists\n        // The actual token validity is checked when making requests\n        return true;\n    }\n    /**\n     * Handle unauthorized response\n     *\n     * Calls the onUnauthorized callback if provided.\n     *\n     * @returns Promise resolving to true if auth was refreshed\n     */\n    async onUnauthorized() {\n        if (this.onUnauthorizedCallback) {\n            return this.onUnauthorizedCallback();\n        }\n        return false;\n    }\n    /**\n     * Handle forbidden response\n     *\n     * Calls the onForbidden callback if provided.\n     */\n    async onForbidden() {\n        if (this.onForbiddenCallback) {\n            await this.onForbiddenCallback();\n        }\n    }\n}\n/**\n * No-op authentication provider\n *\n * Used when no authentication is required.\n * Provides empty headers and always returns not authenticated.\n */\nexport class NoAuthProvider {\n    /**\n     * Get authentication headers\n     *\n     * Returns empty headers (no auth).\n     *\n     * @returns Promise resolving to empty object\n     */\n    async getAuthHeaders() {\n        return {};\n    }\n    /**\n     * Check if authenticated\n     *\n     * Always returns false (no auth configured).\n     *\n     * @returns false\n     */\n    isAuthenticated() {\n        return false;\n    }\n}\n/**\n * Create an AuthProvider from legacy endpointConfig.auth configuration\n *\n * Used internally for backward compatibility with existing code that uses\n * the old auth configuration format in EndpointConfig.\n *\n * @param authConfig - Legacy auth configuration from EndpointConfig\n * @returns AuthProvider instance\n */\nexport function createAuthProviderFromLegacyConfig(authConfig) {\n    if (!authConfig || authConfig.type === \"none\") {\n        return new NoAuthProvider();\n    }\n    return new StaticAuthProvider(authConfig);\n}\n","/**\n * Event Handler Types for FlowDrop\n *\n * Defines high-level event handlers for enterprise integration.\n * These events allow parent applications to react to workflow lifecycle events.\n *\n * @module types/events\n */\n/**\n * Default feature values\n *\n * Used when features are not explicitly configured.\n */\nexport const DEFAULT_FEATURES = {\n    autoSaveDraft: true,\n    autoSaveDraftInterval: 30000,\n    showToasts: true\n};\n/**\n * Merge user-provided features with defaults\n *\n * @param features - User-provided feature configuration\n * @returns Complete feature configuration with defaults applied\n */\nexport function mergeFeatures(features) {\n    return {\n        ...DEFAULT_FEATURES,\n        ...features\n    };\n}\n","/**\n * API Client for FlowDrop Workflow Library\n */\n/**\n * HTTP API client for FlowDrop\n */\nexport class FlowDropApiClient {\n    baseUrl;\n    headers;\n    constructor(baseUrl, apiKey) {\n        this.baseUrl = baseUrl.replace(/\\/$/, '');\n        this.headers = {\n            'Content-Type': 'application/json'\n        };\n        if (apiKey) {\n            this.headers['Authorization'] = `Bearer ${apiKey}`;\n        }\n    }\n    /**\n     * Make HTTP request with error handling\n     */\n    async request(endpoint, options = {}) {\n        const url = `${this.baseUrl}${endpoint}`;\n        const config = {\n            headers: this.headers,\n            ...options\n        };\n        try {\n            const response = await fetch(url, config);\n            if (!response.ok) {\n                throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n            }\n            const data = await response.json();\n            return data;\n        }\n        catch (error) {\n            console.error('API request failed:', error);\n            throw new Error(`API request failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\n        }\n    }\n    /**\n     * Fetch available node types and their metadata\n     */\n    async getAvailableNodes() {\n        const response = await this.request('/nodes');\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to fetch available nodes');\n        }\n        return response.data;\n    }\n    /**\n     * Fetch nodes by category\n     */\n    async getNodesByCategory(category) {\n        const response = await this.request(`/nodes?category=${encodeURIComponent(category)}`);\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to fetch nodes by category');\n        }\n        return response.data;\n    }\n    /**\n     * Fetch a specific node's metadata\n     */\n    async getNodeMetadata(nodeId) {\n        const response = await this.request(`/nodes/${encodeURIComponent(nodeId)}`);\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to fetch node metadata');\n        }\n        return response.data;\n    }\n    /**\n     * Save a workflow\n     */\n    async saveWorkflow(workflow) {\n        const response = await this.request('/workflows', {\n            method: 'POST',\n            body: JSON.stringify(workflow)\n        });\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to save workflow');\n        }\n        return response.data;\n    }\n    /**\n     * Update an existing workflow\n     */\n    async updateWorkflow(workflowId, workflow) {\n        const response = await this.request(`/workflows/${encodeURIComponent(workflowId)}`, {\n            method: 'PUT',\n            body: JSON.stringify(workflow)\n        });\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to update workflow');\n        }\n        return response.data;\n    }\n    /**\n     * Load a workflow by ID\n     */\n    async loadWorkflow(workflowId) {\n        const response = await this.request(`/workflows/${encodeURIComponent(workflowId)}`);\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to load workflow');\n        }\n        return response.data;\n    }\n    /**\n     * List all workflows\n     */\n    async listWorkflows() {\n        const response = await this.request('/workflows');\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to list workflows');\n        }\n        return response.data;\n    }\n    /**\n     * Delete a workflow\n     */\n    async deleteWorkflow(workflowId) {\n        const response = await this.request(`/workflows/${encodeURIComponent(workflowId)}`, {\n            method: 'DELETE'\n        });\n        if (!response.success) {\n            throw new Error(response.error || 'Failed to delete workflow');\n        }\n    }\n    /**\n     * Execute a workflow\n     */\n    async executeWorkflow(workflowId, inputs) {\n        const response = await this.request(`/workflows/${encodeURIComponent(workflowId)}/execute`, {\n            method: 'POST',\n            body: JSON.stringify({ inputs })\n        });\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to execute workflow');\n        }\n        return response.data;\n    }\n    /**\n     * Get execution status\n     */\n    async getExecutionStatus(executionId) {\n        const response = await this.request(`/executions/${encodeURIComponent(executionId)}`);\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to get execution status');\n        }\n        return response.data;\n    }\n    /**\n     * Cancel workflow execution\n     */\n    async cancelExecution(executionId) {\n        const response = await this.request(`/executions/${encodeURIComponent(executionId)}/cancel`, {\n            method: 'POST'\n        });\n        if (!response.success) {\n            throw new Error(response.error || 'Failed to cancel execution');\n        }\n    }\n    /**\n     * Get execution logs\n     */\n    async getExecutionLogs(executionId) {\n        const response = await this.request(`/executions/${encodeURIComponent(executionId)}/logs`);\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to get execution logs');\n        }\n        return response.data;\n    }\n    /**\n     * Validate workflow configuration\n     */\n    async validateWorkflow(workflow) {\n        const response = await this.request('/workflows/validate', {\n            method: 'POST',\n            body: JSON.stringify(workflow)\n        });\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to validate workflow');\n        }\n        return response.data;\n    }\n    /**\n     * Export workflow as JSON\n     */\n    async exportWorkflow(workflowId) {\n        const response = await this.request(`/workflows/${encodeURIComponent(workflowId)}/export`);\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to export workflow');\n        }\n        return response.data;\n    }\n    /**\n     * Import workflow from JSON\n     */\n    async importWorkflow(workflowJson) {\n        const response = await this.request('/workflows/import', {\n            method: 'POST',\n            body: JSON.stringify({ workflow: workflowJson })\n        });\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to import workflow');\n        }\n        return response.data;\n    }\n    /**\n     * Fetch port configuration\n     */\n    async getPortConfig() {\n        const response = await this.request('/port-config');\n        if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to fetch port configuration');\n        }\n        return response.data;\n    }\n    /**\n     * Fetch pipeline data including job information and status\n     */\n    async getPipelineData(pipelineId) {\n        const response = await this.request(`/pipeline/${encodeURIComponent(pipelineId)}`);\n        return response;\n    }\n}\n","/**\n * FlowDrop Endpoint Configuration\n * Provides configurable endpoints for all API actions\n */\n/**\n * Default endpoint configuration\n */\nexport const defaultEndpointConfig = {\n    baseUrl: '/api/flowdrop',\n    endpoints: {\n        nodes: {\n            list: '/nodes',\n            get: '/nodes/{id}',\n            byCategory: '/nodes?category={category}',\n            metadata: '/nodes/{id}/metadata'\n        },\n        portConfig: '/port-config',\n        workflows: {\n            list: '/workflows',\n            get: '/workflows/{id}',\n            create: '/workflows',\n            update: '/workflows/{id}',\n            delete: '/workflows/{id}',\n            validate: '/workflows/validate',\n            export: '/workflows/{id}/export',\n            import: '/workflows/import'\n        },\n        executions: {\n            execute: '/workflows/{id}/execute',\n            status: '/executions/{id}',\n            cancel: '/executions/{id}/cancel',\n            logs: '/executions/{id}/logs',\n            history: '/executions'\n        },\n        pipelines: {\n            list: '/workflow/{workflow_id}/pipelines',\n            get: '/pipeline/{id}',\n            create: '/pipeline',\n            update: '/pipeline/{id}',\n            delete: '/pipeline/{id}',\n            status: '/pipeline/{id}/status',\n            logs: '/pipeline/{id}/logs',\n            execute: '/pipeline/{id}/execute',\n            stop: '/pipeline/{id}/stop'\n        },\n        templates: {\n            list: '/templates',\n            get: '/templates/{id}',\n            create: '/templates',\n            update: '/templates/{id}',\n            delete: '/templates/{id}'\n        },\n        users: {\n            profile: '/users/profile',\n            preferences: '/users/preferences'\n        },\n        system: {\n            health: '/system/health',\n            config: '/system/config',\n            version: '/system/version'\n        }\n    },\n    timeout: 30000,\n    retry: {\n        enabled: true,\n        maxAttempts: 3,\n        delay: 1000,\n        backoff: 'exponential'\n    }\n};\n/**\n * Create endpoint configuration with custom base URL\n */\nexport function createEndpointConfig(baseUrl, overrides) {\n    const config = {\n        ...defaultEndpointConfig,\n        baseUrl: baseUrl.replace(/\\/$/, ''),\n        ...overrides\n    };\n    return config;\n}\n/**\n * Build full URL for an endpoint\n */\nexport function buildEndpointUrl(config, endpointPath, params) {\n    let url = endpointPath;\n    // Replace path parameters\n    if (params) {\n        Object.entries(params).forEach(([key, value]) => {\n            url = url.replace(`{${key}}`, encodeURIComponent(value));\n        });\n    }\n    // Ensure URL starts with base URL\n    if (!url.startsWith('http') && !url.startsWith('//')) {\n        url = `${config.baseUrl}${url.startsWith('/') ? url : `/${url}`}`;\n    }\n    return url;\n}\n/**\n * Get HTTP method for an endpoint\n */\nexport function getEndpointMethod(config, endpointKey) {\n    return config.methods?.[endpointKey] || 'GET';\n}\n/**\n * Get custom headers for an endpoint\n */\nexport function getEndpointHeaders(config, endpointKey) {\n    const baseHeaders = {\n        'Content-Type': 'application/json'\n    };\n    // Add authentication headers\n    if (config.auth?.type === 'bearer' && config.auth.token) {\n        baseHeaders['Authorization'] = `Bearer ${config.auth.token}`;\n    }\n    else if (config.auth?.type === 'api_key' && config.auth.apiKey) {\n        baseHeaders['X-API-Key'] = config.auth.apiKey;\n    }\n    else if (config.auth?.type === 'custom' && config.auth.headers) {\n        Object.assign(baseHeaders, config.auth.headers);\n    }\n    // Add endpoint-specific headers\n    const endpointHeaders = config.headers?.[endpointKey];\n    if (endpointHeaders) {\n        Object.assign(baseHeaders, endpointHeaders);\n    }\n    return baseHeaders;\n}\n","/**\n * Enhanced API Client for FlowDrop\n *\n * Uses configurable endpoints and supports pluggable authentication providers.\n *\n * @module api/enhanced-client\n */\nimport { buildEndpointUrl, getEndpointMethod, getEndpointHeaders } from \"../config/endpoints.js\";\nimport { createAuthProviderFromLegacyConfig } from \"../types/auth.js\";\n/**\n * API error with additional context\n */\nexport class ApiError extends Error {\n    /** HTTP status code */\n    status;\n    /** Original error data from API */\n    errorData;\n    /** Operation that was being performed */\n    operation;\n    constructor(message, status, operation, errorData = {}) {\n        super(message);\n        this.name = \"ApiError\";\n        this.status = status;\n        this.operation = operation;\n        this.errorData = errorData;\n    }\n}\n/**\n * Enhanced HTTP API client for FlowDrop with configurable endpoints\n *\n * Supports pluggable authentication via AuthProvider interface.\n *\n * @example\n * ```typescript\n * // With AuthProvider\n * const client = new EnhancedFlowDropApiClient(config, authProvider);\n *\n * // Backward compatible (uses config.auth)\n * const client = new EnhancedFlowDropApiClient(config);\n * ```\n */\nexport class EnhancedFlowDropApiClient {\n    config;\n    authProvider;\n    /**\n     * Create a new EnhancedFlowDropApiClient\n     *\n     * @param config - Endpoint configuration\n     * @param authProvider - Optional authentication provider (if not provided, uses config.auth)\n     */\n    constructor(config, authProvider) {\n        this.config = config;\n        // Use provided AuthProvider or create one from legacy config\n        this.authProvider = authProvider ?? createAuthProviderFromLegacyConfig(config.auth);\n    }\n    /**\n     * Make HTTP request with error handling, retry logic, and auth support\n     *\n     * @param endpointKey - Key identifying the endpoint (for method/header lookup)\n     * @param endpointPath - The endpoint path template\n     * @param params - URL parameters to substitute\n     * @param options - Additional fetch options\n     * @param operation - Description of the operation (for error messages)\n     */\n    async request(endpointKey, endpointPath, params, options = {}, operation = \"API request\") {\n        const url = buildEndpointUrl(this.config, endpointPath, params);\n        const method = options.method ?? getEndpointMethod(this.config, endpointKey);\n        const configHeaders = getEndpointHeaders(this.config, endpointKey);\n        // Get auth headers from provider\n        const authHeaders = await this.authProvider.getAuthHeaders();\n        // Merge headers: config headers < auth headers < request-specific headers\n        const headers = {\n            ...configHeaders,\n            ...authHeaders,\n            ...options.headers\n        };\n        const fetchConfig = {\n            method,\n            headers,\n            ...options\n        };\n        let lastError = null;\n        const maxAttempts = this.config.retry?.enabled ? this.config.retry.maxAttempts : 1;\n        for (let attempt = 1; attempt <= maxAttempts; attempt++) {\n            try {\n                const response = await fetch(url, fetchConfig);\n                // Handle 401 Unauthorized\n                if (response.status === 401) {\n                    if (this.authProvider.onUnauthorized) {\n                        const refreshed = await this.authProvider.onUnauthorized();\n                        if (refreshed && attempt < maxAttempts) {\n                            // Get new auth headers and retry\n                            const newAuthHeaders = await this.authProvider.getAuthHeaders();\n                            fetchConfig.headers = {\n                                ...configHeaders,\n                                ...newAuthHeaders,\n                                ...options.headers\n                            };\n                            continue; // Retry with new headers\n                        }\n                    }\n                    throw new ApiError(\"Unauthorized\", 401, operation, {});\n                }\n                // Handle 403 Forbidden\n                if (response.status === 403) {\n                    if (this.authProvider.onForbidden) {\n                        await this.authProvider.onForbidden();\n                    }\n                    throw new ApiError(\"Forbidden\", 403, operation, {});\n                }\n                // Handle other errors\n                if (!response.ok) {\n                    const errorData = await response.json().catch(() => ({}));\n                    throw new ApiError(errorData.error ?? `HTTP ${response.status}: ${response.statusText}`, response.status, operation, errorData);\n                }\n                const data = await response.json();\n                return data;\n            }\n            catch (error) {\n                // If it's already an ApiError, preserve it\n                if (error instanceof ApiError) {\n                    lastError = error;\n                }\n                else {\n                    lastError = error instanceof Error ? error : new Error(String(error));\n                }\n                // Don't retry on auth errors (401, 403) or last attempt\n                if ((lastError instanceof ApiError &&\n                    (lastError.status === 401 || lastError.status === 403)) ||\n                    attempt === maxAttempts) {\n                    console.error(`API request failed after ${attempt} attempts:`, lastError);\n                    throw lastError;\n                }\n                // Wait before retry\n                const delay = this.config.retry?.delay ?? 1000;\n                const backoffDelay = this.config.retry?.backoff === \"exponential\" ? delay * Math.pow(2, attempt - 1) : delay;\n                await new Promise((resolve) => setTimeout(resolve, backoffDelay));\n            }\n        }\n        throw lastError;\n    }\n    /**\n     * Update the auth provider\n     *\n     * Useful for updating auth after token refresh in parent application.\n     * Note: Per specification, this should rarely be needed as auth is typically\n     * set at mount time and requires remount to change.\n     *\n     * @param authProvider - New authentication provider\n     */\n    setAuthProvider(authProvider) {\n        this.authProvider = authProvider;\n    }\n    /**\n     * Get current auth provider\n     *\n     * @returns The current AuthProvider instance\n     */\n    getAuthProvider() {\n        return this.authProvider;\n    }\n    // =========================================================================\n    // Node API Methods\n    // =========================================================================\n    /**\n     * Fetch all available node types\n     */\n    async getAvailableNodes() {\n        const response = await this.request(\"nodes.list\", this.config.endpoints.nodes.list, undefined, {}, \"fetch available nodes\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to fetch available nodes\");\n        }\n        return response.data;\n    }\n    /**\n     * Fetch nodes filtered by category\n     */\n    async getNodesByCategory(category) {\n        const response = await this.request(\"nodes.byCategory\", this.config.endpoints.nodes.byCategory, { category }, {}, \"fetch nodes by category\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to fetch nodes by category\");\n        }\n        return response.data;\n    }\n    /**\n     * Fetch metadata for a specific node type\n     */\n    async getNodeMetadata(nodeId) {\n        const response = await this.request(\"nodes.metadata\", this.config.endpoints.nodes.metadata, { id: nodeId }, {}, \"fetch node metadata\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to fetch node metadata\");\n        }\n        return response.data;\n    }\n    // =========================================================================\n    // Workflow API Methods\n    // =========================================================================\n    /**\n     * Save a new workflow\n     */\n    async saveWorkflow(workflow) {\n        const response = await this.request(\"workflows.create\", this.config.endpoints.workflows.create, undefined, {\n            method: \"POST\",\n            body: JSON.stringify(workflow)\n        }, \"save workflow\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to save workflow\");\n        }\n        return response.data;\n    }\n    /**\n     * Update an existing workflow\n     */\n    async updateWorkflow(workflowId, workflow) {\n        const response = await this.request(\"workflows.update\", this.config.endpoints.workflows.update, { id: workflowId }, {\n            method: \"PUT\",\n            body: JSON.stringify(workflow)\n        }, \"update workflow\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to update workflow\");\n        }\n        return response.data;\n    }\n    /**\n     * Load a workflow by ID\n     */\n    async loadWorkflow(workflowId) {\n        const response = await this.request(\"workflows.get\", this.config.endpoints.workflows.get, { id: workflowId }, {}, \"load workflow\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to load workflow\");\n        }\n        return response.data;\n    }\n    /**\n     * List all workflows\n     */\n    async listWorkflows() {\n        const response = await this.request(\"workflows.list\", this.config.endpoints.workflows.list, undefined, {}, \"list workflows\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to list workflows\");\n        }\n        return response.data;\n    }\n    /**\n     * Delete a workflow\n     */\n    async deleteWorkflow(workflowId) {\n        const response = await this.request(\"workflows.delete\", this.config.endpoints.workflows.delete, { id: workflowId }, { method: \"DELETE\" }, \"delete workflow\");\n        if (!response.success) {\n            throw new Error(response.error ?? \"Failed to delete workflow\");\n        }\n    }\n    /**\n     * Validate a workflow\n     */\n    async validateWorkflow(workflow) {\n        const response = await this.request(\"workflows.validate\", this.config.endpoints.workflows.validate, undefined, {\n            method: \"POST\",\n            body: JSON.stringify(workflow)\n        }, \"validate workflow\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to validate workflow\");\n        }\n        return response.data;\n    }\n    /**\n     * Export a workflow as JSON string\n     */\n    async exportWorkflow(workflowId) {\n        const response = await this.request(\"workflows.export\", this.config.endpoints.workflows.export, { id: workflowId }, {}, \"export workflow\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to export workflow\");\n        }\n        return response.data;\n    }\n    /**\n     * Import a workflow from JSON\n     */\n    async importWorkflow(workflowJson) {\n        const response = await this.request(\"workflows.import\", this.config.endpoints.workflows.import, undefined, {\n            method: \"POST\",\n            body: JSON.stringify({ workflow: workflowJson })\n        }, \"import workflow\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to import workflow\");\n        }\n        return response.data;\n    }\n    // =========================================================================\n    // Execution API Methods\n    // =========================================================================\n    /**\n     * Execute a workflow\n     */\n    async executeWorkflow(workflowId, inputs) {\n        const response = await this.request(\"executions.execute\", this.config.endpoints.executions.execute, { id: workflowId }, {\n            method: \"POST\",\n            body: JSON.stringify({ inputs })\n        }, \"execute workflow\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to execute workflow\");\n        }\n        return response.data;\n    }\n    /**\n     * Get execution status\n     */\n    async getExecutionStatus(executionId) {\n        const response = await this.request(\"executions.status\", this.config.endpoints.executions.status, { id: executionId }, {}, \"get execution status\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to get execution status\");\n        }\n        return response.data;\n    }\n    /**\n     * Cancel a running execution\n     */\n    async cancelExecution(executionId) {\n        const response = await this.request(\"executions.cancel\", this.config.endpoints.executions.cancel, { id: executionId }, { method: \"POST\" }, \"cancel execution\");\n        if (!response.success) {\n            throw new Error(response.error ?? \"Failed to cancel execution\");\n        }\n    }\n    /**\n     * Get execution logs\n     */\n    async getExecutionLogs(executionId) {\n        const response = await this.request(\"executions.logs\", this.config.endpoints.executions.logs, { id: executionId }, {}, \"get execution logs\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to get execution logs\");\n        }\n        return response.data;\n    }\n    // =========================================================================\n    // Template API Methods\n    // =========================================================================\n    /**\n     * List available templates\n     */\n    async listTemplates() {\n        const response = await this.request(\"templates.list\", this.config.endpoints.templates.list, undefined, {}, \"list templates\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to list templates\");\n        }\n        return response.data;\n    }\n    /**\n     * Get a template by ID\n     */\n    async getTemplate(templateId) {\n        const response = await this.request(\"templates.get\", this.config.endpoints.templates.get, { id: templateId }, {}, \"get template\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to get template\");\n        }\n        return response.data;\n    }\n    // =========================================================================\n    // System API Methods\n    // =========================================================================\n    /**\n     * Get system health status\n     */\n    async getSystemHealth() {\n        const response = await this.request(\"system.health\", this.config.endpoints.system.health, undefined, {}, \"get system health\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to get system health\");\n        }\n        return response.data;\n    }\n    /**\n     * Get system configuration\n     */\n    async getSystemConfig() {\n        const response = await this.request(\"system.config\", this.config.endpoints.system.config, undefined, {}, \"get system config\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to get system config\");\n        }\n        return response.data;\n    }\n    /**\n     * Get system version information\n     */\n    async getSystemVersion() {\n        const response = await this.request(\"system.version\", this.config.endpoints.system.version, undefined, {}, \"get system version\");\n        if (!response.success || !response.data) {\n            throw new Error(response.error ?? \"Failed to get system version\");\n        }\n        return response.data;\n    }\n}\n","import { PUBLIC_VERSION } from '../version.js';\n\nif (typeof window !== 'undefined') {\n\t// @ts-expect-error\n\t((window.__svelte ??= {}).v ??= new Set()).add(PUBLIC_VERSION);\n}\n","// generated during release, do not modify\n\n/**\n * The current version, as set in package.json.\n * @type {string}\n */\nexport const VERSION = '5.41.3';\nexport const PUBLIC_VERSION = '5';\n","export const EACH_ITEM_REACTIVE = 1;\nexport const EACH_INDEX_REACTIVE = 1 << 1;\n/** See EachBlock interface metadata.is_controlled for an explanation what this is */\nexport const EACH_IS_CONTROLLED = 1 << 2;\nexport const EACH_IS_ANIMATED = 1 << 3;\nexport const EACH_ITEM_IMMUTABLE = 1 << 4;\n\nexport const PROPS_IS_IMMUTABLE = 1;\nexport const PROPS_IS_RUNES = 1 << 1;\nexport const PROPS_IS_UPDATED = 1 << 2;\nexport const PROPS_IS_BINDABLE = 1 << 3;\nexport const PROPS_IS_LAZY_INITIAL = 1 << 4;\n\nexport const TRANSITION_IN = 1;\nexport const TRANSITION_OUT = 1 << 1;\nexport const TRANSITION_GLOBAL = 1 << 2;\n\nexport const TEMPLATE_FRAGMENT = 1;\nexport const TEMPLATE_USE_IMPORT_NODE = 1 << 1;\nexport const TEMPLATE_USE_SVG = 1 << 2;\nexport const TEMPLATE_USE_MATHML = 1 << 3;\n\nexport const HYDRATION_START = '[';\n/** used to indicate that an `{:else}...` block was rendered */\nexport const HYDRATION_START_ELSE = '[!';\nexport const HYDRATION_END = ']';\nexport const HYDRATION_ERROR = {};\n\nexport const ELEMENT_IS_NAMESPACED = 1;\nexport const ELEMENT_PRESERVE_ATTRIBUTE_CASE = 1 << 1;\nexport const ELEMENT_IS_INPUT = 1 << 2;\n\nexport const UNINITIALIZED = Symbol();\n\n// Dev-time component properties\nexport const FILENAME = Symbol('filename');\nexport const HMR = Symbol('hmr');\n\nexport const NAMESPACE_HTML = 'http://www.w3.org/1999/xhtml';\nexport const NAMESPACE_SVG = 'http://www.w3.org/2000/svg';\nexport const NAMESPACE_MATHML = 'http://www.w3.org/1998/Math/MathML';\n\n// we use a list of ignorable runtime warnings because not every runtime warning\n// can be ignored and we want to keep the validation for svelte-ignore in place\nexport const IGNORABLE_RUNTIME_WARNINGS = /** @type {const} */ ([\n\t'await_waterfall',\n\t'await_reactivity_loss',\n\t'state_snapshot_uncloneable',\n\t'binding_property_non_reactive',\n\t'hydration_attribute_changed',\n\t'hydration_html_changed',\n\t'ownership_invalid_binding',\n\t'ownership_invalid_mutation'\n]);\n\n/**\n * Whitespace inside one of these elements will not result in\n * a whitespace node being created in any circumstances. (This\n * list is almost certainly very incomplete)\n * TODO this is currently unused\n */\nexport const ELEMENTS_WITHOUT_TEXT = ['audio', 'datalist', 'dl', 'optgroup', 'select', 'video'];\n\nexport const ATTACHMENT_KEY = '@attach';\n","const node_env = globalThis.process?.env?.NODE_ENV;\nexport default node_env && !node_env.toLowerCase().startsWith('prod');\n","// Store the references to globals in case someone tries to monkey patch these, causing the below\n// to de-opt (this occurs often when using popular extensions).\nexport var is_array = Array.isArray;\nexport var index_of = Array.prototype.indexOf;\nexport var array_from = Array.from;\nexport var object_keys = Object.keys;\nexport var define_property = Object.defineProperty;\nexport var get_descriptor = Object.getOwnPropertyDescriptor;\nexport var get_descriptors = Object.getOwnPropertyDescriptors;\nexport var object_prototype = Object.prototype;\nexport var array_prototype = Array.prototype;\nexport var get_prototype_of = Object.getPrototypeOf;\nexport var is_extensible = Object.isExtensible;\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\nexport const noop = () => {};\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n\n/**\n * @template [T=any]\n * @param {any} value\n * @returns {value is PromiseLike<T>}\n */\nexport function is_promise(value) {\n\treturn typeof value?.then === 'function';\n}\n\n/** @param {Function} fn */\nexport function run(fn) {\n\treturn fn();\n}\n\n/** @param {Array<() => void>} arr */\nexport function run_all(arr) {\n\tfor (var i = 0; i < arr.length; i++) {\n\t\tarr[i]();\n\t}\n}\n\n/**\n * TODO replace with Promise.withResolvers once supported widely enough\n * @template T\n */\nexport function deferred() {\n\t/** @type {(value: T) => void} */\n\tvar resolve;\n\n\t/** @type {(reason: any) => void} */\n\tvar reject;\n\n\t/** @type {Promise<T>} */\n\tvar promise = new Promise((res, rej) => {\n\t\tresolve = res;\n\t\treject = rej;\n\t});\n\n\t// @ts-expect-error\n\treturn { promise, resolve, reject };\n}\n\n/**\n * @template V\n * @param {V} value\n * @param {V | (() => V)} fallback\n * @param {boolean} [lazy]\n * @returns {V}\n */\nexport function fallback(value, fallback, lazy = false) {\n\treturn value === undefined\n\t\t? lazy\n\t\t\t? /** @type {() => V} */ (fallback)()\n\t\t\t: /** @type {V} */ (fallback)\n\t\t: value;\n}\n\n/**\n * When encountering a situation like `let [a, b, c] = $derived(blah())`,\n * we need to stash an intermediate value that `a`, `b`, and `c` derive\n * from, in case it's an iterable\n * @template T\n * @param {ArrayLike<T> | Iterable<T>} value\n * @param {number} [n]\n * @returns {Array<T>}\n */\nexport function to_array(value, n) {\n\t// return arrays unchanged\n\tif (Array.isArray(value)) {\n\t\treturn value;\n\t}\n\n\t// if value is not iterable, or `n` is unspecified (indicates a rest\n\t// element, which means we're not concerned about unbounded iterables)\n\t// convert to an array with `Array.from`\n\tif (n === undefined || !(Symbol.iterator in value)) {\n\t\treturn Array.from(value);\n\t}\n\n\t// otherwise, populate an array with `n` values\n\n\t/** @type {T[]} */\n\tconst array = [];\n\n\tfor (const element of value) {\n\t\tarray.push(element);\n\t\tif (array.length === n) break;\n\t}\n\n\treturn array;\n}\n","// General flags\nexport const DERIVED = 1 << 1;\nexport const EFFECT = 1 << 2;\nexport const RENDER_EFFECT = 1 << 3;\nexport const BLOCK_EFFECT = 1 << 4;\nexport const BRANCH_EFFECT = 1 << 5;\nexport const ROOT_EFFECT = 1 << 6;\nexport const BOUNDARY_EFFECT = 1 << 7;\nexport const CLEAN = 1 << 10;\nexport const DIRTY = 1 << 11;\nexport const MAYBE_DIRTY = 1 << 12;\nexport const INERT = 1 << 13;\nexport const DESTROYED = 1 << 14;\n\n// Flags exclusive to effects\nexport const EFFECT_RAN = 1 << 15;\n/** 'Transparent' effects do not create a transition boundary */\nexport const EFFECT_TRANSPARENT = 1 << 16;\nexport const INSPECT_EFFECT = 1 << 17;\nexport const HEAD_EFFECT = 1 << 18;\nexport const EFFECT_PRESERVED = 1 << 19;\nexport const USER_EFFECT = 1 << 20;\n\n// Flags exclusive to deriveds\nexport const UNOWNED = 1 << 8;\nexport const DISCONNECTED = 1 << 9;\n/**\n * Tells that we marked this derived and its reactions as visited during the \"mark as (maybe) dirty\"-phase.\n * Will be lifted during execution of the derived and during checking its dirty state (both are necessary\n * because a derived might be checked but not executed).\n */\nexport const WAS_MARKED = 1 << 15;\n\n// Flags used for async\nexport const REACTION_IS_UPDATING = 1 << 21;\nexport const ASYNC = 1 << 22;\n\nexport const ERROR_VALUE = 1 << 23;\n\nexport const STATE_SYMBOL = Symbol('$state');\nexport const LEGACY_PROPS = Symbol('legacy props');\nexport const LOADING_ATTR_SYMBOL = Symbol('');\nexport const PROXY_PATH_SYMBOL = Symbol('proxy path');\n\n/** allow users to ignore aborted signal errors if `reason.name === 'StaleReactionError` */\nexport const STALE_REACTION = new (class StaleReactionError extends Error {\n\tname = 'StaleReactionError';\n\tmessage = 'The reaction that called `getAbortSignal()` was re-run or destroyed';\n})();\n\nexport const ELEMENT_NODE = 1;\nexport const TEXT_NODE = 3;\nexport const COMMENT_NODE = 8;\nexport const DOCUMENT_FRAGMENT_NODE = 11;\n","/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\n/**\n * Cannot use `{@render children(...)}` if the parent component uses `let:` directives. Consider using a named snippet instead\n * @returns {never}\n */\nexport function invalid_default_snippet() {\n\tif (DEV) {\n\t\tconst error = new Error(`invalid_default_snippet\\nCannot use \\`{@render children(...)}\\` if the parent component uses \\`let:\\` directives. Consider using a named snippet instead\\nhttps://svelte.dev/e/invalid_default_snippet`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/invalid_default_snippet`);\n\t}\n}\n\n/**\n * A snippet function was passed invalid arguments. Snippets should only be instantiated via `{@render ...}`\n * @returns {never}\n */\nexport function invalid_snippet_arguments() {\n\tif (DEV) {\n\t\tconst error = new Error(`invalid_snippet_arguments\\nA snippet function was passed invalid arguments. Snippets should only be instantiated via \\`{@render ...}\\`\\nhttps://svelte.dev/e/invalid_snippet_arguments`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/invalid_snippet_arguments`);\n\t}\n}\n\n/**\n * `%name%(...)` can only be used during component initialisation\n * @param {string} name\n * @returns {never}\n */\nexport function lifecycle_outside_component(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`lifecycle_outside_component\\n\\`${name}(...)\\` can only be used during component initialisation\\nhttps://svelte.dev/e/lifecycle_outside_component`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/lifecycle_outside_component`);\n\t}\n}\n\n/**\n * Context was not set in a parent component\n * @returns {never}\n */\nexport function missing_context() {\n\tif (DEV) {\n\t\tconst error = new Error(`missing_context\\nContext was not set in a parent component\\nhttps://svelte.dev/e/missing_context`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/missing_context`);\n\t}\n}\n\n/**\n * Attempted to render a snippet without a `{@render}` block. This would cause the snippet code to be stringified instead of its content being rendered to the DOM. To fix this, change `{snippet}` to `{@render snippet()}`.\n * @returns {never}\n */\nexport function snippet_without_render_tag() {\n\tif (DEV) {\n\t\tconst error = new Error(`snippet_without_render_tag\\nAttempted to render a snippet without a \\`{@render}\\` block. This would cause the snippet code to be stringified instead of its content being rendered to the DOM. To fix this, change \\`{snippet}\\` to \\`{@render snippet()}\\`.\\nhttps://svelte.dev/e/snippet_without_render_tag`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/snippet_without_render_tag`);\n\t}\n}\n\n/**\n * `%name%` is not a store with a `subscribe` method\n * @param {string} name\n * @returns {never}\n */\nexport function store_invalid_shape(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`store_invalid_shape\\n\\`${name}\\` is not a store with a \\`subscribe\\` method\\nhttps://svelte.dev/e/store_invalid_shape`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/store_invalid_shape`);\n\t}\n}\n\n/**\n * The `this` prop on `<svelte:element>` must be a string, if defined\n * @returns {never}\n */\nexport function svelte_element_invalid_this_value() {\n\tif (DEV) {\n\t\tconst error = new Error(`svelte_element_invalid_this_value\\nThe \\`this\\` prop on \\`<svelte:element>\\` must be a string, if defined\\nhttps://svelte.dev/e/svelte_element_invalid_this_value`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/svelte_element_invalid_this_value`);\n\t}\n}","/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\nexport *  from '../shared/errors.js';\n\n/**\n * Cannot create a `$derived(...)` with an `await` expression outside of an effect tree\n * @returns {never}\n */\nexport function async_derived_orphan() {\n\tif (DEV) {\n\t\tconst error = new Error(`async_derived_orphan\\nCannot create a \\`$derived(...)\\` with an \\`await\\` expression outside of an effect tree\\nhttps://svelte.dev/e/async_derived_orphan`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/async_derived_orphan`);\n\t}\n}\n\n/**\n * Using `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\n * @returns {never}\n */\nexport function bind_invalid_checkbox_value() {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_invalid_checkbox_value\\nUsing \\`bind:value\\` together with a checkbox input is not allowed. Use \\`bind:checked\\` instead\\nhttps://svelte.dev/e/bind_invalid_checkbox_value`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_invalid_checkbox_value`);\n\t}\n}\n\n/**\n * Component %component% has an export named `%key%` that a consumer component is trying to access using `bind:%key%`, which is disallowed. Instead, use `bind:this` (e.g. `<%name% bind:this={component} />`) and then access the property on the bound component instance (e.g. `component.%key%`)\n * @param {string} component\n * @param {string} key\n * @param {string} name\n * @returns {never}\n */\nexport function bind_invalid_export(component, key, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_invalid_export\\nComponent ${component} has an export named \\`${key}\\` that a consumer component is trying to access using \\`bind:${key}\\`, which is disallowed. Instead, use \\`bind:this\\` (e.g. \\`<${name} bind:this={component} />\\`) and then access the property on the bound component instance (e.g. \\`component.${key}\\`)\\nhttps://svelte.dev/e/bind_invalid_export`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_invalid_export`);\n\t}\n}\n\n/**\n * A component is attempting to bind to a non-bindable property `%key%` belonging to %component% (i.e. `<%name% bind:%key%={...}>`). To mark a property as bindable: `let { %key% = $bindable() } = $props()`\n * @param {string} key\n * @param {string} component\n * @param {string} name\n * @returns {never}\n */\nexport function bind_not_bindable(key, component, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_not_bindable\\nA component is attempting to bind to a non-bindable property \\`${key}\\` belonging to ${component} (i.e. \\`<${name} bind:${key}={...}>\\`). To mark a property as bindable: \\`let { ${key} = $bindable() } = $props()\\`\\nhttps://svelte.dev/e/bind_not_bindable`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_not_bindable`);\n\t}\n}\n\n/**\n * Calling `%method%` on a component instance (of %component%) is no longer valid in Svelte 5\n * @param {string} method\n * @param {string} component\n * @returns {never}\n */\nexport function component_api_changed(method, component) {\n\tif (DEV) {\n\t\tconst error = new Error(`component_api_changed\\nCalling \\`${method}\\` on a component instance (of ${component}) is no longer valid in Svelte 5\\nhttps://svelte.dev/e/component_api_changed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/component_api_changed`);\n\t}\n}\n\n/**\n * Attempted to instantiate %component% with `new %name%`, which is no longer valid in Svelte 5. If this component is not under your control, set the `compatibility.componentApi` compiler option to `4` to keep it working.\n * @param {string} component\n * @param {string} name\n * @returns {never}\n */\nexport function component_api_invalid_new(component, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`component_api_invalid_new\\nAttempted to instantiate ${component} with \\`new ${name}\\`, which is no longer valid in Svelte 5. If this component is not under your control, set the \\`compatibility.componentApi\\` compiler option to \\`4\\` to keep it working.\\nhttps://svelte.dev/e/component_api_invalid_new`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/component_api_invalid_new`);\n\t}\n}\n\n/**\n * A derived value cannot reference itself recursively\n * @returns {never}\n */\nexport function derived_references_self() {\n\tif (DEV) {\n\t\tconst error = new Error(`derived_references_self\\nA derived value cannot reference itself recursively\\nhttps://svelte.dev/e/derived_references_self`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/derived_references_self`);\n\t}\n}\n\n/**\n * Keyed each block has duplicate key `%value%` at indexes %a% and %b%\n * @param {string} a\n * @param {string} b\n * @param {string | undefined | null} [value]\n * @returns {never}\n */\nexport function each_key_duplicate(a, b, value) {\n\tif (DEV) {\n\t\tconst error = new Error(`each_key_duplicate\\n${value\n\t\t\t? `Keyed each block has duplicate key \\`${value}\\` at indexes ${a} and ${b}`\n\t\t\t: `Keyed each block has duplicate key at indexes ${a} and ${b}`}\\nhttps://svelte.dev/e/each_key_duplicate`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/each_key_duplicate`);\n\t}\n}\n\n/**\n * `%rune%` cannot be used inside an effect cleanup function\n * @param {string} rune\n * @returns {never}\n */\nexport function effect_in_teardown(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_in_teardown\\n\\`${rune}\\` cannot be used inside an effect cleanup function\\nhttps://svelte.dev/e/effect_in_teardown`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_in_teardown`);\n\t}\n}\n\n/**\n * Effect cannot be created inside a `$derived` value that was not itself created inside an effect\n * @returns {never}\n */\nexport function effect_in_unowned_derived() {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_in_unowned_derived\\nEffect cannot be created inside a \\`$derived\\` value that was not itself created inside an effect\\nhttps://svelte.dev/e/effect_in_unowned_derived`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_in_unowned_derived`);\n\t}\n}\n\n/**\n * `%rune%` can only be used inside an effect (e.g. during component initialisation)\n * @param {string} rune\n * @returns {never}\n */\nexport function effect_orphan(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_orphan\\n\\`${rune}\\` can only be used inside an effect (e.g. during component initialisation)\\nhttps://svelte.dev/e/effect_orphan`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_orphan`);\n\t}\n}\n\n/**\n * `$effect.pending()` can only be called inside an effect or derived\n * @returns {never}\n */\nexport function effect_pending_outside_reaction() {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_pending_outside_reaction\\n\\`$effect.pending()\\` can only be called inside an effect or derived\\nhttps://svelte.dev/e/effect_pending_outside_reaction`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_pending_outside_reaction`);\n\t}\n}\n\n/**\n * Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state\n * @returns {never}\n */\nexport function effect_update_depth_exceeded() {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_update_depth_exceeded\\nMaximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state\\nhttps://svelte.dev/e/effect_update_depth_exceeded`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_update_depth_exceeded`);\n\t}\n}\n\n/**\n * Cannot use `flushSync` inside an effect\n * @returns {never}\n */\nexport function flush_sync_in_effect() {\n\tif (DEV) {\n\t\tconst error = new Error(`flush_sync_in_effect\\nCannot use \\`flushSync\\` inside an effect\\nhttps://svelte.dev/e/flush_sync_in_effect`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/flush_sync_in_effect`);\n\t}\n}\n\n/**\n * `getAbortSignal()` can only be called inside an effect or derived\n * @returns {never}\n */\nexport function get_abort_signal_outside_reaction() {\n\tif (DEV) {\n\t\tconst error = new Error(`get_abort_signal_outside_reaction\\n\\`getAbortSignal()\\` can only be called inside an effect or derived\\nhttps://svelte.dev/e/get_abort_signal_outside_reaction`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/get_abort_signal_outside_reaction`);\n\t}\n}\n\n/**\n * Failed to hydrate the application\n * @returns {never}\n */\nexport function hydration_failed() {\n\tif (DEV) {\n\t\tconst error = new Error(`hydration_failed\\nFailed to hydrate the application\\nhttps://svelte.dev/e/hydration_failed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/hydration_failed`);\n\t}\n}\n\n/**\n * Could not `{@render}` snippet due to the expression being `null` or `undefined`. Consider using optional chaining `{@render snippet?.()}`\n * @returns {never}\n */\nexport function invalid_snippet() {\n\tif (DEV) {\n\t\tconst error = new Error(`invalid_snippet\\nCould not \\`{@render}\\` snippet due to the expression being \\`null\\` or \\`undefined\\`. Consider using optional chaining \\`{@render snippet?.()}\\`\\nhttps://svelte.dev/e/invalid_snippet`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/invalid_snippet`);\n\t}\n}\n\n/**\n * `%name%(...)` cannot be used in runes mode\n * @param {string} name\n * @returns {never}\n */\nexport function lifecycle_legacy_only(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`lifecycle_legacy_only\\n\\`${name}(...)\\` cannot be used in runes mode\\nhttps://svelte.dev/e/lifecycle_legacy_only`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/lifecycle_legacy_only`);\n\t}\n}\n\n/**\n * Cannot do `bind:%key%={undefined}` when `%key%` has a fallback value\n * @param {string} key\n * @returns {never}\n */\nexport function props_invalid_value(key) {\n\tif (DEV) {\n\t\tconst error = new Error(`props_invalid_value\\nCannot do \\`bind:${key}={undefined}\\` when \\`${key}\\` has a fallback value\\nhttps://svelte.dev/e/props_invalid_value`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/props_invalid_value`);\n\t}\n}\n\n/**\n * Rest element properties of `$props()` such as `%property%` are readonly\n * @param {string} property\n * @returns {never}\n */\nexport function props_rest_readonly(property) {\n\tif (DEV) {\n\t\tconst error = new Error(`props_rest_readonly\\nRest element properties of \\`$props()\\` such as \\`${property}\\` are readonly\\nhttps://svelte.dev/e/props_rest_readonly`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/props_rest_readonly`);\n\t}\n}\n\n/**\n * The `%rune%` rune is only available inside `.svelte` and `.svelte.js/ts` files\n * @param {string} rune\n * @returns {never}\n */\nexport function rune_outside_svelte(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`rune_outside_svelte\\nThe \\`${rune}\\` rune is only available inside \\`.svelte\\` and \\`.svelte.js/ts\\` files\\nhttps://svelte.dev/e/rune_outside_svelte`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/rune_outside_svelte`);\n\t}\n}\n\n/**\n * `setContext` must be called when a component first initializes, not in a subsequent effect or after an `await` expression\n * @returns {never}\n */\nexport function set_context_after_init() {\n\tif (DEV) {\n\t\tconst error = new Error(`set_context_after_init\\n\\`setContext\\` must be called when a component first initializes, not in a subsequent effect or after an \\`await\\` expression\\nhttps://svelte.dev/e/set_context_after_init`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/set_context_after_init`);\n\t}\n}\n\n/**\n * Property descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\n * @returns {never}\n */\nexport function state_descriptors_fixed() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_descriptors_fixed\\nProperty descriptors defined on \\`$state\\` objects must contain \\`value\\` and always be \\`enumerable\\`, \\`configurable\\` and \\`writable\\`.\\nhttps://svelte.dev/e/state_descriptors_fixed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_descriptors_fixed`);\n\t}\n}\n\n/**\n * Cannot set prototype of `$state` object\n * @returns {never}\n */\nexport function state_prototype_fixed() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_prototype_fixed\\nCannot set prototype of \\`$state\\` object\\nhttps://svelte.dev/e/state_prototype_fixed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_prototype_fixed`);\n\t}\n}\n\n/**\n * Updating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\n * @returns {never}\n */\nexport function state_unsafe_mutation() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_unsafe_mutation\\nUpdating state inside \\`$derived(...)\\`, \\`$inspect(...)\\` or a template expression is forbidden. If the value should not be reactive, declare it without \\`$state\\`\\nhttps://svelte.dev/e/state_unsafe_mutation`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_unsafe_mutation`);\n\t}\n}\n\n/**\n * A `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\n * @returns {never}\n */\nexport function svelte_boundary_reset_onerror() {\n\tif (DEV) {\n\t\tconst error = new Error(`svelte_boundary_reset_onerror\\nA \\`<svelte:boundary>\\` \\`reset\\` function cannot be called while an error is still being handled\\nhttps://svelte.dev/e/svelte_boundary_reset_onerror`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/svelte_boundary_reset_onerror`);\n\t}\n}","/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\nvar bold = 'font-weight: bold';\nvar normal = 'font-weight: normal';\n\n/**\n * Assignment to `%property%` property (%location%) will evaluate to the right-hand side, not the value of `%property%` following the assignment. This may result in unexpected behaviour.\n * @param {string} property\n * @param {string} location\n */\nexport function assignment_value_stale(property, location) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] assignment_value_stale\\n%cAssignment to \\`${property}\\` property (${location}) will evaluate to the right-hand side, not the value of \\`${property}\\` following the assignment. This may result in unexpected behaviour.\\nhttps://svelte.dev/e/assignment_value_stale`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/assignment_value_stale`);\n\t}\n}\n\n/**\n * Detected reactivity loss when reading `%name%`. This happens when state is read in an async function after an earlier `await`\n * @param {string} name\n */\nexport function await_reactivity_loss(name) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] await_reactivity_loss\\n%cDetected reactivity loss when reading \\`${name}\\`. This happens when state is read in an async function after an earlier \\`await\\`\\nhttps://svelte.dev/e/await_reactivity_loss`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/await_reactivity_loss`);\n\t}\n}\n\n/**\n * An async derived, `%name%` (%location%) was not read immediately after it resolved. This often indicates an unnecessary waterfall, which can slow down your app\n * @param {string} name\n * @param {string} location\n */\nexport function await_waterfall(name, location) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] await_waterfall\\n%cAn async derived, \\`${name}\\` (${location}) was not read immediately after it resolved. This often indicates an unnecessary waterfall, which can slow down your app\\nhttps://svelte.dev/e/await_waterfall`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/await_waterfall`);\n\t}\n}\n\n/**\n * `%binding%` (%location%) is binding to a non-reactive property\n * @param {string} binding\n * @param {string | undefined | null} [location]\n */\nexport function binding_property_non_reactive(binding, location) {\n\tif (DEV) {\n\t\tconsole.warn(\n\t\t\t`%c[svelte] binding_property_non_reactive\\n%c${location\n\t\t\t\t? `\\`${binding}\\` (${location}) is binding to a non-reactive property`\n\t\t\t\t: `\\`${binding}\\` is binding to a non-reactive property`}\\nhttps://svelte.dev/e/binding_property_non_reactive`,\n\t\t\tbold,\n\t\t\tnormal\n\t\t);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/binding_property_non_reactive`);\n\t}\n}\n\n/**\n * Your `console.%method%` contained `$state` proxies. Consider using `$inspect(...)` or `$state.snapshot(...)` instead\n * @param {string} method\n */\nexport function console_log_state(method) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] console_log_state\\n%cYour \\`console.${method}\\` contained \\`$state\\` proxies. Consider using \\`$inspect(...)\\` or \\`$state.snapshot(...)\\` instead\\nhttps://svelte.dev/e/console_log_state`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/console_log_state`);\n\t}\n}\n\n/**\n * %handler% should be a function. Did you mean to %suggestion%?\n * @param {string} handler\n * @param {string} suggestion\n */\nexport function event_handler_invalid(handler, suggestion) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] event_handler_invalid\\n%c${handler} should be a function. Did you mean to ${suggestion}?\\nhttps://svelte.dev/e/event_handler_invalid`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/event_handler_invalid`);\n\t}\n}\n\n/**\n * The `%attribute%` attribute on `%html%` changed its value between server and client renders. The client value, `%value%`, will be ignored in favour of the server value\n * @param {string} attribute\n * @param {string} html\n * @param {string} value\n */\nexport function hydration_attribute_changed(attribute, html, value) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] hydration_attribute_changed\\n%cThe \\`${attribute}\\` attribute on \\`${html}\\` changed its value between server and client renders. The client value, \\`${value}\\`, will be ignored in favour of the server value\\nhttps://svelte.dev/e/hydration_attribute_changed`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/hydration_attribute_changed`);\n\t}\n}\n\n/**\n * The value of an `{@html ...}` block %location% changed between server and client renders. The client value will be ignored in favour of the server value\n * @param {string | undefined | null} [location]\n */\nexport function hydration_html_changed(location) {\n\tif (DEV) {\n\t\tconsole.warn(\n\t\t\t`%c[svelte] hydration_html_changed\\n%c${location\n\t\t\t\t? `The value of an \\`{@html ...}\\` block ${location} changed between server and client renders. The client value will be ignored in favour of the server value`\n\t\t\t\t: 'The value of an `{@html ...}` block changed between server and client renders. The client value will be ignored in favour of the server value'}\\nhttps://svelte.dev/e/hydration_html_changed`,\n\t\t\tbold,\n\t\t\tnormal\n\t\t);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/hydration_html_changed`);\n\t}\n}\n\n/**\n * Hydration failed because the initial UI does not match what was rendered on the server. The error occurred near %location%\n * @param {string | undefined | null} [location]\n */\nexport function hydration_mismatch(location) {\n\tif (DEV) {\n\t\tconsole.warn(\n\t\t\t`%c[svelte] hydration_mismatch\\n%c${location\n\t\t\t\t? `Hydration failed because the initial UI does not match what was rendered on the server. The error occurred near ${location}`\n\t\t\t\t: 'Hydration failed because the initial UI does not match what was rendered on the server'}\\nhttps://svelte.dev/e/hydration_mismatch`,\n\t\t\tbold,\n\t\t\tnormal\n\t\t);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/hydration_mismatch`);\n\t}\n}\n\n/**\n * The `render` function passed to `createRawSnippet` should return HTML for a single element\n */\nexport function invalid_raw_snippet_render() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] invalid_raw_snippet_render\\n%cThe \\`render\\` function passed to \\`createRawSnippet\\` should return HTML for a single element\\nhttps://svelte.dev/e/invalid_raw_snippet_render`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/invalid_raw_snippet_render`);\n\t}\n}\n\n/**\n * Detected a migrated `$:` reactive block in `%filename%` that both accesses and updates the same reactive value. This may cause recursive updates when converted to an `$effect`.\n * @param {string} filename\n */\nexport function legacy_recursive_reactive_block(filename) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] legacy_recursive_reactive_block\\n%cDetected a migrated \\`$:\\` reactive block in \\`${filename}\\` that both accesses and updates the same reactive value. This may cause recursive updates when converted to an \\`$effect\\`.\\nhttps://svelte.dev/e/legacy_recursive_reactive_block`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/legacy_recursive_reactive_block`);\n\t}\n}\n\n/**\n * Tried to unmount a component that was not mounted\n */\nexport function lifecycle_double_unmount() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] lifecycle_double_unmount\\n%cTried to unmount a component that was not mounted\\nhttps://svelte.dev/e/lifecycle_double_unmount`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/lifecycle_double_unmount`);\n\t}\n}\n\n/**\n * %parent% passed property `%prop%` to %child% with `bind:`, but its parent component %owner% did not declare `%prop%` as a binding. Consider creating a binding between %owner% and %parent% (e.g. `bind:%prop%={...}` instead of `%prop%={...}`)\n * @param {string} parent\n * @param {string} prop\n * @param {string} child\n * @param {string} owner\n */\nexport function ownership_invalid_binding(parent, prop, child, owner) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] ownership_invalid_binding\\n%c${parent} passed property \\`${prop}\\` to ${child} with \\`bind:\\`, but its parent component ${owner} did not declare \\`${prop}\\` as a binding. Consider creating a binding between ${owner} and ${parent} (e.g. \\`bind:${prop}={...}\\` instead of \\`${prop}={...}\\`)\\nhttps://svelte.dev/e/ownership_invalid_binding`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/ownership_invalid_binding`);\n\t}\n}\n\n/**\n * Mutating unbound props (`%name%`, at %location%) is strongly discouraged. Consider using `bind:%prop%={...}` in %parent% (or using a callback) instead\n * @param {string} name\n * @param {string} location\n * @param {string} prop\n * @param {string} parent\n */\nexport function ownership_invalid_mutation(name, location, prop, parent) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] ownership_invalid_mutation\\n%cMutating unbound props (\\`${name}\\`, at ${location}) is strongly discouraged. Consider using \\`bind:${prop}={...}\\` in ${parent} (or using a callback) instead\\nhttps://svelte.dev/e/ownership_invalid_mutation`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/ownership_invalid_mutation`);\n\t}\n}\n\n/**\n * The `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\n */\nexport function select_multiple_invalid_value() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] select_multiple_invalid_value\\n%cThe \\`value\\` property of a \\`<select multiple>\\` element should be an array, but it received a non-array value. The selection will be kept as is.\\nhttps://svelte.dev/e/select_multiple_invalid_value`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/select_multiple_invalid_value`);\n\t}\n}\n\n/**\n * Reactive `$state(...)` proxies and the values they proxy have different identities. Because of this, comparisons with `%operator%` will produce unexpected results\n * @param {string} operator\n */\nexport function state_proxy_equality_mismatch(operator) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] state_proxy_equality_mismatch\\n%cReactive \\`$state(...)\\` proxies and the values they proxy have different identities. Because of this, comparisons with \\`${operator}\\` will produce unexpected results\\nhttps://svelte.dev/e/state_proxy_equality_mismatch`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/state_proxy_equality_mismatch`);\n\t}\n}\n\n/**\n * Tried to unmount a state proxy, rather than a component\n */\nexport function state_proxy_unmount() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] state_proxy_unmount\\n%cTried to unmount a state proxy, rather than a component\\nhttps://svelte.dev/e/state_proxy_unmount`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/state_proxy_unmount`);\n\t}\n}\n\n/**\n * A `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\n */\nexport function svelte_boundary_reset_noop() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] svelte_boundary_reset_noop\\n%cA \\`<svelte:boundary>\\` \\`reset\\` function only resets the boundary the first time it is called\\nhttps://svelte.dev/e/svelte_boundary_reset_noop`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/svelte_boundary_reset_noop`);\n\t}\n}\n\n/**\n * The `slide` transition does not work correctly for elements with `display: %value%`\n * @param {string} value\n */\nexport function transition_slide_display(value) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] transition_slide_display\\n%cThe \\`slide\\` transition does not work correctly for elements with \\`display: ${value}\\`\\nhttps://svelte.dev/e/transition_slide_display`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/transition_slide_display`);\n\t}\n}","/** @import { Equals } from '#client' */\n\n/** @type {Equals} */\nexport function equals(value) {\n\treturn value === this.v;\n}\n\n/**\n * @param {unknown} a\n * @param {unknown} b\n * @returns {boolean}\n */\nexport function safe_not_equal(a, b) {\n\treturn a != a\n\t\t? b == b\n\t\t: a !== b || (a !== null && typeof a === 'object') || typeof a === 'function';\n}\n\n/**\n * @param {unknown} a\n * @param {unknown} b\n * @returns {boolean}\n */\nexport function not_equal(a, b) {\n\treturn a !== b;\n}\n\n/** @type {Equals} */\nexport function safe_equals(value) {\n\treturn !safe_not_equal(value, this.v);\n}\n","/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\nvar bold = 'font-weight: bold';\nvar normal = 'font-weight: normal';\n\n/**\n * `<svelte:element this=\"%tag%\">` is a void element  it cannot have content\n * @param {string} tag\n */\nexport function dynamic_void_element_content(tag) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] dynamic_void_element_content\\n%c\\`<svelte:element this=\"${tag}\">\\` is a void element  it cannot have content\\nhttps://svelte.dev/e/dynamic_void_element_content`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/dynamic_void_element_content`);\n\t}\n}\n\n/**\n * The following properties cannot be cloned with `$state.snapshot`  the return value contains the originals:\n * \n * %properties%\n * @param {string | undefined | null} [properties]\n */\nexport function state_snapshot_uncloneable(properties) {\n\tif (DEV) {\n\t\tconsole.warn(\n\t\t\t`%c[svelte] state_snapshot_uncloneable\\n%c${properties\n\t\t\t\t? `The following properties cannot be cloned with \\`$state.snapshot\\`  the return value contains the originals:\n\n${properties}`\n\t\t\t\t: 'Value cannot be cloned with `$state.snapshot`  the original value was returned'}\\nhttps://svelte.dev/e/state_snapshot_uncloneable`,\n\t\t\tbold,\n\t\t\tnormal\n\t\t);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/state_snapshot_uncloneable`);\n\t}\n}","/** @import { Snapshot } from './types' */\nimport { DEV } from 'esm-env';\nimport * as w from './warnings.js';\nimport { get_prototype_of, is_array, object_prototype } from './utils.js';\n\n/**\n * In dev, we keep track of which properties could not be cloned. In prod\n * we don't bother, but we keep a dummy array around so that the\n * signature stays the same\n * @type {string[]}\n */\nconst empty = [];\n\n/**\n * @template T\n * @param {T} value\n * @param {boolean} [skip_warning]\n * @param {boolean} [no_tojson]\n * @returns {Snapshot<T>}\n */\nexport function snapshot(value, skip_warning = false, no_tojson = false) {\n\tif (DEV && !skip_warning) {\n\t\t/** @type {string[]} */\n\t\tconst paths = [];\n\n\t\tconst copy = clone(value, new Map(), '', paths, null, no_tojson);\n\t\tif (paths.length === 1 && paths[0] === '') {\n\t\t\t// value could not be cloned\n\t\t\tw.state_snapshot_uncloneable();\n\t\t} else if (paths.length > 0) {\n\t\t\t// some properties could not be cloned\n\t\t\tconst slice = paths.length > 10 ? paths.slice(0, 7) : paths.slice(0, 10);\n\t\t\tconst excess = paths.length - slice.length;\n\n\t\t\tlet uncloned = slice.map((path) => `- <value>${path}`).join('\\n');\n\t\t\tif (excess > 0) uncloned += `\\n- ...and ${excess} more`;\n\n\t\t\tw.state_snapshot_uncloneable(uncloned);\n\t\t}\n\n\t\treturn copy;\n\t}\n\n\treturn clone(value, new Map(), '', empty, null, no_tojson);\n}\n\n/**\n * @template T\n * @param {T} value\n * @param {Map<T, Snapshot<T>>} cloned\n * @param {string} path\n * @param {string[]} paths\n * @param {null | T} [original] The original value, if `value` was produced from a `toJSON` call\n * @param {boolean} [no_tojson]\n * @returns {Snapshot<T>}\n */\nfunction clone(value, cloned, path, paths, original = null, no_tojson = false) {\n\tif (typeof value === 'object' && value !== null) {\n\t\tvar unwrapped = cloned.get(value);\n\t\tif (unwrapped !== undefined) return unwrapped;\n\n\t\tif (value instanceof Map) return /** @type {Snapshot<T>} */ (new Map(value));\n\t\tif (value instanceof Set) return /** @type {Snapshot<T>} */ (new Set(value));\n\n\t\tif (is_array(value)) {\n\t\t\tvar copy = /** @type {Snapshot<any>} */ (Array(value.length));\n\t\t\tcloned.set(value, copy);\n\n\t\t\tif (original !== null) {\n\t\t\t\tcloned.set(original, copy);\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < value.length; i += 1) {\n\t\t\t\tvar element = value[i];\n\t\t\t\tif (i in value) {\n\t\t\t\t\tcopy[i] = clone(element, cloned, DEV ? `${path}[${i}]` : path, paths, null, no_tojson);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn copy;\n\t\t}\n\n\t\tif (get_prototype_of(value) === object_prototype) {\n\t\t\t/** @type {Snapshot<any>} */\n\t\t\tcopy = {};\n\t\t\tcloned.set(value, copy);\n\n\t\t\tif (original !== null) {\n\t\t\t\tcloned.set(original, copy);\n\t\t\t}\n\n\t\t\tfor (var key in value) {\n\t\t\t\tcopy[key] = clone(\n\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\tvalue[key],\n\t\t\t\t\tcloned,\n\t\t\t\t\tDEV ? `${path}.${key}` : path,\n\t\t\t\t\tpaths,\n\t\t\t\t\tnull,\n\t\t\t\t\tno_tojson\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn copy;\n\t\t}\n\n\t\tif (value instanceof Date) {\n\t\t\treturn /** @type {Snapshot<T>} */ (structuredClone(value));\n\t\t}\n\n\t\tif (typeof (/** @type {T & { toJSON?: any } } */ (value).toJSON) === 'function' && !no_tojson) {\n\t\t\treturn clone(\n\t\t\t\t/** @type {T & { toJSON(): any } } */ (value).toJSON(),\n\t\t\t\tcloned,\n\t\t\t\tDEV ? `${path}.toJSON()` : path,\n\t\t\t\tpaths,\n\t\t\t\t// Associate the instance with the toJSON clone\n\t\t\t\tvalue\n\t\t\t);\n\t\t}\n\t}\n\n\tif (value instanceof EventTarget) {\n\t\t// can't be cloned\n\t\treturn /** @type {Snapshot<T>} */ (value);\n\t}\n\n\ttry {\n\t\treturn /** @type {Snapshot<T>} */ (structuredClone(value));\n\t} catch (e) {\n\t\tif (DEV) {\n\t\t\tpaths.push(path);\n\t\t}\n\n\t\treturn /** @type {Snapshot<T>} */ (value);\n\t}\n}\n","/** @import { Derived, Reaction, Value } from '#client' */\nimport { UNINITIALIZED } from '../../../constants.js';\nimport { snapshot } from '../../shared/clone.js';\nimport { define_property } from '../../shared/utils.js';\nimport { DERIVED, ASYNC, PROXY_PATH_SYMBOL, STATE_SYMBOL } from '#client/constants';\nimport { effect_tracking } from '../reactivity/effects.js';\nimport { active_reaction, untrack } from '../runtime.js';\n\n/**\n * @typedef {{\n *   traces: Error[];\n * }} TraceEntry\n */\n\n/** @type {{ reaction: Reaction | null, entries: Map<Value, TraceEntry> } | null} */\nexport let tracing_expressions = null;\n\n/**\n * @param {Value} signal\n * @param {TraceEntry} [entry]\n */\nfunction log_entry(signal, entry) {\n\tconst value = signal.v;\n\n\tif (value === UNINITIALIZED) {\n\t\treturn;\n\t}\n\n\tconst type = get_type(signal);\n\tconst current_reaction = /** @type {Reaction} */ (active_reaction);\n\tconst dirty = signal.wv > current_reaction.wv || current_reaction.wv === 0;\n\tconst style = dirty\n\t\t? 'color: CornflowerBlue; font-weight: bold'\n\t\t: 'color: grey; font-weight: normal';\n\n\t// eslint-disable-next-line no-console\n\tconsole.groupCollapsed(\n\t\tsignal.label ? `%c${type}%c ${signal.label}` : `%c${type}%c`,\n\t\tstyle,\n\t\tdirty ? 'font-weight: normal' : style,\n\t\ttypeof value === 'object' && value !== null && STATE_SYMBOL in value\n\t\t\t? snapshot(value, true)\n\t\t\t: value\n\t);\n\n\tif (type === '$derived') {\n\t\tconst deps = new Set(/** @type {Derived} */ (signal).deps);\n\t\tfor (const dep of deps) {\n\t\t\tlog_entry(dep);\n\t\t}\n\t}\n\n\tif (signal.created) {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.log(signal.created);\n\t}\n\n\tif (dirty && signal.updated) {\n\t\tfor (const updated of signal.updated.values()) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log(updated.error);\n\t\t}\n\t}\n\n\tif (entry) {\n\t\tfor (var trace of entry.traces) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log(trace);\n\t\t}\n\t}\n\n\t// eslint-disable-next-line no-console\n\tconsole.groupEnd();\n}\n\n/**\n * @param {Value} signal\n * @returns {'$state' | '$derived' | 'store'}\n */\nfunction get_type(signal) {\n\tif ((signal.f & (DERIVED | ASYNC)) !== 0) return '$derived';\n\treturn signal.label?.startsWith('$') ? 'store' : '$state';\n}\n\n/**\n * @template T\n * @param {() => string} label\n * @param {() => T} fn\n */\nexport function trace(label, fn) {\n\tvar previously_tracing_expressions = tracing_expressions;\n\n\ttry {\n\t\ttracing_expressions = { entries: new Map(), reaction: active_reaction };\n\n\t\tvar start = performance.now();\n\t\tvar value = fn();\n\t\tvar time = (performance.now() - start).toFixed(2);\n\n\t\tvar prefix = untrack(label);\n\n\t\tif (!effect_tracking()) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log(`${prefix} %cran outside of an effect (${time}ms)`, 'color: grey');\n\t\t} else if (tracing_expressions.entries.size === 0) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log(`${prefix} %cno reactive dependencies (${time}ms)`, 'color: grey');\n\t\t} else {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.group(`${prefix} %c(${time}ms)`, 'color: grey');\n\n\t\t\tvar entries = tracing_expressions.entries;\n\n\t\t\tuntrack(() => {\n\t\t\t\tfor (const [signal, traces] of entries) {\n\t\t\t\t\tlog_entry(signal, traces);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\ttracing_expressions = null;\n\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.groupEnd();\n\t\t}\n\n\t\treturn value;\n\t} finally {\n\t\ttracing_expressions = previously_tracing_expressions;\n\t}\n}\n\n/**\n * @param {string} label\n * @returns {Error & { stack: string } | null}\n */\nexport function get_stack(label) {\n\t// @ts-ignore stackTraceLimit doesn't exist everywhere\n\tconst limit = Error.stackTraceLimit;\n\n\t// @ts-ignore\n\tError.stackTraceLimit = Infinity;\n\tlet error = Error();\n\n\t// @ts-ignore\n\tError.stackTraceLimit = limit;\n\n\tconst stack = error.stack;\n\n\tif (!stack) return null;\n\n\tconst lines = stack.split('\\n');\n\tconst new_lines = ['\\n'];\n\n\tfor (let i = 0; i < lines.length; i++) {\n\t\tconst line = lines[i];\n\t\tconst posixified = line.replaceAll('\\\\', '/');\n\n\t\tif (line === 'Error') {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (line.includes('validate_each_keys')) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (posixified.includes('svelte/src/internal') || posixified.includes('node_modules/.vite')) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tnew_lines.push(line);\n\t}\n\n\tif (new_lines.length === 1) {\n\t\treturn null;\n\t}\n\n\tdefine_property(error, 'stack', {\n\t\tvalue: new_lines.join('\\n')\n\t});\n\n\tdefine_property(error, 'name', {\n\t\t// 'Error' suffix is required for stack traces to be rendered properly\n\t\tvalue: `${label}Error`\n\t});\n\n\treturn /** @type {Error & { stack: string }} */ (error);\n}\n\n/**\n * @param {Value} source\n * @param {string} label\n */\nexport function tag(source, label) {\n\tsource.label = label;\n\ttag_proxy(source.v, label);\n\n\treturn source;\n}\n\n/**\n * @param {unknown} value\n * @param {string} label\n */\nexport function tag_proxy(value, label) {\n\t// @ts-expect-error\n\tvalue?.[PROXY_PATH_SYMBOL]?.(label);\n\treturn value;\n}\n\n/**\n * @param {unknown} value\n */\nexport function label(value) {\n\tif (typeof value === 'symbol') return `Symbol(${value.description})`;\n\tif (typeof value === 'function') return '<function>';\n\tif (typeof value === 'object' && value) return '<object>';\n\treturn String(value);\n}\n","/** @import { ComponentContext, DevStackEntry, Effect } from '#client' */\nimport { DEV } from 'esm-env';\nimport * as e from './errors.js';\nimport { active_effect, active_reaction } from './runtime.js';\nimport { create_user_effect } from './reactivity/effects.js';\nimport { async_mode_flag, legacy_mode_flag } from '../flags/index.js';\nimport { FILENAME } from '../../constants.js';\nimport { BRANCH_EFFECT, EFFECT_RAN } from './constants.js';\n\n/** @type {ComponentContext | null} */\nexport let component_context = null;\n\n/** @param {ComponentContext | null} context */\nexport function set_component_context(context) {\n\tcomponent_context = context;\n}\n\n/** @type {DevStackEntry | null} */\nexport let dev_stack = null;\n\n/** @param {DevStackEntry | null} stack */\nexport function set_dev_stack(stack) {\n\tdev_stack = stack;\n}\n\n/**\n * Execute a callback with a new dev stack entry\n * @param {() => any} callback - Function to execute\n * @param {DevStackEntry['type']} type - Type of block/component\n * @param {any} component - Component function\n * @param {number} line - Line number\n * @param {number} column - Column number\n * @param {Record<string, any>} [additional] - Any additional properties to add to the dev stack entry\n * @returns {any}\n */\nexport function add_svelte_meta(callback, type, component, line, column, additional) {\n\tconst parent = dev_stack;\n\n\tdev_stack = {\n\t\ttype,\n\t\tfile: component[FILENAME],\n\t\tline,\n\t\tcolumn,\n\t\tparent,\n\t\t...additional\n\t};\n\n\ttry {\n\t\treturn callback();\n\t} finally {\n\t\tdev_stack = parent;\n\t}\n}\n\n/**\n * The current component function. Different from current component context:\n * ```html\n * <!-- App.svelte -->\n * <Foo>\n *   <Bar /> <!-- context == Foo.svelte, function == App.svelte -->\n * </Foo>\n * ```\n * @type {ComponentContext['function']}\n */\nexport let dev_current_component_function = null;\n\n/** @param {ComponentContext['function']} fn */\nexport function set_dev_current_component_function(fn) {\n\tdev_current_component_function = fn;\n}\n\n/**\n * Returns a `[get, set]` pair of functions for working with context in a type-safe way.\n *\n * `get` will throw an error if no parent component called `set`.\n *\n * @template T\n * @returns {[() => T, (context: T) => T]}\n * @since 5.40.0\n */\nexport function createContext() {\n\tconst key = {};\n\n\treturn [\n\t\t() => {\n\t\t\tif (!hasContext(key)) {\n\t\t\t\te.missing_context();\n\t\t\t}\n\n\t\t\treturn getContext(key);\n\t\t},\n\t\t(context) => setContext(key, context)\n\t];\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * [`createContext`](https://svelte.dev/docs/svelte/svelte#createContext) is a type-safe alternative.\n *\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\tconst context_map = get_or_init_context_map('getContext');\n\tconst result = /** @type {T} */ (context_map.get(key));\n\treturn result;\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * [`createContext`](https://svelte.dev/docs/svelte/svelte#createContext) is a type-safe alternative.\n *\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tconst context_map = get_or_init_context_map('setContext');\n\n\tif (async_mode_flag) {\n\t\tvar flags = /** @type {Effect} */ (active_effect).f;\n\t\tvar valid = !active_reaction && (flags & BRANCH_EFFECT) !== 0 && (flags & EFFECT_RAN) === 0;\n\n\t\tif (!valid) {\n\t\t\te.set_context_after_init();\n\t\t}\n\t}\n\n\tcontext_map.set(key, context);\n\treturn context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\tconst context_map = get_or_init_context_map('hasContext');\n\treturn context_map.has(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\tconst context_map = get_or_init_context_map('getAllContexts');\n\treturn /** @type {T} */ (context_map);\n}\n\n/**\n * @param {Record<string, unknown>} props\n * @param {any} runes\n * @param {Function} [fn]\n * @returns {void}\n */\nexport function push(props, runes = false, fn) {\n\tcomponent_context = {\n\t\tp: component_context,\n\t\tc: null,\n\t\te: null,\n\t\ts: props,\n\t\tx: null,\n\t\tl: legacy_mode_flag && !runes ? { s: null, u: null, $: [] } : null\n\t};\n\n\tif (DEV) {\n\t\t// component function\n\t\tcomponent_context.function = fn;\n\t\tdev_current_component_function = fn;\n\t}\n}\n\n/**\n * @template {Record<string, any>} T\n * @param {T} [component]\n * @returns {T}\n */\nexport function pop(component) {\n\tvar context = /** @type {ComponentContext} */ (component_context);\n\tvar effects = context.e;\n\n\tif (effects !== null) {\n\t\tcontext.e = null;\n\n\t\tfor (var fn of effects) {\n\t\t\tcreate_user_effect(fn);\n\t\t}\n\t}\n\n\tif (component !== undefined) {\n\t\tcontext.x = component;\n\t}\n\n\tcomponent_context = context.p;\n\n\tif (DEV) {\n\t\tdev_current_component_function = component_context?.function ?? null;\n\t}\n\n\treturn component ?? /** @type {T} */ ({});\n}\n\n/** @returns {boolean} */\nexport function is_runes() {\n\treturn !legacy_mode_flag || (component_context !== null && component_context.l === null);\n}\n\n/**\n * @param {string} name\n * @returns {Map<unknown, unknown>}\n */\nfunction get_or_init_context_map(name) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component(name);\n\t}\n\n\treturn (component_context.c ??= new Map(get_parent_context(component_context) || undefined));\n}\n\n/**\n * @param {ComponentContext} component_context\n * @returns {Map<unknown, unknown> | null}\n */\nfunction get_parent_context(component_context) {\n\tlet parent = component_context.p;\n\twhile (parent !== null) {\n\t\tconst context_map = parent.c;\n\t\tif (context_map !== null) {\n\t\t\treturn context_map;\n\t\t}\n\t\tparent = parent.p;\n\t}\n\treturn null;\n}\n","import { run_all } from '../../shared/utils.js';\nimport { is_flushing_sync } from '../reactivity/batch.js';\n\n/** @type {Array<() => void>} */\nlet micro_tasks = [];\n\nfunction run_micro_tasks() {\n\tvar tasks = micro_tasks;\n\tmicro_tasks = [];\n\trun_all(tasks);\n}\n\n/**\n * @param {() => void} fn\n */\nexport function queue_micro_task(fn) {\n\tif (micro_tasks.length === 0 && !is_flushing_sync) {\n\t\tvar tasks = micro_tasks;\n\t\tqueueMicrotask(() => {\n\t\t\t// If this is false, a flushSync happened in the meantime. Do _not_ run new scheduled microtasks in that case\n\t\t\t// as the ordering of microtasks would be broken at that point - consider this case:\n\t\t\t// - queue_micro_task schedules microtask A to flush task X\n\t\t\t// - synchronously after, flushSync runs, processing task X\n\t\t\t// - synchronously after, some other microtask B is scheduled, but not through queue_micro_task but for example a Promise.resolve() in user code\n\t\t\t// - synchronously after, queue_micro_task schedules microtask C to flush task Y\n\t\t\t// - one tick later, microtask A now resolves, flushing task Y before microtask B, which is incorrect\n\t\t\t// This if check prevents that race condition (that realistically will only happen in tests)\n\t\t\tif (tasks === micro_tasks) run_micro_tasks();\n\t\t});\n\t}\n\n\tmicro_tasks.push(fn);\n}\n\n/**\n * Synchronously run any queued tasks.\n */\nexport function flush_tasks() {\n\twhile (micro_tasks.length > 0) {\n\t\trun_micro_tasks();\n\t}\n}\n","/** @import { Derived, Effect } from '#client' */\n/** @import { Boundary } from './dom/blocks/boundary.js' */\nimport { DEV } from 'esm-env';\nimport { FILENAME } from '../../constants.js';\nimport { is_firefox } from './dom/operations.js';\nimport { ERROR_VALUE, BOUNDARY_EFFECT, EFFECT_RAN } from './constants.js';\nimport { define_property, get_descriptor } from '../shared/utils.js';\nimport { active_effect, active_reaction } from './runtime.js';\n\nconst adjustments = new WeakMap();\n\n/**\n * @param {unknown} error\n */\nexport function handle_error(error) {\n\tvar effect = active_effect;\n\n\t// for unowned deriveds, don't throw until we read the value\n\tif (effect === null) {\n\t\t/** @type {Derived} */ (active_reaction).f |= ERROR_VALUE;\n\t\treturn error;\n\t}\n\n\tif (DEV && error instanceof Error && !adjustments.has(error)) {\n\t\tadjustments.set(error, get_adjustments(error, effect));\n\t}\n\n\tif ((effect.f & EFFECT_RAN) === 0) {\n\t\t// if the error occurred while creating this subtree, we let it\n\t\t// bubble up until it hits a boundary that can handle it\n\t\tif ((effect.f & BOUNDARY_EFFECT) === 0) {\n\t\t\tif (!effect.parent && error instanceof Error) {\n\t\t\t\tapply_adjustments(error);\n\t\t\t}\n\n\t\t\tthrow error;\n\t\t}\n\n\t\t/** @type {Boundary} */ (effect.b).error(error);\n\t} else {\n\t\t// otherwise we bubble up the effect tree ourselves\n\t\tinvoke_error_boundary(error, effect);\n\t}\n}\n\n/**\n * @param {unknown} error\n * @param {Effect | null} effect\n */\nexport function invoke_error_boundary(error, effect) {\n\twhile (effect !== null) {\n\t\tif ((effect.f & BOUNDARY_EFFECT) !== 0) {\n\t\t\ttry {\n\t\t\t\t/** @type {Boundary} */ (effect.b).error(error);\n\t\t\t\treturn;\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\n\t\teffect = effect.parent;\n\t}\n\n\tif (error instanceof Error) {\n\t\tapply_adjustments(error);\n\t}\n\n\tthrow error;\n}\n\n/**\n * Add useful information to the error message/stack in development\n * @param {Error} error\n * @param {Effect} effect\n */\nfunction get_adjustments(error, effect) {\n\tconst message_descriptor = get_descriptor(error, 'message');\n\n\t// if the message was already changed and it's not configurable we can't change it\n\t// or it will throw a different error swallowing the original error\n\tif (message_descriptor && !message_descriptor.configurable) return;\n\n\tvar indent = is_firefox ? '  ' : '\\t';\n\tvar component_stack = `\\n${indent}in ${effect.fn?.name || '<unknown>'}`;\n\tvar context = effect.ctx;\n\n\twhile (context !== null) {\n\t\tcomponent_stack += `\\n${indent}in ${context.function?.[FILENAME].split('/').pop()}`;\n\t\tcontext = context.p;\n\t}\n\n\treturn {\n\t\tmessage: error.message + `\\n${component_stack}\\n`,\n\t\tstack: error.stack\n\t\t\t?.split('\\n')\n\t\t\t.filter((line) => !line.includes('svelte/src/internal'))\n\t\t\t.join('\\n')\n\t};\n}\n\n/**\n * @param {Error} error\n */\nfunction apply_adjustments(error) {\n\tconst adjusted = adjustments.get(error);\n\n\tif (adjusted) {\n\t\tdefine_property(error, 'message', {\n\t\t\tvalue: adjusted.message\n\t\t});\n\n\t\tdefine_property(error, 'stack', {\n\t\t\tvalue: adjusted.stack\n\t\t});\n\t}\n}\n","/** @import { Derived, Effect, Reaction, Source, Value } from '#client' */\nimport {\n\tBLOCK_EFFECT,\n\tBRANCH_EFFECT,\n\tCLEAN,\n\tDESTROYED,\n\tDIRTY,\n\tEFFECT,\n\tASYNC,\n\tINERT,\n\tRENDER_EFFECT,\n\tROOT_EFFECT,\n\tMAYBE_DIRTY,\n\tDERIVED,\n\tBOUNDARY_EFFECT\n} from '#client/constants';\nimport { async_mode_flag } from '../../flags/index.js';\nimport { deferred, define_property } from '../../shared/utils.js';\nimport {\n\tactive_effect,\n\tget,\n\tis_dirty,\n\tis_updating_effect,\n\tset_is_updating_effect,\n\tset_signal_status,\n\tupdate_effect\n} from '../runtime.js';\nimport * as e from '../errors.js';\nimport { flush_tasks, queue_micro_task } from '../dom/task.js';\nimport { DEV } from 'esm-env';\nimport { invoke_error_boundary } from '../error-handling.js';\nimport { old_values, source, update } from './sources.js';\nimport { inspect_effect, unlink_effect } from './effects.js';\n\n/**\n * @typedef {{\n *   parent: EffectTarget | null;\n *   effect: Effect | null;\n *   effects: Effect[];\n *   render_effects: Effect[];\n *   block_effects: Effect[];\n * }} EffectTarget\n */\n\n/** @type {Set<Batch>} */\nconst batches = new Set();\n\n/** @type {Batch | null} */\nexport let current_batch = null;\n\n/**\n * This is needed to avoid overwriting inputs in non-async mode\n * TODO 6.0 remove this, as non-async mode will go away\n * @type {Batch | null}\n */\nexport let previous_batch = null;\n\n/**\n * When time travelling (i.e. working in one batch, while other batches\n * still have ongoing work), we ignore the real values of affected\n * signals in favour of their values within the batch\n * @type {Map<Value, any> | null}\n */\nexport let batch_values = null;\n\n/** @type {Set<() => void>} */\nexport let effect_pending_updates = new Set();\n\n/** @type {Effect[]} */\nlet queued_root_effects = [];\n\n/** @type {Effect | null} */\nlet last_scheduled_effect = null;\n\nlet is_flushing = false;\nexport let is_flushing_sync = false;\n\nexport class Batch {\n\tcommitted = false;\n\n\t/**\n\t * The current values of any sources that are updated in this batch\n\t * They keys of this map are identical to `this.#previous`\n\t * @type {Map<Source, any>}\n\t */\n\tcurrent = new Map();\n\n\t/**\n\t * The values of any sources that are updated in this batch _before_ those updates took place.\n\t * They keys of this map are identical to `this.#current`\n\t * @type {Map<Source, any>}\n\t */\n\t#previous = new Map();\n\n\t/**\n\t * When the batch is committed (and the DOM is updated), we need to remove old branches\n\t * and append new ones by calling the functions added inside (if/each/key/etc) blocks\n\t * @type {Set<() => void>}\n\t */\n\t#callbacks = new Set();\n\n\t/**\n\t * The number of async effects that are currently in flight\n\t */\n\t#pending = 0;\n\n\t/**\n\t * The number of async effects that are currently in flight, _not_ inside a pending boundary\n\t */\n\t#blocking_pending = 0;\n\n\t/**\n\t * A deferred that resolves when the batch is committed, used with `settled()`\n\t * TODO replace with Promise.withResolvers once supported widely enough\n\t * @type {{ promise: Promise<void>, resolve: (value?: any) => void, reject: (reason: unknown) => void } | null}\n\t */\n\t#deferred = null;\n\n\t/**\n\t * Deferred effects (which run after async work has completed) that are DIRTY\n\t * @type {Effect[]}\n\t */\n\t#dirty_effects = [];\n\n\t/**\n\t * Deferred effects that are MAYBE_DIRTY\n\t * @type {Effect[]}\n\t */\n\t#maybe_dirty_effects = [];\n\n\t/**\n\t * A set of branches that still exist, but will be destroyed when this batch\n\t * is committed  we skip over these during `process`\n\t * @type {Set<Effect>}\n\t */\n\tskipped_effects = new Set();\n\n\t/**\n\t *\n\t * @param {Effect[]} root_effects\n\t */\n\tprocess(root_effects) {\n\t\tqueued_root_effects = [];\n\n\t\tprevious_batch = null;\n\n\t\tthis.apply();\n\n\t\t/** @type {EffectTarget} */\n\t\tvar target = {\n\t\t\tparent: null,\n\t\t\teffect: null,\n\t\t\teffects: [],\n\t\t\trender_effects: [],\n\t\t\tblock_effects: []\n\t\t};\n\n\t\tfor (const root of root_effects) {\n\t\t\tthis.#traverse_effect_tree(root, target);\n\t\t}\n\n\t\tthis.#resolve();\n\n\t\tif (this.#blocking_pending > 0) {\n\t\t\tthis.#defer_effects(target.effects);\n\t\t\tthis.#defer_effects(target.render_effects);\n\t\t\tthis.#defer_effects(target.block_effects);\n\t\t} else {\n\t\t\t// TODO append/detach blocks here, not in #commit\n\n\t\t\t// If sources are written to, then work needs to happen in a separate batch, else prior sources would be mixed with\n\t\t\t// newly updated sources, which could lead to infinite loops when effects run over and over again.\n\t\t\tprevious_batch = this;\n\t\t\tcurrent_batch = null;\n\n\t\t\tflush_queued_effects(target.render_effects);\n\t\t\tflush_queued_effects(target.effects);\n\n\t\t\tprevious_batch = null;\n\t\t}\n\n\t\tbatch_values = null;\n\t}\n\n\t/**\n\t * Traverse the effect tree, executing effects or stashing\n\t * them for later execution as appropriate\n\t * @param {Effect} root\n\t * @param {EffectTarget} target\n\t */\n\t#traverse_effect_tree(root, target) {\n\t\troot.f ^= CLEAN;\n\n\t\tvar effect = root.first;\n\n\t\twhile (effect !== null) {\n\t\t\tvar flags = effect.f;\n\t\t\tvar is_branch = (flags & (BRANCH_EFFECT | ROOT_EFFECT)) !== 0;\n\t\t\tvar is_skippable_branch = is_branch && (flags & CLEAN) !== 0;\n\n\t\t\tvar skip = is_skippable_branch || (flags & INERT) !== 0 || this.skipped_effects.has(effect);\n\n\t\t\tif ((effect.f & BOUNDARY_EFFECT) !== 0 && effect.b?.is_pending()) {\n\t\t\t\ttarget = {\n\t\t\t\t\tparent: target,\n\t\t\t\t\teffect,\n\t\t\t\t\teffects: [],\n\t\t\t\t\trender_effects: [],\n\t\t\t\t\tblock_effects: []\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (!skip && effect.fn !== null) {\n\t\t\t\tif (is_branch) {\n\t\t\t\t\teffect.f ^= CLEAN;\n\t\t\t\t} else if ((flags & EFFECT) !== 0) {\n\t\t\t\t\ttarget.effects.push(effect);\n\t\t\t\t} else if (async_mode_flag && (flags & RENDER_EFFECT) !== 0) {\n\t\t\t\t\ttarget.render_effects.push(effect);\n\t\t\t\t} else if (is_dirty(effect)) {\n\t\t\t\t\tif ((effect.f & BLOCK_EFFECT) !== 0) target.block_effects.push(effect);\n\t\t\t\t\tupdate_effect(effect);\n\t\t\t\t}\n\n\t\t\t\tvar child = effect.first;\n\n\t\t\t\tif (child !== null) {\n\t\t\t\t\teffect = child;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar parent = effect.parent;\n\t\t\teffect = effect.next;\n\n\t\t\twhile (effect === null && parent !== null) {\n\t\t\t\tif (parent === target.effect) {\n\t\t\t\t\t// TODO rather than traversing into pending boundaries and deferring the effects,\n\t\t\t\t\t// could we just attach the effects _to_ the pending boundary and schedule them\n\t\t\t\t\t// once the boundary is ready?\n\t\t\t\t\tthis.#defer_effects(target.effects);\n\t\t\t\t\tthis.#defer_effects(target.render_effects);\n\t\t\t\t\tthis.#defer_effects(target.block_effects);\n\n\t\t\t\t\ttarget = /** @type {EffectTarget} */ (target.parent);\n\t\t\t\t}\n\n\t\t\t\teffect = parent.next;\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {Effect[]} effects\n\t */\n\t#defer_effects(effects) {\n\t\tfor (const e of effects) {\n\t\t\tconst target = (e.f & DIRTY) !== 0 ? this.#dirty_effects : this.#maybe_dirty_effects;\n\t\t\ttarget.push(e);\n\n\t\t\t// mark as clean so they get scheduled if they depend on pending async state\n\t\t\tset_signal_status(e, CLEAN);\n\t\t}\n\t}\n\n\t/**\n\t * Associate a change to a given source with the current\n\t * batch, noting its previous and current values\n\t * @param {Source} source\n\t * @param {any} value\n\t */\n\tcapture(source, value) {\n\t\tif (!this.#previous.has(source)) {\n\t\t\tthis.#previous.set(source, value);\n\t\t}\n\n\t\tthis.current.set(source, source.v);\n\t\tbatch_values?.set(source, source.v);\n\t}\n\n\tactivate() {\n\t\tcurrent_batch = this;\n\t}\n\n\tdeactivate() {\n\t\tcurrent_batch = null;\n\t\tbatch_values = null;\n\t}\n\n\tflush() {\n\t\tif (queued_root_effects.length > 0) {\n\t\t\tthis.activate();\n\t\t\tflush_effects();\n\n\t\t\tif (current_batch !== null && current_batch !== this) {\n\t\t\t\t// this can happen if a new batch was created during `flush_effects()`\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.#resolve();\n\t\t}\n\n\t\tthis.deactivate();\n\n\t\tfor (const update of effect_pending_updates) {\n\t\t\teffect_pending_updates.delete(update);\n\t\t\tupdate();\n\n\t\t\tif (current_batch !== null) {\n\t\t\t\t// only do one at a time\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t#resolve() {\n\t\tif (this.#blocking_pending === 0) {\n\t\t\t// append/remove branches\n\t\t\tfor (const fn of this.#callbacks) fn();\n\t\t\tthis.#callbacks.clear();\n\t\t}\n\n\t\tif (this.#pending === 0) {\n\t\t\tthis.#commit();\n\t\t}\n\t}\n\n\t#commit() {\n\t\t// If there are other pending batches, they now need to be 'rebased' \n\t\t// in other words, we re-run block/async effects with the newly\n\t\t// committed state, unless the batch in question has a more\n\t\t// recent value for a given source\n\t\tif (batches.size > 1) {\n\t\t\tthis.#previous.clear();\n\n\t\t\tvar previous_batch_values = batch_values;\n\t\t\tvar is_earlier = true;\n\n\t\t\t/** @type {EffectTarget} */\n\t\t\tvar dummy_target = {\n\t\t\t\tparent: null,\n\t\t\t\teffect: null,\n\t\t\t\teffects: [],\n\t\t\t\trender_effects: [],\n\t\t\t\tblock_effects: []\n\t\t\t};\n\n\t\t\tfor (const batch of batches) {\n\t\t\t\tif (batch === this) {\n\t\t\t\t\tis_earlier = false;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t/** @type {Source[]} */\n\t\t\t\tconst sources = [];\n\n\t\t\t\tfor (const [source, value] of this.current) {\n\t\t\t\t\tif (batch.current.has(source)) {\n\t\t\t\t\t\tif (is_earlier && value !== batch.current.get(source)) {\n\t\t\t\t\t\t\t// bring the value up to date\n\t\t\t\t\t\t\tbatch.current.set(source, value);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// same value or later batch has more recent value,\n\t\t\t\t\t\t\t// no need to re-run these effects\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tsources.push(source);\n\t\t\t\t}\n\n\t\t\t\tif (sources.length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Re-run async/block effects that depend on distinct values changed in both batches\n\t\t\t\tconst others = [...batch.current.keys()].filter((s) => !this.current.has(s));\n\t\t\t\tif (others.length > 0) {\n\t\t\t\t\t/** @type {Set<Value>} */\n\t\t\t\t\tconst marked = new Set();\n\t\t\t\t\t/** @type {Map<Reaction, boolean>} */\n\t\t\t\t\tconst checked = new Map();\n\t\t\t\t\tfor (const source of sources) {\n\t\t\t\t\t\tmark_effects(source, others, marked, checked);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (queued_root_effects.length > 0) {\n\t\t\t\t\t\tcurrent_batch = batch;\n\t\t\t\t\t\tbatch.apply();\n\n\t\t\t\t\t\tfor (const root of queued_root_effects) {\n\t\t\t\t\t\t\tbatch.#traverse_effect_tree(root, dummy_target);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// TODO do we need to do anything with `target`? defer block effects?\n\n\t\t\t\t\t\tqueued_root_effects = [];\n\t\t\t\t\t\tbatch.deactivate();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcurrent_batch = null;\n\t\t\tbatch_values = previous_batch_values;\n\t\t}\n\n\t\tthis.committed = true;\n\t\tbatches.delete(this);\n\n\t\tthis.#deferred?.resolve();\n\t}\n\n\t/**\n\t *\n\t * @param {boolean} blocking\n\t */\n\tincrement(blocking) {\n\t\tthis.#pending += 1;\n\t\tif (blocking) this.#blocking_pending += 1;\n\t}\n\n\t/**\n\t *\n\t * @param {boolean} blocking\n\t */\n\tdecrement(blocking) {\n\t\tthis.#pending -= 1;\n\t\tif (blocking) this.#blocking_pending -= 1;\n\n\t\tfor (const e of this.#dirty_effects) {\n\t\t\tset_signal_status(e, DIRTY);\n\t\t\tschedule_effect(e);\n\t\t}\n\n\t\tfor (const e of this.#maybe_dirty_effects) {\n\t\t\tset_signal_status(e, MAYBE_DIRTY);\n\t\t\tschedule_effect(e);\n\t\t}\n\n\t\tthis.#dirty_effects = [];\n\t\tthis.#maybe_dirty_effects = [];\n\n\t\tthis.flush();\n\t}\n\n\t/** @param {() => void} fn */\n\tadd_callback(fn) {\n\t\tthis.#callbacks.add(fn);\n\t}\n\n\tsettled() {\n\t\treturn (this.#deferred ??= deferred()).promise;\n\t}\n\n\tstatic ensure() {\n\t\tif (current_batch === null) {\n\t\t\tconst batch = (current_batch = new Batch());\n\t\t\tbatches.add(current_batch);\n\n\t\t\tif (!is_flushing_sync) {\n\t\t\t\tBatch.enqueue(() => {\n\t\t\t\t\tif (current_batch !== batch) {\n\t\t\t\t\t\t// a flushSync happened in the meantime\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tbatch.flush();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn current_batch;\n\t}\n\n\t/** @param {() => void} task */\n\tstatic enqueue(task) {\n\t\tqueue_micro_task(task);\n\t}\n\n\tapply() {\n\t\tif (!async_mode_flag || batches.size === 1) return;\n\n\t\t// if there are multiple batches, we are 'time travelling' \n\t\t// we need to override values with the ones in this batch...\n\t\tbatch_values = new Map(this.current);\n\n\t\t// ...and undo changes belonging to other batches\n\t\tfor (const batch of batches) {\n\t\t\tif (batch === this) continue;\n\n\t\t\tfor (const [source, previous] of batch.#previous) {\n\t\t\t\tif (!batch_values.has(source)) {\n\t\t\t\t\tbatch_values.set(source, previous);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Synchronously flush any pending updates.\n * Returns void if no callback is provided, otherwise returns the result of calling the callback.\n * @template [T=void]\n * @param {(() => T) | undefined} [fn]\n * @returns {T}\n */\nexport function flushSync(fn) {\n\tif (async_mode_flag && active_effect !== null) {\n\t\t// We disallow this because it creates super-hard to reason about stack trace and because it's generally a bad idea\n\t\te.flush_sync_in_effect();\n\t}\n\n\tvar was_flushing_sync = is_flushing_sync;\n\tis_flushing_sync = true;\n\n\ttry {\n\t\tvar result;\n\n\t\tif (fn) {\n\t\t\tif (current_batch !== null) {\n\t\t\t\tflush_effects();\n\t\t\t}\n\n\t\t\tresult = fn();\n\t\t}\n\n\t\twhile (true) {\n\t\t\tflush_tasks();\n\n\t\t\tif (queued_root_effects.length === 0) {\n\t\t\t\tcurrent_batch?.flush();\n\n\t\t\t\t// we need to check again, in case we just updated an `$effect.pending()`\n\t\t\t\tif (queued_root_effects.length === 0) {\n\t\t\t\t\t// this would be reset in `flush_effects()` but since we are early returning here,\n\t\t\t\t\t// we need to reset it here as well in case the first time there's 0 queued root effects\n\t\t\t\t\tlast_scheduled_effect = null;\n\n\t\t\t\t\treturn /** @type {T} */ (result);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tflush_effects();\n\t\t}\n\t} finally {\n\t\tis_flushing_sync = was_flushing_sync;\n\t}\n}\n\nfunction flush_effects() {\n\tvar was_updating_effect = is_updating_effect;\n\tis_flushing = true;\n\n\ttry {\n\t\tvar flush_count = 0;\n\t\tset_is_updating_effect(true);\n\n\t\twhile (queued_root_effects.length > 0) {\n\t\t\tvar batch = Batch.ensure();\n\n\t\t\tif (flush_count++ > 1000) {\n\t\t\t\tif (DEV) {\n\t\t\t\t\tvar updates = new Map();\n\n\t\t\t\t\tfor (const source of batch.current.keys()) {\n\t\t\t\t\t\tfor (const [stack, update] of source.updated ?? []) {\n\t\t\t\t\t\t\tvar entry = updates.get(stack);\n\n\t\t\t\t\t\t\tif (!entry) {\n\t\t\t\t\t\t\t\tentry = { error: update.error, count: 0 };\n\t\t\t\t\t\t\t\tupdates.set(stack, entry);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tentry.count += update.count;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (const update of updates.values()) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error(update.error);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tinfinite_loop_guard();\n\t\t\t}\n\n\t\t\tbatch.process(queued_root_effects);\n\t\t\told_values.clear();\n\t\t}\n\t} finally {\n\t\tis_flushing = false;\n\t\tset_is_updating_effect(was_updating_effect);\n\n\t\tlast_scheduled_effect = null;\n\t}\n}\n\nfunction infinite_loop_guard() {\n\ttry {\n\t\te.effect_update_depth_exceeded();\n\t} catch (error) {\n\t\tif (DEV) {\n\t\t\t// stack contains no useful information, replace it\n\t\t\tdefine_property(error, 'stack', { value: '' });\n\t\t}\n\n\t\t// Best effort: invoke the boundary nearest the most recent\n\t\t// effect and hope that it's relevant to the infinite loop\n\t\tinvoke_error_boundary(error, last_scheduled_effect);\n\t}\n}\n\n/** @type {Set<Effect> | null} */\nexport let eager_block_effects = null;\n\n/**\n * @param {Array<Effect>} effects\n * @returns {void}\n */\nfunction flush_queued_effects(effects) {\n\tvar length = effects.length;\n\tif (length === 0) return;\n\n\tvar i = 0;\n\n\twhile (i < length) {\n\t\tvar effect = effects[i++];\n\n\t\tif ((effect.f & (DESTROYED | INERT)) === 0 && is_dirty(effect)) {\n\t\t\teager_block_effects = new Set();\n\n\t\t\tupdate_effect(effect);\n\n\t\t\t// Effects with no dependencies or teardown do not get added to the effect tree.\n\t\t\t// Deferred effects (e.g. `$effect(...)`) _are_ added to the tree because we\n\t\t\t// don't know if we need to keep them until they are executed. Doing the check\n\t\t\t// here (rather than in `update_effect`) allows us to skip the work for\n\t\t\t// immediate effects.\n\t\t\tif (effect.deps === null && effect.first === null && effect.nodes_start === null) {\n\t\t\t\t// if there's no teardown or abort controller we completely unlink\n\t\t\t\t// the effect from the graph\n\t\t\t\tif (effect.teardown === null && effect.ac === null) {\n\t\t\t\t\t// remove this effect from the graph\n\t\t\t\t\tunlink_effect(effect);\n\t\t\t\t} else {\n\t\t\t\t\t// keep the effect in the graph, but free up some memory\n\t\t\t\t\teffect.fn = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If update_effect() has a flushSync() in it, we may have flushed another flush_queued_effects(),\n\t\t\t// which already handled this logic and did set eager_block_effects to null.\n\t\t\tif (eager_block_effects?.size > 0) {\n\t\t\t\told_values.clear();\n\n\t\t\t\tfor (const e of eager_block_effects) {\n\t\t\t\t\t// Skip eager effects that have already been unmounted\n\t\t\t\t\tif ((e.f & (DESTROYED | INERT)) !== 0) continue;\n\n\t\t\t\t\t// Run effects in order from ancestor to descendant, else we could run into nullpointers\n\t\t\t\t\t/** @type {Effect[]} */\n\t\t\t\t\tconst ordered_effects = [e];\n\t\t\t\t\tlet ancestor = e.parent;\n\t\t\t\t\twhile (ancestor !== null) {\n\t\t\t\t\t\tif (eager_block_effects.has(ancestor)) {\n\t\t\t\t\t\t\teager_block_effects.delete(ancestor);\n\t\t\t\t\t\t\tordered_effects.push(ancestor);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tancestor = ancestor.parent;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let j = ordered_effects.length - 1; j >= 0; j--) {\n\t\t\t\t\t\tconst e = ordered_effects[j];\n\t\t\t\t\t\t// Skip eager effects that have already been unmounted\n\t\t\t\t\t\tif ((e.f & (DESTROYED | INERT)) !== 0) continue;\n\t\t\t\t\t\tupdate_effect(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\teager_block_effects.clear();\n\t\t\t}\n\t\t}\n\t}\n\n\teager_block_effects = null;\n}\n\n/**\n * This is similar to `mark_reactions`, but it only marks async/block effects\n * depending on `value` and at least one of the other `sources`, so that\n * these effects can re-run after another batch has been committed\n * @param {Value} value\n * @param {Source[]} sources\n * @param {Set<Value>} marked\n * @param {Map<Reaction, boolean>} checked\n */\nfunction mark_effects(value, sources, marked, checked) {\n\tif (marked.has(value)) return;\n\tmarked.add(value);\n\n\tif (value.reactions !== null) {\n\t\tfor (const reaction of value.reactions) {\n\t\t\tconst flags = reaction.f;\n\n\t\t\tif ((flags & DERIVED) !== 0) {\n\t\t\t\tmark_effects(/** @type {Derived} */ (reaction), sources, marked, checked);\n\t\t\t} else if (\n\t\t\t\t(flags & (ASYNC | BLOCK_EFFECT)) !== 0 &&\n\t\t\t\t(flags & DIRTY) === 0 && // we may have scheduled this one already\n\t\t\t\tdepends_on(reaction, sources, checked)\n\t\t\t) {\n\t\t\t\tset_signal_status(reaction, DIRTY);\n\t\t\t\tschedule_effect(/** @type {Effect} */ (reaction));\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * @param {Reaction} reaction\n * @param {Source[]} sources\n * @param {Map<Reaction, boolean>} checked\n */\nfunction depends_on(reaction, sources, checked) {\n\tconst depends = checked.get(reaction);\n\tif (depends !== undefined) return depends;\n\n\tif (reaction.deps !== null) {\n\t\tfor (const dep of reaction.deps) {\n\t\t\tif (sources.includes(dep)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ((dep.f & DERIVED) !== 0 && depends_on(/** @type {Derived} */ (dep), sources, checked)) {\n\t\t\t\tchecked.set(/** @type {Derived} */ (dep), true);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\tchecked.set(reaction, false);\n\n\treturn false;\n}\n\n/**\n * @param {Effect} signal\n * @returns {void}\n */\nexport function schedule_effect(signal) {\n\tvar effect = (last_scheduled_effect = signal);\n\n\twhile (effect.parent !== null) {\n\t\teffect = effect.parent;\n\t\tvar flags = effect.f;\n\n\t\t// if the effect is being scheduled because a parent (each/await/etc) block\n\t\t// updated an internal source, bail out or we'll cause a second flush\n\t\tif (is_flushing && effect === active_effect && (flags & BLOCK_EFFECT) !== 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ((flags & (ROOT_EFFECT | BRANCH_EFFECT)) !== 0) {\n\t\t\tif ((flags & CLEAN) === 0) return;\n\t\t\teffect.f ^= CLEAN;\n\t\t}\n\t}\n\n\tqueued_root_effects.push(effect);\n}\n\n/** @type {Source<number>[]} */\nlet eager_versions = [];\n\nfunction eager_flush() {\n\ttry {\n\t\tflushSync(() => {\n\t\t\tfor (const version of eager_versions) {\n\t\t\t\tupdate(version);\n\t\t\t}\n\t\t});\n\t} finally {\n\t\teager_versions = [];\n\t}\n}\n\n/**\n * Implementation of `$state.eager(fn())`\n * @template T\n * @param {() => T} fn\n * @returns {T}\n */\nexport function eager(fn) {\n\tvar version = source(0);\n\tvar initial = true;\n\tvar value = /** @type {T} */ (undefined);\n\n\tget(version);\n\n\tinspect_effect(() => {\n\t\tif (initial) {\n\t\t\t// the first time this runs, we create an inspect effect\n\t\t\t// that will run eagerly whenever the expression changes\n\t\t\tvar previous_batch_values = batch_values;\n\n\t\t\ttry {\n\t\t\t\tbatch_values = null;\n\t\t\t\tvalue = fn();\n\t\t\t} finally {\n\t\t\t\tbatch_values = previous_batch_values;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// the second time this effect runs, it's to schedule a\n\t\t// `version` update. since this will recreate the effect,\n\t\t// we don't need to evaluate the expression here\n\t\tif (eager_versions.length === 0) {\n\t\t\tqueue_micro_task(eager_flush);\n\t\t}\n\n\t\teager_versions.push(version);\n\t});\n\n\tinitial = false;\n\n\treturn value;\n}\n\n/**\n * Forcibly remove all current batches, to prevent cross-talk between tests\n */\nexport function clear() {\n\tbatches.clear();\n}\n","import { get, tick, untrack } from '../internal/client/runtime.js';\nimport { effect_tracking, render_effect } from '../internal/client/reactivity/effects.js';\nimport { source, increment } from '../internal/client/reactivity/sources.js';\nimport { tag } from '../internal/client/dev/tracing.js';\nimport { DEV } from 'esm-env';\nimport { queue_micro_task } from '../internal/client/dom/task.js';\n\n/**\n * Returns a `subscribe` function that integrates external event-based systems with Svelte's reactivity.\n * It's particularly useful for integrating with web APIs like `MediaQuery`, `IntersectionObserver`, or `WebSocket`.\n *\n * If `subscribe` is called inside an effect (including indirectly, for example inside a getter),\n * the `start` callback will be called with an `update` function. Whenever `update` is called, the effect re-runs.\n *\n * If `start` returns a cleanup function, it will be called when the effect is destroyed.\n *\n * If `subscribe` is called in multiple effects, `start` will only be called once as long as the effects\n * are active, and the returned teardown function will only be called when all effects are destroyed.\n *\n * It's best understood with an example. Here's an implementation of [`MediaQuery`](https://svelte.dev/docs/svelte/svelte-reactivity#MediaQuery):\n *\n * ```js\n * import { createSubscriber } from 'svelte/reactivity';\n * import { on } from 'svelte/events';\n *\n * export class MediaQuery {\n * \t#query;\n * \t#subscribe;\n *\n * \tconstructor(query) {\n * \t\tthis.#query = window.matchMedia(`(${query})`);\n *\n * \t\tthis.#subscribe = createSubscriber((update) => {\n * \t\t\t// when the `change` event occurs, re-run any effects that read `this.current`\n * \t\t\tconst off = on(this.#query, 'change', update);\n *\n * \t\t\t// stop listening when all the effects are destroyed\n * \t\t\treturn () => off();\n * \t\t});\n * \t}\n *\n * \tget current() {\n * \t\t// This makes the getter reactive, if read in an effect\n * \t\tthis.#subscribe();\n *\n * \t\t// Return the current state of the query, whether or not we're in an effect\n * \t\treturn this.#query.matches;\n * \t}\n * }\n * ```\n * @param {(update: () => void) => (() => void) | void} start\n * @since 5.7.0\n */\nexport function createSubscriber(start) {\n\tlet subscribers = 0;\n\tlet version = source(0);\n\t/** @type {(() => void) | void} */\n\tlet stop;\n\n\tif (DEV) {\n\t\ttag(version, 'createSubscriber version');\n\t}\n\n\treturn () => {\n\t\tif (effect_tracking()) {\n\t\t\tget(version);\n\n\t\t\trender_effect(() => {\n\t\t\t\tif (subscribers === 0) {\n\t\t\t\t\tstop = untrack(() => start(() => increment(version)));\n\t\t\t\t}\n\n\t\t\t\tsubscribers += 1;\n\n\t\t\t\treturn () => {\n\t\t\t\t\tqueue_micro_task(() => {\n\t\t\t\t\t\t// Only count down after a microtask, else we would reach 0 before our own render effect reruns,\n\t\t\t\t\t\t// but reach 1 again when the tick callback of the prior teardown runs. That would mean we\n\t\t\t\t\t\t// re-subcribe unnecessarily and create a memory leak because the old subscription is never cleaned up.\n\t\t\t\t\t\tsubscribers -= 1;\n\n\t\t\t\t\t\tif (subscribers === 0) {\n\t\t\t\t\t\t\tstop?.();\n\t\t\t\t\t\t\tstop = undefined;\n\t\t\t\t\t\t\t// Increment the version to ensure any dependent deriveds are marked dirty when the subscription is picked up again later.\n\t\t\t\t\t\t\t// If we didn't do this then the comparison of write versions would determine that the derived has a later version than\n\t\t\t\t\t\t\t// the subscriber, and it would not be re-run.\n\t\t\t\t\t\t\tincrement(version);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n}\n","/** @import { ComponentContext, ComponentContextLegacy, Derived, Effect, TemplateNode, TransitionManager } from '#client' */\nimport {\n\tis_dirty,\n\tactive_effect,\n\tactive_reaction,\n\tupdate_effect,\n\tget,\n\tis_destroying_effect,\n\tremove_reactions,\n\tset_active_reaction,\n\tset_is_destroying_effect,\n\tset_signal_status,\n\tuntrack,\n\tuntracking\n} from '../runtime.js';\nimport {\n\tDIRTY,\n\tBRANCH_EFFECT,\n\tRENDER_EFFECT,\n\tEFFECT,\n\tDESTROYED,\n\tINERT,\n\tEFFECT_RAN,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT,\n\tEFFECT_TRANSPARENT,\n\tDERIVED,\n\tUNOWNED,\n\tCLEAN,\n\tINSPECT_EFFECT,\n\tHEAD_EFFECT,\n\tMAYBE_DIRTY,\n\tEFFECT_PRESERVED,\n\tSTALE_REACTION,\n\tUSER_EFFECT,\n\tASYNC\n} from '#client/constants';\nimport * as e from '../errors.js';\nimport { DEV } from 'esm-env';\nimport { define_property } from '../../shared/utils.js';\nimport { get_next_sibling } from '../dom/operations.js';\nimport { component_context, dev_current_component_function, dev_stack } from '../context.js';\nimport { Batch, schedule_effect } from './batch.js';\nimport { flatten } from './async.js';\nimport { without_reactive_context } from '../dom/elements/bindings/shared.js';\n\n/**\n * @param {'$effect' | '$effect.pre' | '$inspect'} rune\n */\nexport function validate_effect(rune) {\n\tif (active_effect === null && active_reaction === null) {\n\t\te.effect_orphan(rune);\n\t}\n\n\tif (active_reaction !== null && (active_reaction.f & UNOWNED) !== 0 && active_effect === null) {\n\t\te.effect_in_unowned_derived();\n\t}\n\n\tif (is_destroying_effect) {\n\t\te.effect_in_teardown(rune);\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {Effect} parent_effect\n */\nfunction push_effect(effect, parent_effect) {\n\tvar parent_last = parent_effect.last;\n\tif (parent_last === null) {\n\t\tparent_effect.last = parent_effect.first = effect;\n\t} else {\n\t\tparent_last.next = effect;\n\t\teffect.prev = parent_last;\n\t\tparent_effect.last = effect;\n\t}\n}\n\n/**\n * @param {number} type\n * @param {null | (() => void | (() => void))} fn\n * @param {boolean} sync\n * @param {boolean} push\n * @returns {Effect}\n */\nfunction create_effect(type, fn, sync, push = true) {\n\tvar parent = active_effect;\n\n\tif (DEV) {\n\t\t// Ensure the parent is never an inspect effect\n\t\twhile (parent !== null && (parent.f & INSPECT_EFFECT) !== 0) {\n\t\t\tparent = parent.parent;\n\t\t}\n\t}\n\n\tif (parent !== null && (parent.f & INERT) !== 0) {\n\t\ttype |= INERT;\n\t}\n\n\t/** @type {Effect} */\n\tvar effect = {\n\t\tctx: component_context,\n\t\tdeps: null,\n\t\tnodes_start: null,\n\t\tnodes_end: null,\n\t\tf: type | DIRTY,\n\t\tfirst: null,\n\t\tfn,\n\t\tlast: null,\n\t\tnext: null,\n\t\tparent,\n\t\tb: parent && parent.b,\n\t\tprev: null,\n\t\tteardown: null,\n\t\ttransitions: null,\n\t\twv: 0,\n\t\tac: null\n\t};\n\n\tif (DEV) {\n\t\teffect.component_function = dev_current_component_function;\n\t}\n\n\tif (sync) {\n\t\ttry {\n\t\t\tupdate_effect(effect);\n\t\t\teffect.f |= EFFECT_RAN;\n\t\t} catch (e) {\n\t\t\tdestroy_effect(effect);\n\t\t\tthrow e;\n\t\t}\n\t} else if (fn !== null) {\n\t\tschedule_effect(effect);\n\t}\n\n\tif (push) {\n\t\t/** @type {Effect | null} */\n\t\tvar e = effect;\n\n\t\t// if an effect has already ran and doesn't need to be kept in the tree\n\t\t// (because it won't re-run, has no DOM, and has no teardown etc)\n\t\t// then we skip it and go to its child (if any)\n\t\tif (\n\t\t\tsync &&\n\t\t\te.deps === null &&\n\t\t\te.teardown === null &&\n\t\t\te.nodes_start === null &&\n\t\t\te.first === e.last && // either `null`, or a singular child\n\t\t\t(e.f & EFFECT_PRESERVED) === 0\n\t\t) {\n\t\t\te = e.first;\n\t\t}\n\n\t\tif (e !== null) {\n\t\t\te.parent = parent;\n\n\t\t\tif (parent !== null) {\n\t\t\t\tpush_effect(e, parent);\n\t\t\t}\n\n\t\t\t// if we're in a derived, add the effect there too\n\t\t\tif (\n\t\t\t\tactive_reaction !== null &&\n\t\t\t\t(active_reaction.f & DERIVED) !== 0 &&\n\t\t\t\t(type & ROOT_EFFECT) === 0\n\t\t\t) {\n\t\t\t\tvar derived = /** @type {Derived} */ (active_reaction);\n\t\t\t\t(derived.effects ??= []).push(e);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn effect;\n}\n\n/**\n * Internal representation of `$effect.tracking()`\n * @returns {boolean}\n */\nexport function effect_tracking() {\n\treturn active_reaction !== null && !untracking;\n}\n\n/**\n * @param {() => void} fn\n */\nexport function teardown(fn) {\n\tconst effect = create_effect(RENDER_EFFECT, null, false);\n\tset_signal_status(effect, CLEAN);\n\teffect.teardown = fn;\n\treturn effect;\n}\n\n/**\n * Internal representation of `$effect(...)`\n * @param {() => void | (() => void)} fn\n */\nexport function user_effect(fn) {\n\tvalidate_effect('$effect');\n\n\tif (DEV) {\n\t\tdefine_property(fn, 'name', {\n\t\t\tvalue: '$effect'\n\t\t});\n\t}\n\n\t// Non-nested `$effect(...)` in a component should be deferred\n\t// until the component is mounted\n\tvar flags = /** @type {Effect} */ (active_effect).f;\n\tvar defer = !active_reaction && (flags & BRANCH_EFFECT) !== 0 && (flags & EFFECT_RAN) === 0;\n\n\tif (defer) {\n\t\t// Top-level `$effect(...)` in an unmounted component  defer until mount\n\t\tvar context = /** @type {ComponentContext} */ (component_context);\n\t\t(context.e ??= []).push(fn);\n\t} else {\n\t\t// Everything else  create immediately\n\t\treturn create_user_effect(fn);\n\t}\n}\n\n/**\n * @param {() => void | (() => void)} fn\n */\nexport function create_user_effect(fn) {\n\treturn create_effect(EFFECT | USER_EFFECT, fn, false);\n}\n\n/**\n * Internal representation of `$effect.pre(...)`\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function user_pre_effect(fn) {\n\tvalidate_effect('$effect.pre');\n\tif (DEV) {\n\t\tdefine_property(fn, 'name', {\n\t\t\tvalue: '$effect.pre'\n\t\t});\n\t}\n\treturn create_effect(RENDER_EFFECT | USER_EFFECT, fn, true);\n}\n\n/** @param {() => void | (() => void)} fn */\nexport function inspect_effect(fn) {\n\treturn create_effect(INSPECT_EFFECT, fn, true);\n}\n\n/**\n * Internal representation of `$effect.root(...)`\n * @param {() => void | (() => void)} fn\n * @returns {() => void}\n */\nexport function effect_root(fn) {\n\tBatch.ensure();\n\tconst effect = create_effect(ROOT_EFFECT | EFFECT_PRESERVED, fn, true);\n\n\treturn () => {\n\t\tdestroy_effect(effect);\n\t};\n}\n\n/**\n * An effect root whose children can transition out\n * @param {() => void} fn\n * @returns {(options?: { outro?: boolean }) => Promise<void>}\n */\nexport function component_root(fn) {\n\tBatch.ensure();\n\tconst effect = create_effect(ROOT_EFFECT | EFFECT_PRESERVED, fn, true);\n\n\treturn (options = {}) => {\n\t\treturn new Promise((fulfil) => {\n\t\t\tif (options.outro) {\n\t\t\t\tpause_effect(effect, () => {\n\t\t\t\t\tdestroy_effect(effect);\n\t\t\t\t\tfulfil(undefined);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdestroy_effect(effect);\n\t\t\t\tfulfil(undefined);\n\t\t\t}\n\t\t});\n\t};\n}\n\n/**\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function effect(fn) {\n\treturn create_effect(EFFECT, fn, false);\n}\n\n/**\n * Internal representation of `$: ..`\n * @param {() => any} deps\n * @param {() => void | (() => void)} fn\n */\nexport function legacy_pre_effect(deps, fn) {\n\tvar context = /** @type {ComponentContextLegacy} */ (component_context);\n\n\t/** @type {{ effect: null | Effect, ran: boolean, deps: () => any }} */\n\tvar token = { effect: null, ran: false, deps };\n\n\tcontext.l.$.push(token);\n\n\ttoken.effect = render_effect(() => {\n\t\tdeps();\n\n\t\t// If this legacy pre effect has already run before the end of the reset, then\n\t\t// bail out to emulate the same behavior.\n\t\tif (token.ran) return;\n\n\t\ttoken.ran = true;\n\t\tuntrack(fn);\n\t});\n}\n\nexport function legacy_pre_effect_reset() {\n\tvar context = /** @type {ComponentContextLegacy} */ (component_context);\n\n\trender_effect(() => {\n\t\t// Run dirty `$:` statements\n\t\tfor (var token of context.l.$) {\n\t\t\ttoken.deps();\n\n\t\t\tvar effect = token.effect;\n\n\t\t\t// If the effect is CLEAN, then make it MAYBE_DIRTY. This ensures we traverse through\n\t\t\t// the effects dependencies and correctly ensure each dependency is up-to-date.\n\t\t\tif ((effect.f & CLEAN) !== 0) {\n\t\t\t\tset_signal_status(effect, MAYBE_DIRTY);\n\t\t\t}\n\n\t\t\tif (is_dirty(effect)) {\n\t\t\t\tupdate_effect(effect);\n\t\t\t}\n\n\t\t\ttoken.ran = false;\n\t\t}\n\t});\n}\n\n/**\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function async_effect(fn) {\n\treturn create_effect(ASYNC | EFFECT_PRESERVED, fn, true);\n}\n\n/**\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function render_effect(fn, flags = 0) {\n\treturn create_effect(RENDER_EFFECT | flags, fn, true);\n}\n\n/**\n * @param {(...expressions: any) => void | (() => void)} fn\n * @param {Array<() => any>} sync\n * @param {Array<() => Promise<any>>} async\n */\nexport function template_effect(fn, sync = [], async = []) {\n\tflatten(sync, async, (values) => {\n\t\tcreate_effect(RENDER_EFFECT, () => fn(...values.map(get)), true);\n\t});\n}\n\n/**\n * @param {(() => void)} fn\n * @param {number} flags\n */\nexport function block(fn, flags = 0) {\n\tvar effect = create_effect(BLOCK_EFFECT | flags, fn, true);\n\tif (DEV) {\n\t\teffect.dev_stack = dev_stack;\n\t}\n\treturn effect;\n}\n\n/**\n * @param {(() => void)} fn\n * @param {boolean} [push]\n */\nexport function branch(fn, push = true) {\n\treturn create_effect(BRANCH_EFFECT | EFFECT_PRESERVED, fn, true, push);\n}\n\n/**\n * @param {Effect} effect\n */\nexport function execute_effect_teardown(effect) {\n\tvar teardown = effect.teardown;\n\tif (teardown !== null) {\n\t\tconst previously_destroying_effect = is_destroying_effect;\n\t\tconst previous_reaction = active_reaction;\n\t\tset_is_destroying_effect(true);\n\t\tset_active_reaction(null);\n\t\ttry {\n\t\t\tteardown.call(null);\n\t\t} finally {\n\t\t\tset_is_destroying_effect(previously_destroying_effect);\n\t\t\tset_active_reaction(previous_reaction);\n\t\t}\n\t}\n}\n\n/**\n * @param {Effect} signal\n * @param {boolean} remove_dom\n * @returns {void}\n */\nexport function destroy_effect_children(signal, remove_dom = false) {\n\tvar effect = signal.first;\n\tsignal.first = signal.last = null;\n\n\twhile (effect !== null) {\n\t\tconst controller = effect.ac;\n\n\t\tif (controller !== null) {\n\t\t\twithout_reactive_context(() => {\n\t\t\t\tcontroller.abort(STALE_REACTION);\n\t\t\t});\n\t\t}\n\n\t\tvar next = effect.next;\n\n\t\tif ((effect.f & ROOT_EFFECT) !== 0) {\n\t\t\t// this is now an independent root\n\t\t\teffect.parent = null;\n\t\t} else {\n\t\t\tdestroy_effect(effect, remove_dom);\n\t\t}\n\n\t\teffect = next;\n\t}\n}\n\n/**\n * @param {Effect} signal\n * @returns {void}\n */\nexport function destroy_block_effect_children(signal) {\n\tvar effect = signal.first;\n\n\twhile (effect !== null) {\n\t\tvar next = effect.next;\n\t\tif ((effect.f & BRANCH_EFFECT) === 0) {\n\t\t\tdestroy_effect(effect);\n\t\t}\n\t\teffect = next;\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {boolean} [remove_dom]\n * @returns {void}\n */\nexport function destroy_effect(effect, remove_dom = true) {\n\tvar removed = false;\n\n\tif (\n\t\t(remove_dom || (effect.f & HEAD_EFFECT) !== 0) &&\n\t\teffect.nodes_start !== null &&\n\t\teffect.nodes_end !== null\n\t) {\n\t\tremove_effect_dom(effect.nodes_start, /** @type {TemplateNode} */ (effect.nodes_end));\n\t\tremoved = true;\n\t}\n\n\tdestroy_effect_children(effect, remove_dom && !removed);\n\tremove_reactions(effect, 0);\n\tset_signal_status(effect, DESTROYED);\n\n\tvar transitions = effect.transitions;\n\n\tif (transitions !== null) {\n\t\tfor (const transition of transitions) {\n\t\t\ttransition.stop();\n\t\t}\n\t}\n\n\texecute_effect_teardown(effect);\n\n\tvar parent = effect.parent;\n\n\t// If the parent doesn't have any children, then skip this work altogether\n\tif (parent !== null && parent.first !== null) {\n\t\tunlink_effect(effect);\n\t}\n\n\tif (DEV) {\n\t\teffect.component_function = null;\n\t}\n\n\t// `first` and `child` are nulled out in destroy_effect_children\n\t// we don't null out `parent` so that error propagation can work correctly\n\teffect.next =\n\t\teffect.prev =\n\t\teffect.teardown =\n\t\teffect.ctx =\n\t\teffect.deps =\n\t\teffect.fn =\n\t\teffect.nodes_start =\n\t\teffect.nodes_end =\n\t\teffect.ac =\n\t\t\tnull;\n}\n\n/**\n *\n * @param {TemplateNode | null} node\n * @param {TemplateNode} end\n */\nexport function remove_effect_dom(node, end) {\n\twhile (node !== null) {\n\t\t/** @type {TemplateNode | null} */\n\t\tvar next = node === end ? null : /** @type {TemplateNode} */ (get_next_sibling(node));\n\n\t\tnode.remove();\n\t\tnode = next;\n\t}\n}\n\n/**\n * Detach an effect from the effect tree, freeing up memory and\n * reducing the amount of work that happens on subsequent traversals\n * @param {Effect} effect\n */\nexport function unlink_effect(effect) {\n\tvar parent = effect.parent;\n\tvar prev = effect.prev;\n\tvar next = effect.next;\n\n\tif (prev !== null) prev.next = next;\n\tif (next !== null) next.prev = prev;\n\n\tif (parent !== null) {\n\t\tif (parent.first === effect) parent.first = next;\n\t\tif (parent.last === effect) parent.last = prev;\n\t}\n}\n\n/**\n * When a block effect is removed, we don't immediately destroy it or yank it\n * out of the DOM, because it might have transitions. Instead, we 'pause' it.\n * It stays around (in memory, and in the DOM) until outro transitions have\n * completed, and if the state change is reversed then we _resume_ it.\n * A paused effect does not update, and the DOM subtree becomes inert.\n * @param {Effect} effect\n * @param {() => void} [callback]\n * @param {boolean} [destroy]\n */\nexport function pause_effect(effect, callback, destroy = true) {\n\t/** @type {TransitionManager[]} */\n\tvar transitions = [];\n\n\tpause_children(effect, transitions, true);\n\n\trun_out_transitions(transitions, () => {\n\t\tif (destroy) destroy_effect(effect);\n\t\tif (callback) callback();\n\t});\n}\n\n/**\n * @param {TransitionManager[]} transitions\n * @param {() => void} fn\n */\nexport function run_out_transitions(transitions, fn) {\n\tvar remaining = transitions.length;\n\tif (remaining > 0) {\n\t\tvar check = () => --remaining || fn();\n\t\tfor (var transition of transitions) {\n\t\t\ttransition.out(check);\n\t\t}\n\t} else {\n\t\tfn();\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {TransitionManager[]} transitions\n * @param {boolean} local\n */\nexport function pause_children(effect, transitions, local) {\n\tif ((effect.f & INERT) !== 0) return;\n\teffect.f ^= INERT;\n\n\tif (effect.transitions !== null) {\n\t\tfor (const transition of effect.transitions) {\n\t\t\tif (transition.is_global || local) {\n\t\t\t\ttransitions.push(transition);\n\t\t\t}\n\t\t}\n\t}\n\n\tvar child = effect.first;\n\n\twhile (child !== null) {\n\t\tvar sibling = child.next;\n\t\tvar transparent = (child.f & EFFECT_TRANSPARENT) !== 0 || (child.f & BRANCH_EFFECT) !== 0;\n\t\t// TODO we don't need to call pause_children recursively with a linked list in place\n\t\t// it's slightly more involved though as we have to account for `transparent` changing\n\t\t// through the tree.\n\t\tpause_children(child, transitions, transparent ? local : false);\n\t\tchild = sibling;\n\t}\n}\n\n/**\n * The opposite of `pause_effect`. We call this if (for example)\n * `x` becomes falsy then truthy: `{#if x}...{/if}`\n * @param {Effect} effect\n */\nexport function resume_effect(effect) {\n\tresume_children(effect, true);\n}\n\n/**\n * @param {Effect} effect\n * @param {boolean} local\n */\nfunction resume_children(effect, local) {\n\tif ((effect.f & INERT) === 0) return;\n\teffect.f ^= INERT;\n\n\t// If a dependency of this effect changed while it was paused,\n\t// schedule the effect to update. we don't use `is_dirty`\n\t// here because we don't want to eagerly recompute a derived like\n\t// `{#if foo}{foo.bar()}{/if}` if `foo` is now `undefined\n\tif ((effect.f & CLEAN) === 0) {\n\t\tset_signal_status(effect, DIRTY);\n\t\tschedule_effect(effect);\n\t}\n\n\tvar child = effect.first;\n\n\twhile (child !== null) {\n\t\tvar sibling = child.next;\n\t\tvar transparent = (child.f & EFFECT_TRANSPARENT) !== 0 || (child.f & BRANCH_EFFECT) !== 0;\n\t\t// TODO we don't need to call resume_children recursively with a linked list in place\n\t\t// it's slightly more involved though as we have to account for `transparent` changing\n\t\t// through the tree.\n\t\tresume_children(child, transparent ? local : false);\n\t\tchild = sibling;\n\t}\n\n\tif (effect.transitions !== null) {\n\t\tfor (const transition of effect.transitions) {\n\t\t\tif (transition.is_global || local) {\n\t\t\t\ttransition.in();\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function aborted(effect = /** @type {Effect} */ (active_effect)) {\n\treturn (effect.f & DESTROYED) !== 0;\n}\n\n/**\n * @param {Effect} effect\n * @param {DocumentFragment} fragment\n */\nexport function move_effect(effect, fragment) {\n\tvar node = effect.nodes_start;\n\tvar end = effect.nodes_end;\n\n\twhile (node !== null) {\n\t\t/** @type {TemplateNode | null} */\n\t\tvar next = node === end ? null : /** @type {TemplateNode} */ (get_next_sibling(node));\n\n\t\tfragment.append(node);\n\t\tnode = next;\n\t}\n}\n","/** @import { Effect, Source, TemplateNode, } from '#client' */\nimport {\n\tBOUNDARY_EFFECT,\n\tCOMMENT_NODE,\n\tEFFECT_PRESERVED,\n\tEFFECT_TRANSPARENT\n} from '#client/constants';\nimport { HYDRATION_START_ELSE } from '../../../../constants.js';\nimport { component_context, set_component_context } from '../../context.js';\nimport { handle_error, invoke_error_boundary } from '../../error-handling.js';\nimport {\n\tblock,\n\tbranch,\n\tdestroy_effect,\n\tmove_effect,\n\tpause_effect\n} from '../../reactivity/effects.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tget,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../runtime.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tnext,\n\tskip_nodes,\n\tset_hydrate_node\n} from '../hydration.js';\nimport { get_next_sibling } from '../operations.js';\nimport { queue_micro_task } from '../task.js';\nimport * as e from '../../errors.js';\nimport * as w from '../../warnings.js';\nimport { DEV } from 'esm-env';\nimport { Batch, effect_pending_updates } from '../../reactivity/batch.js';\nimport { internal_set, source } from '../../reactivity/sources.js';\nimport { tag } from '../../dev/tracing.js';\nimport { createSubscriber } from '../../../../reactivity/create-subscriber.js';\n\n/**\n * @typedef {{\n * \t onerror?: (error: unknown, reset: () => void) => void;\n *   failed?: (anchor: Node, error: () => unknown, reset: () => () => void) => void;\n *   pending?: (anchor: Node) => void;\n * }} BoundaryProps\n */\n\nvar flags = EFFECT_TRANSPARENT | EFFECT_PRESERVED | BOUNDARY_EFFECT;\n\n/**\n * @param {TemplateNode} node\n * @param {BoundaryProps} props\n * @param {((anchor: Node) => void)} children\n * @returns {void}\n */\nexport function boundary(node, props, children) {\n\tnew Boundary(node, props, children);\n}\n\nexport class Boundary {\n\t/** @type {Boundary | null} */\n\tparent;\n\n\t#pending = false;\n\n\t/** @type {TemplateNode} */\n\t#anchor;\n\n\t/** @type {TemplateNode | null} */\n\t#hydrate_open = hydrating ? hydrate_node : null;\n\n\t/** @type {BoundaryProps} */\n\t#props;\n\n\t/** @type {((anchor: Node) => void)} */\n\t#children;\n\n\t/** @type {Effect} */\n\t#effect;\n\n\t/** @type {Effect | null} */\n\t#main_effect = null;\n\n\t/** @type {Effect | null} */\n\t#pending_effect = null;\n\n\t/** @type {Effect | null} */\n\t#failed_effect = null;\n\n\t/** @type {DocumentFragment | null} */\n\t#offscreen_fragment = null;\n\n\t#local_pending_count = 0;\n\t#pending_count = 0;\n\n\t#is_creating_fallback = false;\n\n\t/**\n\t * A source containing the number of pending async deriveds/expressions.\n\t * Only created if `$effect.pending()` is used inside the boundary,\n\t * otherwise updating the source results in needless `Batch.ensure()`\n\t * calls followed by no-op flushes\n\t * @type {Source<number> | null}\n\t */\n\t#effect_pending = null;\n\n\t#effect_pending_update = () => {\n\t\tif (this.#effect_pending) {\n\t\t\tinternal_set(this.#effect_pending, this.#local_pending_count);\n\t\t}\n\t};\n\n\t#effect_pending_subscriber = createSubscriber(() => {\n\t\tthis.#effect_pending = source(this.#local_pending_count);\n\n\t\tif (DEV) {\n\t\t\ttag(this.#effect_pending, '$effect.pending()');\n\t\t}\n\n\t\treturn () => {\n\t\t\tthis.#effect_pending = null;\n\t\t};\n\t});\n\n\t/**\n\t * @param {TemplateNode} node\n\t * @param {BoundaryProps} props\n\t * @param {((anchor: Node) => void)} children\n\t */\n\tconstructor(node, props, children) {\n\t\tthis.#anchor = node;\n\t\tthis.#props = props;\n\t\tthis.#children = children;\n\n\t\tthis.parent = /** @type {Effect} */ (active_effect).b;\n\n\t\tthis.#pending = !!this.#props.pending;\n\n\t\tthis.#effect = block(() => {\n\t\t\t/** @type {Effect} */ (active_effect).b = this;\n\n\t\t\tif (hydrating) {\n\t\t\t\tconst comment = this.#hydrate_open;\n\t\t\t\thydrate_next();\n\n\t\t\t\tconst server_rendered_pending =\n\t\t\t\t\t/** @type {Comment} */ (comment).nodeType === COMMENT_NODE &&\n\t\t\t\t\t/** @type {Comment} */ (comment).data === HYDRATION_START_ELSE;\n\n\t\t\t\tif (server_rendered_pending) {\n\t\t\t\t\tthis.#hydrate_pending_content();\n\t\t\t\t} else {\n\t\t\t\t\tthis.#hydrate_resolved_content();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tthis.#main_effect = branch(() => children(this.#anchor));\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthis.error(error);\n\t\t\t\t}\n\n\t\t\t\tif (this.#pending_count > 0) {\n\t\t\t\t\tthis.#show_pending_snippet();\n\t\t\t\t} else {\n\t\t\t\t\tthis.#pending = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}, flags);\n\n\t\tif (hydrating) {\n\t\t\tthis.#anchor = hydrate_node;\n\t\t}\n\t}\n\n\t#hydrate_resolved_content() {\n\t\ttry {\n\t\t\tthis.#main_effect = branch(() => this.#children(this.#anchor));\n\t\t} catch (error) {\n\t\t\tthis.error(error);\n\t\t}\n\n\t\t// Since server rendered resolved content, we never show pending state\n\t\t// Even if client-side async operations are still running, the content is already displayed\n\t\tthis.#pending = false;\n\t}\n\n\t#hydrate_pending_content() {\n\t\tconst pending = this.#props.pending;\n\t\tif (!pending) {\n\t\t\treturn;\n\t\t}\n\t\tthis.#pending_effect = branch(() => pending(this.#anchor));\n\n\t\tBatch.enqueue(() => {\n\t\t\tthis.#main_effect = this.#run(() => {\n\t\t\t\tBatch.ensure();\n\t\t\t\treturn branch(() => this.#children(this.#anchor));\n\t\t\t});\n\n\t\t\tif (this.#pending_count > 0) {\n\t\t\t\tthis.#show_pending_snippet();\n\t\t\t} else {\n\t\t\t\tpause_effect(/** @type {Effect} */ (this.#pending_effect), () => {\n\t\t\t\t\tthis.#pending_effect = null;\n\t\t\t\t});\n\n\t\t\t\tthis.#pending = false;\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Returns `true` if the effect exists inside a boundary whose pending snippet is shown\n\t * @returns {boolean}\n\t */\n\tis_pending() {\n\t\treturn this.#pending || (!!this.parent && this.parent.is_pending());\n\t}\n\n\thas_pending_snippet() {\n\t\treturn !!this.#props.pending;\n\t}\n\n\t/**\n\t * @param {() => Effect | null} fn\n\t */\n\t#run(fn) {\n\t\tvar previous_effect = active_effect;\n\t\tvar previous_reaction = active_reaction;\n\t\tvar previous_ctx = component_context;\n\n\t\tset_active_effect(this.#effect);\n\t\tset_active_reaction(this.#effect);\n\t\tset_component_context(this.#effect.ctx);\n\n\t\ttry {\n\t\t\treturn fn();\n\t\t} catch (e) {\n\t\t\thandle_error(e);\n\t\t\treturn null;\n\t\t} finally {\n\t\t\tset_active_effect(previous_effect);\n\t\t\tset_active_reaction(previous_reaction);\n\t\t\tset_component_context(previous_ctx);\n\t\t}\n\t}\n\n\t#show_pending_snippet() {\n\t\tconst pending = /** @type {(anchor: Node) => void} */ (this.#props.pending);\n\n\t\tif (this.#main_effect !== null) {\n\t\t\tthis.#offscreen_fragment = document.createDocumentFragment();\n\t\t\tmove_effect(this.#main_effect, this.#offscreen_fragment);\n\t\t}\n\n\t\tif (this.#pending_effect === null) {\n\t\t\tthis.#pending_effect = branch(() => pending(this.#anchor));\n\t\t}\n\t}\n\n\t/**\n\t * Updates the pending count associated with the currently visible pending snippet,\n\t * if any, such that we can replace the snippet with content once work is done\n\t * @param {1 | -1} d\n\t */\n\t#update_pending_count(d) {\n\t\tif (!this.has_pending_snippet()) {\n\t\t\tif (this.parent) {\n\t\t\t\tthis.parent.#update_pending_count(d);\n\t\t\t}\n\n\t\t\t// if there's no parent, we're in a scope with no pending snippet\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#pending_count += d;\n\n\t\tif (this.#pending_count === 0) {\n\t\t\tthis.#pending = false;\n\n\t\t\tif (this.#pending_effect) {\n\t\t\t\tpause_effect(this.#pending_effect, () => {\n\t\t\t\t\tthis.#pending_effect = null;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this.#offscreen_fragment) {\n\t\t\t\tthis.#anchor.before(this.#offscreen_fragment);\n\t\t\t\tthis.#offscreen_fragment = null;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Update the source that powers `$effect.pending()` inside this boundary,\n\t * and controls when the current `pending` snippet (if any) is removed.\n\t * Do not call from inside the class\n\t * @param {1 | -1} d\n\t */\n\tupdate_pending_count(d) {\n\t\tthis.#update_pending_count(d);\n\n\t\tthis.#local_pending_count += d;\n\t\teffect_pending_updates.add(this.#effect_pending_update);\n\t}\n\n\tget_effect_pending() {\n\t\tthis.#effect_pending_subscriber();\n\t\treturn get(/** @type {Source<number>} */ (this.#effect_pending));\n\t}\n\n\t/** @param {unknown} error */\n\terror(error) {\n\t\tvar onerror = this.#props.onerror;\n\t\tlet failed = this.#props.failed;\n\n\t\t// If we have nothing to capture the error, or if we hit an error while\n\t\t// rendering the fallback, re-throw for another boundary to handle\n\t\tif (this.#is_creating_fallback || (!onerror && !failed)) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (this.#main_effect) {\n\t\t\tdestroy_effect(this.#main_effect);\n\t\t\tthis.#main_effect = null;\n\t\t}\n\n\t\tif (this.#pending_effect) {\n\t\t\tdestroy_effect(this.#pending_effect);\n\t\t\tthis.#pending_effect = null;\n\t\t}\n\n\t\tif (this.#failed_effect) {\n\t\t\tdestroy_effect(this.#failed_effect);\n\t\t\tthis.#failed_effect = null;\n\t\t}\n\n\t\tif (hydrating) {\n\t\t\tset_hydrate_node(/** @type {TemplateNode} */ (this.#hydrate_open));\n\t\t\tnext();\n\t\t\tset_hydrate_node(skip_nodes());\n\t\t}\n\n\t\tvar did_reset = false;\n\t\tvar calling_on_error = false;\n\n\t\tconst reset = () => {\n\t\t\tif (did_reset) {\n\t\t\t\tw.svelte_boundary_reset_noop();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdid_reset = true;\n\n\t\t\tif (calling_on_error) {\n\t\t\t\te.svelte_boundary_reset_onerror();\n\t\t\t}\n\n\t\t\t// If the failure happened while flushing effects, current_batch can be null\n\t\t\tBatch.ensure();\n\n\t\t\tthis.#local_pending_count = 0;\n\n\t\t\tif (this.#failed_effect !== null) {\n\t\t\t\tpause_effect(this.#failed_effect, () => {\n\t\t\t\t\tthis.#failed_effect = null;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// we intentionally do not try to find the nearest pending boundary. If this boundary has one, we'll render it on reset\n\t\t\t// but it would be really weird to show the parent's boundary on a child reset.\n\t\t\tthis.#pending = this.has_pending_snippet();\n\n\t\t\tthis.#main_effect = this.#run(() => {\n\t\t\t\tthis.#is_creating_fallback = false;\n\t\t\t\treturn branch(() => this.#children(this.#anchor));\n\t\t\t});\n\n\t\t\tif (this.#pending_count > 0) {\n\t\t\t\tthis.#show_pending_snippet();\n\t\t\t} else {\n\t\t\t\tthis.#pending = false;\n\t\t\t}\n\t\t};\n\n\t\tvar previous_reaction = active_reaction;\n\n\t\ttry {\n\t\t\tset_active_reaction(null);\n\t\t\tcalling_on_error = true;\n\t\t\tonerror?.(error, reset);\n\t\t\tcalling_on_error = false;\n\t\t} catch (error) {\n\t\t\tinvoke_error_boundary(error, this.#effect && this.#effect.parent);\n\t\t} finally {\n\t\t\tset_active_reaction(previous_reaction);\n\t\t}\n\n\t\tif (failed) {\n\t\t\tqueue_micro_task(() => {\n\t\t\t\tthis.#failed_effect = this.#run(() => {\n\t\t\t\t\tthis.#is_creating_fallback = true;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn branch(() => {\n\t\t\t\t\t\t\tfailed(\n\t\t\t\t\t\t\t\tthis.#anchor,\n\t\t\t\t\t\t\t\t() => error,\n\t\t\t\t\t\t\t\t() => reset\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tinvoke_error_boundary(error, /** @type {Effect} */ (this.#effect.parent));\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.#is_creating_fallback = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport function get_boundary() {\n\treturn /** @type {Boundary} */ (/** @type {Effect} */ (active_effect).b);\n}\n\nexport function pending() {\n\tif (active_effect === null) {\n\t\te.effect_pending_outside_reaction();\n\t}\n\n\tvar boundary = active_effect.b;\n\n\tif (boundary === null) {\n\t\treturn 0; // TODO eventually we will need this to be global\n\t}\n\n\treturn boundary.get_effect_pending();\n}\n","/** @import { Effect, TemplateNode, Value } from '#client' */\nimport { DESTROYED } from '#client/constants';\nimport { DEV } from 'esm-env';\nimport {\n\tcomponent_context,\n\tdev_stack,\n\tis_runes,\n\tset_component_context,\n\tset_dev_stack\n} from '../context.js';\nimport { get_boundary } from '../dom/blocks/boundary.js';\nimport { invoke_error_boundary } from '../error-handling.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction\n} from '../runtime.js';\nimport { Batch, current_batch } from './batch.js';\nimport {\n\tasync_derived,\n\tcurrent_async_effect,\n\tderived,\n\tderived_safe_equal,\n\tset_from_async_derived\n} from './deriveds.js';\nimport { aborted } from './effects.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tset_hydrate_node,\n\tset_hydrating,\n\tskip_nodes\n} from '../dom/hydration.js';\nimport { create_text } from '../dom/operations.js';\n\n/**\n *\n * @param {Array<() => any>} sync\n * @param {Array<() => Promise<any>>} async\n * @param {(values: Value[]) => any} fn\n */\nexport function flatten(sync, async, fn) {\n\tconst d = is_runes() ? derived : derived_safe_equal;\n\n\tif (async.length === 0) {\n\t\tfn(sync.map(d));\n\t\treturn;\n\t}\n\n\tvar batch = current_batch;\n\tvar parent = /** @type {Effect} */ (active_effect);\n\n\tvar restore = capture();\n\n\tvar was_hydrating = hydrating;\n\n\tPromise.all(async.map((expression) => async_derived(expression)))\n\t\t.then((result) => {\n\t\t\trestore();\n\n\t\t\ttry {\n\t\t\t\tfn([...sync.map(d), ...result]);\n\t\t\t} catch (error) {\n\t\t\t\t// ignore errors in blocks that have already been destroyed\n\t\t\t\tif ((parent.f & DESTROYED) === 0) {\n\t\t\t\t\tinvoke_error_boundary(error, parent);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (was_hydrating) {\n\t\t\t\tset_hydrating(false);\n\t\t\t}\n\n\t\t\tbatch?.deactivate();\n\t\t\tunset_context();\n\t\t})\n\t\t.catch((error) => {\n\t\t\tinvoke_error_boundary(error, parent);\n\t\t});\n}\n\n/**\n * Captures the current effect context so that we can restore it after\n * some asynchronous work has happened (so that e.g. `await a + b`\n * causes `b` to be registered as a dependency).\n */\nexport function capture() {\n\tvar previous_effect = active_effect;\n\tvar previous_reaction = active_reaction;\n\tvar previous_component_context = component_context;\n\tvar previous_batch = current_batch;\n\n\tvar was_hydrating = hydrating;\n\n\tif (was_hydrating) {\n\t\tvar previous_hydrate_node = hydrate_node;\n\t}\n\n\tif (DEV) {\n\t\tvar previous_dev_stack = dev_stack;\n\t}\n\n\treturn function restore() {\n\t\tset_active_effect(previous_effect);\n\t\tset_active_reaction(previous_reaction);\n\t\tset_component_context(previous_component_context);\n\t\tprevious_batch?.activate();\n\n\t\tif (was_hydrating) {\n\t\t\tset_hydrating(true);\n\t\t\tset_hydrate_node(previous_hydrate_node);\n\t\t}\n\n\t\tif (DEV) {\n\t\t\tset_from_async_derived(null);\n\t\t\tset_dev_stack(previous_dev_stack);\n\t\t}\n\t};\n}\n\n/**\n * Wraps an `await` expression in such a way that the effect context that was\n * active before the expression evaluated can be reapplied afterwards \n * `await a + b` becomes `(await $.save(a))() + b`\n * @template T\n * @param {Promise<T>} promise\n * @returns {Promise<() => T>}\n */\nexport async function save(promise) {\n\tvar restore = capture();\n\tvar value = await promise;\n\n\treturn () => {\n\t\trestore();\n\t\treturn value;\n\t};\n}\n\n/**\n * Reset `current_async_effect` after the `promise` resolves, so\n * that we can emit `await_reactivity_loss` warnings\n * @template T\n * @param {Promise<T>} promise\n * @returns {Promise<() => T>}\n */\nexport async function track_reactivity_loss(promise) {\n\tvar previous_async_effect = current_async_effect;\n\tvar value = await promise;\n\n\treturn () => {\n\t\tset_from_async_derived(previous_async_effect);\n\t\treturn value;\n\t};\n}\n\n/**\n * Used in `for await` loops in DEV, so\n * that we can emit `await_reactivity_loss` warnings\n * after each `async_iterator` result resolves and\n * after the `async_iterator` return resolves (if it runs)\n * @template T\n * @template TReturn\n * @param {Iterable<T> | AsyncIterable<T>} iterable\n * @returns {AsyncGenerator<T, TReturn | undefined>}\n */\nexport async function* for_await_track_reactivity_loss(iterable) {\n\t// This is based on the algorithms described in ECMA-262:\n\t// ForIn/OfBodyEvaluation\n\t// https://tc39.es/ecma262/multipage/ecmascript-language-statements-and-declarations.html#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset\n\t// AsyncIteratorClose\n\t// https://tc39.es/ecma262/multipage/abstract-operations.html#sec-asynciteratorclose\n\n\t/** @type {AsyncIterator<T, TReturn>} */\n\t// @ts-ignore\n\tconst iterator = iterable[Symbol.asyncIterator]?.() ?? iterable[Symbol.iterator]?.();\n\n\tif (iterator === undefined) {\n\t\tthrow new TypeError('value is not async iterable');\n\t}\n\n\t/** Whether the completion of the iterator was \"normal\", meaning it wasn't ended via `break` or a similar method */\n\tlet normal_completion = false;\n\ttry {\n\t\twhile (true) {\n\t\t\tconst { done, value } = (await track_reactivity_loss(iterator.next()))();\n\t\t\tif (done) {\n\t\t\t\tnormal_completion = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tyield value;\n\t\t}\n\t} finally {\n\t\t// If the iterator had a normal completion and `return` is defined on the iterator, call it and return the value\n\t\tif (normal_completion && iterator.return !== undefined) {\n\t\t\t// eslint-disable-next-line no-unsafe-finally\n\t\t\treturn /** @type {TReturn} */ ((await track_reactivity_loss(iterator.return()))().value);\n\t\t}\n\t}\n}\n\nexport function unset_context() {\n\tset_active_effect(null);\n\tset_active_reaction(null);\n\tset_component_context(null);\n\n\tif (DEV) {\n\t\tset_from_async_derived(null);\n\t\tset_dev_stack(null);\n\t}\n}\n\n/**\n * @param {TemplateNode} anchor\n * @param {(target: TemplateNode) => Promise<void>} fn\n */\nexport async function async_body(anchor, fn) {\n\tvar boundary = get_boundary();\n\tvar batch = /** @type {Batch} */ (current_batch);\n\tvar blocking = !boundary.is_pending();\n\n\tboundary.update_pending_count(1);\n\tbatch.increment(blocking);\n\n\tvar active = /** @type {Effect} */ (active_effect);\n\n\tvar was_hydrating = hydrating;\n\tvar next_hydrate_node = undefined;\n\n\tif (was_hydrating) {\n\t\thydrate_next();\n\t\tnext_hydrate_node = skip_nodes(false);\n\t}\n\n\ttry {\n\t\tvar promise = fn(anchor);\n\t} finally {\n\t\tif (next_hydrate_node) {\n\t\t\tset_hydrate_node(next_hydrate_node);\n\t\t\thydrate_next();\n\t\t}\n\t}\n\n\ttry {\n\t\tawait promise;\n\t} catch (error) {\n\t\tif (!aborted(active)) {\n\t\t\tinvoke_error_boundary(error, active);\n\t\t}\n\t} finally {\n\t\tif (was_hydrating) {\n\t\t\tset_hydrating(false);\n\t\t}\n\n\t\tboundary.update_pending_count(-1);\n\t\tbatch.decrement(blocking);\n\n\t\tunset_context();\n\t}\n}\n","/** @import { Derived, Effect, Source } from '#client' */\n/** @import { Batch } from './batch.js'; */\nimport { DEV } from 'esm-env';\nimport {\n\tERROR_VALUE,\n\tCLEAN,\n\tDERIVED,\n\tDIRTY,\n\tEFFECT_PRESERVED,\n\tMAYBE_DIRTY,\n\tSTALE_REACTION,\n\tUNOWNED,\n\tASYNC,\n\tWAS_MARKED\n} from '#client/constants';\nimport {\n\tactive_reaction,\n\tactive_effect,\n\tset_signal_status,\n\tskip_reaction,\n\tupdate_reaction,\n\tincrement_write_version,\n\tset_active_effect,\n\tpush_reaction_value,\n\tis_destroying_effect\n} from '../runtime.js';\nimport { equals, safe_equals } from './equality.js';\nimport * as e from '../errors.js';\nimport * as w from '../warnings.js';\nimport { async_effect, destroy_effect, teardown } from './effects.js';\nimport { inspect_effects, internal_set, set_inspect_effects, source } from './sources.js';\nimport { get_stack } from '../dev/tracing.js';\nimport { async_mode_flag, tracing_mode_flag } from '../../flags/index.js';\nimport { Boundary } from '../dom/blocks/boundary.js';\nimport { component_context } from '../context.js';\nimport { UNINITIALIZED } from '../../../constants.js';\nimport { batch_values, current_batch } from './batch.js';\nimport { unset_context } from './async.js';\nimport { deferred } from '../../shared/utils.js';\n\n/** @type {Effect | null} */\nexport let current_async_effect = null;\n\n/** @param {Effect | null} v */\nexport function set_from_async_derived(v) {\n\tcurrent_async_effect = v;\n}\n\nexport const recent_async_deriveds = new Set();\n\n/**\n * @template V\n * @param {() => V} fn\n * @returns {Derived<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function derived(fn) {\n\tvar flags = DERIVED | DIRTY;\n\tvar parent_derived =\n\t\tactive_reaction !== null && (active_reaction.f & DERIVED) !== 0\n\t\t\t? /** @type {Derived} */ (active_reaction)\n\t\t\t: null;\n\n\tif (active_effect === null || (parent_derived !== null && (parent_derived.f & UNOWNED) !== 0)) {\n\t\tflags |= UNOWNED;\n\t} else {\n\t\t// Since deriveds are evaluated lazily, any effects created inside them are\n\t\t// created too late to ensure that the parent effect is added to the tree\n\t\tactive_effect.f |= EFFECT_PRESERVED;\n\t}\n\n\t/** @type {Derived<V>} */\n\tconst signal = {\n\t\tctx: component_context,\n\t\tdeps: null,\n\t\teffects: null,\n\t\tequals,\n\t\tf: flags,\n\t\tfn,\n\t\treactions: null,\n\t\trv: 0,\n\t\tv: /** @type {V} */ (UNINITIALIZED),\n\t\twv: 0,\n\t\tparent: parent_derived ?? active_effect,\n\t\tac: null\n\t};\n\n\tif (DEV && tracing_mode_flag) {\n\t\tsignal.created = get_stack('CreatedAt');\n\t}\n\n\treturn signal;\n}\n\n/**\n * @template V\n * @param {() => V | Promise<V>} fn\n * @param {string} [location] If provided, print a warning if the value is not read immediately after update\n * @returns {Promise<Source<V>>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function async_derived(fn, location) {\n\tlet parent = /** @type {Effect | null} */ (active_effect);\n\n\tif (parent === null) {\n\t\te.async_derived_orphan();\n\t}\n\n\tvar boundary = /** @type {Boundary} */ (parent.b);\n\n\tvar promise = /** @type {Promise<V>} */ (/** @type {unknown} */ (undefined));\n\tvar signal = source(/** @type {V} */ (UNINITIALIZED));\n\n\t// only suspend in async deriveds created on initialisation\n\tvar should_suspend = !active_reaction;\n\n\t/** @type {Map<Batch, ReturnType<typeof deferred<V>>>} */\n\tvar deferreds = new Map();\n\n\tasync_effect(() => {\n\t\tif (DEV) current_async_effect = active_effect;\n\n\t\t/** @type {ReturnType<typeof deferred<V>>} */\n\t\tvar d = deferred();\n\t\tpromise = d.promise;\n\n\t\ttry {\n\t\t\t// If this code is changed at some point, make sure to still access the then property\n\t\t\t// of fn() to read any signals it might access, so that we track them as dependencies.\n\t\t\t// We call `unset_context` to undo any `save` calls that happen inside `fn()`\n\t\t\tPromise.resolve(fn())\n\t\t\t\t.then(d.resolve, d.reject)\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (batch === current_batch && batch.committed) {\n\t\t\t\t\t\t// if the batch was rejected as stale, we need to cleanup\n\t\t\t\t\t\t// after any `$.save(...)` calls inside `fn()`\n\t\t\t\t\t\tbatch.deactivate();\n\t\t\t\t\t}\n\n\t\t\t\t\tunset_context();\n\t\t\t\t});\n\t\t} catch (error) {\n\t\t\td.reject(error);\n\t\t\tunset_context();\n\t\t}\n\n\t\tif (DEV) current_async_effect = null;\n\n\t\tvar batch = /** @type {Batch} */ (current_batch);\n\n\t\tif (should_suspend) {\n\t\t\tvar blocking = !boundary.is_pending();\n\n\t\t\tboundary.update_pending_count(1);\n\t\t\tbatch.increment(blocking);\n\n\t\t\tdeferreds.get(batch)?.reject(STALE_REACTION);\n\t\t\tdeferreds.delete(batch); // delete to ensure correct order in Map iteration below\n\t\t\tdeferreds.set(batch, d);\n\t\t}\n\n\t\t/**\n\t\t * @param {any} value\n\t\t * @param {unknown} error\n\t\t */\n\t\tconst handler = (value, error = undefined) => {\n\t\t\tcurrent_async_effect = null;\n\n\t\t\tbatch.activate();\n\n\t\t\tif (error) {\n\t\t\t\tif (error !== STALE_REACTION) {\n\t\t\t\t\tsignal.f |= ERROR_VALUE;\n\n\t\t\t\t\t// @ts-expect-error the error is the wrong type, but we don't care\n\t\t\t\t\tinternal_set(signal, error);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ((signal.f & ERROR_VALUE) !== 0) {\n\t\t\t\t\tsignal.f ^= ERROR_VALUE;\n\t\t\t\t}\n\n\t\t\t\tinternal_set(signal, value);\n\n\t\t\t\t// All prior async derived runs are now stale\n\t\t\t\tfor (const [b, d] of deferreds) {\n\t\t\t\t\tdeferreds.delete(b);\n\t\t\t\t\tif (b === batch) break;\n\t\t\t\t\td.reject(STALE_REACTION);\n\t\t\t\t}\n\n\t\t\t\tif (DEV && location !== undefined) {\n\t\t\t\t\trecent_async_deriveds.add(signal);\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tif (recent_async_deriveds.has(signal)) {\n\t\t\t\t\t\t\tw.await_waterfall(/** @type {string} */ (signal.label), location);\n\t\t\t\t\t\t\trecent_async_deriveds.delete(signal);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (should_suspend) {\n\t\t\t\tboundary.update_pending_count(-1);\n\t\t\t\tbatch.decrement(blocking);\n\t\t\t}\n\t\t};\n\n\t\td.promise.then(handler, (e) => handler(null, e || 'unknown'));\n\t});\n\n\tteardown(() => {\n\t\tfor (const d of deferreds.values()) {\n\t\t\td.reject(STALE_REACTION);\n\t\t}\n\t});\n\n\tif (DEV) {\n\t\t// add a flag that lets this be printed as a derived\n\t\t// when using `$inspect.trace()`\n\t\tsignal.f |= ASYNC;\n\t}\n\n\treturn new Promise((fulfil) => {\n\t\t/** @param {Promise<V>} p */\n\t\tfunction next(p) {\n\t\t\tfunction go() {\n\t\t\t\tif (p === promise) {\n\t\t\t\t\tfulfil(signal);\n\t\t\t\t} else {\n\t\t\t\t\t// if the effect re-runs before the initial promise\n\t\t\t\t\t// resolves, delay resolution until we have a value\n\t\t\t\t\tnext(promise);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tp.then(go, go);\n\t\t}\n\n\t\tnext(promise);\n\t});\n}\n\n/**\n * @template V\n * @param {() => V} fn\n * @returns {Derived<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function user_derived(fn) {\n\tconst d = derived(fn);\n\n\tif (!async_mode_flag) push_reaction_value(d);\n\n\treturn d;\n}\n\n/**\n * @template V\n * @param {() => V} fn\n * @returns {Derived<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function derived_safe_equal(fn) {\n\tconst signal = derived(fn);\n\tsignal.equals = safe_equals;\n\treturn signal;\n}\n\n/**\n * @param {Derived} derived\n * @returns {void}\n */\nexport function destroy_derived_effects(derived) {\n\tvar effects = derived.effects;\n\n\tif (effects !== null) {\n\t\tderived.effects = null;\n\n\t\tfor (var i = 0; i < effects.length; i += 1) {\n\t\t\tdestroy_effect(/** @type {Effect} */ (effects[i]));\n\t\t}\n\t}\n}\n\n/**\n * The currently updating deriveds, used to detect infinite recursion\n * in dev mode and provide a nicer error than 'too much recursion'\n * @type {Derived[]}\n */\nlet stack = [];\n\n/**\n * @param {Derived} derived\n * @returns {Effect | null}\n */\nfunction get_derived_parent_effect(derived) {\n\tvar parent = derived.parent;\n\twhile (parent !== null) {\n\t\tif ((parent.f & DERIVED) === 0) {\n\t\t\treturn /** @type {Effect} */ (parent);\n\t\t}\n\t\tparent = parent.parent;\n\t}\n\treturn null;\n}\n\n/**\n * @template T\n * @param {Derived} derived\n * @returns {T}\n */\nexport function execute_derived(derived) {\n\tvar value;\n\tvar prev_active_effect = active_effect;\n\n\tset_active_effect(get_derived_parent_effect(derived));\n\n\tif (DEV) {\n\t\tlet prev_inspect_effects = inspect_effects;\n\t\tset_inspect_effects(new Set());\n\t\ttry {\n\t\t\tif (stack.includes(derived)) {\n\t\t\t\te.derived_references_self();\n\t\t\t}\n\n\t\t\tstack.push(derived);\n\n\t\t\tderived.f &= ~WAS_MARKED;\n\t\t\tdestroy_derived_effects(derived);\n\t\t\tvalue = update_reaction(derived);\n\t\t} finally {\n\t\t\tset_active_effect(prev_active_effect);\n\t\t\tset_inspect_effects(prev_inspect_effects);\n\t\t\tstack.pop();\n\t\t}\n\t} else {\n\t\ttry {\n\t\t\tderived.f &= ~WAS_MARKED;\n\t\t\tdestroy_derived_effects(derived);\n\t\t\tvalue = update_reaction(derived);\n\t\t} finally {\n\t\t\tset_active_effect(prev_active_effect);\n\t\t}\n\t}\n\n\treturn value;\n}\n\n/**\n * @param {Derived} derived\n * @returns {void}\n */\nexport function update_derived(derived) {\n\tvar value = execute_derived(derived);\n\n\tif (!derived.equals(value)) {\n\t\t// TODO can we avoid setting `derived.v` when `batch_values !== null`,\n\t\t// without causing the value to be stale later?\n\t\tderived.v = value;\n\t\tderived.wv = increment_write_version();\n\t}\n\n\t// don't mark derived clean if we're reading it inside a\n\t// cleanup function, or it will cache a stale value\n\tif (is_destroying_effect) {\n\t\treturn;\n\t}\n\n\tif (batch_values !== null) {\n\t\tbatch_values.set(derived, derived.v);\n\t} else {\n\t\tvar status =\n\t\t\t(skip_reaction || (derived.f & UNOWNED) !== 0) && derived.deps !== null ? MAYBE_DIRTY : CLEAN;\n\n\t\tset_signal_status(derived, status);\n\t}\n}\n","/** @import { Derived, Effect, Source, Value } from '#client' */\nimport { DEV } from 'esm-env';\nimport {\n\tactive_reaction,\n\tactive_effect,\n\tuntracked_writes,\n\tget,\n\tset_untracked_writes,\n\tset_signal_status,\n\tuntrack,\n\tincrement_write_version,\n\tupdate_effect,\n\tcurrent_sources,\n\tis_dirty,\n\tuntracking,\n\tis_destroying_effect,\n\tpush_reaction_value\n} from '../runtime.js';\nimport { equals, safe_equals } from './equality.js';\nimport {\n\tCLEAN,\n\tDERIVED,\n\tDIRTY,\n\tBRANCH_EFFECT,\n\tINSPECT_EFFECT,\n\tUNOWNED,\n\tMAYBE_DIRTY,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT,\n\tASYNC,\n\tWAS_MARKED\n} from '#client/constants';\nimport * as e from '../errors.js';\nimport { legacy_mode_flag, tracing_mode_flag } from '../../flags/index.js';\nimport { get_stack, tag_proxy } from '../dev/tracing.js';\nimport { component_context, is_runes } from '../context.js';\nimport { Batch, eager_block_effects, schedule_effect } from './batch.js';\nimport { proxy } from '../proxy.js';\nimport { execute_derived } from './deriveds.js';\n\n/** @type {Set<any>} */\nexport let inspect_effects = new Set();\n\n/** @type {Map<Source, any>} */\nexport const old_values = new Map();\n\n/**\n * @param {Set<any>} v\n */\nexport function set_inspect_effects(v) {\n\tinspect_effects = v;\n}\n\nlet inspect_effects_deferred = false;\n\nexport function set_inspect_effects_deferred() {\n\tinspect_effects_deferred = true;\n}\n\n/**\n * @template V\n * @param {V} v\n * @param {Error | null} [stack]\n * @returns {Source<V>}\n */\n// TODO rename this to `state` throughout the codebase\nexport function source(v, stack) {\n\t/** @type {Value} */\n\tvar signal = {\n\t\tf: 0, // TODO ideally we could skip this altogether, but it causes type errors\n\t\tv,\n\t\treactions: null,\n\t\tequals,\n\t\trv: 0,\n\t\twv: 0\n\t};\n\n\tif (DEV && tracing_mode_flag) {\n\t\tsignal.created = stack ?? get_stack('CreatedAt');\n\t\tsignal.updated = null;\n\t\tsignal.set_during_effect = false;\n\t\tsignal.trace = null;\n\t}\n\n\treturn signal;\n}\n\n/**\n * @template V\n * @param {V} v\n * @param {Error | null} [stack]\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function state(v, stack) {\n\tconst s = source(v, stack);\n\n\tpush_reaction_value(s);\n\n\treturn s;\n}\n\n/**\n * @template V\n * @param {V} initial_value\n * @param {boolean} [immutable]\n * @returns {Source<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function mutable_source(initial_value, immutable = false, trackable = true) {\n\tconst s = source(initial_value);\n\tif (!immutable) {\n\t\ts.equals = safe_equals;\n\t}\n\n\t// bind the signal to the component context, in case we need to\n\t// track updates to trigger beforeUpdate/afterUpdate callbacks\n\tif (legacy_mode_flag && trackable && component_context !== null && component_context.l !== null) {\n\t\t(component_context.l.s ??= []).push(s);\n\t}\n\n\treturn s;\n}\n\n/**\n * @template V\n * @param {Value<V>} source\n * @param {V} value\n */\nexport function mutate(source, value) {\n\tset(\n\t\tsource,\n\t\tuntrack(() => get(source))\n\t);\n\treturn value;\n}\n\n/**\n * @template V\n * @param {Source<V>} source\n * @param {V} value\n * @param {boolean} [should_proxy]\n * @returns {V}\n */\nexport function set(source, value, should_proxy = false) {\n\tif (\n\t\tactive_reaction !== null &&\n\t\t// since we are untracking the function inside `$inspect.with` we need to add this check\n\t\t// to ensure we error if state is set inside an inspect effect\n\t\t(!untracking || (active_reaction.f & INSPECT_EFFECT) !== 0) &&\n\t\tis_runes() &&\n\t\t(active_reaction.f & (DERIVED | BLOCK_EFFECT | ASYNC | INSPECT_EFFECT)) !== 0 &&\n\t\t!current_sources?.includes(source)\n\t) {\n\t\te.state_unsafe_mutation();\n\t}\n\n\tlet new_value = should_proxy ? proxy(value) : value;\n\n\tif (DEV) {\n\t\ttag_proxy(new_value, /** @type {string} */ (source.label));\n\t}\n\n\treturn internal_set(source, new_value);\n}\n\n/**\n * @template V\n * @param {Source<V>} source\n * @param {V} value\n * @returns {V}\n */\nexport function internal_set(source, value) {\n\tif (!source.equals(value)) {\n\t\tvar old_value = source.v;\n\n\t\tif (is_destroying_effect) {\n\t\t\told_values.set(source, value);\n\t\t} else {\n\t\t\told_values.set(source, old_value);\n\t\t}\n\n\t\tsource.v = value;\n\n\t\tvar batch = Batch.ensure();\n\t\tbatch.capture(source, old_value);\n\n\t\tif (DEV) {\n\t\t\tif (tracing_mode_flag || active_effect !== null) {\n\t\t\t\tconst error = get_stack('UpdatedAt');\n\n\t\t\t\tif (error !== null) {\n\t\t\t\t\tsource.updated ??= new Map();\n\t\t\t\t\tlet entry = source.updated.get(error.stack);\n\n\t\t\t\t\tif (!entry) {\n\t\t\t\t\t\tentry = { error, count: 0 };\n\t\t\t\t\t\tsource.updated.set(error.stack, entry);\n\t\t\t\t\t}\n\n\t\t\t\t\tentry.count++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (active_effect !== null) {\n\t\t\t\tsource.set_during_effect = true;\n\t\t\t}\n\t\t}\n\n\t\tif ((source.f & DERIVED) !== 0) {\n\t\t\t// if we are assigning to a dirty derived we set it to clean/maybe dirty but we also eagerly execute it to track the dependencies\n\t\t\tif ((source.f & DIRTY) !== 0) {\n\t\t\t\texecute_derived(/** @type {Derived} */ (source));\n\t\t\t}\n\t\t\tset_signal_status(source, (source.f & UNOWNED) === 0 ? CLEAN : MAYBE_DIRTY);\n\t\t}\n\n\t\tsource.wv = increment_write_version();\n\n\t\tmark_reactions(source, DIRTY);\n\n\t\t// It's possible that the current reaction might not have up-to-date dependencies\n\t\t// whilst it's actively running. So in the case of ensuring it registers the reaction\n\t\t// properly for itself, we need to ensure the current effect actually gets\n\t\t// scheduled. i.e: `$effect(() => x++)`\n\t\tif (\n\t\t\tis_runes() &&\n\t\t\tactive_effect !== null &&\n\t\t\t(active_effect.f & CLEAN) !== 0 &&\n\t\t\t(active_effect.f & (BRANCH_EFFECT | ROOT_EFFECT)) === 0\n\t\t) {\n\t\t\tif (untracked_writes === null) {\n\t\t\t\tset_untracked_writes([source]);\n\t\t\t} else {\n\t\t\t\tuntracked_writes.push(source);\n\t\t\t}\n\t\t}\n\n\t\tif (DEV && inspect_effects.size > 0 && !inspect_effects_deferred) {\n\t\t\tflush_inspect_effects();\n\t\t}\n\t}\n\n\treturn value;\n}\n\nexport function flush_inspect_effects() {\n\tinspect_effects_deferred = false;\n\n\tconst inspects = Array.from(inspect_effects);\n\n\tfor (const effect of inspects) {\n\t\t// Mark clean inspect-effects as maybe dirty and then check their dirtiness\n\t\t// instead of just updating the effects - this way we avoid overfiring.\n\t\tif ((effect.f & CLEAN) !== 0) {\n\t\t\tset_signal_status(effect, MAYBE_DIRTY);\n\t\t}\n\n\t\tif (is_dirty(effect)) {\n\t\t\tupdate_effect(effect);\n\t\t}\n\t}\n\n\tinspect_effects.clear();\n}\n\n/**\n * @template {number | bigint} T\n * @param {Source<T>} source\n * @param {1 | -1} [d]\n * @returns {T}\n */\nexport function update(source, d = 1) {\n\tvar value = get(source);\n\tvar result = d === 1 ? value++ : value--;\n\n\tset(source, value);\n\n\t// @ts-expect-error\n\treturn result;\n}\n\n/**\n * @template {number | bigint} T\n * @param {Source<T>} source\n * @param {1 | -1} [d]\n * @returns {T}\n */\nexport function update_pre(source, d = 1) {\n\tvar value = get(source);\n\n\t// @ts-expect-error\n\treturn set(source, d === 1 ? ++value : --value);\n}\n\n/**\n * Silently (without using `get`) increment a source\n * @param {Source<number>} source\n */\nexport function increment(source) {\n\tset(source, source.v + 1);\n}\n\n/**\n * @param {Value} signal\n * @param {number} status should be DIRTY or MAYBE_DIRTY\n * @returns {void}\n */\nfunction mark_reactions(signal, status) {\n\tvar reactions = signal.reactions;\n\tif (reactions === null) return;\n\n\tvar runes = is_runes();\n\tvar length = reactions.length;\n\n\tfor (var i = 0; i < length; i++) {\n\t\tvar reaction = reactions[i];\n\t\tvar flags = reaction.f;\n\n\t\t// In legacy mode, skip the current effect to prevent infinite loops\n\t\tif (!runes && reaction === active_effect) continue;\n\n\t\t// Inspect effects need to run immediately, so that the stack trace makes sense\n\t\tif (DEV && (flags & INSPECT_EFFECT) !== 0) {\n\t\t\tinspect_effects.add(reaction);\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar not_dirty = (flags & DIRTY) === 0;\n\n\t\t// don't set a DIRTY reaction to MAYBE_DIRTY\n\t\tif (not_dirty) {\n\t\t\tset_signal_status(reaction, status);\n\t\t}\n\n\t\tif ((flags & DERIVED) !== 0) {\n\t\t\tif ((flags & WAS_MARKED) === 0) {\n\t\t\t\treaction.f |= WAS_MARKED;\n\t\t\t\tmark_reactions(/** @type {Derived} */ (reaction), MAYBE_DIRTY);\n\t\t\t}\n\t\t} else if (not_dirty) {\n\t\t\tif ((flags & BLOCK_EFFECT) !== 0) {\n\t\t\t\tif (eager_block_effects !== null) {\n\t\t\t\t\teager_block_effects.add(/** @type {Effect} */ (reaction));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tschedule_effect(/** @type {Effect} */ (reaction));\n\t\t}\n\t}\n}\n","/** @import { Derived, Effect, Reaction, Signal, Source, Value } from '#client' */\nimport { DEV } from 'esm-env';\nimport { get_descriptors, get_prototype_of, index_of } from '../shared/utils.js';\nimport {\n\tdestroy_block_effect_children,\n\tdestroy_effect_children,\n\texecute_effect_teardown\n} from './reactivity/effects.js';\nimport {\n\tDIRTY,\n\tMAYBE_DIRTY,\n\tCLEAN,\n\tDERIVED,\n\tUNOWNED,\n\tDESTROYED,\n\tBRANCH_EFFECT,\n\tSTATE_SYMBOL,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT,\n\tDISCONNECTED,\n\tREACTION_IS_UPDATING,\n\tSTALE_REACTION,\n\tERROR_VALUE,\n\tWAS_MARKED\n} from './constants.js';\nimport { old_values } from './reactivity/sources.js';\nimport {\n\tdestroy_derived_effects,\n\texecute_derived,\n\tcurrent_async_effect,\n\trecent_async_deriveds,\n\tupdate_derived\n} from './reactivity/deriveds.js';\nimport { async_mode_flag, tracing_mode_flag } from '../flags/index.js';\nimport { tracing_expressions, get_stack } from './dev/tracing.js';\nimport {\n\tcomponent_context,\n\tdev_current_component_function,\n\tdev_stack,\n\tis_runes,\n\tset_component_context,\n\tset_dev_current_component_function,\n\tset_dev_stack\n} from './context.js';\nimport * as w from './warnings.js';\nimport { Batch, batch_values, flushSync, schedule_effect } from './reactivity/batch.js';\nimport { handle_error } from './error-handling.js';\nimport { UNINITIALIZED } from '../../constants.js';\nimport { captured_signals } from './legacy.js';\nimport { without_reactive_context } from './dom/elements/bindings/shared.js';\n\nexport let is_updating_effect = false;\n\n/** @param {boolean} value */\nexport function set_is_updating_effect(value) {\n\tis_updating_effect = value;\n}\n\nexport let is_destroying_effect = false;\n\n/** @param {boolean} value */\nexport function set_is_destroying_effect(value) {\n\tis_destroying_effect = value;\n}\n\n/** @type {null | Reaction} */\nexport let active_reaction = null;\n\nexport let untracking = false;\n\n/** @param {null | Reaction} reaction */\nexport function set_active_reaction(reaction) {\n\tactive_reaction = reaction;\n}\n\n/** @type {null | Effect} */\nexport let active_effect = null;\n\n/** @param {null | Effect} effect */\nexport function set_active_effect(effect) {\n\tactive_effect = effect;\n}\n\n/**\n * When sources are created within a reaction, reading and writing\n * them within that reaction should not cause a re-run\n * @type {null | Source[]}\n */\nexport let current_sources = null;\n\n/** @param {Value} value */\nexport function push_reaction_value(value) {\n\tif (active_reaction !== null && (!async_mode_flag || (active_reaction.f & DERIVED) !== 0)) {\n\t\tif (current_sources === null) {\n\t\t\tcurrent_sources = [value];\n\t\t} else {\n\t\t\tcurrent_sources.push(value);\n\t\t}\n\t}\n}\n\n/**\n * The dependencies of the reaction that is currently being executed. In many cases,\n * the dependencies are unchanged between runs, and so this will be `null` unless\n * and until a new dependency is accessed  we track this via `skipped_deps`\n * @type {null | Value[]}\n */\nlet new_deps = null;\n\nlet skipped_deps = 0;\n\n/**\n * Tracks writes that the effect it's executed in doesn't listen to yet,\n * so that the dependency can be added to the effect later on if it then reads it\n * @type {null | Source[]}\n */\nexport let untracked_writes = null;\n\n/** @param {null | Source[]} value */\nexport function set_untracked_writes(value) {\n\tuntracked_writes = value;\n}\n\n/**\n * @type {number} Used by sources and deriveds for handling updates.\n * Version starts from 1 so that unowned deriveds differentiate between a created effect and a run one for tracing\n **/\nexport let write_version = 1;\n\n/** @type {number} Used to version each read of a source of derived to avoid duplicating depedencies inside a reaction */\nlet read_version = 0;\n\nexport let update_version = read_version;\n\n/** @param {number} value */\nexport function set_update_version(value) {\n\tupdate_version = value;\n}\n\n// If we are working with a get() chain that has no active container,\n// to prevent memory leaks, we skip adding the reaction.\nexport let skip_reaction = false;\n\nexport function increment_write_version() {\n\treturn ++write_version;\n}\n\n/**\n * Determines whether a derived or effect is dirty.\n * If it is MAYBE_DIRTY, will set the status to CLEAN\n * @param {Reaction} reaction\n * @returns {boolean}\n */\nexport function is_dirty(reaction) {\n\tvar flags = reaction.f;\n\n\tif ((flags & DIRTY) !== 0) {\n\t\treturn true;\n\t}\n\n\tif ((flags & MAYBE_DIRTY) !== 0) {\n\t\tvar dependencies = reaction.deps;\n\t\tvar is_unowned = (flags & UNOWNED) !== 0;\n\n\t\tif (flags & DERIVED) {\n\t\t\treaction.f &= ~WAS_MARKED;\n\t\t}\n\n\t\tif (dependencies !== null) {\n\t\t\tvar i;\n\t\t\tvar dependency;\n\t\t\tvar is_disconnected = (flags & DISCONNECTED) !== 0;\n\t\t\tvar is_unowned_connected = is_unowned && active_effect !== null && !skip_reaction;\n\t\t\tvar length = dependencies.length;\n\n\t\t\t// If we are working with a disconnected or an unowned signal that is now connected (due to an active effect)\n\t\t\t// then we need to re-connect the reaction to the dependency, unless the effect has already been destroyed\n\t\t\t// (which can happen if the derived is read by an async derived)\n\t\t\tif (\n\t\t\t\t(is_disconnected || is_unowned_connected) &&\n\t\t\t\t(active_effect === null || (active_effect.f & DESTROYED) === 0)\n\t\t\t) {\n\t\t\t\tvar derived = /** @type {Derived} */ (reaction);\n\t\t\t\tvar parent = derived.parent;\n\n\t\t\t\tfor (i = 0; i < length; i++) {\n\t\t\t\t\tdependency = dependencies[i];\n\n\t\t\t\t\t// We always re-add all reactions (even duplicates) if the derived was\n\t\t\t\t\t// previously disconnected, however we don't if it was unowned as we\n\t\t\t\t\t// de-duplicate dependencies in that case\n\t\t\t\t\tif (is_disconnected || !dependency?.reactions?.includes(derived)) {\n\t\t\t\t\t\t(dependency.reactions ??= []).push(derived);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (is_disconnected) {\n\t\t\t\t\tderived.f ^= DISCONNECTED;\n\t\t\t\t}\n\t\t\t\t// If the unowned derived is now fully connected to the graph again (it's unowned and reconnected, has a parent\n\t\t\t\t// and the parent is not unowned), then we can mark it as connected again, removing the need for the unowned\n\t\t\t\t// flag\n\t\t\t\tif (is_unowned_connected && parent !== null && (parent.f & UNOWNED) === 0) {\n\t\t\t\t\tderived.f ^= UNOWNED;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (i = 0; i < length; i++) {\n\t\t\t\tdependency = dependencies[i];\n\n\t\t\t\tif (is_dirty(/** @type {Derived} */ (dependency))) {\n\t\t\t\t\tupdate_derived(/** @type {Derived} */ (dependency));\n\t\t\t\t}\n\n\t\t\t\tif (dependency.wv > reaction.wv) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Unowned signals should never be marked as clean unless they\n\t\t// are used within an active_effect without skip_reaction\n\t\tif (!is_unowned || (active_effect !== null && !skip_reaction)) {\n\t\t\tset_signal_status(reaction, CLEAN);\n\t\t}\n\t}\n\n\treturn false;\n}\n\n/**\n * @param {Value} signal\n * @param {Effect} effect\n * @param {boolean} [root]\n */\nfunction schedule_possible_effect_self_invalidation(signal, effect, root = true) {\n\tvar reactions = signal.reactions;\n\tif (reactions === null) return;\n\n\tif (!async_mode_flag && current_sources?.includes(signal)) {\n\t\treturn;\n\t}\n\n\tfor (var i = 0; i < reactions.length; i++) {\n\t\tvar reaction = reactions[i];\n\n\t\tif ((reaction.f & DERIVED) !== 0) {\n\t\t\tschedule_possible_effect_self_invalidation(/** @type {Derived} */ (reaction), effect, false);\n\t\t} else if (effect === reaction) {\n\t\t\tif (root) {\n\t\t\t\tset_signal_status(reaction, DIRTY);\n\t\t\t} else if ((reaction.f & CLEAN) !== 0) {\n\t\t\t\tset_signal_status(reaction, MAYBE_DIRTY);\n\t\t\t}\n\t\t\tschedule_effect(/** @type {Effect} */ (reaction));\n\t\t}\n\t}\n}\n\n/** @param {Reaction} reaction */\nexport function update_reaction(reaction) {\n\tvar previous_deps = new_deps;\n\tvar previous_skipped_deps = skipped_deps;\n\tvar previous_untracked_writes = untracked_writes;\n\tvar previous_reaction = active_reaction;\n\tvar previous_skip_reaction = skip_reaction;\n\tvar previous_sources = current_sources;\n\tvar previous_component_context = component_context;\n\tvar previous_untracking = untracking;\n\tvar previous_update_version = update_version;\n\n\tvar flags = reaction.f;\n\n\tnew_deps = /** @type {null | Value[]} */ (null);\n\tskipped_deps = 0;\n\tuntracked_writes = null;\n\tskip_reaction =\n\t\t(flags & UNOWNED) !== 0 && (untracking || !is_updating_effect || active_reaction === null);\n\tactive_reaction = (flags & (BRANCH_EFFECT | ROOT_EFFECT)) === 0 ? reaction : null;\n\n\tcurrent_sources = null;\n\tset_component_context(reaction.ctx);\n\tuntracking = false;\n\tupdate_version = ++read_version;\n\n\tif (reaction.ac !== null) {\n\t\twithout_reactive_context(() => {\n\t\t\t/** @type {AbortController} */ (reaction.ac).abort(STALE_REACTION);\n\t\t});\n\n\t\treaction.ac = null;\n\t}\n\n\ttry {\n\t\treaction.f |= REACTION_IS_UPDATING;\n\t\tvar fn = /** @type {Function} */ (reaction.fn);\n\t\tvar result = fn();\n\t\tvar deps = reaction.deps;\n\n\t\tif (new_deps !== null) {\n\t\t\tvar i;\n\n\t\t\tremove_reactions(reaction, skipped_deps);\n\n\t\t\tif (deps !== null && skipped_deps > 0) {\n\t\t\t\tdeps.length = skipped_deps + new_deps.length;\n\t\t\t\tfor (i = 0; i < new_deps.length; i++) {\n\t\t\t\t\tdeps[skipped_deps + i] = new_deps[i];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treaction.deps = deps = new_deps;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t!skip_reaction ||\n\t\t\t\t// Deriveds that already have reactions can cleanup, so we still add them as reactions\n\t\t\t\t((flags & DERIVED) !== 0 &&\n\t\t\t\t\t/** @type {import('#client').Derived} */ (reaction).reactions !== null)\n\t\t\t) {\n\t\t\t\tfor (i = skipped_deps; i < deps.length; i++) {\n\t\t\t\t\t(deps[i].reactions ??= []).push(reaction);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (deps !== null && skipped_deps < deps.length) {\n\t\t\tremove_reactions(reaction, skipped_deps);\n\t\t\tdeps.length = skipped_deps;\n\t\t}\n\n\t\t// If we're inside an effect and we have untracked writes, then we need to\n\t\t// ensure that if any of those untracked writes result in re-invalidation\n\t\t// of the current effect, then that happens accordingly\n\t\tif (\n\t\t\tis_runes() &&\n\t\t\tuntracked_writes !== null &&\n\t\t\t!untracking &&\n\t\t\tdeps !== null &&\n\t\t\t(reaction.f & (DERIVED | MAYBE_DIRTY | DIRTY)) === 0\n\t\t) {\n\t\t\tfor (i = 0; i < /** @type {Source[]} */ (untracked_writes).length; i++) {\n\t\t\t\tschedule_possible_effect_self_invalidation(\n\t\t\t\t\tuntracked_writes[i],\n\t\t\t\t\t/** @type {Effect} */ (reaction)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// If we are returning to an previous reaction then\n\t\t// we need to increment the read version to ensure that\n\t\t// any dependencies in this reaction aren't marked with\n\t\t// the same version\n\t\tif (previous_reaction !== null && previous_reaction !== reaction) {\n\t\t\tread_version++;\n\n\t\t\tif (untracked_writes !== null) {\n\t\t\t\tif (previous_untracked_writes === null) {\n\t\t\t\t\tprevious_untracked_writes = untracked_writes;\n\t\t\t\t} else {\n\t\t\t\t\tprevious_untracked_writes.push(.../** @type {Source[]} */ (untracked_writes));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ((reaction.f & ERROR_VALUE) !== 0) {\n\t\t\treaction.f ^= ERROR_VALUE;\n\t\t}\n\n\t\treturn result;\n\t} catch (error) {\n\t\treturn handle_error(error);\n\t} finally {\n\t\treaction.f ^= REACTION_IS_UPDATING;\n\t\tnew_deps = previous_deps;\n\t\tskipped_deps = previous_skipped_deps;\n\t\tuntracked_writes = previous_untracked_writes;\n\t\tactive_reaction = previous_reaction;\n\t\tskip_reaction = previous_skip_reaction;\n\t\tcurrent_sources = previous_sources;\n\t\tset_component_context(previous_component_context);\n\t\tuntracking = previous_untracking;\n\t\tupdate_version = previous_update_version;\n\t}\n}\n\n/**\n * @template V\n * @param {Reaction} signal\n * @param {Value<V>} dependency\n * @returns {void}\n */\nfunction remove_reaction(signal, dependency) {\n\tlet reactions = dependency.reactions;\n\tif (reactions !== null) {\n\t\tvar index = index_of.call(reactions, signal);\n\t\tif (index !== -1) {\n\t\t\tvar new_length = reactions.length - 1;\n\t\t\tif (new_length === 0) {\n\t\t\t\treactions = dependency.reactions = null;\n\t\t\t} else {\n\t\t\t\t// Swap with last element and then remove.\n\t\t\t\treactions[index] = reactions[new_length];\n\t\t\t\treactions.pop();\n\t\t\t}\n\t\t}\n\t}\n\n\t// If the derived has no reactions, then we can disconnect it from the graph,\n\t// allowing it to either reconnect in the future, or be GC'd by the VM.\n\tif (\n\t\treactions === null &&\n\t\t(dependency.f & DERIVED) !== 0 &&\n\t\t// Destroying a child effect while updating a parent effect can cause a dependency to appear\n\t\t// to be unused, when in fact it is used by the currently-updating parent. Checking `new_deps`\n\t\t// allows us to skip the expensive work of disconnecting and immediately reconnecting it\n\t\t(new_deps === null || !new_deps.includes(dependency))\n\t) {\n\t\tset_signal_status(dependency, MAYBE_DIRTY);\n\t\t// If we are working with a derived that is owned by an effect, then mark it as being\n\t\t// disconnected.\n\t\tif ((dependency.f & (UNOWNED | DISCONNECTED)) === 0) {\n\t\t\tdependency.f ^= DISCONNECTED;\n\t\t}\n\t\t// Disconnect any reactions owned by this reaction\n\t\tdestroy_derived_effects(/** @type {Derived} **/ (dependency));\n\t\tremove_reactions(/** @type {Derived} **/ (dependency), 0);\n\t}\n}\n\n/**\n * @param {Reaction} signal\n * @param {number} start_index\n * @returns {void}\n */\nexport function remove_reactions(signal, start_index) {\n\tvar dependencies = signal.deps;\n\tif (dependencies === null) return;\n\n\tfor (var i = start_index; i < dependencies.length; i++) {\n\t\tremove_reaction(signal, dependencies[i]);\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @returns {void}\n */\nexport function update_effect(effect) {\n\tvar flags = effect.f;\n\n\tif ((flags & DESTROYED) !== 0) {\n\t\treturn;\n\t}\n\n\tset_signal_status(effect, CLEAN);\n\n\tvar previous_effect = active_effect;\n\tvar was_updating_effect = is_updating_effect;\n\n\tactive_effect = effect;\n\tis_updating_effect = true;\n\n\tif (DEV) {\n\t\tvar previous_component_fn = dev_current_component_function;\n\t\tset_dev_current_component_function(effect.component_function);\n\t\tvar previous_stack = /** @type {any} */ (dev_stack);\n\t\t// only block effects have a dev stack, keep the current one otherwise\n\t\tset_dev_stack(effect.dev_stack ?? dev_stack);\n\t}\n\n\ttry {\n\t\tif ((flags & BLOCK_EFFECT) !== 0) {\n\t\t\tdestroy_block_effect_children(effect);\n\t\t} else {\n\t\t\tdestroy_effect_children(effect);\n\t\t}\n\n\t\texecute_effect_teardown(effect);\n\t\tvar teardown = update_reaction(effect);\n\t\teffect.teardown = typeof teardown === 'function' ? teardown : null;\n\t\teffect.wv = write_version;\n\n\t\t// In DEV, increment versions of any sources that were written to during the effect,\n\t\t// so that they are correctly marked as dirty when the effect re-runs\n\t\tif (DEV && tracing_mode_flag && (effect.f & DIRTY) !== 0 && effect.deps !== null) {\n\t\t\tfor (var dep of effect.deps) {\n\t\t\t\tif (dep.set_during_effect) {\n\t\t\t\t\tdep.wv = increment_write_version();\n\t\t\t\t\tdep.set_during_effect = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} finally {\n\t\tis_updating_effect = was_updating_effect;\n\t\tactive_effect = previous_effect;\n\n\t\tif (DEV) {\n\t\t\tset_dev_current_component_function(previous_component_fn);\n\t\t\tset_dev_stack(previous_stack);\n\t\t}\n\t}\n}\n\n/**\n * Returns a promise that resolves once any pending state changes have been applied.\n * @returns {Promise<void>}\n */\nexport async function tick() {\n\tif (async_mode_flag) {\n\t\treturn new Promise((f) => {\n\t\t\t// Race them against each other - in almost all cases requestAnimationFrame will fire first,\n\t\t\t// but e.g. in case the window is not focused or a view transition happens, requestAnimationFrame\n\t\t\t// will be delayed and setTimeout helps us resolve fast enough in that case\n\t\t\trequestAnimationFrame(() => f());\n\t\t\tsetTimeout(() => f());\n\t\t});\n\t}\n\n\tawait Promise.resolve();\n\n\t// By calling flushSync we guarantee that any pending state changes are applied after one tick.\n\t// TODO look into whether we can make flushing subsequent updates synchronously in the future.\n\tflushSync();\n}\n\n/**\n * Returns a promise that resolves once any state changes, and asynchronous work resulting from them,\n * have resolved and the DOM has been updated\n * @returns {Promise<void>}\n * @since 5.36\n */\nexport function settled() {\n\treturn Batch.ensure().settled();\n}\n\n/**\n * @template V\n * @param {Value<V>} signal\n * @returns {V}\n */\nexport function get(signal) {\n\tvar flags = signal.f;\n\tvar is_derived = (flags & DERIVED) !== 0;\n\n\tcaptured_signals?.add(signal);\n\n\t// Register the dependency on the current reaction signal.\n\tif (active_reaction !== null && !untracking) {\n\t\t// if we're in a derived that is being read inside an _async_ derived,\n\t\t// it's possible that the effect was already destroyed. In this case,\n\t\t// we don't add the dependency, because that would create a memory leak\n\t\tvar destroyed = active_effect !== null && (active_effect.f & DESTROYED) !== 0;\n\n\t\tif (!destroyed && !current_sources?.includes(signal)) {\n\t\t\tvar deps = active_reaction.deps;\n\n\t\t\tif ((active_reaction.f & REACTION_IS_UPDATING) !== 0) {\n\t\t\t\t// we're in the effect init/update cycle\n\t\t\t\tif (signal.rv < read_version) {\n\t\t\t\t\tsignal.rv = read_version;\n\n\t\t\t\t\t// If the signal is accessing the same dependencies in the same\n\t\t\t\t\t// order as it did last time, increment `skipped_deps`\n\t\t\t\t\t// rather than updating `new_deps`, which creates GC cost\n\t\t\t\t\tif (new_deps === null && deps !== null && deps[skipped_deps] === signal) {\n\t\t\t\t\t\tskipped_deps++;\n\t\t\t\t\t} else if (new_deps === null) {\n\t\t\t\t\t\tnew_deps = [signal];\n\t\t\t\t\t} else if (!skip_reaction || !new_deps.includes(signal)) {\n\t\t\t\t\t\t// Normally we can push duplicated dependencies to `new_deps`, but if we're inside\n\t\t\t\t\t\t// an unowned derived because skip_reaction is true, then we need to ensure that\n\t\t\t\t\t\t// we don't have duplicates\n\t\t\t\t\t\tnew_deps.push(signal);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// we're adding a dependency outside the init/update cycle\n\t\t\t\t// (i.e. after an `await`)\n\t\t\t\t(active_reaction.deps ??= []).push(signal);\n\n\t\t\t\tvar reactions = signal.reactions;\n\n\t\t\t\tif (reactions === null) {\n\t\t\t\t\tsignal.reactions = [active_reaction];\n\t\t\t\t} else if (!reactions.includes(active_reaction)) {\n\t\t\t\t\treactions.push(active_reaction);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else if (\n\t\tis_derived &&\n\t\t/** @type {Derived} */ (signal).deps === null &&\n\t\t/** @type {Derived} */ (signal).effects === null\n\t) {\n\t\tvar derived = /** @type {Derived} */ (signal);\n\t\tvar parent = derived.parent;\n\n\t\tif (parent !== null && (parent.f & UNOWNED) === 0) {\n\t\t\t// If the derived is owned by another derived then mark it as unowned\n\t\t\t// as the derived value might have been referenced in a different context\n\t\t\t// since and thus its parent might not be its true owner anymore\n\t\t\tderived.f ^= UNOWNED;\n\t\t}\n\t}\n\n\tif (DEV) {\n\t\tif (current_async_effect) {\n\t\t\tvar tracking = (current_async_effect.f & REACTION_IS_UPDATING) !== 0;\n\t\t\tvar was_read = current_async_effect.deps?.includes(signal);\n\n\t\t\tif (!tracking && !untracking && !was_read) {\n\t\t\t\tw.await_reactivity_loss(/** @type {string} */ (signal.label));\n\n\t\t\t\tvar trace = get_stack('TracedAt');\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tif (trace) console.warn(trace);\n\t\t\t}\n\t\t}\n\n\t\trecent_async_deriveds.delete(signal);\n\n\t\tif (\n\t\t\ttracing_mode_flag &&\n\t\t\t!untracking &&\n\t\t\ttracing_expressions !== null &&\n\t\t\tactive_reaction !== null &&\n\t\t\ttracing_expressions.reaction === active_reaction\n\t\t) {\n\t\t\t// Used when mapping state between special blocks like `each`\n\t\t\tif (signal.trace) {\n\t\t\t\tsignal.trace();\n\t\t\t} else {\n\t\t\t\ttrace = get_stack('TracedAt');\n\n\t\t\t\tif (trace) {\n\t\t\t\t\tvar entry = tracing_expressions.entries.get(signal);\n\n\t\t\t\t\tif (entry === undefined) {\n\t\t\t\t\t\tentry = { traces: [] };\n\t\t\t\t\t\ttracing_expressions.entries.set(signal, entry);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar last = entry.traces[entry.traces.length - 1];\n\n\t\t\t\t\t// traces can be duplicated, e.g. by `snapshot` invoking both\n\t\t\t\t\t// both `getOwnPropertyDescriptor` and `get` traps at once\n\t\t\t\t\tif (trace.stack !== last?.stack) {\n\t\t\t\t\t\tentry.traces.push(trace);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (is_destroying_effect) {\n\t\tif (old_values.has(signal)) {\n\t\t\treturn old_values.get(signal);\n\t\t}\n\n\t\tif (is_derived) {\n\t\t\tderived = /** @type {Derived} */ (signal);\n\n\t\t\tvar value = derived.v;\n\n\t\t\t// if the derived is dirty and has reactions, or depends on the values that just changed, re-execute\n\t\t\t// (a derived can be maybe_dirty due to the effect destroy removing its last reaction)\n\t\t\tif (\n\t\t\t\t((derived.f & CLEAN) === 0 && derived.reactions !== null) ||\n\t\t\t\tdepends_on_old_values(derived)\n\t\t\t) {\n\t\t\t\tvalue = execute_derived(derived);\n\t\t\t}\n\n\t\t\told_values.set(derived, value);\n\n\t\t\treturn value;\n\t\t}\n\t} else if (is_derived) {\n\t\tderived = /** @type {Derived} */ (signal);\n\n\t\tif (batch_values?.has(derived)) {\n\t\t\treturn batch_values.get(derived);\n\t\t}\n\n\t\tif (is_dirty(derived)) {\n\t\t\tupdate_derived(derived);\n\t\t}\n\t}\n\n\tif (batch_values?.has(signal)) {\n\t\treturn batch_values.get(signal);\n\t}\n\n\tif ((signal.f & ERROR_VALUE) !== 0) {\n\t\tthrow signal.v;\n\t}\n\n\treturn signal.v;\n}\n\n/** @param {Derived} derived */\nfunction depends_on_old_values(derived) {\n\tif (derived.v === UNINITIALIZED) return true; // we don't know, so assume the worst\n\tif (derived.deps === null) return false;\n\n\tfor (const dep of derived.deps) {\n\t\tif (old_values.has(dep)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ((dep.f & DERIVED) !== 0 && depends_on_old_values(/** @type {Derived} */ (dep))) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\n/**\n * Like `get`, but checks for `undefined`. Used for `var` declarations because they can be accessed before being declared\n * @template V\n * @param {Value<V> | undefined} signal\n * @returns {V | undefined}\n */\nexport function safe_get(signal) {\n\treturn signal && get(signal);\n}\n\n/**\n * When used inside a [`$derived`](https://svelte.dev/docs/svelte/$derived) or [`$effect`](https://svelte.dev/docs/svelte/$effect),\n * any state read inside `fn` will not be treated as a dependency.\n *\n * ```ts\n * $effect(() => {\n *   // this will run when `data` changes, but not when `time` changes\n *   save(data, {\n *     timestamp: untrack(() => time)\n *   });\n * });\n * ```\n * @template T\n * @param {() => T} fn\n * @returns {T}\n */\nexport function untrack(fn) {\n\tvar previous_untracking = untracking;\n\ttry {\n\t\tuntracking = true;\n\t\treturn fn();\n\t} finally {\n\t\tuntracking = previous_untracking;\n\t}\n}\n\nconst STATUS_MASK = ~(DIRTY | MAYBE_DIRTY | CLEAN);\n\n/**\n * @param {Signal} signal\n * @param {number} status\n * @returns {void}\n */\nexport function set_signal_status(signal, status) {\n\tsignal.f = (signal.f & STATUS_MASK) | status;\n}\n\n/**\n * @param {Record<string, unknown>} obj\n * @param {string[]} keys\n * @returns {Record<string, unknown>}\n */\nexport function exclude_from_object(obj, keys) {\n\t/** @type {Record<string, unknown>} */\n\tvar result = {};\n\n\tfor (var key in obj) {\n\t\tif (!keys.includes(key)) {\n\t\t\tresult[key] = obj[key];\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Possibly traverse an object and read all its properties so that they're all reactive in case this is `$state`.\n * Does only check first level of an object for performance reasons (heuristic should be good for 99% of all cases).\n * @param {any} value\n * @returns {void}\n */\nexport function deep_read_state(value) {\n\tif (typeof value !== 'object' || !value || value instanceof EventTarget) {\n\t\treturn;\n\t}\n\n\tif (STATE_SYMBOL in value) {\n\t\tdeep_read(value);\n\t} else if (!Array.isArray(value)) {\n\t\tfor (let key in value) {\n\t\t\tconst prop = value[key];\n\t\t\tif (typeof prop === 'object' && prop && STATE_SYMBOL in prop) {\n\t\t\t\tdeep_read(prop);\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Deeply traverse an object and read all its properties\n * so that they're all reactive in case this is `$state`\n * @param {any} value\n * @param {Set<any>} visited\n * @returns {void}\n */\nexport function deep_read(value, visited = new Set()) {\n\tif (\n\t\ttypeof value === 'object' &&\n\t\tvalue !== null &&\n\t\t// We don't want to traverse DOM elements\n\t\t!(value instanceof EventTarget) &&\n\t\t!visited.has(value)\n\t) {\n\t\tvisited.add(value);\n\t\t// When working with a possible SvelteDate, this\n\t\t// will ensure we capture changes to it.\n\t\tif (value instanceof Date) {\n\t\t\tvalue.getTime();\n\t\t}\n\t\tfor (let key in value) {\n\t\t\ttry {\n\t\t\t\tdeep_read(value[key], visited);\n\t\t\t} catch (e) {\n\t\t\t\t// continue\n\t\t\t}\n\t\t}\n\t\tconst proto = get_prototype_of(value);\n\t\tif (\n\t\t\tproto !== Object.prototype &&\n\t\t\tproto !== Array.prototype &&\n\t\t\tproto !== Map.prototype &&\n\t\t\tproto !== Set.prototype &&\n\t\t\tproto !== Date.prototype\n\t\t) {\n\t\t\tconst descriptors = get_descriptors(proto);\n\t\t\tfor (let key in descriptors) {\n\t\t\t\tconst get = descriptors[key].get;\n\t\t\t\tif (get) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tget.call(value);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// continue\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","/** @import { Source } from '#client' */\nimport { DEV } from 'esm-env';\nimport {\n\tget,\n\tactive_effect,\n\tupdate_version,\n\tactive_reaction,\n\tset_update_version,\n\tset_active_reaction\n} from './runtime.js';\nimport {\n\tarray_prototype,\n\tget_descriptor,\n\tget_prototype_of,\n\tis_array,\n\tobject_prototype\n} from '../shared/utils.js';\nimport {\n\tstate as source,\n\tset,\n\tincrement,\n\tflush_inspect_effects,\n\tset_inspect_effects_deferred\n} from './reactivity/sources.js';\nimport { PROXY_PATH_SYMBOL, STATE_SYMBOL } from '#client/constants';\nimport { UNINITIALIZED } from '../../constants.js';\nimport * as e from './errors.js';\nimport { get_stack, tag } from './dev/tracing.js';\nimport { tracing_mode_flag } from '../flags/index.js';\n\n// TODO move all regexes into shared module?\nconst regex_is_valid_identifier = /^[a-zA-Z_$][a-zA-Z_$0-9]*$/;\n\n/**\n * @template T\n * @param {T} value\n * @returns {T}\n */\nexport function proxy(value) {\n\t// if non-proxyable, or is already a proxy, return `value`\n\tif (typeof value !== 'object' || value === null || STATE_SYMBOL in value) {\n\t\treturn value;\n\t}\n\n\tconst prototype = get_prototype_of(value);\n\n\tif (prototype !== object_prototype && prototype !== array_prototype) {\n\t\treturn value;\n\t}\n\n\t/** @type {Map<any, Source<any>>} */\n\tvar sources = new Map();\n\tvar is_proxied_array = is_array(value);\n\tvar version = source(0);\n\n\tvar stack = DEV && tracing_mode_flag ? get_stack('CreatedAt') : null;\n\tvar parent_version = update_version;\n\n\t/**\n\t * Executes the proxy in the context of the reaction it was originally created in, if any\n\t * @template T\n\t * @param {() => T} fn\n\t */\n\tvar with_parent = (fn) => {\n\t\tif (update_version === parent_version) {\n\t\t\treturn fn();\n\t\t}\n\n\t\t// child source is being created after the initial proxy \n\t\t// prevent it from being associated with the current reaction\n\t\tvar reaction = active_reaction;\n\t\tvar version = update_version;\n\n\t\tset_active_reaction(null);\n\t\tset_update_version(parent_version);\n\n\t\tvar result = fn();\n\n\t\tset_active_reaction(reaction);\n\t\tset_update_version(version);\n\n\t\treturn result;\n\t};\n\n\tif (is_proxied_array) {\n\t\t// We need to create the length source eagerly to ensure that\n\t\t// mutations to the array are properly synced with our proxy\n\t\tsources.set('length', source(/** @type {any[]} */ (value).length, stack));\n\t\tif (DEV) {\n\t\t\tvalue = /** @type {any} */ (inspectable_array(/** @type {any[]} */ (value)));\n\t\t}\n\t}\n\n\t/** Used in dev for $inspect.trace() */\n\tvar path = '';\n\tlet updating = false;\n\t/** @param {string} new_path */\n\tfunction update_path(new_path) {\n\t\tif (updating) return;\n\t\tupdating = true;\n\t\tpath = new_path;\n\n\t\ttag(version, `${path} version`);\n\n\t\t// rename all child sources and child proxies\n\t\tfor (const [prop, source] of sources) {\n\t\t\ttag(source, get_label(path, prop));\n\t\t}\n\t\tupdating = false;\n\t}\n\n\treturn new Proxy(/** @type {any} */ (value), {\n\t\tdefineProperty(_, prop, descriptor) {\n\t\t\tif (\n\t\t\t\t!('value' in descriptor) ||\n\t\t\t\tdescriptor.configurable === false ||\n\t\t\t\tdescriptor.enumerable === false ||\n\t\t\t\tdescriptor.writable === false\n\t\t\t) {\n\t\t\t\t// we disallow non-basic descriptors, because unless they are applied to the\n\t\t\t\t// target object  which we avoid, so that state can be forked  we will run\n\t\t\t\t// afoul of the various invariants\n\t\t\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/getOwnPropertyDescriptor#invariants\n\t\t\t\te.state_descriptors_fixed();\n\t\t\t}\n\t\t\tvar s = sources.get(prop);\n\t\t\tif (s === undefined) {\n\t\t\t\ts = with_parent(() => {\n\t\t\t\t\tvar s = source(descriptor.value, stack);\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t\tif (DEV && typeof prop === 'string') {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\t\t\t\t\treturn s;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tset(s, descriptor.value, true);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tdeleteProperty(target, prop) {\n\t\t\tvar s = sources.get(prop);\n\n\t\t\tif (s === undefined) {\n\t\t\t\tif (prop in target) {\n\t\t\t\t\tconst s = with_parent(() => source(UNINITIALIZED, stack));\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t\tincrement(version);\n\n\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tset(s, UNINITIALIZED);\n\t\t\t\tincrement(version);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tget(target, prop, receiver) {\n\t\t\tif (prop === STATE_SYMBOL) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (DEV && prop === PROXY_PATH_SYMBOL) {\n\t\t\t\treturn update_path;\n\t\t\t}\n\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar exists = prop in target;\n\n\t\t\t// create a source, but only if it's an own property and not a prototype property\n\t\t\tif (s === undefined && (!exists || get_descriptor(target, prop)?.writable)) {\n\t\t\t\ts = with_parent(() => {\n\t\t\t\t\tvar p = proxy(exists ? target[prop] : UNINITIALIZED);\n\t\t\t\t\tvar s = source(p, stack);\n\n\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn s;\n\t\t\t\t});\n\n\t\t\t\tsources.set(prop, s);\n\t\t\t}\n\n\t\t\tif (s !== undefined) {\n\t\t\t\tvar v = get(s);\n\t\t\t\treturn v === UNINITIALIZED ? undefined : v;\n\t\t\t}\n\n\t\t\treturn Reflect.get(target, prop, receiver);\n\t\t},\n\n\t\tgetOwnPropertyDescriptor(target, prop) {\n\t\t\tvar descriptor = Reflect.getOwnPropertyDescriptor(target, prop);\n\n\t\t\tif (descriptor && 'value' in descriptor) {\n\t\t\t\tvar s = sources.get(prop);\n\t\t\t\tif (s) descriptor.value = get(s);\n\t\t\t} else if (descriptor === undefined) {\n\t\t\t\tvar source = sources.get(prop);\n\t\t\t\tvar value = source?.v;\n\n\t\t\t\tif (source !== undefined && value !== UNINITIALIZED) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\tconfigurable: true,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\twritable: true\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn descriptor;\n\t\t},\n\n\t\thas(target, prop) {\n\t\t\tif (prop === STATE_SYMBOL) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar has = (s !== undefined && s.v !== UNINITIALIZED) || Reflect.has(target, prop);\n\n\t\t\tif (\n\t\t\t\ts !== undefined ||\n\t\t\t\t(active_effect !== null && (!has || get_descriptor(target, prop)?.writable))\n\t\t\t) {\n\t\t\t\tif (s === undefined) {\n\t\t\t\t\ts = with_parent(() => {\n\t\t\t\t\t\tvar p = has ? proxy(target[prop]) : UNINITIALIZED;\n\t\t\t\t\t\tvar s = source(p, stack);\n\n\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn s;\n\t\t\t\t\t});\n\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t}\n\n\t\t\t\tvar value = get(s);\n\t\t\t\tif (value === UNINITIALIZED) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn has;\n\t\t},\n\n\t\tset(target, prop, value, receiver) {\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar has = prop in target;\n\n\t\t\t// variable.length = value -> clear all signals with index >= value\n\t\t\tif (is_proxied_array && prop === 'length') {\n\t\t\t\tfor (var i = value; i < /** @type {Source<number>} */ (s).v; i += 1) {\n\t\t\t\t\tvar other_s = sources.get(i + '');\n\t\t\t\t\tif (other_s !== undefined) {\n\t\t\t\t\t\tset(other_s, UNINITIALIZED);\n\t\t\t\t\t} else if (i in target) {\n\t\t\t\t\t\t// If the item exists in the original, we need to create a uninitialized source,\n\t\t\t\t\t\t// else a later read of the property would result in a source being created with\n\t\t\t\t\t\t// the value of the original item at that index.\n\t\t\t\t\t\tother_s = with_parent(() => source(UNINITIALIZED, stack));\n\t\t\t\t\t\tsources.set(i + '', other_s);\n\n\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\ttag(other_s, get_label(path, i));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we haven't yet created a source for this property, we need to ensure\n\t\t\t// we do so otherwise if we read it later, then the write won't be tracked and\n\t\t\t// the heuristics of effects will be different vs if we had read the proxied\n\t\t\t// object property before writing to that property.\n\t\t\tif (s === undefined) {\n\t\t\t\tif (!has || get_descriptor(target, prop)?.writable) {\n\t\t\t\t\ts = with_parent(() => source(undefined, stack));\n\n\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\t\t\t\t\tset(s, proxy(value));\n\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\thas = s.v !== UNINITIALIZED;\n\n\t\t\t\tvar p = with_parent(() => proxy(value));\n\t\t\t\tset(s, p);\n\t\t\t}\n\n\t\t\tvar descriptor = Reflect.getOwnPropertyDescriptor(target, prop);\n\n\t\t\t// Set the new value before updating any signals so that any listeners get the new value\n\t\t\tif (descriptor?.set) {\n\t\t\t\tdescriptor.set.call(receiver, value);\n\t\t\t}\n\n\t\t\tif (!has) {\n\t\t\t\t// If we have mutated an array directly, we might need to\n\t\t\t\t// signal that length has also changed. Do it before updating metadata\n\t\t\t\t// to ensure that iterating over the array as a result of a metadata update\n\t\t\t\t// will not cause the length to be out of sync.\n\t\t\t\tif (is_proxied_array && typeof prop === 'string') {\n\t\t\t\t\tvar ls = /** @type {Source<number>} */ (sources.get('length'));\n\t\t\t\t\tvar n = Number(prop);\n\n\t\t\t\t\tif (Number.isInteger(n) && n >= ls.v) {\n\t\t\t\t\t\tset(ls, n + 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tincrement(version);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\townKeys(target) {\n\t\t\tget(version);\n\n\t\t\tvar own_keys = Reflect.ownKeys(target).filter((key) => {\n\t\t\t\tvar source = sources.get(key);\n\t\t\t\treturn source === undefined || source.v !== UNINITIALIZED;\n\t\t\t});\n\n\t\t\tfor (var [key, source] of sources) {\n\t\t\t\tif (source.v !== UNINITIALIZED && !(key in target)) {\n\t\t\t\t\town_keys.push(key);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn own_keys;\n\t\t},\n\n\t\tsetPrototypeOf() {\n\t\t\te.state_prototype_fixed();\n\t\t}\n\t});\n}\n\n/**\n * @param {string} path\n * @param {string | symbol} prop\n */\nfunction get_label(path, prop) {\n\tif (typeof prop === 'symbol') return `${path}[Symbol(${prop.description ?? ''})]`;\n\tif (regex_is_valid_identifier.test(prop)) return `${path}.${prop}`;\n\treturn /^\\d+$/.test(prop) ? `${path}[${prop}]` : `${path}['${prop}']`;\n}\n\n/**\n * @param {any} value\n */\nexport function get_proxied_value(value) {\n\ttry {\n\t\tif (value !== null && typeof value === 'object' && STATE_SYMBOL in value) {\n\t\t\treturn value[STATE_SYMBOL];\n\t\t}\n\t} catch {\n\t\t// the above if check can throw an error if the value in question\n\t\t// is the contentWindow of an iframe on another domain, in which\n\t\t// case we want to just return the value (because it's definitely\n\t\t// not a proxied value) so we don't break any JavaScript interacting\n\t\t// with that iframe (such as various payment companies client side\n\t\t// JavaScript libraries interacting with their iframes on the same\n\t\t// domain)\n\t}\n\n\treturn value;\n}\n\n/**\n * @param {any} a\n * @param {any} b\n */\nexport function is(a, b) {\n\treturn Object.is(get_proxied_value(a), get_proxied_value(b));\n}\n\nconst ARRAY_MUTATING_METHODS = new Set([\n\t'copyWithin',\n\t'fill',\n\t'pop',\n\t'push',\n\t'reverse',\n\t'shift',\n\t'sort',\n\t'splice',\n\t'unshift'\n]);\n\n/**\n * Wrap array mutating methods so $inspect is triggered only once and\n * to prevent logging an array in intermediate state (e.g. with an empty slot)\n * @param {any[]} array\n */\nfunction inspectable_array(array) {\n\treturn new Proxy(array, {\n\t\tget(target, prop, receiver) {\n\t\t\tvar value = Reflect.get(target, prop, receiver);\n\t\t\tif (!ARRAY_MUTATING_METHODS.has(/** @type {string} */ (prop))) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * @this {any[]}\n\t\t\t * @param {any[]} args\n\t\t\t */\n\t\t\treturn function (...args) {\n\t\t\t\tset_inspect_effects_deferred();\n\t\t\t\tvar result = value.apply(this, args);\n\t\t\t\tflush_inspect_effects();\n\t\t\t\treturn result;\n\t\t\t};\n\t\t}\n\t});\n}\n","/** @import { Effect, TemplateNode } from '#client' */\nimport { hydrate_node, hydrating, set_hydrate_node } from './hydration.js';\nimport { DEV } from 'esm-env';\nimport { init_array_prototype_warnings } from '../dev/equality.js';\nimport { get_descriptor, is_extensible } from '../../shared/utils.js';\nimport { active_effect } from '../runtime.js';\nimport { async_mode_flag } from '../../flags/index.js';\nimport { TEXT_NODE, EFFECT_RAN } from '#client/constants';\nimport { eager_block_effects } from '../reactivity/batch.js';\n\n// export these for reference in the compiled code, making global name deduplication unnecessary\n/** @type {Window} */\nexport var $window;\n\n/** @type {Document} */\nexport var $document;\n\n/** @type {boolean} */\nexport var is_firefox;\n\n/** @type {() => Node | null} */\nvar first_child_getter;\n/** @type {() => Node | null} */\nvar next_sibling_getter;\n\n/**\n * Initialize these lazily to avoid issues when using the runtime in a server context\n * where these globals are not available while avoiding a separate server entry point\n */\nexport function init_operations() {\n\tif ($window !== undefined) {\n\t\treturn;\n\t}\n\n\t$window = window;\n\t$document = document;\n\tis_firefox = /Firefox/.test(navigator.userAgent);\n\n\tvar element_prototype = Element.prototype;\n\tvar node_prototype = Node.prototype;\n\tvar text_prototype = Text.prototype;\n\n\t// @ts-ignore\n\tfirst_child_getter = get_descriptor(node_prototype, 'firstChild').get;\n\t// @ts-ignore\n\tnext_sibling_getter = get_descriptor(node_prototype, 'nextSibling').get;\n\n\tif (is_extensible(element_prototype)) {\n\t\t// the following assignments improve perf of lookups on DOM nodes\n\t\t// @ts-expect-error\n\t\telement_prototype.__click = undefined;\n\t\t// @ts-expect-error\n\t\telement_prototype.__className = undefined;\n\t\t// @ts-expect-error\n\t\telement_prototype.__attributes = null;\n\t\t// @ts-expect-error\n\t\telement_prototype.__style = undefined;\n\t\t// @ts-expect-error\n\t\telement_prototype.__e = undefined;\n\t}\n\n\tif (is_extensible(text_prototype)) {\n\t\t// @ts-expect-error\n\t\ttext_prototype.__t = undefined;\n\t}\n\n\tif (DEV) {\n\t\t// @ts-expect-error\n\t\telement_prototype.__svelte_meta = null;\n\n\t\tinit_array_prototype_warnings();\n\t}\n}\n\n/**\n * @param {string} value\n * @returns {Text}\n */\nexport function create_text(value = '') {\n\treturn document.createTextNode(value);\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n * @returns {Node | null}\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function get_first_child(node) {\n\treturn first_child_getter.call(node);\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n * @returns {Node | null}\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function get_next_sibling(node) {\n\treturn next_sibling_getter.call(node);\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @template {Node} N\n * @param {N} node\n * @param {boolean} is_text\n * @returns {Node | null}\n */\nexport function child(node, is_text) {\n\tif (!hydrating) {\n\t\treturn get_first_child(node);\n\t}\n\n\tvar child = /** @type {TemplateNode} */ (get_first_child(hydrate_node));\n\n\t// Child can be null if we have an element with a single child, like `<p>{text}</p>`, where `text` is empty\n\tif (child === null) {\n\t\tchild = hydrate_node.appendChild(create_text());\n\t} else if (is_text && child.nodeType !== TEXT_NODE) {\n\t\tvar text = create_text();\n\t\tchild?.before(text);\n\t\tset_hydrate_node(text);\n\t\treturn text;\n\t}\n\n\tset_hydrate_node(child);\n\treturn child;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {DocumentFragment | TemplateNode | TemplateNode[]} fragment\n * @param {boolean} [is_text]\n * @returns {Node | null}\n */\nexport function first_child(fragment, is_text = false) {\n\tif (!hydrating) {\n\t\t// when not hydrating, `fragment` is a `DocumentFragment` (the result of calling `open_frag`)\n\t\tvar first = /** @type {DocumentFragment} */ (get_first_child(/** @type {Node} */ (fragment)));\n\n\t\t// TODO prevent user comments with the empty string when preserveComments is true\n\t\tif (first instanceof Comment && first.data === '') return get_next_sibling(first);\n\n\t\treturn first;\n\t}\n\n\t// if an {expression} is empty during SSR, there might be no\n\t// text node to hydrate  we must therefore create one\n\tif (is_text && hydrate_node?.nodeType !== TEXT_NODE) {\n\t\tvar text = create_text();\n\n\t\thydrate_node?.before(text);\n\t\tset_hydrate_node(text);\n\t\treturn text;\n\t}\n\n\treturn hydrate_node;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {TemplateNode} node\n * @param {number} count\n * @param {boolean} is_text\n * @returns {Node | null}\n */\nexport function sibling(node, count = 1, is_text = false) {\n\tlet next_sibling = hydrating ? hydrate_node : node;\n\tvar last_sibling;\n\n\twhile (count--) {\n\t\tlast_sibling = next_sibling;\n\t\tnext_sibling = /** @type {TemplateNode} */ (get_next_sibling(next_sibling));\n\t}\n\n\tif (!hydrating) {\n\t\treturn next_sibling;\n\t}\n\n\t// if a sibling {expression} is empty during SSR, there might be no\n\t// text node to hydrate  we must therefore create one\n\tif (is_text && next_sibling?.nodeType !== TEXT_NODE) {\n\t\tvar text = create_text();\n\t\t// If the next sibling is `null` and we're handling text then it's because\n\t\t// the SSR content was empty for the text, so we need to generate a new text\n\t\t// node and insert it after the last sibling\n\t\tif (next_sibling === null) {\n\t\t\tlast_sibling?.after(text);\n\t\t} else {\n\t\t\tnext_sibling.before(text);\n\t\t}\n\t\tset_hydrate_node(text);\n\t\treturn text;\n\t}\n\n\tset_hydrate_node(next_sibling);\n\treturn /** @type {TemplateNode} */ (next_sibling);\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n * @returns {void}\n */\nexport function clear_text_content(node) {\n\tnode.textContent = '';\n}\n\n/**\n * Returns `true` if we're updating the current block, for example `condition` in\n * an `{#if condition}` block just changed. In this case, the branch should be\n * appended (or removed) at the same time as other updates within the\n * current `<svelte:boundary>`\n */\nexport function should_defer_append() {\n\tif (!async_mode_flag) return false;\n\tif (eager_block_effects !== null) return false;\n\n\tvar flags = /** @type {Effect} */ (active_effect).f;\n\treturn (flags & EFFECT_RAN) !== 0;\n}\n\n/**\n *\n * @param {string} tag\n * @param {string} [namespace]\n * @param {string} [is]\n * @returns\n */\nexport function create_element(tag, namespace, is) {\n\tlet options = is ? { is } : undefined;\n\tif (namespace) {\n\t\treturn document.createElementNS(namespace, tag, options);\n\t}\n\treturn document.createElement(tag, options);\n}\n\nexport function create_fragment() {\n\treturn document.createDocumentFragment();\n}\n\n/**\n * @param {string} data\n * @returns\n */\nexport function create_comment(data = '') {\n\treturn document.createComment(data);\n}\n\n/**\n * @param {Element} element\n * @param {string} key\n * @param {string} value\n * @returns\n */\nexport function set_attribute(element, key, value = '') {\n\tif (key.startsWith('xlink:')) {\n\t\telement.setAttributeNS('http://www.w3.org/1999/xlink', key, value);\n\t\treturn;\n\t}\n\treturn element.setAttribute(key, value);\n}\n","import * as w from '../warnings.js';\nimport { get_proxied_value } from '../proxy.js';\n\nexport function init_array_prototype_warnings() {\n\tconst array_prototype = Array.prototype;\n\t// The REPL ends up here over and over, and this prevents it from adding more and more patches\n\t// of the same kind to the prototype, which would slow down everything over time.\n\t// @ts-expect-error\n\tconst cleanup = Array.__svelte_cleanup;\n\tif (cleanup) {\n\t\tcleanup();\n\t}\n\n\tconst { indexOf, lastIndexOf, includes } = array_prototype;\n\n\tarray_prototype.indexOf = function (item, from_index) {\n\t\tconst index = indexOf.call(this, item, from_index);\n\n\t\tif (index === -1) {\n\t\t\tfor (let i = from_index ?? 0; i < this.length; i += 1) {\n\t\t\t\tif (get_proxied_value(this[i]) === item) {\n\t\t\t\t\tw.state_proxy_equality_mismatch('array.indexOf(...)');\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t};\n\n\tarray_prototype.lastIndexOf = function (item, from_index) {\n\t\t// we need to specify this.length - 1 because it's probably using something like\n\t\t// `arguments` inside so passing undefined is different from not passing anything\n\t\tconst index = lastIndexOf.call(this, item, from_index ?? this.length - 1);\n\n\t\tif (index === -1) {\n\t\t\tfor (let i = 0; i <= (from_index ?? this.length - 1); i += 1) {\n\t\t\t\tif (get_proxied_value(this[i]) === item) {\n\t\t\t\t\tw.state_proxy_equality_mismatch('array.lastIndexOf(...)');\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t};\n\n\tarray_prototype.includes = function (item, from_index) {\n\t\tconst has = includes.call(this, item, from_index);\n\n\t\tif (!has) {\n\t\t\tfor (let i = 0; i < this.length; i += 1) {\n\t\t\t\tif (get_proxied_value(this[i]) === item) {\n\t\t\t\t\tw.state_proxy_equality_mismatch('array.includes(...)');\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn has;\n\t};\n\n\t// @ts-expect-error\n\tArray.__svelte_cleanup = () => {\n\t\tarray_prototype.indexOf = indexOf;\n\t\tarray_prototype.lastIndexOf = lastIndexOf;\n\t\tarray_prototype.includes = includes;\n\t};\n}\n\n/**\n * @param {any} a\n * @param {any} b\n * @param {boolean} equal\n * @returns {boolean}\n */\nexport function strict_equals(a, b, equal = true) {\n\t// try-catch needed because this tries to read properties of `a` and `b`,\n\t// which could be disallowed for example in a secure context\n\ttry {\n\t\tif ((a === b) !== (get_proxied_value(a) === get_proxied_value(b))) {\n\t\t\tw.state_proxy_equality_mismatch(equal ? '===' : '!==');\n\t\t}\n\t} catch {}\n\n\treturn (a === b) === equal;\n}\n\n/**\n * @param {any} a\n * @param {any} b\n * @param {boolean} equal\n * @returns {boolean}\n */\nexport function equals(a, b, equal = true) {\n\tif ((a == b) !== (get_proxied_value(a) == get_proxied_value(b))) {\n\t\tw.state_proxy_equality_mismatch(equal ? '==' : '!=');\n\t}\n\n\treturn (a == b) === equal;\n}\n","import { hydrating } from '../hydration.js';\nimport { clear_text_content, get_first_child } from '../operations.js';\nimport { queue_micro_task } from '../task.js';\n\n/**\n * @param {HTMLElement} dom\n * @param {boolean} value\n * @returns {void}\n */\nexport function autofocus(dom, value) {\n\tif (value) {\n\t\tconst body = document.body;\n\t\tdom.autofocus = true;\n\n\t\tqueue_micro_task(() => {\n\t\t\tif (document.activeElement === body) {\n\t\t\t\tdom.focus();\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * The child of a textarea actually corresponds to the defaultValue property, so we need\n * to remove it upon hydration to avoid a bug when someone resets the form value.\n * @param {HTMLTextAreaElement} dom\n * @returns {void}\n */\nexport function remove_textarea_child(dom) {\n\tif (hydrating && get_first_child(dom) !== null) {\n\t\tclear_text_content(dom);\n\t}\n}\n\nlet listening_to_form_reset = false;\n\nexport function add_form_reset_listener() {\n\tif (!listening_to_form_reset) {\n\t\tlistening_to_form_reset = true;\n\t\tdocument.addEventListener(\n\t\t\t'reset',\n\t\t\t(evt) => {\n\t\t\t\t// Needs to happen one tick later or else the dom properties of the form\n\t\t\t\t// elements have not updated to their reset values yet\n\t\t\t\tPromise.resolve().then(() => {\n\t\t\t\t\tif (!evt.defaultPrevented) {\n\t\t\t\t\t\tfor (const e of /**@type {HTMLFormElement} */ (evt.target).elements) {\n\t\t\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\t\t\te.__on_r?.();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// In the capture phase to guarantee we get noticed of it (no possiblity of stopPropagation)\n\t\t\t{ capture: true }\n\t\t);\n\t}\n}\n","import { teardown } from '../../../reactivity/effects.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../../runtime.js';\nimport { add_form_reset_listener } from '../misc.js';\n\n/**\n * Fires the handler once immediately (unless corresponding arg is set to `false`),\n * then listens to the given events until the render effect context is destroyed\n * @param {EventTarget} target\n * @param {Array<string>} events\n * @param {(event?: Event) => void} handler\n * @param {any} call_handler_immediately\n */\nexport function listen(target, events, handler, call_handler_immediately = true) {\n\tif (call_handler_immediately) {\n\t\thandler();\n\t}\n\n\tfor (var name of events) {\n\t\ttarget.addEventListener(name, handler);\n\t}\n\n\tteardown(() => {\n\t\tfor (var name of events) {\n\t\t\ttarget.removeEventListener(name, handler);\n\t\t}\n\t});\n}\n\n/**\n * @template T\n * @param {() => T} fn\n */\nexport function without_reactive_context(fn) {\n\tvar previous_reaction = active_reaction;\n\tvar previous_effect = active_effect;\n\tset_active_reaction(null);\n\tset_active_effect(null);\n\ttry {\n\t\treturn fn();\n\t} finally {\n\t\tset_active_reaction(previous_reaction);\n\t\tset_active_effect(previous_effect);\n\t}\n}\n\n/**\n * Listen to the given event, and then instantiate a global form reset listener if not already done,\n * to notify all bindings when the form is reset\n * @param {HTMLElement} element\n * @param {string} event\n * @param {(is_reset?: true) => void} handler\n * @param {(is_reset?: true) => void} [on_reset]\n */\nexport function listen_to_event_and_reset_event(element, event, handler, on_reset = handler) {\n\telement.addEventListener(event, () => without_reactive_context(handler));\n\t// @ts-expect-error\n\tconst prev = element.__on_r;\n\tif (prev) {\n\t\t// special case for checkbox that can have multiple binds (group & checked)\n\t\t// @ts-expect-error\n\t\telement.__on_r = () => {\n\t\t\tprev();\n\t\t\ton_reset(true);\n\t\t};\n\t} else {\n\t\t// @ts-expect-error\n\t\telement.__on_r = () => on_reset(true);\n\t}\n\n\tadd_form_reset_listener();\n}\n","import { teardown } from '../../reactivity/effects.js';\nimport { define_property, is_array } from '../../../shared/utils.js';\nimport { hydrating } from '../hydration.js';\nimport { queue_micro_task } from '../task.js';\nimport { FILENAME } from '../../../../constants.js';\nimport * as w from '../../warnings.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../runtime.js';\nimport { without_reactive_context } from './bindings/shared.js';\n\n/** @type {Set<string>} */\nexport const all_registered_events = new Set();\n\n/** @type {Set<(events: Array<string>) => void>} */\nexport const root_event_handles = new Set();\n\n/**\n * SSR adds onload and onerror attributes to catch those events before the hydration.\n * This function detects those cases, removes the attributes and replays the events.\n * @param {HTMLElement} dom\n */\nexport function replay_events(dom) {\n\tif (!hydrating) return;\n\n\tdom.removeAttribute('onload');\n\tdom.removeAttribute('onerror');\n\t// @ts-expect-error\n\tconst event = dom.__e;\n\tif (event !== undefined) {\n\t\t// @ts-expect-error\n\t\tdom.__e = undefined;\n\t\tqueueMicrotask(() => {\n\t\t\tif (dom.isConnected) {\n\t\t\t\tdom.dispatchEvent(event);\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * @param {string} event_name\n * @param {EventTarget} dom\n * @param {EventListener} [handler]\n * @param {AddEventListenerOptions} [options]\n */\nexport function create_event(event_name, dom, handler, options = {}) {\n\t/**\n\t * @this {EventTarget}\n\t */\n\tfunction target_handler(/** @type {Event} */ event) {\n\t\tif (!options.capture) {\n\t\t\t// Only call in the bubble phase, else delegated events would be called before the capturing events\n\t\t\thandle_event_propagation.call(dom, event);\n\t\t}\n\t\tif (!event.cancelBubble) {\n\t\t\treturn without_reactive_context(() => {\n\t\t\t\treturn handler?.call(this, event);\n\t\t\t});\n\t\t}\n\t}\n\n\t// Chrome has a bug where pointer events don't work when attached to a DOM element that has been cloned\n\t// with cloneNode() and the DOM element is disconnected from the document. To ensure the event works, we\n\t// defer the attachment till after it's been appended to the document. TODO: remove this once Chrome fixes\n\t// this bug. The same applies to wheel events and touch events.\n\tif (\n\t\tevent_name.startsWith('pointer') ||\n\t\tevent_name.startsWith('touch') ||\n\t\tevent_name === 'wheel'\n\t) {\n\t\tqueue_micro_task(() => {\n\t\t\tdom.addEventListener(event_name, target_handler, options);\n\t\t});\n\t} else {\n\t\tdom.addEventListener(event_name, target_handler, options);\n\t}\n\n\treturn target_handler;\n}\n\n/**\n * Attaches an event handler to an element and returns a function that removes the handler. Using this\n * rather than `addEventListener` will preserve the correct order relative to handlers added declaratively\n * (with attributes like `onclick`), which use event delegation for performance reasons\n *\n * @param {EventTarget} element\n * @param {string} type\n * @param {EventListener} handler\n * @param {AddEventListenerOptions} [options]\n */\nexport function on(element, type, handler, options = {}) {\n\tvar target_handler = create_event(type, element, handler, options);\n\n\treturn () => {\n\t\telement.removeEventListener(type, target_handler, options);\n\t};\n}\n\n/**\n * @param {string} event_name\n * @param {Element} dom\n * @param {EventListener} [handler]\n * @param {boolean} [capture]\n * @param {boolean} [passive]\n * @returns {void}\n */\nexport function event(event_name, dom, handler, capture, passive) {\n\tvar options = { capture, passive };\n\tvar target_handler = create_event(event_name, dom, handler, options);\n\n\tif (\n\t\tdom === document.body ||\n\t\t// @ts-ignore\n\t\tdom === window ||\n\t\t// @ts-ignore\n\t\tdom === document ||\n\t\t// Firefox has quirky behavior, it can happen that we still get \"canplay\" events when the element is already removed\n\t\tdom instanceof HTMLMediaElement\n\t) {\n\t\tteardown(() => {\n\t\t\tdom.removeEventListener(event_name, target_handler, options);\n\t\t});\n\t}\n}\n\n/**\n * @param {Array<string>} events\n * @returns {void}\n */\nexport function delegate(events) {\n\tfor (var i = 0; i < events.length; i++) {\n\t\tall_registered_events.add(events[i]);\n\t}\n\n\tfor (var fn of root_event_handles) {\n\t\tfn(events);\n\t}\n}\n\n// used to store the reference to the currently propagated event\n// to prevent garbage collection between microtasks in Firefox\n// If the event object is GCed too early, the expando __root property\n// set on the event object is lost, causing the event delegation\n// to process the event twice\nlet last_propagated_event = null;\n\n/**\n * @this {EventTarget}\n * @param {Event} event\n * @returns {void}\n */\nexport function handle_event_propagation(event) {\n\tvar handler_element = this;\n\tvar owner_document = /** @type {Node} */ (handler_element).ownerDocument;\n\tvar event_name = event.type;\n\tvar path = event.composedPath?.() || [];\n\tvar current_target = /** @type {null | Element} */ (path[0] || event.target);\n\n\tlast_propagated_event = event;\n\n\t// composedPath contains list of nodes the event has propagated through.\n\t// We check __root to skip all nodes below it in case this is a\n\t// parent of the __root node, which indicates that there's nested\n\t// mounted apps. In this case we don't want to trigger events multiple times.\n\tvar path_idx = 0;\n\n\t// the `last_propagated_event === event` check is redundant, but\n\t// without it the variable will be DCE'd and things will\n\t// fail mysteriously in Firefox\n\t// @ts-expect-error is added below\n\tvar handled_at = last_propagated_event === event && event.__root;\n\n\tif (handled_at) {\n\t\tvar at_idx = path.indexOf(handled_at);\n\t\tif (\n\t\t\tat_idx !== -1 &&\n\t\t\t(handler_element === document || handler_element === /** @type {any} */ (window))\n\t\t) {\n\t\t\t// This is the fallback document listener or a window listener, but the event was already handled\n\t\t\t// -> ignore, but set handle_at to document/window so that we're resetting the event\n\t\t\t// chain in case someone manually dispatches the same event object again.\n\t\t\t// @ts-expect-error\n\t\t\tevent.__root = handler_element;\n\t\t\treturn;\n\t\t}\n\n\t\t// We're deliberately not skipping if the index is higher, because\n\t\t// someone could create an event programmatically and emit it multiple times,\n\t\t// in which case we want to handle the whole propagation chain properly each time.\n\t\t// (this will only be a false negative if the event is dispatched multiple times and\n\t\t// the fallback document listener isn't reached in between, but that's super rare)\n\t\tvar handler_idx = path.indexOf(handler_element);\n\t\tif (handler_idx === -1) {\n\t\t\t// handle_idx can theoretically be -1 (happened in some JSDOM testing scenarios with an event listener on the window object)\n\t\t\t// so guard against that, too, and assume that everything was handled at this point.\n\t\t\treturn;\n\t\t}\n\n\t\tif (at_idx <= handler_idx) {\n\t\t\tpath_idx = at_idx;\n\t\t}\n\t}\n\n\tcurrent_target = /** @type {Element} */ (path[path_idx] || event.target);\n\t// there can only be one delegated event per element, and we either already handled the current target,\n\t// or this is the very first target in the chain which has a non-delegated listener, in which case it's safe\n\t// to handle a possible delegated event on it later (through the root delegation listener for example).\n\tif (current_target === handler_element) return;\n\n\t// Proxy currentTarget to correct target\n\tdefine_property(event, 'currentTarget', {\n\t\tconfigurable: true,\n\t\tget() {\n\t\t\treturn current_target || owner_document;\n\t\t}\n\t});\n\n\t// This started because of Chromium issue https://chromestatus.com/feature/5128696823545856,\n\t// where removal or moving of of the DOM can cause sync `blur` events to fire, which can cause logic\n\t// to run inside the current `active_reaction`, which isn't what we want at all. However, on reflection,\n\t// it's probably best that all event handled by Svelte have this behaviour, as we don't really want\n\t// an event handler to run in the context of another reaction or effect.\n\tvar previous_reaction = active_reaction;\n\tvar previous_effect = active_effect;\n\tset_active_reaction(null);\n\tset_active_effect(null);\n\n\ttry {\n\t\t/**\n\t\t * @type {unknown}\n\t\t */\n\t\tvar throw_error;\n\t\t/**\n\t\t * @type {unknown[]}\n\t\t */\n\t\tvar other_errors = [];\n\n\t\twhile (current_target !== null) {\n\t\t\t/** @type {null | Element} */\n\t\t\tvar parent_element =\n\t\t\t\tcurrent_target.assignedSlot ||\n\t\t\t\tcurrent_target.parentNode ||\n\t\t\t\t/** @type {any} */ (current_target).host ||\n\t\t\t\tnull;\n\n\t\t\ttry {\n\t\t\t\t// @ts-expect-error\n\t\t\t\tvar delegated = current_target['__' + event_name];\n\n\t\t\t\tif (\n\t\t\t\t\tdelegated != null &&\n\t\t\t\t\t(!(/** @type {any} */ (current_target).disabled) ||\n\t\t\t\t\t\t// DOM could've been updated already by the time this is reached, so we check this as well\n\t\t\t\t\t\t// -> the target could not have been disabled because it emits the event in the first place\n\t\t\t\t\t\tevent.target === current_target)\n\t\t\t\t) {\n\t\t\t\t\tif (is_array(delegated)) {\n\t\t\t\t\t\tvar [fn, ...data] = delegated;\n\t\t\t\t\t\tfn.apply(current_target, [event, ...data]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelegated.call(current_target, event);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tif (throw_error) {\n\t\t\t\t\tother_errors.push(error);\n\t\t\t\t} else {\n\t\t\t\t\tthrow_error = error;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (event.cancelBubble || parent_element === handler_element || parent_element === null) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcurrent_target = parent_element;\n\t\t}\n\n\t\tif (throw_error) {\n\t\t\tfor (let error of other_errors) {\n\t\t\t\t// Throw the rest of the errors, one-by-one on a microtask\n\t\t\t\tqueueMicrotask(() => {\n\t\t\t\t\tthrow error;\n\t\t\t\t});\n\t\t\t}\n\t\t\tthrow throw_error;\n\t\t}\n\t} finally {\n\t\t// @ts-expect-error is used above\n\t\tevent.__root = handler_element;\n\t\t// @ts-ignore remove proxy on currentTarget\n\t\tdelete event.currentTarget;\n\t\tset_active_reaction(previous_reaction);\n\t\tset_active_effect(previous_effect);\n\t}\n}\n\n/**\n * In dev, warn if an event handler is not a function, as it means the\n * user probably called the handler or forgot to add a `() =>`\n * @param {() => (event: Event, ...args: any) => void} thunk\n * @param {EventTarget} element\n * @param {[Event, ...any]} args\n * @param {any} component\n * @param {[number, number]} [loc]\n * @param {boolean} [remove_parens]\n */\nexport function apply(\n\tthunk,\n\telement,\n\targs,\n\tcomponent,\n\tloc,\n\thas_side_effects = false,\n\tremove_parens = false\n) {\n\tlet handler;\n\tlet error;\n\n\ttry {\n\t\thandler = thunk();\n\t} catch (e) {\n\t\terror = e;\n\t}\n\n\tif (typeof handler !== 'function' && (has_side_effects || handler != null || error)) {\n\t\tconst filename = component?.[FILENAME];\n\t\tconst location = loc ? ` at ${filename}:${loc[0]}:${loc[1]}` : ` in ${filename}`;\n\t\tconst phase = args[0]?.eventPhase < Event.BUBBLING_PHASE ? 'capture' : '';\n\t\tconst event_name = args[0]?.type + phase;\n\t\tconst description = `\\`${event_name}\\` handler${location}`;\n\t\tconst suggestion = remove_parens ? 'remove the trailing `()`' : 'add a leading `() =>`';\n\n\t\tw.event_handler_invalid(description, suggestion);\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\t}\n\thandler?.apply(element, args);\n}\n","/** @param {string} html */\nexport function create_fragment_from_html(html) {\n\tvar elem = document.createElement('template');\n\telem.innerHTML = html.replaceAll('<!>', '<!---->'); // XHTML compliance\n\treturn elem.content;\n}\n","/** @import { Effect, TemplateNode } from '#client' */\n/** @import { TemplateStructure } from './types' */\nimport { hydrate_next, hydrate_node, hydrating, set_hydrate_node } from './hydration.js';\nimport {\n\tcreate_text,\n\tget_first_child,\n\tis_firefox,\n\tcreate_element,\n\tcreate_fragment,\n\tcreate_comment,\n\tset_attribute\n} from './operations.js';\nimport { create_fragment_from_html } from './reconciler.js';\nimport { active_effect } from '../runtime.js';\nimport {\n\tNAMESPACE_MATHML,\n\tNAMESPACE_SVG,\n\tTEMPLATE_FRAGMENT,\n\tTEMPLATE_USE_IMPORT_NODE,\n\tTEMPLATE_USE_MATHML,\n\tTEMPLATE_USE_SVG\n} from '../../../constants.js';\nimport { COMMENT_NODE, DOCUMENT_FRAGMENT_NODE, TEXT_NODE } from '#client/constants';\n\n/**\n * @param {TemplateNode} start\n * @param {TemplateNode | null} end\n */\nexport function assign_nodes(start, end) {\n\tvar effect = /** @type {Effect} */ (active_effect);\n\tif (effect.nodes_start === null) {\n\t\teffect.nodes_start = start;\n\t\teffect.nodes_end = end;\n\t}\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_html(content, flags) {\n\tvar is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;\n\tvar use_import_node = (flags & TEMPLATE_USE_IMPORT_NODE) !== 0;\n\n\t/** @type {Node} */\n\tvar node;\n\n\t/**\n\t * Whether or not the first item is a text/element node. If not, we need to\n\t * create an additional comment node to act as `effect.nodes.start`\n\t */\n\tvar has_start = !content.startsWith('<!>');\n\n\treturn () => {\n\t\tif (hydrating) {\n\t\t\tassign_nodes(hydrate_node, null);\n\t\t\treturn hydrate_node;\n\t\t}\n\n\t\tif (node === undefined) {\n\t\t\tnode = create_fragment_from_html(has_start ? content : '<!>' + content);\n\t\t\tif (!is_fragment) node = /** @type {Node} */ (get_first_child(node));\n\t\t}\n\n\t\tvar clone = /** @type {TemplateNode} */ (\n\t\t\tuse_import_node || is_firefox ? document.importNode(node, true) : node.cloneNode(true)\n\t\t);\n\n\t\tif (is_fragment) {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_first_child(clone));\n\t\t\tvar end = /** @type {TemplateNode} */ (clone.lastChild);\n\n\t\t\tassign_nodes(start, end);\n\t\t} else {\n\t\t\tassign_nodes(clone, clone);\n\t\t}\n\n\t\treturn clone;\n\t};\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n * @param {'svg' | 'math'} ns\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nfunction from_namespace(content, flags, ns = 'svg') {\n\t/**\n\t * Whether or not the first item is a text/element node. If not, we need to\n\t * create an additional comment node to act as `effect.nodes.start`\n\t */\n\tvar has_start = !content.startsWith('<!>');\n\n\tvar is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;\n\tvar wrapped = `<${ns}>${has_start ? content : '<!>' + content}</${ns}>`;\n\n\t/** @type {Element | DocumentFragment} */\n\tvar node;\n\n\treturn () => {\n\t\tif (hydrating) {\n\t\t\tassign_nodes(hydrate_node, null);\n\t\t\treturn hydrate_node;\n\t\t}\n\n\t\tif (!node) {\n\t\t\tvar fragment = /** @type {DocumentFragment} */ (create_fragment_from_html(wrapped));\n\t\t\tvar root = /** @type {Element} */ (get_first_child(fragment));\n\n\t\t\tif (is_fragment) {\n\t\t\t\tnode = document.createDocumentFragment();\n\t\t\t\twhile (get_first_child(root)) {\n\t\t\t\t\tnode.appendChild(/** @type {Node} */ (get_first_child(root)));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode = /** @type {Element} */ (get_first_child(root));\n\t\t\t}\n\t\t}\n\n\t\tvar clone = /** @type {TemplateNode} */ (node.cloneNode(true));\n\n\t\tif (is_fragment) {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_first_child(clone));\n\t\t\tvar end = /** @type {TemplateNode} */ (clone.lastChild);\n\n\t\t\tassign_nodes(start, end);\n\t\t} else {\n\t\t\tassign_nodes(clone, clone);\n\t\t}\n\n\t\treturn clone;\n\t};\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_svg(content, flags) {\n\treturn from_namespace(content, flags, 'svg');\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_mathml(content, flags) {\n\treturn from_namespace(content, flags, 'math');\n}\n\n/**\n * @param {TemplateStructure[]} structure\n * @param {typeof NAMESPACE_SVG | typeof NAMESPACE_MATHML | undefined} [ns]\n */\nfunction fragment_from_tree(structure, ns) {\n\tvar fragment = create_fragment();\n\n\tfor (var item of structure) {\n\t\tif (typeof item === 'string') {\n\t\t\tfragment.append(create_text(item));\n\t\t\tcontinue;\n\t\t}\n\n\t\t// if `preserveComments === true`, comments are represented as `['// <data>']`\n\t\tif (item === undefined || item[0][0] === '/') {\n\t\t\tfragment.append(create_comment(item ? item[0].slice(3) : ''));\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst [name, attributes, ...children] = item;\n\n\t\tconst namespace = name === 'svg' ? NAMESPACE_SVG : name === 'math' ? NAMESPACE_MATHML : ns;\n\n\t\tvar element = create_element(name, namespace, attributes?.is);\n\n\t\tfor (var key in attributes) {\n\t\t\tset_attribute(element, key, attributes[key]);\n\t\t}\n\n\t\tif (children.length > 0) {\n\t\t\tvar target =\n\t\t\t\telement.tagName === 'TEMPLATE'\n\t\t\t\t\t? /** @type {HTMLTemplateElement} */ (element).content\n\t\t\t\t\t: element;\n\n\t\t\ttarget.append(\n\t\t\t\tfragment_from_tree(children, element.tagName === 'foreignObject' ? undefined : namespace)\n\t\t\t);\n\t\t}\n\n\t\tfragment.append(element);\n\t}\n\n\treturn fragment;\n}\n\n/**\n * @param {TemplateStructure[]} structure\n * @param {number} flags\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_tree(structure, flags) {\n\tvar is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;\n\tvar use_import_node = (flags & TEMPLATE_USE_IMPORT_NODE) !== 0;\n\n\t/** @type {Node} */\n\tvar node;\n\n\treturn () => {\n\t\tif (hydrating) {\n\t\t\tassign_nodes(hydrate_node, null);\n\t\t\treturn hydrate_node;\n\t\t}\n\n\t\tif (node === undefined) {\n\t\t\tconst ns =\n\t\t\t\t(flags & TEMPLATE_USE_SVG) !== 0\n\t\t\t\t\t? NAMESPACE_SVG\n\t\t\t\t\t: (flags & TEMPLATE_USE_MATHML) !== 0\n\t\t\t\t\t\t? NAMESPACE_MATHML\n\t\t\t\t\t\t: undefined;\n\n\t\t\tnode = fragment_from_tree(structure, ns);\n\t\t\tif (!is_fragment) node = /** @type {Node} */ (get_first_child(node));\n\t\t}\n\n\t\tvar clone = /** @type {TemplateNode} */ (\n\t\t\tuse_import_node || is_firefox ? document.importNode(node, true) : node.cloneNode(true)\n\t\t);\n\n\t\tif (is_fragment) {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_first_child(clone));\n\t\t\tvar end = /** @type {TemplateNode} */ (clone.lastChild);\n\n\t\t\tassign_nodes(start, end);\n\t\t} else {\n\t\t\tassign_nodes(clone, clone);\n\t\t}\n\n\t\treturn clone;\n\t};\n}\n\n/**\n * @param {() => Element | DocumentFragment} fn\n */\nexport function with_script(fn) {\n\treturn () => run_scripts(fn());\n}\n\n/**\n * Creating a document fragment from HTML that contains script tags will not execute\n * the scripts. We need to replace the script tags with new ones so that they are executed.\n * @param {Element | DocumentFragment} node\n * @returns {Node | Node[]}\n */\nfunction run_scripts(node) {\n\t// scripts were SSR'd, in which case they will run\n\tif (hydrating) return node;\n\n\tconst is_fragment = node.nodeType === DOCUMENT_FRAGMENT_NODE;\n\tconst scripts =\n\t\t/** @type {HTMLElement} */ (node).tagName === 'SCRIPT'\n\t\t\t? [/** @type {HTMLScriptElement} */ (node)]\n\t\t\t: node.querySelectorAll('script');\n\tconst effect = /** @type {Effect} */ (active_effect);\n\n\tfor (const script of scripts) {\n\t\tconst clone = document.createElement('script');\n\t\tfor (var attribute of script.attributes) {\n\t\t\tclone.setAttribute(attribute.name, attribute.value);\n\t\t}\n\n\t\tclone.textContent = script.textContent;\n\n\t\t// The script has changed - if it's at the edges, the effect now points at dead nodes\n\t\tif (is_fragment ? node.firstChild === script : node === script) {\n\t\t\teffect.nodes_start = clone;\n\t\t}\n\t\tif (is_fragment ? node.lastChild === script : node === script) {\n\t\t\teffect.nodes_end = clone;\n\t\t}\n\n\t\tscript.replaceWith(clone);\n\t}\n\treturn node;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {any} value\n */\nexport function text(value = '') {\n\tif (!hydrating) {\n\t\tvar t = create_text(value + '');\n\t\tassign_nodes(t, t);\n\t\treturn t;\n\t}\n\n\tvar node = hydrate_node;\n\n\tif (node.nodeType !== TEXT_NODE) {\n\t\t// if an {expression} is empty during SSR, we need to insert an empty text node\n\t\tnode.before((node = create_text()));\n\t\tset_hydrate_node(node);\n\t}\n\n\tassign_nodes(node, node);\n\treturn node;\n}\n\n/**\n * @returns {TemplateNode | DocumentFragment}\n */\nexport function comment() {\n\t// we're not delegating to `template` here for performance reasons\n\tif (hydrating) {\n\t\tassign_nodes(hydrate_node, null);\n\t\treturn hydrate_node;\n\t}\n\n\tvar frag = document.createDocumentFragment();\n\tvar start = document.createComment('');\n\tvar anchor = create_text();\n\tfrag.append(start, anchor);\n\n\tassign_nodes(start, anchor);\n\n\treturn frag;\n}\n\n/**\n * Assign the created (or in hydration mode, traversed) dom elements to the current block\n * and insert the elements into the dom (in client mode).\n * @param {Text | Comment | Element} anchor\n * @param {DocumentFragment | Element} dom\n */\nexport function append(anchor, dom) {\n\tif (hydrating) {\n\t\t/** @type {Effect} */ (active_effect).nodes_end = hydrate_node;\n\t\thydrate_next();\n\t\treturn;\n\t}\n\n\tif (anchor === null) {\n\t\t// edge case  void `<svelte:element>` with content\n\t\treturn;\n\t}\n\n\tanchor.before(/** @type {Node} */ (dom));\n}\n\n/**\n * Create (or hydrate) an unique UID for the component instance.\n */\nexport function props_id() {\n\tif (\n\t\thydrating &&\n\t\thydrate_node &&\n\t\thydrate_node.nodeType === COMMENT_NODE &&\n\t\thydrate_node.textContent?.startsWith(`$`)\n\t) {\n\t\tconst id = hydrate_node.textContent.substring(1);\n\t\thydrate_next();\n\t\treturn id;\n\t}\n\n\t// @ts-expect-error This way we ensure the id is unique even across Svelte runtimes\n\t(window.__svelte ??= {}).uid ??= 1;\n\n\t// @ts-expect-error\n\treturn `c${window.__svelte.uid++}`;\n}\n","const regex_return_characters = /\\r/g;\n\n/**\n * @param {string} str\n * @returns {string}\n */\nexport function hash(str) {\n\tstr = str.replace(regex_return_characters, '');\n\tlet hash = 5381;\n\tlet i = str.length;\n\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn (hash >>> 0).toString(36);\n}\n\nconst VOID_ELEMENT_NAMES = [\n\t'area',\n\t'base',\n\t'br',\n\t'col',\n\t'command',\n\t'embed',\n\t'hr',\n\t'img',\n\t'input',\n\t'keygen',\n\t'link',\n\t'meta',\n\t'param',\n\t'source',\n\t'track',\n\t'wbr'\n];\n\n/**\n * Returns `true` if `name` is of a void element\n * @param {string} name\n */\nexport function is_void(name) {\n\treturn VOID_ELEMENT_NAMES.includes(name) || name.toLowerCase() === '!doctype';\n}\n\nconst RESERVED_WORDS = [\n\t'arguments',\n\t'await',\n\t'break',\n\t'case',\n\t'catch',\n\t'class',\n\t'const',\n\t'continue',\n\t'debugger',\n\t'default',\n\t'delete',\n\t'do',\n\t'else',\n\t'enum',\n\t'eval',\n\t'export',\n\t'extends',\n\t'false',\n\t'finally',\n\t'for',\n\t'function',\n\t'if',\n\t'implements',\n\t'import',\n\t'in',\n\t'instanceof',\n\t'interface',\n\t'let',\n\t'new',\n\t'null',\n\t'package',\n\t'private',\n\t'protected',\n\t'public',\n\t'return',\n\t'static',\n\t'super',\n\t'switch',\n\t'this',\n\t'throw',\n\t'true',\n\t'try',\n\t'typeof',\n\t'var',\n\t'void',\n\t'while',\n\t'with',\n\t'yield'\n];\n\n/**\n * Returns `true` if `word` is a reserved JavaScript keyword\n * @param {string} word\n */\nexport function is_reserved(word) {\n\treturn RESERVED_WORDS.includes(word);\n}\n\n/**\n * @param {string} name\n */\nexport function is_capture_event(name) {\n\treturn name.endsWith('capture') && name !== 'gotpointercapture' && name !== 'lostpointercapture';\n}\n\n/** List of Element events that will be delegated */\nconst DELEGATED_EVENTS = [\n\t'beforeinput',\n\t'click',\n\t'change',\n\t'dblclick',\n\t'contextmenu',\n\t'focusin',\n\t'focusout',\n\t'input',\n\t'keydown',\n\t'keyup',\n\t'mousedown',\n\t'mousemove',\n\t'mouseout',\n\t'mouseover',\n\t'mouseup',\n\t'pointerdown',\n\t'pointermove',\n\t'pointerout',\n\t'pointerover',\n\t'pointerup',\n\t'touchend',\n\t'touchmove',\n\t'touchstart'\n];\n\n/**\n * Returns `true` if `event_name` is a delegated event\n * @param {string} event_name\n */\nexport function is_delegated(event_name) {\n\treturn DELEGATED_EVENTS.includes(event_name);\n}\n\n/**\n * Attributes that are boolean, i.e. they are present or not present.\n */\nconst DOM_BOOLEAN_ATTRIBUTES = [\n\t'allowfullscreen',\n\t'async',\n\t'autofocus',\n\t'autoplay',\n\t'checked',\n\t'controls',\n\t'default',\n\t'disabled',\n\t'formnovalidate',\n\t'indeterminate',\n\t'inert',\n\t'ismap',\n\t'loop',\n\t'multiple',\n\t'muted',\n\t'nomodule',\n\t'novalidate',\n\t'open',\n\t'playsinline',\n\t'readonly',\n\t'required',\n\t'reversed',\n\t'seamless',\n\t'selected',\n\t'webkitdirectory',\n\t'defer',\n\t'disablepictureinpicture',\n\t'disableremoteplayback'\n];\n\n/**\n * Returns `true` if `name` is a boolean attribute\n * @param {string} name\n */\nexport function is_boolean_attribute(name) {\n\treturn DOM_BOOLEAN_ATTRIBUTES.includes(name);\n}\n\n/**\n * @type {Record<string, string>}\n * List of attribute names that should be aliased to their property names\n * because they behave differently between setting them as an attribute and\n * setting them as a property.\n */\nconst ATTRIBUTE_ALIASES = {\n\t// no `class: 'className'` because we handle that separately\n\tformnovalidate: 'formNoValidate',\n\tismap: 'isMap',\n\tnomodule: 'noModule',\n\tplaysinline: 'playsInline',\n\treadonly: 'readOnly',\n\tdefaultvalue: 'defaultValue',\n\tdefaultchecked: 'defaultChecked',\n\tsrcobject: 'srcObject',\n\tnovalidate: 'noValidate',\n\tallowfullscreen: 'allowFullscreen',\n\tdisablepictureinpicture: 'disablePictureInPicture',\n\tdisableremoteplayback: 'disableRemotePlayback'\n};\n\n/**\n * @param {string} name\n */\nexport function normalize_attribute(name) {\n\tname = name.toLowerCase();\n\treturn ATTRIBUTE_ALIASES[name] ?? name;\n}\n\nconst DOM_PROPERTIES = [\n\t...DOM_BOOLEAN_ATTRIBUTES,\n\t'formNoValidate',\n\t'isMap',\n\t'noModule',\n\t'playsInline',\n\t'readOnly',\n\t'value',\n\t'volume',\n\t'defaultValue',\n\t'defaultChecked',\n\t'srcObject',\n\t'noValidate',\n\t'allowFullscreen',\n\t'disablePictureInPicture',\n\t'disableRemotePlayback'\n];\n\n/**\n * @param {string} name\n */\nexport function is_dom_property(name) {\n\treturn DOM_PROPERTIES.includes(name);\n}\n\nconst NON_STATIC_PROPERTIES = ['autofocus', 'muted', 'defaultValue', 'defaultChecked'];\n\n/**\n * Returns `true` if the given attribute cannot be set through the template\n * string, i.e. needs some kind of JavaScript handling to work.\n * @param {string} name\n */\nexport function cannot_be_set_statically(name) {\n\treturn NON_STATIC_PROPERTIES.includes(name);\n}\n\n/**\n * Subset of delegated events which should be passive by default.\n * These two are already passive via browser defaults on window, document and body.\n * But since\n * - we're delegating them\n * - they happen often\n * - they apply to mobile which is generally less performant\n * we're marking them as passive by default for other elements, too.\n */\nconst PASSIVE_EVENTS = ['touchstart', 'touchmove'];\n\n/**\n * Returns `true` if `name` is a passive event\n * @param {string} name\n */\nexport function is_passive_event(name) {\n\treturn PASSIVE_EVENTS.includes(name);\n}\n\nconst CONTENT_EDITABLE_BINDINGS = ['textContent', 'innerHTML', 'innerText'];\n\n/** @param {string} name */\nexport function is_content_editable_binding(name) {\n\treturn CONTENT_EDITABLE_BINDINGS.includes(name);\n}\n\nconst LOAD_ERROR_ELEMENTS = [\n\t'body',\n\t'embed',\n\t'iframe',\n\t'img',\n\t'link',\n\t'object',\n\t'script',\n\t'style',\n\t'track'\n];\n\n/**\n * Returns `true` if the element emits `load` and `error` events\n * @param {string} name\n */\nexport function is_load_error_element(name) {\n\treturn LOAD_ERROR_ELEMENTS.includes(name);\n}\n\nconst SVG_ELEMENTS = [\n\t'altGlyph',\n\t'altGlyphDef',\n\t'altGlyphItem',\n\t'animate',\n\t'animateColor',\n\t'animateMotion',\n\t'animateTransform',\n\t'circle',\n\t'clipPath',\n\t'color-profile',\n\t'cursor',\n\t'defs',\n\t'desc',\n\t'discard',\n\t'ellipse',\n\t'feBlend',\n\t'feColorMatrix',\n\t'feComponentTransfer',\n\t'feComposite',\n\t'feConvolveMatrix',\n\t'feDiffuseLighting',\n\t'feDisplacementMap',\n\t'feDistantLight',\n\t'feDropShadow',\n\t'feFlood',\n\t'feFuncA',\n\t'feFuncB',\n\t'feFuncG',\n\t'feFuncR',\n\t'feGaussianBlur',\n\t'feImage',\n\t'feMerge',\n\t'feMergeNode',\n\t'feMorphology',\n\t'feOffset',\n\t'fePointLight',\n\t'feSpecularLighting',\n\t'feSpotLight',\n\t'feTile',\n\t'feTurbulence',\n\t'filter',\n\t'font',\n\t'font-face',\n\t'font-face-format',\n\t'font-face-name',\n\t'font-face-src',\n\t'font-face-uri',\n\t'foreignObject',\n\t'g',\n\t'glyph',\n\t'glyphRef',\n\t'hatch',\n\t'hatchpath',\n\t'hkern',\n\t'image',\n\t'line',\n\t'linearGradient',\n\t'marker',\n\t'mask',\n\t'mesh',\n\t'meshgradient',\n\t'meshpatch',\n\t'meshrow',\n\t'metadata',\n\t'missing-glyph',\n\t'mpath',\n\t'path',\n\t'pattern',\n\t'polygon',\n\t'polyline',\n\t'radialGradient',\n\t'rect',\n\t'set',\n\t'solidcolor',\n\t'stop',\n\t'svg',\n\t'switch',\n\t'symbol',\n\t'text',\n\t'textPath',\n\t'tref',\n\t'tspan',\n\t'unknown',\n\t'use',\n\t'view',\n\t'vkern'\n];\n\n/** @param {string} name */\nexport function is_svg(name) {\n\treturn SVG_ELEMENTS.includes(name);\n}\n\nconst MATHML_ELEMENTS = [\n\t'annotation',\n\t'annotation-xml',\n\t'maction',\n\t'math',\n\t'merror',\n\t'mfrac',\n\t'mi',\n\t'mmultiscripts',\n\t'mn',\n\t'mo',\n\t'mover',\n\t'mpadded',\n\t'mphantom',\n\t'mprescripts',\n\t'mroot',\n\t'mrow',\n\t'ms',\n\t'mspace',\n\t'msqrt',\n\t'mstyle',\n\t'msub',\n\t'msubsup',\n\t'msup',\n\t'mtable',\n\t'mtd',\n\t'mtext',\n\t'mtr',\n\t'munder',\n\t'munderover',\n\t'semantics'\n];\n\n/** @param {string} name */\nexport function is_mathml(name) {\n\treturn MATHML_ELEMENTS.includes(name);\n}\n\nconst STATE_CREATION_RUNES = /** @type {const} */ ([\n\t'$state',\n\t'$state.raw',\n\t'$derived',\n\t'$derived.by'\n]);\n\nconst RUNES = /** @type {const} */ ([\n\t...STATE_CREATION_RUNES,\n\t'$state.eager',\n\t'$state.snapshot',\n\t'$props',\n\t'$props.id',\n\t'$bindable',\n\t'$effect',\n\t'$effect.pre',\n\t'$effect.tracking',\n\t'$effect.root',\n\t'$effect.pending',\n\t'$inspect',\n\t'$inspect().with',\n\t'$inspect.trace',\n\t'$host'\n]);\n\n/** @typedef {typeof RUNES[number]} RuneName */\n\n/**\n * @param {string} name\n * @returns {name is RuneName}\n */\nexport function is_rune(name) {\n\treturn RUNES.includes(/** @type {RuneName} */ (name));\n}\n\n/** @typedef {typeof STATE_CREATION_RUNES[number]} StateCreationRuneName */\n\n/**\n * @param {string} name\n * @returns {name is StateCreationRuneName}\n */\nexport function is_state_creation_rune(name) {\n\treturn STATE_CREATION_RUNES.includes(/** @type {StateCreationRuneName} */ (name));\n}\n\n/** List of elements that require raw contents and should not have SSR comments put in them */\nconst RAW_TEXT_ELEMENTS = /** @type {const} */ (['textarea', 'script', 'style', 'title']);\n\n/** @param {string} name */\nexport function is_raw_text_element(name) {\n\treturn RAW_TEXT_ELEMENTS.includes(/** @type {typeof RAW_TEXT_ELEMENTS[number]} */ (name));\n}\n\n/**\n * Prevent devtools trying to make `location` a clickable link by inserting a zero-width space\n * @template {string | undefined} T\n * @param {T} location\n * @returns {T};\n */\nexport function sanitize_location(location) {\n\treturn /** @type {T} */ (location?.replace(/\\//g, '/\\u200b'));\n}\n","/** @import { ComponentContext, Effect, TemplateNode } from '#client' */\n/** @import { Component, ComponentType, SvelteComponent, MountOptions } from '../../index.js' */\nimport { DEV } from 'esm-env';\nimport {\n\tclear_text_content,\n\tcreate_text,\n\tget_first_child,\n\tget_next_sibling,\n\tinit_operations\n} from './dom/operations.js';\nimport { HYDRATION_END, HYDRATION_ERROR, HYDRATION_START } from '../../constants.js';\nimport { active_effect } from './runtime.js';\nimport { push, pop, component_context } from './context.js';\nimport { component_root } from './reactivity/effects.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tset_hydrate_node,\n\tset_hydrating\n} from './dom/hydration.js';\nimport { array_from } from '../shared/utils.js';\nimport {\n\tall_registered_events,\n\thandle_event_propagation,\n\troot_event_handles\n} from './dom/elements/events.js';\nimport { reset_head_anchor } from './dom/blocks/svelte-head.js';\nimport * as w from './warnings.js';\nimport * as e from './errors.js';\nimport { assign_nodes } from './dom/template.js';\nimport { is_passive_event } from '../../utils.js';\nimport { COMMENT_NODE, STATE_SYMBOL } from './constants.js';\nimport { boundary } from './dom/blocks/boundary.js';\n\n/**\n * This is normally true  block effects should run their intro transitions \n * but is false during hydration (unless `options.intro` is `true`) and\n * when creating the children of a `<svelte:element>` that just changed tag\n */\nexport let should_intro = true;\n\n/** @param {boolean} value */\nexport function set_should_intro(value) {\n\tshould_intro = value;\n}\n\n/**\n * @param {Element} text\n * @param {string} value\n * @returns {void}\n */\nexport function set_text(text, value) {\n\t// For objects, we apply string coercion (which might make things like $state array references in the template reactive) before diffing\n\tvar str = value == null ? '' : typeof value === 'object' ? value + '' : value;\n\t// @ts-expect-error\n\tif (str !== (text.__t ??= text.nodeValue)) {\n\t\t// @ts-expect-error\n\t\ttext.__t = str;\n\t\ttext.nodeValue = str + '';\n\t}\n}\n\n/**\n * Mounts a component to the given target and returns the exports and potentially the props (if compiled with `accessors: true`) of the component.\n * Transitions will play during the initial render unless the `intro` option is set to `false`.\n *\n * @template {Record<string, any>} Props\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<Props>> | Component<Props, Exports, any>} component\n * @param {MountOptions<Props>} options\n * @returns {Exports}\n */\nexport function mount(component, options) {\n\treturn _mount(component, options);\n}\n\n/**\n * Hydrates a component on the given target and returns the exports and potentially the props (if compiled with `accessors: true`) of the component\n *\n * @template {Record<string, any>} Props\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<Props>> | Component<Props, Exports, any>} component\n * @param {{} extends Props ? {\n * \t\ttarget: Document | Element | ShadowRoot;\n * \t\tprops?: Props;\n * \t\tevents?: Record<string, (e: any) => any>;\n *  \tcontext?: Map<any, any>;\n * \t\tintro?: boolean;\n * \t\trecover?: boolean;\n * \t} : {\n * \t\ttarget: Document | Element | ShadowRoot;\n * \t\tprops: Props;\n * \t\tevents?: Record<string, (e: any) => any>;\n *  \tcontext?: Map<any, any>;\n * \t\tintro?: boolean;\n * \t\trecover?: boolean;\n * \t}} options\n * @returns {Exports}\n */\nexport function hydrate(component, options) {\n\tinit_operations();\n\toptions.intro = options.intro ?? false;\n\tconst target = options.target;\n\tconst was_hydrating = hydrating;\n\tconst previous_hydrate_node = hydrate_node;\n\n\ttry {\n\t\tvar anchor = /** @type {TemplateNode} */ (get_first_child(target));\n\t\twhile (\n\t\t\tanchor &&\n\t\t\t(anchor.nodeType !== COMMENT_NODE || /** @type {Comment} */ (anchor).data !== HYDRATION_START)\n\t\t) {\n\t\t\tanchor = /** @type {TemplateNode} */ (get_next_sibling(anchor));\n\t\t}\n\n\t\tif (!anchor) {\n\t\t\tthrow HYDRATION_ERROR;\n\t\t}\n\n\t\tset_hydrating(true);\n\t\tset_hydrate_node(/** @type {Comment} */ (anchor));\n\n\t\tconst instance = _mount(component, { ...options, anchor });\n\n\t\tset_hydrating(false);\n\n\t\treturn /**  @type {Exports} */ (instance);\n\t} catch (error) {\n\t\t// re-throw Svelte errors - they are certainly not related to hydration\n\t\tif (\n\t\t\terror instanceof Error &&\n\t\t\terror.message.split('\\n').some((line) => line.startsWith('https://svelte.dev/e/'))\n\t\t) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error !== HYDRATION_ERROR) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn('Failed to hydrate: ', error);\n\t\t}\n\n\t\tif (options.recover === false) {\n\t\t\te.hydration_failed();\n\t\t}\n\n\t\t// If an error occurred above, the operations might not yet have been initialised.\n\t\tinit_operations();\n\t\tclear_text_content(target);\n\n\t\tset_hydrating(false);\n\t\treturn mount(component, options);\n\t} finally {\n\t\tset_hydrating(was_hydrating);\n\t\tset_hydrate_node(previous_hydrate_node);\n\t\treset_head_anchor();\n\t}\n}\n\n/** @type {Map<string, number>} */\nconst document_listeners = new Map();\n\n/**\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<any>> | Component<any>} Component\n * @param {MountOptions} options\n * @returns {Exports}\n */\nfunction _mount(Component, { target, anchor, props = {}, events, context, intro = true }) {\n\tinit_operations();\n\n\t/** @type {Set<string>} */\n\tvar registered_events = new Set();\n\n\t/** @param {Array<string>} events */\n\tvar event_handle = (events) => {\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\tvar event_name = events[i];\n\n\t\t\tif (registered_events.has(event_name)) continue;\n\t\t\tregistered_events.add(event_name);\n\n\t\t\tvar passive = is_passive_event(event_name);\n\n\t\t\t// Add the event listener to both the container and the document.\n\t\t\t// The container listener ensures we catch events from within in case\n\t\t\t// the outer content stops propagation of the event.\n\t\t\ttarget.addEventListener(event_name, handle_event_propagation, { passive });\n\n\t\t\tvar n = document_listeners.get(event_name);\n\n\t\t\tif (n === undefined) {\n\t\t\t\t// The document listener ensures we catch events that originate from elements that were\n\t\t\t\t// manually moved outside of the container (e.g. via manual portals).\n\t\t\t\tdocument.addEventListener(event_name, handle_event_propagation, { passive });\n\t\t\t\tdocument_listeners.set(event_name, 1);\n\t\t\t} else {\n\t\t\t\tdocument_listeners.set(event_name, n + 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tevent_handle(array_from(all_registered_events));\n\troot_event_handles.add(event_handle);\n\n\t/** @type {Exports} */\n\t// @ts-expect-error will be defined because the render effect runs synchronously\n\tvar component = undefined;\n\n\tvar unmount = component_root(() => {\n\t\tvar anchor_node = anchor ?? target.appendChild(create_text());\n\n\t\tboundary(\n\t\t\t/** @type {TemplateNode} */ (anchor_node),\n\t\t\t{\n\t\t\t\tpending: () => {}\n\t\t\t},\n\t\t\t(anchor_node) => {\n\t\t\t\tif (context) {\n\t\t\t\t\tpush({});\n\t\t\t\t\tvar ctx = /** @type {ComponentContext} */ (component_context);\n\t\t\t\t\tctx.c = context;\n\t\t\t\t}\n\n\t\t\t\tif (events) {\n\t\t\t\t\t// We can't spread the object or else we'd lose the state proxy stuff, if it is one\n\t\t\t\t\t/** @type {any} */ (props).$$events = events;\n\t\t\t\t}\n\n\t\t\t\tif (hydrating) {\n\t\t\t\t\tassign_nodes(/** @type {TemplateNode} */ (anchor_node), null);\n\t\t\t\t}\n\n\t\t\t\tshould_intro = intro;\n\t\t\t\t// @ts-expect-error the public typings are not what the actual function looks like\n\t\t\t\tcomponent = Component(anchor_node, props) || {};\n\t\t\t\tshould_intro = true;\n\n\t\t\t\tif (hydrating) {\n\t\t\t\t\t/** @type {Effect} */ (active_effect).nodes_end = hydrate_node;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\thydrate_node === null ||\n\t\t\t\t\t\thydrate_node.nodeType !== COMMENT_NODE ||\n\t\t\t\t\t\t/** @type {Comment} */ (hydrate_node).data !== HYDRATION_END\n\t\t\t\t\t) {\n\t\t\t\t\t\tw.hydration_mismatch();\n\t\t\t\t\t\tthrow HYDRATION_ERROR;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (context) {\n\t\t\t\t\tpop();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\treturn () => {\n\t\t\tfor (var event_name of registered_events) {\n\t\t\t\ttarget.removeEventListener(event_name, handle_event_propagation);\n\n\t\t\t\tvar n = /** @type {number} */ (document_listeners.get(event_name));\n\n\t\t\t\tif (--n === 0) {\n\t\t\t\t\tdocument.removeEventListener(event_name, handle_event_propagation);\n\t\t\t\t\tdocument_listeners.delete(event_name);\n\t\t\t\t} else {\n\t\t\t\t\tdocument_listeners.set(event_name, n);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\troot_event_handles.delete(event_handle);\n\n\t\t\tif (anchor_node !== anchor) {\n\t\t\t\tanchor_node.parentNode?.removeChild(anchor_node);\n\t\t\t}\n\t\t};\n\t});\n\n\tmounted_components.set(component, unmount);\n\treturn component;\n}\n\n/**\n * References of the components that were mounted or hydrated.\n * Uses a `WeakMap` to avoid memory leaks.\n */\nlet mounted_components = new WeakMap();\n\n/**\n * Unmounts a component that was previously mounted using `mount` or `hydrate`.\n *\n * Since 5.13.0, if `options.outro` is `true`, [transitions](https://svelte.dev/docs/svelte/transition) will play before the component is removed from the DOM.\n *\n * Returns a `Promise` that resolves after transitions have completed if `options.outro` is true, or immediately otherwise (prior to 5.13.0, returns `void`).\n *\n * ```js\n * import { mount, unmount } from 'svelte';\n * import App from './App.svelte';\n *\n * const app = mount(App, { target: document.body });\n *\n * // later...\n * unmount(app, { outro: true });\n * ```\n * @param {Record<string, any>} component\n * @param {{ outro?: boolean }} [options]\n * @returns {Promise<void>}\n */\nexport function unmount(component, options) {\n\tconst fn = mounted_components.get(component);\n\n\tif (fn) {\n\t\tmounted_components.delete(component);\n\t\treturn fn(options);\n\t}\n\n\tif (DEV) {\n\t\tif (STATE_SYMBOL in component) {\n\t\t\tw.state_proxy_unmount();\n\t\t} else {\n\t\t\tw.lifecycle_double_unmount();\n\t\t}\n\t}\n\n\treturn Promise.resolve();\n}\n","/** @import { Effect, TemplateNode } from '#client' */\nimport { is_runes } from '../../context.js';\nimport { Batch, current_batch } from '../../reactivity/batch.js';\nimport {\n\tbranch,\n\tdestroy_effect,\n\tmove_effect,\n\tpause_effect,\n\tresume_effect\n} from '../../reactivity/effects.js';\nimport { set_should_intro, should_intro } from '../../render.js';\nimport { hydrate_node, hydrating } from '../hydration.js';\nimport { create_text, should_defer_append } from '../operations.js';\n\n/**\n * @typedef {{ effect: Effect, fragment: DocumentFragment }} Branch\n */\n\n/**\n * @template Key\n */\nexport class BranchManager {\n\t/** @type {TemplateNode} */\n\tanchor;\n\n\t/** @type {Map<Batch, Key>} */\n\t#batches = new Map();\n\n\t/** @type {Map<Key, Effect>} */\n\t#onscreen = new Map();\n\n\t/** @type {Map<Key, Branch>} */\n\t#offscreen = new Map();\n\n\t/**\n\t * Whether to pause (i.e. outro) on change, or destroy immediately.\n\t * This is necessary for `<svelte:element>`\n\t */\n\t#transition = true;\n\n\t/**\n\t * @param {TemplateNode} anchor\n\t * @param {boolean} transition\n\t */\n\tconstructor(anchor, transition = true) {\n\t\tthis.anchor = anchor;\n\t\tthis.#transition = transition;\n\t}\n\n\t#commit = () => {\n\t\tvar batch = /** @type {Batch} */ (current_batch);\n\n\t\t// if this batch was made obsolete, bail\n\t\tif (!this.#batches.has(batch)) return;\n\n\t\tvar key = /** @type {Key} */ (this.#batches.get(batch));\n\n\t\tvar onscreen = this.#onscreen.get(key);\n\n\t\tif (onscreen) {\n\t\t\t// effect is already in the DOM  abort any current outro\n\t\t\tresume_effect(onscreen);\n\t\t} else {\n\t\t\t// effect is currently offscreen. put it in the DOM\n\t\t\tvar offscreen = this.#offscreen.get(key);\n\n\t\t\tif (offscreen) {\n\t\t\t\tthis.#onscreen.set(key, offscreen.effect);\n\t\t\t\tthis.#offscreen.delete(key);\n\n\t\t\t\t// remove the anchor...\n\t\t\t\t/** @type {TemplateNode} */ (offscreen.fragment.lastChild).remove();\n\n\t\t\t\t// ...and append the fragment\n\t\t\t\tthis.anchor.before(offscreen.fragment);\n\t\t\t\tonscreen = offscreen.effect;\n\t\t\t}\n\t\t}\n\n\t\tfor (const [b, k] of this.#batches) {\n\t\t\tthis.#batches.delete(b);\n\n\t\t\tif (b === batch) {\n\t\t\t\t// keep values for newer batches\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst offscreen = this.#offscreen.get(k);\n\n\t\t\tif (offscreen) {\n\t\t\t\t// for older batches, destroy offscreen effects\n\t\t\t\t// as they will never be committed\n\t\t\t\tdestroy_effect(offscreen.effect);\n\t\t\t\tthis.#offscreen.delete(k);\n\t\t\t}\n\t\t}\n\n\t\t// outro/destroy all onscreen effects...\n\t\tfor (const [k, effect] of this.#onscreen) {\n\t\t\t// ...except the one that was just committed\n\t\t\tif (k === key) continue;\n\n\t\t\tconst on_destroy = () => {\n\t\t\t\tconst keys = Array.from(this.#batches.values());\n\n\t\t\t\tif (keys.includes(k)) {\n\t\t\t\t\t// keep the effect offscreen, as another batch will need it\n\t\t\t\t\tvar fragment = document.createDocumentFragment();\n\t\t\t\t\tmove_effect(effect, fragment);\n\n\t\t\t\t\tfragment.append(create_text()); // TODO can we avoid this?\n\n\t\t\t\t\tthis.#offscreen.set(k, { effect, fragment });\n\t\t\t\t} else {\n\t\t\t\t\tdestroy_effect(effect);\n\t\t\t\t}\n\n\t\t\t\tthis.#onscreen.delete(k);\n\t\t\t};\n\n\t\t\tif (this.#transition || !onscreen) {\n\t\t\t\tpause_effect(effect, on_destroy, false);\n\t\t\t} else {\n\t\t\t\ton_destroy();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t *\n\t * @param {any} key\n\t * @param {null | ((target: TemplateNode) => void)} fn\n\t */\n\tensure(key, fn) {\n\t\tvar batch = /** @type {Batch} */ (current_batch);\n\t\tvar defer = should_defer_append();\n\n\t\tif (fn && !this.#onscreen.has(key) && !this.#offscreen.has(key)) {\n\t\t\tif (defer) {\n\t\t\t\tvar fragment = document.createDocumentFragment();\n\t\t\t\tvar target = create_text();\n\n\t\t\t\tfragment.append(target);\n\n\t\t\t\tthis.#offscreen.set(key, {\n\t\t\t\t\teffect: branch(() => fn(target)),\n\t\t\t\t\tfragment\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.#onscreen.set(\n\t\t\t\t\tkey,\n\t\t\t\t\tbranch(() => fn(this.anchor))\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.#batches.set(batch, key);\n\n\t\tif (defer) {\n\t\t\tfor (const [k, effect] of this.#onscreen) {\n\t\t\t\tif (k === key) {\n\t\t\t\t\tbatch.skipped_effects.delete(effect);\n\t\t\t\t} else {\n\t\t\t\t\tbatch.skipped_effects.add(effect);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const [k, branch] of this.#offscreen) {\n\t\t\t\tif (k === key) {\n\t\t\t\t\tbatch.skipped_effects.delete(branch.effect);\n\t\t\t\t} else {\n\t\t\t\t\tbatch.skipped_effects.add(branch.effect);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tbatch.add_callback(this.#commit);\n\t\t} else {\n\t\t\tif (hydrating) {\n\t\t\t\tthis.anchor = hydrate_node;\n\t\t\t}\n\n\t\t\tthis.#commit();\n\t\t}\n\t}\n}\n","/** @import { Snippet } from 'svelte' */\n/** @import { TemplateNode } from '#client' */\n/** @import { Getters } from '#shared' */\nimport { EFFECT_TRANSPARENT, ELEMENT_NODE } from '#client/constants';\nimport { block, teardown } from '../../reactivity/effects.js';\nimport {\n\tdev_current_component_function,\n\tset_dev_current_component_function\n} from '../../context.js';\nimport { hydrate_next, hydrate_node, hydrating } from '../hydration.js';\nimport { create_fragment_from_html } from '../reconciler.js';\nimport { assign_nodes } from '../template.js';\nimport * as w from '../../warnings.js';\nimport * as e from '../../errors.js';\nimport { DEV } from 'esm-env';\nimport { get_first_child, get_next_sibling } from '../operations.js';\nimport { prevent_snippet_stringification } from '../../../shared/validate.js';\nimport { BranchManager } from './branches.js';\n\n/**\n * @template {(node: TemplateNode, ...args: any[]) => void} SnippetFn\n * @param {TemplateNode} node\n * @param {() => SnippetFn | null | undefined} get_snippet\n * @param {(() => any)[]} args\n * @returns {void}\n */\nexport function snippet(node, get_snippet, ...args) {\n\tvar branches = new BranchManager(node);\n\n\tblock(() => {\n\t\tconst snippet = get_snippet() ?? null;\n\n\t\tif (DEV && snippet == null) {\n\t\t\te.invalid_snippet();\n\t\t}\n\n\t\tbranches.ensure(snippet, snippet && ((anchor) => snippet(anchor, ...args)));\n\t}, EFFECT_TRANSPARENT);\n}\n\n/**\n * In development, wrap the snippet function so that it passes validation, and so that the\n * correct component context is set for ownership checks\n * @param {any} component\n * @param {(node: TemplateNode, ...args: any[]) => void} fn\n */\nexport function wrap_snippet(component, fn) {\n\tconst snippet = (/** @type {TemplateNode} */ node, /** @type {any[]} */ ...args) => {\n\t\tvar previous_component_function = dev_current_component_function;\n\t\tset_dev_current_component_function(component);\n\n\t\ttry {\n\t\t\treturn fn(node, ...args);\n\t\t} finally {\n\t\t\tset_dev_current_component_function(previous_component_function);\n\t\t}\n\t};\n\n\tprevent_snippet_stringification(snippet);\n\n\treturn snippet;\n}\n\n/**\n * Create a snippet programmatically\n * @template {unknown[]} Params\n * @param {(...params: Getters<Params>) => {\n *   render: () => string\n *   setup?: (element: Element) => void | (() => void)\n * }} fn\n * @returns {Snippet<Params>}\n */\nexport function createRawSnippet(fn) {\n\t// @ts-expect-error the types are a lie\n\treturn (/** @type {TemplateNode} */ anchor, /** @type {Getters<Params>} */ ...params) => {\n\t\tvar snippet = fn(...params);\n\n\t\t/** @type {Element} */\n\t\tvar element;\n\n\t\tif (hydrating) {\n\t\t\telement = /** @type {Element} */ (hydrate_node);\n\t\t\thydrate_next();\n\t\t} else {\n\t\t\tvar html = snippet.render().trim();\n\t\t\tvar fragment = create_fragment_from_html(html);\n\t\t\telement = /** @type {Element} */ (get_first_child(fragment));\n\n\t\t\tif (DEV && (get_next_sibling(element) !== null || element.nodeType !== ELEMENT_NODE)) {\n\t\t\t\tw.invalid_raw_snippet_render();\n\t\t\t}\n\n\t\t\tanchor.before(element);\n\t\t}\n\n\t\tconst result = snippet.setup?.(element);\n\t\tassign_nodes(element, element);\n\n\t\tif (typeof result === 'function') {\n\t\t\tteardown(result);\n\t\t}\n\t};\n}\n","/** @import { ComponentContext, ComponentContextLegacy } from '#client' */\n/** @import { EventDispatcher } from './index.js' */\n/** @import { NotFunction } from './internal/types.js' */\nimport { active_reaction, untrack } from './internal/client/runtime.js';\nimport { is_array } from './internal/shared/utils.js';\nimport { user_effect } from './internal/client/index.js';\nimport * as e from './internal/client/errors.js';\nimport { legacy_mode_flag } from './internal/flags/index.js';\nimport { component_context } from './internal/client/context.js';\nimport { DEV } from 'esm-env';\n\nif (DEV) {\n\t/**\n\t * @param {string} rune\n\t */\n\tfunction throw_rune_error(rune) {\n\t\tif (!(rune in globalThis)) {\n\t\t\t// TODO if people start adjusting the \"this can contain runes\" config through v-p-s more, adjust this message\n\t\t\t/** @type {any} */\n\t\t\tlet value; // let's hope noone modifies this global, but belts and braces\n\t\t\tObject.defineProperty(globalThis, rune, {\n\t\t\t\tconfigurable: true,\n\t\t\t\t// eslint-disable-next-line getter-return\n\t\t\t\tget: () => {\n\t\t\t\t\tif (value !== undefined) {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\n\t\t\t\t\te.rune_outside_svelte(rune);\n\t\t\t\t},\n\t\t\t\tset: (v) => {\n\t\t\t\t\tvalue = v;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tthrow_rune_error('$state');\n\tthrow_rune_error('$effect');\n\tthrow_rune_error('$derived');\n\tthrow_rune_error('$inspect');\n\tthrow_rune_error('$props');\n\tthrow_rune_error('$bindable');\n}\n\n/**\n * Returns an [`AbortSignal`](https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal) that aborts when the current [derived](https://svelte.dev/docs/svelte/$derived) or [effect](https://svelte.dev/docs/svelte/$effect) re-runs or is destroyed.\n *\n * Must be called while a derived or effect is running.\n *\n * ```svelte\n * <script>\n * \timport { getAbortSignal } from 'svelte';\n *\n * \tlet { id } = $props();\n *\n * \tasync function getData(id) {\n * \t\tconst response = await fetch(`/items/${id}`, {\n * \t\t\tsignal: getAbortSignal()\n * \t\t});\n *\n * \t\treturn await response.json();\n * \t}\n *\n * \tconst data = $derived(await getData(id));\n * </script>\n * ```\n */\nexport function getAbortSignal() {\n\tif (active_reaction === null) {\n\t\te.get_abort_signal_outside_reaction();\n\t}\n\n\treturn (active_reaction.ac ??= new AbortController()).signal;\n}\n\n/**\n * `onMount`, like [`$effect`](https://svelte.dev/docs/svelte/$effect), schedules a function to run as soon as the component has been mounted to the DOM.\n * Unlike `$effect`, the provided function only runs once.\n *\n * It must be called during the component's initialisation (but doesn't need to live _inside_ the component;\n * it can be called from an external module). If a function is returned _synchronously_ from `onMount`,\n * it will be called when the component is unmounted.\n *\n * `onMount` functions do not run during [server-side rendering](https://svelte.dev/docs/svelte/svelte-server#render).\n *\n * @template T\n * @param {() => NotFunction<T> | Promise<NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component('onMount');\n\t}\n\n\tif (legacy_mode_flag && component_context.l !== null) {\n\t\tinit_update_callbacks(component_context).m.push(fn);\n\t} else {\n\t\tuser_effect(() => {\n\t\t\tconst cleanup = untrack(fn);\n\t\t\tif (typeof cleanup === 'function') return /** @type {() => void} */ (cleanup);\n\t\t});\n\t}\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component('onDestroy');\n\t}\n\n\tonMount(() => () => untrack(fn));\n}\n\n/**\n * @template [T=any]\n * @param {string} type\n * @param {T} [detail]\n * @param {any}params_0\n * @returns {CustomEvent<T>}\n */\nfunction create_custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](https://svelte.dev/docs/svelte/legacy-on#Component-events).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: null; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * @deprecated Use callback props and/or the `$host()` rune instead  see [migration guide](https://svelte.dev/docs/svelte/v5-migration-guide#Event-changes-Component-events)\n * @template {Record<string, any>} [EventMap = any]\n * @returns {EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst active_component_context = component_context;\n\tif (active_component_context === null) {\n\t\te.lifecycle_outside_component('createEventDispatcher');\n\t}\n\n\t/**\n\t * @param [detail]\n\t * @param [options]\n\t */\n\treturn (type, detail, options) => {\n\t\tconst events = /** @type {Record<string, Function | Function[]>} */ (\n\t\t\tactive_component_context.s.$$events\n\t\t)?.[/** @type {string} */ (type)];\n\n\t\tif (events) {\n\t\t\tconst callbacks = is_array(events) ? events.slice() : [events];\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = create_custom_event(/** @type {string} */ (type), detail, options);\n\t\t\tfor (const fn of callbacks) {\n\t\t\t\tfn.call(active_component_context.x, event);\n\t\t\t}\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\n\t\treturn true;\n\t};\n}\n\n// TODO mark beforeUpdate and afterUpdate as deprecated in Svelte 6\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`.\n *\n * In runes mode use `$effect.pre` instead.\n *\n * @deprecated Use [`$effect.pre`](https://svelte.dev/docs/svelte/$effect#$effect.pre) instead\n * @param {() => void} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component('beforeUpdate');\n\t}\n\n\tif (component_context.l === null) {\n\t\te.lifecycle_legacy_only('beforeUpdate');\n\t}\n\n\tinit_update_callbacks(component_context).b.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`.\n *\n * In runes mode use `$effect` instead.\n *\n * @deprecated Use [`$effect`](https://svelte.dev/docs/svelte/$effect) instead\n * @param {() => void} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component('afterUpdate');\n\t}\n\n\tif (component_context.l === null) {\n\t\te.lifecycle_legacy_only('afterUpdate');\n\t}\n\n\tinit_update_callbacks(component_context).a.push(fn);\n}\n\n/**\n * Legacy-mode: Init callbacks object for onMount/beforeUpdate/afterUpdate\n * @param {ComponentContext} context\n */\nfunction init_update_callbacks(context) {\n\tvar l = /** @type {ComponentContextLegacy} */ (context).l;\n\treturn (l.u ??= { a: [], b: [], m: [] });\n}\n\nexport { flushSync } from './internal/client/reactivity/batch.js';\nexport {\n\tcreateContext,\n\tgetContext,\n\tgetAllContexts,\n\thasContext,\n\tsetContext\n} from './internal/client/context.js';\nexport { hydrate, mount, unmount } from './internal/client/render.js';\nexport { tick, untrack, settled } from './internal/client/runtime.js';\nexport { createRawSnippet } from './internal/client/dom/blocks/snippet.js';\n","/** @import { TemplateNode } from '#client' */\nimport { EFFECT_TRANSPARENT } from '#client/constants';\nimport {\n\thydrate_next,\n\thydrating,\n\tread_hydration_instruction,\n\tskip_nodes,\n\tset_hydrate_node,\n\tset_hydrating\n} from '../hydration.js';\nimport { block } from '../../reactivity/effects.js';\nimport { HYDRATION_START_ELSE } from '../../../../constants.js';\nimport { BranchManager } from './branches.js';\n\n// TODO reinstate https://github.com/sveltejs/svelte/pull/15250\n\n/**\n * @param {TemplateNode} node\n * @param {(branch: (fn: (anchor: Node) => void, flag?: boolean) => void) => void} fn\n * @param {boolean} [elseif] True if this is an `{:else if ...}` block rather than an `{#if ...}`, as that affects which transitions are considered 'local'\n * @returns {void}\n */\nexport function if_block(node, fn, elseif = false) {\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\tvar branches = new BranchManager(node);\n\tvar flags = elseif ? EFFECT_TRANSPARENT : 0;\n\n\t/**\n\t * @param {boolean} condition,\n\t * @param {null | ((anchor: Node) => void)} fn\n\t */\n\tfunction update_branch(condition, fn) {\n\t\tif (hydrating) {\n\t\t\tconst is_else = read_hydration_instruction(node) === HYDRATION_START_ELSE;\n\n\t\t\tif (condition === is_else) {\n\t\t\t\t// Hydration mismatch: remove everything inside the anchor and start fresh.\n\t\t\t\t// This could happen with `{#if browser}...{/if}`, for example\n\t\t\t\tvar anchor = skip_nodes();\n\n\t\t\t\tset_hydrate_node(anchor);\n\t\t\t\tbranches.anchor = anchor;\n\n\t\t\t\tset_hydrating(false);\n\t\t\t\tbranches.ensure(condition, fn);\n\t\t\t\tset_hydrating(true);\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tbranches.ensure(condition, fn);\n\t}\n\n\tblock(() => {\n\t\tvar has_branch = false;\n\n\t\tfn((fn, flag = true) => {\n\t\t\thas_branch = true;\n\t\t\tupdate_branch(flag, fn);\n\t\t});\n\n\t\tif (!has_branch) {\n\t\t\tupdate_branch(false, null);\n\t\t}\n\t}, flags);\n}\n","/** @import { EachItem, EachState, Effect, MaybeSource, Source, TemplateNode, TransitionManager, Value } from '#client' */\n/** @import { Batch } from '../../reactivity/batch.js'; */\nimport {\n\tEACH_INDEX_REACTIVE,\n\tEACH_IS_ANIMATED,\n\tEACH_IS_CONTROLLED,\n\tEACH_ITEM_IMMUTABLE,\n\tEACH_ITEM_REACTIVE,\n\tHYDRATION_END,\n\tHYDRATION_START_ELSE\n} from '../../../../constants.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tread_hydration_instruction,\n\tskip_nodes,\n\tset_hydrate_node,\n\tset_hydrating\n} from '../hydration.js';\nimport {\n\tclear_text_content,\n\tcreate_text,\n\tget_first_child,\n\tget_next_sibling,\n\tshould_defer_append\n} from '../operations.js';\nimport {\n\tblock,\n\tbranch,\n\tdestroy_effect,\n\trun_out_transitions,\n\tpause_children,\n\tpause_effect,\n\tresume_effect\n} from '../../reactivity/effects.js';\nimport { source, mutable_source, internal_set } from '../../reactivity/sources.js';\nimport { array_from, is_array } from '../../../shared/utils.js';\nimport { COMMENT_NODE, INERT } from '#client/constants';\nimport { queue_micro_task } from '../task.js';\nimport { active_effect, get } from '../../runtime.js';\nimport { DEV } from 'esm-env';\nimport { derived_safe_equal } from '../../reactivity/deriveds.js';\nimport { current_batch } from '../../reactivity/batch.js';\n\n/**\n * The row of a keyed each block that is currently updating. We track this\n * so that `animate:` directives have something to attach themselves to\n * @type {EachItem | null}\n */\nexport let current_each_item = null;\n\n/** @param {EachItem | null} item */\nexport function set_current_each_item(item) {\n\tcurrent_each_item = item;\n}\n\n/**\n * @param {any} _\n * @param {number} i\n */\nexport function index(_, i) {\n\treturn i;\n}\n\n/**\n * Pause multiple effects simultaneously, and coordinate their\n * subsequent destruction. Used in each blocks\n * @param {EachState} state\n * @param {EachItem[]} items\n * @param {null | Node} controlled_anchor\n */\nfunction pause_effects(state, items, controlled_anchor) {\n\tvar items_map = state.items;\n\n\t/** @type {TransitionManager[]} */\n\tvar transitions = [];\n\tvar length = items.length;\n\n\tfor (var i = 0; i < length; i++) {\n\t\tpause_children(items[i].e, transitions, true);\n\t}\n\n\tvar is_controlled = length > 0 && transitions.length === 0 && controlled_anchor !== null;\n\t// If we have a controlled anchor, it means that the each block is inside a single\n\t// DOM element, so we can apply a fast-path for clearing the contents of the element.\n\tif (is_controlled) {\n\t\tvar parent_node = /** @type {Element} */ (\n\t\t\t/** @type {Element} */ (controlled_anchor).parentNode\n\t\t);\n\t\tclear_text_content(parent_node);\n\t\tparent_node.append(/** @type {Element} */ (controlled_anchor));\n\t\titems_map.clear();\n\t\tlink(state, items[0].prev, items[length - 1].next);\n\t}\n\n\trun_out_transitions(transitions, () => {\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tvar item = items[i];\n\t\t\tif (!is_controlled) {\n\t\t\t\titems_map.delete(item.k);\n\t\t\t\tlink(state, item.prev, item.next);\n\t\t\t}\n\t\t\tdestroy_effect(item.e, !is_controlled);\n\t\t}\n\t});\n}\n\n/**\n * @template V\n * @param {Element | Comment} node The next sibling node, or the parent node if this is a 'controlled' block\n * @param {number} flags\n * @param {() => V[]} get_collection\n * @param {(value: V, index: number) => any} get_key\n * @param {(anchor: Node, item: MaybeSource<V>, index: MaybeSource<number>) => void} render_fn\n * @param {null | ((anchor: Node) => void)} fallback_fn\n * @returns {void}\n */\nexport function each(node, flags, get_collection, get_key, render_fn, fallback_fn = null) {\n\tvar anchor = node;\n\n\t/** @type {EachState} */\n\tvar state = { flags, items: new Map(), first: null };\n\n\tvar is_controlled = (flags & EACH_IS_CONTROLLED) !== 0;\n\n\tif (is_controlled) {\n\t\tvar parent_node = /** @type {Element} */ (node);\n\n\t\tanchor = hydrating\n\t\t\t? set_hydrate_node(/** @type {Comment | Text} */ (get_first_child(parent_node)))\n\t\t\t: parent_node.appendChild(create_text());\n\t}\n\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\t/** @type {Effect | null} */\n\tvar fallback = null;\n\n\tvar was_empty = false;\n\n\t/** @type {Map<any, EachItem>} */\n\tvar offscreen_items = new Map();\n\n\t// TODO: ideally we could use derived for runes mode but because of the ability\n\t// to use a store which can be mutated, we can't do that here as mutating a store\n\t// will still result in the collection array being the same from the store\n\tvar each_array = derived_safe_equal(() => {\n\t\tvar collection = get_collection();\n\n\t\treturn is_array(collection) ? collection : collection == null ? [] : array_from(collection);\n\t});\n\n\t/** @type {V[]} */\n\tvar array;\n\n\t/** @type {Effect} */\n\tvar each_effect;\n\n\tfunction commit() {\n\t\treconcile(\n\t\t\teach_effect,\n\t\t\tarray,\n\t\t\tstate,\n\t\t\toffscreen_items,\n\t\t\tanchor,\n\t\t\trender_fn,\n\t\t\tflags,\n\t\t\tget_key,\n\t\t\tget_collection\n\t\t);\n\n\t\tif (fallback_fn !== null) {\n\t\t\tif (array.length === 0) {\n\t\t\t\tif (fallback) {\n\t\t\t\t\tresume_effect(fallback);\n\t\t\t\t} else {\n\t\t\t\t\tfallback = branch(() => fallback_fn(anchor));\n\t\t\t\t}\n\t\t\t} else if (fallback !== null) {\n\t\t\t\tpause_effect(fallback, () => {\n\t\t\t\t\tfallback = null;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tblock(() => {\n\t\t// store a reference to the effect so that we can update the start/end nodes in reconciliation\n\t\teach_effect ??= /** @type {Effect} */ (active_effect);\n\n\t\tarray = /** @type {V[]} */ (get(each_array));\n\t\tvar length = array.length;\n\n\t\tif (was_empty && length === 0) {\n\t\t\t// ignore updates if the array is empty,\n\t\t\t// and it already was empty on previous run\n\t\t\treturn;\n\t\t}\n\t\twas_empty = length === 0;\n\n\t\t/** `true` if there was a hydration mismatch. Needs to be a `let` or else it isn't treeshaken out */\n\t\tlet mismatch = false;\n\n\t\tif (hydrating) {\n\t\t\tvar is_else = read_hydration_instruction(anchor) === HYDRATION_START_ELSE;\n\n\t\t\tif (is_else !== (length === 0)) {\n\t\t\t\t// hydration mismatch  remove the server-rendered DOM and start over\n\t\t\t\tanchor = skip_nodes();\n\n\t\t\t\tset_hydrate_node(anchor);\n\t\t\t\tset_hydrating(false);\n\t\t\t\tmismatch = true;\n\t\t\t}\n\t\t}\n\n\t\t// this is separate to the previous block because `hydrating` might change\n\t\tif (hydrating) {\n\t\t\t/** @type {EachItem | null} */\n\t\t\tvar prev = null;\n\n\t\t\t/** @type {EachItem} */\n\t\t\tvar item;\n\n\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\tif (\n\t\t\t\t\thydrate_node.nodeType === COMMENT_NODE &&\n\t\t\t\t\t/** @type {Comment} */ (hydrate_node).data === HYDRATION_END\n\t\t\t\t) {\n\t\t\t\t\t// The server rendered fewer items than expected,\n\t\t\t\t\t// so break out and continue appending non-hydrated items\n\t\t\t\t\tanchor = /** @type {Comment} */ (hydrate_node);\n\t\t\t\t\tmismatch = true;\n\t\t\t\t\tset_hydrating(false);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tvar value = array[i];\n\t\t\t\tvar key = get_key(value, i);\n\t\t\t\titem = create_item(\n\t\t\t\t\thydrate_node,\n\t\t\t\t\tstate,\n\t\t\t\t\tprev,\n\t\t\t\t\tnull,\n\t\t\t\t\tvalue,\n\t\t\t\t\tkey,\n\t\t\t\t\ti,\n\t\t\t\t\trender_fn,\n\t\t\t\t\tflags,\n\t\t\t\t\tget_collection\n\t\t\t\t);\n\t\t\t\tstate.items.set(key, item);\n\n\t\t\t\tprev = item;\n\t\t\t}\n\n\t\t\t// remove excess nodes\n\t\t\tif (length > 0) {\n\t\t\t\tset_hydrate_node(skip_nodes());\n\t\t\t}\n\t\t}\n\n\t\tif (hydrating) {\n\t\t\tif (length === 0 && fallback_fn) {\n\t\t\t\tfallback = branch(() => fallback_fn(anchor));\n\t\t\t}\n\t\t} else {\n\t\t\tif (should_defer_append()) {\n\t\t\t\tvar keys = new Set();\n\t\t\t\tvar batch = /** @type {Batch} */ (current_batch);\n\n\t\t\t\tfor (i = 0; i < length; i += 1) {\n\t\t\t\t\tvalue = array[i];\n\t\t\t\t\tkey = get_key(value, i);\n\n\t\t\t\t\tvar existing = state.items.get(key) ?? offscreen_items.get(key);\n\n\t\t\t\t\tif (existing) {\n\t\t\t\t\t\t// update before reconciliation, to trigger any async updates\n\t\t\t\t\t\tif ((flags & (EACH_ITEM_REACTIVE | EACH_INDEX_REACTIVE)) !== 0) {\n\t\t\t\t\t\t\tupdate_item(existing, value, i, flags);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\titem = create_item(\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\ti,\n\t\t\t\t\t\t\trender_fn,\n\t\t\t\t\t\t\tflags,\n\t\t\t\t\t\t\tget_collection,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\toffscreen_items.set(key, item);\n\t\t\t\t\t}\n\n\t\t\t\t\tkeys.add(key);\n\t\t\t\t}\n\n\t\t\t\tfor (const [key, item] of state.items) {\n\t\t\t\t\tif (!keys.has(key)) {\n\t\t\t\t\t\tbatch.skipped_effects.add(item.e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbatch.add_callback(commit);\n\t\t\t} else {\n\t\t\t\tcommit();\n\t\t\t}\n\t\t}\n\n\t\tif (mismatch) {\n\t\t\t// continue in hydration mode\n\t\t\tset_hydrating(true);\n\t\t}\n\n\t\t// When we mount the each block for the first time, the collection won't be\n\t\t// connected to this effect as the effect hasn't finished running yet and its deps\n\t\t// won't be assigned. However, it's possible that when reconciling the each block\n\t\t// that a mutation occurred and it's made the collection MAYBE_DIRTY, so reading the\n\t\t// collection again can provide consistency to the reactive graph again as the deriveds\n\t\t// will now be `CLEAN`.\n\t\tget(each_array);\n\t});\n\n\tif (hydrating) {\n\t\tanchor = hydrate_node;\n\t}\n}\n\n/**\n * Add, remove, or reorder items output by an each block as its input changes\n * @template V\n * @param {Effect} each_effect\n * @param {Array<V>} array\n * @param {EachState} state\n * @param {Map<any, EachItem>} offscreen_items\n * @param {Element | Comment | Text} anchor\n * @param {(anchor: Node, item: MaybeSource<V>, index: number | Source<number>, collection: () => V[]) => void} render_fn\n * @param {number} flags\n * @param {(value: V, index: number) => any} get_key\n * @param {() => V[]} get_collection\n * @returns {void}\n */\nfunction reconcile(\n\teach_effect,\n\tarray,\n\tstate,\n\toffscreen_items,\n\tanchor,\n\trender_fn,\n\tflags,\n\tget_key,\n\tget_collection\n) {\n\tvar is_animated = (flags & EACH_IS_ANIMATED) !== 0;\n\tvar should_update = (flags & (EACH_ITEM_REACTIVE | EACH_INDEX_REACTIVE)) !== 0;\n\n\tvar length = array.length;\n\tvar items = state.items;\n\tvar first = state.first;\n\tvar current = first;\n\n\t/** @type {undefined | Set<EachItem>} */\n\tvar seen;\n\n\t/** @type {EachItem | null} */\n\tvar prev = null;\n\n\t/** @type {undefined | Set<EachItem>} */\n\tvar to_animate;\n\n\t/** @type {EachItem[]} */\n\tvar matched = [];\n\n\t/** @type {EachItem[]} */\n\tvar stashed = [];\n\n\t/** @type {V} */\n\tvar value;\n\n\t/** @type {any} */\n\tvar key;\n\n\t/** @type {EachItem | undefined} */\n\tvar item;\n\n\t/** @type {number} */\n\tvar i;\n\n\tif (is_animated) {\n\t\tfor (i = 0; i < length; i += 1) {\n\t\t\tvalue = array[i];\n\t\t\tkey = get_key(value, i);\n\t\t\titem = items.get(key);\n\n\t\t\tif (item !== undefined) {\n\t\t\t\titem.a?.measure();\n\t\t\t\t(to_animate ??= new Set()).add(item);\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (i = 0; i < length; i += 1) {\n\t\tvalue = array[i];\n\t\tkey = get_key(value, i);\n\n\t\titem = items.get(key);\n\n\t\tif (item === undefined) {\n\t\t\tvar pending = offscreen_items.get(key);\n\n\t\t\tif (pending !== undefined) {\n\t\t\t\toffscreen_items.delete(key);\n\t\t\t\titems.set(key, pending);\n\n\t\t\t\tvar next = prev ? prev.next : current;\n\n\t\t\t\tlink(state, prev, pending);\n\t\t\t\tlink(state, pending, next);\n\n\t\t\t\tmove(pending, next, anchor);\n\t\t\t\tprev = pending;\n\t\t\t} else {\n\t\t\t\tvar child_anchor = current ? /** @type {TemplateNode} */ (current.e.nodes_start) : anchor;\n\n\t\t\t\tprev = create_item(\n\t\t\t\t\tchild_anchor,\n\t\t\t\t\tstate,\n\t\t\t\t\tprev,\n\t\t\t\t\tprev === null ? state.first : prev.next,\n\t\t\t\t\tvalue,\n\t\t\t\t\tkey,\n\t\t\t\t\ti,\n\t\t\t\t\trender_fn,\n\t\t\t\t\tflags,\n\t\t\t\t\tget_collection\n\t\t\t\t);\n\t\t\t}\n\n\t\t\titems.set(key, prev);\n\n\t\t\tmatched = [];\n\t\t\tstashed = [];\n\n\t\t\tcurrent = prev.next;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (should_update) {\n\t\t\tupdate_item(item, value, i, flags);\n\t\t}\n\n\t\tif ((item.e.f & INERT) !== 0) {\n\t\t\tresume_effect(item.e);\n\t\t\tif (is_animated) {\n\t\t\t\titem.a?.unfix();\n\t\t\t\t(to_animate ??= new Set()).delete(item);\n\t\t\t}\n\t\t}\n\n\t\tif (item !== current) {\n\t\t\tif (seen !== undefined && seen.has(item)) {\n\t\t\t\tif (matched.length < stashed.length) {\n\t\t\t\t\t// more efficient to move later items to the front\n\t\t\t\t\tvar start = stashed[0];\n\t\t\t\t\tvar j;\n\n\t\t\t\t\tprev = start.prev;\n\n\t\t\t\t\tvar a = matched[0];\n\t\t\t\t\tvar b = matched[matched.length - 1];\n\n\t\t\t\t\tfor (j = 0; j < matched.length; j += 1) {\n\t\t\t\t\t\tmove(matched[j], start, anchor);\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (j = 0; j < stashed.length; j += 1) {\n\t\t\t\t\t\tseen.delete(stashed[j]);\n\t\t\t\t\t}\n\n\t\t\t\t\tlink(state, a.prev, b.next);\n\t\t\t\t\tlink(state, prev, a);\n\t\t\t\t\tlink(state, b, start);\n\n\t\t\t\t\tcurrent = start;\n\t\t\t\t\tprev = b;\n\t\t\t\t\ti -= 1;\n\n\t\t\t\t\tmatched = [];\n\t\t\t\t\tstashed = [];\n\t\t\t\t} else {\n\t\t\t\t\t// more efficient to move earlier items to the back\n\t\t\t\t\tseen.delete(item);\n\t\t\t\t\tmove(item, current, anchor);\n\n\t\t\t\t\tlink(state, item.prev, item.next);\n\t\t\t\t\tlink(state, item, prev === null ? state.first : prev.next);\n\t\t\t\t\tlink(state, prev, item);\n\n\t\t\t\t\tprev = item;\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tmatched = [];\n\t\t\tstashed = [];\n\n\t\t\twhile (current !== null && current.k !== key) {\n\t\t\t\t// If the each block isn't inert and an item has an effect that is already inert,\n\t\t\t\t// skip over adding it to our seen Set as the item is already being handled\n\t\t\t\tif ((current.e.f & INERT) === 0) {\n\t\t\t\t\t(seen ??= new Set()).add(current);\n\t\t\t\t}\n\t\t\t\tstashed.push(current);\n\t\t\t\tcurrent = current.next;\n\t\t\t}\n\n\t\t\tif (current === null) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\titem = current;\n\t\t}\n\n\t\tmatched.push(item);\n\t\tprev = item;\n\t\tcurrent = item.next;\n\t}\n\n\tif (current !== null || seen !== undefined) {\n\t\tvar to_destroy = seen === undefined ? [] : array_from(seen);\n\n\t\twhile (current !== null) {\n\t\t\t// If the each block isn't inert, then inert effects are currently outroing and will be removed once the transition is finished\n\t\t\tif ((current.e.f & INERT) === 0) {\n\t\t\t\tto_destroy.push(current);\n\t\t\t}\n\t\t\tcurrent = current.next;\n\t\t}\n\n\t\tvar destroy_length = to_destroy.length;\n\n\t\tif (destroy_length > 0) {\n\t\t\tvar controlled_anchor = (flags & EACH_IS_CONTROLLED) !== 0 && length === 0 ? anchor : null;\n\n\t\t\tif (is_animated) {\n\t\t\t\tfor (i = 0; i < destroy_length; i += 1) {\n\t\t\t\t\tto_destroy[i].a?.measure();\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < destroy_length; i += 1) {\n\t\t\t\t\tto_destroy[i].a?.fix();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tpause_effects(state, to_destroy, controlled_anchor);\n\t\t}\n\t}\n\n\tif (is_animated) {\n\t\tqueue_micro_task(() => {\n\t\t\tif (to_animate === undefined) return;\n\t\t\tfor (item of to_animate) {\n\t\t\t\titem.a?.apply();\n\t\t\t}\n\t\t});\n\t}\n\n\teach_effect.first = state.first && state.first.e;\n\teach_effect.last = prev && prev.e;\n\n\tfor (var unused of offscreen_items.values()) {\n\t\tdestroy_effect(unused.e);\n\t}\n\n\toffscreen_items.clear();\n}\n\n/**\n * @param {EachItem} item\n * @param {any} value\n * @param {number} index\n * @param {number} type\n * @returns {void}\n */\nfunction update_item(item, value, index, type) {\n\tif ((type & EACH_ITEM_REACTIVE) !== 0) {\n\t\tinternal_set(item.v, value);\n\t}\n\n\tif ((type & EACH_INDEX_REACTIVE) !== 0) {\n\t\tinternal_set(/** @type {Value<number>} */ (item.i), index);\n\t} else {\n\t\titem.i = index;\n\t}\n}\n\n/**\n * @template V\n * @param {Node | null} anchor\n * @param {EachState} state\n * @param {EachItem | null} prev\n * @param {EachItem | null} next\n * @param {V} value\n * @param {unknown} key\n * @param {number} index\n * @param {(anchor: Node, item: V | Source<V>, index: number | Value<number>, collection: () => V[]) => void} render_fn\n * @param {number} flags\n * @param {() => V[]} get_collection\n * @param {boolean} [deferred]\n * @returns {EachItem}\n */\nfunction create_item(\n\tanchor,\n\tstate,\n\tprev,\n\tnext,\n\tvalue,\n\tkey,\n\tindex,\n\trender_fn,\n\tflags,\n\tget_collection,\n\tdeferred\n) {\n\tvar previous_each_item = current_each_item;\n\tvar reactive = (flags & EACH_ITEM_REACTIVE) !== 0;\n\tvar mutable = (flags & EACH_ITEM_IMMUTABLE) === 0;\n\n\tvar v = reactive ? (mutable ? mutable_source(value, false, false) : source(value)) : value;\n\tvar i = (flags & EACH_INDEX_REACTIVE) === 0 ? index : source(index);\n\n\tif (DEV && reactive) {\n\t\t// For tracing purposes, we need to link the source signal we create with the\n\t\t// collection + index so that tracing works as intended\n\t\t/** @type {Value} */ (v).trace = () => {\n\t\t\tvar collection_index = typeof i === 'number' ? index : i.v;\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unused-expressions\n\t\t\tget_collection()[collection_index];\n\t\t};\n\t}\n\n\t/** @type {EachItem} */\n\tvar item = {\n\t\ti,\n\t\tv,\n\t\tk: key,\n\t\ta: null,\n\t\t// @ts-expect-error\n\t\te: null,\n\t\tprev,\n\t\tnext\n\t};\n\n\tcurrent_each_item = item;\n\n\ttry {\n\t\tif (anchor === null) {\n\t\t\tvar fragment = document.createDocumentFragment();\n\t\t\tfragment.append((anchor = create_text()));\n\t\t}\n\n\t\titem.e = branch(() => render_fn(/** @type {Node} */ (anchor), v, i, get_collection), hydrating);\n\n\t\titem.e.prev = prev && prev.e;\n\t\titem.e.next = next && next.e;\n\n\t\tif (prev === null) {\n\t\t\tif (!deferred) {\n\t\t\t\tstate.first = item;\n\t\t\t}\n\t\t} else {\n\t\t\tprev.next = item;\n\t\t\tprev.e.next = item.e;\n\t\t}\n\n\t\tif (next !== null) {\n\t\t\tnext.prev = item;\n\t\t\tnext.e.prev = item.e;\n\t\t}\n\n\t\treturn item;\n\t} finally {\n\t\tcurrent_each_item = previous_each_item;\n\t}\n}\n\n/**\n * @param {EachItem} item\n * @param {EachItem | null} next\n * @param {Text | Element | Comment} anchor\n */\nfunction move(item, next, anchor) {\n\tvar end = item.next ? /** @type {TemplateNode} */ (item.next.e.nodes_start) : anchor;\n\n\tvar dest = next ? /** @type {TemplateNode} */ (next.e.nodes_start) : anchor;\n\tvar node = /** @type {TemplateNode} */ (item.e.nodes_start);\n\n\twhile (node !== null && node !== end) {\n\t\tvar next_node = /** @type {TemplateNode} */ (get_next_sibling(node));\n\t\tdest.before(node);\n\t\tnode = next_node;\n\t}\n}\n\n/**\n * @param {EachState} state\n * @param {EachItem | null} prev\n * @param {EachItem | null} next\n */\nfunction link(state, prev, next) {\n\tif (prev === null) {\n\t\tstate.first = next;\n\t} else {\n\t\tprev.next = next;\n\t\tprev.e.next = next && next.e;\n\t}\n\n\tif (next !== null) {\n\t\tnext.prev = prev;\n\t\tnext.e.prev = prev && prev.e;\n\t}\n}\n","/** @import { TemplateNode } from '#client' */\n\nimport { COMMENT_NODE } from '#client/constants';\nimport {\n\tHYDRATION_END,\n\tHYDRATION_ERROR,\n\tHYDRATION_START,\n\tHYDRATION_START_ELSE\n} from '../../../constants.js';\nimport * as w from '../warnings.js';\nimport { get_next_sibling } from './operations.js';\n\n/**\n * Use this variable to guard everything related to hydration code so it can be treeshaken out\n * if the user doesn't use the `hydrate` method and these code paths are therefore not needed.\n */\nexport let hydrating = false;\n\n/** @param {boolean} value */\nexport function set_hydrating(value) {\n\thydrating = value;\n}\n\n/**\n * The node that is currently being hydrated. This starts out as the first node inside the opening\n * <!--[--> comment, and updates each time a component calls `$.child(...)` or `$.sibling(...)`.\n * When entering a block (e.g. `{#if ...}`), `hydrate_node` is the block opening comment; by the\n * time we leave the block it is the closing comment, which serves as the block's anchor.\n * @type {TemplateNode}\n */\nexport let hydrate_node;\n\n/** @param {TemplateNode} node */\nexport function set_hydrate_node(node) {\n\tif (node === null) {\n\t\tw.hydration_mismatch();\n\t\tthrow HYDRATION_ERROR;\n\t}\n\n\treturn (hydrate_node = node);\n}\n\nexport function hydrate_next() {\n\treturn set_hydrate_node(/** @type {TemplateNode} */ (get_next_sibling(hydrate_node)));\n}\n\n/** @param {TemplateNode} node */\nexport function reset(node) {\n\tif (!hydrating) return;\n\n\t// If the node has remaining siblings, something has gone wrong\n\tif (get_next_sibling(hydrate_node) !== null) {\n\t\tw.hydration_mismatch();\n\t\tthrow HYDRATION_ERROR;\n\t}\n\n\thydrate_node = node;\n}\n\n/**\n * @param {HTMLTemplateElement} template\n */\nexport function hydrate_template(template) {\n\tif (hydrating) {\n\t\t// @ts-expect-error TemplateNode doesn't include DocumentFragment, but it's actually fine\n\t\thydrate_node = template.content;\n\t}\n}\n\nexport function next(count = 1) {\n\tif (hydrating) {\n\t\tvar i = count;\n\t\tvar node = hydrate_node;\n\n\t\twhile (i--) {\n\t\t\tnode = /** @type {TemplateNode} */ (get_next_sibling(node));\n\t\t}\n\n\t\thydrate_node = node;\n\t}\n}\n\n/**\n * Skips or removes (depending on {@link remove}) all nodes starting at `hydrate_node` up until the next hydration end comment\n * @param {boolean} remove\n */\nexport function skip_nodes(remove = true) {\n\tvar depth = 0;\n\tvar node = hydrate_node;\n\n\twhile (true) {\n\t\tif (node.nodeType === COMMENT_NODE) {\n\t\t\tvar data = /** @type {Comment} */ (node).data;\n\n\t\t\tif (data === HYDRATION_END) {\n\t\t\t\tif (depth === 0) return node;\n\t\t\t\tdepth -= 1;\n\t\t\t} else if (data === HYDRATION_START || data === HYDRATION_START_ELSE) {\n\t\t\t\tdepth += 1;\n\t\t\t}\n\t\t}\n\n\t\tvar next = /** @type {TemplateNode} */ (get_next_sibling(node));\n\t\tif (remove) node.remove();\n\t\tnode = next;\n\t}\n}\n\n/**\n *\n * @param {TemplateNode} node\n */\nexport function read_hydration_instruction(node) {\n\tif (!node || node.nodeType !== COMMENT_NODE) {\n\t\tw.hydration_mismatch();\n\t\tthrow HYDRATION_ERROR;\n\t}\n\n\treturn /** @type {Comment} */ (node).data;\n}\n","/** @import { Effect, TemplateNode } from '#client' */\nimport { FILENAME, HYDRATION_ERROR } from '../../../../constants.js';\nimport { remove_effect_dom, template_effect } from '../../reactivity/effects.js';\nimport { hydrate_next, hydrate_node, hydrating, set_hydrate_node } from '../hydration.js';\nimport { create_fragment_from_html } from '../reconciler.js';\nimport { assign_nodes } from '../template.js';\nimport * as w from '../../warnings.js';\nimport { hash, sanitize_location } from '../../../../utils.js';\nimport { DEV } from 'esm-env';\nimport { dev_current_component_function } from '../../context.js';\nimport { get_first_child, get_next_sibling } from '../operations.js';\nimport { active_effect } from '../../runtime.js';\nimport { COMMENT_NODE } from '#client/constants';\n\n/**\n * @param {Element} element\n * @param {string | null} server_hash\n * @param {string} value\n */\nfunction check_hash(element, server_hash, value) {\n\tif (!server_hash || server_hash === hash(String(value ?? ''))) return;\n\n\tlet location;\n\n\t// @ts-expect-error\n\tconst loc = element.__svelte_meta?.loc;\n\tif (loc) {\n\t\tlocation = `near ${loc.file}:${loc.line}:${loc.column}`;\n\t} else if (dev_current_component_function?.[FILENAME]) {\n\t\tlocation = `in ${dev_current_component_function[FILENAME]}`;\n\t}\n\n\tw.hydration_html_changed(sanitize_location(location));\n}\n\n/**\n * @param {Element | Text | Comment} node\n * @param {() => string} get_value\n * @param {boolean} [svg]\n * @param {boolean} [mathml]\n * @param {boolean} [skip_warning]\n * @returns {void}\n */\nexport function html(node, get_value, svg = false, mathml = false, skip_warning = false) {\n\tvar anchor = node;\n\n\tvar value = '';\n\n\ttemplate_effect(() => {\n\t\tvar effect = /** @type {Effect} */ (active_effect);\n\n\t\tif (value === (value = get_value() ?? '')) {\n\t\t\tif (hydrating) hydrate_next();\n\t\t\treturn;\n\t\t}\n\n\t\tif (effect.nodes_start !== null) {\n\t\t\tremove_effect_dom(effect.nodes_start, /** @type {TemplateNode} */ (effect.nodes_end));\n\t\t\teffect.nodes_start = effect.nodes_end = null;\n\t\t}\n\n\t\tif (value === '') return;\n\n\t\tif (hydrating) {\n\t\t\t// We're deliberately not trying to repair mismatches between server and client,\n\t\t\t// as it's costly and error-prone (and it's an edge case to have a mismatch anyway)\n\t\t\tvar hash = /** @type {Comment} */ (hydrate_node).data;\n\t\t\tvar next = hydrate_next();\n\t\t\tvar last = next;\n\n\t\t\twhile (\n\t\t\t\tnext !== null &&\n\t\t\t\t(next.nodeType !== COMMENT_NODE || /** @type {Comment} */ (next).data !== '')\n\t\t\t) {\n\t\t\t\tlast = next;\n\t\t\t\tnext = /** @type {TemplateNode} */ (get_next_sibling(next));\n\t\t\t}\n\n\t\t\tif (next === null) {\n\t\t\t\tw.hydration_mismatch();\n\t\t\t\tthrow HYDRATION_ERROR;\n\t\t\t}\n\n\t\t\tif (DEV && !skip_warning) {\n\t\t\t\tcheck_hash(/** @type {Element} */ (next.parentNode), hash, value);\n\t\t\t}\n\n\t\t\tassign_nodes(hydrate_node, last);\n\t\t\tanchor = set_hydrate_node(next);\n\t\t\treturn;\n\t\t}\n\n\t\tvar html = value + '';\n\t\tif (svg) html = `<svg>${html}</svg>`;\n\t\telse if (mathml) html = `<math>${html}</math>`;\n\n\t\t// Don't use create_fragment_with_script_from_html here because that would mean script tags are executed.\n\t\t// @html is basically `.innerHTML = ...` and that doesn't execute scripts either due to security reasons.\n\t\t/** @type {DocumentFragment | Element} */\n\t\tvar node = create_fragment_from_html(html);\n\n\t\tif (svg || mathml) {\n\t\t\tnode = /** @type {Element} */ (get_first_child(node));\n\t\t}\n\n\t\tassign_nodes(\n\t\t\t/** @type {TemplateNode} */ (get_first_child(node)),\n\t\t\t/** @type {TemplateNode} */ (node.lastChild)\n\t\t);\n\n\t\tif (svg || mathml) {\n\t\t\twhile (get_first_child(node)) {\n\t\t\t\tanchor.before(/** @type {Node} */ (get_first_child(node)));\n\t\t\t}\n\t\t} else {\n\t\t\tanchor.before(node);\n\t\t}\n\t});\n}\n","/** @import { TemplateNode, Dom } from '#client' */\nimport { EFFECT_TRANSPARENT } from '#client/constants';\nimport { block } from '../../reactivity/effects.js';\nimport { hydrate_next, hydrating } from '../hydration.js';\nimport { BranchManager } from './branches.js';\n\n/**\n * @template P\n * @template {(props: P) => void} C\n * @param {TemplateNode} node\n * @param {() => C} get_component\n * @param {(anchor: TemplateNode, component: C) => Dom | void} render_fn\n * @returns {void}\n */\nexport function component(node, get_component, render_fn) {\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\tvar branches = new BranchManager(node);\n\n\tblock(() => {\n\t\tvar component = get_component() ?? null;\n\t\tbranches.ensure(component, component && ((target) => render_fn(target, component)));\n\t}, EFFECT_TRANSPARENT);\n}\n","/** @import { ActionPayload } from '#client' */\nimport { effect, render_effect } from '../../reactivity/effects.js';\nimport { safe_not_equal } from '../../reactivity/equality.js';\nimport { deep_read_state, untrack } from '../../runtime.js';\n\n/**\n * @template P\n * @param {Element} dom\n * @param {(dom: Element, value?: P) => ActionPayload<P>} action\n * @param {() => P} [get_value]\n * @returns {void}\n */\nexport function action(dom, action, get_value) {\n\teffect(() => {\n\t\tvar payload = untrack(() => action(dom, get_value?.()) || {});\n\n\t\tif (get_value && payload?.update) {\n\t\t\tvar inited = false;\n\t\t\t/** @type {P} */\n\t\t\tvar prev = /** @type {any} */ ({}); // initialize with something so it's never equal on first run\n\n\t\t\trender_effect(() => {\n\t\t\t\tvar value = get_value();\n\n\t\t\t\t// Action's update method is coarse-grained, i.e. when anything in the passed value changes, update.\n\t\t\t\t// This works in legacy mode because of mutable_source being updated as a whole, but when using $state\n\t\t\t\t// together with actions and mutation, it wouldn't notice the change without a deep read.\n\t\t\t\tdeep_read_state(value);\n\n\t\t\t\tif (inited && safe_not_equal(prev, value)) {\n\t\t\t\t\tprev = value;\n\t\t\t\t\t/** @type {Function} */ (payload.update)(value);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinited = true;\n\t\t}\n\n\t\tif (payload?.destroy) {\n\t\t\treturn () => /** @type {Function} */ (payload.destroy)();\n\t\t}\n\t});\n}\n","/** @import { Effect } from '#client' */\nimport { block, branch, effect, destroy_effect } from '../../reactivity/effects.js';\n\n// TODO in 6.0 or 7.0, when we remove legacy mode, we can simplify this by\n// getting rid of the block/branch stuff and just letting the effect rip.\n// see https://github.com/sveltejs/svelte/pull/15962\n\n/**\n * @param {Element} node\n * @param {() => (node: Element) => void} get_fn\n */\nexport function attach(node, get_fn) {\n\t/** @type {false | undefined | ((node: Element) => void)} */\n\tvar fn = undefined;\n\n\t/** @type {Effect | null} */\n\tvar e;\n\n\tblock(() => {\n\t\tif (fn !== (fn = get_fn())) {\n\t\t\tif (e) {\n\t\t\t\tdestroy_effect(e);\n\t\t\t\te = null;\n\t\t\t}\n\n\t\t\tif (fn) {\n\t\t\t\te = branch(() => {\n\t\t\t\t\teffect(() => /** @type {(node: Element) => void} */ (fn)(node));\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n}\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import { escape_html } from '../../escaping.js';\nimport { clsx as _clsx } from 'clsx';\n\n/**\n * `<div translate={false}>` should be rendered as `<div translate=\"no\">` and _not_\n * `<div translate=\"false\">`, which is equivalent to `<div translate=\"yes\">`. There\n * may be other odd cases that need to be added to this list in future\n * @type {Record<string, Map<any, string>>}\n */\nconst replacements = {\n\ttranslate: new Map([\n\t\t[true, 'yes'],\n\t\t[false, 'no']\n\t])\n};\n\n/**\n * @template V\n * @param {string} name\n * @param {V} value\n * @param {boolean} [is_boolean]\n * @returns {string}\n */\nexport function attr(name, value, is_boolean = false) {\n\t// attribute hidden for values other than \"until-found\" behaves like a boolean attribute\n\tif (name === 'hidden' && value !== 'until-found') {\n\t\tis_boolean = true;\n\t}\n\tif (value == null || (!value && is_boolean)) return '';\n\tconst normalized = (name in replacements && replacements[name].get(value)) || value;\n\tconst assignment = is_boolean ? '' : `=\"${escape_html(normalized, true)}\"`;\n\treturn ` ${name}${assignment}`;\n}\n\n/**\n * Small wrapper around clsx to preserve Svelte's (weird) handling of falsy values.\n * TODO Svelte 6 revisit this, and likely turn all falsy values into the empty string (what clsx also does)\n * @param  {any} value\n */\nexport function clsx(value) {\n\tif (typeof value === 'object') {\n\t\treturn _clsx(value);\n\t} else {\n\t\treturn value ?? '';\n\t}\n}\n\nconst whitespace = [...' \\t\\n\\r\\f\\u00a0\\u000b\\ufeff'];\n\n/**\n * @param {any} value\n * @param {string | null} [hash]\n * @param {Record<string, boolean>} [directives]\n * @returns {string | null}\n */\nexport function to_class(value, hash, directives) {\n\tvar classname = value == null ? '' : '' + value;\n\n\tif (hash) {\n\t\tclassname = classname ? classname + ' ' + hash : hash;\n\t}\n\n\tif (directives) {\n\t\tfor (var key in directives) {\n\t\t\tif (directives[key]) {\n\t\t\t\tclassname = classname ? classname + ' ' + key : key;\n\t\t\t} else if (classname.length) {\n\t\t\t\tvar len = key.length;\n\t\t\t\tvar a = 0;\n\n\t\t\t\twhile ((a = classname.indexOf(key, a)) >= 0) {\n\t\t\t\t\tvar b = a + len;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t(a === 0 || whitespace.includes(classname[a - 1])) &&\n\t\t\t\t\t\t(b === classname.length || whitespace.includes(classname[b]))\n\t\t\t\t\t) {\n\t\t\t\t\t\tclassname = (a === 0 ? '' : classname.substring(0, a)) + classname.substring(b + 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ta = b;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn classname === '' ? null : classname;\n}\n\n/**\n *\n * @param {Record<string,any>} styles\n * @param {boolean} important\n */\nfunction append_styles(styles, important = false) {\n\tvar separator = important ? ' !important;' : ';';\n\tvar css = '';\n\n\tfor (var key in styles) {\n\t\tvar value = styles[key];\n\t\tif (value != null && value !== '') {\n\t\t\tcss += ' ' + key + ': ' + value + separator;\n\t\t}\n\t}\n\n\treturn css;\n}\n\n/**\n * @param {string} name\n * @returns {string}\n */\nfunction to_css_name(name) {\n\tif (name[0] !== '-' || name[1] !== '-') {\n\t\treturn name.toLowerCase();\n\t}\n\treturn name;\n}\n\n/**\n * @param {any} value\n * @param {Record<string, any> | [Record<string, any>, Record<string, any>]} [styles]\n * @returns {string | null}\n */\nexport function to_style(value, styles) {\n\tif (styles) {\n\t\tvar new_style = '';\n\n\t\t/** @type {Record<string,any> | undefined} */\n\t\tvar normal_styles;\n\n\t\t/** @type {Record<string,any> | undefined} */\n\t\tvar important_styles;\n\n\t\tif (Array.isArray(styles)) {\n\t\t\tnormal_styles = styles[0];\n\t\t\timportant_styles = styles[1];\n\t\t} else {\n\t\t\tnormal_styles = styles;\n\t\t}\n\n\t\tif (value) {\n\t\t\tvalue = String(value)\n\t\t\t\t.replaceAll(/\\s*\\/\\*.*?\\*\\/\\s*/g, '')\n\t\t\t\t.trim();\n\n\t\t\t/** @type {boolean | '\"' | \"'\"} */\n\t\t\tvar in_str = false;\n\t\t\tvar in_apo = 0;\n\t\t\tvar in_comment = false;\n\n\t\t\tvar reserved_names = [];\n\n\t\t\tif (normal_styles) {\n\t\t\t\treserved_names.push(...Object.keys(normal_styles).map(to_css_name));\n\t\t\t}\n\t\t\tif (important_styles) {\n\t\t\t\treserved_names.push(...Object.keys(important_styles).map(to_css_name));\n\t\t\t}\n\n\t\t\tvar start_index = 0;\n\t\t\tvar name_index = -1;\n\n\t\t\tconst len = value.length;\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tvar c = value[i];\n\n\t\t\t\tif (in_comment) {\n\t\t\t\t\tif (c === '/' && value[i - 1] === '*') {\n\t\t\t\t\t\tin_comment = false;\n\t\t\t\t\t}\n\t\t\t\t} else if (in_str) {\n\t\t\t\t\tif (in_str === c) {\n\t\t\t\t\t\tin_str = false;\n\t\t\t\t\t}\n\t\t\t\t} else if (c === '/' && value[i + 1] === '*') {\n\t\t\t\t\tin_comment = true;\n\t\t\t\t} else if (c === '\"' || c === \"'\") {\n\t\t\t\t\tin_str = c;\n\t\t\t\t} else if (c === '(') {\n\t\t\t\t\tin_apo++;\n\t\t\t\t} else if (c === ')') {\n\t\t\t\t\tin_apo--;\n\t\t\t\t}\n\n\t\t\t\tif (!in_comment && in_str === false && in_apo === 0) {\n\t\t\t\t\tif (c === ':' && name_index === -1) {\n\t\t\t\t\t\tname_index = i;\n\t\t\t\t\t} else if (c === ';' || i === len - 1) {\n\t\t\t\t\t\tif (name_index !== -1) {\n\t\t\t\t\t\t\tvar name = to_css_name(value.substring(start_index, name_index).trim());\n\n\t\t\t\t\t\t\tif (!reserved_names.includes(name)) {\n\t\t\t\t\t\t\t\tif (c !== ';') {\n\t\t\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar property = value.substring(start_index, i).trim();\n\t\t\t\t\t\t\t\tnew_style += ' ' + property + ';';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart_index = i + 1;\n\t\t\t\t\t\tname_index = -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (normal_styles) {\n\t\t\tnew_style += append_styles(normal_styles);\n\t\t}\n\n\t\tif (important_styles) {\n\t\t\tnew_style += append_styles(important_styles, true);\n\t\t}\n\n\t\tnew_style = new_style.trim();\n\t\treturn new_style === '' ? null : new_style;\n\t}\n\n\treturn value == null ? null : String(value);\n}\n","import { to_class } from '../../../shared/attributes.js';\nimport { hydrating } from '../hydration.js';\n\n/**\n * @param {Element} dom\n * @param {boolean | number} is_html\n * @param {string | null} value\n * @param {string} [hash]\n * @param {Record<string, any>} [prev_classes]\n * @param {Record<string, any>} [next_classes]\n * @returns {Record<string, boolean> | undefined}\n */\nexport function set_class(dom, is_html, value, hash, prev_classes, next_classes) {\n\t// @ts-expect-error need to add __className to patched prototype\n\tvar prev = dom.__className;\n\n\tif (\n\t\thydrating ||\n\t\tprev !== value ||\n\t\tprev === undefined // for edge case of `class={undefined}`\n\t) {\n\t\tvar next_class_name = to_class(value, hash, next_classes);\n\n\t\tif (!hydrating || next_class_name !== dom.getAttribute('class')) {\n\t\t\t// Removing the attribute when the value is only an empty string causes\n\t\t\t// performance issues vs simply making the className an empty string. So\n\t\t\t// we should only remove the class if the value is nullish\n\t\t\t// and there no hash/directives :\n\t\t\tif (next_class_name == null) {\n\t\t\t\tdom.removeAttribute('class');\n\t\t\t} else if (is_html) {\n\t\t\t\tdom.className = next_class_name;\n\t\t\t} else {\n\t\t\t\tdom.setAttribute('class', next_class_name);\n\t\t\t}\n\t\t}\n\n\t\t// @ts-expect-error need to add __className to patched prototype\n\t\tdom.__className = value;\n\t} else if (next_classes && prev_classes !== next_classes) {\n\t\tfor (var key in next_classes) {\n\t\t\tvar is_present = !!next_classes[key];\n\n\t\t\tif (prev_classes == null || is_present !== !!prev_classes[key]) {\n\t\t\t\tdom.classList.toggle(key, is_present);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn next_classes;\n}\n","import { to_style } from '../../../shared/attributes.js';\nimport { hydrating } from '../hydration.js';\n\n/**\n * @param {Element & ElementCSSInlineStyle} dom\n * @param {Record<string, any>} prev\n * @param {Record<string, any>} next\n * @param {string} [priority]\n */\nfunction update_styles(dom, prev = {}, next, priority) {\n\tfor (var key in next) {\n\t\tvar value = next[key];\n\n\t\tif (prev[key] !== value) {\n\t\t\tif (next[key] == null) {\n\t\t\t\tdom.style.removeProperty(key);\n\t\t\t} else {\n\t\t\t\tdom.style.setProperty(key, value, priority);\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} dom\n * @param {string | null} value\n * @param {Record<string, any> | [Record<string, any>, Record<string, any>]} [prev_styles]\n * @param {Record<string, any> | [Record<string, any>, Record<string, any>]} [next_styles]\n */\nexport function set_style(dom, value, prev_styles, next_styles) {\n\t// @ts-expect-error\n\tvar prev = dom.__style;\n\n\tif (hydrating || prev !== value) {\n\t\tvar next_style_attr = to_style(value, next_styles);\n\n\t\tif (!hydrating || next_style_attr !== dom.getAttribute('style')) {\n\t\t\tif (next_style_attr == null) {\n\t\t\t\tdom.removeAttribute('style');\n\t\t\t} else {\n\t\t\t\tdom.style.cssText = next_style_attr;\n\t\t\t}\n\t\t}\n\n\t\t// @ts-expect-error\n\t\tdom.__style = value;\n\t} else if (next_styles) {\n\t\tif (Array.isArray(next_styles)) {\n\t\t\tupdate_styles(dom, prev_styles?.[0], next_styles[0]);\n\t\t\tupdate_styles(dom, prev_styles?.[1], next_styles[1], 'important');\n\t\t} else {\n\t\t\tupdate_styles(dom, prev_styles, next_styles);\n\t\t}\n\t}\n\n\treturn next_styles;\n}\n","import { effect, teardown } from '../../../reactivity/effects.js';\nimport { listen_to_event_and_reset_event } from './shared.js';\nimport { is } from '../../../proxy.js';\nimport { is_array } from '../../../../shared/utils.js';\nimport * as w from '../../../warnings.js';\nimport { Batch, current_batch, previous_batch } from '../../../reactivity/batch.js';\n\n/**\n * Selects the correct option(s) (depending on whether this is a multiple select)\n * @template V\n * @param {HTMLSelectElement} select\n * @param {V} value\n * @param {boolean} mounting\n */\nexport function select_option(select, value, mounting = false) {\n\tif (select.multiple) {\n\t\t// If value is null or undefined, keep the selection as is\n\t\tif (value == undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If not an array, warn and keep the selection as is\n\t\tif (!is_array(value)) {\n\t\t\treturn w.select_multiple_invalid_value();\n\t\t}\n\n\t\t// Otherwise, update the selection\n\t\tfor (var option of select.options) {\n\t\t\toption.selected = value.includes(get_option_value(option));\n\t\t}\n\n\t\treturn;\n\t}\n\n\tfor (option of select.options) {\n\t\tvar option_value = get_option_value(option);\n\t\tif (is(option_value, value)) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (!mounting || value !== undefined) {\n\t\tselect.selectedIndex = -1; // no option should be selected\n\t}\n}\n\n/**\n * Selects the correct option(s) if `value` is given,\n * and then sets up a mutation observer to sync the\n * current selection to the dom when it changes. Such\n * changes could for example occur when options are\n * inside an `#each` block.\n * @param {HTMLSelectElement} select\n */\nexport function init_select(select) {\n\tvar observer = new MutationObserver(() => {\n\t\t// @ts-ignore\n\t\tselect_option(select, select.__value);\n\t\t// Deliberately don't update the potential binding value,\n\t\t// the model should be preserved unless explicitly changed\n\t});\n\n\tobserver.observe(select, {\n\t\t// Listen to option element changes\n\t\tchildList: true,\n\t\tsubtree: true, // because of <optgroup>\n\t\t// Listen to option element value attribute changes\n\t\t// (doesn't get notified of select value changes,\n\t\t// because that property is not reflected as an attribute)\n\t\tattributes: true,\n\t\tattributeFilter: ['value']\n\t});\n\n\tteardown(() => {\n\t\tobserver.disconnect();\n\t});\n}\n\n/**\n * @param {HTMLSelectElement} select\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_select_value(select, get, set = get) {\n\tvar batches = new WeakSet();\n\tvar mounting = true;\n\n\tlisten_to_event_and_reset_event(select, 'change', (is_reset) => {\n\t\tvar query = is_reset ? '[selected]' : ':checked';\n\t\t/** @type {unknown} */\n\t\tvar value;\n\n\t\tif (select.multiple) {\n\t\t\tvalue = [].map.call(select.querySelectorAll(query), get_option_value);\n\t\t} else {\n\t\t\t/** @type {HTMLOptionElement | null} */\n\t\t\tvar selected_option =\n\t\t\t\tselect.querySelector(query) ??\n\t\t\t\t// will fall back to first non-disabled option if no option is selected\n\t\t\t\tselect.querySelector('option:not([disabled])');\n\t\t\tvalue = selected_option && get_option_value(selected_option);\n\t\t}\n\n\t\tset(value);\n\n\t\tif (current_batch !== null) {\n\t\t\tbatches.add(current_batch);\n\t\t}\n\t});\n\n\t// Needs to be an effect, not a render_effect, so that in case of each loops the logic runs after the each block has updated\n\teffect(() => {\n\t\tvar value = get();\n\n\t\tif (select === document.activeElement) {\n\t\t\t// we need both, because in non-async mode, render effects run before previous_batch is set\n\t\t\tvar batch = /** @type {Batch} */ (previous_batch ?? current_batch);\n\n\t\t\t// Don't update the <select> if it is focused. We can get here if, for example,\n\t\t\t// an update is deferred because of async work depending on the select:\n\t\t\t//\n\t\t\t// <select bind:value={selected}>...</select>\n\t\t\t// <p>{await find(selected)}</p>\n\t\t\tif (batches.has(batch)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tselect_option(select, value, mounting);\n\n\t\t// Mounting and value undefined -> take selection from dom\n\t\tif (mounting && value === undefined) {\n\t\t\t/** @type {HTMLOptionElement | null} */\n\t\t\tvar selected_option = select.querySelector(':checked');\n\t\t\tif (selected_option !== null) {\n\t\t\t\tvalue = get_option_value(selected_option);\n\t\t\t\tset(value);\n\t\t\t}\n\t\t}\n\n\t\t// @ts-ignore\n\t\tselect.__value = value;\n\t\tmounting = false;\n\t});\n\n\tinit_select(select);\n}\n\n/** @param {HTMLOptionElement} option */\nfunction get_option_value(option) {\n\t// __value only exists if the <option> has a value attribute\n\tif ('__value' in option) {\n\t\treturn option.__value;\n\t} else {\n\t\treturn option.value;\n\t}\n}\n","/** @import { Effect } from '#client' */\nimport { DEV } from 'esm-env';\nimport { hydrating, set_hydrating } from '../hydration.js';\nimport { get_descriptors, get_prototype_of } from '../../../shared/utils.js';\nimport { create_event, delegate } from './events.js';\nimport { add_form_reset_listener, autofocus } from './misc.js';\nimport * as w from '../../warnings.js';\nimport { LOADING_ATTR_SYMBOL } from '#client/constants';\nimport { queue_micro_task } from '../task.js';\nimport { is_capture_event, is_delegated, normalize_attribute } from '../../../../utils.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tget,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../runtime.js';\nimport { attach } from './attachments.js';\nimport { clsx } from '../../../shared/attributes.js';\nimport { set_class } from './class.js';\nimport { set_style } from './style.js';\nimport { ATTACHMENT_KEY, NAMESPACE_HTML, UNINITIALIZED } from '../../../../constants.js';\nimport { block, branch, destroy_effect, effect } from '../../reactivity/effects.js';\nimport { init_select, select_option } from './bindings/select.js';\nimport { flatten } from '../../reactivity/async.js';\n\nexport const CLASS = Symbol('class');\nexport const STYLE = Symbol('style');\n\nconst IS_CUSTOM_ELEMENT = Symbol('is custom element');\nconst IS_HTML = Symbol('is html');\n\n/**\n * The value/checked attribute in the template actually corresponds to the defaultValue property, so we need\n * to remove it upon hydration to avoid a bug when someone resets the form value.\n * @param {HTMLInputElement} input\n * @returns {void}\n */\nexport function remove_input_defaults(input) {\n\tif (!hydrating) return;\n\n\tvar already_removed = false;\n\n\t// We try and remove the default attributes later, rather than sync during hydration.\n\t// Doing it sync during hydration has a negative impact on performance, but deferring the\n\t// work in an idle task alleviates this greatly. If a form reset event comes in before\n\t// the idle callback, then we ensure the input defaults are cleared just before.\n\tvar remove_defaults = () => {\n\t\tif (already_removed) return;\n\t\talready_removed = true;\n\n\t\t// Remove the attributes but preserve the values\n\t\tif (input.hasAttribute('value')) {\n\t\t\tvar value = input.value;\n\t\t\tset_attribute(input, 'value', null);\n\t\t\tinput.value = value;\n\t\t}\n\n\t\tif (input.hasAttribute('checked')) {\n\t\t\tvar checked = input.checked;\n\t\t\tset_attribute(input, 'checked', null);\n\t\t\tinput.checked = checked;\n\t\t}\n\t};\n\n\t// @ts-expect-error\n\tinput.__on_r = remove_defaults;\n\tqueue_micro_task(remove_defaults);\n\tadd_form_reset_listener();\n}\n\n/**\n * @param {Element} element\n * @param {any} value\n */\nexport function set_value(element, value) {\n\tvar attributes = get_attributes(element);\n\n\tif (\n\t\tattributes.value ===\n\t\t\t(attributes.value =\n\t\t\t\t// treat null and undefined the same for the initial value\n\t\t\t\tvalue ?? undefined) ||\n\t\t// @ts-expect-error\n\t\t// `progress` elements always need their value set when it's `0`\n\t\t(element.value === value && (value !== 0 || element.nodeName !== 'PROGRESS'))\n\t) {\n\t\treturn;\n\t}\n\n\t// @ts-expect-error\n\telement.value = value ?? '';\n}\n\n/**\n * @param {Element} element\n * @param {boolean} checked\n */\nexport function set_checked(element, checked) {\n\tvar attributes = get_attributes(element);\n\n\tif (\n\t\tattributes.checked ===\n\t\t(attributes.checked =\n\t\t\t// treat null and undefined the same for the initial value\n\t\t\tchecked ?? undefined)\n\t) {\n\t\treturn;\n\t}\n\n\t// @ts-expect-error\n\telement.checked = checked;\n}\n\n/**\n * Sets the `selected` attribute on an `option` element.\n * Not set through the property because that doesn't reflect to the DOM,\n * which means it wouldn't be taken into account when a form is reset.\n * @param {HTMLOptionElement} element\n * @param {boolean} selected\n */\nexport function set_selected(element, selected) {\n\tif (selected) {\n\t\t// The selected option could've changed via user selection, and\n\t\t// setting the value without this check would set it back.\n\t\tif (!element.hasAttribute('selected')) {\n\t\t\telement.setAttribute('selected', '');\n\t\t}\n\t} else {\n\t\telement.removeAttribute('selected');\n\t}\n}\n\n/**\n * Applies the default checked property without influencing the current checked property.\n * @param {HTMLInputElement} element\n * @param {boolean} checked\n */\nexport function set_default_checked(element, checked) {\n\tconst existing_value = element.checked;\n\telement.defaultChecked = checked;\n\telement.checked = existing_value;\n}\n\n/**\n * Applies the default value property without influencing the current value property.\n * @param {HTMLInputElement | HTMLTextAreaElement} element\n * @param {string} value\n */\nexport function set_default_value(element, value) {\n\tconst existing_value = element.value;\n\telement.defaultValue = value;\n\telement.value = existing_value;\n}\n\n/**\n * @param {Element} element\n * @param {string} attribute\n * @param {string | null} value\n * @param {boolean} [skip_warning]\n */\nexport function set_attribute(element, attribute, value, skip_warning) {\n\tvar attributes = get_attributes(element);\n\n\tif (hydrating) {\n\t\tattributes[attribute] = element.getAttribute(attribute);\n\n\t\tif (\n\t\t\tattribute === 'src' ||\n\t\t\tattribute === 'srcset' ||\n\t\t\t(attribute === 'href' && element.nodeName === 'LINK')\n\t\t) {\n\t\t\tif (!skip_warning) {\n\t\t\t\tcheck_src_in_dev_hydration(element, attribute, value ?? '');\n\t\t\t}\n\n\t\t\t// If we reset these attributes, they would result in another network request, which we want to avoid.\n\t\t\t// We assume they are the same between client and server as checking if they are equal is expensive\n\t\t\t// (we can't just compare the strings as they can be different between client and server but result in the\n\t\t\t// same url, so we would need to create hidden anchor elements to compare them)\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (attributes[attribute] === (attributes[attribute] = value)) return;\n\n\tif (attribute === 'loading') {\n\t\t// @ts-expect-error\n\t\telement[LOADING_ATTR_SYMBOL] = value;\n\t}\n\n\tif (value == null) {\n\t\telement.removeAttribute(attribute);\n\t} else if (typeof value !== 'string' && get_setters(element).includes(attribute)) {\n\t\t// @ts-ignore\n\t\telement[attribute] = value;\n\t} else {\n\t\telement.setAttribute(attribute, value);\n\t}\n}\n\n/**\n * @param {Element} dom\n * @param {string} attribute\n * @param {string} value\n */\nexport function set_xlink_attribute(dom, attribute, value) {\n\tdom.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @param {string} prop\n * @param {any} value\n */\nexport function set_custom_element_data(node, prop, value) {\n\t// We need to ensure that setting custom element props, which can\n\t// invoke lifecycle methods on other custom elements, does not also\n\t// associate those lifecycle methods with the current active reaction\n\t// or effect\n\tvar previous_reaction = active_reaction;\n\tvar previous_effect = active_effect;\n\n\t// If we're hydrating but the custom element is from Svelte, and it already scaffolded,\n\t// then it might run block logic in hydration mode, which we have to prevent.\n\tlet was_hydrating = hydrating;\n\tif (hydrating) {\n\t\tset_hydrating(false);\n\t}\n\n\tset_active_reaction(null);\n\tset_active_effect(null);\n\n\ttry {\n\t\tif (\n\t\t\t// `style` should use `set_attribute` rather than the setter\n\t\t\tprop !== 'style' &&\n\t\t\t// Don't compute setters for custom elements while they aren't registered yet,\n\t\t\t// because during their upgrade/instantiation they might add more setters.\n\t\t\t// Instead, fall back to a simple \"an object, then set as property\" heuristic.\n\t\t\t(setters_cache.has(node.getAttribute('is') || node.nodeName) ||\n\t\t\t// customElements may not be available in browser extension contexts\n\t\t\t!customElements ||\n\t\t\tcustomElements.get(node.getAttribute('is') || node.tagName.toLowerCase())\n\t\t\t\t? get_setters(node).includes(prop)\n\t\t\t\t: value && typeof value === 'object')\n\t\t) {\n\t\t\t// @ts-expect-error\n\t\t\tnode[prop] = value;\n\t\t} else {\n\t\t\t// We did getters etc checks already, stringify before passing to set_attribute\n\t\t\t// to ensure it doesn't invoke the same logic again, and potentially populating\n\t\t\t// the setters cache too early.\n\t\t\tset_attribute(node, prop, value == null ? value : String(value));\n\t\t}\n\t} finally {\n\t\tset_active_reaction(previous_reaction);\n\t\tset_active_effect(previous_effect);\n\t\tif (was_hydrating) {\n\t\t\tset_hydrating(true);\n\t\t}\n\t}\n}\n\n/**\n * Spreads attributes onto a DOM element, taking into account the currently set attributes\n * @param {Element & ElementCSSInlineStyle} element\n * @param {Record<string | symbol, any> | undefined} prev\n * @param {Record<string | symbol, any>} next New attributes - this function mutates this object\n * @param {string} [css_hash]\n * @param {boolean} [should_remove_defaults]\n * @param {boolean} [skip_warning]\n * @returns {Record<string, any>}\n */\nfunction set_attributes(\n\telement,\n\tprev,\n\tnext,\n\tcss_hash,\n\tshould_remove_defaults = false,\n\tskip_warning = false\n) {\n\tif (hydrating && should_remove_defaults && element.tagName === 'INPUT') {\n\t\tvar input = /** @type {HTMLInputElement} */ (element);\n\t\tvar attribute = input.type === 'checkbox' ? 'defaultChecked' : 'defaultValue';\n\n\t\tif (!(attribute in next)) {\n\t\t\tremove_input_defaults(input);\n\t\t}\n\t}\n\n\tvar attributes = get_attributes(element);\n\n\tvar is_custom_element = attributes[IS_CUSTOM_ELEMENT];\n\tvar preserve_attribute_case = !attributes[IS_HTML];\n\n\t// If we're hydrating but the custom element is from Svelte, and it already scaffolded,\n\t// then it might run block logic in hydration mode, which we have to prevent.\n\tlet is_hydrating_custom_element = hydrating && is_custom_element;\n\tif (is_hydrating_custom_element) {\n\t\tset_hydrating(false);\n\t}\n\n\tvar current = prev || {};\n\tvar is_option_element = element.tagName === 'OPTION';\n\n\tfor (var key in prev) {\n\t\tif (!(key in next)) {\n\t\t\tnext[key] = null;\n\t\t}\n\t}\n\n\tif (next.class) {\n\t\tnext.class = clsx(next.class);\n\t} else if (css_hash || next[CLASS]) {\n\t\tnext.class = null; /* force call to set_class() */\n\t}\n\n\tif (next[STYLE]) {\n\t\tnext.style ??= null; /* force call to set_style() */\n\t}\n\n\tvar setters = get_setters(element);\n\n\t// since key is captured we use const\n\tfor (const key in next) {\n\t\t// let instead of var because referenced in a closure\n\t\tlet value = next[key];\n\n\t\t// Up here because we want to do this for the initial value, too, even if it's undefined,\n\t\t// and this wouldn't be reached in case of undefined because of the equality check below\n\t\tif (is_option_element && key === 'value' && value == null) {\n\t\t\t// The <option> element is a special case because removing the value attribute means\n\t\t\t// the value is set to the text content of the option element, and setting the value\n\t\t\t// to null or undefined means the value is set to the string \"null\" or \"undefined\".\n\t\t\t// To align with how we handle this case in non-spread-scenarios, this logic is needed.\n\t\t\t// There's a super-edge-case bug here that is left in in favor of smaller code size:\n\t\t\t// Because of the \"set missing props to null\" logic above, we can't differentiate\n\t\t\t// between a missing value and an explicitly set value of null or undefined. That means\n\t\t\t// that once set, the value attribute of an <option> element can't be removed. This is\n\t\t\t// a very rare edge case, and removing the attribute altogether isn't possible either\n\t\t\t// for the <option value={undefined}> case, so we're not losing any functionality here.\n\t\t\t// @ts-ignore\n\t\t\telement.value = element.__value = '';\n\t\t\tcurrent[key] = value;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (key === 'class') {\n\t\t\tvar is_html = element.namespaceURI === 'http://www.w3.org/1999/xhtml';\n\t\t\tset_class(element, is_html, value, css_hash, prev?.[CLASS], next[CLASS]);\n\t\t\tcurrent[key] = value;\n\t\t\tcurrent[CLASS] = next[CLASS];\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (key === 'style') {\n\t\t\tset_style(element, value, prev?.[STYLE], next[STYLE]);\n\t\t\tcurrent[key] = value;\n\t\t\tcurrent[STYLE] = next[STYLE];\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar prev_value = current[key];\n\n\t\t// Skip if value is unchanged, unless it's `undefined` and the element still has the attribute\n\t\tif (value === prev_value && !(value === undefined && element.hasAttribute(key))) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tcurrent[key] = value;\n\n\t\tvar prefix = key[0] + key[1]; // this is faster than key.slice(0, 2)\n\t\tif (prefix === '$$') continue;\n\n\t\tif (prefix === 'on') {\n\t\t\t/** @type {{ capture?: true }} */\n\t\t\tconst opts = {};\n\t\t\tconst event_handle_key = '$$' + key;\n\t\t\tlet event_name = key.slice(2);\n\t\t\tvar delegated = is_delegated(event_name);\n\n\t\t\tif (is_capture_event(event_name)) {\n\t\t\t\tevent_name = event_name.slice(0, -7);\n\t\t\t\topts.capture = true;\n\t\t\t}\n\n\t\t\tif (!delegated && prev_value) {\n\t\t\t\t// Listening to same event but different handler -> our handle function below takes care of this\n\t\t\t\t// If we were to remove and add listeners in this case, it could happen that the event is \"swallowed\"\n\t\t\t\t// (the browser seems to not know yet that a new one exists now) and doesn't reach the handler\n\t\t\t\t// https://github.com/sveltejs/svelte/issues/11903\n\t\t\t\tif (value != null) continue;\n\n\t\t\t\telement.removeEventListener(event_name, current[event_handle_key], opts);\n\t\t\t\tcurrent[event_handle_key] = null;\n\t\t\t}\n\n\t\t\tif (value != null) {\n\t\t\t\tif (!delegated) {\n\t\t\t\t\t/**\n\t\t\t\t\t * @this {any}\n\t\t\t\t\t * @param {Event} evt\n\t\t\t\t\t */\n\t\t\t\t\tfunction handle(evt) {\n\t\t\t\t\t\tcurrent[key].call(this, evt);\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrent[event_handle_key] = create_event(event_name, element, handle, opts);\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\telement[`__${event_name}`] = value;\n\t\t\t\t\tdelegate([event_name]);\n\t\t\t\t}\n\t\t\t} else if (delegated) {\n\t\t\t\t// @ts-ignore\n\t\t\t\telement[`__${event_name}`] = undefined;\n\t\t\t}\n\t\t} else if (key === 'style') {\n\t\t\t// avoid using the setter\n\t\t\tset_attribute(element, key, value);\n\t\t} else if (key === 'autofocus') {\n\t\t\tautofocus(/** @type {HTMLElement} */ (element), Boolean(value));\n\t\t} else if (!is_custom_element && (key === '__value' || (key === 'value' && value != null))) {\n\t\t\t// @ts-ignore We're not running this for custom elements because __value is actually\n\t\t\t// how Lit stores the current value on the element, and messing with that would break things.\n\t\t\telement.value = element.__value = value;\n\t\t} else if (key === 'selected' && is_option_element) {\n\t\t\tset_selected(/** @type {HTMLOptionElement} */ (element), value);\n\t\t} else {\n\t\t\tvar name = key;\n\t\t\tif (!preserve_attribute_case) {\n\t\t\t\tname = normalize_attribute(name);\n\t\t\t}\n\n\t\t\tvar is_default = name === 'defaultValue' || name === 'defaultChecked';\n\n\t\t\tif (value == null && !is_custom_element && !is_default) {\n\t\t\t\tattributes[key] = null;\n\n\t\t\t\tif (name === 'value' || name === 'checked') {\n\t\t\t\t\t// removing value/checked also removes defaultValue/defaultChecked  preserve\n\t\t\t\t\tlet input = /** @type {HTMLInputElement} */ (element);\n\t\t\t\t\tconst use_default = prev === undefined;\n\t\t\t\t\tif (name === 'value') {\n\t\t\t\t\t\tlet previous = input.defaultValue;\n\t\t\t\t\t\tinput.removeAttribute(name);\n\t\t\t\t\t\tinput.defaultValue = previous;\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tinput.value = input.__value = use_default ? previous : null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet previous = input.defaultChecked;\n\t\t\t\t\t\tinput.removeAttribute(name);\n\t\t\t\t\t\tinput.defaultChecked = previous;\n\t\t\t\t\t\tinput.checked = use_default ? previous : false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\telement.removeAttribute(key);\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tis_default ||\n\t\t\t\t(setters.includes(name) && (is_custom_element || typeof value !== 'string'))\n\t\t\t) {\n\t\t\t\t// @ts-ignore\n\t\t\t\telement[name] = value;\n\t\t\t\t// remove it from attributes's cache\n\t\t\t\tif (name in attributes) attributes[name] = UNINITIALIZED;\n\t\t\t} else if (typeof value !== 'function') {\n\t\t\t\tset_attribute(element, name, value, skip_warning);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (is_hydrating_custom_element) {\n\t\tset_hydrating(true);\n\t}\n\n\treturn current;\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} element\n * @param {(...expressions: any) => Record<string | symbol, any>} fn\n * @param {Array<() => any>} sync\n * @param {Array<() => Promise<any>>} async\n * @param {string} [css_hash]\n * @param {boolean} [should_remove_defaults]\n * @param {boolean} [skip_warning]\n */\nexport function attribute_effect(\n\telement,\n\tfn,\n\tsync = [],\n\tasync = [],\n\tcss_hash,\n\tshould_remove_defaults = false,\n\tskip_warning = false\n) {\n\tflatten(sync, async, (values) => {\n\t\t/** @type {Record<string | symbol, any> | undefined} */\n\t\tvar prev = undefined;\n\n\t\t/** @type {Record<symbol, Effect>} */\n\t\tvar effects = {};\n\n\t\tvar is_select = element.nodeName === 'SELECT';\n\t\tvar inited = false;\n\n\t\tblock(() => {\n\t\t\tvar next = fn(...values.map(get));\n\t\t\t/** @type {Record<string | symbol, any>} */\n\t\t\tvar current = set_attributes(\n\t\t\t\telement,\n\t\t\t\tprev,\n\t\t\t\tnext,\n\t\t\t\tcss_hash,\n\t\t\t\tshould_remove_defaults,\n\t\t\t\tskip_warning\n\t\t\t);\n\n\t\t\tif (inited && is_select && 'value' in next) {\n\t\t\t\tselect_option(/** @type {HTMLSelectElement} */ (element), next.value);\n\t\t\t}\n\n\t\t\tfor (let symbol of Object.getOwnPropertySymbols(effects)) {\n\t\t\t\tif (!next[symbol]) destroy_effect(effects[symbol]);\n\t\t\t}\n\n\t\t\tfor (let symbol of Object.getOwnPropertySymbols(next)) {\n\t\t\t\tvar n = next[symbol];\n\n\t\t\t\tif (symbol.description === ATTACHMENT_KEY && (!prev || n !== prev[symbol])) {\n\t\t\t\t\tif (effects[symbol]) destroy_effect(effects[symbol]);\n\t\t\t\t\teffects[symbol] = branch(() => attach(element, () => n));\n\t\t\t\t}\n\n\t\t\t\tcurrent[symbol] = n;\n\t\t\t}\n\n\t\t\tprev = current;\n\t\t});\n\n\t\tif (is_select) {\n\t\t\tvar select = /** @type {HTMLSelectElement} */ (element);\n\n\t\t\teffect(() => {\n\t\t\t\tselect_option(select, /** @type {Record<string | symbol, any>} */ (prev).value, true);\n\t\t\t\tinit_select(select);\n\t\t\t});\n\t\t}\n\n\t\tinited = true;\n\t});\n}\n\n/**\n *\n * @param {Element} element\n */\nfunction get_attributes(element) {\n\treturn /** @type {Record<string | symbol, unknown>} **/ (\n\t\t// @ts-expect-error\n\t\telement.__attributes ??= {\n\t\t\t[IS_CUSTOM_ELEMENT]: element.nodeName.includes('-'),\n\t\t\t[IS_HTML]: element.namespaceURI === NAMESPACE_HTML\n\t\t}\n\t);\n}\n\n/** @type {Map<string, string[]>} */\nvar setters_cache = new Map();\n\n/** @param {Element} element */\nfunction get_setters(element) {\n\tvar cache_key = element.getAttribute('is') || element.nodeName;\n\tvar setters = setters_cache.get(cache_key);\n\tif (setters) return setters;\n\tsetters_cache.set(cache_key, (setters = []));\n\n\tvar descriptors;\n\tvar proto = element; // In the case of custom elements there might be setters on the instance\n\tvar element_proto = Element.prototype;\n\n\t// Stop at Element, from there on there's only unnecessary setters we're not interested in\n\t// Do not use contructor.name here as that's unreliable in some browser environments\n\twhile (element_proto !== proto) {\n\t\tdescriptors = get_descriptors(proto);\n\n\t\tfor (var key in descriptors) {\n\t\t\tif (descriptors[key].set) {\n\t\t\t\tsetters.push(key);\n\t\t\t}\n\t\t}\n\n\t\tproto = get_prototype_of(proto);\n\t}\n\n\treturn setters;\n}\n\n/**\n * @param {any} element\n * @param {string} attribute\n * @param {string} value\n */\nfunction check_src_in_dev_hydration(element, attribute, value) {\n\tif (!DEV) return;\n\tif (attribute === 'srcset' && srcset_url_equal(element, value)) return;\n\tif (src_url_equal(element.getAttribute(attribute) ?? '', value)) return;\n\n\tw.hydration_attribute_changed(\n\t\tattribute,\n\t\telement.outerHTML.replace(element.innerHTML, element.innerHTML && '...'),\n\t\tString(value)\n\t);\n}\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nfunction src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\treturn new URL(element_src, document.baseURI).href === new URL(url, document.baseURI).href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element\n * @param {string} srcset\n * @returns {boolean}\n */\nfunction srcset_url_equal(element, srcset) {\n\tvar element_urls = split_srcset(element.srcset);\n\tvar urls = split_srcset(srcset);\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n","/** @import { Batch } from '../../../reactivity/batch.js' */\nimport { DEV } from 'esm-env';\nimport { render_effect, teardown } from '../../../reactivity/effects.js';\nimport { listen_to_event_and_reset_event } from './shared.js';\nimport * as e from '../../../errors.js';\nimport { is } from '../../../proxy.js';\nimport { queue_micro_task } from '../../task.js';\nimport { hydrating } from '../../hydration.js';\nimport { tick, untrack } from '../../../runtime.js';\nimport { is_runes } from '../../../context.js';\nimport { current_batch, previous_batch } from '../../../reactivity/batch.js';\n\n/**\n * @param {HTMLInputElement} input\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_value(input, get, set = get) {\n\tvar batches = new WeakSet();\n\n\tlisten_to_event_and_reset_event(input, 'input', async (is_reset) => {\n\t\tif (DEV && input.type === 'checkbox') {\n\t\t\t// TODO should this happen in prod too?\n\t\t\te.bind_invalid_checkbox_value();\n\t\t}\n\n\t\t/** @type {any} */\n\t\tvar value = is_reset ? input.defaultValue : input.value;\n\t\tvalue = is_numberlike_input(input) ? to_number(value) : value;\n\t\tset(value);\n\n\t\tif (current_batch !== null) {\n\t\t\tbatches.add(current_batch);\n\t\t}\n\n\t\t// Because `{#each ...}` blocks work by updating sources inside the flush,\n\t\t// we need to wait a tick before checking to see if we should forcibly\n\t\t// update the input and reset the selection state\n\t\tawait tick();\n\n\t\t// Respect any validation in accessors\n\t\tif (value !== (value = get())) {\n\t\t\tvar start = input.selectionStart;\n\t\t\tvar end = input.selectionEnd;\n\t\t\tvar length = input.value.length;\n\n\t\t\t// the value is coerced on assignment\n\t\t\tinput.value = value ?? '';\n\n\t\t\t// Restore selection\n\t\t\tif (end !== null) {\n\t\t\t\tvar new_length = input.value.length;\n\t\t\t\t// If cursor was at end and new input is longer, move cursor to new end\n\t\t\t\tif (start === end && end === length && new_length > length) {\n\t\t\t\t\tinput.selectionStart = new_length;\n\t\t\t\t\tinput.selectionEnd = new_length;\n\t\t\t\t} else {\n\t\t\t\t\tinput.selectionStart = start;\n\t\t\t\t\tinput.selectionEnd = Math.min(end, new_length);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tif (\n\t\t// If we are hydrating and the value has since changed,\n\t\t// then use the updated value from the input instead.\n\t\t(hydrating && input.defaultValue !== input.value) ||\n\t\t// If defaultValue is set, then value == defaultValue\n\t\t// TODO Svelte 6: remove input.value check and set to empty string?\n\t\t(untrack(get) == null && input.value)\n\t) {\n\t\tset(is_numberlike_input(input) ? to_number(input.value) : input.value);\n\n\t\tif (current_batch !== null) {\n\t\t\tbatches.add(current_batch);\n\t\t}\n\t}\n\n\trender_effect(() => {\n\t\tif (DEV && input.type === 'checkbox') {\n\t\t\t// TODO should this happen in prod too?\n\t\t\te.bind_invalid_checkbox_value();\n\t\t}\n\n\t\tvar value = get();\n\n\t\tif (input === document.activeElement) {\n\t\t\t// we need both, because in non-async mode, render effects run before previous_batch is set\n\t\t\tvar batch = /** @type {Batch} */ (previous_batch ?? current_batch);\n\n\t\t\t// Never rewrite the contents of a focused input. We can get here if, for example,\n\t\t\t// an update is deferred because of async work depending on the input:\n\t\t\t//\n\t\t\t// <input bind:value={query}>\n\t\t\t// <p>{await find(query)}</p>\n\t\t\tif (batches.has(batch)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (is_numberlike_input(input) && value === to_number(input.value)) {\n\t\t\t// handles 0 vs 00 case (see https://github.com/sveltejs/svelte/issues/9959)\n\t\t\treturn;\n\t\t}\n\n\t\tif (input.type === 'date' && !value && !input.value) {\n\t\t\t// Handles the case where a temporarily invalid date is set (while typing, for example with a leading 0 for the day)\n\t\t\t// and prevents this state from clearing the other parts of the date input (see https://github.com/sveltejs/svelte/issues/7897)\n\t\t\treturn;\n\t\t}\n\n\t\t// don't set the value of the input if it's the same to allow\n\t\t// minlength to work properly\n\t\tif (value !== input.value) {\n\t\t\t// @ts-expect-error the value is coerced on assignment\n\t\t\tinput.value = value ?? '';\n\t\t}\n\t});\n}\n\n/** @type {Set<HTMLInputElement[]>} */\nconst pending = new Set();\n\n/**\n * @param {HTMLInputElement[]} inputs\n * @param {null | [number]} group_index\n * @param {HTMLInputElement} input\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_group(inputs, group_index, input, get, set = get) {\n\tvar is_checkbox = input.getAttribute('type') === 'checkbox';\n\tvar binding_group = inputs;\n\n\t// needs to be let or related code isn't treeshaken out if it's always false\n\tlet hydration_mismatch = false;\n\n\tif (group_index !== null) {\n\t\tfor (var index of group_index) {\n\t\t\t// @ts-expect-error\n\t\t\tbinding_group = binding_group[index] ??= [];\n\t\t}\n\t}\n\n\tbinding_group.push(input);\n\n\tlisten_to_event_and_reset_event(\n\t\tinput,\n\t\t'change',\n\t\t() => {\n\t\t\t// @ts-ignore\n\t\t\tvar value = input.__value;\n\n\t\t\tif (is_checkbox) {\n\t\t\t\tvalue = get_binding_group_value(binding_group, value, input.checked);\n\t\t\t}\n\n\t\t\tset(value);\n\t\t},\n\t\t// TODO better default value handling\n\t\t() => set(is_checkbox ? [] : null)\n\t);\n\n\trender_effect(() => {\n\t\tvar value = get();\n\n\t\t// If we are hydrating and the value has since changed, then use the update value\n\t\t// from the input instead.\n\t\tif (hydrating && input.defaultChecked !== input.checked) {\n\t\t\thydration_mismatch = true;\n\t\t\treturn;\n\t\t}\n\n\t\tif (is_checkbox) {\n\t\t\tvalue = value || [];\n\t\t\t// @ts-ignore\n\t\t\tinput.checked = value.includes(input.__value);\n\t\t} else {\n\t\t\t// @ts-ignore\n\t\t\tinput.checked = is(input.__value, value);\n\t\t}\n\t});\n\n\tteardown(() => {\n\t\tvar index = binding_group.indexOf(input);\n\n\t\tif (index !== -1) {\n\t\t\tbinding_group.splice(index, 1);\n\t\t}\n\t});\n\n\tif (!pending.has(binding_group)) {\n\t\tpending.add(binding_group);\n\n\t\tqueue_micro_task(() => {\n\t\t\t// necessary to maintain binding group order in all insertion scenarios\n\t\t\tbinding_group.sort((a, b) => (a.compareDocumentPosition(b) === 4 ? -1 : 1));\n\t\t\tpending.delete(binding_group);\n\t\t});\n\t}\n\n\tqueue_micro_task(() => {\n\t\tif (hydration_mismatch) {\n\t\t\tvar value;\n\n\t\t\tif (is_checkbox) {\n\t\t\t\tvalue = get_binding_group_value(binding_group, value, input.checked);\n\t\t\t} else {\n\t\t\t\tvar hydration_input = binding_group.find((input) => input.checked);\n\t\t\t\t// @ts-ignore\n\t\t\t\tvalue = hydration_input?.__value;\n\t\t\t}\n\n\t\t\tset(value);\n\t\t}\n\t});\n}\n\n/**\n * @param {HTMLInputElement} input\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_checked(input, get, set = get) {\n\tlisten_to_event_and_reset_event(input, 'change', (is_reset) => {\n\t\tvar value = is_reset ? input.defaultChecked : input.checked;\n\t\tset(value);\n\t});\n\n\tif (\n\t\t// If we are hydrating and the value has since changed,\n\t\t// then use the update value from the input instead.\n\t\t(hydrating && input.defaultChecked !== input.checked) ||\n\t\t// If defaultChecked is set, then checked == defaultChecked\n\t\tuntrack(get) == null\n\t) {\n\t\tset(input.checked);\n\t}\n\n\trender_effect(() => {\n\t\tvar value = get();\n\t\tinput.checked = Boolean(value);\n\t});\n}\n\n/**\n * @template V\n * @param {Array<HTMLInputElement>} group\n * @param {V} __value\n * @param {boolean} checked\n * @returns {V[]}\n */\nfunction get_binding_group_value(group, __value, checked) {\n\t/** @type {Set<V>} */\n\tvar value = new Set();\n\n\tfor (var i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) {\n\t\t\t// @ts-ignore\n\t\t\tvalue.add(group[i].__value);\n\t\t}\n\t}\n\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement} input\n */\nfunction is_numberlike_input(input) {\n\tvar type = input.type;\n\treturn type === 'number' || type === 'range';\n}\n\n/**\n * @param {string} value\n */\nfunction to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/**\n * @param {HTMLInputElement} input\n * @param {() => FileList | null} get\n * @param {(value: FileList | null) => void} set\n */\nexport function bind_files(input, get, set = get) {\n\tlisten_to_event_and_reset_event(input, 'change', () => {\n\t\tset(input.files);\n\t});\n\n\tif (\n\t\t// If we are hydrating and the value has since changed,\n\t\t// then use the updated value from the input instead.\n\t\thydrating &&\n\t\tinput.files\n\t) {\n\t\tset(input.files);\n\t}\n\n\trender_effect(() => {\n\t\tinput.files = get();\n\t});\n}\n","import { effect, teardown } from '../../../reactivity/effects.js';\nimport { untrack } from '../../../runtime.js';\n\n/**\n * Resize observer singleton.\n * One listener per element only!\n * https://groups.google.com/a/chromium.org/g/blink-dev/c/z6ienONUb5A/m/F5-VcUZtBAAJ\n */\nclass ResizeObserverSingleton {\n\t/** */\n\t#listeners = new WeakMap();\n\n\t/** @type {ResizeObserver | undefined} */\n\t#observer;\n\n\t/** @type {ResizeObserverOptions} */\n\t#options;\n\n\t/** @static */\n\tstatic entries = new WeakMap();\n\n\t/** @param {ResizeObserverOptions} options */\n\tconstructor(options) {\n\t\tthis.#options = options;\n\t}\n\n\t/**\n\t * @param {Element} element\n\t * @param {(entry: ResizeObserverEntry) => any} listener\n\t */\n\tobserve(element, listener) {\n\t\tvar listeners = this.#listeners.get(element) || new Set();\n\t\tlisteners.add(listener);\n\n\t\tthis.#listeners.set(element, listeners);\n\t\tthis.#getObserver().observe(element, this.#options);\n\n\t\treturn () => {\n\t\t\tvar listeners = this.#listeners.get(element);\n\t\t\tlisteners.delete(listener);\n\n\t\t\tif (listeners.size === 0) {\n\t\t\t\tthis.#listeners.delete(element);\n\t\t\t\t/** @type {ResizeObserver} */ (this.#observer).unobserve(element);\n\t\t\t}\n\t\t};\n\t}\n\n\t#getObserver() {\n\t\treturn (\n\t\t\tthis.#observer ??\n\t\t\t(this.#observer = new ResizeObserver(\n\t\t\t\t/** @param {any} entries */ (entries) => {\n\t\t\t\t\tfor (var entry of entries) {\n\t\t\t\t\t\tResizeObserverSingleton.entries.set(entry.target, entry);\n\t\t\t\t\t\tfor (var listener of this.#listeners.get(entry.target) || []) {\n\t\t\t\t\t\t\tlistener(entry);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t))\n\t\t);\n\t}\n}\n\nvar resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'content-box'\n});\n\nvar resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'border-box'\n});\n\nvar resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'device-pixel-content-box'\n});\n\n/**\n * @param {Element} element\n * @param {'contentRect' | 'contentBoxSize' | 'borderBoxSize' | 'devicePixelContentBoxSize'} type\n * @param {(entry: keyof ResizeObserverEntry) => void} set\n */\nexport function bind_resize_observer(element, type, set) {\n\tvar observer =\n\t\ttype === 'contentRect' || type === 'contentBoxSize'\n\t\t\t? resize_observer_content_box\n\t\t\t: type === 'borderBoxSize'\n\t\t\t\t? resize_observer_border_box\n\t\t\t\t: resize_observer_device_pixel_content_box;\n\n\tvar unsub = observer.observe(element, /** @param {any} entry */ (entry) => set(entry[type]));\n\tteardown(unsub);\n}\n\n/**\n * @param {HTMLElement} element\n * @param {'clientWidth' | 'clientHeight' | 'offsetWidth' | 'offsetHeight'} type\n * @param {(size: number) => void} set\n */\nexport function bind_element_size(element, type, set) {\n\tvar unsub = resize_observer_border_box.observe(element, () => set(element[type]));\n\n\teffect(() => {\n\t\t// The update could contain reads which should be ignored\n\t\tuntrack(() => set(element[type]));\n\t\treturn unsub;\n\t});\n}\n","import { STATE_SYMBOL } from '#client/constants';\nimport { effect, render_effect } from '../../../reactivity/effects.js';\nimport { untrack } from '../../../runtime.js';\nimport { queue_micro_task } from '../../task.js';\n\n/**\n * @param {any} bound_value\n * @param {Element} element_or_component\n * @returns {boolean}\n */\nfunction is_bound_this(bound_value, element_or_component) {\n\treturn (\n\t\tbound_value === element_or_component || bound_value?.[STATE_SYMBOL] === element_or_component\n\t);\n}\n\n/**\n * @param {any} element_or_component\n * @param {(value: unknown, ...parts: unknown[]) => void} update\n * @param {(...parts: unknown[]) => unknown} get_value\n * @param {() => unknown[]} [get_parts] Set if the this binding is used inside an each block,\n * \t\t\t\t\t\t\t\t\t\treturns all the parts of the each block context that are used in the expression\n * @returns {void}\n */\nexport function bind_this(element_or_component = {}, update, get_value, get_parts) {\n\teffect(() => {\n\t\t/** @type {unknown[]} */\n\t\tvar old_parts;\n\n\t\t/** @type {unknown[]} */\n\t\tvar parts;\n\n\t\trender_effect(() => {\n\t\t\told_parts = parts;\n\t\t\t// We only track changes to the parts, not the value itself to avoid unnecessary reruns.\n\t\t\tparts = get_parts?.() || [];\n\n\t\t\tuntrack(() => {\n\t\t\t\tif (element_or_component !== get_value(...parts)) {\n\t\t\t\t\tupdate(element_or_component, ...parts);\n\t\t\t\t\t// If this is an effect rerun (cause: each block context changes), then nullfiy the binding at\n\t\t\t\t\t// the previous position if it isn't already taken over by a different effect.\n\t\t\t\t\tif (old_parts && is_bound_this(get_value(...old_parts), element_or_component)) {\n\t\t\t\t\t\tupdate(null, ...old_parts);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\treturn () => {\n\t\t\t// We cannot use effects in the teardown phase, we we use a microtask instead.\n\t\t\tqueue_micro_task(() => {\n\t\t\t\tif (parts && is_bound_this(get_value(...parts), element_or_component)) {\n\t\t\t\t\tupdate(null, ...parts);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t});\n\n\treturn element_or_component;\n}\n","/** @import { Readable } from './public' */\nimport { untrack } from '../index-client.js';\nimport { noop } from '../internal/shared/utils.js';\n\n/**\n * @template T\n * @param {Readable<T> | null | undefined} store\n * @param {(value: T) => void} run\n * @param {(value: T) => void} [invalidate]\n * @returns {() => void}\n */\nexport function subscribe_to_store(store, run, invalidate) {\n\tif (store == null) {\n\t\t// @ts-expect-error\n\t\trun(undefined);\n\n\t\t// @ts-expect-error\n\t\tif (invalidate) invalidate(undefined);\n\n\t\treturn noop;\n\t}\n\n\t// Svelte store takes a private second argument\n\t// StartStopNotifier could mutate state, and we want to silence the corresponding validation error\n\tconst unsub = untrack(() =>\n\t\tstore.subscribe(\n\t\t\trun,\n\t\t\t// @ts-expect-error\n\t\t\tinvalidate\n\t\t)\n\t);\n\n\t// Also support RxJS\n\t// @ts-expect-error TODO fix this in the types?\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n","/** @import { Readable, StartStopNotifier, Subscriber, Unsubscriber, Updater, Writable } from '../public.js' */\n/** @import { Stores, StoresValues, SubscribeInvalidateTuple } from '../private.js' */\nimport { noop, run_all } from '../../internal/shared/utils.js';\nimport { safe_not_equal } from '../../internal/client/reactivity/equality.js';\nimport { subscribe_to_store } from '../utils.js';\n\n/**\n * @type {Array<SubscribeInvalidateTuple<any> | any>}\n */\nconst subscriber_queue = [];\n\n/**\n * Creates a `Readable` store that allows reading by subscription.\n *\n * @template T\n * @param {T} [value] initial value\n * @param {StartStopNotifier<T>} [start]\n * @returns {Readable<T>}\n */\nexport function readable(value, start) {\n\treturn {\n\t\tsubscribe: writable(value, start).subscribe\n\t};\n}\n\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n *\n * @template T\n * @param {T} [value] initial value\n * @param {StartStopNotifier<T>} [start]\n * @returns {Writable<T>}\n */\nexport function writable(value, start = noop) {\n\t/** @type {Unsubscriber | null} */\n\tlet stop = null;\n\n\t/** @type {Set<SubscribeInvalidateTuple<T>>} */\n\tconst subscribers = new Set();\n\n\t/**\n\t * @param {T} new_value\n\t * @returns {void}\n\t */\n\tfunction set(new_value) {\n\t\tif (safe_not_equal(value, new_value)) {\n\t\t\tvalue = new_value;\n\t\t\tif (stop) {\n\t\t\t\t// store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (const subscriber of subscribers) {\n\t\t\t\t\tsubscriber[1]();\n\t\t\t\t\tsubscriber_queue.push(subscriber, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {Updater<T>} fn\n\t * @returns {void}\n\t */\n\tfunction update(fn) {\n\t\tset(fn(/** @type {T} */ (value)));\n\t}\n\n\t/**\n\t * @param {Subscriber<T>} run\n\t * @param {() => void} [invalidate]\n\t * @returns {Unsubscriber}\n\t */\n\tfunction subscribe(run, invalidate = noop) {\n\t\t/** @type {SubscribeInvalidateTuple<T>} */\n\t\tconst subscriber = [run, invalidate];\n\t\tsubscribers.add(subscriber);\n\t\tif (subscribers.size === 1) {\n\t\t\tstop = start(set, update) || noop;\n\t\t}\n\t\trun(/** @type {T} */ (value));\n\t\treturn () => {\n\t\t\tsubscribers.delete(subscriber);\n\t\t\tif (subscribers.size === 0 && stop) {\n\t\t\t\tstop();\n\t\t\t\tstop = null;\n\t\t\t}\n\t\t};\n\t}\n\treturn { set, update, subscribe };\n}\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * @template {Stores} S\n * @template T\n * @overload\n * @param {S} stores\n * @param {(values: StoresValues<S>, set: (value: T) => void, update: (fn: Updater<T>) => void) => Unsubscriber | void} fn\n * @param {T} [initial_value]\n * @returns {Readable<T>}\n */\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * @template {Stores} S\n * @template T\n * @overload\n * @param {S} stores\n * @param {(values: StoresValues<S>) => T} fn\n * @param {T} [initial_value]\n * @returns {Readable<T>}\n */\n/**\n * @template {Stores} S\n * @template T\n * @param {S} stores\n * @param {Function} fn\n * @param {T} [initial_value]\n * @returns {Readable<T>}\n */\nexport function derived(stores, fn, initial_value) {\n\tconst single = !Array.isArray(stores);\n\t/** @type {Array<Readable<any>>} */\n\tconst stores_array = single ? [stores] : stores;\n\tif (!stores_array.every(Boolean)) {\n\t\tthrow new Error('derived() expects stores as input, got a falsy value');\n\t}\n\tconst auto = fn.length < 2;\n\treturn readable(initial_value, (set, update) => {\n\t\tlet started = false;\n\t\t/** @type {T[]} */\n\t\tconst values = [];\n\t\tlet pending = 0;\n\t\tlet cleanup = noop;\n\t\tconst sync = () => {\n\t\t\tif (pending) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcleanup();\n\t\t\tconst result = fn(single ? values[0] : values, set, update);\n\t\t\tif (auto) {\n\t\t\t\tset(result);\n\t\t\t} else {\n\t\t\t\tcleanup = typeof result === 'function' ? result : noop;\n\t\t\t}\n\t\t};\n\t\tconst unsubscribers = stores_array.map((store, i) =>\n\t\t\tsubscribe_to_store(\n\t\t\t\tstore,\n\t\t\t\t(value) => {\n\t\t\t\t\tvalues[i] = value;\n\t\t\t\t\tpending &= ~(1 << i);\n\t\t\t\t\tif (started) {\n\t\t\t\t\t\tsync();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tpending |= 1 << i;\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tstarted = true;\n\t\tsync();\n\t\treturn function stop() {\n\t\t\trun_all(unsubscribers);\n\t\t\tcleanup();\n\t\t\t// We need to set this to false because callbacks can still happen despite having unsubscribed:\n\t\t\t// Callbacks might already be placed in the queue which doesn't know it should no longer\n\t\t\t// invoke this derived store.\n\t\t\tstarted = false;\n\t\t};\n\t});\n}\n\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * @template T\n * @param {Readable<T>} store  - store to make readonly\n * @returns {Readable<T>}\n */\nexport function readonly(store) {\n\treturn {\n\t\t// @ts-expect-error TODO i suspect the bind is unnecessary\n\t\tsubscribe: store.subscribe.bind(store)\n\t};\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * @template T\n * @param {Readable<T>} store\n * @returns {T}\n */\nexport function get(store) {\n\tlet value;\n\tsubscribe_to_store(store, (_) => (value = _))();\n\t// @ts-expect-error\n\treturn value;\n}\n","/** @import { StoreReferencesContainer } from '#client' */\n/** @import { Store } from '#shared' */\nimport { subscribe_to_store } from '../../../store/utils.js';\nimport { get as get_store } from '../../../store/shared/index.js';\nimport { define_property, noop } from '../../shared/utils.js';\nimport { get } from '../runtime.js';\nimport { teardown } from './effects.js';\nimport { mutable_source, set } from './sources.js';\nimport { DEV } from 'esm-env';\n\n/**\n * Whether or not the prop currently being read is a store binding, as in\n * `<Child bind:x={$y} />`. If it is, we treat the prop as mutable even in\n * runes mode, and skip `binding_property_non_reactive` validation\n */\nlet is_store_binding = false;\n\nlet IS_UNMOUNTED = Symbol();\n\n/**\n * Gets the current value of a store. If the store isn't subscribed to yet, it will create a proxy\n * signal that will be updated when the store is. The store references container is needed to\n * track reassignments to stores and to track the correct component context.\n * @template V\n * @param {Store<V> | null | undefined} store\n * @param {string} store_name\n * @param {StoreReferencesContainer} stores\n * @returns {V}\n */\nexport function store_get(store, store_name, stores) {\n\tconst entry = (stores[store_name] ??= {\n\t\tstore: null,\n\t\tsource: mutable_source(undefined),\n\t\tunsubscribe: noop\n\t});\n\n\tif (DEV) {\n\t\tentry.source.label = store_name;\n\t}\n\n\t// if the component that setup this is already unmounted we don't want to register a subscription\n\tif (entry.store !== store && !(IS_UNMOUNTED in stores)) {\n\t\tentry.unsubscribe();\n\t\tentry.store = store ?? null;\n\n\t\tif (store == null) {\n\t\t\tentry.source.v = undefined; // see synchronous callback comment below\n\t\t\tentry.unsubscribe = noop;\n\t\t} else {\n\t\t\tvar is_synchronous_callback = true;\n\n\t\t\tentry.unsubscribe = subscribe_to_store(store, (v) => {\n\t\t\t\tif (is_synchronous_callback) {\n\t\t\t\t\t// If the first updates to the store value (possibly multiple of them) are synchronously\n\t\t\t\t\t// inside a derived, we will hit the `state_unsafe_mutation` error if we `set` the value\n\t\t\t\t\tentry.source.v = v;\n\t\t\t\t} else {\n\t\t\t\t\tset(entry.source, v);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tis_synchronous_callback = false;\n\t\t}\n\t}\n\n\t// if the component that setup this stores is already unmounted the source will be out of sync\n\t// so we just use the `get` for the stores, less performant but it avoids to create a memory leak\n\t// and it will keep the value consistent\n\tif (store && IS_UNMOUNTED in stores) {\n\t\treturn get_store(store);\n\t}\n\n\treturn get(entry.source);\n}\n\n/**\n * Unsubscribe from a store if it's not the same as the one in the store references container.\n * We need this in addition to `store_get` because someone could unsubscribe from a store but\n * then never subscribe to the new one (if any), causing the subscription to stay open wrongfully.\n * @param {Store<any> | null | undefined} store\n * @param {string} store_name\n * @param {StoreReferencesContainer} stores\n */\nexport function store_unsub(store, store_name, stores) {\n\t/** @type {StoreReferencesContainer[''] | undefined} */\n\tlet entry = stores[store_name];\n\n\tif (entry && entry.store !== store) {\n\t\t// Don't reset store yet, so that store_get above can resubscribe to new store if necessary\n\t\tentry.unsubscribe();\n\t\tentry.unsubscribe = noop;\n\t}\n\n\treturn store;\n}\n\n/**\n * Sets the new value of a store and returns that value.\n * @template V\n * @param {Store<V>} store\n * @param {V} value\n * @returns {V}\n */\nexport function store_set(store, value) {\n\tstore.set(value);\n\treturn value;\n}\n\n/**\n * @param {StoreReferencesContainer} stores\n * @param {string} store_name\n */\nexport function invalidate_store(stores, store_name) {\n\tvar entry = stores[store_name];\n\tif (entry.store !== null) {\n\t\tstore_set(entry.store, entry.source.v);\n\t}\n}\n\n/**\n * Unsubscribes from all auto-subscribed stores on destroy\n * @returns {[StoreReferencesContainer, ()=>void]}\n */\nexport function setup_stores() {\n\t/** @type {StoreReferencesContainer} */\n\tconst stores = {};\n\n\tfunction cleanup() {\n\t\tteardown(() => {\n\t\t\tfor (var store_name in stores) {\n\t\t\t\tconst ref = stores[store_name];\n\t\t\t\tref.unsubscribe();\n\t\t\t}\n\t\t\tdefine_property(stores, IS_UNMOUNTED, {\n\t\t\t\tenumerable: false,\n\t\t\t\tvalue: true\n\t\t\t});\n\t\t});\n\t}\n\n\treturn [stores, cleanup];\n}\n\n/**\n * Updates a store with a new value.\n * @param {Store<V>} store  the store to update\n * @param {any} expression  the expression that mutates the store\n * @param {V} new_value  the new store value\n * @template V\n */\nexport function store_mutate(store, expression, new_value) {\n\tstore.set(new_value);\n\treturn expression;\n}\n\n/**\n * @param {Store<number>} store\n * @param {number} store_value\n * @param {1 | -1} [d]\n * @returns {number}\n */\nexport function update_store(store, store_value, d = 1) {\n\tstore.set(store_value + d);\n\treturn store_value;\n}\n\n/**\n * @param {Store<number>} store\n * @param {number} store_value\n * @param {1 | -1} [d]\n * @returns {number}\n */\nexport function update_pre_store(store, store_value, d = 1) {\n\tconst value = store_value + d;\n\tstore.set(value);\n\treturn value;\n}\n\n/**\n * Called inside prop getters to communicate that the prop is a store binding\n */\nexport function mark_store_binding() {\n\tis_store_binding = true;\n}\n\n/**\n * Returns a tuple that indicates whether `fn()` reads a prop that is a store binding.\n * Used to prevent `binding_property_non_reactive` validation false positives and\n * ensure that these props are treated as mutable even in runes mode\n * @template T\n * @param {() => T} fn\n * @returns {[T, boolean]}\n */\nexport function capture_store_binding(fn) {\n\tvar previous_is_store_binding = is_store_binding;\n\n\ttry {\n\t\tis_store_binding = false;\n\t\treturn [fn(), is_store_binding];\n\t} finally {\n\t\tis_store_binding = previous_is_store_binding;\n\t}\n}\n","/** @import { Effect, Source } from './types.js' */\nimport { DEV } from 'esm-env';\nimport {\n\tPROPS_IS_BINDABLE,\n\tPROPS_IS_IMMUTABLE,\n\tPROPS_IS_LAZY_INITIAL,\n\tPROPS_IS_RUNES,\n\tPROPS_IS_UPDATED\n} from '../../../constants.js';\nimport { get_descriptor, is_function } from '../../shared/utils.js';\nimport { set, source, update } from './sources.js';\nimport { derived, derived_safe_equal } from './deriveds.js';\nimport {\n\tactive_effect,\n\tget,\n\tis_destroying_effect,\n\tset_active_effect,\n\tuntrack\n} from '../runtime.js';\nimport * as e from '../errors.js';\nimport { DESTROYED, LEGACY_PROPS, STATE_SYMBOL } from '#client/constants';\nimport { proxy } from '../proxy.js';\nimport { capture_store_binding } from './store.js';\nimport { legacy_mode_flag } from '../../flags/index.js';\n\n/**\n * @param {((value?: number) => number)} fn\n * @param {1 | -1} [d]\n * @returns {number}\n */\nexport function update_prop(fn, d = 1) {\n\tconst value = fn();\n\tfn(value + d);\n\treturn value;\n}\n\n/**\n * @param {((value?: number) => number)} fn\n * @param {1 | -1} [d]\n * @returns {number}\n */\nexport function update_pre_prop(fn, d = 1) {\n\tconst value = fn() + d;\n\tfn(value);\n\treturn value;\n}\n\n/**\n * The proxy handler for rest props (i.e. `const { x, ...rest } = $props()`).\n * Is passed the full `$$props` object and excludes the named props.\n * @type {ProxyHandler<{ props: Record<string | symbol, unknown>, exclude: Array<string | symbol>, name?: string }>}}\n */\nconst rest_props_handler = {\n\tget(target, key) {\n\t\tif (target.exclude.includes(key)) return;\n\t\treturn target.props[key];\n\t},\n\tset(target, key) {\n\t\tif (DEV) {\n\t\t\t// TODO should this happen in prod too?\n\t\t\te.props_rest_readonly(`${target.name}.${String(key)}`);\n\t\t}\n\n\t\treturn false;\n\t},\n\tgetOwnPropertyDescriptor(target, key) {\n\t\tif (target.exclude.includes(key)) return;\n\t\tif (key in target.props) {\n\t\t\treturn {\n\t\t\t\tenumerable: true,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: target.props[key]\n\t\t\t};\n\t\t}\n\t},\n\thas(target, key) {\n\t\tif (target.exclude.includes(key)) return false;\n\t\treturn key in target.props;\n\t},\n\townKeys(target) {\n\t\treturn Reflect.ownKeys(target.props).filter((key) => !target.exclude.includes(key));\n\t}\n};\n\n/**\n * @param {Record<string, unknown>} props\n * @param {string[]} exclude\n * @param {string} [name]\n * @returns {Record<string, unknown>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function rest_props(props, exclude, name) {\n\treturn new Proxy(\n\t\tDEV ? { props, exclude, name, other: {}, to_proxy: [] } : { props, exclude },\n\t\trest_props_handler\n\t);\n}\n\n/**\n * The proxy handler for legacy $$restProps and $$props\n * @type {ProxyHandler<{ props: Record<string | symbol, unknown>, exclude: Array<string | symbol>, special: Record<string | symbol, (v?: unknown) => unknown>, version: Source<number>, parent_effect: Effect }>}}\n */\nconst legacy_rest_props_handler = {\n\tget(target, key) {\n\t\tif (target.exclude.includes(key)) return;\n\t\tget(target.version);\n\t\treturn key in target.special ? target.special[key]() : target.props[key];\n\t},\n\tset(target, key, value) {\n\t\tif (!(key in target.special)) {\n\t\t\tvar previous_effect = active_effect;\n\n\t\t\ttry {\n\t\t\t\tset_active_effect(target.parent_effect);\n\n\t\t\t\t// Handle props that can temporarily get out of sync with the parent\n\t\t\t\t/** @type {Record<string, (v?: unknown) => unknown>} */\n\t\t\t\ttarget.special[key] = prop(\n\t\t\t\t\t{\n\t\t\t\t\t\tget [key]() {\n\t\t\t\t\t\t\treturn target.props[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t/** @type {string} */ (key),\n\t\t\t\t\tPROPS_IS_UPDATED\n\t\t\t\t);\n\t\t\t} finally {\n\t\t\t\tset_active_effect(previous_effect);\n\t\t\t}\n\t\t}\n\n\t\ttarget.special[key](value);\n\t\tupdate(target.version); // $$props is coarse-grained: when $$props.x is updated, usages of $$props.y etc are also rerun\n\t\treturn true;\n\t},\n\tgetOwnPropertyDescriptor(target, key) {\n\t\tif (target.exclude.includes(key)) return;\n\t\tif (key in target.props) {\n\t\t\treturn {\n\t\t\t\tenumerable: true,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: target.props[key]\n\t\t\t};\n\t\t}\n\t},\n\tdeleteProperty(target, key) {\n\t\t// Svelte 4 allowed for deletions on $$restProps\n\t\tif (target.exclude.includes(key)) return true;\n\t\ttarget.exclude.push(key);\n\t\tupdate(target.version);\n\t\treturn true;\n\t},\n\thas(target, key) {\n\t\tif (target.exclude.includes(key)) return false;\n\t\treturn key in target.props;\n\t},\n\townKeys(target) {\n\t\treturn Reflect.ownKeys(target.props).filter((key) => !target.exclude.includes(key));\n\t}\n};\n\n/**\n * @param {Record<string, unknown>} props\n * @param {string[]} exclude\n * @returns {Record<string, unknown>}\n */\nexport function legacy_rest_props(props, exclude) {\n\treturn new Proxy(\n\t\t{\n\t\t\tprops,\n\t\t\texclude,\n\t\t\tspecial: {},\n\t\t\tversion: source(0),\n\t\t\t// TODO this is only necessary because we need to track component\n\t\t\t// destruction inside `prop`, because of `bind:this`, but it\n\t\t\t// seems likely that we can simplify `bind:this` instead\n\t\t\tparent_effect: /** @type {Effect} */ (active_effect)\n\t\t},\n\t\tlegacy_rest_props_handler\n\t);\n}\n\n/**\n * The proxy handler for spread props. Handles the incoming array of props\n * that looks like `() => { dynamic: props }, { static: prop }, ..` and wraps\n * them so that the whole thing is passed to the component as the `$$props` argument.\n * @type {ProxyHandler<{ props: Array<Record<string | symbol, unknown> | (() => Record<string | symbol, unknown>)> }>}}\n */\nconst spread_props_handler = {\n\tget(target, key) {\n\t\tlet i = target.props.length;\n\t\twhile (i--) {\n\t\t\tlet p = target.props[i];\n\t\t\tif (is_function(p)) p = p();\n\t\t\tif (typeof p === 'object' && p !== null && key in p) return p[key];\n\t\t}\n\t},\n\tset(target, key, value) {\n\t\tlet i = target.props.length;\n\t\twhile (i--) {\n\t\t\tlet p = target.props[i];\n\t\t\tif (is_function(p)) p = p();\n\t\t\tconst desc = get_descriptor(p, key);\n\t\t\tif (desc && desc.set) {\n\t\t\t\tdesc.set(value);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\tgetOwnPropertyDescriptor(target, key) {\n\t\tlet i = target.props.length;\n\t\twhile (i--) {\n\t\t\tlet p = target.props[i];\n\t\t\tif (is_function(p)) p = p();\n\t\t\tif (typeof p === 'object' && p !== null && key in p) {\n\t\t\t\tconst descriptor = get_descriptor(p, key);\n\t\t\t\tif (descriptor && !descriptor.configurable) {\n\t\t\t\t\t// Prevent a \"Non-configurability Report Error\": The target is an array, it does\n\t\t\t\t\t// not actually contain this property. If it is now described as non-configurable,\n\t\t\t\t\t// the proxy throws a validation error. Setting it to true avoids that.\n\t\t\t\t\tdescriptor.configurable = true;\n\t\t\t\t}\n\t\t\t\treturn descriptor;\n\t\t\t}\n\t\t}\n\t},\n\thas(target, key) {\n\t\t// To prevent a false positive `is_entry_props` in the `prop` function\n\t\tif (key === STATE_SYMBOL || key === LEGACY_PROPS) return false;\n\n\t\tfor (let p of target.props) {\n\t\t\tif (is_function(p)) p = p();\n\t\t\tif (p != null && key in p) return true;\n\t\t}\n\n\t\treturn false;\n\t},\n\townKeys(target) {\n\t\t/** @type {Array<string | symbol>} */\n\t\tconst keys = [];\n\n\t\tfor (let p of target.props) {\n\t\t\tif (is_function(p)) p = p();\n\t\t\tif (!p) continue;\n\n\t\t\tfor (const key in p) {\n\t\t\t\tif (!keys.includes(key)) keys.push(key);\n\t\t\t}\n\n\t\t\tfor (const key of Object.getOwnPropertySymbols(p)) {\n\t\t\t\tif (!keys.includes(key)) keys.push(key);\n\t\t\t}\n\t\t}\n\n\t\treturn keys;\n\t}\n};\n\n/**\n * @param {Array<Record<string, unknown> | (() => Record<string, unknown>)>} props\n * @returns {any}\n */\nexport function spread_props(...props) {\n\treturn new Proxy({ props }, spread_props_handler);\n}\n\n/**\n * This function is responsible for synchronizing a possibly bound prop with the inner component state.\n * It is used whenever the compiler sees that the component writes to the prop, or when it has a default prop_value.\n * @template V\n * @param {Record<string, unknown>} props\n * @param {string} key\n * @param {number} flags\n * @param {V | (() => V)} [fallback]\n * @returns {(() => V | ((arg: V) => V) | ((arg: V, mutation: boolean) => V))}\n */\nexport function prop(props, key, flags, fallback) {\n\tvar runes = !legacy_mode_flag || (flags & PROPS_IS_RUNES) !== 0;\n\tvar bindable = (flags & PROPS_IS_BINDABLE) !== 0;\n\tvar lazy = (flags & PROPS_IS_LAZY_INITIAL) !== 0;\n\n\tvar fallback_value = /** @type {V} */ (fallback);\n\tvar fallback_dirty = true;\n\n\tvar get_fallback = () => {\n\t\tif (fallback_dirty) {\n\t\t\tfallback_dirty = false;\n\n\t\t\tfallback_value = lazy\n\t\t\t\t? untrack(/** @type {() => V} */ (fallback))\n\t\t\t\t: /** @type {V} */ (fallback);\n\t\t}\n\n\t\treturn fallback_value;\n\t};\n\n\t/** @type {((v: V) => void) | undefined} */\n\tvar setter;\n\n\tif (bindable) {\n\t\t// Can be the case when someone does `mount(Component, props)` with `let props = $state({...})`\n\t\t// or `createClassComponent(Component, props)`\n\t\tvar is_entry_props = STATE_SYMBOL in props || LEGACY_PROPS in props;\n\n\t\tsetter =\n\t\t\tget_descriptor(props, key)?.set ??\n\t\t\t(is_entry_props && key in props ? (v) => (props[key] = v) : undefined);\n\t}\n\n\tvar initial_value;\n\tvar is_store_sub = false;\n\n\tif (bindable) {\n\t\t[initial_value, is_store_sub] = capture_store_binding(() => /** @type {V} */ (props[key]));\n\t} else {\n\t\tinitial_value = /** @type {V} */ (props[key]);\n\t}\n\n\tif (initial_value === undefined && fallback !== undefined) {\n\t\tinitial_value = get_fallback();\n\n\t\tif (setter) {\n\t\t\tif (runes) e.props_invalid_value(key);\n\t\t\tsetter(initial_value);\n\t\t}\n\t}\n\n\t/** @type {() => V} */\n\tvar getter;\n\n\tif (runes) {\n\t\tgetter = () => {\n\t\t\tvar value = /** @type {V} */ (props[key]);\n\t\t\tif (value === undefined) return get_fallback();\n\t\t\tfallback_dirty = true;\n\t\t\treturn value;\n\t\t};\n\t} else {\n\t\tgetter = () => {\n\t\t\tvar value = /** @type {V} */ (props[key]);\n\n\t\t\tif (value !== undefined) {\n\t\t\t\t// in legacy mode, we don't revert to the fallback value\n\t\t\t\t// if the prop goes from defined to undefined. The easiest\n\t\t\t\t// way to model this is to make the fallback undefined\n\t\t\t\t// as soon as the prop has a value\n\t\t\t\tfallback_value = /** @type {V} */ (undefined);\n\t\t\t}\n\n\t\t\treturn value === undefined ? fallback_value : value;\n\t\t};\n\t}\n\n\t// prop is never written to  we only need a getter\n\tif (runes && (flags & PROPS_IS_UPDATED) === 0) {\n\t\treturn getter;\n\t}\n\n\t// prop is written to, but the parent component had `bind:foo` which\n\t// means we can just call `$$props.foo = value` directly\n\tif (setter) {\n\t\tvar legacy_parent = props.$$legacy;\n\t\treturn /** @type {() => V} */ (\n\t\t\tfunction (/** @type {V} */ value, /** @type {boolean} */ mutation) {\n\t\t\t\tif (arguments.length > 0) {\n\t\t\t\t\t// We don't want to notify if the value was mutated and the parent is in runes mode.\n\t\t\t\t\t// In that case the state proxy (if it exists) should take care of the notification.\n\t\t\t\t\t// If the parent is not in runes mode, we need to notify on mutation, too, that the prop\n\t\t\t\t\t// has changed because the parent will not be able to detect the change otherwise.\n\t\t\t\t\tif (!runes || !mutation || legacy_parent || is_store_sub) {\n\t\t\t\t\t\t/** @type {Function} */ (setter)(mutation ? getter() : value);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\n\t\t\t\treturn getter();\n\t\t\t}\n\t\t);\n\t}\n\n\t// Either prop is written to, but there's no binding, which means we\n\t// create a derived that we can write to locally.\n\t// Or we are in legacy mode where we always create a derived to replicate that\n\t// Svelte 4 did not trigger updates when a primitive value was updated to the same value.\n\tvar overridden = false;\n\n\tvar d = ((flags & PROPS_IS_IMMUTABLE) !== 0 ? derived : derived_safe_equal)(() => {\n\t\toverridden = false;\n\t\treturn getter();\n\t});\n\n\tif (DEV) {\n\t\td.label = key;\n\t}\n\n\t// Capture the initial value if it's bindable\n\tif (bindable) get(d);\n\n\tvar parent_effect = /** @type {Effect} */ (active_effect);\n\n\treturn /** @type {() => V} */ (\n\t\tfunction (/** @type {any} */ value, /** @type {boolean} */ mutation) {\n\t\t\tif (arguments.length > 0) {\n\t\t\t\tconst new_value = mutation ? get(d) : runes && bindable ? proxy(value) : value;\n\n\t\t\t\tset(d, new_value);\n\t\t\t\toverridden = true;\n\n\t\t\t\tif (fallback_value !== undefined) {\n\t\t\t\t\tfallback_value = new_value;\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\t// special case  avoid recalculating the derived if we're in a\n\t\t\t// teardown function and the prop was overridden locally, or the\n\t\t\t// component was already destroyed (this latter part is necessary\n\t\t\t// because `bind:this` can read props after the component has\n\t\t\t// been destroyed. TODO simplify `bind:this`\n\t\t\tif ((is_destroying_effect && overridden) || (parent_effect.f & DESTROYED) !== 0) {\n\t\t\t\treturn d.v;\n\t\t\t}\n\n\t\t\treturn get(d);\n\t\t}\n\t);\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we dont ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnt worried about live collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// dont; wed rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default x => () => x;\n","export default function DragEvent(type, {\n  sourceEvent,\n  subject,\n  target,\n  identifier,\n  active,\n  x, y, dx, dy,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    subject: {value: subject, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    identifier: {value: identifier, enumerable: true, configurable: true},\n    active: {value: active, enumerable: true, configurable: true},\n    x: {value: x, enumerable: true, configurable: true},\n    y: {value: y, enumerable: true, configurable: true},\n    dx: {value: dx, enumerable: true, configurable: true},\n    dy: {value: dy, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {dispatch} from \"d3-dispatch\";\nimport {select, pointer} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nonpassive, nonpassivecapture, nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(event, d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved, nonpassive)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned(event, d) {\n    if (touchending || !filter.call(this, event, d)) return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture) return;\n    select(event.view)\n      .on(\"mousemove.drag\", mousemoved, nonpassivecapture)\n      .on(\"mouseup.drag\", mouseupped, nonpassivecapture);\n    nodrag(event.view);\n    nopropagation(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n\n  function mousemoved(event) {\n    noevent(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent(event);\n    gestures.mouse(\"end\", event);\n  }\n\n  function touchstarted(event, d) {\n    if (!filter.call(this, event, d)) return;\n    var touches = event.changedTouches,\n        c = container.call(this, event, d),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchmoved(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchended(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n\n  function beforestart(that, container, event, d, identifier, touch) {\n    var dispatch = listeners.copy(),\n        p = pointer(touch || event, container), dx, dy,\n        s;\n\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n        sourceEvent: event,\n        target: drag,\n        identifier,\n        active,\n        x: p[0],\n        y: p[1],\n        dx: 0,\n        dy: 0,\n        dispatch\n      }), d)) == null) return;\n\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n\n    return function gesture(type, event, touch) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[identifier] = gesture, n = active++; break;\n        case \"end\": delete gestures[identifier], --active; // falls through\n        case \"drag\": p = pointer(touch || event, container), n = active; break;\n      }\n      dispatch.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event,\n          subject: s,\n          target: drag,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch\n        }),\n        d\n      );\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0  u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","export default x => () => x;\n","export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event wont trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n","import { drag } from 'd3-drag';\nimport { select, pointer } from 'd3-selection';\nimport { zoom, zoomIdentity, zoomTransform } from 'd3-zoom';\nimport { interpolateZoom, interpolate } from 'd3-interpolate';\n\nconst errorMessages = {\n    error001: () => '[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001',\n    error002: () => \"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.\",\n    error003: (nodeType) => `Node type \"${nodeType}\" not found. Using fallback type \"default\".`,\n    error004: () => 'The React Flow parent container needs a width and a height to render the graph.',\n    error005: () => 'Only child nodes can use a parent extent.',\n    error006: () => \"Can't create edge. An edge needs a source and a target.\",\n    error007: (id) => `The old edge with id=${id} does not exist.`,\n    error009: (type) => `Marker type \"${type}\" doesn't exist.`,\n    error008: (handleType, { id, sourceHandle, targetHandle }) => `Couldn't create edge for ${handleType} handle id: \"${handleType === 'source' ? sourceHandle : targetHandle}\", edge id: ${id}.`,\n    error010: () => 'Handle: No node id found. Make sure to only use a Handle inside a custom Node.',\n    error011: (edgeType) => `Edge type \"${edgeType}\" not found. Using fallback type \"default\".`,\n    error012: (id) => `Node with id \"${id}\" does not exist, it may have been removed. This can happen when a node is deleted before the \"onNodeClick\" handler is called.`,\n    error013: (lib = 'react') => `It seems that you haven't loaded the styles. Please import '@xyflow/${lib}/dist/style.css' or base.css to make sure everything is working properly.`,\n    error014: () => 'useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.',\n    error015: () => 'It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs.',\n};\nconst infiniteExtent = [\n    [Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY],\n    [Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY],\n];\nconst elementSelectionKeys = ['Enter', ' ', 'Escape'];\nconst defaultAriaLabelConfig = {\n    'node.a11yDescription.default': 'Press enter or space to select a node. Press delete to remove it and escape to cancel.',\n    'node.a11yDescription.keyboardDisabled': 'Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.',\n    'node.a11yDescription.ariaLiveMessage': ({ direction, x, y }) => `Moved selected node ${direction}. New position, x: ${x}, y: ${y}`,\n    'edge.a11yDescription.default': 'Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.',\n    // Control elements\n    'controls.ariaLabel': 'Control Panel',\n    'controls.zoomIn.ariaLabel': 'Zoom In',\n    'controls.zoomOut.ariaLabel': 'Zoom Out',\n    'controls.fitView.ariaLabel': 'Fit View',\n    'controls.interactive.ariaLabel': 'Toggle Interactivity',\n    // Mini map\n    'minimap.ariaLabel': 'Mini Map',\n    // Handle\n    'handle.ariaLabel': 'Handle',\n};\n\n/**\n * The `ConnectionMode` is used to set the mode of connection between nodes.\n * The `Strict` mode is the default one and only allows source to target edges.\n * `Loose` mode allows source to source and target to target edges as well.\n *\n * @public\n */\nvar ConnectionMode;\n(function (ConnectionMode) {\n    ConnectionMode[\"Strict\"] = \"strict\";\n    ConnectionMode[\"Loose\"] = \"loose\";\n})(ConnectionMode || (ConnectionMode = {}));\n/**\n * This enum is used to set the different modes of panning the viewport when the\n * user scrolls. The `Free` mode allows the user to pan in any direction by scrolling\n * with a device like a trackpad. The `Vertical` and `Horizontal` modes restrict\n * scroll panning to only the vertical or horizontal axis, respectively.\n *\n * @public\n */\nvar PanOnScrollMode;\n(function (PanOnScrollMode) {\n    PanOnScrollMode[\"Free\"] = \"free\";\n    PanOnScrollMode[\"Vertical\"] = \"vertical\";\n    PanOnScrollMode[\"Horizontal\"] = \"horizontal\";\n})(PanOnScrollMode || (PanOnScrollMode = {}));\nvar SelectionMode;\n(function (SelectionMode) {\n    SelectionMode[\"Partial\"] = \"partial\";\n    SelectionMode[\"Full\"] = \"full\";\n})(SelectionMode || (SelectionMode = {}));\nconst initialConnection = {\n    inProgress: false,\n    isValid: null,\n    from: null,\n    fromHandle: null,\n    fromPosition: null,\n    fromNode: null,\n    to: null,\n    toHandle: null,\n    toPosition: null,\n    toNode: null,\n};\n\n/**\n * If you set the `connectionLineType` prop on your [`<ReactFlow />`](/api-reference/react-flow#connection-connectionLineType)\n *component, it will dictate the style of connection line rendered when creating\n *new edges.\n *\n * @public\n *\n * @remarks If you choose to render a custom connection line component, this value will be\n *passed to your component as part of its [`ConnectionLineComponentProps`](/api-reference/types/connection-line-component-props).\n */\nvar ConnectionLineType;\n(function (ConnectionLineType) {\n    ConnectionLineType[\"Bezier\"] = \"default\";\n    ConnectionLineType[\"Straight\"] = \"straight\";\n    ConnectionLineType[\"Step\"] = \"step\";\n    ConnectionLineType[\"SmoothStep\"] = \"smoothstep\";\n    ConnectionLineType[\"SimpleBezier\"] = \"simplebezier\";\n})(ConnectionLineType || (ConnectionLineType = {}));\n/**\n * Edges may optionally have a marker on either end. The MarkerType type enumerates\n * the options available to you when configuring a given marker.\n *\n * @public\n */\nvar MarkerType;\n(function (MarkerType) {\n    MarkerType[\"Arrow\"] = \"arrow\";\n    MarkerType[\"ArrowClosed\"] = \"arrowclosed\";\n})(MarkerType || (MarkerType = {}));\n\n/**\n * While [`PanelPosition`](/api-reference/types/panel-position) can be used to place a\n * component in the corners of a container, the `Position` enum is less precise and used\n * primarily in relation to edges and handles.\n *\n * @public\n */\nvar Position;\n(function (Position) {\n    Position[\"Left\"] = \"left\";\n    Position[\"Top\"] = \"top\";\n    Position[\"Right\"] = \"right\";\n    Position[\"Bottom\"] = \"bottom\";\n})(Position || (Position = {}));\nconst oppositePosition = {\n    [Position.Left]: Position.Right,\n    [Position.Right]: Position.Left,\n    [Position.Top]: Position.Bottom,\n    [Position.Bottom]: Position.Top,\n};\n\n/**\n * @internal\n */\nfunction areConnectionMapsEqual(a, b) {\n    if (!a && !b) {\n        return true;\n    }\n    if (!a || !b || a.size !== b.size) {\n        return false;\n    }\n    if (!a.size && !b.size) {\n        return true;\n    }\n    for (const key of a.keys()) {\n        if (!b.has(key)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * We call the callback for all connections in a that are not in b\n *\n * @internal\n */\nfunction handleConnectionChange(a, b, cb) {\n    if (!cb) {\n        return;\n    }\n    const diff = [];\n    a.forEach((connection, key) => {\n        if (!b?.has(key)) {\n            diff.push(connection);\n        }\n    });\n    if (diff.length) {\n        cb(diff);\n    }\n}\nfunction getConnectionStatus(isValid) {\n    return isValid === null ? null : isValid ? 'valid' : 'invalid';\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Test whether an object is usable as an Edge\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Edge if it returns true\n * @param element - The element to test\n * @returns A boolean indicating whether the element is an Edge\n */\nconst isEdgeBase = (element) => 'id' in element && 'source' in element && 'target' in element;\n/**\n * Test whether an object is usable as a Node\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Node if it returns true\n * @param element - The element to test\n * @returns A boolean indicating whether the element is an Node\n */\nconst isNodeBase = (element) => 'id' in element && 'position' in element && !('source' in element) && !('target' in element);\nconst isInternalNodeBase = (element) => 'id' in element && 'internals' in element && !('source' in element) && !('target' in element);\n/**\n * This util is used to tell you what nodes, if any, are connected to the given node\n * as the _target_ of an edge.\n * @public\n * @param node - The node to get the connected nodes from.\n * @param nodes - The array of all nodes.\n * @param edges - The array of all edges.\n * @returns An array of nodes that are connected over edges where the source is the given node.\n *\n * @example\n * ```ts\n *import { getOutgoers } from '@xyflow/react';\n *\n *const nodes = [];\n *const edges = [];\n *\n *const outgoers = getOutgoers(\n *  { id: '1', position: { x: 0, y: 0 }, data: { label: 'node' } },\n *  nodes,\n *  edges,\n *);\n *```\n */\nconst getOutgoers = (node, nodes, edges) => {\n    if (!node.id) {\n        return [];\n    }\n    const outgoerIds = new Set();\n    edges.forEach((edge) => {\n        if (edge.source === node.id) {\n            outgoerIds.add(edge.target);\n        }\n    });\n    return nodes.filter((n) => outgoerIds.has(n.id));\n};\n/**\n * This util is used to tell you what nodes, if any, are connected to the given node\n * as the _source_ of an edge.\n * @public\n * @param node - The node to get the connected nodes from.\n * @param nodes - The array of all nodes.\n * @param edges - The array of all edges.\n * @returns An array of nodes that are connected over edges where the target is the given node.\n *\n * @example\n * ```ts\n *import { getIncomers } from '@xyflow/react';\n *\n *const nodes = [];\n *const edges = [];\n *\n *const incomers = getIncomers(\n *  { id: '1', position: { x: 0, y: 0 }, data: { label: 'node' } },\n *  nodes,\n *  edges,\n *);\n *```\n */\nconst getIncomers = (node, nodes, edges) => {\n    if (!node.id) {\n        return [];\n    }\n    const incomersIds = new Set();\n    edges.forEach((edge) => {\n        if (edge.target === node.id) {\n            incomersIds.add(edge.source);\n        }\n    });\n    return nodes.filter((n) => incomersIds.has(n.id));\n};\nconst getNodePositionWithOrigin = (node, nodeOrigin = [0, 0]) => {\n    const { width, height } = getNodeDimensions(node);\n    const origin = node.origin ?? nodeOrigin;\n    const offsetX = width * origin[0];\n    const offsetY = height * origin[1];\n    return {\n        x: node.position.x - offsetX,\n        y: node.position.y - offsetY,\n    };\n};\n/**\n * Returns the bounding box that contains all the given nodes in an array. This can\n * be useful when combined with [`getViewportForBounds`](/api-reference/utils/get-viewport-for-bounds)\n * to calculate the correct transform to fit the given nodes in a viewport.\n * @public\n * @remarks Useful when combined with {@link getViewportForBounds} to calculate the correct transform to fit the given nodes in a viewport.\n * @param nodes - Nodes to calculate the bounds for.\n * @returns Bounding box enclosing all nodes.\n *\n * @remarks This function was previously called `getRectOfNodes`\n *\n * @example\n * ```js\n *import { getNodesBounds } from '@xyflow/react';\n *\n *const nodes = [\n *  {\n *    id: 'a',\n *    position: { x: 0, y: 0 },\n *    data: { label: 'a' },\n *    width: 50,\n *    height: 25,\n *  },\n *  {\n *    id: 'b',\n *    position: { x: 100, y: 100 },\n *    data: { label: 'b' },\n *    width: 50,\n *    height: 25,\n *  },\n *];\n *\n *const bounds = getNodesBounds(nodes);\n *```\n */\nconst getNodesBounds = (nodes, params = { nodeOrigin: [0, 0] }) => {\n    if (process.env.NODE_ENV === 'development' && !params.nodeLookup) {\n        console.warn('Please use `getNodesBounds` from `useReactFlow`/`useSvelteFlow` hook to ensure correct values for sub flows. If not possible, you have to provide a nodeLookup to support sub flows.');\n    }\n    if (nodes.length === 0) {\n        return { x: 0, y: 0, width: 0, height: 0 };\n    }\n    const box = nodes.reduce((currBox, nodeOrId) => {\n        const isId = typeof nodeOrId === 'string';\n        let currentNode = !params.nodeLookup && !isId ? nodeOrId : undefined;\n        if (params.nodeLookup) {\n            currentNode = isId\n                ? params.nodeLookup.get(nodeOrId)\n                : !isInternalNodeBase(nodeOrId)\n                    ? params.nodeLookup.get(nodeOrId.id)\n                    : nodeOrId;\n        }\n        const nodeBox = currentNode ? nodeToBox(currentNode, params.nodeOrigin) : { x: 0, y: 0, x2: 0, y2: 0 };\n        return getBoundsOfBoxes(currBox, nodeBox);\n    }, { x: Infinity, y: Infinity, x2: -Infinity, y2: -Infinity });\n    return boxToRect(box);\n};\n/**\n * Determines a bounding box that contains all given nodes in an array\n * @internal\n */\nconst getInternalNodesBounds = (nodeLookup, params = {}) => {\n    if (nodeLookup.size === 0) {\n        return { x: 0, y: 0, width: 0, height: 0 };\n    }\n    let box = { x: Infinity, y: Infinity, x2: -Infinity, y2: -Infinity };\n    nodeLookup.forEach((node) => {\n        if (params.filter === undefined || params.filter(node)) {\n            const nodeBox = nodeToBox(node);\n            box = getBoundsOfBoxes(box, nodeBox);\n        }\n    });\n    return boxToRect(box);\n};\nconst getNodesInside = (nodes, rect, [tx, ty, tScale] = [0, 0, 1], partially = false, \n// set excludeNonSelectableNodes if you want to pay attention to the nodes \"selectable\" attribute\nexcludeNonSelectableNodes = false) => {\n    const paneRect = {\n        ...pointToRendererPoint(rect, [tx, ty, tScale]),\n        width: rect.width / tScale,\n        height: rect.height / tScale,\n    };\n    const visibleNodes = [];\n    for (const node of nodes.values()) {\n        const { measured, selectable = true, hidden = false } = node;\n        if ((excludeNonSelectableNodes && !selectable) || hidden) {\n            continue;\n        }\n        const width = measured.width ?? node.width ?? node.initialWidth ?? null;\n        const height = measured.height ?? node.height ?? node.initialHeight ?? null;\n        const overlappingArea = getOverlappingArea(paneRect, nodeToRect(node));\n        const area = (width ?? 0) * (height ?? 0);\n        const partiallyVisible = partially && overlappingArea > 0;\n        const forceInitialRender = !node.internals.handleBounds;\n        const isVisible = forceInitialRender || partiallyVisible || overlappingArea >= area;\n        if (isVisible || node.dragging) {\n            visibleNodes.push(node);\n        }\n    }\n    return visibleNodes;\n};\n/**\n * This utility filters an array of edges, keeping only those where either the source or target\n * node is present in the given array of nodes.\n * @public\n * @param nodes - Nodes you want to get the connected edges for.\n * @param edges - All edges.\n * @returns Array of edges that connect any of the given nodes with each other.\n *\n * @example\n * ```js\n *import { getConnectedEdges } from '@xyflow/react';\n *\n *const nodes = [\n *  { id: 'a', position: { x: 0, y: 0 } },\n *  { id: 'b', position: { x: 100, y: 0 } },\n *];\n *\n *const edges = [\n *  { id: 'a->c', source: 'a', target: 'c' },\n *  { id: 'c->d', source: 'c', target: 'd' },\n *];\n *\n *const connectedEdges = getConnectedEdges(nodes, edges);\n * // => [{ id: 'a->c', source: 'a', target: 'c' }]\n *```\n */\nconst getConnectedEdges = (nodes, edges) => {\n    const nodeIds = new Set();\n    nodes.forEach((node) => {\n        nodeIds.add(node.id);\n    });\n    return edges.filter((edge) => nodeIds.has(edge.source) || nodeIds.has(edge.target));\n};\nfunction getFitViewNodes(nodeLookup, options) {\n    const fitViewNodes = new Map();\n    const optionNodeIds = options?.nodes ? new Set(options.nodes.map((node) => node.id)) : null;\n    nodeLookup.forEach((n) => {\n        const isVisible = n.measured.width && n.measured.height && (options?.includeHiddenNodes || !n.hidden);\n        if (isVisible && (!optionNodeIds || optionNodeIds.has(n.id))) {\n            fitViewNodes.set(n.id, n);\n        }\n    });\n    return fitViewNodes;\n}\nasync function fitViewport({ nodes, width, height, panZoom, minZoom, maxZoom }, options) {\n    if (nodes.size === 0) {\n        return Promise.resolve(true);\n    }\n    const nodesToFit = getFitViewNodes(nodes, options);\n    const bounds = getInternalNodesBounds(nodesToFit);\n    const viewport = getViewportForBounds(bounds, width, height, options?.minZoom ?? minZoom, options?.maxZoom ?? maxZoom, options?.padding ?? 0.1);\n    await panZoom.setViewport(viewport, {\n        duration: options?.duration,\n        ease: options?.ease,\n        interpolate: options?.interpolate,\n    });\n    return Promise.resolve(true);\n}\n/**\n * This function calculates the next position of a node, taking into account the node's extent, parent node, and origin.\n *\n * @internal\n * @returns position, positionAbsolute\n */\nfunction calculateNodePosition({ nodeId, nextPosition, nodeLookup, nodeOrigin = [0, 0], nodeExtent, onError, }) {\n    const node = nodeLookup.get(nodeId);\n    const parentNode = node.parentId ? nodeLookup.get(node.parentId) : undefined;\n    const { x: parentX, y: parentY } = parentNode ? parentNode.internals.positionAbsolute : { x: 0, y: 0 };\n    const origin = node.origin ?? nodeOrigin;\n    let extent = node.extent || nodeExtent;\n    if (node.extent === 'parent' && !node.expandParent) {\n        if (!parentNode) {\n            onError?.('005', errorMessages['error005']());\n        }\n        else {\n            const parentWidth = parentNode.measured.width;\n            const parentHeight = parentNode.measured.height;\n            if (parentWidth && parentHeight) {\n                extent = [\n                    [parentX, parentY],\n                    [parentX + parentWidth, parentY + parentHeight],\n                ];\n            }\n        }\n    }\n    else if (parentNode && isCoordinateExtent(node.extent)) {\n        extent = [\n            [node.extent[0][0] + parentX, node.extent[0][1] + parentY],\n            [node.extent[1][0] + parentX, node.extent[1][1] + parentY],\n        ];\n    }\n    const positionAbsolute = isCoordinateExtent(extent)\n        ? clampPosition(nextPosition, extent, node.measured)\n        : nextPosition;\n    if (node.measured.width === undefined || node.measured.height === undefined) {\n        onError?.('015', errorMessages['error015']());\n    }\n    return {\n        position: {\n            x: positionAbsolute.x - parentX + (node.measured.width ?? 0) * origin[0],\n            y: positionAbsolute.y - parentY + (node.measured.height ?? 0) * origin[1],\n        },\n        positionAbsolute,\n    };\n}\n/**\n * Pass in nodes & edges to delete, get arrays of nodes and edges that actually can be deleted\n * @internal\n * @param param.nodesToRemove - The nodes to remove\n * @param param.edgesToRemove - The edges to remove\n * @param param.nodes - All nodes\n * @param param.edges - All edges\n * @param param.onBeforeDelete - Callback to check which nodes and edges can be deleted\n * @returns nodes: nodes that can be deleted, edges: edges that can be deleted\n */\nasync function getElementsToRemove({ nodesToRemove = [], edgesToRemove = [], nodes, edges, onBeforeDelete, }) {\n    const nodeIds = new Set(nodesToRemove.map((node) => node.id));\n    const matchingNodes = [];\n    for (const node of nodes) {\n        if (node.deletable === false) {\n            continue;\n        }\n        const isIncluded = nodeIds.has(node.id);\n        const parentHit = !isIncluded && node.parentId && matchingNodes.find((n) => n.id === node.parentId);\n        if (isIncluded || parentHit) {\n            matchingNodes.push(node);\n        }\n    }\n    const edgeIds = new Set(edgesToRemove.map((edge) => edge.id));\n    const deletableEdges = edges.filter((edge) => edge.deletable !== false);\n    const connectedEdges = getConnectedEdges(matchingNodes, deletableEdges);\n    const matchingEdges = connectedEdges;\n    for (const edge of deletableEdges) {\n        const isIncluded = edgeIds.has(edge.id);\n        if (isIncluded && !matchingEdges.find((e) => e.id === edge.id)) {\n            matchingEdges.push(edge);\n        }\n    }\n    if (!onBeforeDelete) {\n        return {\n            edges: matchingEdges,\n            nodes: matchingNodes,\n        };\n    }\n    const onBeforeDeleteResult = await onBeforeDelete({\n        nodes: matchingNodes,\n        edges: matchingEdges,\n    });\n    if (typeof onBeforeDeleteResult === 'boolean') {\n        return onBeforeDeleteResult ? { edges: matchingEdges, nodes: matchingNodes } : { edges: [], nodes: [] };\n    }\n    return onBeforeDeleteResult;\n}\n\nconst clamp = (val, min = 0, max = 1) => Math.min(Math.max(val, min), max);\nconst clampPosition = (position = { x: 0, y: 0 }, extent, dimensions) => ({\n    x: clamp(position.x, extent[0][0], extent[1][0] - (dimensions?.width ?? 0)),\n    y: clamp(position.y, extent[0][1], extent[1][1] - (dimensions?.height ?? 0)),\n});\nfunction clampPositionToParent(childPosition, childDimensions, parent) {\n    const { width: parentWidth, height: parentHeight } = getNodeDimensions(parent);\n    const { x: parentX, y: parentY } = parent.internals.positionAbsolute;\n    return clampPosition(childPosition, [\n        [parentX, parentY],\n        [parentX + parentWidth, parentY + parentHeight],\n    ], childDimensions);\n}\n/**\n * Calculates the velocity of panning when the mouse is close to the edge of the canvas\n * @internal\n * @param value - One dimensional poition of the mouse (x or y)\n * @param min - Minimal position on canvas before panning starts\n * @param max - Maximal position on canvas before panning starts\n * @returns - A number between 0 and 1 that represents the velocity of panning\n */\nconst calcAutoPanVelocity = (value, min, max) => {\n    if (value < min) {\n        return clamp(Math.abs(value - min), 1, min) / min;\n    }\n    else if (value > max) {\n        return -clamp(Math.abs(value - max), 1, min) / min;\n    }\n    return 0;\n};\nconst calcAutoPan = (pos, bounds, speed = 15, distance = 40) => {\n    const xMovement = calcAutoPanVelocity(pos.x, distance, bounds.width - distance) * speed;\n    const yMovement = calcAutoPanVelocity(pos.y, distance, bounds.height - distance) * speed;\n    return [xMovement, yMovement];\n};\nconst getBoundsOfBoxes = (box1, box2) => ({\n    x: Math.min(box1.x, box2.x),\n    y: Math.min(box1.y, box2.y),\n    x2: Math.max(box1.x2, box2.x2),\n    y2: Math.max(box1.y2, box2.y2),\n});\nconst rectToBox = ({ x, y, width, height }) => ({\n    x,\n    y,\n    x2: x + width,\n    y2: y + height,\n});\nconst boxToRect = ({ x, y, x2, y2 }) => ({\n    x,\n    y,\n    width: x2 - x,\n    height: y2 - y,\n});\nconst nodeToRect = (node, nodeOrigin = [0, 0]) => {\n    const { x, y } = isInternalNodeBase(node)\n        ? node.internals.positionAbsolute\n        : getNodePositionWithOrigin(node, nodeOrigin);\n    return {\n        x,\n        y,\n        width: node.measured?.width ?? node.width ?? node.initialWidth ?? 0,\n        height: node.measured?.height ?? node.height ?? node.initialHeight ?? 0,\n    };\n};\nconst nodeToBox = (node, nodeOrigin = [0, 0]) => {\n    const { x, y } = isInternalNodeBase(node)\n        ? node.internals.positionAbsolute\n        : getNodePositionWithOrigin(node, nodeOrigin);\n    return {\n        x,\n        y,\n        x2: x + (node.measured?.width ?? node.width ?? node.initialWidth ?? 0),\n        y2: y + (node.measured?.height ?? node.height ?? node.initialHeight ?? 0),\n    };\n};\nconst getBoundsOfRects = (rect1, rect2) => boxToRect(getBoundsOfBoxes(rectToBox(rect1), rectToBox(rect2)));\nconst getOverlappingArea = (rectA, rectB) => {\n    const xOverlap = Math.max(0, Math.min(rectA.x + rectA.width, rectB.x + rectB.width) - Math.max(rectA.x, rectB.x));\n    const yOverlap = Math.max(0, Math.min(rectA.y + rectA.height, rectB.y + rectB.height) - Math.max(rectA.y, rectB.y));\n    return Math.ceil(xOverlap * yOverlap);\n};\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst isRectObject = (obj) => isNumeric(obj.width) && isNumeric(obj.height) && isNumeric(obj.x) && isNumeric(obj.y);\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\nconst isNumeric = (n) => !isNaN(n) && isFinite(n);\n// used for a11y key board controls for nodes and edges\nconst devWarn = (id, message) => {\n    if (process.env.NODE_ENV === 'development') {\n        console.warn(`[React Flow]: ${message} Help: https://reactflow.dev/error#${id}`);\n    }\n};\nconst snapPosition = (position, snapGrid = [1, 1]) => {\n    return {\n        x: snapGrid[0] * Math.round(position.x / snapGrid[0]),\n        y: snapGrid[1] * Math.round(position.y / snapGrid[1]),\n    };\n};\nconst pointToRendererPoint = ({ x, y }, [tx, ty, tScale], snapToGrid = false, snapGrid = [1, 1]) => {\n    const position = {\n        x: (x - tx) / tScale,\n        y: (y - ty) / tScale,\n    };\n    return snapToGrid ? snapPosition(position, snapGrid) : position;\n};\nconst rendererPointToPoint = ({ x, y }, [tx, ty, tScale]) => {\n    return {\n        x: x * tScale + tx,\n        y: y * tScale + ty,\n    };\n};\n/**\n * Parses a single padding value to a number\n * @internal\n * @param padding - Padding to parse\n * @param viewport - Width or height of the viewport\n * @returns The padding in pixels\n */\nfunction parsePadding(padding, viewport) {\n    if (typeof padding === 'number') {\n        return Math.floor((viewport - viewport / (1 + padding)) * 0.5);\n    }\n    if (typeof padding === 'string' && padding.endsWith('px')) {\n        const paddingValue = parseFloat(padding);\n        if (!Number.isNaN(paddingValue)) {\n            return Math.floor(paddingValue);\n        }\n    }\n    if (typeof padding === 'string' && padding.endsWith('%')) {\n        const paddingValue = parseFloat(padding);\n        if (!Number.isNaN(paddingValue)) {\n            return Math.floor(viewport * paddingValue * 0.01);\n        }\n    }\n    console.error(`[React Flow] The padding value \"${padding}\" is invalid. Please provide a number or a string with a valid unit (px or %).`);\n    return 0;\n}\n/**\n * Parses the paddings to an object with top, right, bottom, left, x and y paddings\n * @internal\n * @param padding - Padding to parse\n * @param width - Width of the viewport\n * @param height - Height of the viewport\n * @returns An object with the paddings in pixels\n */\nfunction parsePaddings(padding, width, height) {\n    if (typeof padding === 'string' || typeof padding === 'number') {\n        const paddingY = parsePadding(padding, height);\n        const paddingX = parsePadding(padding, width);\n        return {\n            top: paddingY,\n            right: paddingX,\n            bottom: paddingY,\n            left: paddingX,\n            x: paddingX * 2,\n            y: paddingY * 2,\n        };\n    }\n    if (typeof padding === 'object') {\n        const top = parsePadding(padding.top ?? padding.y ?? 0, height);\n        const bottom = parsePadding(padding.bottom ?? padding.y ?? 0, height);\n        const left = parsePadding(padding.left ?? padding.x ?? 0, width);\n        const right = parsePadding(padding.right ?? padding.x ?? 0, width);\n        return { top, right, bottom, left, x: left + right, y: top + bottom };\n    }\n    return { top: 0, right: 0, bottom: 0, left: 0, x: 0, y: 0 };\n}\n/**\n * Calculates the resulting paddings if the new viewport is applied\n * @internal\n * @param bounds - Bounds to fit inside viewport\n * @param x - X position of the viewport\n * @param y - Y position of the viewport\n * @param zoom - Zoom level of the viewport\n * @param width - Width of the viewport\n * @param height - Height of the viewport\n * @returns An object with the minimum padding required to fit the bounds inside the viewport\n */\nfunction calculateAppliedPaddings(bounds, x, y, zoom, width, height) {\n    const { x: left, y: top } = rendererPointToPoint(bounds, [x, y, zoom]);\n    const { x: boundRight, y: boundBottom } = rendererPointToPoint({ x: bounds.x + bounds.width, y: bounds.y + bounds.height }, [x, y, zoom]);\n    const right = width - boundRight;\n    const bottom = height - boundBottom;\n    return {\n        left: Math.floor(left),\n        top: Math.floor(top),\n        right: Math.floor(right),\n        bottom: Math.floor(bottom),\n    };\n}\n/**\n * Returns a viewport that encloses the given bounds with padding.\n * @public\n * @remarks You can determine bounds of nodes with {@link getNodesBounds} and {@link getBoundsOfRects}\n * @param bounds - Bounds to fit inside viewport.\n * @param width - Width of the viewport.\n * @param height  - Height of the viewport.\n * @param minZoom - Minimum zoom level of the resulting viewport.\n * @param maxZoom - Maximum zoom level of the resulting viewport.\n * @param padding - Padding around the bounds.\n * @returns A transformed {@link Viewport} that encloses the given bounds which you can pass to e.g. {@link setViewport}.\n * @example\n * const { x, y, zoom } = getViewportForBounds(\n * { x: 0, y: 0, width: 100, height: 100},\n * 1200, 800, 0.5, 2);\n */\nconst getViewportForBounds = (bounds, width, height, minZoom, maxZoom, padding) => {\n    // First we resolve all the paddings to actual pixel values\n    const p = parsePaddings(padding, width, height);\n    const xZoom = (width - p.x) / bounds.width;\n    const yZoom = (height - p.y) / bounds.height;\n    // We calculate the new x, y, zoom for a centered view\n    const zoom = Math.min(xZoom, yZoom);\n    const clampedZoom = clamp(zoom, minZoom, maxZoom);\n    const boundsCenterX = bounds.x + bounds.width / 2;\n    const boundsCenterY = bounds.y + bounds.height / 2;\n    const x = width / 2 - boundsCenterX * clampedZoom;\n    const y = height / 2 - boundsCenterY * clampedZoom;\n    // Then we calculate the minimum padding, to respect asymmetric paddings\n    const newPadding = calculateAppliedPaddings(bounds, x, y, clampedZoom, width, height);\n    // We only want to have an offset if the newPadding is smaller than the required padding\n    const offset = {\n        left: Math.min(newPadding.left - p.left, 0),\n        top: Math.min(newPadding.top - p.top, 0),\n        right: Math.min(newPadding.right - p.right, 0),\n        bottom: Math.min(newPadding.bottom - p.bottom, 0),\n    };\n    return {\n        x: x - offset.left + offset.right,\n        y: y - offset.top + offset.bottom,\n        zoom: clampedZoom,\n    };\n};\nconst isMacOs = () => typeof navigator !== 'undefined' && navigator?.userAgent?.indexOf('Mac') >= 0;\nfunction isCoordinateExtent(extent) {\n    return extent !== undefined && extent !== null && extent !== 'parent';\n}\nfunction getNodeDimensions(node) {\n    return {\n        width: node.measured?.width ?? node.width ?? node.initialWidth ?? 0,\n        height: node.measured?.height ?? node.height ?? node.initialHeight ?? 0,\n    };\n}\nfunction nodeHasDimensions(node) {\n    return ((node.measured?.width ?? node.width ?? node.initialWidth) !== undefined &&\n        (node.measured?.height ?? node.height ?? node.initialHeight) !== undefined);\n}\n/**\n * Convert child position to aboslute position\n *\n * @internal\n * @param position\n * @param parentId\n * @param nodeLookup\n * @param nodeOrigin\n * @returns an internal node with an absolute position\n */\nfunction evaluateAbsolutePosition(position, dimensions = { width: 0, height: 0 }, parentId, nodeLookup, nodeOrigin) {\n    const positionAbsolute = { ...position };\n    const parent = nodeLookup.get(parentId);\n    if (parent) {\n        const origin = parent.origin || nodeOrigin;\n        positionAbsolute.x += parent.internals.positionAbsolute.x - (dimensions.width ?? 0) * origin[0];\n        positionAbsolute.y += parent.internals.positionAbsolute.y - (dimensions.height ?? 0) * origin[1];\n    }\n    return positionAbsolute;\n}\nfunction areSetsEqual(a, b) {\n    if (a.size !== b.size) {\n        return false;\n    }\n    for (const item of a) {\n        if (!b.has(item)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Polyfill for Promise.withResolvers until we can use it in all browsers\n * @internal\n */\nfunction withResolvers() {\n    let resolve;\n    let reject;\n    const promise = new Promise((res, rej) => {\n        resolve = res;\n        reject = rej;\n    });\n    return { promise, resolve, reject };\n}\nfunction mergeAriaLabelConfig(partial) {\n    return { ...defaultAriaLabelConfig, ...(partial || {}) };\n}\n\nfunction getPointerPosition(event, { snapGrid = [0, 0], snapToGrid = false, transform, containerBounds }) {\n    const { x, y } = getEventPosition(event);\n    const pointerPos = pointToRendererPoint({ x: x - (containerBounds?.left ?? 0), y: y - (containerBounds?.top ?? 0) }, transform);\n    const { x: xSnapped, y: ySnapped } = snapToGrid ? snapPosition(pointerPos, snapGrid) : pointerPos;\n    // we need the snapped position in order to be able to skip unnecessary drag events\n    return {\n        xSnapped,\n        ySnapped,\n        ...pointerPos,\n    };\n}\nconst getDimensions = (node) => ({\n    width: node.offsetWidth,\n    height: node.offsetHeight,\n});\nconst getHostForElement = (element) => element?.getRootNode?.() || window?.document;\nconst inputTags = ['INPUT', 'SELECT', 'TEXTAREA'];\nfunction isInputDOMNode(event) {\n    // using composed path for handling shadow dom\n    const target = (event.composedPath?.()?.[0] || event.target);\n    if (target?.nodeType !== 1 /* Node.ELEMENT_NODE */)\n        return false;\n    const isInput = inputTags.includes(target.nodeName) || target.hasAttribute('contenteditable');\n    // when an input field is focused we don't want to trigger deletion or movement of nodes\n    return isInput || !!target.closest('.nokey');\n}\nconst isMouseEvent = (event) => 'clientX' in event;\nconst getEventPosition = (event, bounds) => {\n    const isMouse = isMouseEvent(event);\n    const evtX = isMouse ? event.clientX : event.touches?.[0].clientX;\n    const evtY = isMouse ? event.clientY : event.touches?.[0].clientY;\n    return {\n        x: evtX - (bounds?.left ?? 0),\n        y: evtY - (bounds?.top ?? 0),\n    };\n};\n/*\n * The handle bounds are calculated relative to the node element.\n * We store them in the internals object of the node in order to avoid\n * unnecessary recalculations.\n */\nconst getHandleBounds = (type, nodeElement, nodeBounds, zoom, nodeId) => {\n    const handles = nodeElement.querySelectorAll(`.${type}`);\n    if (!handles || !handles.length) {\n        return null;\n    }\n    return Array.from(handles).map((handle) => {\n        const handleBounds = handle.getBoundingClientRect();\n        return {\n            id: handle.getAttribute('data-handleid'),\n            type,\n            nodeId,\n            position: handle.getAttribute('data-handlepos'),\n            x: (handleBounds.left - nodeBounds.left) / zoom,\n            y: (handleBounds.top - nodeBounds.top) / zoom,\n            ...getDimensions(handle),\n        };\n    });\n};\n\nfunction getBezierEdgeCenter({ sourceX, sourceY, targetX, targetY, sourceControlX, sourceControlY, targetControlX, targetControlY, }) {\n    /*\n     * cubic bezier t=0.5 mid point, not the actual mid point, but easy to calculate\n     * https://stackoverflow.com/questions/67516101/how-to-find-distance-mid-point-of-bezier-curve\n     */\n    const centerX = sourceX * 0.125 + sourceControlX * 0.375 + targetControlX * 0.375 + targetX * 0.125;\n    const centerY = sourceY * 0.125 + sourceControlY * 0.375 + targetControlY * 0.375 + targetY * 0.125;\n    const offsetX = Math.abs(centerX - sourceX);\n    const offsetY = Math.abs(centerY - sourceY);\n    return [centerX, centerY, offsetX, offsetY];\n}\nfunction calculateControlOffset(distance, curvature) {\n    if (distance >= 0) {\n        return 0.5 * distance;\n    }\n    return curvature * 25 * Math.sqrt(-distance);\n}\nfunction getControlWithCurvature({ pos, x1, y1, x2, y2, c }) {\n    switch (pos) {\n        case Position.Left:\n            return [x1 - calculateControlOffset(x1 - x2, c), y1];\n        case Position.Right:\n            return [x1 + calculateControlOffset(x2 - x1, c), y1];\n        case Position.Top:\n            return [x1, y1 - calculateControlOffset(y1 - y2, c)];\n        case Position.Bottom:\n            return [x1, y1 + calculateControlOffset(y2 - y1, c)];\n    }\n}\n/**\n * The `getBezierPath` util returns everything you need to render a bezier edge\n *between two nodes.\n * @public\n * @returns A path string you can use in an SVG, the `labelX` and `labelY` position (center of path)\n * and `offsetX`, `offsetY` between source handle and label.\n * - `path`: the path to use in an SVG `<path>` element.\n * - `labelX`: the `x` position you can use to render a label for this edge.\n * - `labelY`: the `y` position you can use to render a label for this edge.\n * - `offsetX`: the absolute difference between the source `x` position and the `x` position of the\n * middle of this path.\n * - `offsetY`: the absolute difference between the source `y` position and the `y` position of the\n * middle of this path.\n * @example\n * ```js\n *  const source = { x: 0, y: 20 };\n *  const target = { x: 150, y: 100 };\n *\n *  const [path, labelX, labelY, offsetX, offsetY] = getBezierPath({\n *    sourceX: source.x,\n *    sourceY: source.y,\n *    sourcePosition: Position.Right,\n *    targetX: target.x,\n *    targetY: target.y,\n *    targetPosition: Position.Left,\n *});\n *```\n *\n * @remarks This function returns a tuple (aka a fixed-size array) to make it easier to\n *work with multiple edge paths at once.\n */\nfunction getBezierPath({ sourceX, sourceY, sourcePosition = Position.Bottom, targetX, targetY, targetPosition = Position.Top, curvature = 0.25, }) {\n    const [sourceControlX, sourceControlY] = getControlWithCurvature({\n        pos: sourcePosition,\n        x1: sourceX,\n        y1: sourceY,\n        x2: targetX,\n        y2: targetY,\n        c: curvature,\n    });\n    const [targetControlX, targetControlY] = getControlWithCurvature({\n        pos: targetPosition,\n        x1: targetX,\n        y1: targetY,\n        x2: sourceX,\n        y2: sourceY,\n        c: curvature,\n    });\n    const [labelX, labelY, offsetX, offsetY] = getBezierEdgeCenter({\n        sourceX,\n        sourceY,\n        targetX,\n        targetY,\n        sourceControlX,\n        sourceControlY,\n        targetControlX,\n        targetControlY,\n    });\n    return [\n        `M${sourceX},${sourceY} C${sourceControlX},${sourceControlY} ${targetControlX},${targetControlY} ${targetX},${targetY}`,\n        labelX,\n        labelY,\n        offsetX,\n        offsetY,\n    ];\n}\n\n// this is used for straight edges and simple smoothstep edges (LTR, RTL, BTT, TTB)\nfunction getEdgeCenter({ sourceX, sourceY, targetX, targetY, }) {\n    const xOffset = Math.abs(targetX - sourceX) / 2;\n    const centerX = targetX < sourceX ? targetX + xOffset : targetX - xOffset;\n    const yOffset = Math.abs(targetY - sourceY) / 2;\n    const centerY = targetY < sourceY ? targetY + yOffset : targetY - yOffset;\n    return [centerX, centerY, xOffset, yOffset];\n}\n/**\n * Returns the z-index for an edge based on the node it connects and whether it is selected.\n * By default, edges are rendered below nodes. This behaviour is different for edges that are\n * connected to nodes with a parent, as they are rendered above the parent node.\n */\nfunction getElevatedEdgeZIndex({ sourceNode, targetNode, selected = false, zIndex, elevateOnSelect = false, }) {\n    if (zIndex !== undefined) {\n        return zIndex;\n    }\n    const edgeZ = elevateOnSelect && selected ? 1000 : 0;\n    const nodeZ = Math.max(sourceNode.parentId ? sourceNode.internals.z : 0, targetNode.parentId ? targetNode.internals.z : 0);\n    return edgeZ + nodeZ;\n}\nfunction isEdgeVisible({ sourceNode, targetNode, width, height, transform }) {\n    const edgeBox = getBoundsOfBoxes(nodeToBox(sourceNode), nodeToBox(targetNode));\n    if (edgeBox.x === edgeBox.x2) {\n        edgeBox.x2 += 1;\n    }\n    if (edgeBox.y === edgeBox.y2) {\n        edgeBox.y2 += 1;\n    }\n    const viewRect = {\n        x: -transform[0] / transform[2],\n        y: -transform[1] / transform[2],\n        width: width / transform[2],\n        height: height / transform[2],\n    };\n    return getOverlappingArea(viewRect, boxToRect(edgeBox)) > 0;\n}\nconst getEdgeId = ({ source, sourceHandle, target, targetHandle }) => `xy-edge__${source}${sourceHandle || ''}-${target}${targetHandle || ''}`;\nconst connectionExists = (edge, edges) => {\n    return edges.some((el) => el.source === edge.source &&\n        el.target === edge.target &&\n        (el.sourceHandle === edge.sourceHandle || (!el.sourceHandle && !edge.sourceHandle)) &&\n        (el.targetHandle === edge.targetHandle || (!el.targetHandle && !edge.targetHandle)));\n};\n/**\n * This util is a convenience function to add a new Edge to an array of edges. It also performs some validation to make sure you don't add an invalid edge or duplicate an existing one.\n * @public\n * @param edgeParams - Either an `Edge` or a `Connection` you want to add.\n * @param edges - The array of all current edges.\n * @returns A new array of edges with the new edge added.\n *\n * @remarks If an edge with the same `target` and `source` already exists (and the same\n *`targetHandle` and `sourceHandle` if those are set), then this util won't add\n *a new edge even if the `id` property is different.\n *\n */\nconst addEdge = (edgeParams, edges) => {\n    if (!edgeParams.source || !edgeParams.target) {\n        devWarn('006', errorMessages['error006']());\n        return edges;\n    }\n    let edge;\n    if (isEdgeBase(edgeParams)) {\n        edge = { ...edgeParams };\n    }\n    else {\n        edge = {\n            ...edgeParams,\n            id: getEdgeId(edgeParams),\n        };\n    }\n    if (connectionExists(edge, edges)) {\n        return edges;\n    }\n    if (edge.sourceHandle === null) {\n        delete edge.sourceHandle;\n    }\n    if (edge.targetHandle === null) {\n        delete edge.targetHandle;\n    }\n    return edges.concat(edge);\n};\n/**\n * A handy utility to update an existing [`Edge`](/api-reference/types/edge) with new properties.\n *This searches your edge array for an edge with a matching `id` and updates its\n *properties with the connection you provide.\n * @public\n * @param oldEdge - The edge you want to update.\n * @param newConnection - The new connection you want to update the edge with.\n * @param edges - The array of all current edges.\n * @returns The updated edges array.\n *\n * @example\n * ```js\n *const onReconnect = useCallback(\n *  (oldEdge: Edge, newConnection: Connection) => setEdges((els) => reconnectEdge(oldEdge, newConnection, els)),[]);\n *```\n */\nconst reconnectEdge = (oldEdge, newConnection, edges, options = { shouldReplaceId: true }) => {\n    const { id: oldEdgeId, ...rest } = oldEdge;\n    if (!newConnection.source || !newConnection.target) {\n        devWarn('006', errorMessages['error006']());\n        return edges;\n    }\n    const foundEdge = edges.find((e) => e.id === oldEdge.id);\n    if (!foundEdge) {\n        devWarn('007', errorMessages['error007'](oldEdgeId));\n        return edges;\n    }\n    // Remove old edge and create the new edge with parameters of old edge.\n    const edge = {\n        ...rest,\n        id: options.shouldReplaceId ? getEdgeId(newConnection) : oldEdgeId,\n        source: newConnection.source,\n        target: newConnection.target,\n        sourceHandle: newConnection.sourceHandle,\n        targetHandle: newConnection.targetHandle,\n    };\n    return edges.filter((e) => e.id !== oldEdgeId).concat(edge);\n};\n\n/**\n * Calculates the straight line path between two points.\n * @public\n * @returns A path string you can use in an SVG, the `labelX` and `labelY` position (center of path)\n * and `offsetX`, `offsetY` between source handle and label.\n *\n * - `path`: the path to use in an SVG `<path>` element.\n * - `labelX`: the `x` position you can use to render a label for this edge.\n * - `labelY`: the `y` position you can use to render a label for this edge.\n * - `offsetX`: the absolute difference between the source `x` position and the `x` position of the\n * middle of this path.\n * - `offsetY`: the absolute difference between the source `y` position and the `y` position of the\n * middle of this path.\n * @example\n * ```js\n *  const source = { x: 0, y: 20 };\n *  const target = { x: 150, y: 100 };\n *\n *  const [path, labelX, labelY, offsetX, offsetY] = getStraightPath({\n *    sourceX: source.x,\n *    sourceY: source.y,\n *    sourcePosition: Position.Right,\n *    targetX: target.x,\n *    targetY: target.y,\n *    targetPosition: Position.Left,\n *  });\n * ```\n * @remarks This function returns a tuple (aka a fixed-size array) to make it easier to work with multiple edge paths at once.\n */\nfunction getStraightPath({ sourceX, sourceY, targetX, targetY, }) {\n    const [labelX, labelY, offsetX, offsetY] = getEdgeCenter({\n        sourceX,\n        sourceY,\n        targetX,\n        targetY,\n    });\n    return [`M ${sourceX},${sourceY}L ${targetX},${targetY}`, labelX, labelY, offsetX, offsetY];\n}\n\nconst handleDirections = {\n    [Position.Left]: { x: -1, y: 0 },\n    [Position.Right]: { x: 1, y: 0 },\n    [Position.Top]: { x: 0, y: -1 },\n    [Position.Bottom]: { x: 0, y: 1 },\n};\nconst getDirection = ({ source, sourcePosition = Position.Bottom, target, }) => {\n    if (sourcePosition === Position.Left || sourcePosition === Position.Right) {\n        return source.x < target.x ? { x: 1, y: 0 } : { x: -1, y: 0 };\n    }\n    return source.y < target.y ? { x: 0, y: 1 } : { x: 0, y: -1 };\n};\nconst distance = (a, b) => Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2));\n/*\n * With this function we try to mimic an orthogonal edge routing behaviour\n * It's not as good as a real orthogonal edge routing, but it's faster and good enough as a default for step and smooth step edges\n */\nfunction getPoints({ source, sourcePosition = Position.Bottom, target, targetPosition = Position.Top, center, offset, stepPosition, }) {\n    const sourceDir = handleDirections[sourcePosition];\n    const targetDir = handleDirections[targetPosition];\n    const sourceGapped = { x: source.x + sourceDir.x * offset, y: source.y + sourceDir.y * offset };\n    const targetGapped = { x: target.x + targetDir.x * offset, y: target.y + targetDir.y * offset };\n    const dir = getDirection({\n        source: sourceGapped,\n        sourcePosition,\n        target: targetGapped,\n    });\n    const dirAccessor = dir.x !== 0 ? 'x' : 'y';\n    const currDir = dir[dirAccessor];\n    let points = [];\n    let centerX, centerY;\n    const sourceGapOffset = { x: 0, y: 0 };\n    const targetGapOffset = { x: 0, y: 0 };\n    const [, , defaultOffsetX, defaultOffsetY] = getEdgeCenter({\n        sourceX: source.x,\n        sourceY: source.y,\n        targetX: target.x,\n        targetY: target.y,\n    });\n    // opposite handle positions, default case\n    if (sourceDir[dirAccessor] * targetDir[dirAccessor] === -1) {\n        if (dirAccessor === 'x') {\n            // Primary direction is horizontal, so stepPosition affects X coordinate\n            centerX = center.x ?? (sourceGapped.x + (targetGapped.x - sourceGapped.x) * stepPosition);\n            centerY = center.y ?? (sourceGapped.y + targetGapped.y) / 2;\n        }\n        else {\n            // Primary direction is vertical, so stepPosition affects Y coordinate  \n            centerX = center.x ?? (sourceGapped.x + targetGapped.x) / 2;\n            centerY = center.y ?? (sourceGapped.y + (targetGapped.y - sourceGapped.y) * stepPosition);\n        }\n        /*\n         *    --->\n         *    |\n         * >---\n         */\n        const verticalSplit = [\n            { x: centerX, y: sourceGapped.y },\n            { x: centerX, y: targetGapped.y },\n        ];\n        /*\n         *    |\n         *  ---\n         *  |\n         */\n        const horizontalSplit = [\n            { x: sourceGapped.x, y: centerY },\n            { x: targetGapped.x, y: centerY },\n        ];\n        if (sourceDir[dirAccessor] === currDir) {\n            points = dirAccessor === 'x' ? verticalSplit : horizontalSplit;\n        }\n        else {\n            points = dirAccessor === 'x' ? horizontalSplit : verticalSplit;\n        }\n    }\n    else {\n        // sourceTarget means we take x from source and y from target, targetSource is the opposite\n        const sourceTarget = [{ x: sourceGapped.x, y: targetGapped.y }];\n        const targetSource = [{ x: targetGapped.x, y: sourceGapped.y }];\n        // this handles edges with same handle positions\n        if (dirAccessor === 'x') {\n            points = sourceDir.x === currDir ? targetSource : sourceTarget;\n        }\n        else {\n            points = sourceDir.y === currDir ? sourceTarget : targetSource;\n        }\n        if (sourcePosition === targetPosition) {\n            const diff = Math.abs(source[dirAccessor] - target[dirAccessor]);\n            // if an edge goes from right to right for example (sourcePosition === targetPosition) and the distance between source.x and target.x is less than the offset, the added point and the gapped source/target will overlap. This leads to a weird edge path. To avoid this we add a gapOffset to the source/target\n            if (diff <= offset) {\n                const gapOffset = Math.min(offset - 1, offset - diff);\n                if (sourceDir[dirAccessor] === currDir) {\n                    sourceGapOffset[dirAccessor] = (sourceGapped[dirAccessor] > source[dirAccessor] ? -1 : 1) * gapOffset;\n                }\n                else {\n                    targetGapOffset[dirAccessor] = (targetGapped[dirAccessor] > target[dirAccessor] ? -1 : 1) * gapOffset;\n                }\n            }\n        }\n        // these are conditions for handling mixed handle positions like Right -> Bottom for example\n        if (sourcePosition !== targetPosition) {\n            const dirAccessorOpposite = dirAccessor === 'x' ? 'y' : 'x';\n            const isSameDir = sourceDir[dirAccessor] === targetDir[dirAccessorOpposite];\n            const sourceGtTargetOppo = sourceGapped[dirAccessorOpposite] > targetGapped[dirAccessorOpposite];\n            const sourceLtTargetOppo = sourceGapped[dirAccessorOpposite] < targetGapped[dirAccessorOpposite];\n            const flipSourceTarget = (sourceDir[dirAccessor] === 1 && ((!isSameDir && sourceGtTargetOppo) || (isSameDir && sourceLtTargetOppo))) ||\n                (sourceDir[dirAccessor] !== 1 && ((!isSameDir && sourceLtTargetOppo) || (isSameDir && sourceGtTargetOppo)));\n            if (flipSourceTarget) {\n                points = dirAccessor === 'x' ? sourceTarget : targetSource;\n            }\n        }\n        const sourceGapPoint = { x: sourceGapped.x + sourceGapOffset.x, y: sourceGapped.y + sourceGapOffset.y };\n        const targetGapPoint = { x: targetGapped.x + targetGapOffset.x, y: targetGapped.y + targetGapOffset.y };\n        const maxXDistance = Math.max(Math.abs(sourceGapPoint.x - points[0].x), Math.abs(targetGapPoint.x - points[0].x));\n        const maxYDistance = Math.max(Math.abs(sourceGapPoint.y - points[0].y), Math.abs(targetGapPoint.y - points[0].y));\n        // we want to place the label on the longest segment of the edge\n        if (maxXDistance >= maxYDistance) {\n            centerX = (sourceGapPoint.x + targetGapPoint.x) / 2;\n            centerY = points[0].y;\n        }\n        else {\n            centerX = points[0].x;\n            centerY = (sourceGapPoint.y + targetGapPoint.y) / 2;\n        }\n    }\n    const pathPoints = [\n        source,\n        { x: sourceGapped.x + sourceGapOffset.x, y: sourceGapped.y + sourceGapOffset.y },\n        ...points,\n        { x: targetGapped.x + targetGapOffset.x, y: targetGapped.y + targetGapOffset.y },\n        target,\n    ];\n    return [pathPoints, centerX, centerY, defaultOffsetX, defaultOffsetY];\n}\nfunction getBend(a, b, c, size) {\n    const bendSize = Math.min(distance(a, b) / 2, distance(b, c) / 2, size);\n    const { x, y } = b;\n    // no bend\n    if ((a.x === x && x === c.x) || (a.y === y && y === c.y)) {\n        return `L${x} ${y}`;\n    }\n    // first segment is horizontal\n    if (a.y === y) {\n        const xDir = a.x < c.x ? -1 : 1;\n        const yDir = a.y < c.y ? 1 : -1;\n        return `L ${x + bendSize * xDir},${y}Q ${x},${y} ${x},${y + bendSize * yDir}`;\n    }\n    const xDir = a.x < c.x ? 1 : -1;\n    const yDir = a.y < c.y ? -1 : 1;\n    return `L ${x},${y + bendSize * yDir}Q ${x},${y} ${x + bendSize * xDir},${y}`;\n}\n/**\n * The `getSmoothStepPath` util returns everything you need to render a stepped path\n * between two nodes. The `borderRadius` property can be used to choose how rounded\n * the corners of those steps are.\n * @public\n * @returns A path string you can use in an SVG, the `labelX` and `labelY` position (center of path)\n * and `offsetX`, `offsetY` between source handle and label.\n *\n * - `path`: the path to use in an SVG `<path>` element.\n * - `labelX`: the `x` position you can use to render a label for this edge.\n * - `labelY`: the `y` position you can use to render a label for this edge.\n * - `offsetX`: the absolute difference between the source `x` position and the `x` position of the\n * middle of this path.\n * - `offsetY`: the absolute difference between the source `y` position and the `y` position of the\n * middle of this path.\n * @example\n * ```js\n *  const source = { x: 0, y: 20 };\n *  const target = { x: 150, y: 100 };\n *\n *  const [path, labelX, labelY, offsetX, offsetY] = getSmoothStepPath({\n *    sourceX: source.x,\n *    sourceY: source.y,\n *    sourcePosition: Position.Right,\n *    targetX: target.x,\n *    targetY: target.y,\n *    targetPosition: Position.Left,\n *  });\n * ```\n * @remarks This function returns a tuple (aka a fixed-size array) to make it easier to work with multiple edge paths at once.\n */\nfunction getSmoothStepPath({ sourceX, sourceY, sourcePosition = Position.Bottom, targetX, targetY, targetPosition = Position.Top, borderRadius = 5, centerX, centerY, offset = 20, stepPosition = 0.5, }) {\n    const [points, labelX, labelY, offsetX, offsetY] = getPoints({\n        source: { x: sourceX, y: sourceY },\n        sourcePosition,\n        target: { x: targetX, y: targetY },\n        targetPosition,\n        center: { x: centerX, y: centerY },\n        offset,\n        stepPosition,\n    });\n    const path = points.reduce((res, p, i) => {\n        let segment = '';\n        if (i > 0 && i < points.length - 1) {\n            segment = getBend(points[i - 1], p, points[i + 1], borderRadius);\n        }\n        else {\n            segment = `${i === 0 ? 'M' : 'L'}${p.x} ${p.y}`;\n        }\n        res += segment;\n        return res;\n    }, '');\n    return [path, labelX, labelY, offsetX, offsetY];\n}\n\nfunction isNodeInitialized(node) {\n    return (node &&\n        !!(node.internals.handleBounds || node.handles?.length) &&\n        !!(node.measured.width || node.width || node.initialWidth));\n}\nfunction getEdgePosition(params) {\n    const { sourceNode, targetNode } = params;\n    if (!isNodeInitialized(sourceNode) || !isNodeInitialized(targetNode)) {\n        return null;\n    }\n    const sourceHandleBounds = sourceNode.internals.handleBounds || toHandleBounds(sourceNode.handles);\n    const targetHandleBounds = targetNode.internals.handleBounds || toHandleBounds(targetNode.handles);\n    const sourceHandle = getHandle$1(sourceHandleBounds?.source ?? [], params.sourceHandle);\n    const targetHandle = getHandle$1(\n    // when connection type is loose we can define all handles as sources and connect source -> source\n    params.connectionMode === ConnectionMode.Strict\n        ? targetHandleBounds?.target ?? []\n        : (targetHandleBounds?.target ?? []).concat(targetHandleBounds?.source ?? []), params.targetHandle);\n    if (!sourceHandle || !targetHandle) {\n        params.onError?.('008', errorMessages['error008'](!sourceHandle ? 'source' : 'target', {\n            id: params.id,\n            sourceHandle: params.sourceHandle,\n            targetHandle: params.targetHandle,\n        }));\n        return null;\n    }\n    const sourcePosition = sourceHandle?.position || Position.Bottom;\n    const targetPosition = targetHandle?.position || Position.Top;\n    const source = getHandlePosition(sourceNode, sourceHandle, sourcePosition);\n    const target = getHandlePosition(targetNode, targetHandle, targetPosition);\n    return {\n        sourceX: source.x,\n        sourceY: source.y,\n        targetX: target.x,\n        targetY: target.y,\n        sourcePosition,\n        targetPosition,\n    };\n}\nfunction toHandleBounds(handles) {\n    if (!handles) {\n        return null;\n    }\n    const source = [];\n    const target = [];\n    for (const handle of handles) {\n        handle.width = handle.width ?? 1;\n        handle.height = handle.height ?? 1;\n        if (handle.type === 'source') {\n            source.push(handle);\n        }\n        else if (handle.type === 'target') {\n            target.push(handle);\n        }\n    }\n    return {\n        source,\n        target,\n    };\n}\nfunction getHandlePosition(node, handle, fallbackPosition = Position.Left, center = false) {\n    const x = (handle?.x ?? 0) + node.internals.positionAbsolute.x;\n    const y = (handle?.y ?? 0) + node.internals.positionAbsolute.y;\n    const { width, height } = handle ?? getNodeDimensions(node);\n    if (center) {\n        return { x: x + width / 2, y: y + height / 2 };\n    }\n    const position = handle?.position ?? fallbackPosition;\n    switch (position) {\n        case Position.Top:\n            return { x: x + width / 2, y };\n        case Position.Right:\n            return { x: x + width, y: y + height / 2 };\n        case Position.Bottom:\n            return { x: x + width / 2, y: y + height };\n        case Position.Left:\n            return { x, y: y + height / 2 };\n    }\n}\nfunction getHandle$1(bounds, handleId) {\n    if (!bounds) {\n        return null;\n    }\n    // if no handleId is given, we use the first handle, otherwise we check for the id\n    return (!handleId ? bounds[0] : bounds.find((d) => d.id === handleId)) || null;\n}\n\nfunction getMarkerId(marker, id) {\n    if (!marker) {\n        return '';\n    }\n    if (typeof marker === 'string') {\n        return marker;\n    }\n    const idPrefix = id ? `${id}__` : '';\n    return `${idPrefix}${Object.keys(marker)\n        .sort()\n        .map((key) => `${key}=${marker[key]}`)\n        .join('&')}`;\n}\nfunction createMarkerIds(edges, { id, defaultColor, defaultMarkerStart, defaultMarkerEnd, }) {\n    const ids = new Set();\n    return edges\n        .reduce((markers, edge) => {\n        [edge.markerStart || defaultMarkerStart, edge.markerEnd || defaultMarkerEnd].forEach((marker) => {\n            if (marker && typeof marker === 'object') {\n                const markerId = getMarkerId(marker, id);\n                if (!ids.has(markerId)) {\n                    markers.push({ id: markerId, color: marker.color || defaultColor, ...marker });\n                    ids.add(markerId);\n                }\n            }\n        });\n        return markers;\n    }, [])\n        .sort((a, b) => a.id.localeCompare(b.id));\n}\n\nfunction getNodeToolbarTransform(nodeRect, viewport, position, offset, align) {\n    let alignmentOffset = 0.5;\n    if (align === 'start') {\n        alignmentOffset = 0;\n    }\n    else if (align === 'end') {\n        alignmentOffset = 1;\n    }\n    /*\n     * position === Position.Top\n     * we set the x any y position of the toolbar based on the nodes position\n     */\n    let pos = [\n        (nodeRect.x + nodeRect.width * alignmentOffset) * viewport.zoom + viewport.x,\n        nodeRect.y * viewport.zoom + viewport.y - offset,\n    ];\n    // and than shift it based on the alignment. The shift values are in %.\n    let shift = [-100 * alignmentOffset, -100];\n    switch (position) {\n        case Position.Right:\n            pos = [\n                (nodeRect.x + nodeRect.width) * viewport.zoom + viewport.x + offset,\n                (nodeRect.y + nodeRect.height * alignmentOffset) * viewport.zoom + viewport.y,\n            ];\n            shift = [0, -100 * alignmentOffset];\n            break;\n        case Position.Bottom:\n            pos[1] = (nodeRect.y + nodeRect.height) * viewport.zoom + viewport.y + offset;\n            shift[1] = 0;\n            break;\n        case Position.Left:\n            pos = [\n                nodeRect.x * viewport.zoom + viewport.x - offset,\n                (nodeRect.y + nodeRect.height * alignmentOffset) * viewport.zoom + viewport.y,\n            ];\n            shift = [-100, -100 * alignmentOffset];\n            break;\n    }\n    return `translate(${pos[0]}px, ${pos[1]}px) translate(${shift[0]}%, ${shift[1]}%)`;\n}\n\nconst defaultOptions = {\n    nodeOrigin: [0, 0],\n    nodeExtent: infiniteExtent,\n    elevateNodesOnSelect: true,\n    defaults: {},\n};\nconst adoptUserNodesDefaultOptions = {\n    ...defaultOptions,\n    checkEquality: true,\n};\nfunction mergeObjects(base, incoming) {\n    const result = { ...base };\n    for (const key in incoming) {\n        if (incoming[key] !== undefined) {\n            // typecast is safe here, because we check for undefined\n            result[key] = incoming[key];\n        }\n    }\n    return result;\n}\nfunction updateAbsolutePositions(nodeLookup, parentLookup, options) {\n    const _options = mergeObjects(defaultOptions, options);\n    for (const node of nodeLookup.values()) {\n        if (node.parentId) {\n            updateChildNode(node, nodeLookup, parentLookup, _options);\n        }\n        else {\n            const positionWithOrigin = getNodePositionWithOrigin(node, _options.nodeOrigin);\n            const extent = isCoordinateExtent(node.extent) ? node.extent : _options.nodeExtent;\n            const clampedPosition = clampPosition(positionWithOrigin, extent, getNodeDimensions(node));\n            node.internals.positionAbsolute = clampedPosition;\n        }\n    }\n}\nfunction adoptUserNodes(nodes, nodeLookup, parentLookup, options) {\n    const _options = mergeObjects(adoptUserNodesDefaultOptions, options);\n    let nodesInitialized = nodes.length > 0;\n    const tmpLookup = new Map(nodeLookup);\n    const selectedNodeZ = _options?.elevateNodesOnSelect ? 1000 : 0;\n    nodeLookup.clear();\n    parentLookup.clear();\n    for (const userNode of nodes) {\n        let internalNode = tmpLookup.get(userNode.id);\n        if (_options.checkEquality && userNode === internalNode?.internals.userNode) {\n            nodeLookup.set(userNode.id, internalNode);\n        }\n        else {\n            const positionWithOrigin = getNodePositionWithOrigin(userNode, _options.nodeOrigin);\n            const extent = isCoordinateExtent(userNode.extent) ? userNode.extent : _options.nodeExtent;\n            const clampedPosition = clampPosition(positionWithOrigin, extent, getNodeDimensions(userNode));\n            internalNode = {\n                ..._options.defaults,\n                ...userNode,\n                measured: {\n                    width: userNode.measured?.width,\n                    height: userNode.measured?.height,\n                },\n                internals: {\n                    positionAbsolute: clampedPosition,\n                    // if user re-initializes the node or removes `measured` for whatever reason, we reset the handleBounds so that the node gets re-measured\n                    handleBounds: !userNode.measured ? undefined : internalNode?.internals.handleBounds,\n                    z: calculateZ(userNode, selectedNodeZ),\n                    userNode,\n                },\n            };\n            nodeLookup.set(userNode.id, internalNode);\n        }\n        if ((internalNode.measured === undefined ||\n            internalNode.measured.width === undefined ||\n            internalNode.measured.height === undefined) &&\n            !internalNode.hidden) {\n            nodesInitialized = false;\n        }\n        if (userNode.parentId) {\n            updateChildNode(internalNode, nodeLookup, parentLookup, options);\n        }\n    }\n    return nodesInitialized;\n}\nfunction updateParentLookup(node, parentLookup) {\n    if (!node.parentId) {\n        return;\n    }\n    const childNodes = parentLookup.get(node.parentId);\n    if (childNodes) {\n        childNodes.set(node.id, node);\n    }\n    else {\n        parentLookup.set(node.parentId, new Map([[node.id, node]]));\n    }\n}\n/**\n * Updates positionAbsolute and zIndex of a child node and the parentLookup.\n */\nfunction updateChildNode(node, nodeLookup, parentLookup, options) {\n    const { elevateNodesOnSelect, nodeOrigin, nodeExtent } = mergeObjects(defaultOptions, options);\n    const parentId = node.parentId;\n    const parentNode = nodeLookup.get(parentId);\n    if (!parentNode) {\n        console.warn(`Parent node ${parentId} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);\n        return;\n    }\n    updateParentLookup(node, parentLookup);\n    const selectedNodeZ = elevateNodesOnSelect ? 1000 : 0;\n    const { x, y, z } = calculateChildXYZ(node, parentNode, nodeOrigin, nodeExtent, selectedNodeZ);\n    const { positionAbsolute } = node.internals;\n    const positionChanged = x !== positionAbsolute.x || y !== positionAbsolute.y;\n    if (positionChanged || z !== node.internals.z) {\n        // we create a new object to mark the node as updated\n        nodeLookup.set(node.id, {\n            ...node,\n            internals: {\n                ...node.internals,\n                positionAbsolute: positionChanged ? { x, y } : positionAbsolute,\n                z,\n            },\n        });\n    }\n}\nfunction calculateZ(node, selectedNodeZ) {\n    return (isNumeric(node.zIndex) ? node.zIndex : 0) + (node.selected ? selectedNodeZ : 0);\n}\nfunction calculateChildXYZ(childNode, parentNode, nodeOrigin, nodeExtent, selectedNodeZ) {\n    const { x: parentX, y: parentY } = parentNode.internals.positionAbsolute;\n    const childDimensions = getNodeDimensions(childNode);\n    const positionWithOrigin = getNodePositionWithOrigin(childNode, nodeOrigin);\n    const clampedPosition = isCoordinateExtent(childNode.extent)\n        ? clampPosition(positionWithOrigin, childNode.extent, childDimensions)\n        : positionWithOrigin;\n    let absolutePosition = clampPosition({ x: parentX + clampedPosition.x, y: parentY + clampedPosition.y }, nodeExtent, childDimensions);\n    if (childNode.extent === 'parent') {\n        absolutePosition = clampPositionToParent(absolutePosition, childDimensions, parentNode);\n    }\n    const childZ = calculateZ(childNode, selectedNodeZ);\n    const parentZ = parentNode.internals.z ?? 0;\n    return {\n        x: absolutePosition.x,\n        y: absolutePosition.y,\n        z: parentZ >= childZ ? parentZ + 1 : childZ,\n    };\n}\nfunction handleExpandParent(children, nodeLookup, parentLookup, nodeOrigin = [0, 0]) {\n    const changes = [];\n    const parentExpansions = new Map();\n    // determine the expanded rectangle the child nodes would take for each parent\n    for (const child of children) {\n        const parent = nodeLookup.get(child.parentId);\n        if (!parent) {\n            continue;\n        }\n        const parentRect = parentExpansions.get(child.parentId)?.expandedRect ?? nodeToRect(parent);\n        const expandedRect = getBoundsOfRects(parentRect, child.rect);\n        parentExpansions.set(child.parentId, { expandedRect, parent });\n    }\n    if (parentExpansions.size > 0) {\n        parentExpansions.forEach(({ expandedRect, parent }, parentId) => {\n            // determine the position & dimensions of the parent\n            const positionAbsolute = parent.internals.positionAbsolute;\n            const dimensions = getNodeDimensions(parent);\n            const origin = parent.origin ?? nodeOrigin;\n            // determine how much the parent expands in width and position\n            const xChange = expandedRect.x < positionAbsolute.x ? Math.round(Math.abs(positionAbsolute.x - expandedRect.x)) : 0;\n            const yChange = expandedRect.y < positionAbsolute.y ? Math.round(Math.abs(positionAbsolute.y - expandedRect.y)) : 0;\n            const newWidth = Math.max(dimensions.width, Math.round(expandedRect.width));\n            const newHeight = Math.max(dimensions.height, Math.round(expandedRect.height));\n            const widthChange = (newWidth - dimensions.width) * origin[0];\n            const heightChange = (newHeight - dimensions.height) * origin[1];\n            // We need to correct the position of the parent node if the origin is not [0,0]\n            if (xChange > 0 || yChange > 0 || widthChange || heightChange) {\n                changes.push({\n                    id: parentId,\n                    type: 'position',\n                    position: {\n                        x: parent.position.x - xChange + widthChange,\n                        y: parent.position.y - yChange + heightChange,\n                    },\n                });\n                /*\n                 * We move all child nodes in the oppsite direction\n                 * so the x,y changes of the parent do not move the children\n                 */\n                parentLookup.get(parentId)?.forEach((childNode) => {\n                    if (!children.some((child) => child.id === childNode.id)) {\n                        changes.push({\n                            id: childNode.id,\n                            type: 'position',\n                            position: {\n                                x: childNode.position.x + xChange,\n                                y: childNode.position.y + yChange,\n                            },\n                        });\n                    }\n                });\n            }\n            // We need to correct the dimensions of the parent node if the origin is not [0,0]\n            if (dimensions.width < expandedRect.width || dimensions.height < expandedRect.height || xChange || yChange) {\n                changes.push({\n                    id: parentId,\n                    type: 'dimensions',\n                    setAttributes: true,\n                    dimensions: {\n                        width: newWidth + (xChange ? origin[0] * xChange - widthChange : 0),\n                        height: newHeight + (yChange ? origin[1] * yChange - heightChange : 0),\n                    },\n                });\n            }\n        });\n    }\n    return changes;\n}\nfunction updateNodeInternals(updates, nodeLookup, parentLookup, domNode, nodeOrigin, nodeExtent) {\n    const viewportNode = domNode?.querySelector('.xyflow__viewport');\n    let updatedInternals = false;\n    if (!viewportNode) {\n        return { changes: [], updatedInternals };\n    }\n    const changes = [];\n    const style = window.getComputedStyle(viewportNode);\n    const { m22: zoom } = new window.DOMMatrixReadOnly(style.transform);\n    // in this array we collect nodes, that might trigger changes (like expanding parent)\n    const parentExpandChildren = [];\n    for (const update of updates.values()) {\n        const node = nodeLookup.get(update.id);\n        if (!node) {\n            continue;\n        }\n        if (node.hidden) {\n            nodeLookup.set(node.id, {\n                ...node,\n                internals: {\n                    ...node.internals,\n                    handleBounds: undefined,\n                },\n            });\n            updatedInternals = true;\n            continue;\n        }\n        const dimensions = getDimensions(update.nodeElement);\n        const dimensionChanged = node.measured.width !== dimensions.width || node.measured.height !== dimensions.height;\n        const doUpdate = !!(dimensions.width &&\n            dimensions.height &&\n            (dimensionChanged || !node.internals.handleBounds || update.force));\n        if (doUpdate) {\n            const nodeBounds = update.nodeElement.getBoundingClientRect();\n            const extent = isCoordinateExtent(node.extent) ? node.extent : nodeExtent;\n            let { positionAbsolute } = node.internals;\n            if (node.parentId && node.extent === 'parent') {\n                positionAbsolute = clampPositionToParent(positionAbsolute, dimensions, nodeLookup.get(node.parentId));\n            }\n            else if (extent) {\n                positionAbsolute = clampPosition(positionAbsolute, extent, dimensions);\n            }\n            const newNode = {\n                ...node,\n                measured: dimensions,\n                internals: {\n                    ...node.internals,\n                    positionAbsolute,\n                    handleBounds: {\n                        source: getHandleBounds('source', update.nodeElement, nodeBounds, zoom, node.id),\n                        target: getHandleBounds('target', update.nodeElement, nodeBounds, zoom, node.id),\n                    },\n                },\n            };\n            nodeLookup.set(node.id, newNode);\n            if (node.parentId) {\n                updateChildNode(newNode, nodeLookup, parentLookup, { nodeOrigin });\n            }\n            updatedInternals = true;\n            if (dimensionChanged) {\n                changes.push({\n                    id: node.id,\n                    type: 'dimensions',\n                    dimensions,\n                });\n                if (node.expandParent && node.parentId) {\n                    parentExpandChildren.push({\n                        id: node.id,\n                        parentId: node.parentId,\n                        rect: nodeToRect(newNode, nodeOrigin),\n                    });\n                }\n            }\n        }\n    }\n    if (parentExpandChildren.length > 0) {\n        const parentExpandChanges = handleExpandParent(parentExpandChildren, nodeLookup, parentLookup, nodeOrigin);\n        changes.push(...parentExpandChanges);\n    }\n    return { changes, updatedInternals };\n}\nasync function panBy({ delta, panZoom, transform, translateExtent, width, height, }) {\n    if (!panZoom || (!delta.x && !delta.y)) {\n        return Promise.resolve(false);\n    }\n    const nextViewport = await panZoom.setViewportConstrained({\n        x: transform[0] + delta.x,\n        y: transform[1] + delta.y,\n        zoom: transform[2],\n    }, [\n        [0, 0],\n        [width, height],\n    ], translateExtent);\n    const transformChanged = !!nextViewport &&\n        (nextViewport.x !== transform[0] || nextViewport.y !== transform[1] || nextViewport.k !== transform[2]);\n    return Promise.resolve(transformChanged);\n}\n/**\n * this function adds the connection to the connectionLookup\n * at the following keys: nodeId-type-handleId, nodeId-type and nodeId\n * @param type type of the connection\n * @param connection connection that should be added to the lookup\n * @param connectionKey at which key the connection should be added\n * @param connectionLookup reference to the connection lookup\n * @param nodeId nodeId of the connection\n * @param handleId handleId of the conneciton\n */\nfunction addConnectionToLookup(type, connection, connectionKey, connectionLookup, nodeId, handleId) {\n    /*\n     * We add the connection to the connectionLookup at the following keys\n     * 1. nodeId, 2. nodeId-type, 3. nodeId-type-handleId\n     * If the key already exists, we add the connection to the existing map\n     */\n    let key = nodeId;\n    const nodeMap = connectionLookup.get(key) || new Map();\n    connectionLookup.set(key, nodeMap.set(connectionKey, connection));\n    key = `${nodeId}-${type}`;\n    const typeMap = connectionLookup.get(key) || new Map();\n    connectionLookup.set(key, typeMap.set(connectionKey, connection));\n    if (handleId) {\n        key = `${nodeId}-${type}-${handleId}`;\n        const handleMap = connectionLookup.get(key) || new Map();\n        connectionLookup.set(key, handleMap.set(connectionKey, connection));\n    }\n}\nfunction updateConnectionLookup(connectionLookup, edgeLookup, edges) {\n    connectionLookup.clear();\n    edgeLookup.clear();\n    for (const edge of edges) {\n        const { source: sourceNode, target: targetNode, sourceHandle = null, targetHandle = null } = edge;\n        const connection = { edgeId: edge.id, source: sourceNode, target: targetNode, sourceHandle, targetHandle };\n        const sourceKey = `${sourceNode}-${sourceHandle}--${targetNode}-${targetHandle}`;\n        const targetKey = `${targetNode}-${targetHandle}--${sourceNode}-${sourceHandle}`;\n        addConnectionToLookup('source', connection, targetKey, connectionLookup, sourceNode, sourceHandle);\n        addConnectionToLookup('target', connection, sourceKey, connectionLookup, targetNode, targetHandle);\n        edgeLookup.set(edge.id, edge);\n    }\n}\n\nfunction shallowNodeData(a, b) {\n    if (a === null || b === null) {\n        return false;\n    }\n    const _a = Array.isArray(a) ? a : [a];\n    const _b = Array.isArray(b) ? b : [b];\n    if (_a.length !== _b.length) {\n        return false;\n    }\n    for (let i = 0; i < _a.length; i++) {\n        if (_a[i].id !== _b[i].id || _a[i].type !== _b[i].type || !Object.is(_a[i].data, _b[i].data)) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction isParentSelected(node, nodeLookup) {\n    if (!node.parentId) {\n        return false;\n    }\n    const parentNode = nodeLookup.get(node.parentId);\n    if (!parentNode) {\n        return false;\n    }\n    if (parentNode.selected) {\n        return true;\n    }\n    return isParentSelected(parentNode, nodeLookup);\n}\nfunction hasSelector(target, selector, domNode) {\n    let current = target;\n    do {\n        if (current?.matches?.(selector))\n            return true;\n        if (current === domNode)\n            return false;\n        current = current?.parentElement;\n    } while (current);\n    return false;\n}\n// looks for all selected nodes and created a NodeDragItem for each of them\nfunction getDragItems(nodeLookup, nodesDraggable, mousePos, nodeId) {\n    const dragItems = new Map();\n    for (const [id, node] of nodeLookup) {\n        if ((node.selected || node.id === nodeId) &&\n            (!node.parentId || !isParentSelected(node, nodeLookup)) &&\n            (node.draggable || (nodesDraggable && typeof node.draggable === 'undefined'))) {\n            const internalNode = nodeLookup.get(id);\n            if (internalNode) {\n                dragItems.set(id, {\n                    id,\n                    position: internalNode.position || { x: 0, y: 0 },\n                    distance: {\n                        x: mousePos.x - internalNode.internals.positionAbsolute.x,\n                        y: mousePos.y - internalNode.internals.positionAbsolute.y,\n                    },\n                    extent: internalNode.extent,\n                    parentId: internalNode.parentId,\n                    origin: internalNode.origin,\n                    expandParent: internalNode.expandParent,\n                    internals: {\n                        positionAbsolute: internalNode.internals.positionAbsolute || { x: 0, y: 0 },\n                    },\n                    measured: {\n                        width: internalNode.measured.width ?? 0,\n                        height: internalNode.measured.height ?? 0,\n                    },\n                });\n            }\n        }\n    }\n    return dragItems;\n}\n/*\n * returns two params:\n * 1. the dragged node (or the first of the list, if we are dragging a node selection)\n * 2. array of selected nodes (for multi selections)\n */\nfunction getEventHandlerParams({ nodeId, dragItems, nodeLookup, dragging = true, }) {\n    const nodesFromDragItems = [];\n    for (const [id, dragItem] of dragItems) {\n        const node = nodeLookup.get(id)?.internals.userNode;\n        if (node) {\n            nodesFromDragItems.push({\n                ...node,\n                position: dragItem.position,\n                dragging,\n            });\n        }\n    }\n    if (!nodeId) {\n        return [nodesFromDragItems[0], nodesFromDragItems];\n    }\n    const node = nodeLookup.get(nodeId)?.internals.userNode;\n    return [\n        !node\n            ? nodesFromDragItems[0]\n            : {\n                ...node,\n                position: dragItems.get(nodeId)?.position || node.position,\n                dragging,\n            },\n        nodesFromDragItems,\n    ];\n}\n/**\n * If a selection is being dragged we want to apply the same snap offset to all nodes in the selection.\n * This function calculates the snap offset based on the first node in the selection.\n */\nfunction calculateSnapOffset({ dragItems, snapGrid, x, y, }) {\n    const refDragItem = dragItems.values().next().value;\n    if (!refDragItem) {\n        return null;\n    }\n    const refPos = {\n        x: x - refDragItem.distance.x,\n        y: y - refDragItem.distance.y,\n    };\n    const refPosSnapped = snapPosition(refPos, snapGrid);\n    return {\n        x: refPosSnapped.x - refPos.x,\n        y: refPosSnapped.y - refPos.y,\n    };\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction XYDrag({ onNodeMouseDown, getStoreItems, onDragStart, onDrag, onDragStop, }) {\n    let lastPos = { x: null, y: null };\n    let autoPanId = 0;\n    let dragItems = new Map();\n    let autoPanStarted = false;\n    let mousePosition = { x: 0, y: 0 };\n    let containerBounds = null;\n    let dragStarted = false;\n    let d3Selection = null;\n    let abortDrag = false; // prevents unintentional dragging on multitouch\n    let nodePositionsChanged = false;\n    // we store the last drag event to be able to use it in the update function\n    let dragEvent = null;\n    // public functions\n    function update({ noDragClassName, handleSelector, domNode, isSelectable, nodeId, nodeClickDistance = 0, }) {\n        d3Selection = select(domNode);\n        function updateNodes({ x, y }) {\n            const { nodeLookup, nodeExtent, snapGrid, snapToGrid, nodeOrigin, onNodeDrag, onSelectionDrag, onError, updateNodePositions, } = getStoreItems();\n            lastPos = { x, y };\n            let hasChange = false;\n            const isMultiDrag = dragItems.size > 1;\n            const nodesBox = isMultiDrag && nodeExtent ? rectToBox(getInternalNodesBounds(dragItems)) : null;\n            const multiDragSnapOffset = isMultiDrag && snapToGrid\n                ? calculateSnapOffset({\n                    dragItems,\n                    snapGrid,\n                    x,\n                    y,\n                })\n                : null;\n            for (const [id, dragItem] of dragItems) {\n                /*\n                 * if the node is not in the nodeLookup anymore, it was probably deleted while dragging\n                 */\n                if (!nodeLookup.has(id)) {\n                    continue;\n                }\n                let nextPosition = { x: x - dragItem.distance.x, y: y - dragItem.distance.y };\n                if (snapToGrid) {\n                    nextPosition = multiDragSnapOffset\n                        ? {\n                            x: Math.round(nextPosition.x + multiDragSnapOffset.x),\n                            y: Math.round(nextPosition.y + multiDragSnapOffset.y),\n                        }\n                        : snapPosition(nextPosition, snapGrid);\n                }\n                let adjustedNodeExtent = null;\n                if (isMultiDrag && nodeExtent && !dragItem.extent && nodesBox) {\n                    const { positionAbsolute } = dragItem.internals;\n                    const x1 = positionAbsolute.x - nodesBox.x + nodeExtent[0][0];\n                    const x2 = positionAbsolute.x + dragItem.measured.width - nodesBox.x2 + nodeExtent[1][0];\n                    const y1 = positionAbsolute.y - nodesBox.y + nodeExtent[0][1];\n                    const y2 = positionAbsolute.y + dragItem.measured.height - nodesBox.y2 + nodeExtent[1][1];\n                    adjustedNodeExtent = [\n                        [x1, y1],\n                        [x2, y2],\n                    ];\n                }\n                const { position, positionAbsolute } = calculateNodePosition({\n                    nodeId: id,\n                    nextPosition,\n                    nodeLookup,\n                    nodeExtent: adjustedNodeExtent ? adjustedNodeExtent : nodeExtent,\n                    nodeOrigin,\n                    onError,\n                });\n                // we want to make sure that we only fire a change event when there is a change\n                hasChange = hasChange || dragItem.position.x !== position.x || dragItem.position.y !== position.y;\n                dragItem.position = position;\n                dragItem.internals.positionAbsolute = positionAbsolute;\n            }\n            nodePositionsChanged = nodePositionsChanged || hasChange;\n            if (!hasChange) {\n                return;\n            }\n            updateNodePositions(dragItems, true);\n            if (dragEvent && (onDrag || onNodeDrag || (!nodeId && onSelectionDrag))) {\n                const [currentNode, currentNodes] = getEventHandlerParams({\n                    nodeId,\n                    dragItems,\n                    nodeLookup,\n                });\n                onDrag?.(dragEvent, dragItems, currentNode, currentNodes);\n                onNodeDrag?.(dragEvent, currentNode, currentNodes);\n                if (!nodeId) {\n                    onSelectionDrag?.(dragEvent, currentNodes);\n                }\n            }\n        }\n        async function autoPan() {\n            if (!containerBounds) {\n                return;\n            }\n            const { transform, panBy, autoPanSpeed, autoPanOnNodeDrag } = getStoreItems();\n            if (!autoPanOnNodeDrag) {\n                autoPanStarted = false;\n                cancelAnimationFrame(autoPanId);\n                return;\n            }\n            const [xMovement, yMovement] = calcAutoPan(mousePosition, containerBounds, autoPanSpeed);\n            if (xMovement !== 0 || yMovement !== 0) {\n                lastPos.x = (lastPos.x ?? 0) - xMovement / transform[2];\n                lastPos.y = (lastPos.y ?? 0) - yMovement / transform[2];\n                if (await panBy({ x: xMovement, y: yMovement })) {\n                    updateNodes(lastPos);\n                }\n            }\n            autoPanId = requestAnimationFrame(autoPan);\n        }\n        function startDrag(event) {\n            const { nodeLookup, multiSelectionActive, nodesDraggable, transform, snapGrid, snapToGrid, selectNodesOnDrag, onNodeDragStart, onSelectionDragStart, unselectNodesAndEdges, } = getStoreItems();\n            dragStarted = true;\n            if ((!selectNodesOnDrag || !isSelectable) && !multiSelectionActive && nodeId) {\n                if (!nodeLookup.get(nodeId)?.selected) {\n                    // we need to reset selected nodes when selectNodesOnDrag=false\n                    unselectNodesAndEdges();\n                }\n            }\n            if (isSelectable && selectNodesOnDrag && nodeId) {\n                onNodeMouseDown?.(nodeId);\n            }\n            const pointerPos = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid, containerBounds });\n            lastPos = pointerPos;\n            dragItems = getDragItems(nodeLookup, nodesDraggable, pointerPos, nodeId);\n            if (dragItems.size > 0 && (onDragStart || onNodeDragStart || (!nodeId && onSelectionDragStart))) {\n                const [currentNode, currentNodes] = getEventHandlerParams({\n                    nodeId,\n                    dragItems,\n                    nodeLookup,\n                });\n                onDragStart?.(event.sourceEvent, dragItems, currentNode, currentNodes);\n                onNodeDragStart?.(event.sourceEvent, currentNode, currentNodes);\n                if (!nodeId) {\n                    onSelectionDragStart?.(event.sourceEvent, currentNodes);\n                }\n            }\n        }\n        const d3DragInstance = drag()\n            .clickDistance(nodeClickDistance)\n            .on('start', (event) => {\n            const { domNode, nodeDragThreshold, transform, snapGrid, snapToGrid } = getStoreItems();\n            containerBounds = domNode?.getBoundingClientRect() || null;\n            abortDrag = false;\n            nodePositionsChanged = false;\n            dragEvent = event.sourceEvent;\n            if (nodeDragThreshold === 0) {\n                startDrag(event);\n            }\n            const pointerPos = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid, containerBounds });\n            lastPos = pointerPos;\n            mousePosition = getEventPosition(event.sourceEvent, containerBounds);\n        })\n            .on('drag', (event) => {\n            const { autoPanOnNodeDrag, transform, snapGrid, snapToGrid, nodeDragThreshold, nodeLookup } = getStoreItems();\n            const pointerPos = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid, containerBounds });\n            dragEvent = event.sourceEvent;\n            if ((event.sourceEvent.type === 'touchmove' && event.sourceEvent.touches.length > 1) ||\n                // if user deletes a node while dragging, we need to abort the drag to prevent errors\n                (nodeId && !nodeLookup.has(nodeId))) {\n                abortDrag = true;\n            }\n            if (abortDrag) {\n                return;\n            }\n            if (!autoPanStarted && autoPanOnNodeDrag && dragStarted) {\n                autoPanStarted = true;\n                autoPan();\n            }\n            if (!dragStarted) {\n                const x = pointerPos.xSnapped - (lastPos.x ?? 0);\n                const y = pointerPos.ySnapped - (lastPos.y ?? 0);\n                const distance = Math.sqrt(x * x + y * y);\n                if (distance > nodeDragThreshold) {\n                    startDrag(event);\n                }\n            }\n            // skip events without movement\n            if ((lastPos.x !== pointerPos.xSnapped || lastPos.y !== pointerPos.ySnapped) && dragItems && dragStarted) {\n                mousePosition = getEventPosition(event.sourceEvent, containerBounds);\n                updateNodes(pointerPos);\n            }\n        })\n            .on('end', (event) => {\n            if (!dragStarted || abortDrag) {\n                return;\n            }\n            autoPanStarted = false;\n            dragStarted = false;\n            cancelAnimationFrame(autoPanId);\n            if (dragItems.size > 0) {\n                const { nodeLookup, updateNodePositions, onNodeDragStop, onSelectionDragStop } = getStoreItems();\n                if (nodePositionsChanged) {\n                    updateNodePositions(dragItems, false);\n                    nodePositionsChanged = false;\n                }\n                if (onDragStop || onNodeDragStop || (!nodeId && onSelectionDragStop)) {\n                    const [currentNode, currentNodes] = getEventHandlerParams({\n                        nodeId,\n                        dragItems,\n                        nodeLookup,\n                        dragging: false,\n                    });\n                    onDragStop?.(event.sourceEvent, dragItems, currentNode, currentNodes);\n                    onNodeDragStop?.(event.sourceEvent, currentNode, currentNodes);\n                    if (!nodeId) {\n                        onSelectionDragStop?.(event.sourceEvent, currentNodes);\n                    }\n                }\n            }\n        })\n            .filter((event) => {\n            const target = event.target;\n            const isDraggable = !event.button &&\n                (!noDragClassName || !hasSelector(target, `.${noDragClassName}`, domNode)) &&\n                (!handleSelector || hasSelector(target, handleSelector, domNode));\n            return isDraggable;\n        });\n        d3Selection.call(d3DragInstance);\n    }\n    function destroy() {\n        d3Selection?.on('.drag', null);\n    }\n    return {\n        update,\n        destroy,\n    };\n}\n\nfunction getNodesWithinDistance(position, nodeLookup, distance) {\n    const nodes = [];\n    const rect = {\n        x: position.x - distance,\n        y: position.y - distance,\n        width: distance * 2,\n        height: distance * 2,\n    };\n    for (const node of nodeLookup.values()) {\n        if (getOverlappingArea(rect, nodeToRect(node)) > 0) {\n            nodes.push(node);\n        }\n    }\n    return nodes;\n}\n/*\n * this distance is used for the area around the user pointer\n * while doing a connection for finding the closest nodes\n */\nconst ADDITIONAL_DISTANCE = 250;\nfunction getClosestHandle(position, connectionRadius, nodeLookup, fromHandle) {\n    let closestHandles = [];\n    let minDistance = Infinity;\n    const closeNodes = getNodesWithinDistance(position, nodeLookup, connectionRadius + ADDITIONAL_DISTANCE);\n    for (const node of closeNodes) {\n        const allHandles = [...(node.internals.handleBounds?.source ?? []), ...(node.internals.handleBounds?.target ?? [])];\n        for (const handle of allHandles) {\n            // if the handle is the same as the fromHandle we skip it\n            if (fromHandle.nodeId === handle.nodeId && fromHandle.type === handle.type && fromHandle.id === handle.id) {\n                continue;\n            }\n            // determine absolute position of the handle\n            const { x, y } = getHandlePosition(node, handle, handle.position, true);\n            const distance = Math.sqrt(Math.pow(x - position.x, 2) + Math.pow(y - position.y, 2));\n            if (distance > connectionRadius) {\n                continue;\n            }\n            if (distance < minDistance) {\n                closestHandles = [{ ...handle, x, y }];\n                minDistance = distance;\n            }\n            else if (distance === minDistance) {\n                // when multiple handles are on the same distance we collect all of them\n                closestHandles.push({ ...handle, x, y });\n            }\n        }\n    }\n    if (!closestHandles.length) {\n        return null;\n    }\n    // when multiple handles overlay each other we prefer the opposite handle\n    if (closestHandles.length > 1) {\n        const oppositeHandleType = fromHandle.type === 'source' ? 'target' : 'source';\n        return closestHandles.find((handle) => handle.type === oppositeHandleType) ?? closestHandles[0];\n    }\n    return closestHandles[0];\n}\nfunction getHandle(nodeId, handleType, handleId, nodeLookup, connectionMode, withAbsolutePosition = false) {\n    const node = nodeLookup.get(nodeId);\n    if (!node) {\n        return null;\n    }\n    const handles = connectionMode === 'strict'\n        ? node.internals.handleBounds?.[handleType]\n        : [...(node.internals.handleBounds?.source ?? []), ...(node.internals.handleBounds?.target ?? [])];\n    const handle = (handleId ? handles?.find((h) => h.id === handleId) : handles?.[0]) ?? null;\n    return handle && withAbsolutePosition\n        ? { ...handle, ...getHandlePosition(node, handle, handle.position, true) }\n        : handle;\n}\nfunction getHandleType(edgeUpdaterType, handleDomNode) {\n    if (edgeUpdaterType) {\n        return edgeUpdaterType;\n    }\n    else if (handleDomNode?.classList.contains('target')) {\n        return 'target';\n    }\n    else if (handleDomNode?.classList.contains('source')) {\n        return 'source';\n    }\n    return null;\n}\nfunction isConnectionValid(isInsideConnectionRadius, isHandleValid) {\n    let isValid = null;\n    if (isHandleValid) {\n        isValid = true;\n    }\n    else if (isInsideConnectionRadius && !isHandleValid) {\n        isValid = false;\n    }\n    return isValid;\n}\n\nconst alwaysValid = () => true;\nfunction onPointerDown(event, { connectionMode, connectionRadius, handleId, nodeId, edgeUpdaterType, isTarget, domNode, nodeLookup, lib, autoPanOnConnect, flowId, panBy, cancelConnection, onConnectStart, onConnect, onConnectEnd, isValidConnection = alwaysValid, onReconnectEnd, updateConnection, getTransform, getFromHandle, autoPanSpeed, dragThreshold = 1, handleDomNode, }) {\n    // when xyflow is used inside a shadow root we can't use document\n    const doc = getHostForElement(event.target);\n    let autoPanId = 0;\n    let closestHandle;\n    const { x, y } = getEventPosition(event);\n    const handleType = getHandleType(edgeUpdaterType, handleDomNode);\n    const containerBounds = domNode?.getBoundingClientRect();\n    let connectionStarted = false;\n    if (!containerBounds || !handleType) {\n        return;\n    }\n    const fromHandleInternal = getHandle(nodeId, handleType, handleId, nodeLookup, connectionMode);\n    if (!fromHandleInternal) {\n        return;\n    }\n    let position = getEventPosition(event, containerBounds);\n    let autoPanStarted = false;\n    let connection = null;\n    let isValid = false;\n    let resultHandleDomNode = null;\n    // when the user is moving the mouse close to the edge of the canvas while connecting we move the canvas\n    function autoPan() {\n        if (!autoPanOnConnect || !containerBounds) {\n            return;\n        }\n        const [x, y] = calcAutoPan(position, containerBounds, autoPanSpeed);\n        panBy({ x, y });\n        autoPanId = requestAnimationFrame(autoPan);\n    }\n    // Stays the same for all consecutive pointermove events\n    const fromHandle = {\n        ...fromHandleInternal,\n        nodeId,\n        type: handleType,\n        position: fromHandleInternal.position,\n    };\n    const fromNodeInternal = nodeLookup.get(nodeId);\n    const from = getHandlePosition(fromNodeInternal, fromHandle, Position.Left, true);\n    let previousConnection = {\n        inProgress: true,\n        isValid: null,\n        from,\n        fromHandle,\n        fromPosition: fromHandle.position,\n        fromNode: fromNodeInternal,\n        to: position,\n        toHandle: null,\n        toPosition: oppositePosition[fromHandle.position],\n        toNode: null,\n    };\n    function startConnection() {\n        connectionStarted = true;\n        updateConnection(previousConnection);\n        onConnectStart?.(event, { nodeId, handleId, handleType });\n    }\n    if (dragThreshold === 0) {\n        startConnection();\n    }\n    function onPointerMove(event) {\n        if (!connectionStarted) {\n            const { x: evtX, y: evtY } = getEventPosition(event);\n            const dx = evtX - x;\n            const dy = evtY - y;\n            const nextConnectionStarted = dx * dx + dy * dy > dragThreshold * dragThreshold;\n            if (!nextConnectionStarted) {\n                return;\n            }\n            startConnection();\n        }\n        if (!getFromHandle() || !fromHandle) {\n            onPointerUp(event);\n            return;\n        }\n        const transform = getTransform();\n        position = getEventPosition(event, containerBounds);\n        closestHandle = getClosestHandle(pointToRendererPoint(position, transform, false, [1, 1]), connectionRadius, nodeLookup, fromHandle);\n        if (!autoPanStarted) {\n            autoPan();\n            autoPanStarted = true;\n        }\n        const result = isValidHandle(event, {\n            handle: closestHandle,\n            connectionMode,\n            fromNodeId: nodeId,\n            fromHandleId: handleId,\n            fromType: isTarget ? 'target' : 'source',\n            isValidConnection,\n            doc,\n            lib,\n            flowId,\n            nodeLookup,\n        });\n        resultHandleDomNode = result.handleDomNode;\n        connection = result.connection;\n        isValid = isConnectionValid(!!closestHandle, result.isValid);\n        const newConnection = {\n            // from stays the same\n            ...previousConnection,\n            isValid,\n            to: result.toHandle && isValid\n                ? rendererPointToPoint({ x: result.toHandle.x, y: result.toHandle.y }, transform)\n                : position,\n            toHandle: result.toHandle,\n            toPosition: isValid && result.toHandle ? result.toHandle.position : oppositePosition[fromHandle.position],\n            toNode: result.toHandle ? nodeLookup.get(result.toHandle.nodeId) : null,\n        };\n        /*\n         * we don't want to trigger an update when the connection\n         * is snapped to the same handle as before\n         */\n        if (isValid &&\n            closestHandle &&\n            previousConnection.toHandle &&\n            newConnection.toHandle &&\n            previousConnection.toHandle.type === newConnection.toHandle.type &&\n            previousConnection.toHandle.nodeId === newConnection.toHandle.nodeId &&\n            previousConnection.toHandle.id === newConnection.toHandle.id &&\n            previousConnection.to.x === newConnection.to.x &&\n            previousConnection.to.y === newConnection.to.y) {\n            return;\n        }\n        updateConnection(newConnection);\n        previousConnection = newConnection;\n    }\n    function onPointerUp(event) {\n        if (connectionStarted) {\n            if ((closestHandle || resultHandleDomNode) && connection && isValid) {\n                onConnect?.(connection);\n            }\n            /*\n             * it's important to get a fresh reference from the store here\n             * in order to get the latest state of onConnectEnd\n             */\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            const { inProgress, ...connectionState } = previousConnection;\n            const finalConnectionState = {\n                ...connectionState,\n                toPosition: previousConnection.toHandle ? previousConnection.toPosition : null,\n            };\n            onConnectEnd?.(event, finalConnectionState);\n            if (edgeUpdaterType) {\n                onReconnectEnd?.(event, finalConnectionState);\n            }\n        }\n        cancelConnection();\n        cancelAnimationFrame(autoPanId);\n        autoPanStarted = false;\n        isValid = false;\n        connection = null;\n        resultHandleDomNode = null;\n        doc.removeEventListener('mousemove', onPointerMove);\n        doc.removeEventListener('mouseup', onPointerUp);\n        doc.removeEventListener('touchmove', onPointerMove);\n        doc.removeEventListener('touchend', onPointerUp);\n    }\n    doc.addEventListener('mousemove', onPointerMove);\n    doc.addEventListener('mouseup', onPointerUp);\n    doc.addEventListener('touchmove', onPointerMove);\n    doc.addEventListener('touchend', onPointerUp);\n}\n// checks if  and returns connection in fom of an object { source: 123, target: 312 }\nfunction isValidHandle(event, { handle, connectionMode, fromNodeId, fromHandleId, fromType, doc, lib, flowId, isValidConnection = alwaysValid, nodeLookup, }) {\n    const isTarget = fromType === 'target';\n    const handleDomNode = handle\n        ? doc.querySelector(`.${lib}-flow__handle[data-id=\"${flowId}-${handle?.nodeId}-${handle?.id}-${handle?.type}\"]`)\n        : null;\n    const { x, y } = getEventPosition(event);\n    const handleBelow = doc.elementFromPoint(x, y);\n    /*\n     * we always want to prioritize the handle below the mouse cursor over the closest distance handle,\n     * because it could be that the center of another handle is closer to the mouse pointer than the handle below the cursor\n     */\n    const handleToCheck = handleBelow?.classList.contains(`${lib}-flow__handle`) ? handleBelow : handleDomNode;\n    const result = {\n        handleDomNode: handleToCheck,\n        isValid: false,\n        connection: null,\n        toHandle: null,\n    };\n    if (handleToCheck) {\n        const handleType = getHandleType(undefined, handleToCheck);\n        const handleNodeId = handleToCheck.getAttribute('data-nodeid');\n        const handleId = handleToCheck.getAttribute('data-handleid');\n        const connectable = handleToCheck.classList.contains('connectable');\n        const connectableEnd = handleToCheck.classList.contains('connectableend');\n        if (!handleNodeId || !handleType) {\n            return result;\n        }\n        const connection = {\n            source: isTarget ? handleNodeId : fromNodeId,\n            sourceHandle: isTarget ? handleId : fromHandleId,\n            target: isTarget ? fromNodeId : handleNodeId,\n            targetHandle: isTarget ? fromHandleId : handleId,\n        };\n        result.connection = connection;\n        const isConnectable = connectable && connectableEnd;\n        // in strict mode we don't allow target to target or source to source connections\n        const isValid = isConnectable &&\n            (connectionMode === ConnectionMode.Strict\n                ? (isTarget && handleType === 'source') || (!isTarget && handleType === 'target')\n                : handleNodeId !== fromNodeId || handleId !== fromHandleId);\n        result.isValid = isValid && isValidConnection(connection);\n        result.toHandle = getHandle(handleNodeId, handleType, handleId, nodeLookup, connectionMode, true);\n    }\n    return result;\n}\nconst XYHandle = {\n    onPointerDown,\n    isValid: isValidHandle,\n};\n\nfunction XYMinimap({ domNode, panZoom, getTransform, getViewScale }) {\n    const selection = select(domNode);\n    function update({ translateExtent, width, height, zoomStep = 1, pannable = true, zoomable = true, inversePan = false, }) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const zoomHandler = (event) => {\n            if (event.sourceEvent.type !== 'wheel' || !panZoom) {\n                return;\n            }\n            const transform = getTransform();\n            const factor = event.sourceEvent.ctrlKey && isMacOs() ? 10 : 1;\n            const pinchDelta = -event.sourceEvent.deltaY *\n                (event.sourceEvent.deltaMode === 1 ? 0.05 : event.sourceEvent.deltaMode ? 1 : 0.002) *\n                zoomStep;\n            const nextZoom = transform[2] * Math.pow(2, pinchDelta * factor);\n            panZoom.scaleTo(nextZoom);\n        };\n        let panStart = [0, 0];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const panStartHandler = (event) => {\n            if (event.sourceEvent.type === 'mousedown' || event.sourceEvent.type === 'touchstart') {\n                panStart = [\n                    event.sourceEvent.clientX ?? event.sourceEvent.touches[0].clientX,\n                    event.sourceEvent.clientY ?? event.sourceEvent.touches[0].clientY,\n                ];\n            }\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const panHandler = (event) => {\n            const transform = getTransform();\n            if ((event.sourceEvent.type !== 'mousemove' && event.sourceEvent.type !== 'touchmove') || !panZoom) {\n                return;\n            }\n            const panCurrent = [\n                event.sourceEvent.clientX ?? event.sourceEvent.touches[0].clientX,\n                event.sourceEvent.clientY ?? event.sourceEvent.touches[0].clientY,\n            ];\n            const panDelta = [panCurrent[0] - panStart[0], panCurrent[1] - panStart[1]];\n            panStart = panCurrent;\n            const moveScale = getViewScale() * Math.max(transform[2], Math.log(transform[2])) * (inversePan ? -1 : 1);\n            const position = {\n                x: transform[0] - panDelta[0] * moveScale,\n                y: transform[1] - panDelta[1] * moveScale,\n            };\n            const extent = [\n                [0, 0],\n                [width, height],\n            ];\n            panZoom.setViewportConstrained({\n                x: position.x,\n                y: position.y,\n                zoom: transform[2],\n            }, extent, translateExtent);\n        };\n        const zoomAndPanHandler = zoom()\n            .on('start', panStartHandler)\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            .on('zoom', pannable ? panHandler : null)\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            .on('zoom.wheel', zoomable ? zoomHandler : null);\n        selection.call(zoomAndPanHandler, {});\n    }\n    function destroy() {\n        selection.on('zoom', null);\n    }\n    return {\n        update,\n        destroy,\n        pointer,\n    };\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nconst viewChanged = (prevViewport, eventViewport) => prevViewport.x !== eventViewport.x || prevViewport.y !== eventViewport.y || prevViewport.zoom !== eventViewport.k;\nconst transformToViewport = (transform) => ({\n    x: transform.x,\n    y: transform.y,\n    zoom: transform.k,\n});\nconst viewportToTransform = ({ x, y, zoom }) => zoomIdentity.translate(x, y).scale(zoom);\nconst isWrappedWithClass = (event, className) => event.target.closest(`.${className}`);\nconst isRightClickPan = (panOnDrag, usedButton) => usedButton === 2 && Array.isArray(panOnDrag) && panOnDrag.includes(2);\n// taken from d3-ease: https://github.com/d3/d3-ease/blob/main/src/cubic.js\nconst defaultEase = (t) => ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\nconst getD3Transition = (selection, duration = 0, ease = defaultEase, onEnd = () => { }) => {\n    const hasDuration = typeof duration === 'number' && duration > 0;\n    if (!hasDuration) {\n        onEnd();\n    }\n    return hasDuration ? selection.transition().duration(duration).ease(ease).on('end', onEnd) : selection;\n};\nconst wheelDelta = (event) => {\n    const factor = event.ctrlKey && isMacOs() ? 10 : 1;\n    return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * factor;\n};\n\nfunction createPanOnScrollHandler({ zoomPanValues, noWheelClassName, d3Selection, d3Zoom, panOnScrollMode, panOnScrollSpeed, zoomOnPinch, onPanZoomStart, onPanZoom, onPanZoomEnd, }) {\n    return (event) => {\n        if (isWrappedWithClass(event, noWheelClassName)) {\n            return false;\n        }\n        event.preventDefault();\n        event.stopImmediatePropagation();\n        const currentZoom = d3Selection.property('__zoom').k || 1;\n        // macos sets ctrlKey=true for pinch gesture on a trackpad\n        if (event.ctrlKey && zoomOnPinch) {\n            const point = pointer(event);\n            const pinchDelta = wheelDelta(event);\n            const zoom = currentZoom * Math.pow(2, pinchDelta);\n            // @ts-ignore\n            d3Zoom.scaleTo(d3Selection, zoom, point, event);\n            return;\n        }\n        /*\n         * increase scroll speed in firefox\n         * firefox: deltaMode === 1; chrome: deltaMode === 0\n         */\n        const deltaNormalize = event.deltaMode === 1 ? 20 : 1;\n        let deltaX = panOnScrollMode === PanOnScrollMode.Vertical ? 0 : event.deltaX * deltaNormalize;\n        let deltaY = panOnScrollMode === PanOnScrollMode.Horizontal ? 0 : event.deltaY * deltaNormalize;\n        // this enables vertical scrolling with shift + scroll on windows\n        if (!isMacOs() && event.shiftKey && panOnScrollMode !== PanOnScrollMode.Vertical) {\n            deltaX = event.deltaY * deltaNormalize;\n            deltaY = 0;\n        }\n        d3Zoom.translateBy(d3Selection, -(deltaX / currentZoom) * panOnScrollSpeed, -(deltaY / currentZoom) * panOnScrollSpeed, \n        // @ts-ignore\n        { internal: true });\n        const nextViewport = transformToViewport(d3Selection.property('__zoom'));\n        clearTimeout(zoomPanValues.panScrollTimeout);\n        /*\n         * for pan on scroll we need to handle the event calls on our own\n         * we can't use the start, zoom and end events from d3-zoom\n         * because start and move gets called on every scroll event and not once at the beginning\n         */\n        if (!zoomPanValues.isPanScrolling) {\n            zoomPanValues.isPanScrolling = true;\n            onPanZoomStart?.(event, nextViewport);\n        }\n        if (zoomPanValues.isPanScrolling) {\n            onPanZoom?.(event, nextViewport);\n            zoomPanValues.panScrollTimeout = setTimeout(() => {\n                onPanZoomEnd?.(event, nextViewport);\n                zoomPanValues.isPanScrolling = false;\n            }, 150);\n        }\n    };\n}\nfunction createZoomOnScrollHandler({ noWheelClassName, preventScrolling, d3ZoomHandler }) {\n    return function (event, d) {\n        const isWheel = event.type === 'wheel';\n        // we still want to enable pinch zooming even if preventScrolling is set to false\n        const preventZoom = !preventScrolling && isWheel && !event.ctrlKey;\n        const hasNoWheelClass = isWrappedWithClass(event, noWheelClassName);\n        // if user is pinch zooming above a nowheel element, we don't want the browser to zoom\n        if (event.ctrlKey && isWheel && hasNoWheelClass) {\n            event.preventDefault();\n        }\n        if (preventZoom || hasNoWheelClass) {\n            return null;\n        }\n        event.preventDefault();\n        d3ZoomHandler.call(this, event, d);\n    };\n}\nfunction createPanZoomStartHandler({ zoomPanValues, onDraggingChange, onPanZoomStart }) {\n    return (event) => {\n        if (event.sourceEvent?.internal) {\n            return;\n        }\n        const viewport = transformToViewport(event.transform);\n        // we need to remember it here, because it's always 0 in the \"zoom\" event\n        zoomPanValues.mouseButton = event.sourceEvent?.button || 0;\n        zoomPanValues.isZoomingOrPanning = true;\n        zoomPanValues.prevViewport = viewport;\n        if (event.sourceEvent?.type === 'mousedown') {\n            onDraggingChange(true);\n        }\n        if (onPanZoomStart) {\n            onPanZoomStart?.(event.sourceEvent, viewport);\n        }\n    };\n}\nfunction createPanZoomHandler({ zoomPanValues, panOnDrag, onPaneContextMenu, onTransformChange, onPanZoom, }) {\n    return (event) => {\n        zoomPanValues.usedRightMouseButton = !!(onPaneContextMenu && isRightClickPan(panOnDrag, zoomPanValues.mouseButton ?? 0));\n        if (!event.sourceEvent?.sync) {\n            onTransformChange([event.transform.x, event.transform.y, event.transform.k]);\n        }\n        if (onPanZoom && !event.sourceEvent?.internal) {\n            onPanZoom?.(event.sourceEvent, transformToViewport(event.transform));\n        }\n    };\n}\nfunction createPanZoomEndHandler({ zoomPanValues, panOnDrag, panOnScroll, onDraggingChange, onPanZoomEnd, onPaneContextMenu, }) {\n    return (event) => {\n        if (event.sourceEvent?.internal) {\n            return;\n        }\n        zoomPanValues.isZoomingOrPanning = false;\n        if (onPaneContextMenu &&\n            isRightClickPan(panOnDrag, zoomPanValues.mouseButton ?? 0) &&\n            !zoomPanValues.usedRightMouseButton &&\n            event.sourceEvent) {\n            onPaneContextMenu(event.sourceEvent);\n        }\n        zoomPanValues.usedRightMouseButton = false;\n        onDraggingChange(false);\n        if (onPanZoomEnd && viewChanged(zoomPanValues.prevViewport, event.transform)) {\n            const viewport = transformToViewport(event.transform);\n            zoomPanValues.prevViewport = viewport;\n            clearTimeout(zoomPanValues.timerId);\n            zoomPanValues.timerId = setTimeout(() => {\n                onPanZoomEnd?.(event.sourceEvent, viewport);\n            }, \n            // we need a setTimeout for panOnScroll to supress multiple end events fired during scroll\n            panOnScroll ? 150 : 0);\n        }\n    };\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nfunction createFilter({ zoomActivationKeyPressed, zoomOnScroll, zoomOnPinch, panOnDrag, panOnScroll, zoomOnDoubleClick, userSelectionActive, noWheelClassName, noPanClassName, lib, }) {\n    return (event) => {\n        const zoomScroll = zoomActivationKeyPressed || zoomOnScroll;\n        const pinchZoom = zoomOnPinch && event.ctrlKey;\n        if (event.button === 1 &&\n            event.type === 'mousedown' &&\n            (isWrappedWithClass(event, `${lib}-flow__node`) || isWrappedWithClass(event, `${lib}-flow__edge`))) {\n            return true;\n        }\n        // if all interactions are disabled, we prevent all zoom events\n        if (!panOnDrag && !zoomScroll && !panOnScroll && !zoomOnDoubleClick && !zoomOnPinch) {\n            return false;\n        }\n        // during a selection we prevent all other interactions\n        if (userSelectionActive) {\n            return false;\n        }\n        // if the target element is inside an element with the nowheel class, we prevent zooming\n        if (isWrappedWithClass(event, noWheelClassName) && event.type === 'wheel') {\n            return false;\n        }\n        // if the target element is inside an element with the nopan class, we prevent panning\n        if (isWrappedWithClass(event, noPanClassName) &&\n            (event.type !== 'wheel' || (panOnScroll && event.type === 'wheel' && !zoomActivationKeyPressed))) {\n            return false;\n        }\n        if (!zoomOnPinch && event.ctrlKey && event.type === 'wheel') {\n            return false;\n        }\n        if (!zoomOnPinch && event.type === 'touchstart' && event.touches?.length > 1) {\n            event.preventDefault(); // if you manage to start with 2 touches, we prevent native zoom\n            return false;\n        }\n        // when there is no scroll handling enabled, we prevent all wheel events\n        if (!zoomScroll && !panOnScroll && !pinchZoom && event.type === 'wheel') {\n            return false;\n        }\n        // if the pane is not movable, we prevent dragging it with mousestart or touchstart\n        if (!panOnDrag && (event.type === 'mousedown' || event.type === 'touchstart')) {\n            return false;\n        }\n        // if the pane is only movable using allowed clicks\n        if (Array.isArray(panOnDrag) && !panOnDrag.includes(event.button) && event.type === 'mousedown') {\n            return false;\n        }\n        // We only allow right clicks if pan on drag is set to right click\n        const buttonAllowed = (Array.isArray(panOnDrag) && panOnDrag.includes(event.button)) || !event.button || event.button <= 1;\n        // default filter for d3-zoom\n        return (!event.ctrlKey || event.type === 'wheel') && buttonAllowed;\n    };\n}\n\nfunction XYPanZoom({ domNode, minZoom, maxZoom, paneClickDistance, translateExtent, viewport, onPanZoom, onPanZoomStart, onPanZoomEnd, onDraggingChange, }) {\n    const zoomPanValues = {\n        isZoomingOrPanning: false,\n        usedRightMouseButton: false,\n        prevViewport: { x: 0, y: 0, zoom: 0 },\n        mouseButton: 0,\n        timerId: undefined,\n        panScrollTimeout: undefined,\n        isPanScrolling: false,\n    };\n    const bbox = domNode.getBoundingClientRect();\n    const d3ZoomInstance = zoom()\n        .clickDistance(!isNumeric(paneClickDistance) || paneClickDistance < 0 ? 0 : paneClickDistance)\n        .scaleExtent([minZoom, maxZoom])\n        .translateExtent(translateExtent);\n    const d3Selection = select(domNode).call(d3ZoomInstance);\n    setViewportConstrained({\n        x: viewport.x,\n        y: viewport.y,\n        zoom: clamp(viewport.zoom, minZoom, maxZoom),\n    }, [\n        [0, 0],\n        [bbox.width, bbox.height],\n    ], translateExtent);\n    const d3ZoomHandler = d3Selection.on('wheel.zoom');\n    const d3DblClickZoomHandler = d3Selection.on('dblclick.zoom');\n    d3ZoomInstance.wheelDelta(wheelDelta);\n    function setTransform(transform, options) {\n        if (d3Selection) {\n            return new Promise((resolve) => {\n                d3ZoomInstance?.interpolate(options?.interpolate === 'linear' ? interpolate : interpolateZoom).transform(getD3Transition(d3Selection, options?.duration, options?.ease, () => resolve(true)), transform);\n            });\n        }\n        return Promise.resolve(false);\n    }\n    // public functions\n    function update({ noWheelClassName, noPanClassName, onPaneContextMenu, userSelectionActive, panOnScroll, panOnDrag, panOnScrollMode, panOnScrollSpeed, preventScrolling, zoomOnPinch, zoomOnScroll, zoomOnDoubleClick, zoomActivationKeyPressed, lib, onTransformChange, }) {\n        if (userSelectionActive && !zoomPanValues.isZoomingOrPanning) {\n            destroy();\n        }\n        const isPanOnScroll = panOnScroll && !zoomActivationKeyPressed && !userSelectionActive;\n        const wheelHandler = isPanOnScroll\n            ? createPanOnScrollHandler({\n                zoomPanValues,\n                noWheelClassName,\n                d3Selection,\n                d3Zoom: d3ZoomInstance,\n                panOnScrollMode,\n                panOnScrollSpeed,\n                zoomOnPinch,\n                onPanZoomStart,\n                onPanZoom,\n                onPanZoomEnd,\n            })\n            : createZoomOnScrollHandler({\n                noWheelClassName,\n                preventScrolling,\n                d3ZoomHandler,\n            });\n        d3Selection.on('wheel.zoom', wheelHandler, { passive: false });\n        if (!userSelectionActive) {\n            // pan zoom start\n            const startHandler = createPanZoomStartHandler({\n                zoomPanValues,\n                onDraggingChange,\n                onPanZoomStart,\n            });\n            d3ZoomInstance.on('start', startHandler);\n            // pan zoom\n            const panZoomHandler = createPanZoomHandler({\n                zoomPanValues,\n                panOnDrag,\n                onPaneContextMenu: !!onPaneContextMenu,\n                onPanZoom,\n                onTransformChange,\n            });\n            d3ZoomInstance.on('zoom', panZoomHandler);\n            // pan zoom end\n            const panZoomEndHandler = createPanZoomEndHandler({\n                zoomPanValues,\n                panOnDrag,\n                panOnScroll,\n                onPaneContextMenu,\n                onPanZoomEnd,\n                onDraggingChange,\n            });\n            d3ZoomInstance.on('end', panZoomEndHandler);\n        }\n        const filter = createFilter({\n            zoomActivationKeyPressed,\n            panOnDrag,\n            zoomOnScroll,\n            panOnScroll,\n            zoomOnDoubleClick,\n            zoomOnPinch,\n            userSelectionActive,\n            noPanClassName,\n            noWheelClassName,\n            lib,\n        });\n        d3ZoomInstance.filter(filter);\n        /*\n         * We cannot add zoomOnDoubleClick to the filter above because\n         * double tapping on touch screens circumvents the filter and\n         * dblclick.zoom is fired on the selection directly\n         */\n        if (zoomOnDoubleClick) {\n            d3Selection.on('dblclick.zoom', d3DblClickZoomHandler);\n        }\n        else {\n            d3Selection.on('dblclick.zoom', null);\n        }\n    }\n    function destroy() {\n        d3ZoomInstance.on('zoom', null);\n    }\n    async function setViewportConstrained(viewport, extent, translateExtent) {\n        const nextTransform = viewportToTransform(viewport);\n        const contrainedTransform = d3ZoomInstance?.constrain()(nextTransform, extent, translateExtent);\n        if (contrainedTransform) {\n            await setTransform(contrainedTransform);\n        }\n        return new Promise((resolve) => resolve(contrainedTransform));\n    }\n    async function setViewport(viewport, options) {\n        const nextTransform = viewportToTransform(viewport);\n        await setTransform(nextTransform, options);\n        return new Promise((resolve) => resolve(nextTransform));\n    }\n    function syncViewport(viewport) {\n        if (d3Selection) {\n            const nextTransform = viewportToTransform(viewport);\n            const currentTransform = d3Selection.property('__zoom');\n            if (currentTransform.k !== viewport.zoom ||\n                currentTransform.x !== viewport.x ||\n                currentTransform.y !== viewport.y) {\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore\n                d3ZoomInstance?.transform(d3Selection, nextTransform, null, { sync: true });\n            }\n        }\n    }\n    function getViewport() {\n        const transform = d3Selection ? zoomTransform(d3Selection.node()) : { x: 0, y: 0, k: 1 };\n        return { x: transform.x, y: transform.y, zoom: transform.k };\n    }\n    function scaleTo(zoom, options) {\n        if (d3Selection) {\n            return new Promise((resolve) => {\n                d3ZoomInstance?.interpolate(options?.interpolate === 'linear' ? interpolate : interpolateZoom).scaleTo(getD3Transition(d3Selection, options?.duration, options?.ease, () => resolve(true)), zoom);\n            });\n        }\n        return Promise.resolve(false);\n    }\n    function scaleBy(factor, options) {\n        if (d3Selection) {\n            return new Promise((resolve) => {\n                d3ZoomInstance?.interpolate(options?.interpolate === 'linear' ? interpolate : interpolateZoom).scaleBy(getD3Transition(d3Selection, options?.duration, options?.ease, () => resolve(true)), factor);\n            });\n        }\n        return Promise.resolve(false);\n    }\n    function setScaleExtent(scaleExtent) {\n        d3ZoomInstance?.scaleExtent(scaleExtent);\n    }\n    function setTranslateExtent(translateExtent) {\n        d3ZoomInstance?.translateExtent(translateExtent);\n    }\n    function setClickDistance(distance) {\n        const validDistance = !isNumeric(distance) || distance < 0 ? 0 : distance;\n        d3ZoomInstance?.clickDistance(validDistance);\n    }\n    return {\n        update,\n        destroy,\n        setViewport,\n        setViewportConstrained,\n        getViewport,\n        scaleTo,\n        scaleBy,\n        setScaleExtent,\n        setTranslateExtent,\n        syncViewport,\n        setClickDistance,\n    };\n}\n\n/**\n * Used to determine the variant of the resize control\n *\n * @public\n */\nvar ResizeControlVariant;\n(function (ResizeControlVariant) {\n    ResizeControlVariant[\"Line\"] = \"line\";\n    ResizeControlVariant[\"Handle\"] = \"handle\";\n})(ResizeControlVariant || (ResizeControlVariant = {}));\nconst XY_RESIZER_HANDLE_POSITIONS = ['top-left', 'top-right', 'bottom-left', 'bottom-right'];\nconst XY_RESIZER_LINE_POSITIONS = ['top', 'right', 'bottom', 'left'];\n\n/**\n * Get all connecting edges for a given set of nodes\n * @param width - new width of the node\n * @param prevWidth - previous width of the node\n * @param height - new height of the node\n * @param prevHeight - previous height of the node\n * @param affectsX - whether to invert the resize direction for the x axis\n * @param affectsY - whether to invert the resize direction for the y axis\n * @returns array of two numbers representing the direction of the resize for each axis, 0 = no change, 1 = increase, -1 = decrease\n */\nfunction getResizeDirection({ width, prevWidth, height, prevHeight, affectsX, affectsY, }) {\n    const deltaWidth = width - prevWidth;\n    const deltaHeight = height - prevHeight;\n    const direction = [deltaWidth > 0 ? 1 : deltaWidth < 0 ? -1 : 0, deltaHeight > 0 ? 1 : deltaHeight < 0 ? -1 : 0];\n    if (deltaWidth && affectsX) {\n        direction[0] = direction[0] * -1;\n    }\n    if (deltaHeight && affectsY) {\n        direction[1] = direction[1] * -1;\n    }\n    return direction;\n}\n/**\n * Parses the control position that is being dragged to dimensions that are being resized\n * @param controlPosition - position of the control that is being dragged\n * @returns isHorizontal, isVertical, affectsX, affectsY,\n */\nfunction getControlDirection(controlPosition) {\n    const isHorizontal = controlPosition.includes('right') || controlPosition.includes('left');\n    const isVertical = controlPosition.includes('bottom') || controlPosition.includes('top');\n    const affectsX = controlPosition.includes('left');\n    const affectsY = controlPosition.includes('top');\n    return {\n        isHorizontal,\n        isVertical,\n        affectsX,\n        affectsY,\n    };\n}\nfunction getLowerExtentClamp(lowerExtent, lowerBound) {\n    return Math.max(0, lowerBound - lowerExtent);\n}\nfunction getUpperExtentClamp(upperExtent, upperBound) {\n    return Math.max(0, upperExtent - upperBound);\n}\nfunction getSizeClamp(size, minSize, maxSize) {\n    return Math.max(0, minSize - size, size - maxSize);\n}\nfunction xor(a, b) {\n    return a ? !b : b;\n}\n/**\n * Calculates new width & height and x & y of node after resize based on pointer position\n * @description - Buckle up, this is a chunky one... If you want to determine the new dimensions of a node after a resize,\n * you have to account for all possible restrictions: min/max width/height of the node, the maximum extent the node is allowed\n * to move in (in this case: resize into) determined by the parent node, the minimal extent determined by child nodes\n * with expandParent or extent: 'parent' set and oh yeah, these things also have to work with keepAspectRatio!\n * The way this is done is by determining how much each of these restricting actually restricts the resize and then applying the\n * strongest restriction. Because the resize affects x, y and width, height and width, height of a opposing side with keepAspectRatio,\n * the resize amount is always kept in distX & distY amount (the distance in mouse movement)\n * Instead of clamping each value, we first calculate the biggest 'clamp' (for the lack of a better name) and then apply it to all values.\n * To complicate things nodeOrigin has to be taken into account as well. This is done by offsetting the nodes as if their origin is [0, 0],\n * then calculating the restrictions as usual\n * @param startValues - starting values of resize\n * @param controlDirection - dimensions affected by the resize\n * @param pointerPosition - the current pointer position corrected for snapping\n * @param boundaries - minimum and maximum dimensions of the node\n * @param keepAspectRatio - prevent changes of asprect ratio\n * @returns x, y, width and height of the node after resize\n */\nfunction getDimensionsAfterResize(startValues, controlDirection, pointerPosition, boundaries, keepAspectRatio, nodeOrigin, extent, childExtent) {\n    let { affectsX, affectsY } = controlDirection;\n    const { isHorizontal, isVertical } = controlDirection;\n    const isDiagonal = isHorizontal && isVertical;\n    const { xSnapped, ySnapped } = pointerPosition;\n    const { minWidth, maxWidth, minHeight, maxHeight } = boundaries;\n    const { x: startX, y: startY, width: startWidth, height: startHeight, aspectRatio } = startValues;\n    let distX = Math.floor(isHorizontal ? xSnapped - startValues.pointerX : 0);\n    let distY = Math.floor(isVertical ? ySnapped - startValues.pointerY : 0);\n    const newWidth = startWidth + (affectsX ? -distX : distX);\n    const newHeight = startHeight + (affectsY ? -distY : distY);\n    const originOffsetX = -nodeOrigin[0] * startWidth;\n    const originOffsetY = -nodeOrigin[1] * startHeight;\n    // Check if maxWidth, minWWidth, maxHeight, minHeight are restricting the resize\n    let clampX = getSizeClamp(newWidth, minWidth, maxWidth);\n    let clampY = getSizeClamp(newHeight, minHeight, maxHeight);\n    // Check if extent is restricting the resize\n    if (extent) {\n        let xExtentClamp = 0;\n        let yExtentClamp = 0;\n        if (affectsX && distX < 0) {\n            xExtentClamp = getLowerExtentClamp(startX + distX + originOffsetX, extent[0][0]);\n        }\n        else if (!affectsX && distX > 0) {\n            xExtentClamp = getUpperExtentClamp(startX + newWidth + originOffsetX, extent[1][0]);\n        }\n        if (affectsY && distY < 0) {\n            yExtentClamp = getLowerExtentClamp(startY + distY + originOffsetY, extent[0][1]);\n        }\n        else if (!affectsY && distY > 0) {\n            yExtentClamp = getUpperExtentClamp(startY + newHeight + originOffsetY, extent[1][1]);\n        }\n        clampX = Math.max(clampX, xExtentClamp);\n        clampY = Math.max(clampY, yExtentClamp);\n    }\n    // Check if the child extent is restricting the resize\n    if (childExtent) {\n        let xExtentClamp = 0;\n        let yExtentClamp = 0;\n        if (affectsX && distX > 0) {\n            xExtentClamp = getUpperExtentClamp(startX + distX, childExtent[0][0]);\n        }\n        else if (!affectsX && distX < 0) {\n            xExtentClamp = getLowerExtentClamp(startX + newWidth, childExtent[1][0]);\n        }\n        if (affectsY && distY > 0) {\n            yExtentClamp = getUpperExtentClamp(startY + distY, childExtent[0][1]);\n        }\n        else if (!affectsY && distY < 0) {\n            yExtentClamp = getLowerExtentClamp(startY + newHeight, childExtent[1][1]);\n        }\n        clampX = Math.max(clampX, xExtentClamp);\n        clampY = Math.max(clampY, yExtentClamp);\n    }\n    // Check if the aspect ratio resizing of the other side is restricting the resize\n    if (keepAspectRatio) {\n        if (isHorizontal) {\n            // Check if the max dimensions might be restricting the resize\n            const aspectHeightClamp = getSizeClamp(newWidth / aspectRatio, minHeight, maxHeight) * aspectRatio;\n            clampX = Math.max(clampX, aspectHeightClamp);\n            // Check if the extent is restricting the resize\n            if (extent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsX && !affectsY && isDiagonal)) {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startY + originOffsetY + newWidth / aspectRatio, extent[1][1]) * aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getLowerExtentClamp(startY + originOffsetY + (affectsX ? distX : -distX) / aspectRatio, extent[0][1]) *\n                            aspectRatio;\n                }\n                clampX = Math.max(clampX, aspectExtentClamp);\n            }\n            // Check if the child extent is restricting the resize\n            if (childExtent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsX && !affectsY && isDiagonal)) {\n                    aspectExtentClamp = getLowerExtentClamp(startY + newWidth / aspectRatio, childExtent[1][1]) * aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startY + (affectsX ? distX : -distX) / aspectRatio, childExtent[0][1]) * aspectRatio;\n                }\n                clampX = Math.max(clampX, aspectExtentClamp);\n            }\n        }\n        // Do the same thing for vertical resizing\n        if (isVertical) {\n            const aspectWidthClamp = getSizeClamp(newHeight * aspectRatio, minWidth, maxWidth) / aspectRatio;\n            clampY = Math.max(clampY, aspectWidthClamp);\n            if (extent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsY && !affectsX && isDiagonal)) {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startX + newHeight * aspectRatio + originOffsetX, extent[1][0]) / aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getLowerExtentClamp(startX + (affectsY ? distY : -distY) * aspectRatio + originOffsetX, extent[0][0]) /\n                            aspectRatio;\n                }\n                clampY = Math.max(clampY, aspectExtentClamp);\n            }\n            if (childExtent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsY && !affectsX && isDiagonal)) {\n                    aspectExtentClamp = getLowerExtentClamp(startX + newHeight * aspectRatio, childExtent[1][0]) / aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startX + (affectsY ? distY : -distY) * aspectRatio, childExtent[0][0]) / aspectRatio;\n                }\n                clampY = Math.max(clampY, aspectExtentClamp);\n            }\n        }\n    }\n    distY = distY + (distY < 0 ? clampY : -clampY);\n    distX = distX + (distX < 0 ? clampX : -clampX);\n    if (keepAspectRatio) {\n        if (isDiagonal) {\n            if (newWidth > newHeight * aspectRatio) {\n                distY = (xor(affectsX, affectsY) ? -distX : distX) / aspectRatio;\n            }\n            else {\n                distX = (xor(affectsX, affectsY) ? -distY : distY) * aspectRatio;\n            }\n        }\n        else {\n            if (isHorizontal) {\n                distY = distX / aspectRatio;\n                affectsY = affectsX;\n            }\n            else {\n                distX = distY * aspectRatio;\n                affectsX = affectsY;\n            }\n        }\n    }\n    const x = affectsX ? startX + distX : startX;\n    const y = affectsY ? startY + distY : startY;\n    return {\n        width: startWidth + (affectsX ? -distX : distX),\n        height: startHeight + (affectsY ? -distY : distY),\n        x: nodeOrigin[0] * distX * (!affectsX ? 1 : -1) + x,\n        y: nodeOrigin[1] * distY * (!affectsY ? 1 : -1) + y,\n    };\n}\n\nconst initPrevValues = { width: 0, height: 0, x: 0, y: 0 };\nconst initStartValues = {\n    ...initPrevValues,\n    pointerX: 0,\n    pointerY: 0,\n    aspectRatio: 1,\n};\nfunction nodeToParentExtent(node) {\n    return [\n        [0, 0],\n        [node.measured.width, node.measured.height],\n    ];\n}\nfunction nodeToChildExtent(child, parent, nodeOrigin) {\n    const x = parent.position.x + child.position.x;\n    const y = parent.position.y + child.position.y;\n    const width = child.measured.width ?? 0;\n    const height = child.measured.height ?? 0;\n    const originOffsetX = nodeOrigin[0] * width;\n    const originOffsetY = nodeOrigin[1] * height;\n    return [\n        [x - originOffsetX, y - originOffsetY],\n        [x + width - originOffsetX, y + height - originOffsetY],\n    ];\n}\nfunction XYResizer({ domNode, nodeId, getStoreItems, onChange, onEnd }) {\n    const selection = select(domNode);\n    function update({ controlPosition, boundaries, keepAspectRatio, resizeDirection, onResizeStart, onResize, onResizeEnd, shouldResize, }) {\n        let prevValues = { ...initPrevValues };\n        let startValues = { ...initStartValues };\n        const controlDirection = getControlDirection(controlPosition);\n        let node = undefined;\n        let containerBounds = null;\n        let childNodes = [];\n        let parentNode = undefined; // Needed to fix expandParent\n        let parentExtent = undefined;\n        let childExtent = undefined;\n        const dragHandler = drag()\n            .on('start', (event) => {\n            const { nodeLookup, transform, snapGrid, snapToGrid, nodeOrigin, paneDomNode } = getStoreItems();\n            node = nodeLookup.get(nodeId);\n            if (!node) {\n                return;\n            }\n            containerBounds = paneDomNode?.getBoundingClientRect() ?? null;\n            const { xSnapped, ySnapped } = getPointerPosition(event.sourceEvent, {\n                transform,\n                snapGrid,\n                snapToGrid,\n                containerBounds,\n            });\n            prevValues = {\n                width: node.measured.width ?? 0,\n                height: node.measured.height ?? 0,\n                x: node.position.x ?? 0,\n                y: node.position.y ?? 0,\n            };\n            startValues = {\n                ...prevValues,\n                pointerX: xSnapped,\n                pointerY: ySnapped,\n                aspectRatio: prevValues.width / prevValues.height,\n            };\n            parentNode = undefined;\n            if (node.parentId && (node.extent === 'parent' || node.expandParent)) {\n                parentNode = nodeLookup.get(node.parentId);\n                parentExtent = parentNode && node.extent === 'parent' ? nodeToParentExtent(parentNode) : undefined;\n            }\n            /*\n             * Collect all child nodes to correct their relative positions when top/left changes\n             * Determine largest minimal extent the parent node is allowed to resize to\n             */\n            childNodes = [];\n            childExtent = undefined;\n            for (const [childId, child] of nodeLookup) {\n                if (child.parentId === nodeId) {\n                    childNodes.push({\n                        id: childId,\n                        position: { ...child.position },\n                        extent: child.extent,\n                    });\n                    if (child.extent === 'parent' || child.expandParent) {\n                        const extent = nodeToChildExtent(child, node, child.origin ?? nodeOrigin);\n                        if (childExtent) {\n                            childExtent = [\n                                [Math.min(extent[0][0], childExtent[0][0]), Math.min(extent[0][1], childExtent[0][1])],\n                                [Math.max(extent[1][0], childExtent[1][0]), Math.max(extent[1][1], childExtent[1][1])],\n                            ];\n                        }\n                        else {\n                            childExtent = extent;\n                        }\n                    }\n                }\n            }\n            onResizeStart?.(event, { ...prevValues });\n        })\n            .on('drag', (event) => {\n            const { transform, snapGrid, snapToGrid, nodeOrigin: storeNodeOrigin } = getStoreItems();\n            const pointerPosition = getPointerPosition(event.sourceEvent, {\n                transform,\n                snapGrid,\n                snapToGrid,\n                containerBounds,\n            });\n            const childChanges = [];\n            if (!node) {\n                return;\n            }\n            const { x: prevX, y: prevY, width: prevWidth, height: prevHeight } = prevValues;\n            const change = {};\n            const nodeOrigin = node.origin ?? storeNodeOrigin;\n            const { width, height, x, y } = getDimensionsAfterResize(startValues, controlDirection, pointerPosition, boundaries, keepAspectRatio, nodeOrigin, parentExtent, childExtent);\n            const isWidthChange = width !== prevWidth;\n            const isHeightChange = height !== prevHeight;\n            const isXPosChange = x !== prevX && isWidthChange;\n            const isYPosChange = y !== prevY && isHeightChange;\n            if (!isXPosChange && !isYPosChange && !isWidthChange && !isHeightChange) {\n                return;\n            }\n            if (isXPosChange || isYPosChange || nodeOrigin[0] === 1 || nodeOrigin[1] === 1) {\n                change.x = isXPosChange ? x : prevValues.x;\n                change.y = isYPosChange ? y : prevValues.y;\n                prevValues.x = change.x;\n                prevValues.y = change.y;\n                /*\n                 * when top/left changes, correct the relative positions of child nodes\n                 * so that they stay in the same position\n                 */\n                if (childNodes.length > 0) {\n                    const xChange = x - prevX;\n                    const yChange = y - prevY;\n                    for (const childNode of childNodes) {\n                        childNode.position = {\n                            x: childNode.position.x - xChange + nodeOrigin[0] * (width - prevWidth),\n                            y: childNode.position.y - yChange + nodeOrigin[1] * (height - prevHeight),\n                        };\n                        childChanges.push(childNode);\n                    }\n                }\n            }\n            if (isWidthChange || isHeightChange) {\n                change.width =\n                    isWidthChange && (!resizeDirection || resizeDirection === 'horizontal') ? width : prevValues.width;\n                change.height =\n                    isHeightChange && (!resizeDirection || resizeDirection === 'vertical') ? height : prevValues.height;\n                prevValues.width = change.width;\n                prevValues.height = change.height;\n            }\n            // Fix expandParent when resizing from top/left\n            if (parentNode && node.expandParent) {\n                const xLimit = nodeOrigin[0] * (change.width ?? 0);\n                if (change.x && change.x < xLimit) {\n                    prevValues.x = xLimit;\n                    startValues.x = startValues.x - (change.x - xLimit);\n                }\n                const yLimit = nodeOrigin[1] * (change.height ?? 0);\n                if (change.y && change.y < yLimit) {\n                    prevValues.y = yLimit;\n                    startValues.y = startValues.y - (change.y - yLimit);\n                }\n            }\n            const direction = getResizeDirection({\n                width: prevValues.width,\n                prevWidth,\n                height: prevValues.height,\n                prevHeight,\n                affectsX: controlDirection.affectsX,\n                affectsY: controlDirection.affectsY,\n            });\n            const nextValues = { ...prevValues, direction };\n            const callResize = shouldResize?.(event, nextValues);\n            if (callResize === false) {\n                return;\n            }\n            onResize?.(event, nextValues);\n            onChange(change, childChanges);\n        })\n            .on('end', (event) => {\n            onResizeEnd?.(event, { ...prevValues });\n            onEnd?.({ ...prevValues });\n        });\n        selection.call(dragHandler);\n    }\n    function destroy() {\n        selection.on('.drag', null);\n    }\n    return {\n        update,\n        destroy,\n    };\n}\n\nexport { ConnectionLineType, ConnectionMode, MarkerType, PanOnScrollMode, Position, ResizeControlVariant, SelectionMode, XYDrag, XYHandle, XYMinimap, XYPanZoom, XYResizer, XY_RESIZER_HANDLE_POSITIONS, XY_RESIZER_LINE_POSITIONS, addEdge, adoptUserNodes, areConnectionMapsEqual, areSetsEqual, boxToRect, calcAutoPan, calculateNodePosition, clamp, clampPosition, clampPositionToParent, createMarkerIds, defaultAriaLabelConfig, devWarn, elementSelectionKeys, errorMessages, evaluateAbsolutePosition, fitViewport, getBezierEdgeCenter, getBezierPath, getBoundsOfBoxes, getBoundsOfRects, getConnectedEdges, getConnectionStatus, getDimensions, getEdgeCenter, getEdgePosition, getElementsToRemove, getElevatedEdgeZIndex, getEventPosition, getHandleBounds, getHandlePosition, getHostForElement, getIncomers, getInternalNodesBounds, getMarkerId, getNodeDimensions, getNodePositionWithOrigin, getNodeToolbarTransform, getNodesBounds, getNodesInside, getOutgoers, getOverlappingArea, getPointerPosition, getSmoothStepPath, getStraightPath, getViewportForBounds, handleConnectionChange, handleExpandParent, infiniteExtent, initialConnection, isCoordinateExtent, isEdgeBase, isEdgeVisible, isInputDOMNode, isInternalNodeBase, isMacOs, isMouseEvent, isNodeBase, isNumeric, isRectObject, mergeAriaLabelConfig, nodeHasDimensions, nodeToBox, nodeToRect, oppositePosition, panBy, pointToRendererPoint, reconnectEdge, rectToBox, rendererPointToPoint, shallowNodeData, snapPosition, updateAbsolutePositions, updateConnectionLookup, updateNodeInternals, withResolvers };\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import {\n    Position,\n    XYHandle,\n    isMouseEvent,\n    areConnectionMapsEqual,\n    handleConnectionChange,\n    ConnectionMode,\n    getHostForElement,\n    type HandleConnection,\n    type Optional,\n    type ConnectionState,\n    type Connection\n  } from '@xyflow/system';\n\n  import { useStore } from '../../store';\n\n  import type { ConnectableContext } from '../NodeWrapper/types';\n  import type { HandleProps } from './types';\n\n  let {\n    id: handleId = null,\n    type = 'source',\n    position = Position.Top,\n    style,\n    class: className,\n    isConnectable: isConnectableProp,\n    isConnectableStart = true,\n    isConnectableEnd = true,\n    isValidConnection,\n    onconnect,\n    ondisconnect,\n    children,\n    ...rest\n  }: HandleProps = $props();\n\n  const nodeId = getContext<string>('svelteflow__node_id');\n  const isConnectableContext = getContext<ConnectableContext>('svelteflow__node_connectable');\n\n  let isTarget = $derived(type === 'target');\n  let isConnectable = $derived(\n    isConnectableProp !== undefined ? isConnectableProp : isConnectableContext.value\n  );\n\n  let store = useStore();\n  let ariaLabelConfig = $derived(store.ariaLabelConfig);\n\n  let prevConnections: Map<string, HandleConnection> | null = null;\n  $effect.pre(() => {\n    if (onconnect || ondisconnect) {\n      // connectionLookup is not reactive, so we use edges to get notified about updates\n      // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n      store.edges;\n      let connections = store.connectionLookup.get(\n        `${nodeId}-${type}${handleId ? `-${handleId}` : ''}`\n      );\n\n      if (prevConnections && !areConnectionMapsEqual(connections, prevConnections)) {\n        const _connections = connections ?? new Map();\n\n        handleConnectionChange(prevConnections, _connections, ondisconnect);\n        handleConnectionChange(_connections, prevConnections, onconnect);\n      }\n\n      prevConnections = new Map(connections);\n    }\n  });\n\n  let [connectionInProgress, connectingFrom, connectingTo, isPossibleTargetHandle, valid] =\n    $derived.by(() => {\n      if (!store.connection.inProgress) {\n        return [false, false, false, false, null];\n      }\n\n      const { fromHandle, toHandle, isValid } = store.connection;\n\n      const connectingFrom =\n        fromHandle &&\n        fromHandle.nodeId === nodeId &&\n        fromHandle.type === type &&\n        fromHandle.id === handleId;\n\n      const connectingTo =\n        toHandle &&\n        toHandle.nodeId === nodeId &&\n        toHandle.type === type &&\n        toHandle.id === handleId;\n\n      const isPossibleTargetHandle =\n        store.connectionMode === ConnectionMode.Strict\n          ? fromHandle?.type !== type\n          : nodeId !== fromHandle?.nodeId || handleId !== fromHandle?.id;\n\n      const valid = connectingTo && isValid;\n\n      return [true, connectingFrom, connectingTo, isPossibleTargetHandle, valid];\n    });\n\n  function onConnectExtended(connection: Connection) {\n    const edge = store.onbeforeconnect ? store.onbeforeconnect(connection) : connection;\n\n    if (!edge) {\n      return;\n    }\n\n    store.addEdge(edge);\n    store.onconnect?.(connection);\n  }\n\n  function onpointerdown(event: MouseEvent | TouchEvent) {\n    const isMouseTriggered = isMouseEvent(event);\n\n    if (event.currentTarget && ((isMouseTriggered && event.button === 0) || !isMouseTriggered)) {\n      XYHandle.onPointerDown(event, {\n        handleId,\n        nodeId,\n        isTarget,\n        connectionRadius: store.connectionRadius,\n        domNode: store.domNode,\n        nodeLookup: store.nodeLookup,\n        connectionMode: store.connectionMode,\n        lib: 'svelte',\n        autoPanOnConnect: store.autoPanOnConnect,\n        flowId: store.flowId,\n        isValidConnection: isValidConnection ?? store.isValidConnection,\n        updateConnection: store.updateConnection,\n        cancelConnection: store.cancelConnection,\n        panBy: store.panBy,\n        onConnect: onConnectExtended,\n        onConnectStart: (event, startParams) => {\n          store.onconnectstart?.(event, {\n            nodeId: startParams.nodeId,\n            handleId: startParams.handleId,\n            handleType: startParams.handleType\n          });\n        },\n        onConnectEnd: (event, connectionState) => {\n          store.onconnectend?.(event, connectionState);\n        },\n        getTransform: () => [store.viewport.x, store.viewport.y, store.viewport.zoom],\n        getFromHandle: () => store.connection.fromHandle,\n        dragThreshold: store.connectionDragThreshold,\n        handleDomNode: event.currentTarget as HTMLElement\n      });\n    }\n  }\n\n  function onclick(event: MouseEvent) {\n    if (!nodeId || (!store.clickConnectStartHandle && !isConnectableStart)) {\n      return;\n    }\n\n    if (!store.clickConnectStartHandle) {\n      store.onclickconnectstart?.(event, { nodeId, handleId, handleType: type });\n      store.clickConnectStartHandle = { nodeId, type, id: handleId };\n      return;\n    }\n\n    const doc = getHostForElement(event.target);\n    const isValidConnectionHandler = isValidConnection ?? store.isValidConnection;\n\n    const { connectionMode, clickConnectStartHandle, flowId, nodeLookup } = store;\n    const { connection, isValid } = XYHandle.isValid(event, {\n      handle: {\n        nodeId,\n        id: handleId,\n        type\n      },\n      connectionMode,\n      fromNodeId: clickConnectStartHandle.nodeId,\n      fromHandleId: clickConnectStartHandle.id ?? null,\n      fromType: clickConnectStartHandle.type,\n      isValidConnection: isValidConnectionHandler,\n      flowId,\n      doc,\n      lib: 'svelte',\n      nodeLookup\n    });\n\n    if (isValid && connection) {\n      onConnectExtended(connection);\n    }\n\n    const connectionClone = structuredClone($state.snapshot(store.connection)) as Optional<\n      ConnectionState,\n      'inProgress'\n    >;\n    delete connectionClone.inProgress;\n    connectionClone.toPosition = connectionClone.toHandle\n      ? connectionClone.toHandle.position\n      : null;\n    store.onclickconnectend?.(event, connectionClone);\n\n    store.clickConnectStartHandle = null;\n  }\n</script>\n\n<!--\n@component\nThe Handle component is the part of a node that can be used to connect nodes.\n-->\n<div\n  data-handleid={handleId}\n  data-nodeid={nodeId}\n  data-handlepos={position}\n  data-id=\"{store.flowId}-{nodeId}-{handleId ?? 'null'}-{type}\"\n  class={[\n    'svelte-flow__handle',\n    `svelte-flow__handle-${position}`,\n    store.noDragClass,\n    store.noPanClass,\n    position,\n    className\n  ]}\n  class:valid\n  class:connectingto={connectingTo}\n  class:connectingfrom={connectingFrom}\n  class:source={!isTarget}\n  class:target={isTarget}\n  class:connectablestart={isConnectableStart}\n  class:connectableend={isConnectableEnd}\n  class:connectable={isConnectable}\n  class:connectionindicator={isConnectable &&\n    (!connectionInProgress || isPossibleTargetHandle) &&\n    (connectionInProgress || store.clickConnectStartHandle ? isConnectableEnd : isConnectableStart)}\n  onmousedown={onpointerdown}\n  ontouchstart={onpointerdown}\n  onclick={store.clickConnect ? onclick : undefined}\n  onkeypress={() => {}}\n  {style}\n  role=\"button\"\n  aria-label={ariaLabelConfig[`handle.ariaLabel`]}\n  tabindex=\"-1\"\n  {...rest}\n>\n  {@render children?.()}\n</div>\n","<script lang=\"ts\">\n  import { Position } from '@xyflow/system';\n\n  import { Handle } from '../Handle';\n  import type { NodeProps } from '../../types';\n\n  let {\n    data,\n    targetPosition = Position.Top,\n    sourcePosition = Position.Bottom\n  }: NodeProps = $props();\n</script>\n\n<Handle type=\"target\" position={targetPosition} />\n{data?.label}\n<Handle type=\"source\" position={sourcePosition} />\n","import { useStore } from '../../store';\nfunction tryToMount(node, domNode, target) {\n    if (!target || !domNode) {\n        return;\n    }\n    const targetEl = target === 'root' ? domNode : domNode.querySelector(`.svelte-flow__${target}`);\n    if (targetEl) {\n        targetEl.appendChild(node);\n    }\n}\nexport function portal(node, target) {\n    const { domNode } = $derived(useStore());\n    let destroyEffect;\n    // svelte-ignore state_referenced_locally\n    if (domNode) {\n        // if the domNode is already mounted, we can directly try to mount the node\n        tryToMount(node, domNode, target);\n    }\n    else {\n        // if the domNode is not mounted yet, we need to wait for it to be ready\n        destroyEffect = $effect.root(() => {\n            $effect(() => {\n                tryToMount(node, domNode, target);\n                destroyEffect?.();\n            });\n        });\n    }\n    return {\n        async update(target) {\n            tryToMount(node, domNode, target);\n        },\n        destroy() {\n            if (node.parentNode) {\n                node.parentNode.removeChild(node);\n            }\n            destroyEffect?.();\n        }\n    };\n}\n","export function hideOnSSR() {\n    let hide = $state(typeof window === 'undefined');\n    if (hide) {\n        const destroyEffect = $effect.root(() => {\n            $effect(() => {\n                hide = false;\n                destroyEffect?.();\n            });\n        });\n    }\n    return {\n        get value() {\n            return hide;\n        }\n    };\n}\n","import { isNodeBase, isEdgeBase } from '@xyflow/system';\n/**\n * Test whether an object is usable as a Node\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Node if it returns true\n * @param element - The element to test\n * @returns A boolean indicating whether the element is an Node\n */\nexport const isNode = (element) => isNodeBase(element);\n/**\n * Test whether an object is usable as an Edge\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Edge if it returns true\n * @param element - The element to test\n * @returns A boolean indicating whether the element is an Edge\n */\nexport const isEdge = (element) => isEdgeBase(element);\nexport function toPxString(value) {\n    return value === undefined ? undefined : `${value}px`;\n}\nexport const arrowKeyDiffs = {\n    ArrowUp: { x: 0, y: -1 },\n    ArrowDown: { x: 0, y: 1 },\n    ArrowLeft: { x: -1, y: 0 },\n    ArrowRight: { x: 1, y: 0 }\n};\n","<script lang=\"ts\">\n  import type { BaseEdgeProps } from '../../types';\n  import EdgeLabel from '../EdgeLabel/EdgeLabel.svelte';\n\n  let {\n    id,\n    path,\n    label,\n    labelX,\n    labelY,\n    labelStyle,\n    markerStart,\n    markerEnd,\n    style,\n    interactionWidth = 20,\n    class: className,\n    ...rest\n  }: BaseEdgeProps = $props();\n</script>\n\n<path\n  {id}\n  d={path}\n  class={['svelte-flow__edge-path', className]}\n  marker-start={markerStart}\n  marker-end={markerEnd}\n  fill=\"none\"\n  {style}\n/>\n\n{#if interactionWidth > 0}\n  <path\n    d={path}\n    stroke-opacity={0}\n    stroke-width={interactionWidth}\n    fill=\"none\"\n    class=\"svelte-flow__edge-interaction\"\n    {...rest}\n  />\n{/if}\n\n{#if label}\n  <EdgeLabel x={labelX} y={labelY} style={labelStyle} selectEdgeOnClick>\n    {label}\n  </EdgeLabel>\n{/if}\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import { hideOnSSR, portal } from '../../actions/portal';\n\n  import { useStore } from '../../store';\n  import type { EdgeLabelProps } from './types';\n  import { toPxString } from '../../utils';\n\n  let {\n    x = 0,\n    y = 0,\n    width,\n    height,\n    selectEdgeOnClick = false,\n    transparent = false,\n    class: className,\n    children,\n    ...rest\n  }: EdgeLabelProps = $props();\n\n  const store = useStore();\n\n  const id = getContext<string>('svelteflow__edge_id');\n\n  let z = $derived.by(() => {\n    return store.visible.edges.get(id)?.zIndex;\n  });\n</script>\n\n<div\n  use:portal={'edge-labels'}\n  style:display={hideOnSSR().value ? 'none' : undefined}\n  class={['svelte-flow__edge-label', { transparent }, className]}\n  style:cursor={selectEdgeOnClick ? 'pointer' : undefined}\n  style:transform=\"translate(-50%, -50%) translate({x}px,{y}px)\"\n  style:pointer-events=\"all\"\n  style:width={toPxString(width)}\n  style:height={toPxString(height)}\n  style:z-index={z}\n  tabindex=\"-1\"\n  onclick={() => {\n    if (selectEdgeOnClick && id) store.handleEdgeSelection(id);\n  }}\n  {...rest}\n>\n  {@render children?.()}\n</div>\n\n<style>\n  .transparent {\n    background: transparent;\n  }\n</style>\n","<script lang=\"ts\">\n  import { getBezierPath } from '@xyflow/system';\n\n  import BaseEdge from './BaseEdge.svelte';\n  import type { BezierEdgeProps } from '../../types';\n\n  let {\n    id,\n    interactionWidth,\n    label,\n    labelStyle,\n    markerEnd,\n    markerStart,\n    pathOptions,\n    sourcePosition,\n    sourceX,\n    sourceY,\n    style,\n    targetPosition,\n    targetX,\n    targetY\n  }: BezierEdgeProps = $props();\n\n  let [path, labelX, labelY] = $derived(\n    getBezierPath({\n      sourceX,\n      sourceY,\n      targetX,\n      targetY,\n      sourcePosition,\n      targetPosition,\n      curvature: pathOptions?.curvature\n    })\n  );\n</script>\n\n<BaseEdge\n  {id}\n  {path}\n  {labelX}\n  {labelY}\n  {label}\n  {labelStyle}\n  {markerStart}\n  {markerEnd}\n  {interactionWidth}\n  {style}\n/>\n","/** @import { Source } from '#client' */\nimport { DEV } from 'esm-env';\nimport { source, set, state, increment } from '../internal/client/reactivity/sources.js';\nimport { label, tag } from '../internal/client/dev/tracing.js';\nimport { get, update_version } from '../internal/client/runtime.js';\n\nvar read_methods = ['forEach', 'isDisjointFrom', 'isSubsetOf', 'isSupersetOf'];\nvar set_like_methods = ['difference', 'intersection', 'symmetricDifference', 'union'];\n\nvar inited = false;\n\n/**\n * A reactive version of the built-in [`Set`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set) object.\n * Reading contents of the set (by iterating, or by reading `set.size` or calling `set.has(...)` as in the [example](https://svelte.dev/playground/53438b51194b4882bcc18cddf9f96f15) below) in an [effect](https://svelte.dev/docs/svelte/$effect) or [derived](https://svelte.dev/docs/svelte/$derived)\n * will cause it to be re-evaluated as necessary when the set is updated.\n *\n * Note that values in a reactive set are _not_ made [deeply reactive](https://svelte.dev/docs/svelte/$state#Deep-state).\n *\n * ```svelte\n * <script>\n * \timport { SvelteSet } from 'svelte/reactivity';\n * \tlet monkeys = new SvelteSet();\n *\n * \tfunction toggle(monkey) {\n * \t\tif (monkeys.has(monkey)) {\n * \t\t\tmonkeys.delete(monkey);\n * \t\t} else {\n * \t\t\tmonkeys.add(monkey);\n * \t\t}\n * \t}\n * </script>\n *\n * {#each ['', '', ''] as monkey}\n * \t<button onclick={() => toggle(monkey)}>{monkey}</button>\n * {/each}\n *\n * <button onclick={() => monkeys.clear()}>clear</button>\n *\n * {#if monkeys.has('')}<p>see no evil</p>{/if}\n * {#if monkeys.has('')}<p>hear no evil</p>{/if}\n * {#if monkeys.has('')}<p>speak no evil</p>{/if}\n * ```\n *\n * @template T\n * @extends {Set<T>}\n */\nexport class SvelteSet extends Set {\n\t/** @type {Map<T, Source<boolean>>} */\n\t#sources = new Map();\n\t#version = state(0);\n\t#size = state(0);\n\t#update_version = update_version || -1;\n\n\t/**\n\t * @param {Iterable<T> | null | undefined} [value]\n\t */\n\tconstructor(value) {\n\t\tsuper();\n\n\t\tif (DEV) {\n\t\t\t// If the value is invalid then the native exception will fire here\n\t\t\tvalue = new Set(value);\n\n\t\t\ttag(this.#version, 'SvelteSet version');\n\t\t\ttag(this.#size, 'SvelteSet.size');\n\t\t}\n\n\t\tif (value) {\n\t\t\tfor (var element of value) {\n\t\t\t\tsuper.add(element);\n\t\t\t}\n\t\t\tthis.#size.v = super.size;\n\t\t}\n\n\t\tif (!inited) this.#init();\n\t}\n\n\t/**\n\t * If the source is being created inside the same reaction as the SvelteSet instance,\n\t * we use `state` so that it will not be a dependency of the reaction. Otherwise we\n\t * use `source` so it will be.\n\t *\n\t * @template T\n\t * @param {T} value\n\t * @returns {Source<T>}\n\t */\n\t#source(value) {\n\t\treturn update_version === this.#update_version ? state(value) : source(value);\n\t}\n\n\t// We init as part of the first instance so that we can treeshake this class\n\t#init() {\n\t\tinited = true;\n\n\t\tvar proto = SvelteSet.prototype;\n\t\tvar set_proto = Set.prototype;\n\n\t\tfor (const method of read_methods) {\n\t\t\t// @ts-ignore\n\t\t\tproto[method] = function (...v) {\n\t\t\t\tget(this.#version);\n\t\t\t\t// @ts-ignore\n\t\t\t\treturn set_proto[method].apply(this, v);\n\t\t\t};\n\t\t}\n\n\t\tfor (const method of set_like_methods) {\n\t\t\t// @ts-ignore\n\t\t\tproto[method] = function (...v) {\n\t\t\t\tget(this.#version);\n\t\t\t\t// @ts-ignore\n\t\t\t\tvar set = /** @type {Set<T>} */ (set_proto[method].apply(this, v));\n\t\t\t\treturn new SvelteSet(set);\n\t\t\t};\n\t\t}\n\t}\n\n\t/** @param {T} value */\n\thas(value) {\n\t\tvar has = super.has(value);\n\t\tvar sources = this.#sources;\n\t\tvar s = sources.get(value);\n\n\t\tif (s === undefined) {\n\t\t\tif (!has) {\n\t\t\t\t// If the value doesn't exist, track the version in case it's added later\n\t\t\t\t// but don't create sources willy-nilly to track all possible values\n\t\t\t\tget(this.#version);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\ts = this.#source(true);\n\n\t\t\tif (DEV) {\n\t\t\t\ttag(s, `SvelteSet has(${label(value)})`);\n\t\t\t}\n\n\t\t\tsources.set(value, s);\n\t\t}\n\n\t\tget(s);\n\t\treturn has;\n\t}\n\n\t/** @param {T} value */\n\tadd(value) {\n\t\tif (!super.has(value)) {\n\t\t\tsuper.add(value);\n\t\t\tset(this.#size, super.size);\n\t\t\tincrement(this.#version);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/** @param {T} value */\n\tdelete(value) {\n\t\tvar deleted = super.delete(value);\n\t\tvar sources = this.#sources;\n\t\tvar s = sources.get(value);\n\n\t\tif (s !== undefined) {\n\t\t\tsources.delete(value);\n\t\t\tset(s, false);\n\t\t}\n\n\t\tif (deleted) {\n\t\t\tset(this.#size, super.size);\n\t\t\tincrement(this.#version);\n\t\t}\n\n\t\treturn deleted;\n\t}\n\n\tclear() {\n\t\tif (super.size === 0) {\n\t\t\treturn;\n\t\t}\n\t\t// Clear first, so we get nice console.log outputs with $inspect\n\t\tsuper.clear();\n\t\tvar sources = this.#sources;\n\n\t\tfor (var s of sources.values()) {\n\t\t\tset(s, false);\n\t\t}\n\n\t\tsources.clear();\n\t\tset(this.#size, 0);\n\t\tincrement(this.#version);\n\t}\n\n\tkeys() {\n\t\treturn this.values();\n\t}\n\n\tvalues() {\n\t\tget(this.#version);\n\t\treturn super.values();\n\t}\n\n\tentries() {\n\t\tget(this.#version);\n\t\treturn super.entries();\n\t}\n\n\t[Symbol.iterator]() {\n\t\treturn this.keys();\n\t}\n\n\tget size() {\n\t\treturn get(this.#size);\n\t}\n}\n","import { createSubscriber } from './create-subscriber.js';\n\n/**\n * @template T\n */\nexport class ReactiveValue {\n\t#fn;\n\t#subscribe;\n\n\t/**\n\t *\n\t * @param {() => T} fn\n\t * @param {(update: () => void) => void} onsubscribe\n\t */\n\tconstructor(fn, onsubscribe) {\n\t\tthis.#fn = fn;\n\t\tthis.#subscribe = createSubscriber(onsubscribe);\n\t}\n\n\tget current() {\n\t\tthis.#subscribe();\n\t\treturn this.#fn();\n\t}\n}\n","import { on } from '../events/index.js';\nimport { ReactiveValue } from './reactive-value.js';\n\nconst parenthesis_regex = /\\(.+\\)/;\n\n// these keywords are valid media queries but they need to be without parenthesis\n//\n// eg: new MediaQuery('screen')\n//\n// however because of the auto-parenthesis logic in the constructor since there's no parentehesis\n// in the media query they'll be surrounded by parenthesis\n//\n// however we can check if the media query is only composed of these keywords\n// and skip the auto-parenthesis\n//\n// https://github.com/sveltejs/svelte/issues/15930\nconst non_parenthesized_keywords = new Set(['all', 'print', 'screen', 'and', 'or', 'not', 'only']);\n\n/**\n * Creates a media query and provides a `current` property that reflects whether or not it matches.\n *\n * Use it carefully  during server-side rendering, there is no way to know what the correct value should be, potentially causing content to change upon hydration.\n * If you can use the media query in CSS to achieve the same effect, do that.\n *\n * ```svelte\n * <script>\n * \timport { MediaQuery } from 'svelte/reactivity';\n *\n * \tconst large = new MediaQuery('min-width: 800px');\n * </script>\n *\n * <h1>{large.current ? 'large screen' : 'small screen'}</h1>\n * ```\n * @extends {ReactiveValue<boolean>}\n * @since 5.7.0\n */\nexport class MediaQuery extends ReactiveValue {\n\t/**\n\t * @param {string} query A media query string\n\t * @param {boolean} [fallback] Fallback value for the server\n\t */\n\tconstructor(query, fallback) {\n\t\tlet final_query =\n\t\t\tparenthesis_regex.test(query) ||\n\t\t\t// we need to use `some` here because technically this `window.matchMedia('random,screen')` still returns true\n\t\t\tquery.split(/[\\s,]+/).some((keyword) => non_parenthesized_keywords.has(keyword.trim()))\n\t\t\t\t? query\n\t\t\t\t: `(${query})`;\n\t\tconst q = window.matchMedia(final_query);\n\t\tsuper(\n\t\t\t() => q.matches,\n\t\t\t(update) => on(q, 'change', update)\n\t\t);\n\t}\n}\n","import { ConnectionMode, getEdgePosition, getElevatedEdgeZIndex, getNodesInside, isEdgeVisible } from '@xyflow/system';\nexport function getVisibleNodes(nodeLookup, transform, width, height) {\n    const visibleNodes = new Map();\n    getNodesInside(nodeLookup, { x: 0, y: 0, width: width, height: height }, transform, true).forEach((node) => {\n        visibleNodes.set(node.id, node);\n    });\n    return visibleNodes;\n}\nexport function getLayoutedEdges(options) {\n    const { edges, defaultEdgeOptions, nodeLookup, previousEdges, connectionMode, onerror, onlyRenderVisible, elevateEdgesOnSelect } = options;\n    const layoutedEdges = new Map();\n    for (const edge of edges) {\n        const sourceNode = nodeLookup.get(edge.source);\n        const targetNode = nodeLookup.get(edge.target);\n        if (!sourceNode || !targetNode) {\n            continue;\n        }\n        if (onlyRenderVisible) {\n            const { visibleNodes, transform, width, height } = options;\n            if (isEdgeVisible({\n                sourceNode,\n                targetNode,\n                width: width,\n                height: height,\n                transform: transform\n            })) {\n                visibleNodes.set(sourceNode.id, sourceNode);\n                visibleNodes.set(targetNode.id, targetNode);\n            }\n            else {\n                continue;\n            }\n        }\n        // we reuse the previous edge object if\n        // the current and previous edge are the same\n        // and the source and target node are the same\n        // and references to internalNodes are the same\n        const previous = previousEdges.get(edge.id);\n        if (previous &&\n            edge === previous.edge &&\n            sourceNode == previous.sourceNode &&\n            targetNode == previous.targetNode) {\n            layoutedEdges.set(edge.id, previous);\n            continue;\n        }\n        const edgePosition = getEdgePosition({\n            id: edge.id,\n            sourceNode,\n            targetNode,\n            sourceHandle: edge.sourceHandle || null,\n            targetHandle: edge.targetHandle || null,\n            connectionMode,\n            onError: onerror\n        });\n        if (edgePosition) {\n            layoutedEdges.set(edge.id, {\n                ...defaultEdgeOptions,\n                ...edge,\n                ...edgePosition,\n                zIndex: getElevatedEdgeZIndex({\n                    selected: edge.selected,\n                    zIndex: edge.zIndex ?? defaultEdgeOptions.zIndex,\n                    sourceNode,\n                    targetNode,\n                    elevateOnSelect: elevateEdgesOnSelect\n                }),\n                sourceNode,\n                targetNode,\n                edge\n            });\n        }\n    }\n    return layoutedEdges;\n}\n","import { infiniteExtent, SelectionMode, ConnectionMode, devWarn, adoptUserNodes, getViewportForBounds, updateConnectionLookup, initialConnection, mergeAriaLabelConfig, getInternalNodesBounds, createMarkerIds, pointToRendererPoint, fitViewport } from '@xyflow/system';\nimport DefaultNode from '../components/nodes/DefaultNode.svelte';\nimport InputNode from '../components/nodes/InputNode.svelte';\nimport OutputNode from '../components/nodes/OutputNode.svelte';\nimport GroupNode from '../components/nodes/GroupNode.svelte';\nimport { BezierEdgeInternal, SmoothStepEdgeInternal, StraightEdgeInternal, StepEdgeInternal } from '../components/edges';\nimport { MediaQuery } from 'svelte/reactivity';\nimport { getLayoutedEdges, getVisibleNodes } from './visibleElements';\nexport const initialNodeTypes = {\n    input: InputNode,\n    output: OutputNode,\n    default: DefaultNode,\n    group: GroupNode\n};\nexport const initialEdgeTypes = {\n    straight: StraightEdgeInternal,\n    smoothstep: SmoothStepEdgeInternal,\n    default: BezierEdgeInternal,\n    step: StepEdgeInternal\n};\nfunction getInitialViewport(\n// This is just used to make sure adoptUserNodes is called before we calculate the viewport\n_nodesInitialized, fitView, initialViewport, width, height, nodeLookup) {\n    if (fitView && !initialViewport && width && height) {\n        const bounds = getInternalNodesBounds(nodeLookup, {\n            filter: (node) => !!((node.width || node.initialWidth) && (node.height || node.initialHeight))\n        });\n        return getViewportForBounds(bounds, width, height, 0.5, 2, 0.1);\n    }\n    else {\n        return initialViewport ?? { x: 0, y: 0, zoom: 1 };\n    }\n}\nexport function getInitialStore(signals) {\n    // We use a class here, because Svelte adds getters & setter for us.\n    // Inline classes have some performance implications but we just call it once (max twice).\n    class SvelteFlowStore {\n        flowId = $derived(signals.props.id ?? '1');\n        domNode = $state.raw(null);\n        panZoom = $state.raw(null);\n        width = $state.raw(signals.width ?? 0);\n        height = $state.raw(signals.height ?? 0);\n        nodesInitialized = $derived.by(() => {\n            const nodesInitialized = adoptUserNodes(signals.nodes, this.nodeLookup, this.parentLookup, {\n                nodeExtent: this.nodeExtent,\n                nodeOrigin: this.nodeOrigin,\n                elevateNodesOnSelect: signals.props.elevateNodesOnSelect ?? true,\n                checkEquality: true\n            });\n            if (this.fitViewQueued && nodesInitialized) {\n                if (this.fitViewOptions?.duration) {\n                    this.resolveFitView();\n                }\n                else {\n                    /**\n                     * When no duration is set, viewport is set immediately which prevents an update\n                     * I do not understand why, however we are setting state in a derived which is a no-go\n                     */\n                    queueMicrotask(() => {\n                        this.resolveFitView();\n                    });\n                }\n            }\n            return nodesInitialized;\n        });\n        viewportInitialized = $derived(this.panZoom !== null);\n        _edges = $derived.by(() => {\n            updateConnectionLookup(this.connectionLookup, this.edgeLookup, signals.edges);\n            return signals.edges;\n        });\n        get nodes() {\n            // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n            this.nodesInitialized;\n            return signals.nodes;\n        }\n        set nodes(nodes) {\n            signals.nodes = nodes;\n        }\n        get edges() {\n            return this._edges;\n        }\n        set edges(edges) {\n            signals.edges = edges;\n        }\n        _prevSelectedNodes = [];\n        _prevSelectedNodeIds = new Set();\n        selectedNodes = $derived.by(() => {\n            const selectedNodesCount = this._prevSelectedNodeIds.size;\n            const selectedNodeIds = new Set();\n            const selectedNodes = this.nodes.filter((node) => {\n                if (node.selected) {\n                    selectedNodeIds.add(node.id);\n                    this._prevSelectedNodeIds.delete(node.id);\n                }\n                return node.selected;\n            });\n            // Either the number of selected nodes has changed or two nodes changed their selection state\n            // at the same time. However then the previously selected node will be inside _prevSelectedNodeIds\n            if (selectedNodesCount !== selectedNodeIds.size || this._prevSelectedNodeIds.size > 0) {\n                this._prevSelectedNodes = selectedNodes;\n            }\n            this._prevSelectedNodeIds = selectedNodeIds;\n            return this._prevSelectedNodes;\n        });\n        _prevSelectedEdges = [];\n        _prevSelectedEdgeIds = new Set();\n        selectedEdges = $derived.by(() => {\n            const selectedEdgesCount = this._prevSelectedEdgeIds.size;\n            const selectedEdgeIds = new Set();\n            const selectedEdges = this.edges.filter((edge) => {\n                if (edge.selected) {\n                    selectedEdgeIds.add(edge.id);\n                    this._prevSelectedEdgeIds.delete(edge.id);\n                }\n                return edge.selected;\n            });\n            // Either the number of selected edges has changed or two edges changed their selection state\n            // at the same time. However then the previously selected edge will be inside _prevSelectedEdgeIds\n            if (selectedEdgesCount !== selectedEdgeIds.size || this._prevSelectedEdgeIds.size > 0) {\n                this._prevSelectedEdges = selectedEdges;\n            }\n            this._prevSelectedEdgeIds = selectedEdgeIds;\n            return this._prevSelectedEdges;\n        });\n        selectionChangeHandlers = new Map();\n        nodeLookup = new Map();\n        parentLookup = new Map();\n        connectionLookup = new Map();\n        edgeLookup = new Map();\n        _prevVisibleEdges = new Map();\n        visible = $derived.by(() => {\n            const { \n            // We need to access this._nodes to trigger on changes\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            nodes, _edges: edges, _prevVisibleEdges: previousEdges, nodeLookup, connectionMode, onerror, onlyRenderVisibleElements, defaultEdgeOptions } = this;\n            let visibleNodes;\n            let visibleEdges;\n            const options = {\n                edges,\n                defaultEdgeOptions,\n                previousEdges,\n                nodeLookup,\n                connectionMode,\n                elevateEdgesOnSelect: signals.props.elevateEdgesOnSelect ?? true,\n                onerror\n            };\n            if (onlyRenderVisibleElements) {\n                // We only subscribe to viewport, width, height if onlyRenderVisibleElements is true\n                const { viewport, width, height } = this;\n                const transform = [viewport.x, viewport.y, viewport.zoom];\n                visibleNodes = getVisibleNodes(nodeLookup, transform, width, height);\n                visibleEdges = getLayoutedEdges({\n                    ...options,\n                    onlyRenderVisible: true,\n                    visibleNodes,\n                    transform,\n                    width,\n                    height\n                });\n            }\n            else {\n                visibleNodes = this.nodeLookup;\n                visibleEdges = getLayoutedEdges(options);\n            }\n            return {\n                nodes: visibleNodes,\n                edges: visibleEdges\n            };\n        });\n        nodesDraggable = $derived(signals.props.nodesDraggable ?? true);\n        nodesConnectable = $derived(signals.props.nodesConnectable ?? true);\n        elementsSelectable = $derived(signals.props.elementsSelectable ?? true);\n        nodesFocusable = $derived(signals.props.nodesFocusable ?? true);\n        edgesFocusable = $derived(signals.props.edgesFocusable ?? true);\n        disableKeyboardA11y = $derived(signals.props.disableKeyboardA11y ?? false);\n        minZoom = $derived(signals.props.minZoom ?? 0.5);\n        maxZoom = $derived(signals.props.maxZoom ?? 2);\n        nodeOrigin = $derived(signals.props.nodeOrigin ?? [0, 0]);\n        nodeExtent = $derived(signals.props.nodeExtent ?? infiniteExtent);\n        translateExtent = $derived(signals.props.translateExtent ?? infiniteExtent);\n        defaultEdgeOptions = $derived(signals.props.defaultEdgeOptions ?? {});\n        nodeDragThreshold = $derived(signals.props.nodeDragThreshold ?? 1);\n        autoPanOnNodeDrag = $derived(signals.props.autoPanOnNodeDrag ?? true);\n        autoPanOnConnect = $derived(signals.props.autoPanOnConnect ?? true);\n        autoPanOnNodeFocus = $derived(signals.props.autoPanOnNodeFocus ?? true);\n        connectionDragThreshold = $derived(signals.props.connectionDragThreshold ?? 1);\n        fitViewQueued = signals.props.fitView ?? false;\n        fitViewOptions = signals.props.fitViewOptions;\n        fitViewResolver = null;\n        snapGrid = $derived(signals.props.snapGrid ?? null);\n        dragging = $state.raw(false);\n        selectionRect = $state.raw(null);\n        selectionKeyPressed = $state.raw(false);\n        multiselectionKeyPressed = $state.raw(false);\n        deleteKeyPressed = $state.raw(false);\n        panActivationKeyPressed = $state.raw(false);\n        zoomActivationKeyPressed = $state.raw(false);\n        selectionRectMode = $state.raw(null);\n        ariaLiveMessage = $state.raw('');\n        selectionMode = $derived(signals.props.selectionMode ?? SelectionMode.Partial);\n        nodeTypes = $derived({ ...initialNodeTypes, ...signals.props.nodeTypes });\n        edgeTypes = $derived({ ...initialEdgeTypes, ...signals.props.edgeTypes });\n        noPanClass = $derived(signals.props.noPanClass ?? 'nopan');\n        noDragClass = $derived(signals.props.noDragClass ?? 'nodrag');\n        noWheelClass = $derived(signals.props.noWheelClass ?? 'nowheel');\n        ariaLabelConfig = $derived(mergeAriaLabelConfig(signals.props.ariaLabelConfig));\n        // _viewport is the internal viewport.\n        // when binding to viewport, we operate on signals.viewport instead\n        _viewport = $state.raw(getInitialViewport(this.nodesInitialized, signals.props.fitView, signals.props.initialViewport, this.width, this.height, this.nodeLookup));\n        get viewport() {\n            return signals.viewport ?? this._viewport;\n        }\n        set viewport(newViewport) {\n            if (signals.viewport) {\n                signals.viewport = newViewport;\n            }\n            this._viewport = newViewport;\n        }\n        // _connection is viewport independent and originating from XYHandle\n        _connection = $state.raw(initialConnection);\n        // We derive a viewport dependent connection here\n        connection = $derived.by(() => {\n            if (!this._connection.inProgress) {\n                return this._connection;\n            }\n            return {\n                ...this._connection,\n                to: pointToRendererPoint(this._connection.to, [\n                    this.viewport.x,\n                    this.viewport.y,\n                    this.viewport.zoom\n                ])\n            };\n        });\n        connectionMode = $derived(signals.props.connectionMode ?? ConnectionMode.Strict);\n        connectionRadius = $derived(signals.props.connectionRadius ?? 20);\n        isValidConnection = $derived(signals.props.isValidConnection ?? (() => true));\n        selectNodesOnDrag = $derived(signals.props.selectNodesOnDrag ?? true);\n        defaultMarkerColor = $derived(signals.props.defaultMarkerColor === undefined ? '#b1b1b7' : signals.props.defaultMarkerColor);\n        markers = $derived.by(() => {\n            return createMarkerIds(signals.edges, {\n                defaultColor: this.defaultMarkerColor,\n                id: this.flowId,\n                defaultMarkerStart: this.defaultEdgeOptions.markerStart,\n                defaultMarkerEnd: this.defaultEdgeOptions.markerEnd\n            });\n        });\n        onlyRenderVisibleElements = $derived(signals.props.onlyRenderVisibleElements ?? false);\n        onerror = $derived(signals.props.onflowerror ?? devWarn);\n        ondelete = $derived(signals.props.ondelete);\n        onbeforedelete = $derived(signals.props.onbeforedelete);\n        onbeforeconnect = $derived(signals.props.onbeforeconnect);\n        onconnect = $derived(signals.props.onconnect);\n        onconnectstart = $derived(signals.props.onconnectstart);\n        onconnectend = $derived(signals.props.onconnectend);\n        onbeforereconnect = $derived(signals.props.onbeforereconnect);\n        onreconnect = $derived(signals.props.onreconnect);\n        onreconnectstart = $derived(signals.props.onreconnectstart);\n        onreconnectend = $derived(signals.props.onreconnectend);\n        clickConnect = $derived(signals.props.clickConnect ?? true);\n        onclickconnectstart = $derived(signals.props.onclickconnectstart);\n        onclickconnectend = $derived(signals.props.onclickconnectend);\n        clickConnectStartHandle = $state.raw(null);\n        onselectiondrag = $derived(signals.props.onselectiondrag);\n        onselectiondragstart = $derived(signals.props.onselectiondragstart);\n        onselectiondragstop = $derived(signals.props.onselectiondragstop);\n        resolveFitView = async () => {\n            if (!this.panZoom) {\n                return;\n            }\n            await fitViewport({\n                nodes: this.nodeLookup,\n                width: this.width,\n                height: this.height,\n                panZoom: this.panZoom,\n                minZoom: this.minZoom,\n                maxZoom: this.maxZoom\n            }, this.fitViewOptions);\n            this.fitViewResolver?.resolve(true);\n            /**\n             * wait for the fitViewport to resolve before deleting the resolver,\n             * we want to reuse the old resolver if the user calls fitView again in the mean time\n             */\n            this.fitViewQueued = false;\n            this.fitViewOptions = undefined;\n            this.fitViewResolver = null;\n        };\n        _prefersDark = new MediaQuery('(prefers-color-scheme: dark)', signals.props.colorModeSSR === 'dark');\n        colorMode = $derived(signals.props.colorMode === 'system'\n            ? this._prefersDark.current\n                ? 'dark'\n                : 'light'\n            : (signals.props.colorMode ?? 'light'));\n        constructor() {\n            if (process.env.NODE_ENV === 'development') {\n                warnIfDeeplyReactive(signals.nodes, 'nodes');\n                warnIfDeeplyReactive(signals.edges, 'edges');\n            }\n        }\n        resetStoreValues() {\n            this.dragging = false;\n            this.selectionRect = null;\n            this.selectionRectMode = null;\n            this.selectionKeyPressed = false;\n            this.multiselectionKeyPressed = false;\n            this.deleteKeyPressed = false;\n            this.panActivationKeyPressed = false;\n            this.zoomActivationKeyPressed = false;\n            this._connection = initialConnection;\n            this.clickConnectStartHandle = null;\n            this.viewport = signals.props.initialViewport ?? { x: 0, y: 0, zoom: 1 };\n            this.ariaLiveMessage = '';\n        }\n    }\n    return new SvelteFlowStore();\n}\n// Only way to check if an object is a proxy\n// is to see if is failes to perform a structured clone\nfunction warnIfDeeplyReactive(array, name) {\n    try {\n        if (array && array.length > 0) {\n            structuredClone(array[0]);\n        }\n    }\n    catch {\n        console.warn(`Use $state.raw for ${name} to prevent performance issues.`);\n    }\n}\n","<script lang=\"ts\">\n  import { Position } from '@xyflow/system';\n  import type { NodeProps } from '../../types';\n\n  import { Handle } from '../Handle';\n\n  let { data = { label: 'Node' }, sourcePosition = Position.Bottom }: NodeProps = $props();\n</script>\n\n{data?.label}\n<Handle type=\"source\" position={sourcePosition} />\n","<script lang=\"ts\">\n  import { Position } from '@xyflow/system';\n  import type { NodeProps } from '../../types';\n\n  import { Handle } from '../Handle';\n\n  let { data = { label: 'Node' }, targetPosition = Position.Top }: NodeProps = $props();\n</script>\n\n{data?.label}\n<Handle type=\"target\" position={targetPosition} />\n","<script lang=\"ts\">\n  import type { NodeProps } from '../../types';\n\n  // eslint-disable-next-line no-empty-pattern\n  let {}: NodeProps = $props();\n</script>\n","<script lang=\"ts\">\n  import { getStraightPath } from '@xyflow/system';\n\n  import BaseEdge from './BaseEdge.svelte';\n  import type { EdgeProps } from '../../types';\n\n  let {\n    sourceX,\n    sourceY,\n    targetX,\n    targetY,\n    label,\n    labelStyle,\n    markerStart,\n    markerEnd,\n    interactionWidth,\n    style\n  }: EdgeProps = $props();\n\n  let [path, labelX, labelY] = $derived(\n    getStraightPath({\n      sourceX,\n      sourceY,\n      targetX,\n      targetY\n    })\n  );\n</script>\n\n<BaseEdge\n  {path}\n  {labelX}\n  {labelY}\n  {label}\n  {labelStyle}\n  {markerStart}\n  {markerEnd}\n  {interactionWidth}\n  {style}\n/>\n","<script lang=\"ts\">\n  import { getSmoothStepPath } from '@xyflow/system';\n\n  import BaseEdge from './BaseEdge.svelte';\n  import type { EdgeProps } from '../../types';\n\n  let {\n    interactionWidth,\n    label,\n    labelStyle,\n    style,\n    markerEnd,\n    markerStart,\n    sourcePosition,\n    sourceX,\n    sourceY,\n    targetPosition,\n    targetX,\n    targetY\n  }: EdgeProps = $props();\n\n  let [path, labelX, labelY] = $derived(\n    getSmoothStepPath({\n      sourceX,\n      sourceY,\n      targetX,\n      targetY,\n      sourcePosition,\n      targetPosition\n    })\n  );\n</script>\n\n<BaseEdge\n  {path}\n  {labelX}\n  {labelY}\n  {label}\n  {labelStyle}\n  {markerStart}\n  {markerEnd}\n  {interactionWidth}\n  {style}\n/>\n","<script lang=\"ts\">\n  import { getSmoothStepPath } from '@xyflow/system';\n\n  import BaseEdge from './BaseEdge.svelte';\n  import type { EdgeProps } from '../../types';\n\n  let {\n    sourceX,\n    sourceY,\n    sourcePosition,\n    targetX,\n    targetY,\n    targetPosition,\n    label,\n    labelStyle,\n    markerStart,\n    markerEnd,\n    interactionWidth,\n    style\n  }: EdgeProps = $props();\n\n  let [path, labelX, labelY] = $derived(\n    getSmoothStepPath({\n      sourceX,\n      sourceY,\n      targetX,\n      targetY,\n      sourcePosition,\n      targetPosition,\n      borderRadius: 0\n    })\n  );\n</script>\n\n<BaseEdge\n  {path}\n  {labelX}\n  {labelY}\n  {label}\n  {labelStyle}\n  {markerStart}\n  {markerEnd}\n  {interactionWidth}\n  {style}\n/>\n","import { getContext } from 'svelte';\nimport { key } from '../store';\nimport { derivedWarning } from './derivedWarning.svelte';\nexport function useStore() {\n    const storeContext = getContext(key);\n    if (!storeContext) {\n        throw new Error('To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />');\n    }\n    if (process.env.NODE_ENV === 'development') {\n        derivedWarning('useStore');\n    }\n    return storeContext.getStore();\n}\n","import { panBy as panBySystem, updateNodeInternals as updateNodeInternalsSystem, addEdge as addEdgeUtil, initialConnection, errorMessages, updateAbsolutePositions, snapPosition, calculateNodePosition } from '@xyflow/system';\nimport { initialEdgeTypes, initialNodeTypes, getInitialStore } from './initial-store.svelte';\nimport {} from './types';\nexport const key = Symbol();\nexport { useStore } from '../hooks/useStore';\nexport function createStore(signals) {\n    const store = getInitialStore(signals);\n    function setNodeTypes(nodeTypes) {\n        store.nodeTypes = {\n            ...initialNodeTypes,\n            ...nodeTypes\n        };\n    }\n    function setEdgeTypes(edgeTypes) {\n        store.edgeTypes = {\n            ...initialEdgeTypes,\n            ...edgeTypes\n        };\n    }\n    function addEdge(edgeParams) {\n        store.edges = addEdgeUtil(edgeParams, store.edges);\n    }\n    const updateNodePositions = (nodeDragItems, dragging = false) => {\n        store.nodes = store.nodes.map((node) => {\n            const dragItem = nodeDragItems.get(node.id);\n            return dragItem ? { ...node, position: dragItem.position, dragging } : node;\n        });\n    };\n    function updateNodeInternals(updates) {\n        const { changes, updatedInternals } = updateNodeInternalsSystem(updates, store.nodeLookup, store.parentLookup, store.domNode, store.nodeOrigin);\n        if (!updatedInternals) {\n            return;\n        }\n        updateAbsolutePositions(store.nodeLookup, store.parentLookup, {\n            nodeOrigin: store.nodeOrigin,\n            nodeExtent: store.nodeExtent\n        });\n        if (store.fitViewQueued) {\n            store.resolveFitView();\n        }\n        const newNodes = new Map();\n        for (const change of changes) {\n            const userNode = store.nodeLookup.get(change.id)?.internals.userNode;\n            if (!userNode) {\n                continue;\n            }\n            const node = { ...userNode };\n            switch (change.type) {\n                case 'dimensions': {\n                    const measured = { ...node.measured, ...change.dimensions };\n                    if (change.setAttributes) {\n                        node.width = change.dimensions?.width ?? node.width;\n                        node.height = change.dimensions?.height ?? node.height;\n                    }\n                    node.measured = measured;\n                    break;\n                }\n                case 'position':\n                    node.position = change.position ?? node.position;\n                    break;\n            }\n            newNodes.set(change.id, node);\n        }\n        store.nodes = store.nodes.map((node) => newNodes.get(node.id) ?? node);\n    }\n    function fitView(options) {\n        // We either create a new Promise or reuse the existing one\n        // Even if fitView is called multiple times in a row, we only end up with a single Promise\n        const fitViewResolver = store.fitViewResolver ?? Promise.withResolvers();\n        // We schedule a fitView by setting fitViewQueued and triggering a setNodes\n        store.fitViewQueued = true;\n        store.fitViewOptions = options;\n        store.fitViewResolver = fitViewResolver;\n        // We need to update the nodes so that adoptUserNodes is triggered\n        store.nodes = [...store.nodes];\n        return fitViewResolver.promise;\n    }\n    async function setCenter(x, y, options) {\n        const nextZoom = typeof options?.zoom !== 'undefined' ? options.zoom : store.maxZoom;\n        const currentPanZoom = store.panZoom;\n        if (!currentPanZoom) {\n            return Promise.resolve(false);\n        }\n        await currentPanZoom.setViewport({\n            x: store.width / 2 - x * nextZoom,\n            y: store.height / 2 - y * nextZoom,\n            zoom: nextZoom\n        }, { duration: options?.duration, ease: options?.ease, interpolate: options?.interpolate });\n        return Promise.resolve(true);\n    }\n    function zoomBy(factor, options) {\n        const panZoom = store.panZoom;\n        if (!panZoom) {\n            return Promise.resolve(false);\n        }\n        return panZoom.scaleBy(factor, options);\n    }\n    function zoomIn(options) {\n        return zoomBy(1.2, options);\n    }\n    function zoomOut(options) {\n        return zoomBy(1 / 1.2, options);\n    }\n    function setMinZoom(minZoom) {\n        const panZoom = store.panZoom;\n        if (panZoom) {\n            panZoom.setScaleExtent([minZoom, store.maxZoom]);\n            store.minZoom = minZoom;\n        }\n    }\n    function setMaxZoom(maxZoom) {\n        const panZoom = store.panZoom;\n        if (panZoom) {\n            panZoom.setScaleExtent([store.minZoom, maxZoom]);\n            store.maxZoom = maxZoom;\n        }\n    }\n    function setTranslateExtent(extent) {\n        const panZoom = store.panZoom;\n        if (panZoom) {\n            panZoom.setTranslateExtent(extent);\n            store.translateExtent = extent;\n        }\n    }\n    function setPaneClickDistance(distance) {\n        store.panZoom?.setClickDistance(distance);\n    }\n    function deselect(elements, elementsToDeselect = null) {\n        let deselected = false;\n        const newElements = elements.map((element) => {\n            const shouldDeselect = elementsToDeselect ? elementsToDeselect.has(element.id) : true;\n            if (shouldDeselect && element.selected) {\n                deselected = true;\n                return { ...element, selected: false };\n            }\n            return element;\n        });\n        return [deselected, newElements];\n    }\n    function unselectNodesAndEdges(params) {\n        const nodesToDeselect = params?.nodes ? new Set(params.nodes.map((node) => node.id)) : null;\n        const [nodesDeselected, newNodes] = deselect(store.nodes, nodesToDeselect);\n        if (nodesDeselected) {\n            store.nodes = newNodes;\n        }\n        const edgesToDeselect = params?.edges ? new Set(params.edges.map((node) => node.id)) : null;\n        const [edgesDeselected, newEdges] = deselect(store.edges, edgesToDeselect);\n        if (edgesDeselected) {\n            store.edges = newEdges;\n        }\n    }\n    function addSelectedNodes(ids) {\n        const isMultiSelection = store.multiselectionKeyPressed;\n        store.nodes = store.nodes.map((node) => {\n            const nodeWillBeSelected = ids.includes(node.id);\n            const selected = isMultiSelection ? node.selected || nodeWillBeSelected : nodeWillBeSelected;\n            if (node.selected !== selected) {\n                // we need to mutate the node here in order to have the correct selected state in the drag handler\n                const internalNode = store.nodeLookup.get(node.id);\n                if (internalNode)\n                    internalNode.selected = selected;\n                node.selected = selected;\n                return { ...node };\n            }\n            return node;\n        });\n        if (!isMultiSelection) {\n            unselectNodesAndEdges({ nodes: [] });\n        }\n    }\n    function addSelectedEdges(ids) {\n        const isMultiSelection = store.multiselectionKeyPressed;\n        store.edges = store.edges.map((edge) => {\n            const edgeWillBeSelected = ids.includes(edge.id);\n            const selected = isMultiSelection ? edge.selected || edgeWillBeSelected : edgeWillBeSelected;\n            if (edge.selected !== selected) {\n                return { ...edge, selected };\n            }\n            return edge;\n        });\n        if (!isMultiSelection) {\n            unselectNodesAndEdges({ edges: [] });\n        }\n    }\n    function handleNodeSelection(id, unselect, nodeRef) {\n        const node = store.nodeLookup.get(id);\n        if (!node) {\n            console.warn('012', errorMessages['error012'](id));\n            return;\n        }\n        store.selectionRect = null;\n        store.selectionRectMode = null;\n        if (!node.selected) {\n            addSelectedNodes([id]);\n        }\n        else if (unselect || (node.selected && store.multiselectionKeyPressed)) {\n            unselectNodesAndEdges({ nodes: [node], edges: [] });\n            requestAnimationFrame(() => nodeRef?.blur());\n        }\n    }\n    function handleEdgeSelection(id) {\n        const edge = store.edgeLookup.get(id);\n        if (!edge) {\n            console.warn('012', errorMessages['error012'](id));\n            return;\n        }\n        const selectable = edge.selectable || (store.elementsSelectable && typeof edge.selectable === 'undefined');\n        if (selectable) {\n            store.selectionRect = null;\n            store.selectionRectMode = null;\n            if (!edge.selected) {\n                addSelectedEdges([id]);\n            }\n            else if (edge.selected && store.multiselectionKeyPressed) {\n                unselectNodesAndEdges({ nodes: [], edges: [edge] });\n            }\n        }\n    }\n    function moveSelectedNodes(direction, factor) {\n        const { nodeExtent, snapGrid, nodeOrigin, nodeLookup, nodesDraggable, onerror } = store;\n        const nodeUpdates = new Map();\n        /*\n         * by default a node moves 5px on each key press\n         * if snap grid is enabled, we use that for the velocity\n         */\n        const xVelo = snapGrid?.[0] ?? 5;\n        const yVelo = snapGrid?.[1] ?? 5;\n        const xDiff = direction.x * xVelo * factor;\n        const yDiff = direction.y * yVelo * factor;\n        for (const node of nodeLookup.values()) {\n            const isSelected = node.selected &&\n                (node.draggable || (nodesDraggable && typeof node.draggable === 'undefined'));\n            if (!isSelected) {\n                continue;\n            }\n            let nextPosition = {\n                x: node.internals.positionAbsolute.x + xDiff,\n                y: node.internals.positionAbsolute.y + yDiff\n            };\n            if (snapGrid) {\n                nextPosition = snapPosition(nextPosition, snapGrid);\n            }\n            const { position, positionAbsolute } = calculateNodePosition({\n                nodeId: node.id,\n                nextPosition,\n                nodeLookup,\n                nodeExtent,\n                nodeOrigin,\n                onError: onerror\n            });\n            node.position = position;\n            node.internals.positionAbsolute = positionAbsolute;\n            nodeUpdates.set(node.id, node);\n        }\n        updateNodePositions(nodeUpdates);\n    }\n    function panBy(delta) {\n        return panBySystem({\n            delta,\n            panZoom: store.panZoom,\n            transform: [store.viewport.x, store.viewport.y, store.viewport.zoom],\n            translateExtent: store.translateExtent,\n            width: store.width,\n            height: store.height\n        });\n    }\n    const updateConnection = (newConnection) => {\n        store._connection = { ...newConnection };\n    };\n    function cancelConnection() {\n        store._connection = initialConnection;\n    }\n    function reset() {\n        store.resetStoreValues();\n        unselectNodesAndEdges();\n    }\n    const storeWithActions = Object.assign(store, {\n        setNodeTypes,\n        setEdgeTypes,\n        addEdge,\n        updateNodePositions,\n        updateNodeInternals,\n        zoomIn,\n        zoomOut,\n        fitView,\n        setCenter,\n        setMinZoom,\n        setMaxZoom,\n        setTranslateExtent,\n        setPaneClickDistance,\n        unselectNodesAndEdges,\n        addSelectedNodes,\n        addSelectedEdges,\n        handleNodeSelection,\n        handleEdgeSelection,\n        moveSelectedNodes,\n        panBy,\n        updateConnection,\n        cancelConnection,\n        reset\n    });\n    return storeWithActions;\n}\n","import { PanOnScrollMode, XYPanZoom } from '@xyflow/system';\nexport default function zoom(domNode, params) {\n    const { minZoom, maxZoom, initialViewport, onPanZoomStart, onPanZoom, onPanZoomEnd, translateExtent, paneClickDistance, setPanZoomInstance, onDraggingChange, onTransformChange } = params;\n    const panZoomInstance = XYPanZoom({\n        domNode,\n        minZoom,\n        maxZoom,\n        translateExtent,\n        viewport: initialViewport,\n        paneClickDistance,\n        onPanZoom,\n        onPanZoomStart,\n        onPanZoomEnd,\n        onDraggingChange\n    });\n    const viewport = panZoomInstance.getViewport();\n    if (initialViewport.x !== viewport.x ||\n        initialViewport.y !== viewport.y ||\n        initialViewport.zoom !== viewport.zoom) {\n        onTransformChange([viewport.x, viewport.y, viewport.zoom]);\n    }\n    setPanZoomInstance(panZoomInstance);\n    panZoomInstance.update(params);\n    return {\n        update(params) {\n            panZoomInstance.update(params);\n        }\n    };\n}\n","<script lang=\"ts\" module>\n  export function wrapHandler(\n    handler: (evt: MouseEvent) => void,\n    container: HTMLDivElement\n  ): (evt: MouseEvent) => void {\n    return (event: MouseEvent) => {\n      if (event.target !== container) {\n        return;\n      }\n      handler?.(event);\n    };\n  }\n\n  export function toggleSelected<Item extends Node | Edge>(ids: Set<string>) {\n    return (item: Item) => {\n      const isSelected = ids.has(item.id);\n\n      if (!!item.selected !== isSelected) {\n        return { ...item, selected: isSelected };\n      }\n\n      return item;\n    };\n  }\n\n  function isSetEqual(a: Set<string>, b: Set<string>) {\n    if (a.size !== b.size) {\n      return false;\n    }\n\n    for (const item of a) {\n      if (!b.has(item)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n</script>\n\n<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import { SelectionMode, getEventPosition, getNodesInside } from '@xyflow/system';\n\n  import type { Node, Edge } from '../../types';\n  import type { PaneProps } from './types';\n\n  let {\n    store = $bindable(),\n    panOnDrag = true,\n    selectionOnDrag,\n    onpaneclick,\n    onpanecontextmenu,\n    onselectionstart,\n    onselectionend,\n    children\n  }: PaneProps<NodeType, EdgeType> = $props();\n\n  // svelte-ignore non_reactive_update\n  let container: HTMLDivElement;\n  let containerBounds: DOMRect | null = null;\n\n  let selectedNodeIds: Set<string> = new Set();\n  let selectedEdgeIds: Set<string> = new Set();\n\n  let panOnDragActive = $derived(store.panActivationKeyPressed || panOnDrag);\n  let isSelecting = $derived(\n    store.selectionKeyPressed ||\n      store.selectionRect ||\n      (selectionOnDrag && panOnDragActive !== true)\n  );\n  let hasActiveSelection = $derived(\n    store.elementsSelectable && (isSelecting || store.selectionRectMode === 'user')\n  );\n\n  // Used to prevent click events when the user lets go of the selectionKey during a selection\n  let selectionInProgress = false;\n\n  function onClick(event: MouseEvent) {\n    // We prevent click events when the user let go of the selectionKey during a selection\n    // We also prevent click events when a connection is in progress\n    if (selectionInProgress || store.connection.inProgress) {\n      selectionInProgress = false;\n      return;\n    }\n\n    onpaneclick?.({ event });\n    store.unselectNodesAndEdges();\n    store.selectionRectMode = null;\n  }\n\n  // We start the selection process when the user clicks down on the pane\n  function onPointerDown(event: PointerEvent) {\n    containerBounds = container?.getBoundingClientRect();\n\n    if (\n      !store.elementsSelectable ||\n      !isSelecting ||\n      event.button !== 0 ||\n      event.target !== container ||\n      !containerBounds\n    ) {\n      return;\n    }\n\n    (event.target as Partial<Element> | null)?.setPointerCapture?.(event.pointerId);\n\n    const { x, y } = getEventPosition(event, containerBounds);\n\n    store.unselectNodesAndEdges();\n\n    store.selectionRect = {\n      width: 0,\n      height: 0,\n      startX: x,\n      startY: y,\n      x,\n      y\n    };\n\n    onselectionstart?.(event);\n  }\n\n  function onPointerMove(event: PointerEvent) {\n    if (!isSelecting || !containerBounds || !store.selectionRect) {\n      return;\n    }\n\n    selectionInProgress = true;\n\n    const mousePos = getEventPosition(event, containerBounds);\n    const { startX = 0, startY = 0 } = store.selectionRect;\n\n    const nextUserSelectRect = {\n      ...store.selectionRect,\n      x: mousePos.x < startX ? mousePos.x : startX,\n      y: mousePos.y < startY ? mousePos.y : startY,\n      width: Math.abs(mousePos.x - startX),\n      height: Math.abs(mousePos.y - startY)\n    };\n\n    const prevSelectedNodeIds = selectedNodeIds;\n    const prevSelectedEdgeIds = selectedEdgeIds;\n\n    selectedNodeIds = new Set(\n      getNodesInside(\n        store.nodeLookup,\n        nextUserSelectRect,\n        [store.viewport.x, store.viewport.y, store.viewport.zoom],\n        store.selectionMode === SelectionMode.Partial,\n        true\n      ).map((n) => n.id)\n    );\n\n    const edgesSelectable = store.defaultEdgeOptions.selectable ?? true;\n    selectedEdgeIds = new Set();\n\n    // We look for all edges connected to the selected nodes\n    for (const nodeId of selectedNodeIds) {\n      const connections = store.connectionLookup.get(nodeId);\n      if (!connections) continue;\n      for (const { edgeId } of connections.values()) {\n        const edge = store.edgeLookup.get(edgeId);\n        if (edge && (edge.selectable ?? edgesSelectable)) {\n          selectedEdgeIds.add(edgeId);\n        }\n      }\n    }\n\n    // this prevents unnecessary updates while updating the selection rectangle\n    if (!isSetEqual(prevSelectedNodeIds, selectedNodeIds)) {\n      store.nodes = store.nodes.map(toggleSelected(selectedNodeIds));\n    }\n\n    if (!isSetEqual(prevSelectedEdgeIds, selectedEdgeIds)) {\n      store.edges = store.edges.map(toggleSelected(selectedEdgeIds));\n    }\n\n    store.selectionRectMode = 'user';\n    store.selectionRect = nextUserSelectRect;\n  }\n\n  function onPointerUp(event: PointerEvent) {\n    if (event.button !== 0) {\n      return;\n    }\n\n    (event.target as Partial<Element> | null)?.releasePointerCapture?.(event.pointerId);\n\n    // We only want to trigger click functions when in selection mode if\n    // the user did not move the mouse.\n    if (!isSelecting && store.selectionRectMode === 'user' && event.target === container) {\n      onClick?.(event);\n    }\n    store.selectionRect = null;\n\n    if (selectedNodeIds.size > 0) {\n      store.selectionRectMode = 'nodes';\n    }\n\n    // If the user kept holding the selectionKey during the selection,\n    // we need to reset the selectionInProgress, so the next click event is not prevented\n    if (store.selectionKeyPressed) {\n      selectionInProgress = false;\n    }\n\n    onselectionend?.(event);\n  }\n\n  const onContextMenu = (event: MouseEvent) => {\n    if (Array.isArray(panOnDragActive) && panOnDragActive.includes(2)) {\n      event.preventDefault();\n      return;\n    }\n\n    onpanecontextmenu?.({ event });\n  };\n</script>\n\n<!-- svelte-ignore a11y_no_static_element_interactions -->\n<!-- svelte-ignore a11y_click_events_have_key_events -->\n<div\n  bind:this={container}\n  class=\"svelte-flow__pane svelte-flow__container\"\n  class:draggable={panOnDrag === true || (Array.isArray(panOnDrag) && panOnDrag.includes(0))}\n  class:dragging={store.dragging}\n  class:selection={isSelecting}\n  onclick={hasActiveSelection ? undefined : wrapHandler(onClick, container)}\n  onpointerdown={hasActiveSelection ? onPointerDown : undefined}\n  onpointermove={hasActiveSelection ? onPointerMove : undefined}\n  onpointerup={hasActiveSelection ? onPointerUp : undefined}\n  oncontextmenu={wrapHandler(onContextMenu, container)}\n>\n  {@render children()}\n</div>\n","import { XYDrag } from '@xyflow/system';\nexport default function drag(domNode, params) {\n    const { store, onDrag, onDragStart, onDragStop, onNodeMouseDown } = params;\n    const dragInstance = XYDrag({\n        onDrag,\n        onDragStart,\n        onDragStop,\n        onNodeMouseDown,\n        getStoreItems: () => {\n            const { snapGrid, viewport } = store;\n            return {\n                nodes: store.nodes,\n                nodeLookup: store.nodeLookup,\n                edges: store.edges,\n                nodeExtent: store.nodeExtent,\n                snapGrid: snapGrid ? snapGrid : [0, 0],\n                snapToGrid: !!snapGrid,\n                nodeOrigin: store.nodeOrigin,\n                multiSelectionActive: store.multiselectionKeyPressed,\n                domNode: store.domNode,\n                transform: [viewport.x, viewport.y, viewport.zoom],\n                autoPanOnNodeDrag: store.autoPanOnNodeDrag,\n                nodesDraggable: store.nodesDraggable,\n                selectNodesOnDrag: store.selectNodesOnDrag,\n                nodeDragThreshold: store.nodeDragThreshold,\n                unselectNodesAndEdges: store.unselectNodesAndEdges,\n                updateNodePositions: store.updateNodePositions,\n                onSelectionDrag: store.onselectiondrag,\n                onSelectionDragStart: store.onselectiondragstart,\n                onSelectionDragStop: store.onselectiondragstop,\n                panBy: store.panBy\n            };\n        }\n    });\n    function updateDrag(domNode, params) {\n        if (params.disabled) {\n            dragInstance.destroy();\n            return;\n        }\n        dragInstance.update({\n            domNode,\n            noDragClassName: params.noDragClass,\n            handleSelector: params.handleSelector,\n            nodeId: params.nodeId,\n            isSelectable: params.isSelectable,\n            nodeClickDistance: params.nodeClickDistance\n        });\n    }\n    updateDrag(domNode, params);\n    return {\n        update(params) {\n            updateDrag(domNode, params);\n        },\n        destroy() {\n            dragInstance.destroy();\n        }\n    };\n}\n","export { default as A11yDescriptions } from './A11yDescriptions.svelte';\nexport const ARIA_NODE_DESC_KEY = 'svelte-flow__node-desc';\nexport const ARIA_EDGE_DESC_KEY = 'svelte-flow__edge-desc';\nexport const ARIA_LIVE_MESSAGE = 'svelte-flow__aria-live';\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import { setContext, onDestroy } from 'svelte';\n  import {\n    elementSelectionKeys,\n    errorMessages,\n    isInputDOMNode,\n    nodeHasDimensions,\n    Position,\n    getNodesInside\n  } from '@xyflow/system';\n\n  import drag from '../../actions/drag';\n  import DefaultNode from '../nodes/DefaultNode.svelte';\n\n  import type { ConnectableContext, NodeWrapperProps } from './types';\n  import type { Node, Edge, NodeEvents } from '../../types';\n  import { arrowKeyDiffs, toPxString } from '../../utils';\n  import { ARIA_NODE_DESC_KEY } from '../A11yDescriptions';\n\n  let {\n    store = $bindable(),\n    node,\n    resizeObserver,\n    nodeClickDistance,\n    onnodeclick,\n    onnodedrag,\n    onnodedragstart,\n    onnodedragstop,\n    onnodepointerenter,\n    onnodepointerleave,\n    onnodepointermove,\n    onnodecontextmenu\n  }: NodeWrapperProps<NodeType, EdgeType> & NodeEvents<NodeType> = $props();\n\n  let {\n    data = {},\n    selected = false,\n    draggable: _draggable,\n    selectable: _selectable,\n    deletable = true,\n    connectable: _connectable,\n    focusable: _focusable,\n    hidden = false,\n    dragging = false,\n    style = '',\n    class: className,\n    type = 'default',\n    parentId,\n    sourcePosition,\n    targetPosition,\n    measured: { width: measuredWidth, height: measuredHeight } = { width: 0, height: 0 },\n    initialWidth,\n    initialHeight,\n    width,\n    height,\n    dragHandle,\n    internals: {\n      z: zIndex = 0,\n      positionAbsolute: { x: positionX, y: positionY },\n      userNode\n    }\n  } = $derived(node);\n\n  let { id } = node;\n\n  let draggable = $derived(_draggable ?? store.nodesDraggable);\n  let selectable = $derived(_selectable ?? store.elementsSelectable);\n  let connectable = $derived(_connectable ?? store.nodesConnectable);\n  let hasDimensions = $derived(nodeHasDimensions(node));\n  let hasHandleBounds = $derived(!!node.internals.handleBounds);\n  let isInitialized = $derived(hasDimensions && hasHandleBounds);\n  let focusable = $derived(_focusable ?? store.nodesFocusable);\n\n  function isInParentLookup(id: string) {\n    return store.parentLookup.has(id);\n  }\n\n  let isParent = $derived(isInParentLookup(id));\n\n  let nodeRef: HTMLDivElement | null = $state(null);\n  let prevNodeRef: HTMLDivElement | null = null;\n\n  // svelte-ignore state_referenced_locally\n  let prevType: string | undefined = type;\n  // svelte-ignore state_referenced_locally\n  let prevSourcePosition: Position | undefined = sourcePosition;\n  // svelte-ignore state_referenced_locally\n  let prevTargetPosition: Position | undefined = targetPosition;\n\n  let NodeComponent = $derived(store.nodeTypes[type] ?? DefaultNode);\n  let ariaLabelConfig = $derived(store.ariaLabelConfig);\n\n  let connectableContext: ConnectableContext = {\n    get value() {\n      return connectable;\n    }\n  };\n  setContext('svelteflow__node_connectable', connectableContext);\n  setContext('svelteflow__node_id', id);\n\n  if (process.env.NODE_ENV === 'development') {\n    $effect(() => {\n      const valid = !!store.nodeTypes[type];\n      if (!valid) {\n        console.warn('003', errorMessages['error003'](type!));\n      }\n    });\n  }\n\n  let nodeStyle = $derived.by(() => {\n    const w = measuredWidth === undefined ? (width ?? initialWidth) : width;\n    const h = measuredHeight === undefined ? (height ?? initialHeight) : height;\n\n    if (w === undefined && h === undefined && style === undefined) {\n      return undefined;\n    }\n\n    return `${style};${w ? `width:${toPxString(w)};` : ''}${h ? `height:${toPxString(h)};` : ''}`;\n  });\n\n  $effect(() => {\n    // if type, sourcePosition or targetPosition changes,\n    // we need to re-calculate the handle positions\n    const doUpdate =\n      type !== prevType ||\n      sourcePosition !== prevSourcePosition ||\n      targetPosition !== prevTargetPosition;\n\n    if (doUpdate && nodeRef !== null) {\n      requestAnimationFrame(() => {\n        if (nodeRef !== null) {\n          store.updateNodeInternals(\n            new Map([\n              [\n                id,\n                {\n                  id,\n                  nodeElement: nodeRef,\n                  force: true\n                }\n              ]\n            ])\n          );\n        }\n      });\n    }\n\n    prevType = type;\n    prevSourcePosition = sourcePosition;\n    prevTargetPosition = targetPosition;\n  });\n\n  $effect(() => {\n    /* eslint-disable @typescript-eslint/no-unused-expressions */\n    if (resizeObserver && (!isInitialized || nodeRef !== prevNodeRef)) {\n      prevNodeRef && resizeObserver.unobserve(prevNodeRef);\n      nodeRef && resizeObserver.observe(nodeRef);\n      prevNodeRef = nodeRef;\n    }\n    /* eslint-enable @typescript-eslint/no-unused-expressions */\n  });\n\n  onDestroy(() => {\n    if (prevNodeRef) {\n      resizeObserver?.unobserve(prevNodeRef);\n    }\n  });\n\n  function onSelectNodeHandler(event: MouseEvent | TouchEvent) {\n    if (selectable && (!store.selectNodesOnDrag || !draggable || store.nodeDragThreshold > 0)) {\n      // this handler gets called by XYDrag on drag start when selectNodesOnDrag=true\n      // here we only need to call it when selectNodesOnDrag=false\n      store.handleNodeSelection(id);\n    }\n\n    onnodeclick?.({ node: userNode, event });\n  }\n\n  function onKeyDown(event: KeyboardEvent) {\n    if (isInputDOMNode(event) || store.disableKeyboardA11y) {\n      return;\n    }\n\n    if (elementSelectionKeys.includes(event.key) && selectable) {\n      const unselect = event.key === 'Escape';\n\n      store.handleNodeSelection(id, unselect, nodeRef);\n    } else if (\n      draggable &&\n      node.selected &&\n      Object.prototype.hasOwnProperty.call(arrowKeyDiffs, event.key)\n    ) {\n      // prevent default scrolling behavior on arrow key press when node is moved\n      event.preventDefault();\n      store.ariaLiveMessage = ariaLabelConfig['node.a11yDescription.ariaLiveMessage']({\n        direction: event.key.replace('Arrow', '').toLowerCase(),\n        x: ~~node.internals.positionAbsolute.x,\n        y: ~~node.internals.positionAbsolute.y\n      });\n      store.moveSelectedNodes(arrowKeyDiffs[event.key], event.shiftKey ? 4 : 1);\n    }\n  }\n\n  const onFocus = () => {\n    if (\n      store.disableKeyboardA11y ||\n      !store.autoPanOnNodeFocus ||\n      !nodeRef?.matches(':focus-visible')\n    ) {\n      return;\n    }\n\n    const { width, height, viewport } = store;\n\n    const withinViewport =\n      getNodesInside(\n        new Map([[id, node]]),\n        { x: 0, y: 0, width, height },\n        [viewport.x, viewport.y, viewport.zoom],\n        true\n      ).length > 0;\n\n    if (!withinViewport) {\n      store.setCenter(\n        node.position.x + (node.measured.width ?? 0) / 2,\n        node.position.y + (node.measured.height ?? 0) / 2,\n        { zoom: viewport.zoom }\n      );\n    }\n  };\n</script>\n\n{#if !hidden}\n  <div\n    use:drag={{\n      nodeId: id,\n      isSelectable: selectable,\n      disabled: !draggable,\n      handleSelector: dragHandle,\n      noDragClass: store.noDragClass,\n      nodeClickDistance,\n      onNodeMouseDown: store.handleNodeSelection,\n      onDrag: (event, _, targetNode, nodes) => {\n        onnodedrag?.({ event, targetNode: targetNode as NodeType, nodes: nodes as NodeType[] });\n      },\n      onDragStart: (event, _, targetNode, nodes) => {\n        onnodedragstart?.({\n          event,\n          targetNode: targetNode as NodeType,\n          nodes: nodes as NodeType[]\n        });\n      },\n      onDragStop: (event, _, targetNode, nodes) => {\n        onnodedragstop?.({ event, targetNode: targetNode as NodeType, nodes: nodes as NodeType[] });\n      },\n      store\n    }}\n    bind:this={nodeRef}\n    data-id={id}\n    class={['svelte-flow__node', `svelte-flow__node-${type}`, className]}\n    class:dragging\n    class:selected\n    class:draggable\n    class:connectable\n    class:selectable\n    class:nopan={draggable}\n    class:parent={isParent}\n    style:z-index={zIndex}\n    style:transform=\"translate({positionX}px, {positionY}px)\"\n    style:visibility={hasDimensions ? 'visible' : 'hidden'}\n    style={nodeStyle}\n    onclick={onSelectNodeHandler}\n    onpointerenter={onnodepointerenter\n      ? (event) => onnodepointerenter({ node: userNode, event })\n      : undefined}\n    onpointerleave={onnodepointerleave\n      ? (event) => onnodepointerleave({ node: userNode, event })\n      : undefined}\n    onpointermove={onnodepointermove\n      ? (event) => onnodepointermove({ node: userNode, event })\n      : undefined}\n    oncontextmenu={onnodecontextmenu\n      ? (event) => onnodecontextmenu({ node: userNode, event })\n      : undefined}\n    onkeydown={focusable ? onKeyDown : undefined}\n    onfocus={focusable ? onFocus : undefined}\n    tabIndex={focusable ? 0 : undefined}\n    role={node.ariaRole ?? (focusable ? 'group' : undefined)}\n    aria-roledescription=\"node\"\n    aria-describedby={store.disableKeyboardA11y\n      ? undefined\n      : `${ARIA_NODE_DESC_KEY}-${store.flowId}`}\n    {...node.domAttributes}\n  >\n    <NodeComponent\n      {data}\n      {id}\n      {selected}\n      {selectable}\n      {deletable}\n      {sourcePosition}\n      {targetPosition}\n      {zIndex}\n      {dragging}\n      {draggable}\n      {dragHandle}\n      {parentId}\n      {type}\n      isConnectable={connectable}\n      positionAbsoluteX={positionX}\n      positionAbsoluteY={positionY}\n      {width}\n      {height}\n    />\n  </div>\n{/if}\n","<script lang=\"ts\">\n  import { useStore } from '../../../store';\n  import { Marker } from './';\n\n  const store = useStore();\n</script>\n\n<defs>\n  {#each store.markers as marker (marker.id)}\n    <Marker {...marker} />\n  {/each}\n</defs>\n","<script lang=\"ts\">\n  import { type MarkerProps, MarkerType } from '@xyflow/system';\n\n  let {\n    id,\n    type,\n    width = 12.5,\n    height = 12.5,\n    markerUnits = 'strokeWidth',\n    orient = 'auto-start-reverse',\n    color = 'none',\n    strokeWidth\n  }: MarkerProps = $props();\n</script>\n\n<marker\n  class=\"svelte-flow__arrowhead\"\n  {id}\n  markerWidth={`${width}`}\n  markerHeight={`${height}`}\n  viewBox=\"-10 -10 20 20\"\n  {markerUnits}\n  {orient}\n  refX=\"0\"\n  refY=\"0\"\n>\n  {#if type === MarkerType.Arrow}\n    <polyline\n      class=\"arrow\"\n      style:stroke={color}\n      fill=\"none\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n      stroke-width={strokeWidth}\n      points=\"-5,-4 0,0 -5,4\"\n    />\n  {:else if type === MarkerType.ArrowClosed}\n    <polyline\n      class=\"arrowclosed\"\n      style:stroke={color}\n      style:fill={color}\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n      stroke-width={strokeWidth}\n      points=\"-5,-4 0,0 -5,4 -5,-4\"\n    />\n  {/if}\n</marker>\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import { EdgeWrapper } from '../../components/EdgeWrapper';\n  import { MarkerDefinition } from './MarkerDefinition';\n  import type { Node, Edge, EdgeEvents } from '../../types';\n  import type { SvelteFlowStore } from '../../store/types';\n\n  let {\n    store = $bindable(),\n    onedgeclick,\n    onedgecontextmenu,\n    onedgepointerenter,\n    onedgepointerleave\n  }: { store: SvelteFlowStore<NodeType, EdgeType> } & EdgeEvents<EdgeType> = $props();\n</script>\n\n<div class=\"svelte-flow__edges\">\n  <svg class=\"svelte-flow__marker\">\n    <MarkerDefinition />\n  </svg>\n\n  {#each store.visible.edges.values() as edge (edge.id)}\n    <EdgeWrapper\n      bind:store\n      {edge}\n      {onedgeclick}\n      {onedgecontextmenu}\n      {onedgepointerenter}\n      {onedgepointerleave}\n    />\n  {/each}\n</div>\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import { setContext } from 'svelte';\n\n  import { elementSelectionKeys, getMarkerId } from '@xyflow/system';\n\n  import { BezierEdgeInternal } from '../edges';\n\n  import type { Node, EdgeLayouted, Edge, EdgeEvents } from '../../types';\n  import type { SvelteFlowStore } from '../../store/types';\n  import { ARIA_EDGE_DESC_KEY } from '../A11yDescriptions';\n\n  const {\n    edge,\n    store = $bindable(),\n    onedgeclick,\n    onedgecontextmenu,\n    onedgepointerenter,\n    onedgepointerleave\n  }: {\n    store: SvelteFlowStore<NodeType, EdgeType>;\n    edge: EdgeLayouted<EdgeType>;\n  } & EdgeEvents<EdgeType> = $props();\n\n  let {\n    source,\n    target,\n    sourceX,\n    sourceY,\n    targetX,\n    targetY,\n    sourcePosition,\n    targetPosition,\n    animated = false,\n    selected = false,\n    label,\n    labelStyle,\n    data = {},\n    style,\n    interactionWidth,\n    type = 'default',\n    sourceHandle,\n    targetHandle,\n    markerStart,\n    markerEnd,\n    selectable: _selectable,\n    focusable: _focusable,\n    deletable = true,\n    hidden,\n    zIndex,\n    class: className,\n    ariaLabel\n  } = $derived(edge);\n\n  // svelte-ignore non_reactive_update\n  let edgeRef: SVGGElement | null = null;\n\n  const { id } = edge;\n  setContext('svelteflow__edge_id', id);\n\n  let selectable = $derived(_selectable ?? store.elementsSelectable);\n  let focusable = $derived(_focusable ?? store.edgesFocusable);\n\n  let EdgeComponent = $derived(store.edgeTypes[type] ?? BezierEdgeInternal);\n\n  let markerStartUrl = $derived(\n    markerStart ? `url('#${getMarkerId(markerStart, store.flowId)}')` : undefined\n  );\n  let markerEndUrl = $derived(\n    markerEnd ? `url('#${getMarkerId(markerEnd, store.flowId)}')` : undefined\n  );\n\n  function onclick(event: MouseEvent) {\n    const edge = store.edgeLookup.get(id);\n\n    if (edge) {\n      if (selectable) store.handleEdgeSelection(id);\n      onedgeclick?.({ event, edge });\n    }\n  }\n\n  function onmouseevent<T = MouseEvent>(\n    event: T,\n    callback: ({ edge, event }: { edge: EdgeType; event: T }) => void\n  ) {\n    const edge = store.edgeLookup.get(id);\n\n    if (edge) {\n      callback({ event, edge });\n    }\n  }\n\n  function onkeydown(event: KeyboardEvent) {\n    if (!store.disableKeyboardA11y && elementSelectionKeys.includes(event.key) && selectable) {\n      const { unselectNodesAndEdges, addSelectedEdges } = store;\n      const unselect = event.key === 'Escape';\n\n      if (unselect) {\n        edgeRef?.blur();\n        unselectNodesAndEdges({ edges: [edge] });\n      } else {\n        addSelectedEdges([id]);\n      }\n    }\n  }\n</script>\n\n<!-- svelte-ignore a11y_no_noninteractive_tabindex -->\n{#if !hidden}\n  <svg style:z-index={zIndex} class=\"svelte-flow__edge-wrapper\">\n    <g\n      bind:this={edgeRef}\n      class={['svelte-flow__edge', className]}\n      class:animated\n      class:selected\n      class:selectable\n      data-id={id}\n      {onclick}\n      oncontextmenu={onedgecontextmenu\n        ? (e) => {\n            onmouseevent(e, onedgecontextmenu);\n          }\n        : undefined}\n      onpointerenter={onedgepointerenter\n        ? (e) => {\n            onmouseevent(e, onedgepointerenter);\n          }\n        : undefined}\n      onpointerleave={onedgepointerleave\n        ? (e) => {\n            onmouseevent(e, onedgepointerleave);\n          }\n        : undefined}\n      aria-label={ariaLabel === null\n        ? undefined\n        : ariaLabel\n          ? ariaLabel\n          : `Edge from ${source} to ${target}`}\n      aria-describedby={focusable ? `${ARIA_EDGE_DESC_KEY}-${store.flowId}` : undefined}\n      role={edge.ariaRole ?? (focusable ? 'group' : 'img')}\n      aria-roledescription=\"edge\"\n      onkeydown={focusable ? onkeydown : undefined}\n      tabindex={focusable ? 0 : undefined}\n      {...edge.domAttributes}\n    >\n      <EdgeComponent\n        {id}\n        {source}\n        {target}\n        {sourceX}\n        {sourceY}\n        {targetX}\n        {targetY}\n        {sourcePosition}\n        {targetPosition}\n        {animated}\n        {selected}\n        {label}\n        {labelStyle}\n        {data}\n        {style}\n        {interactionWidth}\n        {selectable}\n        {deletable}\n        {type}\n        sourceHandleId={sourceHandle}\n        targetHandleId={targetHandle}\n        markerStart={markerStartUrl}\n        markerEnd={markerEndUrl}\n      />\n    </g>\n  </svg>\n{/if}\n","<script lang=\"ts\">\n  import { toPxString } from '../../utils';\n\n  let {\n    x = 0,\n    y = 0,\n    width = 0,\n    height = 0,\n    isVisible = true\n  }: {\n    x?: number;\n    y?: number;\n    width?: number | string;\n    height?: number | string;\n    isVisible?: boolean;\n  } = $props();\n</script>\n\n{#if isVisible}\n  <div\n    class=\"svelte-flow__selection\"\n    style:width={typeof width === 'string' ? width : toPxString(width)}\n    style:height={typeof height === 'string' ? height : toPxString(height)}\n    style:transform={`translate(${x}px, ${y}px)`}\n  ></div>\n{/if}\n\n<style>\n  .svelte-flow__selection {\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n</style>\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import { getInternalNodesBounds, isNumeric, type Rect } from '@xyflow/system';\n\n  import { Selection } from '../Selection';\n  import drag from '../../actions/drag';\n\n  import type { NodeSelectionProps } from './types';\n  import { arrowKeyDiffs, toPxString } from '../../utils';\n  import type { Node, Edge } from '../../types';\n\n  let {\n    store = $bindable(),\n    onnodedrag,\n    onnodedragstart,\n    onnodedragstop,\n    onselectionclick,\n    onselectioncontextmenu\n  }: NodeSelectionProps<NodeType, EdgeType> = $props();\n\n  let ref = $state<HTMLDivElement>();\n\n  $effect(() => {\n    if (!store.disableKeyboardA11y) {\n      ref?.focus({\n        preventScroll: true\n      });\n    }\n  });\n\n  let bounds: Rect | null = $derived.by(() => {\n    if (store.selectionRectMode === 'nodes') {\n      // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n      store.nodes;\n      return getInternalNodesBounds(store.nodeLookup, { filter: (node) => !!node.selected });\n    }\n    return null;\n  });\n\n  function oncontextmenu(event: MouseEvent) {\n    const selectedNodes = store.nodes.filter((n) => n.selected);\n    onselectioncontextmenu?.({ nodes: selectedNodes, event });\n  }\n\n  function onclick(event: MouseEvent) {\n    const selectedNodes = store.nodes.filter((n) => n.selected);\n    onselectionclick?.({ nodes: selectedNodes, event });\n  }\n\n  function onkeydown(event: KeyboardEvent) {\n    if (Object.prototype.hasOwnProperty.call(arrowKeyDiffs, event.key)) {\n      event.preventDefault();\n      store.moveSelectedNodes(arrowKeyDiffs[event.key], event.shiftKey ? 4 : 1);\n    }\n  }\n</script>\n\n{#if store.selectionRectMode === 'nodes' && bounds && isNumeric(bounds.x) && isNumeric(bounds.y)}\n  <div\n    class={['svelte-flow__selection-wrapper', store.noPanClass]}\n    style:width={toPxString(bounds.width)}\n    style:height={toPxString(bounds.height)}\n    style:transform=\"translate({bounds.x}px, {bounds.y}px)\"\n    use:drag={{\n      disabled: false,\n      store,\n      onDrag: (event, _, __, nodes) => {\n        onnodedrag?.({ event, targetNode: null, nodes: nodes as NodeType[] });\n      },\n      onDragStart: (event, _, __, nodes) => {\n        onnodedragstart?.({ event, targetNode: null, nodes: nodes as NodeType[] });\n      },\n      onDragStop: (event, _, __, nodes) => {\n        onnodedragstop?.({ event, targetNode: null, nodes: nodes as NodeType[] });\n      }\n    }}\n    {oncontextmenu}\n    {onclick}\n    role={store.disableKeyboardA11y ? undefined : 'button'}\n    tabIndex={store.disableKeyboardA11y ? undefined : -1}\n    onkeydown={store.disableKeyboardA11y ? undefined : onkeydown}\n    bind:this={ref}\n  >\n    <Selection width=\"100%\" height=\"100%\" x={0} y={0} />\n  </div>\n{/if}\n\n<style>\n  .svelte-flow__selection-wrapper {\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 2000;\n    pointer-events: all;\n  }\n</style>\n","import { on } from 'svelte/events';\n\n/**\n * @param {import('./types.public').ShortcutModifier} def\n * @returns {number}\n */\nfunction mapModifierToBitMask(def) {\n\tswitch (def) {\n\t\tcase 'ctrl':\n\t\t\treturn 0b1000;\n\t\tcase 'shift':\n\t\t\treturn 0b0100;\n\t\tcase 'alt':\n\t\t\treturn 0b0010;\n\t\tcase 'meta':\n\t\t\treturn 0b0001;\n\t}\n}\n\n/**\n * Listen for keyboard event and trigger `shortcut` {@link https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent | CustomEvent }\n * @example Typical usage\n *\n * ```svelte\n * <script lang=\"ts\">\n *  import { shortcut, type ShortcutEventDetail } from '@svelte-put/shortcut';\n *\n *  let commandPalette = false;\n *\n *  function onOpenCommandPalette() {\n *    commandPalette = true;\n *  }\n *  function onCloseCommandPalette() {\n *    commandPalette = false;\n *  }\n *\n *  function doSomethingElse(details: ShortcutEventDetail) {\n *    console.log('Action was placed on:', details.node);\n *    console.log('Trigger:', details.trigger);\n *  }\n *\n *  function onShortcut(event: CustomEvent<ShortcutEventDetail>) {\n *    if (event.detail.trigger.id === 'do-something-else') {\n *      console.log('Same as doSomethingElse()');\n *      // be careful here doSomethingElse would have been called too\n *   }\n * }\n * </script>\n *\n * <svelte:window\n *   use:shortcut={{\n *     trigger: [\n *       {\n *         key: 'k',\n *\n *         // trigger if either ctrl or meta is pressed\n *         modifier: ['ctrl', 'meta'],\n *\n *         callback: onOpenCommandPalette,\n *         preventDefault: true,\n *       },\n *       {\n *         key: 'Escape',\n *         modifier: false, // or any falsy value other than undefined to means 'expect no modifier'\n *\n *         // preferably avoid arrow functions here for better performance\n *         // with arrow functions the action has to be updated more frequently\n *         callback: onCloseCommandPalette,\n *\n *         enabled: commandPalette,\n *         preventDefault: true,\n *       },\n *      {\n *         key: 'k',\n *\n *         // trigger if both ctrl & shift are pressed\n *         modifier: [['ctrl', 'shift']],\n *         id: 'do-something-else',\n *         callback: doSomethingElse,\n *      },\n *     ],\n *   }}\n *   onshortcut={onShortcut}\n * />\n * ```\n * You can either:\n *\n * - pass multiple callbacks to their associated triggers, or\n *\n * - pass one single handler to the `onshortcut` event, in which case you should\n * provide an ID to each trigger to be able to distinguish what trigger was activated\n * in the event handler.\n *\n * Either way, only use `callback` or `onshortcut` and not both to\n * avoid handler duplication.\n * @param {HTMLElement} node - HTMLElement to add event listener to\n * @param {import('./types.public').ShortcutParameter} param - svelte action parameters\n * @returns {import('./types.public').ShortcutActionReturn}\n */\nexport function shortcut(node, param) {\n\tlet { enabled = true, trigger, type = 'keydown' } = param;\n\n\t/**\n\t * @param {KeyboardEvent} event\n\t */\n\tfunction handler(event) {\n\t\tconst normalizedTriggers = Array.isArray(trigger) ? trigger : [trigger];\n\t\tconst modifierMask = [event.metaKey, event.altKey, event.shiftKey, event.ctrlKey].reduce(\n\t\t\t(acc, value, index) => {\n\t\t\t\tif (value) {\n\t\t\t\t\treturn acc | (1 << index);\n\t\t\t\t}\n\t\t\t\treturn acc;\n\t\t\t},\n\t\t\t0b0000,\n\t\t);\n\t\tfor (const trigger of normalizedTriggers) {\n\t\t\tconst mergedTrigger = {\n\t\t\t\tpreventDefault: false,\n\t\t\t\tenabled: true,\n\t\t\t\t...trigger,\n\t\t\t};\n\t\t\tconst { modifier, key, callback, preventDefault, enabled: triggerEnabled } = mergedTrigger;\n\t\t\tif (triggerEnabled) {\n\t\t\t\tif (event.key !== key) continue;\n\n\t\t\t\tif (modifier === null || modifier === false) {\n\t\t\t\t\tif (modifierMask !== 0b0000) continue;\n\t\t\t\t} else if (\n\t\t\t\t\tmodifier !== undefined &&\n\t\t\t\t\tmodifier?.[0]?.length > 0\n\t\t\t\t) {\n\t\t\t\t\tconst orDefs = Array.isArray(modifier) ? modifier : [modifier];\n\t\t\t\t\tlet modified = false;\n\t\t\t\t\tfor (const orDef of orDefs) {\n\t\t\t\t\t\tconst mask = (Array.isArray(orDef) ? orDef : [orDef]).reduce(\n\t\t\t\t\t\t\t(acc, def) => acc | mapModifierToBitMask(def),\n\t\t\t\t\t\t\t0b0000,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (mask === modifierMask) {\n\t\t\t\t\t\t\tmodified = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!modified) continue;\n\t\t\t\t}\n\n\t\t\t\tif (preventDefault) event.preventDefault();\n\t\t\t\t/** @type {import('./types.public').ShortcutEventDetail} */\n\t\t\t\tconst detail = {\n\t\t\t\t\tnode,\n\t\t\t\t\ttrigger: mergedTrigger,\n\t\t\t\t\toriginalEvent: event,\n\t\t\t\t};\n\t\t\t\tnode.dispatchEvent(new CustomEvent('shortcut', { detail }));\n\t\t\t\tcallback?.(detail);\n\t\t\t}\n\t\t}\n\t}\n\n\t/** @type {undefined | (() => void)} */\n\tlet off;\n\tif (enabled) {\n\t\toff = on(node, type, handler);\n\t}\n\n\treturn {\n\t\tupdate: (update) => {\n\t\t\tconst { enabled: newEnabled = true, type: newType = 'keydown' } = update;\n\n\t\t\tif (enabled && (!newEnabled || type !== newType)) {\n\t\t\t\toff?.();\n\t\t\t} else if (!enabled && newEnabled) {\n\t\t\t\toff = on(node, newType, handler);\n\t\t\t}\n\n\t\t\tenabled = newEnabled;\n\t\t\ttype = newType;\n\t\t\ttrigger = update.trigger;\n\t\t},\n\t\tdestroy: () => {\n\t\t\toff?.();\n\t\t},\n\t};\n}\n","import { getOverlappingArea, isRectObject, nodeToRect, pointToRendererPoint, getViewportForBounds, getElementsToRemove, rendererPointToPoint, evaluateAbsolutePosition, getNodesBounds } from '@xyflow/system';\nimport { useStore } from '../store';\nimport { isEdge, isNode } from '../utils';\nimport { untrack } from 'svelte';\n/**\n * Hook for accessing the SvelteFlow instance.\n *\n * @public\n * @returns A set of helper functions\n */\nexport function useSvelteFlow() {\n    const store = $derived(useStore());\n    const getNodeRect = (node) => {\n        const nodeToUse = isNode(node) ? node : store.nodeLookup.get(node.id);\n        const position = nodeToUse.parentId\n            ? evaluateAbsolutePosition(nodeToUse.position, nodeToUse.measured, nodeToUse.parentId, store.nodeLookup, store.nodeOrigin)\n            : nodeToUse.position;\n        const nodeWithPosition = {\n            ...nodeToUse,\n            position,\n            width: nodeToUse.measured?.width ?? nodeToUse.width,\n            height: nodeToUse.measured?.height ?? nodeToUse.height\n        };\n        return nodeToRect(nodeWithPosition);\n    };\n    function updateNode(id, nodeUpdate, options = { replace: false }) {\n        store.nodes = untrack(() => store.nodes).map((node) => {\n            if (node.id === id) {\n                const nextNode = typeof nodeUpdate === 'function' ? nodeUpdate(node) : nodeUpdate;\n                return options?.replace && isNode(nextNode) ? nextNode : { ...node, ...nextNode };\n            }\n            return node;\n        });\n    }\n    function updateEdge(id, edgeUpdate, options = { replace: false }) {\n        store.edges = untrack(() => store.edges).map((edge) => {\n            if (edge.id === id) {\n                const nextEdge = typeof edgeUpdate === 'function' ? edgeUpdate(edge) : edgeUpdate;\n                return options.replace && isEdge(nextEdge) ? nextEdge : { ...edge, ...nextEdge };\n            }\n            return edge;\n        });\n    }\n    const getInternalNode = (id) => store.nodeLookup.get(id);\n    return {\n        zoomIn: store.zoomIn,\n        zoomOut: store.zoomOut,\n        getInternalNode,\n        getNode: (id) => getInternalNode(id)?.internals.userNode,\n        getNodes: (ids) => (ids === undefined ? store.nodes : getElements(store.nodeLookup, ids)),\n        getEdge: (id) => store.edgeLookup.get(id),\n        getEdges: (ids) => (ids === undefined ? store.edges : getElements(store.edgeLookup, ids)),\n        setZoom: (zoomLevel, options) => {\n            const panZoom = store.panZoom;\n            return panZoom\n                ? panZoom.scaleTo(zoomLevel, { duration: options?.duration })\n                : Promise.resolve(false);\n        },\n        getZoom: () => store.viewport.zoom,\n        setViewport: async (nextViewport, options) => {\n            const currentViewport = store.viewport;\n            if (!store.panZoom) {\n                return Promise.resolve(false);\n            }\n            await store.panZoom.setViewport({\n                x: nextViewport.x ?? currentViewport.x,\n                y: nextViewport.y ?? currentViewport.y,\n                zoom: nextViewport.zoom ?? currentViewport.zoom\n            }, options);\n            return Promise.resolve(true);\n        },\n        getViewport: () => $state.snapshot(store.viewport),\n        setCenter: async (x, y, options) => store.setCenter(x, y, options),\n        fitView: (options) => store.fitView(options),\n        fitBounds: async (bounds, options) => {\n            if (!store.panZoom) {\n                return Promise.resolve(false);\n            }\n            const viewport = getViewportForBounds(bounds, store.width, store.height, store.minZoom, store.maxZoom, options?.padding ?? 0.1);\n            await store.panZoom.setViewport(viewport, {\n                duration: options?.duration,\n                ease: options?.ease,\n                interpolate: options?.interpolate\n            });\n            return Promise.resolve(true);\n        },\n        getIntersectingNodes: (nodeOrRect, partially = true, nodesToIntersect) => {\n            const isRect = isRectObject(nodeOrRect);\n            const nodeRect = isRect ? nodeOrRect : getNodeRect(nodeOrRect);\n            if (!nodeRect) {\n                return [];\n            }\n            return (nodesToIntersect || store.nodes).filter((n) => {\n                const internalNode = store.nodeLookup.get(n.id);\n                if (!internalNode || (!isRect && n.id === nodeOrRect.id)) {\n                    return false;\n                }\n                const currNodeRect = nodeToRect(internalNode);\n                const overlappingArea = getOverlappingArea(currNodeRect, nodeRect);\n                const partiallyVisible = partially && overlappingArea > 0;\n                return (partiallyVisible ||\n                    overlappingArea >= currNodeRect.width * currNodeRect.height ||\n                    overlappingArea >= nodeRect.width * nodeRect.height);\n            });\n        },\n        isNodeIntersecting: (nodeOrRect, area, partially = true) => {\n            const isRect = isRectObject(nodeOrRect);\n            const nodeRect = isRect ? nodeOrRect : getNodeRect(nodeOrRect);\n            if (!nodeRect) {\n                return false;\n            }\n            const overlappingArea = getOverlappingArea(nodeRect, area);\n            const partiallyVisible = partially && overlappingArea > 0;\n            return partiallyVisible || overlappingArea >= nodeRect.width * nodeRect.height;\n        },\n        deleteElements: async ({ nodes: nodesToRemove = [], edges: edgesToRemove = [] }) => {\n            const { nodes: matchingNodes, edges: matchingEdges } = await getElementsToRemove({\n                nodesToRemove,\n                edgesToRemove,\n                nodes: store.nodes,\n                edges: store.edges,\n                onBeforeDelete: store.onbeforedelete\n            });\n            if (matchingNodes) {\n                store.nodes = untrack(() => store.nodes).filter((node) => !matchingNodes.some(({ id }) => id === node.id));\n            }\n            if (matchingEdges) {\n                store.edges = untrack(() => store.edges).filter((edge) => !matchingEdges.some(({ id }) => id === edge.id));\n            }\n            if (matchingNodes.length > 0 || matchingEdges.length > 0) {\n                store.ondelete?.({\n                    nodes: matchingNodes,\n                    edges: matchingEdges\n                });\n            }\n            return {\n                deletedNodes: matchingNodes,\n                deletedEdges: matchingEdges\n            };\n        },\n        screenToFlowPosition: (position, options = { snapToGrid: true }) => {\n            if (!store.domNode) {\n                return position;\n            }\n            const _snapGrid = options.snapToGrid ? store.snapGrid : false;\n            const { x, y, zoom } = store.viewport;\n            const { x: domX, y: domY } = store.domNode.getBoundingClientRect();\n            const correctedPosition = {\n                x: position.x - domX,\n                y: position.y - domY\n            };\n            return pointToRendererPoint(correctedPosition, [x, y, zoom], _snapGrid !== null, _snapGrid || [1, 1]);\n        },\n        /**\n         *\n         * @param position\n         * @returns\n         */\n        flowToScreenPosition: (position) => {\n            if (!store.domNode) {\n                return position;\n            }\n            const { x, y, zoom } = store.viewport;\n            const { x: domX, y: domY } = store.domNode.getBoundingClientRect();\n            const rendererPosition = rendererPointToPoint(position, [x, y, zoom]);\n            return {\n                x: rendererPosition.x + domX,\n                y: rendererPosition.y + domY\n            };\n        },\n        toObject: () => {\n            return structuredClone({\n                nodes: [...store.nodes],\n                edges: [...store.edges],\n                viewport: { ...store.viewport }\n            });\n        },\n        updateNode,\n        updateNodeData: (id, dataUpdate, options) => {\n            const node = store.nodeLookup.get(id)?.internals.userNode;\n            if (!node) {\n                return;\n            }\n            const nextData = typeof dataUpdate === 'function' ? dataUpdate(node) : dataUpdate;\n            updateNode(id, (node) => ({\n                ...node,\n                data: options?.replace ? nextData : { ...node.data, ...nextData }\n            }));\n        },\n        updateEdge,\n        getNodesBounds: (nodes) => {\n            return getNodesBounds(nodes, { nodeLookup: store.nodeLookup, nodeOrigin: store.nodeOrigin });\n        },\n        getHandleConnections: ({ type, id, nodeId }) => Array.from(store.connectionLookup.get(`${nodeId}-${type}-${id ?? null}`)?.values() ?? [])\n    };\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction getElements(lookup, ids) {\n    const result = [];\n    for (const id of ids) {\n        const item = lookup.get(id);\n        if (item) {\n            const element = 'internals' in item ? item.internals?.userNode : item;\n            result.push(element);\n        }\n    }\n    return result;\n}\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import {\n    shortcut,\n    type ShortcutEventDetail,\n    type ShortcutModifierDefinition\n  } from '@svelte-put/shortcut';\n  import { isInputDOMNode, isMacOs } from '@xyflow/system';\n\n  import type { KeyHandlerProps } from './types';\n  import type { Node, Edge, KeyDefinition, KeyDefinitionObject } from '../../types';\n  import { useSvelteFlow } from '../../hooks/useSvelteFlow.svelte';\n\n  let {\n    store = $bindable(),\n    selectionKey = 'Shift',\n    multiSelectionKey = isMacOs() ? 'Meta' : 'Control',\n    deleteKey = 'Backspace',\n    panActivationKey = ' ',\n    zoomActivationKey = isMacOs() ? 'Meta' : 'Control'\n  }: KeyHandlerProps<NodeType, EdgeType> = $props();\n\n  let { deleteElements } = useSvelteFlow<NodeType, EdgeType>();\n\n  function isKeyObject(key?: KeyDefinition | null): key is KeyDefinitionObject {\n    return key !== null && typeof key === 'object';\n  }\n\n  function getModifier(key?: KeyDefinition | null): ShortcutModifierDefinition {\n    return isKeyObject(key) ? key.modifier || [] : [];\n  }\n\n  function getKeyString(key?: KeyDefinition | null): string {\n    if (key === null || key === undefined) {\n      // this is a workaround to check if a key is set\n      // if not we won't call the callback\n      return '';\n    }\n\n    return isKeyObject(key) ? key.key : key;\n  }\n\n  function getShortcutTrigger(\n    key: KeyDefinition | KeyDefinition[] | null | undefined,\n    callback: (detail: ShortcutEventDetail) => void\n  ) {\n    const keys = Array.isArray(key) ? key : [key];\n    return keys.map((_key) => {\n      const keyString = getKeyString(_key);\n      return {\n        key: keyString,\n        modifier: getModifier(_key),\n        enabled: keyString !== null,\n        callback\n      };\n    });\n  }\n\n  function resetKeysAndSelection() {\n    store.selectionRect = null;\n    store.selectionKeyPressed = false;\n    store.multiselectionKeyPressed = false;\n    store.deleteKeyPressed = false;\n    store.panActivationKeyPressed = false;\n    store.zoomActivationKeyPressed = false;\n  }\n\n  function handleDelete() {\n    const selectedNodes = store.nodes.filter((node) => node.selected);\n    const selectedEdges = store.edges.filter((edge) => edge.selected);\n\n    deleteElements({\n      nodes: selectedNodes,\n      edges: selectedEdges\n    });\n  }\n</script>\n\n<svelte:window\n  on:blur={resetKeysAndSelection}\n  on:contextmenu={resetKeysAndSelection}\n  use:shortcut={{\n    trigger: getShortcutTrigger(selectionKey, () => (store.selectionKeyPressed = true)),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(selectionKey, () => (store.selectionKeyPressed = false)),\n    type: 'keyup'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(multiSelectionKey, () => {\n      store.multiselectionKeyPressed = true;\n    }),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(multiSelectionKey, () => (store.multiselectionKeyPressed = false)),\n    type: 'keyup'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(deleteKey, (detail) => {\n      const isModifierKey =\n        detail.originalEvent.ctrlKey ||\n        detail.originalEvent.metaKey ||\n        detail.originalEvent.shiftKey;\n      if (!isModifierKey && !isInputDOMNode(detail.originalEvent)) {\n        store.deleteKeyPressed = true;\n        handleDelete();\n      }\n    }),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(deleteKey, () => (store.deleteKeyPressed = false)),\n    type: 'keyup'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(panActivationKey, () => (store.panActivationKeyPressed = true)),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(panActivationKey, () => (store.panActivationKeyPressed = false)),\n    type: 'keyup'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(zoomActivationKey, () => (store.zoomActivationKeyPressed = true)),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(zoomActivationKey, () => (store.zoomActivationKeyPressed = false)),\n    type: 'keyup'\n  }}\n/>\n","<script lang=\"ts\">\n  import type { PanelProps } from './types';\n\n  let { position = 'top-right', style, class: className, children, ...rest }: PanelProps = $props();\n\n  let positionClasses = $derived(`${position}`.split('-'));\n</script>\n\n<div class={['svelte-flow__panel', className, ...positionClasses]} {style} {...rest}>\n  {@render children?.()}\n</div>\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import type { Edge, Node } from '../../types';\n  import { getContext, setContext, onDestroy, untrack } from 'svelte';\n  import type { HTMLAttributes } from 'svelte/elements';\n  import { ConnectionLineType, PanOnScrollMode } from '@xyflow/system';\n\n  import { key, createStore } from '../../store';\n  import { Zoom } from '../Zoom';\n  import { Pane } from '../Pane';\n  import { Viewport as ViewportComponent } from '../Viewport';\n  import { NodeRenderer } from '../NodeRenderer';\n  import { EdgeRenderer } from '../EdgeRenderer';\n  import { NodeSelection } from '../../components/NodeSelection';\n  import { Selection } from '../../components/Selection';\n  import { KeyHandler } from '../../components/KeyHandler';\n  import { ConnectionLine } from '../../components/ConnectionLine';\n  import { Attribution } from '../../components/Attribution';\n  import type { SvelteFlowProps } from './types';\n  import { type ProviderContext, type StoreContext } from '../../store/types';\n  import Wrapper from './Wrapper.svelte';\n  import { A11yDescriptions } from '../../components/A11yDescriptions';\n\n  let {\n    width,\n    height,\n    proOptions,\n    selectionKey,\n    deleteKey,\n    panActivationKey,\n    multiSelectionKey,\n    zoomActivationKey,\n    paneClickDistance = 1,\n    nodeClickDistance = 1,\n    onmovestart,\n    onmoveend,\n    onmove,\n    oninit,\n    onnodeclick,\n    onnodecontextmenu,\n    onnodedrag,\n    onnodedragstart,\n    onnodedragstop,\n    onnodepointerenter,\n    onnodepointermove,\n    onnodepointerleave,\n    onselectionclick,\n    onselectioncontextmenu,\n    onselectionstart,\n    onselectionend,\n    onedgeclick,\n    onedgecontextmenu,\n    onedgepointerenter,\n    onedgepointerleave,\n    onpaneclick,\n    onpanecontextmenu,\n    panOnScrollMode = PanOnScrollMode.Free,\n    preventScrolling = true,\n    zoomOnScroll = true,\n    zoomOnDoubleClick = true,\n    zoomOnPinch = true,\n    panOnScroll = false,\n    panOnDrag = true,\n    selectionOnDrag = true,\n    connectionLineComponent,\n    connectionLineStyle,\n    connectionLineContainerStyle,\n    connectionLineType = ConnectionLineType.Bezier,\n    attributionPosition,\n    children,\n    nodes = $bindable([]),\n    edges = $bindable([]),\n    viewport = $bindable(undefined),\n    ...props\n  }: SvelteFlowProps<NodeType, EdgeType> &\n    Omit<HTMLAttributes<HTMLDivElement>, 'onselectionchange'> = $props();\n\n  // svelte-ignore non_reactive_update\n  let store = createStore<NodeType, EdgeType>({\n    props,\n    width,\n    height,\n    get nodes() {\n      return nodes;\n    },\n    set nodes(newNodes) {\n      nodes = newNodes;\n    },\n    get edges() {\n      return edges;\n    },\n    set edges(newEdges) {\n      edges = newEdges;\n    },\n    get viewport() {\n      return viewport;\n    },\n    set viewport(newViewport) {\n      viewport = newViewport;\n    }\n  });\n\n  // Set store for provider context\n  const providerContext = getContext<ProviderContext<NodeType, EdgeType>>(key);\n  if (providerContext && providerContext.setStore) {\n    providerContext.setStore(store);\n  }\n\n  // Overwrite store context to give children direct access\n  setContext(key, {\n    provider: false,\n    getStore() {\n      return store;\n    }\n  } satisfies StoreContext<NodeType, EdgeType>);\n\n  // handle selection change\n  $effect(() => {\n    const params = { nodes: store.selectedNodes, edges: store.selectedEdges };\n    untrack(() => props.onselectionchange)?.(params);\n    for (const handler of store.selectionChangeHandlers.values()) {\n      handler(params);\n    }\n  });\n\n  onDestroy(() => {\n    store.reset();\n  });\n</script>\n\n<Wrapper\n  bind:domNode={store.domNode}\n  bind:clientWidth={store.width}\n  bind:clientHeight={store.height}\n  colorMode={store.colorMode}\n  {width}\n  {height}\n  rest={props}\n>\n  <KeyHandler\n    bind:store\n    {selectionKey}\n    {deleteKey}\n    {panActivationKey}\n    {multiSelectionKey}\n    {zoomActivationKey}\n  />\n  <Zoom\n    bind:store\n    {panOnScrollMode}\n    {preventScrolling}\n    {zoomOnScroll}\n    {zoomOnDoubleClick}\n    {zoomOnPinch}\n    {panOnScroll}\n    {panOnDrag}\n    {paneClickDistance}\n    {onmovestart}\n    {onmove}\n    {onmoveend}\n    {oninit}\n  >\n    <Pane\n      bind:store\n      {onpaneclick}\n      {onpanecontextmenu}\n      {onselectionstart}\n      {onselectionend}\n      {panOnDrag}\n      {selectionOnDrag}\n    >\n      <ViewportComponent bind:store>\n        <div class=\"svelte-flow__viewport-back svelte-flow__container\"></div>\n        <EdgeRenderer\n          bind:store\n          {onedgeclick}\n          {onedgecontextmenu}\n          {onedgepointerenter}\n          {onedgepointerleave}\n        />\n        <div class=\"svelte-flow__edge-labels svelte-flow__container\"></div>\n        <ConnectionLine\n          bind:store\n          type={connectionLineType}\n          LineComponent={connectionLineComponent}\n          containerStyle={connectionLineContainerStyle}\n          style={connectionLineStyle}\n        />\n        <NodeRenderer\n          bind:store\n          {nodeClickDistance}\n          {onnodeclick}\n          {onnodecontextmenu}\n          {onnodepointerenter}\n          {onnodepointermove}\n          {onnodepointerleave}\n          {onnodedrag}\n          {onnodedragstart}\n          {onnodedragstop}\n        />\n        <NodeSelection\n          bind:store\n          {onselectionclick}\n          {onselectioncontextmenu}\n          {onnodedrag}\n          {onnodedragstart}\n          {onnodedragstop}\n        />\n        <div class=\"svelte-flow__viewport-front svelte-flow__container\"></div>\n      </ViewportComponent>\n      <Selection\n        isVisible={!!(store.selectionRect && store.selectionRectMode === 'user')}\n        width={store.selectionRect?.width}\n        height={store.selectionRect?.height}\n        x={store.selectionRect?.x}\n        y={store.selectionRect?.y}\n      />\n    </Pane>\n  </Zoom>\n  <Attribution {proOptions} position={attributionPosition} />\n  <A11yDescriptions {store} />\n  {@render children?.()}\n</Wrapper>\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import type { HTMLAttributes } from 'svelte/elements';\n  import type { Snippet } from 'svelte';\n  import { type SvelteFlowRestProps } from '../../store/types';\n  import { toPxString } from '../../utils';\n  import type { Node, Edge } from '../../types';\n\n  let {\n    width,\n    height,\n    colorMode,\n    domNode = $bindable(),\n    clientWidth = $bindable(),\n    clientHeight = $bindable(),\n    children,\n    rest\n  }: {\n    width?: number;\n    height?: number;\n    colorMode?: string;\n    domNode: HTMLDivElement | null;\n    clientWidth?: number;\n    clientHeight?: number;\n    children?: Snippet;\n    rest: SvelteFlowRestProps<NodeType, EdgeType> &\n      Omit<HTMLAttributes<HTMLDivElement>, 'onselectionchange'>;\n  } = $props();\n\n  // Unfortunately we have to destructure the props here this way,\n  // so we don't pass all the props as attributes to the div element\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n  let {\n    id,\n    class: className,\n    nodeTypes,\n    edgeTypes,\n    colorMode: _colorMode,\n    isValidConnection,\n    onmove,\n    onmovestart,\n    onmoveend,\n    onflowerror,\n    ondelete,\n    onbeforedelete,\n    onbeforeconnect,\n    onconnect,\n    onconnectstart,\n    onconnectend,\n    onbeforereconnect,\n    onreconnect,\n    onreconnectstart,\n    onreconnectend,\n    onclickconnectstart,\n    onclickconnectend,\n    oninit,\n    onselectionchange,\n    onselectiondragstart,\n    onselectiondrag,\n    onselectiondragstop,\n    onselectionstart,\n    onselectionend,\n    clickConnect,\n    fitView,\n    fitViewOptions,\n    nodeOrigin,\n    nodeDragThreshold,\n    connectionDragThreshold,\n    minZoom,\n    maxZoom,\n    initialViewport,\n    connectionRadius,\n    connectionMode,\n    selectionMode,\n    selectNodesOnDrag,\n    snapGrid,\n    defaultMarkerColor,\n    translateExtent,\n    nodeExtent,\n    onlyRenderVisibleElements,\n    autoPanOnConnect,\n    autoPanOnNodeDrag,\n    colorModeSSR,\n    style,\n    defaultEdgeOptions,\n    elevateNodesOnSelect,\n    elevateEdgesOnSelect,\n    nodesDraggable,\n    autoPanOnNodeFocus,\n    nodesConnectable,\n    elementsSelectable,\n    nodesFocusable,\n    edgesFocusable,\n    disableKeyboardA11y,\n    noDragClass,\n    noPanClass,\n    noWheelClass,\n    ariaLabelConfig,\n    ...divAttributes\n  } = $derived(rest);\n  /* eslint-enable @typescript-eslint/no-unused-vars */\n\n  type OnlyDivAttributes<T> = {\n    [K in keyof T]: K extends keyof HTMLAttributes<HTMLDivElement> ? T[K] : never;\n  };\n\n  // Undo scroll events, preventing viewport from shifting when nodes outside of it are focused\n  function wrapperOnScroll(e: UIEvent & { currentTarget: EventTarget & HTMLDivElement }) {\n    e.currentTarget.scrollTo({ top: 0, left: 0, behavior: 'auto' });\n\n    // Forward the event to any existing onscroll handler if needed\n    if (rest.onscroll) {\n      rest.onscroll(e);\n    }\n  }\n</script>\n\n<div\n  bind:this={domNode}\n  bind:clientHeight\n  bind:clientWidth\n  style:width={toPxString(width)}\n  style:height={toPxString(height)}\n  class={['svelte-flow', 'svelte-flow__container', className, colorMode]}\n  data-testid=\"svelte-flow__wrapper\"\n  role=\"application\"\n  onscroll={wrapperOnScroll}\n  {...divAttributes satisfies OnlyDivAttributes<typeof divAttributes>}\n>\n  {@render children?.()}\n</div>\n\n<style>\n  .svelte-flow {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    position: relative;\n    z-index: 0;\n\n    background-color: var(--background-color, var(--background-color-default));\n  }\n\n  :root {\n    --background-color-default: #fff;\n    --background-pattern-color-default: #ddd;\n\n    --minimap-mask-color-default: rgb(240, 240, 240, 0.6);\n    --minimap-mask-stroke-color-default: none;\n    --minimap-mask-stroke-width-default: 1;\n\n    --controls-button-background-color-default: #fefefe;\n    --controls-button-background-color-hover-default: #f4f4f4;\n    --controls-button-color-default: inherit;\n    --controls-button-color-hover-default: inherit;\n    --controls-button-border-color-default: #eee;\n  }\n</style>\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import { PanOnScrollMode, type PanZoomInstance, type Transform } from '@xyflow/system';\n\n  import zoom from '../../actions/zoom';\n  import type { ZoomProps } from './types';\n  import type { Node, Edge } from '../../types';\n\n  let {\n    store = $bindable(),\n    panOnScrollMode = PanOnScrollMode.Free,\n    preventScrolling = true,\n    zoomOnScroll = true,\n    zoomOnDoubleClick = true,\n    zoomOnPinch = true,\n    panOnDrag = true,\n    panOnScroll = false,\n    paneClickDistance = 1,\n    onmovestart,\n    onmove,\n    onmoveend,\n    oninit,\n    children\n  }: ZoomProps<NodeType, EdgeType> = $props();\n\n  let panOnDragActive = $derived(store.panActivationKeyPressed || panOnDrag);\n  let panOnScrollActive = $derived(store.panActivationKeyPressed || panOnScroll);\n\n  // We extract the initial value by destructuring\n  const { viewport: initialViewport } = store;\n\n  let onInitCalled = false;\n  $effect(() => {\n    if (!onInitCalled && store.viewportInitialized) {\n      oninit?.();\n      onInitCalled = true;\n    }\n  });\n</script>\n\n<div\n  class=\"svelte-flow__zoom svelte-flow__container\"\n  use:zoom={{\n    viewport: store.viewport,\n    minZoom: store.minZoom,\n    maxZoom: store.maxZoom,\n    initialViewport,\n    onDraggingChange: (dragging: boolean) => {\n      store.dragging = dragging;\n    },\n    setPanZoomInstance: (instance: PanZoomInstance) => {\n      store.panZoom = instance;\n    },\n    onPanZoomStart: onmovestart,\n    onPanZoom: onmove,\n    onPanZoomEnd: onmoveend,\n    zoomOnScroll,\n    zoomOnDoubleClick,\n    zoomOnPinch,\n    panOnScroll: panOnScrollActive,\n    panOnDrag: panOnDragActive,\n    panOnScrollSpeed: 0.5,\n    panOnScrollMode: panOnScrollMode || PanOnScrollMode.Free,\n    zoomActivationKeyPressed: store.zoomActivationKeyPressed,\n    preventScrolling: typeof preventScrolling === 'boolean' ? preventScrolling : true,\n    noPanClassName: store.noPanClass,\n    noWheelClassName: store.noWheelClass,\n    userSelectionActive: !!store.selectionRect,\n    translateExtent: store.translateExtent,\n    lib: 'svelte',\n    paneClickDistance,\n    onTransformChange: (transform: Transform) => {\n      store.viewport = { x: transform[0], y: transform[1], zoom: transform[2] };\n    }\n  }}\n>\n  {@render children()}\n</div>\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import type { SvelteFlowStore } from '../../store/types';\n  import type { Node, Edge } from '../../types';\n  import type { Snippet } from 'svelte';\n\n  let {\n    store = $bindable(),\n    children\n  }: { store: SvelteFlowStore<NodeType, EdgeType>; children: Snippet } = $props();\n</script>\n\n<div\n  class=\"svelte-flow__viewport xyflow__viewport svelte-flow__container\"\n  style:transform=\"translate({store.viewport.x}px, {store.viewport.y}px) scale({store.viewport\n    .zoom})\"\n>\n  {@render children()}\n</div>\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import type { Component } from 'svelte';\n  import {\n    ConnectionLineType,\n    getBezierPath,\n    getConnectionStatus,\n    getSmoothStepPath,\n    getStraightPath\n  } from '@xyflow/system';\n\n  import type { SvelteFlowStore } from '../../store/types';\n  import type { Node, Edge } from '../../types';\n\n  let {\n    store = $bindable(),\n    type,\n    containerStyle,\n    style,\n    LineComponent\n  }: {\n    store: SvelteFlowStore<NodeType, EdgeType>;\n    type: ConnectionLineType;\n    containerStyle?: string;\n    style?: string;\n    LineComponent?: Component;\n  } = $props();\n\n  let path = $derived.by(() => {\n    if (!store.connection.inProgress) {\n      return '';\n    }\n\n    const pathParams = {\n      sourceX: store.connection.from.x,\n      sourceY: store.connection.from.y,\n      sourcePosition: store.connection.fromPosition,\n      targetX: store.connection.to.x,\n      targetY: store.connection.to.y,\n      targetPosition: store.connection.toPosition\n    };\n\n    switch (type) {\n      case ConnectionLineType.Bezier: {\n        const [path] = getBezierPath(pathParams);\n        return path;\n      }\n      case ConnectionLineType.Straight: {\n        const [path] = getStraightPath(pathParams);\n        return path;\n      }\n      case ConnectionLineType.Step:\n      case ConnectionLineType.SmoothStep: {\n        const [path] = getSmoothStepPath({\n          ...pathParams,\n          borderRadius: type === ConnectionLineType.Step ? 0 : undefined\n        });\n        return path;\n      }\n    }\n  });\n</script>\n\n{#if store.connection.inProgress}\n  <svg\n    width={store.width}\n    height={store.height}\n    class=\"svelte-flow__connectionline\"\n    style={containerStyle}\n  >\n    <g class={['svelte-flow__connection', getConnectionStatus(store.connection.isValid)]}>\n      {#if LineComponent}\n        <LineComponent></LineComponent>\n      {:else}\n        <path d={path} {style} fill=\"none\" class=\"svelte-flow__connection-path\" />\n      {/if}\n    </g>\n  </svg>\n{/if}\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import { onDestroy } from 'svelte';\n\n  import { NodeWrapper } from '../../components/NodeWrapper';\n\n  import type { Node, Edge, NodeEvents } from '../../types';\n  import type { SvelteFlowStore } from '../../store/types';\n\n  let {\n    store = $bindable(),\n    nodeClickDistance,\n    onnodeclick,\n    onnodecontextmenu,\n    onnodepointerenter,\n    onnodepointermove,\n    onnodepointerleave,\n    onnodedrag,\n    onnodedragstart,\n    onnodedragstop\n  }: {\n    store: SvelteFlowStore<NodeType, EdgeType>;\n    nodeClickDistance?: number;\n  } & NodeEvents<NodeType> = $props();\n\n  const resizeObserver: ResizeObserver | null =\n    typeof ResizeObserver === 'undefined'\n      ? null\n      : new ResizeObserver((entries: ResizeObserverEntry[]) => {\n          const updates = new Map();\n\n          entries.forEach((entry: ResizeObserverEntry) => {\n            const id = entry.target.getAttribute('data-id') as string;\n\n            updates.set(id, {\n              id,\n              nodeElement: entry.target as HTMLDivElement,\n              force: true\n            });\n          });\n\n          store.updateNodeInternals(updates);\n        });\n\n  onDestroy(() => {\n    resizeObserver?.disconnect();\n  });\n</script>\n\n<div class=\"svelte-flow__nodes\">\n  {#each store.visible.nodes.values() as node (node.id)}\n    <NodeWrapper\n      bind:store\n      {node}\n      {resizeObserver}\n      {nodeClickDistance}\n      {onnodeclick}\n      {onnodepointerenter}\n      {onnodepointermove}\n      {onnodepointerleave}\n      {onnodedrag}\n      {onnodedragstart}\n      {onnodedragstop}\n      {onnodecontextmenu}\n    />\n  {/each}\n</div>\n","<script lang=\"ts\">\n  import { Panel } from '../../container/Panel';\n  import type { AttributionProps } from './types';\n\n  let { proOptions, position = 'bottom-right' }: AttributionProps = $props();\n</script>\n\n{#if !proOptions?.hideAttribution}\n  <Panel\n    {position}\n    class=\"svelte-flow__attribution\"\n    data-message=\"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us\"\n  >\n    <a\n      href=\"https://svelteflow.dev\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      aria-label=\"Svelte Flow attribution\"\n    >\n      Svelte Flow\n    </a>\n  </Panel>\n{/if}\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import type { SvelteFlowStore } from '../../store/types';\n  import type { Node, Edge } from '../../types';\n  import { ARIA_EDGE_DESC_KEY, ARIA_LIVE_MESSAGE, ARIA_NODE_DESC_KEY } from '.';\n\n  let { store }: { store: SvelteFlowStore<NodeType, EdgeType> } = $props();\n</script>\n\n<div id={`${ARIA_NODE_DESC_KEY}-${store.flowId}`} class=\"a11y-hidden\">\n  {store.disableKeyboardA11y\n    ? store.ariaLabelConfig['node.a11yDescription.default']\n    : store.ariaLabelConfig['node.a11yDescription.keyboardDisabled']}\n</div>\n<div id={`${ARIA_EDGE_DESC_KEY}-${store.flowId}`} class=\"a11y-hidden\">\n  {store.ariaLabelConfig['edge.a11yDescription.default']}\n</div>\n\n{#if !store.disableKeyboardA11y}\n  <div\n    id={`${ARIA_LIVE_MESSAGE}-${store.flowId}`}\n    aria-live=\"assertive\"\n    aria-atomic=\"true\"\n    class=\"a11y-live-msg\"\n  >\n    {store.ariaLiveMessage}\n  </div>\n{/if}\n\n<style>\n  .a11y-hidden {\n    display: none;\n  }\n\n  .a11y-live-msg {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    margin: -1px;\n    border: 0;\n    padding: 0;\n    overflow: hidden;\n    clip: rect(0px, 0px, 0px, 0px);\n    clip-path: inset(100%);\n  }\n</style>\n","<script lang=\"ts\">\n  import type { ControlButtonProps } from './types';\n\n  let {\n    class: className,\n    bgColor,\n    bgColorHover,\n    color,\n    colorHover,\n    borderColor,\n    onclick,\n    children,\n    ...restProps\n  }: ControlButtonProps = $props();\n</script>\n\n<button\n  type=\"button\"\n  {onclick}\n  class={['svelte-flow__controls-button', className]}\n  style:--xy-controls-button-background-color-props={bgColor}\n  style:--xy-controls-button-background-color-hover-props={bgColorHover}\n  style:--xy-controls-button-color-props={color}\n  style:--xy-controls-button-color-hover-props={colorHover}\n  style:--xy-controls-button-border-color-props={borderColor}\n  {...restProps}\n>\n  {@render children?.()}\n</button>\n","export var BackgroundVariant;\n(function (BackgroundVariant) {\n    BackgroundVariant[\"Lines\"] = \"lines\";\n    BackgroundVariant[\"Dots\"] = \"dots\";\n    BackgroundVariant[\"Cross\"] = \"cross\";\n})(BackgroundVariant || (BackgroundVariant = {}));\n","<script lang=\"ts\">\n  import { useStore } from '../../store';\n  import Panel from '../../container/Panel/Panel.svelte';\n  import ControlButton from './ControlButton.svelte';\n  import PlusIcon from './Icons/Plus.svelte';\n  import MinusIcon from './Icons/Minus.svelte';\n  import FitViewIcon from './Icons/Fit.svelte';\n  import LockIcon from './Icons/Lock.svelte';\n  import UnlockIcon from './Icons/Unlock.svelte';\n\n  import type { ControlsProps } from './types';\n\n  let {\n    position = 'bottom-left',\n    orientation = 'vertical',\n    showZoom = true,\n    showFitView = true,\n    showLock = true,\n    style,\n    class: className,\n    buttonBgColor,\n    buttonBgColorHover,\n    buttonColor,\n    buttonColorHover,\n    buttonBorderColor,\n    fitViewOptions,\n    children,\n    before,\n    after,\n    ...rest\n  }: ControlsProps = $props();\n\n  let store = $derived(useStore());\n\n  const buttonProps = {\n    bgColor: buttonBgColor,\n    bgColorHover: buttonBgColorHover,\n    color: buttonColor,\n    colorHover: buttonColorHover,\n    borderColor: buttonBorderColor\n  };\n\n  let isInteractive = $derived(\n    store.nodesDraggable || store.nodesConnectable || store.elementsSelectable\n  );\n  let minZoomReached = $derived(store.viewport.zoom <= store.minZoom);\n  let maxZoomReached = $derived(store.viewport.zoom >= store.maxZoom);\n  let ariaLabelConfig = $derived(store.ariaLabelConfig);\n  let orientationClass = $derived(orientation === 'horizontal' ? 'horizontal' : 'vertical');\n\n  const onZoomInHandler = () => {\n    store.zoomIn();\n  };\n\n  const onZoomOutHandler = () => {\n    store.zoomOut();\n  };\n\n  const onFitViewHandler = () => {\n    store.fitView(fitViewOptions);\n  };\n\n  const onToggleInteractivity = () => {\n    let interactive = !isInteractive;\n    store.nodesDraggable = interactive;\n    store.nodesConnectable = interactive;\n    store.elementsSelectable = interactive;\n  };\n</script>\n\n<Panel\n  class={['svelte-flow__controls', orientationClass, className]}\n  {position}\n  data-testid=\"svelte-flow__controls\"\n  aria-label={ariaLabelConfig['controls.ariaLabel']}\n  {style}\n  {...rest}\n>\n  {#if before}\n    {@render before()}\n  {/if}\n  {#if showZoom}\n    <ControlButton\n      onclick={onZoomInHandler}\n      class=\"svelte-flow__controls-zoomin\"\n      title={ariaLabelConfig['controls.zoomIn.ariaLabel']}\n      aria-label={ariaLabelConfig['controls.zoomIn.ariaLabel']}\n      disabled={maxZoomReached}\n      {...buttonProps}\n    >\n      <PlusIcon />\n    </ControlButton>\n    <ControlButton\n      onclick={onZoomOutHandler}\n      class=\"svelte-flow__controls-zoomout\"\n      title={ariaLabelConfig['controls.zoomOut.ariaLabel']}\n      aria-label={ariaLabelConfig['controls.zoomOut.ariaLabel']}\n      disabled={minZoomReached}\n      {...buttonProps}\n    >\n      <MinusIcon />\n    </ControlButton>\n  {/if}\n  {#if showFitView}\n    <ControlButton\n      class=\"svelte-flow__controls-fitview\"\n      onclick={onFitViewHandler}\n      title={ariaLabelConfig['controls.fitView.ariaLabel']}\n      aria-label={ariaLabelConfig['controls.fitView.ariaLabel']}\n      {...buttonProps}\n    >\n      <FitViewIcon />\n    </ControlButton>\n  {/if}\n  {#if showLock}\n    <ControlButton\n      class=\"svelte-flow__controls-interactive\"\n      onclick={onToggleInteractivity}\n      title={ariaLabelConfig['controls.interactive.ariaLabel']}\n      aria-label={ariaLabelConfig['controls.interactive.ariaLabel']}\n      {...buttonProps}\n    >\n      {#if isInteractive}<UnlockIcon />{:else}<LockIcon />{/if}\n    </ControlButton>\n  {/if}\n  {#if children}\n    {@render children()}\n  {/if}\n  {#if after}\n    {@render after()}\n  {/if}\n</Panel>\n","<script lang=\"ts\" module>\n  const defaultSize = {\n    [BackgroundVariant.Dots]: 1,\n    [BackgroundVariant.Lines]: 1,\n    [BackgroundVariant.Cross]: 6\n  };\n</script>\n\n<script lang=\"ts\">\n  import { useStore } from '../../store';\n  import { BackgroundVariant, type BackgroundProps } from './types';\n\n  import DotPattern from './DotPattern.svelte';\n  import LinePattern from './LinePattern.svelte';\n\n  let {\n    id,\n    variant = BackgroundVariant.Dots,\n    gap = 20,\n    size,\n    lineWidth = 1,\n    bgColor,\n    patternColor,\n    patternClass,\n    class: className\n  }: BackgroundProps = $props();\n\n  let store = $derived(useStore());\n\n  let isDots = $derived(variant === BackgroundVariant.Dots);\n  let isCross = $derived(variant === BackgroundVariant.Cross);\n  let gapXY: number[] = $derived(Array.isArray(gap) ? gap : [gap, gap]);\n\n  let patternId = $derived(`background-pattern-${store.flowId}-${id ?? ''}`);\n  let scaledGap = $derived([\n    gapXY[0] * store.viewport.zoom || 1,\n    gapXY[1] * store.viewport.zoom || 1\n  ]);\n  let scaledSize = $derived((size ?? defaultSize[variant]) * store.viewport.zoom);\n\n  let patternDimensions = $derived(\n    (isCross ? [scaledSize, scaledSize] : scaledGap) as [number, number]\n  );\n  let patternOffset = $derived(\n    isDots ? [scaledSize / 2, scaledSize / 2] : [patternDimensions[0] / 2, patternDimensions[1] / 2]\n  );\n</script>\n\n<svg\n  class={['svelte-flow__background', 'svelte-flow__container', className]}\n  data-testid=\"svelte-flow__background\"\n  style:--xy-background-color-props={bgColor}\n  style:--xy-background-pattern-color-props={patternColor}\n>\n  <pattern\n    id={patternId}\n    x={store.viewport.x % scaledGap[0]}\n    y={store.viewport.y % scaledGap[1]}\n    width={scaledGap[0]}\n    height={scaledGap[1]}\n    patternUnits=\"userSpaceOnUse\"\n    patternTransform={`translate(-${patternOffset[0]},-${patternOffset[1]})`}\n  >\n    {#if isDots}\n      <DotPattern radius={scaledSize / 2} class={patternClass} />\n    {:else}\n      <LinePattern dimensions={patternDimensions} {variant} {lineWidth} class={patternClass} />\n    {/if}\n  </pattern>\n  <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill={`url(#${patternId})`} />\n</svg>\n","<script lang=\"ts\">\n  import type { ClassValue } from 'svelte/elements';\n\n  let { radius, class: className }: { radius: number; class?: ClassValue } = $props();\n</script>\n\n<circle\n  cx={radius}\n  cy={radius}\n  r={radius}\n  class={['svelte-flow__background-pattern', 'dots', className]}\n/>\n","<script lang=\"ts\">\n  import type { ClassValue } from 'svelte/elements';\n  import type { BackgroundVariant } from './types';\n\n  let {\n    lineWidth,\n    dimensions,\n    variant,\n    class: className\n  }: {\n    lineWidth: number;\n    dimensions: [number, number];\n    variant: BackgroundVariant;\n    class?: ClassValue;\n  } = $props();\n</script>\n\n<path\n  stroke-width={lineWidth}\n  d={`M${dimensions[0] / 2} 0 V${dimensions[1]} M0 ${dimensions[1] / 2} H${dimensions[0]}`}\n  class={['svelte-flow__background-pattern', variant, className]}\n/>\n","import { XYMinimap } from '@xyflow/system';\nexport default function interactive(domNode, params) {\n    const minimap = XYMinimap({\n        domNode,\n        panZoom: params.panZoom,\n        getTransform: () => {\n            const { viewport } = params.store;\n            return [viewport.x, viewport.y, viewport.zoom];\n        },\n        getViewScale: params.getViewScale\n    });\n    minimap.update({\n        translateExtent: params.translateExtent,\n        width: params.width,\n        height: params.height,\n        inversePan: params.inversePan,\n        zoomStep: params.zoomStep,\n        pannable: params.pannable,\n        zoomable: params.zoomable\n    });\n    function update(params) {\n        minimap.update({\n            translateExtent: params.translateExtent,\n            width: params.width,\n            height: params.height,\n            inversePan: params.inversePan,\n            zoomStep: params.zoomStep,\n            pannable: params.pannable,\n            zoomable: params.zoomable\n        });\n    }\n    return {\n        update,\n        destroy() {\n            minimap.destroy();\n        }\n    };\n}\n","<script lang=\"ts\" module>\n  declare const window: Window | undefined;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const getAttrFunction = (func: any): GetMiniMapNodeAttribute =>\n    func instanceof Function ? func : () => func;\n</script>\n\n<script lang=\"ts\">\n  import {\n    getBoundsOfRects,\n    getInternalNodesBounds,\n    getNodeDimensions,\n    nodeHasDimensions\n  } from '@xyflow/system';\n\n  import { useStore } from '../../store';\n  import { Panel } from '../../container/Panel';\n  import MinimapNode from './MinimapNode.svelte';\n  import interactive from './interactive';\n  import type { GetMiniMapNodeAttribute, MiniMapProps } from './types';\n\n  let {\n    position = 'bottom-right',\n    ariaLabel,\n    nodeStrokeColor = 'transparent',\n    nodeColor,\n    nodeClass = '',\n    nodeBorderRadius = 5,\n    nodeStrokeWidth = 2,\n    bgColor,\n    maskColor,\n    maskStrokeColor,\n    maskStrokeWidth,\n    width = 200,\n    height = 150,\n    pannable = true,\n    zoomable = true,\n    inversePan,\n    zoomStep,\n    class: className,\n    ...rest\n  }: MiniMapProps = $props();\n\n  let store = $derived(useStore());\n  let ariaLabelConfig = $derived(store.ariaLabelConfig);\n\n  const nodeColorFunc = nodeColor === undefined ? undefined : getAttrFunction(nodeColor);\n  const nodeStrokeColorFunc = getAttrFunction(nodeStrokeColor);\n  const nodeClassFunc = getAttrFunction(nodeClass);\n  const shapeRendering =\n    // @ts-expect-error - TS doesn't know about chrome\n    typeof window === 'undefined' || !!window.chrome ? 'crispEdges' : 'geometricPrecision';\n\n  let labelledBy = $derived(`svelte-flow__minimap-desc-${store.flowId}`);\n\n  let viewBB = $derived({\n    x: -store.viewport.x / store.viewport.zoom,\n    y: -store.viewport.y / store.viewport.zoom,\n    width: store.width / store.viewport.zoom,\n    height: store.height / store.viewport.zoom\n  });\n  let boundingRect = $derived(\n    store.nodeLookup.size > 0\n      ? getBoundsOfRects(\n          getInternalNodesBounds(store.nodeLookup, { filter: (n) => !n.hidden }),\n          viewBB\n        )\n      : viewBB\n  );\n  let scaledWidth = $derived(boundingRect.width / width);\n  let scaledHeight = $derived(boundingRect.height / height);\n  let viewScale = $derived(Math.max(scaledWidth, scaledHeight));\n  let viewWidth = $derived(viewScale * width);\n  let viewHeight = $derived(viewScale * height);\n  let offset = $derived(5 * viewScale);\n  let x = $derived(boundingRect.x - (viewWidth - boundingRect.width) / 2 - offset);\n  let y = $derived(boundingRect.y - (viewHeight - boundingRect.height) / 2 - offset);\n  let viewboxWidth = $derived(viewWidth + offset * 2);\n  let viewboxHeight = $derived(viewHeight + offset * 2);\n\n  const getViewScale = () => viewScale;\n</script>\n\n<Panel\n  {position}\n  class={['svelte-flow__minimap', className]}\n  data-testid=\"svelte-flow__minimap\"\n  --xy-minimap-background-color-props={bgColor}\n  {...rest}\n>\n  {#if store.panZoom}\n    <svg\n      {width}\n      {height}\n      viewBox=\"{x} {y} {viewboxWidth} {viewboxHeight}\"\n      class=\"svelte-flow__minimap-svg\"\n      role=\"img\"\n      aria-labelledby={labelledBy}\n      style:--xy-minimap-mask-background-color-props={maskColor}\n      style:--xy-minimap-mask-stroke-color-props={maskStrokeColor}\n      style:--xy-minimap-mask-stroke-width-props={maskStrokeWidth\n        ? maskStrokeWidth * viewScale\n        : undefined}\n      use:interactive={{\n        store,\n        panZoom: store.panZoom,\n        getViewScale,\n        translateExtent: store.translateExtent,\n        width: store.width,\n        height: store.height,\n        inversePan,\n        zoomStep,\n        pannable,\n        zoomable\n      }}\n    >\n      {#if ariaLabel ?? ariaLabelConfig['minimap.ariaLabel']}\n        <title id={labelledBy}>{ariaLabel ?? ariaLabelConfig['minimap.ariaLabel']}</title>\n      {/if}\n\n      {#each store.nodes as userNode (userNode.id)}\n        {@const node = store.nodeLookup.get(userNode.id)}\n        {#if node && nodeHasDimensions(node)}\n          {@const nodeDimesions = getNodeDimensions(node)}\n          <MinimapNode\n            x={node.internals.positionAbsolute.x}\n            y={node.internals.positionAbsolute.y}\n            {...nodeDimesions}\n            selected={node.selected}\n            color={nodeColorFunc?.(node)}\n            borderRadius={nodeBorderRadius}\n            strokeColor={nodeStrokeColorFunc(node)}\n            strokeWidth={nodeStrokeWidth}\n            {shapeRendering}\n            class={nodeClassFunc(node)}\n          />\n        {/if}\n      {/each}\n      <path\n        class=\"svelte-flow__minimap-mask\"\n        d=\"M{x - offset},{y - offset}h{viewboxWidth + offset * 2}v{viewboxHeight +\n          offset * 2}h{-viewboxWidth - offset * 2}z\n      M{viewBB.x},{viewBB.y}h{viewBB.width}v{viewBB.height}h{-viewBB.width}z\"\n        fill-rule=\"evenodd\"\n        pointer-events=\"none\"\n      />\n    </svg>\n  {/if}\n</Panel>\n","/** @import { TemplateNode } from '#client' */\nimport { render_effect, teardown } from '../../reactivity/effects.js';\nimport { hydrating, set_hydrate_node } from '../hydration.js';\nimport { get_first_child } from '../operations.js';\n\n/**\n * @param {HTMLDivElement | SVGGElement} element\n * @param {() => Record<string, string>} get_styles\n * @returns {void}\n */\nexport function css_props(element, get_styles) {\n\tif (hydrating) {\n\t\tset_hydrate_node(/** @type {TemplateNode} */ (get_first_child(element)));\n\t}\n\n\trender_effect(() => {\n\t\tvar styles = get_styles();\n\n\t\tfor (var key in styles) {\n\t\t\tvar value = styles[key];\n\n\t\t\tif (value) {\n\t\t\t\telement.style.setProperty(key, value);\n\t\t\t} else {\n\t\t\t\telement.style.removeProperty(key);\n\t\t\t}\n\t\t}\n\t});\n}\n","<script lang=\"ts\">\n  import type { ClassValue } from 'svelte/elements';\n\n  let {\n    x,\n    y,\n    width,\n    height,\n    borderRadius = 5,\n    color,\n    shapeRendering,\n    strokeColor,\n    strokeWidth = 2,\n    selected,\n    class: className\n  }: {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    borderRadius?: number;\n    color?: string;\n    shapeRendering: string;\n    strokeColor?: string;\n    strokeWidth?: number;\n    selected?: boolean;\n    class?: ClassValue;\n  } = $props();\n</script>\n\n<rect\n  class={['svelte-flow__minimap-node', className]}\n  class:selected\n  {x}\n  {y}\n  rx={borderRadius}\n  ry={borderRadius}\n  {width}\n  {height}\n  style:fill={color}\n  style:stroke={strokeColor}\n  style:stroke-width={strokeWidth}\n  shape-rendering={shapeRendering}\n/>\n","/**\n* Expression to test part of icon name.\n*\n* Used when loading icons from Iconify API due to project naming convension.\n* Ignored when using custom icon sets - convension does not apply.\n*/\nconst matchIconName = /^[a-z0-9]+(-[a-z0-9]+)*$/;\n/**\n* Convert string icon name to IconifyIconName object.\n*/\nconst stringToIcon = (value, validate, allowSimpleName, provider = \"\") => {\n\tconst colonSeparated = value.split(\":\");\n\tif (value.slice(0, 1) === \"@\") {\n\t\tif (colonSeparated.length < 2 || colonSeparated.length > 3) return null;\n\t\tprovider = colonSeparated.shift().slice(1);\n\t}\n\tif (colonSeparated.length > 3 || !colonSeparated.length) return null;\n\tif (colonSeparated.length > 1) {\n\t\tconst name$1 = colonSeparated.pop();\n\t\tconst prefix = colonSeparated.pop();\n\t\tconst result = {\n\t\t\tprovider: colonSeparated.length > 0 ? colonSeparated[0] : provider,\n\t\t\tprefix,\n\t\t\tname: name$1\n\t\t};\n\t\treturn validate && !validateIconName(result) ? null : result;\n\t}\n\tconst name = colonSeparated[0];\n\tconst dashSeparated = name.split(\"-\");\n\tif (dashSeparated.length > 1) {\n\t\tconst result = {\n\t\t\tprovider,\n\t\t\tprefix: dashSeparated.shift(),\n\t\t\tname: dashSeparated.join(\"-\")\n\t\t};\n\t\treturn validate && !validateIconName(result) ? null : result;\n\t}\n\tif (allowSimpleName && provider === \"\") {\n\t\tconst result = {\n\t\t\tprovider,\n\t\t\tprefix: \"\",\n\t\t\tname\n\t\t};\n\t\treturn validate && !validateIconName(result, allowSimpleName) ? null : result;\n\t}\n\treturn null;\n};\n/**\n* Check if icon is valid.\n*\n* This function is not part of stringToIcon because validation is not needed for most code.\n*/\nconst validateIconName = (icon, allowSimpleName) => {\n\tif (!icon) return false;\n\treturn !!((allowSimpleName && icon.prefix === \"\" || !!icon.prefix) && !!icon.name);\n};\n\n/**\n* Resolve icon set icons\n*\n* Returns parent icon for each icon\n*/\nfunction getIconsTree(data, names) {\n\tconst icons = data.icons;\n\tconst aliases = data.aliases || Object.create(null);\n\tconst resolved = Object.create(null);\n\tfunction resolve(name) {\n\t\tif (icons[name]) return resolved[name] = [];\n\t\tif (!(name in resolved)) {\n\t\t\tresolved[name] = null;\n\t\t\tconst parent = aliases[name] && aliases[name].parent;\n\t\t\tconst value = parent && resolve(parent);\n\t\t\tif (value) resolved[name] = [parent].concat(value);\n\t\t}\n\t\treturn resolved[name];\n\t}\n\t(Object.keys(icons).concat(Object.keys(aliases))).forEach(resolve);\n\treturn resolved;\n}\n\n/** Default values for dimensions */\nconst defaultIconDimensions = Object.freeze({\n\tleft: 0,\n\ttop: 0,\n\twidth: 16,\n\theight: 16\n});\n/** Default values for transformations */\nconst defaultIconTransformations = Object.freeze({\n\trotate: 0,\n\tvFlip: false,\n\thFlip: false\n});\n/** Default values for all optional IconifyIcon properties */\nconst defaultIconProps = Object.freeze({\n\t...defaultIconDimensions,\n\t...defaultIconTransformations\n});\n/** Default values for all properties used in ExtendedIconifyIcon */\nconst defaultExtendedIconProps = Object.freeze({\n\t...defaultIconProps,\n\tbody: \"\",\n\thidden: false\n});\n\n/**\n* Merge transformations\n*/\nfunction mergeIconTransformations(obj1, obj2) {\n\tconst result = {};\n\tif (!obj1.hFlip !== !obj2.hFlip) result.hFlip = true;\n\tif (!obj1.vFlip !== !obj2.vFlip) result.vFlip = true;\n\tconst rotate = ((obj1.rotate || 0) + (obj2.rotate || 0)) % 4;\n\tif (rotate) result.rotate = rotate;\n\treturn result;\n}\n\n/**\n* Merge icon and alias\n*\n* Can also be used to merge default values and icon\n*/\nfunction mergeIconData(parent, child) {\n\tconst result = mergeIconTransformations(parent, child);\n\tfor (const key in defaultExtendedIconProps) if (key in defaultIconTransformations) {\n\t\tif (key in parent && !(key in result)) result[key] = defaultIconTransformations[key];\n\t} else if (key in child) result[key] = child[key];\n\telse if (key in parent) result[key] = parent[key];\n\treturn result;\n}\n\n/**\n* Get icon data, using prepared aliases tree\n*/\nfunction internalGetIconData(data, name, tree) {\n\tconst icons = data.icons;\n\tconst aliases = data.aliases || Object.create(null);\n\tlet currentProps = {};\n\tfunction parse(name$1) {\n\t\tcurrentProps = mergeIconData(icons[name$1] || aliases[name$1], currentProps);\n\t}\n\tparse(name);\n\ttree.forEach(parse);\n\treturn mergeIconData(data, currentProps);\n}\n\n/**\n* Extract icons from an icon set\n*\n* Returns list of icons that were found in icon set\n*/\nfunction parseIconSet(data, callback) {\n\tconst names = [];\n\tif (typeof data !== \"object\" || typeof data.icons !== \"object\") return names;\n\tif (data.not_found instanceof Array) data.not_found.forEach((name) => {\n\t\tcallback(name, null);\n\t\tnames.push(name);\n\t});\n\tconst tree = getIconsTree(data);\n\tfor (const name in tree) {\n\t\tconst item = tree[name];\n\t\tif (item) {\n\t\t\tcallback(name, internalGetIconData(data, name, item));\n\t\t\tnames.push(name);\n\t\t}\n\t}\n\treturn names;\n}\n\n/**\n* Optional properties\n*/\nconst optionalPropertyDefaults = {\n\tprovider: \"\",\n\taliases: {},\n\tnot_found: {},\n\t...defaultIconDimensions\n};\n/**\n* Check props\n*/\nfunction checkOptionalProps(item, defaults) {\n\tfor (const prop in defaults) if (prop in item && typeof item[prop] !== typeof defaults[prop]) return false;\n\treturn true;\n}\n/**\n* Validate icon set, return it as IconifyJSON on success, null on failure\n*\n* Unlike validateIconSet(), this function is very basic.\n* It does not throw exceptions, it does not check metadata, it does not fix stuff.\n*/\nfunction quicklyValidateIconSet(obj) {\n\tif (typeof obj !== \"object\" || obj === null) return null;\n\tconst data = obj;\n\tif (typeof data.prefix !== \"string\" || !obj.icons || typeof obj.icons !== \"object\") return null;\n\tif (!checkOptionalProps(obj, optionalPropertyDefaults)) return null;\n\tconst icons = data.icons;\n\tfor (const name in icons) {\n\t\tconst icon = icons[name];\n\t\tif (!name || typeof icon.body !== \"string\" || !checkOptionalProps(icon, defaultExtendedIconProps)) return null;\n\t}\n\tconst aliases = data.aliases || Object.create(null);\n\tfor (const name in aliases) {\n\t\tconst icon = aliases[name];\n\t\tconst parent = icon.parent;\n\t\tif (!name || typeof parent !== \"string\" || !icons[parent] && !aliases[parent] || !checkOptionalProps(icon, defaultExtendedIconProps)) return null;\n\t}\n\treturn data;\n}\n\n/**\n* Storage by provider and prefix\n*/\nconst dataStorage = Object.create(null);\n/**\n* Create new storage\n*/\nfunction newStorage(provider, prefix) {\n\treturn {\n\t\tprovider,\n\t\tprefix,\n\t\ticons: Object.create(null),\n\t\tmissing: /* @__PURE__ */ new Set()\n\t};\n}\n/**\n* Get storage for provider and prefix\n*/\nfunction getStorage(provider, prefix) {\n\tconst providerStorage = dataStorage[provider] || (dataStorage[provider] = Object.create(null));\n\treturn providerStorage[prefix] || (providerStorage[prefix] = newStorage(provider, prefix));\n}\n/**\n* Add icon set to storage\n*\n* Returns array of added icons\n*/\nfunction addIconSet(storage, data) {\n\tif (!quicklyValidateIconSet(data)) return [];\n\treturn parseIconSet(data, (name, icon) => {\n\t\tif (icon) storage.icons[name] = icon;\n\t\telse storage.missing.add(name);\n\t});\n}\n/**\n* Add icon to storage\n*/\nfunction addIconToStorage(storage, name, icon) {\n\ttry {\n\t\tif (typeof icon.body === \"string\") {\n\t\t\tstorage.icons[name] = { ...icon };\n\t\t\treturn true;\n\t\t}\n\t} catch (err) {}\n\treturn false;\n}\n/**\n* List available icons\n*/\nfunction listIcons(provider, prefix) {\n\tlet allIcons = [];\n\t(typeof provider === \"string\" ? [provider] : Object.keys(dataStorage)).forEach((provider$1) => {\n\t\t(typeof provider$1 === \"string\" && typeof prefix === \"string\" ? [prefix] : Object.keys(dataStorage[provider$1] || {})).forEach((prefix$1) => {\n\t\t\tconst storage = getStorage(provider$1, prefix$1);\n\t\t\tallIcons = allIcons.concat(Object.keys(storage.icons).map((name) => (provider$1 !== \"\" ? \"@\" + provider$1 + \":\" : \"\") + prefix$1 + \":\" + name));\n\t\t});\n\t});\n\treturn allIcons;\n}\n\n/**\n* Allow storing icons without provider or prefix, making it possible to store icons like \"home\"\n*/\nlet simpleNames = false;\nfunction allowSimpleNames(allow) {\n\tif (typeof allow === \"boolean\") simpleNames = allow;\n\treturn simpleNames;\n}\n/**\n* Get icon data\n*\n* Returns:\n* - IconifyIcon on success, object directly from storage so don't modify it\n* - null if icon is marked as missing (returned in `not_found` property from API, so don't bother sending API requests)\n* - undefined if icon is missing in storage\n*/\nfunction getIconData(name) {\n\tconst icon = typeof name === \"string\" ? stringToIcon(name, true, simpleNames) : name;\n\tif (icon) {\n\t\tconst storage = getStorage(icon.provider, icon.prefix);\n\t\tconst iconName = icon.name;\n\t\treturn storage.icons[iconName] || (storage.missing.has(iconName) ? null : void 0);\n\t}\n}\n/**\n* Add one icon\n*/\nfunction addIcon(name, data) {\n\tconst icon = stringToIcon(name, true, simpleNames);\n\tif (!icon) return false;\n\tconst storage = getStorage(icon.provider, icon.prefix);\n\tif (data) return addIconToStorage(storage, icon.name, data);\n\telse {\n\t\tstorage.missing.add(icon.name);\n\t\treturn true;\n\t}\n}\n/**\n* Add icon set\n*/\nfunction addCollection(data, provider) {\n\tif (typeof data !== \"object\") return false;\n\tif (typeof provider !== \"string\") provider = data.provider || \"\";\n\tif (simpleNames && !provider && !data.prefix) {\n\t\tlet added = false;\n\t\tif (quicklyValidateIconSet(data)) {\n\t\t\tdata.prefix = \"\";\n\t\t\tparseIconSet(data, (name, icon) => {\n\t\t\t\tif (addIcon(name, icon)) added = true;\n\t\t\t});\n\t\t}\n\t\treturn added;\n\t}\n\tconst prefix = data.prefix;\n\tif (!validateIconName({\n\t\tprefix,\n\t\tname: \"a\"\n\t})) return false;\n\treturn !!addIconSet(getStorage(provider, prefix), data);\n}\n/**\n* Check if icon data is available\n*/\nfunction iconLoaded(name) {\n\treturn !!getIconData(name);\n}\n/**\n* Get full icon\n*/\nfunction getIcon(name) {\n\tconst result = getIconData(name);\n\treturn result ? {\n\t\t...defaultIconProps,\n\t\t...result\n\t} : result;\n}\n\n/**\n* Default icon customisations values\n*/\nconst defaultIconSizeCustomisations = Object.freeze({\n\twidth: null,\n\theight: null\n});\nconst defaultIconCustomisations = Object.freeze({\n\t...defaultIconSizeCustomisations,\n\t...defaultIconTransformations\n});\n\n/**\n* Regular expressions for calculating dimensions\n*/\nconst unitsSplit = /(-?[0-9.]*[0-9]+[0-9.]*)/g;\nconst unitsTest = /^-?[0-9.]*[0-9]+[0-9.]*$/g;\nfunction calculateSize(size, ratio, precision) {\n\tif (ratio === 1) return size;\n\tprecision = precision || 100;\n\tif (typeof size === \"number\") return Math.ceil(size * ratio * precision) / precision;\n\tif (typeof size !== \"string\") return size;\n\tconst oldParts = size.split(unitsSplit);\n\tif (oldParts === null || !oldParts.length) return size;\n\tconst newParts = [];\n\tlet code = oldParts.shift();\n\tlet isNumber = unitsTest.test(code);\n\twhile (true) {\n\t\tif (isNumber) {\n\t\t\tconst num = parseFloat(code);\n\t\t\tif (isNaN(num)) newParts.push(code);\n\t\t\telse newParts.push(Math.ceil(num * ratio * precision) / precision);\n\t\t} else newParts.push(code);\n\t\tcode = oldParts.shift();\n\t\tif (code === void 0) return newParts.join(\"\");\n\t\tisNumber = !isNumber;\n\t}\n}\n\nfunction splitSVGDefs(content, tag = \"defs\") {\n\tlet defs = \"\";\n\tconst index = content.indexOf(\"<\" + tag);\n\twhile (index >= 0) {\n\t\tconst start = content.indexOf(\">\", index);\n\t\tconst end = content.indexOf(\"</\" + tag);\n\t\tif (start === -1 || end === -1) break;\n\t\tconst endEnd = content.indexOf(\">\", end);\n\t\tif (endEnd === -1) break;\n\t\tdefs += content.slice(start + 1, end).trim();\n\t\tcontent = content.slice(0, index).trim() + content.slice(endEnd + 1);\n\t}\n\treturn {\n\t\tdefs,\n\t\tcontent\n\t};\n}\n/**\n* Merge defs and content\n*/\nfunction mergeDefsAndContent(defs, content) {\n\treturn defs ? \"<defs>\" + defs + \"</defs>\" + content : content;\n}\n/**\n* Wrap SVG content, without wrapping definitions\n*/\nfunction wrapSVGContent(body, start, end) {\n\tconst split = splitSVGDefs(body);\n\treturn mergeDefsAndContent(split.defs, start + split.content + end);\n}\n\n/**\n* Check if value should be unset. Allows multiple keywords\n*/\nconst isUnsetKeyword = (value) => value === \"unset\" || value === \"undefined\" || value === \"none\";\n/**\n* Get SVG attributes and content from icon + customisations\n*\n* Does not generate style to make it compatible with frameworks that use objects for style, such as React.\n* Instead, it generates 'inline' value. If true, rendering engine should add verticalAlign: -0.125em to icon.\n*\n* Customisations should be normalised by platform specific parser.\n* Result should be converted to <svg> by platform specific parser.\n* Use replaceIDs to generate unique IDs for body.\n*/\nfunction iconToSVG(icon, customisations) {\n\tconst fullIcon = {\n\t\t...defaultIconProps,\n\t\t...icon\n\t};\n\tconst fullCustomisations = {\n\t\t...defaultIconCustomisations,\n\t\t...customisations\n\t};\n\tconst box = {\n\t\tleft: fullIcon.left,\n\t\ttop: fullIcon.top,\n\t\twidth: fullIcon.width,\n\t\theight: fullIcon.height\n\t};\n\tlet body = fullIcon.body;\n\t[fullIcon, fullCustomisations].forEach((props) => {\n\t\tconst transformations = [];\n\t\tconst hFlip = props.hFlip;\n\t\tconst vFlip = props.vFlip;\n\t\tlet rotation = props.rotate;\n\t\tif (hFlip) if (vFlip) rotation += 2;\n\t\telse {\n\t\t\ttransformations.push(\"translate(\" + (box.width + box.left).toString() + \" \" + (0 - box.top).toString() + \")\");\n\t\t\ttransformations.push(\"scale(-1 1)\");\n\t\t\tbox.top = box.left = 0;\n\t\t}\n\t\telse if (vFlip) {\n\t\t\ttransformations.push(\"translate(\" + (0 - box.left).toString() + \" \" + (box.height + box.top).toString() + \")\");\n\t\t\ttransformations.push(\"scale(1 -1)\");\n\t\t\tbox.top = box.left = 0;\n\t\t}\n\t\tlet tempValue;\n\t\tif (rotation < 0) rotation -= Math.floor(rotation / 4) * 4;\n\t\trotation = rotation % 4;\n\t\tswitch (rotation) {\n\t\t\tcase 1:\n\t\t\t\ttempValue = box.height / 2 + box.top;\n\t\t\t\ttransformations.unshift(\"rotate(90 \" + tempValue.toString() + \" \" + tempValue.toString() + \")\");\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\ttransformations.unshift(\"rotate(180 \" + (box.width / 2 + box.left).toString() + \" \" + (box.height / 2 + box.top).toString() + \")\");\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\ttempValue = box.width / 2 + box.left;\n\t\t\t\ttransformations.unshift(\"rotate(-90 \" + tempValue.toString() + \" \" + tempValue.toString() + \")\");\n\t\t\t\tbreak;\n\t\t}\n\t\tif (rotation % 2 === 1) {\n\t\t\tif (box.left !== box.top) {\n\t\t\t\ttempValue = box.left;\n\t\t\t\tbox.left = box.top;\n\t\t\t\tbox.top = tempValue;\n\t\t\t}\n\t\t\tif (box.width !== box.height) {\n\t\t\t\ttempValue = box.width;\n\t\t\t\tbox.width = box.height;\n\t\t\t\tbox.height = tempValue;\n\t\t\t}\n\t\t}\n\t\tif (transformations.length) body = wrapSVGContent(body, \"<g transform=\\\"\" + transformations.join(\" \") + \"\\\">\", \"</g>\");\n\t});\n\tconst customisationsWidth = fullCustomisations.width;\n\tconst customisationsHeight = fullCustomisations.height;\n\tconst boxWidth = box.width;\n\tconst boxHeight = box.height;\n\tlet width;\n\tlet height;\n\tif (customisationsWidth === null) {\n\t\theight = customisationsHeight === null ? \"1em\" : customisationsHeight === \"auto\" ? boxHeight : customisationsHeight;\n\t\twidth = calculateSize(height, boxWidth / boxHeight);\n\t} else {\n\t\twidth = customisationsWidth === \"auto\" ? boxWidth : customisationsWidth;\n\t\theight = customisationsHeight === null ? calculateSize(width, boxHeight / boxWidth) : customisationsHeight === \"auto\" ? boxHeight : customisationsHeight;\n\t}\n\tconst attributes = {};\n\tconst setAttr = (prop, value) => {\n\t\tif (!isUnsetKeyword(value)) attributes[prop] = value.toString();\n\t};\n\tsetAttr(\"width\", width);\n\tsetAttr(\"height\", height);\n\tconst viewBox = [\n\t\tbox.left,\n\t\tbox.top,\n\t\tboxWidth,\n\t\tboxHeight\n\t];\n\tattributes.viewBox = viewBox.join(\" \");\n\treturn {\n\t\tattributes,\n\t\tviewBox,\n\t\tbody\n\t};\n}\n\n/**\n* Regular expression for finding ids\n*/\nconst regex = /\\sid=\"(\\S+)\"/g;\n/**\n* Counters\n*/\nconst counters = /* @__PURE__ */ new Map();\n/**\n* Get unique new ID\n*/\nfunction nextID(id) {\n\tid = id.replace(/[0-9]+$/, \"\") || \"a\";\n\tconst count = counters.get(id) || 0;\n\tcounters.set(id, count + 1);\n\treturn count ? `${id}${count}` : id;\n}\n/**\n* Replace IDs in SVG output with unique IDs\n*/\nfunction replaceIDs(body) {\n\tconst ids = [];\n\tlet match;\n\twhile (match = regex.exec(body)) ids.push(match[1]);\n\tif (!ids.length) return body;\n\tconst suffix = \"suffix\" + (Math.random() * 16777216 | Date.now()).toString(16);\n\tids.forEach((id) => {\n\t\tconst newID = nextID(id);\n\t\tconst escapedID = id.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n\t\tbody = body.replace(new RegExp(\"([#;\\\"])(\" + escapedID + \")([\\\")]|\\\\.[a-z])\", \"g\"), \"$1\" + newID + suffix + \"$3\");\n\t});\n\tbody = body.replace(new RegExp(suffix, \"g\"), \"\");\n\treturn body;\n}\n/**\n* Clear ID cache\n*/\nfunction clearIDCache() {\n\tcounters.clear();\n}\n\n/**\n* Local storate types and entries\n*/\nconst storage = Object.create(null);\n/**\n* Set API module\n*/\nfunction setAPIModule(provider, item) {\n\tstorage[provider] = item;\n}\n/**\n* Get API module\n*/\nfunction getAPIModule(provider) {\n\treturn storage[provider] || storage[\"\"];\n}\n\n/**\n* Create full API configuration from partial data\n*/\nfunction createAPIConfig(source) {\n\tlet resources;\n\tif (typeof source.resources === \"string\") resources = [source.resources];\n\telse {\n\t\tresources = source.resources;\n\t\tif (!(resources instanceof Array) || !resources.length) return null;\n\t}\n\treturn {\n\t\tresources,\n\t\tpath: source.path || \"/\",\n\t\tmaxURL: source.maxURL || 500,\n\t\trotate: source.rotate || 750,\n\t\ttimeout: source.timeout || 5e3,\n\t\trandom: source.random === true,\n\t\tindex: source.index || 0,\n\t\tdataAfterTimeout: source.dataAfterTimeout !== false\n\t};\n}\n/**\n* Local storage\n*/\nconst configStorage = Object.create(null);\n/**\n* Redundancy for API servers.\n*\n* API should have very high uptime because of implemented redundancy at server level, but\n* sometimes bad things happen. On internet 100% uptime is not possible.\n*\n* There could be routing problems. Server might go down for whatever reason, but it takes\n* few minutes to detect that downtime, so during those few minutes API might not be accessible.\n*\n* This script has some redundancy to mitigate possible network issues.\n*\n* If one host cannot be reached in 'rotate' (750 by default) ms, script will try to retrieve\n* data from different host. Hosts have different configurations, pointing to different\n* API servers hosted at different providers.\n*/\nconst fallBackAPISources = [\"https://api.simplesvg.com\", \"https://api.unisvg.com\"];\nconst fallBackAPI = [];\nwhile (fallBackAPISources.length > 0) if (fallBackAPISources.length === 1) fallBackAPI.push(fallBackAPISources.shift());\nelse if (Math.random() > .5) fallBackAPI.push(fallBackAPISources.shift());\nelse fallBackAPI.push(fallBackAPISources.pop());\nconfigStorage[\"\"] = createAPIConfig({ resources: [\"https://api.iconify.design\"].concat(fallBackAPI) });\n/**\n* Add custom config for provider\n*/\nfunction addAPIProvider(provider, customConfig) {\n\tconst config = createAPIConfig(customConfig);\n\tif (config === null) return false;\n\tconfigStorage[provider] = config;\n\treturn true;\n}\n/**\n* Get API configuration\n*/\nfunction getAPIConfig(provider) {\n\treturn configStorage[provider];\n}\n/**\n* List API providers\n*/\nfunction listAPIProviders() {\n\treturn Object.keys(configStorage);\n}\n\nconst detectFetch = () => {\n\tlet callback;\n\ttry {\n\t\tcallback = fetch;\n\t\tif (typeof callback === \"function\") return callback;\n\t} catch (err) {}\n};\n/**\n* Fetch function\n*/\nlet fetchModule = detectFetch();\n/**\n* Set custom fetch() function\n*/\nfunction setFetch(fetch$1) {\n\tfetchModule = fetch$1;\n}\n/**\n* Get fetch() function. Used by Icon Finder Core\n*/\nfunction getFetch() {\n\treturn fetchModule;\n}\n/**\n* Calculate maximum icons list length for prefix\n*/\nfunction calculateMaxLength(provider, prefix) {\n\tconst config = getAPIConfig(provider);\n\tif (!config) return 0;\n\tlet result;\n\tif (!config.maxURL) result = 0;\n\telse {\n\t\tlet maxHostLength = 0;\n\t\tconfig.resources.forEach((item) => {\n\t\t\tconst host = item;\n\t\t\tmaxHostLength = Math.max(maxHostLength, host.length);\n\t\t});\n\t\tconst url = prefix + \".json?icons=\";\n\t\tresult = config.maxURL - maxHostLength - config.path.length - url.length;\n\t}\n\treturn result;\n}\n/**\n* Should query be aborted, based on last HTTP status\n*/\nfunction shouldAbort(status) {\n\treturn status === 404;\n}\n/**\n* Prepare params\n*/\nconst prepare = (provider, prefix, icons) => {\n\tconst results = [];\n\tconst maxLength = calculateMaxLength(provider, prefix);\n\tconst type = \"icons\";\n\tlet item = {\n\t\ttype,\n\t\tprovider,\n\t\tprefix,\n\t\ticons: []\n\t};\n\tlet length = 0;\n\ticons.forEach((name, index) => {\n\t\tlength += name.length + 1;\n\t\tif (length >= maxLength && index > 0) {\n\t\t\tresults.push(item);\n\t\t\titem = {\n\t\t\t\ttype,\n\t\t\t\tprovider,\n\t\t\t\tprefix,\n\t\t\t\ticons: []\n\t\t\t};\n\t\t\tlength = name.length;\n\t\t}\n\t\titem.icons.push(name);\n\t});\n\tresults.push(item);\n\treturn results;\n};\n/**\n* Get path\n*/\nfunction getPath(provider) {\n\tif (typeof provider === \"string\") {\n\t\tconst config = getAPIConfig(provider);\n\t\tif (config) return config.path;\n\t}\n\treturn \"/\";\n}\n/**\n* Load icons\n*/\nconst send = (host, params, callback) => {\n\tif (!fetchModule) {\n\t\tcallback(\"abort\", 424);\n\t\treturn;\n\t}\n\tlet path = getPath(params.provider);\n\tswitch (params.type) {\n\t\tcase \"icons\": {\n\t\t\tconst prefix = params.prefix;\n\t\t\tconst iconsList = params.icons.join(\",\");\n\t\t\tconst urlParams = new URLSearchParams({ icons: iconsList });\n\t\t\tpath += prefix + \".json?\" + urlParams.toString();\n\t\t\tbreak;\n\t\t}\n\t\tcase \"custom\": {\n\t\t\tconst uri = params.uri;\n\t\t\tpath += uri.slice(0, 1) === \"/\" ? uri.slice(1) : uri;\n\t\t\tbreak;\n\t\t}\n\t\tdefault:\n\t\t\tcallback(\"abort\", 400);\n\t\t\treturn;\n\t}\n\tlet defaultError = 503;\n\tfetchModule(host + path).then((response) => {\n\t\tconst status = response.status;\n\t\tif (status !== 200) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tcallback(shouldAbort(status) ? \"abort\" : \"next\", status);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tdefaultError = 501;\n\t\treturn response.json();\n\t}).then((data) => {\n\t\tif (typeof data !== \"object\" || data === null) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (data === 404) callback(\"abort\", data);\n\t\t\t\telse callback(\"next\", defaultError);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tsetTimeout(() => {\n\t\t\tcallback(\"success\", data);\n\t\t});\n\t}).catch(() => {\n\t\tcallback(\"next\", defaultError);\n\t});\n};\n/**\n* Export module\n*/\nconst fetchAPIModule = {\n\tprepare,\n\tsend\n};\n\n/**\n* Remove callback\n*/\nfunction removeCallback(storages, id) {\n\tstorages.forEach((storage) => {\n\t\tconst items = storage.loaderCallbacks;\n\t\tif (items) storage.loaderCallbacks = items.filter((row) => row.id !== id);\n\t});\n}\n/**\n* Update all callbacks for provider and prefix\n*/\nfunction updateCallbacks(storage) {\n\tif (!storage.pendingCallbacksFlag) {\n\t\tstorage.pendingCallbacksFlag = true;\n\t\tsetTimeout(() => {\n\t\t\tstorage.pendingCallbacksFlag = false;\n\t\t\tconst items = storage.loaderCallbacks ? storage.loaderCallbacks.slice(0) : [];\n\t\t\tif (!items.length) return;\n\t\t\tlet hasPending = false;\n\t\t\tconst provider = storage.provider;\n\t\t\tconst prefix = storage.prefix;\n\t\t\titems.forEach((item) => {\n\t\t\t\tconst icons = item.icons;\n\t\t\t\tconst oldLength = icons.pending.length;\n\t\t\t\ticons.pending = icons.pending.filter((icon) => {\n\t\t\t\t\tif (icon.prefix !== prefix) return true;\n\t\t\t\t\tconst name = icon.name;\n\t\t\t\t\tif (storage.icons[name]) icons.loaded.push({\n\t\t\t\t\t\tprovider,\n\t\t\t\t\t\tprefix,\n\t\t\t\t\t\tname\n\t\t\t\t\t});\n\t\t\t\t\telse if (storage.missing.has(name)) icons.missing.push({\n\t\t\t\t\t\tprovider,\n\t\t\t\t\t\tprefix,\n\t\t\t\t\t\tname\n\t\t\t\t\t});\n\t\t\t\t\telse {\n\t\t\t\t\t\thasPending = true;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t\tif (icons.pending.length !== oldLength) {\n\t\t\t\t\tif (!hasPending) removeCallback([storage], item.id);\n\t\t\t\t\titem.callback(icons.loaded.slice(0), icons.missing.slice(0), icons.pending.slice(0), item.abort);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\n/**\n* Unique id counter for callbacks\n*/\nlet idCounter = 0;\n/**\n* Add callback\n*/\nfunction storeCallback(callback, icons, pendingSources) {\n\tconst id = idCounter++;\n\tconst abort = removeCallback.bind(null, pendingSources, id);\n\tif (!icons.pending.length) return abort;\n\tconst item = {\n\t\tid,\n\t\ticons,\n\t\tcallback,\n\t\tabort\n\t};\n\tpendingSources.forEach((storage) => {\n\t\t(storage.loaderCallbacks || (storage.loaderCallbacks = [])).push(item);\n\t});\n\treturn abort;\n}\n\n/**\n* Check if icons have been loaded\n*/\nfunction sortIcons(icons) {\n\tconst result = {\n\t\tloaded: [],\n\t\tmissing: [],\n\t\tpending: []\n\t};\n\tconst storage = Object.create(null);\n\ticons.sort((a, b) => {\n\t\tif (a.provider !== b.provider) return a.provider.localeCompare(b.provider);\n\t\tif (a.prefix !== b.prefix) return a.prefix.localeCompare(b.prefix);\n\t\treturn a.name.localeCompare(b.name);\n\t});\n\tlet lastIcon = {\n\t\tprovider: \"\",\n\t\tprefix: \"\",\n\t\tname: \"\"\n\t};\n\ticons.forEach((icon) => {\n\t\tif (lastIcon.name === icon.name && lastIcon.prefix === icon.prefix && lastIcon.provider === icon.provider) return;\n\t\tlastIcon = icon;\n\t\tconst provider = icon.provider;\n\t\tconst prefix = icon.prefix;\n\t\tconst name = icon.name;\n\t\tconst providerStorage = storage[provider] || (storage[provider] = Object.create(null));\n\t\tconst localStorage = providerStorage[prefix] || (providerStorage[prefix] = getStorage(provider, prefix));\n\t\tlet list;\n\t\tif (name in localStorage.icons) list = result.loaded;\n\t\telse if (prefix === \"\" || localStorage.missing.has(name)) list = result.missing;\n\t\telse list = result.pending;\n\t\tconst item = {\n\t\t\tprovider,\n\t\t\tprefix,\n\t\t\tname\n\t\t};\n\t\tlist.push(item);\n\t});\n\treturn result;\n}\n\n/**\n* Convert icons list from string/icon mix to icons and validate them\n*/\nfunction listToIcons(list, validate = true, simpleNames = false) {\n\tconst result = [];\n\tlist.forEach((item) => {\n\t\tconst icon = typeof item === \"string\" ? stringToIcon(item, validate, simpleNames) : item;\n\t\tif (icon) result.push(icon);\n\t});\n\treturn result;\n}\n\n/**\n* Default RedundancyConfig for API calls\n*/\nconst defaultConfig = {\n\tresources: [],\n\tindex: 0,\n\ttimeout: 2e3,\n\trotate: 750,\n\trandom: false,\n\tdataAfterTimeout: false\n};\n\n/**\n* Send query\n*/\nfunction sendQuery(config, payload, query, done) {\n\tconst resourcesCount = config.resources.length;\n\tconst startIndex = config.random ? Math.floor(Math.random() * resourcesCount) : config.index;\n\tlet resources;\n\tif (config.random) {\n\t\tlet list = config.resources.slice(0);\n\t\tresources = [];\n\t\twhile (list.length > 1) {\n\t\t\tconst nextIndex = Math.floor(Math.random() * list.length);\n\t\t\tresources.push(list[nextIndex]);\n\t\t\tlist = list.slice(0, nextIndex).concat(list.slice(nextIndex + 1));\n\t\t}\n\t\tresources = resources.concat(list);\n\t} else resources = config.resources.slice(startIndex).concat(config.resources.slice(0, startIndex));\n\tconst startTime = Date.now();\n\tlet status = \"pending\";\n\tlet queriesSent = 0;\n\tlet lastError;\n\tlet timer = null;\n\tlet queue = [];\n\tlet doneCallbacks = [];\n\tif (typeof done === \"function\") doneCallbacks.push(done);\n\t/**\n\t* Reset timer\n\t*/\n\tfunction resetTimer() {\n\t\tif (timer) {\n\t\t\tclearTimeout(timer);\n\t\t\ttimer = null;\n\t\t}\n\t}\n\t/**\n\t* Abort everything\n\t*/\n\tfunction abort() {\n\t\tif (status === \"pending\") status = \"aborted\";\n\t\tresetTimer();\n\t\tqueue.forEach((item) => {\n\t\t\tif (item.status === \"pending\") item.status = \"aborted\";\n\t\t});\n\t\tqueue = [];\n\t}\n\t/**\n\t* Add / replace callback to call when execution is complete.\n\t* This can be used to abort pending query implementations when query is complete or aborted.\n\t*/\n\tfunction subscribe(callback, overwrite) {\n\t\tif (overwrite) doneCallbacks = [];\n\t\tif (typeof callback === \"function\") doneCallbacks.push(callback);\n\t}\n\t/**\n\t* Get query status\n\t*/\n\tfunction getQueryStatus() {\n\t\treturn {\n\t\t\tstartTime,\n\t\t\tpayload,\n\t\t\tstatus,\n\t\t\tqueriesSent,\n\t\t\tqueriesPending: queue.length,\n\t\t\tsubscribe,\n\t\t\tabort\n\t\t};\n\t}\n\t/**\n\t* Fail query\n\t*/\n\tfunction failQuery() {\n\t\tstatus = \"failed\";\n\t\tdoneCallbacks.forEach((callback) => {\n\t\t\tcallback(void 0, lastError);\n\t\t});\n\t}\n\t/**\n\t* Clear queue\n\t*/\n\tfunction clearQueue() {\n\t\tqueue.forEach((item) => {\n\t\t\tif (item.status === \"pending\") item.status = \"aborted\";\n\t\t});\n\t\tqueue = [];\n\t}\n\t/**\n\t* Got response from module\n\t*/\n\tfunction moduleResponse(item, response, data) {\n\t\tconst isError = response !== \"success\";\n\t\tqueue = queue.filter((queued) => queued !== item);\n\t\tswitch (status) {\n\t\t\tcase \"pending\": break;\n\t\t\tcase \"failed\":\n\t\t\t\tif (isError || !config.dataAfterTimeout) return;\n\t\t\t\tbreak;\n\t\t\tdefault: return;\n\t\t}\n\t\tif (response === \"abort\") {\n\t\t\tlastError = data;\n\t\t\tfailQuery();\n\t\t\treturn;\n\t\t}\n\t\tif (isError) {\n\t\t\tlastError = data;\n\t\t\tif (!queue.length) if (!resources.length) failQuery();\n\t\t\telse execNext();\n\t\t\treturn;\n\t\t}\n\t\tresetTimer();\n\t\tclearQueue();\n\t\tif (!config.random) {\n\t\t\tconst index = config.resources.indexOf(item.resource);\n\t\t\tif (index !== -1 && index !== config.index) config.index = index;\n\t\t}\n\t\tstatus = \"completed\";\n\t\tdoneCallbacks.forEach((callback) => {\n\t\t\tcallback(data);\n\t\t});\n\t}\n\t/**\n\t* Execute next query\n\t*/\n\tfunction execNext() {\n\t\tif (status !== \"pending\") return;\n\t\tresetTimer();\n\t\tconst resource = resources.shift();\n\t\tif (resource === void 0) {\n\t\t\tif (queue.length) {\n\t\t\t\ttimer = setTimeout(() => {\n\t\t\t\t\tresetTimer();\n\t\t\t\t\tif (status === \"pending\") {\n\t\t\t\t\t\tclearQueue();\n\t\t\t\t\t\tfailQuery();\n\t\t\t\t\t}\n\t\t\t\t}, config.timeout);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfailQuery();\n\t\t\treturn;\n\t\t}\n\t\tconst item = {\n\t\t\tstatus: \"pending\",\n\t\t\tresource,\n\t\t\tcallback: (status$1, data) => {\n\t\t\t\tmoduleResponse(item, status$1, data);\n\t\t\t}\n\t\t};\n\t\tqueue.push(item);\n\t\tqueriesSent++;\n\t\ttimer = setTimeout(execNext, config.rotate);\n\t\tquery(resource, payload, item.callback);\n\t}\n\tsetTimeout(execNext);\n\treturn getQueryStatus;\n}\n\n/**\n* Redundancy instance\n*/\nfunction initRedundancy(cfg) {\n\tconst config = {\n\t\t...defaultConfig,\n\t\t...cfg\n\t};\n\tlet queries = [];\n\t/**\n\t* Remove aborted and completed queries\n\t*/\n\tfunction cleanup() {\n\t\tqueries = queries.filter((item) => item().status === \"pending\");\n\t}\n\t/**\n\t* Send query\n\t*/\n\tfunction query(payload, queryCallback, doneCallback) {\n\t\tconst query$1 = sendQuery(config, payload, queryCallback, (data, error) => {\n\t\t\tcleanup();\n\t\t\tif (doneCallback) doneCallback(data, error);\n\t\t});\n\t\tqueries.push(query$1);\n\t\treturn query$1;\n\t}\n\t/**\n\t* Find instance\n\t*/\n\tfunction find(callback) {\n\t\treturn queries.find((value) => {\n\t\t\treturn callback(value);\n\t\t}) || null;\n\t}\n\treturn {\n\t\tquery,\n\t\tfind,\n\t\tsetIndex: (index) => {\n\t\t\tconfig.index = index;\n\t\t},\n\t\tgetIndex: () => config.index,\n\t\tcleanup\n\t};\n}\n\nfunction emptyCallback$1() {}\nconst redundancyCache = Object.create(null);\n/**\n* Get Redundancy instance for provider\n*/\nfunction getRedundancyCache(provider) {\n\tif (!redundancyCache[provider]) {\n\t\tconst config = getAPIConfig(provider);\n\t\tif (!config) return;\n\t\tredundancyCache[provider] = {\n\t\t\tconfig,\n\t\t\tredundancy: initRedundancy(config)\n\t\t};\n\t}\n\treturn redundancyCache[provider];\n}\n/**\n* Send API query\n*/\nfunction sendAPIQuery(target, query, callback) {\n\tlet redundancy;\n\tlet send;\n\tif (typeof target === \"string\") {\n\t\tconst api = getAPIModule(target);\n\t\tif (!api) {\n\t\t\tcallback(void 0, 424);\n\t\t\treturn emptyCallback$1;\n\t\t}\n\t\tsend = api.send;\n\t\tconst cached = getRedundancyCache(target);\n\t\tif (cached) redundancy = cached.redundancy;\n\t} else {\n\t\tconst config = createAPIConfig(target);\n\t\tif (config) {\n\t\t\tredundancy = initRedundancy(config);\n\t\t\tconst api = getAPIModule(target.resources ? target.resources[0] : \"\");\n\t\t\tif (api) send = api.send;\n\t\t}\n\t}\n\tif (!redundancy || !send) {\n\t\tcallback(void 0, 424);\n\t\treturn emptyCallback$1;\n\t}\n\treturn redundancy.query(query, send, callback)().abort;\n}\n\nfunction emptyCallback() {}\n/**\n* Function called when new icons have been loaded\n*/\nfunction loadedNewIcons(storage) {\n\tif (!storage.iconsLoaderFlag) {\n\t\tstorage.iconsLoaderFlag = true;\n\t\tsetTimeout(() => {\n\t\t\tstorage.iconsLoaderFlag = false;\n\t\t\tupdateCallbacks(storage);\n\t\t});\n\t}\n}\n/**\n* Check icon names for API\n*/\nfunction checkIconNamesForAPI(icons) {\n\tconst valid = [];\n\tconst invalid = [];\n\ticons.forEach((name) => {\n\t\t(name.match(matchIconName) ? valid : invalid).push(name);\n\t});\n\treturn {\n\t\tvalid,\n\t\tinvalid\n\t};\n}\n/**\n* Parse loader response\n*/\nfunction parseLoaderResponse(storage, icons, data) {\n\tfunction checkMissing() {\n\t\tconst pending = storage.pendingIcons;\n\t\ticons.forEach((name) => {\n\t\t\tif (pending) pending.delete(name);\n\t\t\tif (!storage.icons[name]) storage.missing.add(name);\n\t\t});\n\t}\n\tif (data && typeof data === \"object\") try {\n\t\tif (!addIconSet(storage, data).length) {\n\t\t\tcheckMissing();\n\t\t\treturn;\n\t\t}\n\t} catch (err) {\n\t\tconsole.error(err);\n\t}\n\tcheckMissing();\n\tloadedNewIcons(storage);\n}\n/**\n* Handle response that can be async\n*/\nfunction parsePossiblyAsyncResponse(response, callback) {\n\tif (response instanceof Promise) response.then((data) => {\n\t\tcallback(data);\n\t}).catch(() => {\n\t\tcallback(null);\n\t});\n\telse callback(response);\n}\n/**\n* Load icons\n*/\nfunction loadNewIcons(storage, icons) {\n\tif (!storage.iconsToLoad) storage.iconsToLoad = icons;\n\telse storage.iconsToLoad = storage.iconsToLoad.concat(icons).sort();\n\tif (!storage.iconsQueueFlag) {\n\t\tstorage.iconsQueueFlag = true;\n\t\tsetTimeout(() => {\n\t\t\tstorage.iconsQueueFlag = false;\n\t\t\tconst { provider, prefix } = storage;\n\t\t\tconst icons$1 = storage.iconsToLoad;\n\t\t\tdelete storage.iconsToLoad;\n\t\t\tif (!icons$1 || !icons$1.length) return;\n\t\t\tconst customIconLoader = storage.loadIcon;\n\t\t\tif (storage.loadIcons && (icons$1.length > 1 || !customIconLoader)) {\n\t\t\t\tparsePossiblyAsyncResponse(storage.loadIcons(icons$1, prefix, provider), (data) => {\n\t\t\t\t\tparseLoaderResponse(storage, icons$1, data);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (customIconLoader) {\n\t\t\t\ticons$1.forEach((name) => {\n\t\t\t\t\tparsePossiblyAsyncResponse(customIconLoader(name, prefix, provider), (data) => {\n\t\t\t\t\t\tparseLoaderResponse(storage, [name], data ? {\n\t\t\t\t\t\t\tprefix,\n\t\t\t\t\t\t\ticons: { [name]: data }\n\t\t\t\t\t\t} : null);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { valid, invalid } = checkIconNamesForAPI(icons$1);\n\t\t\tif (invalid.length) parseLoaderResponse(storage, invalid, null);\n\t\t\tif (!valid.length) return;\n\t\t\tconst api = prefix.match(matchIconName) ? getAPIModule(provider) : null;\n\t\t\tif (!api) {\n\t\t\t\tparseLoaderResponse(storage, valid, null);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tapi.prepare(provider, prefix, valid).forEach((item) => {\n\t\t\t\tsendAPIQuery(provider, item, (data) => {\n\t\t\t\t\tparseLoaderResponse(storage, item.icons, data);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n}\n/**\n* Load icons\n*/\nconst loadIcons = (icons, callback) => {\n\tconst sortedIcons = sortIcons(listToIcons(icons, true, allowSimpleNames()));\n\tif (!sortedIcons.pending.length) {\n\t\tlet callCallback = true;\n\t\tif (callback) setTimeout(() => {\n\t\t\tif (callCallback) callback(sortedIcons.loaded, sortedIcons.missing, sortedIcons.pending, emptyCallback);\n\t\t});\n\t\treturn () => {\n\t\t\tcallCallback = false;\n\t\t};\n\t}\n\tconst newIcons = Object.create(null);\n\tconst sources = [];\n\tlet lastProvider, lastPrefix;\n\tsortedIcons.pending.forEach((icon) => {\n\t\tconst { provider, prefix } = icon;\n\t\tif (prefix === lastPrefix && provider === lastProvider) return;\n\t\tlastProvider = provider;\n\t\tlastPrefix = prefix;\n\t\tsources.push(getStorage(provider, prefix));\n\t\tconst providerNewIcons = newIcons[provider] || (newIcons[provider] = Object.create(null));\n\t\tif (!providerNewIcons[prefix]) providerNewIcons[prefix] = [];\n\t});\n\tsortedIcons.pending.forEach((icon) => {\n\t\tconst { provider, prefix, name } = icon;\n\t\tconst storage = getStorage(provider, prefix);\n\t\tconst pendingQueue = storage.pendingIcons || (storage.pendingIcons = /* @__PURE__ */ new Set());\n\t\tif (!pendingQueue.has(name)) {\n\t\t\tpendingQueue.add(name);\n\t\t\tnewIcons[provider][prefix].push(name);\n\t\t}\n\t});\n\tsources.forEach((storage) => {\n\t\tconst list = newIcons[storage.provider][storage.prefix];\n\t\tif (list.length) loadNewIcons(storage, list);\n\t});\n\treturn callback ? storeCallback(callback, sortedIcons, sources) : emptyCallback;\n};\n/**\n* Load one icon using Promise\n*/\nconst loadIcon = (icon) => {\n\treturn new Promise((fulfill, reject) => {\n\t\tconst iconObj = typeof icon === \"string\" ? stringToIcon(icon, true) : icon;\n\t\tif (!iconObj) {\n\t\t\treject(icon);\n\t\t\treturn;\n\t\t}\n\t\tloadIcons([iconObj || icon], (loaded) => {\n\t\t\tif (loaded.length && iconObj) {\n\t\t\t\tconst data = getIconData(iconObj);\n\t\t\t\tif (data) {\n\t\t\t\t\tfulfill({\n\t\t\t\t\t\t...defaultIconProps,\n\t\t\t\t\t\t...data\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\treject(icon);\n\t\t});\n\t});\n};\n\n/**\n* Set custom loader for multiple icons\n*/\nfunction setCustomIconsLoader(loader, prefix, provider) {\n\tgetStorage(provider || \"\", prefix).loadIcons = loader;\n}\n/**\n* Set custom loader for one icon\n*/\nfunction setCustomIconLoader(loader, prefix, provider) {\n\tgetStorage(provider || \"\", prefix).loadIcon = loader;\n}\n\n/**\n* Convert IconifyIconCustomisations to FullIconCustomisations, checking value types\n*/\nfunction mergeCustomisations(defaults, item) {\n\tconst result = { ...defaults };\n\tfor (const key in item) {\n\t\tconst value = item[key];\n\t\tconst valueType = typeof value;\n\t\tif (key in defaultIconSizeCustomisations) {\n\t\t\tif (value === null || value && (valueType === \"string\" || valueType === \"number\")) result[key] = value;\n\t\t} else if (valueType === typeof result[key]) result[key] = key === \"rotate\" ? value % 4 : value;\n\t}\n\treturn result;\n}\n\nconst separator = /[\\s,]+/;\n/**\n* Apply \"flip\" string to icon customisations\n*/\nfunction flipFromString(custom, flip) {\n\tflip.split(separator).forEach((str) => {\n\t\tswitch (str.trim()) {\n\t\t\tcase \"horizontal\":\n\t\t\t\tcustom.hFlip = true;\n\t\t\t\tbreak;\n\t\t\tcase \"vertical\":\n\t\t\t\tcustom.vFlip = true;\n\t\t\t\tbreak;\n\t\t}\n\t});\n}\n\n/**\n* Get rotation value\n*/\nfunction rotateFromString(value, defaultValue = 0) {\n\tconst units = value.replace(/^-?[0-9.]*/, \"\");\n\tfunction cleanup(value$1) {\n\t\twhile (value$1 < 0) value$1 += 4;\n\t\treturn value$1 % 4;\n\t}\n\tif (units === \"\") {\n\t\tconst num = parseInt(value);\n\t\treturn isNaN(num) ? 0 : cleanup(num);\n\t} else if (units !== value) {\n\t\tlet split = 0;\n\t\tswitch (units) {\n\t\t\tcase \"%\":\n\t\t\t\tsplit = 25;\n\t\t\t\tbreak;\n\t\t\tcase \"deg\": split = 90;\n\t\t}\n\t\tif (split) {\n\t\t\tlet num = parseFloat(value.slice(0, value.length - units.length));\n\t\t\tif (isNaN(num)) return 0;\n\t\t\tnum = num / split;\n\t\t\treturn num % 1 === 0 ? cleanup(num) : 0;\n\t\t}\n\t}\n\treturn defaultValue;\n}\n\n/**\n* Generate <svg>\n*/\nfunction iconToHTML(body, attributes) {\n\tlet renderAttribsHTML = body.indexOf(\"xlink:\") === -1 ? \"\" : \" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\";\n\tfor (const attr in attributes) renderAttribsHTML += \" \" + attr + \"=\\\"\" + attributes[attr] + \"\\\"\";\n\treturn \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"\" + renderAttribsHTML + \">\" + body + \"</svg>\";\n}\n\n/**\n* Encode SVG for use in url()\n*\n* Short alternative to encodeURIComponent() that encodes only stuff used in SVG, generating\n* smaller code.\n*/\nfunction encodeSVGforURL(svg) {\n\treturn svg.replace(/\"/g, \"'\").replace(/%/g, \"%25\").replace(/#/g, \"%23\").replace(/</g, \"%3C\").replace(/>/g, \"%3E\").replace(/\\s+/g, \" \");\n}\n/**\n* Generate data: URL from SVG\n*/\nfunction svgToData(svg) {\n\treturn \"data:image/svg+xml,\" + encodeSVGforURL(svg);\n}\n/**\n* Generate url() from SVG\n*/\nfunction svgToURL(svg) {\n\treturn \"url(\\\"\" + svgToData(svg) + \"\\\")\";\n}\n\nconst defaultExtendedIconCustomisations = {\n    ...defaultIconCustomisations,\n    inline: false,\n};\n\n/**\n * Default SVG attributes\n */\nconst svgDefaults = {\n    'xmlns': 'http://www.w3.org/2000/svg',\n    'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n    'aria-hidden': true,\n    'role': 'img',\n};\n/**\n * Style modes\n */\nconst commonProps = {\n    display: 'inline-block',\n};\nconst monotoneProps = {\n    'background-color': 'currentColor',\n};\nconst coloredProps = {\n    'background-color': 'transparent',\n};\n// Dynamically add common props to variables above\nconst propsToAdd = {\n    image: 'var(--svg)',\n    repeat: 'no-repeat',\n    size: '100% 100%',\n};\nconst propsToAddTo = {\n    '-webkit-mask': monotoneProps,\n    'mask': monotoneProps,\n    'background': coloredProps,\n};\nfor (const prefix in propsToAddTo) {\n    const list = propsToAddTo[prefix];\n    for (const prop in propsToAdd) {\n        list[prefix + '-' + prop] = propsToAdd[prop];\n    }\n}\n/**\n * Fix size: add 'px' to numbers\n */\nfunction fixSize(value) {\n    return value + (value.match(/^[-0-9.]+$/) ? 'px' : '');\n}\n/**\n * Generate icon from properties\n */\nfunction render(\n// Icon must be validated before calling this function\nicon, \n// Properties\nprops) {\n    const customisations = mergeCustomisations(defaultExtendedIconCustomisations, props);\n    // Check mode\n    const mode = props.mode || 'svg';\n    const componentProps = (mode === 'svg' ? { ...svgDefaults } : {});\n    if (icon.body.indexOf('xlink:') === -1) {\n        delete componentProps['xmlns:xlink'];\n    }\n    // Create style if missing\n    let style = typeof props.style === 'string' ? props.style : '';\n    // Get element properties\n    for (let key in props) {\n        const value = props[key];\n        if (value === void 0) {\n            continue;\n        }\n        switch (key) {\n            // Properties to ignore\n            case 'icon':\n            case 'style':\n            case 'onLoad':\n            case 'mode':\n            case 'ssr':\n                break;\n            // Boolean attributes\n            case 'inline':\n            case 'hFlip':\n            case 'vFlip':\n                customisations[key] =\n                    value === true || value === 'true' || value === 1;\n                break;\n            // Flip as string: 'horizontal,vertical'\n            case 'flip':\n                if (typeof value === 'string') {\n                    flipFromString(customisations, value);\n                }\n                break;\n            // Color: copy to style, add extra ';' in case style is missing it\n            case 'color':\n                style =\n                    style +\n                        (style.length > 0 && style.trim().slice(-1) !== ';'\n                            ? ';'\n                            : '') +\n                        'color: ' +\n                        value +\n                        '; ';\n                break;\n            // Rotation as string\n            case 'rotate':\n                if (typeof value === 'string') {\n                    customisations[key] = rotateFromString(value);\n                }\n                else if (typeof value === 'number') {\n                    customisations[key] = value;\n                }\n                break;\n            // Remove aria-hidden\n            case 'ariaHidden':\n            case 'aria-hidden':\n                if (value !== true && value !== 'true') {\n                    delete componentProps['aria-hidden'];\n                }\n                break;\n            default:\n                if (key.slice(0, 3) === 'on:') {\n                    // Svelte event\n                    break;\n                }\n                // Copy missing property if it does not exist in customisations\n                if (defaultExtendedIconCustomisations[key] === void 0) {\n                    componentProps[key] = value;\n                }\n        }\n    }\n    // Generate icon\n    const item = iconToSVG(icon, customisations);\n    const renderAttribs = item.attributes;\n    // Inline display\n    if (customisations.inline) {\n        // Style overrides it\n        style = 'vertical-align: -0.125em; ' + style;\n    }\n    if (mode === 'svg') {\n        // Add icon stuff\n        Object.assign(componentProps, renderAttribs);\n        // Style\n        if (style !== '') {\n            componentProps.style = style;\n        }\n        // Generate HTML\n        return {\n            svg: true,\n            attributes: componentProps,\n            body: replaceIDs(item.body),\n        };\n    }\n    // Render <span> with style\n    const { body, width, height } = icon;\n    const useMask = mode === 'mask' ||\n        (mode === 'bg' ? false : body.indexOf('currentColor') !== -1);\n    // Generate SVG\n    const html = iconToHTML(body, {\n        ...renderAttribs,\n        width: width + '',\n        height: height + '',\n    });\n    // Generate style\n    const url = svgToURL(html);\n    const styles = {\n        '--svg': url,\n    };\n    const size = (prop) => {\n        const value = renderAttribs[prop];\n        if (value) {\n            styles[prop] = fixSize(value);\n        }\n    };\n    size('width');\n    size('height');\n    Object.assign(styles, commonProps, useMask ? monotoneProps : coloredProps);\n    let customStyle = '';\n    for (const key in styles) {\n        customStyle += key + ': ' + styles[key] + ';';\n    }\n    componentProps.style = customStyle + style;\n    return {\n        svg: false,\n        attributes: componentProps,\n    };\n}\n\n/**\n * Initialise stuff\n */\n// Enable short names\nallowSimpleNames(true);\n// Set API module\nsetAPIModule('', fetchAPIModule);\n/**\n * Browser stuff\n */\nif (typeof document !== 'undefined' && typeof window !== 'undefined') {\n    const _window = window;\n    // Load icons from global \"IconifyPreload\"\n    if (_window.IconifyPreload !== void 0) {\n        const preload = _window.IconifyPreload;\n        const err = 'Invalid IconifyPreload syntax.';\n        if (typeof preload === 'object' && preload !== null) {\n            (preload instanceof Array ? preload : [preload]).forEach((item) => {\n                try {\n                    if (\n                    // Check if item is an object and not null/array\n                    typeof item !== 'object' ||\n                        item === null ||\n                        item instanceof Array ||\n                        // Check for 'icons' and 'prefix'\n                        typeof item.icons !== 'object' ||\n                        typeof item.prefix !== 'string' ||\n                        // Add icon set\n                        !addCollection(item)) {\n                        console.error(err);\n                    }\n                }\n                catch (e) {\n                    console.error(err);\n                }\n            });\n        }\n    }\n    // Set API from global \"IconifyProviders\"\n    if (_window.IconifyProviders !== void 0) {\n        const providers = _window.IconifyProviders;\n        if (typeof providers === 'object' && providers !== null) {\n            for (let key in providers) {\n                const err = 'IconifyProviders[' + key + '] is invalid.';\n                try {\n                    const value = providers[key];\n                    if (typeof value !== 'object' ||\n                        !value ||\n                        value.resources === void 0) {\n                        continue;\n                    }\n                    if (!addAPIProvider(key, value)) {\n                        console.error(err);\n                    }\n                }\n                catch (e) {\n                    console.error(err);\n                }\n            }\n        }\n    }\n}\n/**\n * Check for SSR\n */\nfunction isSSR() {\n    try {\n        return typeof window !== 'object';\n    }\n    catch (err) {\n        return true;\n    }\n}\n/**\n * Check if component needs to be updated\n */\nfunction checkIconState(icon, state, callback, onload) {\n    // Abort loading icon\n    function abortLoading() {\n        if (state.loading) {\n            state.loading.abort();\n            state.loading = null;\n        }\n    }\n    // Icon is an object\n    if (typeof icon === 'object' &&\n        icon !== null &&\n        typeof icon.body === 'string') {\n        // Stop loading\n        state.name = '';\n        abortLoading();\n        return { data: { ...defaultIconProps, ...icon } };\n    }\n    // Invalid icon?\n    let iconName;\n    if (typeof icon !== 'string' ||\n        (iconName = stringToIcon(icon, false, true)) === null) {\n        abortLoading();\n        return null;\n    }\n    // Load icon\n    const data = getIconData(iconName);\n    if (!data) {\n        // Icon data is not available: load if not loading already\n        if (!isSSR() && (!state.loading || state.loading.name !== icon)) {\n            // New icon to load\n            abortLoading();\n            state.name = '';\n            state.loading = {\n                name: icon,\n                abort: loadIcons([iconName], callback),\n            };\n        }\n        return null;\n    }\n    // Icon data is available\n    abortLoading();\n    if (state.name !== icon) {\n        state.name = icon;\n        if (onload && !state.destroyed) {\n            setTimeout(() => {\n                onload(icon);\n            });\n        }\n    }\n    // Add classes\n    const classes = ['iconify'];\n    if (iconName.prefix !== '') {\n        classes.push('iconify--' + iconName.prefix);\n    }\n    if (iconName.provider !== '') {\n        classes.push('iconify--' + iconName.provider);\n    }\n    return { data, classes };\n}\n/**\n * Generate icon\n */\nfunction generateIcon(icon, props) {\n    return icon\n        ? render({\n            ...defaultIconProps,\n            ...icon,\n        }, props)\n        : null;\n}\n/**\n * Internal API\n */\nconst _api = {\n    getAPIConfig,\n    setAPIModule,\n    sendAPIQuery,\n    setFetch,\n    getFetch,\n    listAPIProviders,\n};\n\nexport { _api, addAPIProvider, addCollection, addIcon, iconToSVG as buildIcon, calculateSize, checkIconState, clearIDCache, generateIcon, getIcon, iconLoaded, listIcons, loadIcon, loadIcons, replaceIDs, setCustomIconLoader, setCustomIconsLoader };\n","<script module>\n\t// Export stuff.\n\t// Important: duplicate of iconify.ts. When changing exports, they must be changed in both files.\n\timport { \n\t\ticonLoaded,\n\t\tgetIcon,\n\t\tlistIcons,\n\t\taddIcon,\n\t\taddCollection,\n\t\tcalculateSize,\n\t\treplaceIDs,\n\t\tclearIDCache,\n\t\tbuildIcon,\n\t\tloadIcons,\n\t\tloadIcon,\n\t\tsetCustomIconLoader,\n\t\tsetCustomIconsLoader,\n\t\taddAPIProvider,\n\t\t_api\n\t} from './functions';\n\t\n\texport { \n\t\ticonLoaded,\n\t\tgetIcon,\n\t\tlistIcons,\n\t\taddIcon,\n\t\taddCollection,\n\t\tcalculateSize,\n\t\treplaceIDs,\n\t\tclearIDCache,\n\t\tbuildIcon,\n\t\tloadIcons,\n\t\tloadIcon,\n\t\tsetCustomIconLoader,\n\t\tsetCustomIconsLoader,\n\t\taddAPIProvider,\n\t\t_api\n\t}\n\t\n</script>\n<script>\n\timport { onDestroy } from 'svelte';\n\timport { checkIconState, generateIcon } from './functions';\n\n\t// State\n\tconst iconState = {\n\t\t// Last icon name\n\t\tname: '',\n\n\t\t// Loading status\n\t\tloading: null,\n\n\t\t// Destroyed status\n\t\tdestroyed: false,\n\t};\n\n\t// Props\n\tconst props = $props();\n\n\t// Callback counter\n\tlet counter = $state(0);\n\n\t// Get icon data\n\tlet iconData = $derived.by(() => {\n\t\tcounter;\n\t\treturn checkIconState(props.icon, iconState, loaded, props.onload);\n\t});\n\n\t// Generate data to render\n\tlet data = $derived.by(() => {\n\t\tconst generatedData = iconData ? generateIcon(iconData.data, props) : null;\n\t\tif (generatedData && iconData.classes) {\n\t\t\t// Add classes\n\t\t\tgeneratedData.attributes['class'] = (typeof props['class'] === 'string' ? props['class'] + ' ' : '') + iconData.classes.join(' ');\n\t\t}\n\t\treturn generatedData;\n\t});\n\n\t// Increase counter when loaded to force re-calculation of data\n\tfunction loaded() {\n\t\tcounter ++;\n\t}\n\n\t// Abort loading when component is destroyed\n\tonDestroy(() => {\n\t\ticonState.destroyed = true;\n\t\tif (iconState.loading) {\n\t\t\ticonState.loading.abort();\n\t\t\ticonState.loading = null;\n\t\t}\n\t})\n</script>\n\n{#if data}\n\t{#if data.svg}\n\t\t<svg {...data.attributes}>\n\t\t\t{@html data.body}\n\t\t</svg>\n\t{:else}\n\t\t<span {...data.attributes}></span>\n\t{/if}\n{/if}","<script lang=\"ts\">\n\timport Icon from '@iconify/svelte';\n\tlet {\n\t\ttitle,\n\t\tdescription,\n\t\ticonName\n\t}: {\n\t\ttitle: string;\n\t\tdescription: string;\n\t\ticonName?: string;\n\t} = $props();\n</script>\n\n<div class=\"flowdrop-canvas-banner\">\n\t<div class=\"flowdrop-card\">\n\t\t<div class=\"flowdrop-card__body flowdrop-text--center\">\n\t\t\t<div class=\"flowdrop-canvas-banner__icon\">\n\t\t\t\t{#if iconName}\n\t\t\t\t\t<Icon icon={iconName} class=\"flowdrop-canvas-banner__icon-svg\" />\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t\t<h3 class=\"flowdrop-canvas-banner__title\">{title}</h3>\n\t\t\t<p class=\"flowdrop-canvas-banner__description\">{description}</p>\n\t\t</div>\n\t</div>\n</div>\n\n<style>\n\t.flowdrop-canvas-banner {\n\t\tposition: absolute;\n\t\tinset: 0;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpointer-events: none;\n\t}\n\n\t.flowdrop-canvas-banner__icon {\n\t\tfont-size: 3.75rem;\n\t\tmargin-bottom: 1rem;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-canvas-banner__title {\n\t\tfont-size: 1.125rem;\n\t\tfont-weight: 700;\n\t\tmargin-bottom: 0.5rem;\n\t\tcolor: #111827;\n\t}\n\n\t.flowdrop-canvas-banner__description {\n\t\tfont-size: 0.875rem;\n\t\tcolor: #6b7280;\n\t}\n</style>\n","/**\n * Connection validation utilities for FlowDrop\n */\n/**\n * Configurable port compatibility checker\n */\nexport class PortCompatibilityChecker {\n    portConfig;\n    compatibilityMap;\n    constructor(portConfig) {\n        this.portConfig = portConfig;\n        this.compatibilityMap = new Map();\n        this.buildCompatibilityMap();\n    }\n    /**\n     * Build the compatibility map from configuration rules\n     */\n    buildCompatibilityMap() {\n        this.compatibilityMap.clear();\n        // First, add direct type matches (every type is compatible with itself)\n        for (const dataType of this.portConfig.dataTypes) {\n            if (!this.compatibilityMap.has(dataType.id)) {\n                this.compatibilityMap.set(dataType.id, new Set());\n            }\n            this.compatibilityMap.get(dataType.id).add(dataType.id);\n        }\n        // Then add configured compatibility rules\n        for (const rule of this.portConfig.compatibilityRules) {\n            if (!this.compatibilityMap.has(rule.from)) {\n                this.compatibilityMap.set(rule.from, new Set());\n            }\n            this.compatibilityMap.get(rule.from).add(rule.to);\n        }\n        // Add alias support\n        for (const dataType of this.portConfig.dataTypes) {\n            if (dataType.aliases) {\n                for (const alias of dataType.aliases) {\n                    // Make aliases point to the main type's compatibility set\n                    const mainCompatibility = this.compatibilityMap.get(dataType.id);\n                    if (mainCompatibility) {\n                        this.compatibilityMap.set(alias, new Set(mainCompatibility));\n                        // Also make the main type compatible with the alias\n                        mainCompatibility.add(alias);\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Check if two data types are compatible for connection\n     */\n    areDataTypesCompatible(outputType, inputType) {\n        const compatibleTypes = this.compatibilityMap.get(outputType);\n        return compatibleTypes ? compatibleTypes.has(inputType) : false;\n    }\n    /**\n     * Get all compatible target types for a source type\n     */\n    getCompatibleTypes(sourceType) {\n        const compatibleTypes = this.compatibilityMap.get(sourceType);\n        return compatibleTypes ? Array.from(compatibleTypes) : [];\n    }\n    /**\n     * Get data type configuration by ID\n     */\n    getDataTypeConfig(dataTypeId) {\n        return this.portConfig.dataTypes.find((dt) => dt.id === dataTypeId || dt.aliases?.includes(dataTypeId));\n    }\n    /**\n     * Get all enabled data types\n     */\n    getEnabledDataTypes() {\n        return this.portConfig.dataTypes.filter((dt) => dt.enabled !== false);\n    }\n}\n// Global instance - will be initialized with configuration\nlet globalCompatibilityChecker = null;\n/**\n * Initialize the global port compatibility checker\n */\nexport function initializePortCompatibility(portConfig) {\n    globalCompatibilityChecker = new PortCompatibilityChecker(portConfig);\n}\n/**\n * Get the global port compatibility checker\n */\nexport function getPortCompatibilityChecker() {\n    if (!globalCompatibilityChecker) {\n        throw new Error('Port compatibility checker not initialized. Call initializePortCompatibility() first.');\n    }\n    return globalCompatibilityChecker;\n}\n/**\n * Check if two data types are compatible for connection (legacy function)\n * @deprecated Use PortCompatibilityChecker.areDataTypesCompatible() instead\n */\nexport function areDataTypesCompatible(outputType, inputType) {\n    if (!globalCompatibilityChecker) {\n        // Fallback to basic compatibility for backward compatibility\n        return outputType === inputType;\n    }\n    return globalCompatibilityChecker.areDataTypesCompatible(outputType, inputType);\n}\n/**\n * Get all possible connections from a source node to target nodes\n */\nexport function getPossibleConnections(sourceNode, targetNodes, nodeTypes) {\n    const sourceMetadata = nodeTypes.find((nt) => nt.id === sourceNode.data.metadata.id);\n    if (!sourceMetadata)\n        return [];\n    const possibleConnections = [];\n    // Get all output ports from source node\n    const sourceOutputs = sourceMetadata.outputs;\n    // Check each target node\n    for (const targetNode of targetNodes) {\n        if (targetNode.id === sourceNode.id)\n            continue; // Skip self-connection\n        const targetMetadata = nodeTypes.find((nt) => nt.id === targetNode.data.metadata.id);\n        if (!targetMetadata)\n            continue;\n        // Get all input ports from target node\n        const targetInputs = targetMetadata.inputs;\n        // Check each output-input combination\n        for (const sourcePort of sourceOutputs) {\n            for (const targetPort of targetInputs) {\n                const compatible = areDataTypesCompatible(sourcePort.dataType, targetPort.dataType);\n                possibleConnections.push({\n                    sourceNodeId: sourceNode.id,\n                    sourcePortId: sourcePort.id,\n                    sourcePort,\n                    targetNodeId: targetNode.id,\n                    targetPortId: targetPort.id,\n                    targetPort,\n                    compatible\n                });\n            }\n        }\n    }\n    return possibleConnections;\n}\n/**\n * Validate if a specific connection is valid\n */\nexport function validateConnection(sourceNodeId, sourcePortId, targetNodeId, targetPortId, nodes, nodeTypes) {\n    // Check if nodes exist\n    const sourceNode = nodes.find((n) => n.id === sourceNodeId);\n    const targetNode = nodes.find((n) => n.id === targetNodeId);\n    if (!sourceNode) {\n        return { valid: false, error: 'Source node not found' };\n    }\n    if (!targetNode) {\n        return { valid: false, error: 'Target node not found' };\n    }\n    // Check for self-connection\n    if (sourceNodeId === targetNodeId) {\n        return { valid: false, error: 'Cannot connect node to itself' };\n    }\n    // Get node metadata\n    const sourceMetadata = nodeTypes.find((nt) => nt.id === sourceNode.data.metadata.id);\n    const targetMetadata = nodeTypes.find((nt) => nt.id === targetNode.data.metadata.id);\n    if (!sourceMetadata || !targetMetadata) {\n        return { valid: false, error: 'Node metadata not found' };\n    }\n    // Find ports\n    const sourcePort = sourceMetadata.outputs.find((p) => p.id === sourcePortId);\n    const targetPort = targetMetadata.inputs.find((p) => p.id === targetPortId);\n    if (!sourcePort) {\n        return { valid: false, error: 'Source port not found' };\n    }\n    if (!targetPort) {\n        return { valid: false, error: 'Target port not found' };\n    }\n    // Check data type compatibility\n    if (!areDataTypesCompatible(sourcePort.dataType, targetPort.dataType)) {\n        return {\n            valid: false,\n            error: `Incompatible data types: ${sourcePort.dataType} cannot connect to ${targetPort.dataType}`\n        };\n    }\n    return { valid: true };\n}\n/**\n * Get connection suggestions for a node\n */\nexport function getConnectionSuggestions(nodeId, nodes, nodeTypes) {\n    const node = nodes.find((n) => n.id === nodeId);\n    if (!node)\n        return [];\n    const metadata = nodeTypes.find((nt) => nt.id === node.data.metadata.id);\n    if (!metadata)\n        return [];\n    const suggestions = [];\n    // Get all other nodes\n    const otherNodes = nodes.filter((n) => n.id !== nodeId);\n    for (const otherNode of otherNodes) {\n        const otherMetadata = nodeTypes.find((nt) => nt.id === otherNode.data.metadata.id);\n        if (!otherMetadata)\n            continue;\n        // Check outputs from other nodes to inputs of current node\n        for (const output of otherMetadata.outputs) {\n            for (const input of metadata.inputs) {\n                const compatible = areDataTypesCompatible(output.dataType, input.dataType);\n                suggestions.push({\n                    nodeId: otherNode.id,\n                    nodeName: otherNode.data.label,\n                    portId: output.id,\n                    portName: output.name,\n                    portType: 'output',\n                    dataType: output.dataType,\n                    compatible\n                });\n            }\n        }\n        // Check outputs from current node to inputs of other nodes\n        for (const output of metadata.outputs) {\n            for (const input of otherMetadata.inputs) {\n                const compatible = areDataTypesCompatible(output.dataType, input.dataType);\n                suggestions.push({\n                    nodeId: otherNode.id,\n                    nodeName: otherNode.data.label,\n                    portId: input.id,\n                    portName: input.name,\n                    portType: 'input',\n                    dataType: input.dataType,\n                    compatible\n                });\n            }\n        }\n    }\n    return suggestions;\n}\n/**\n * Check if a workflow has any cycles (prevent infinite loops)\n */\nexport function hasCycles(nodes, edges) {\n    const visited = new Set();\n    const recursionStack = new Set();\n    function hasCycleUtil(nodeId) {\n        if (recursionStack.has(nodeId))\n            return true;\n        if (visited.has(nodeId))\n            return false;\n        visited.add(nodeId);\n        recursionStack.add(nodeId);\n        // Get all outgoing edges from this node\n        const outgoingEdges = edges.filter((e) => e.source === nodeId);\n        for (const edge of outgoingEdges) {\n            if (hasCycleUtil(edge.target))\n                return true;\n        }\n        recursionStack.delete(nodeId);\n        return false;\n    }\n    // Check each node\n    for (const node of nodes) {\n        if (!visited.has(node.id)) {\n            if (hasCycleUtil(node.id))\n                return true;\n        }\n    }\n    return false;\n}\n/**\n * Get the execution order for a workflow (topological sort)\n */\nexport function getExecutionOrder(nodes, edges) {\n    const inDegree = new Map();\n    const graph = new Map();\n    // Initialize\n    for (const node of nodes) {\n        inDegree.set(node.id, 0);\n        graph.set(node.id, []);\n    }\n    // Build graph and calculate in-degrees\n    for (const edge of edges) {\n        const current = inDegree.get(edge.target) || 0;\n        inDegree.set(edge.target, current + 1);\n        const neighbors = graph.get(edge.source) || [];\n        neighbors.push(edge.target);\n        graph.set(edge.source, neighbors);\n    }\n    // Topological sort\n    const queue = [];\n    const result = [];\n    // Add nodes with no incoming edges\n    for (const [nodeId, degree] of inDegree) {\n        if (degree === 0) {\n            queue.push(nodeId);\n        }\n    }\n    while (queue.length > 0) {\n        const nodeId = queue.shift();\n        result.push(nodeId);\n        const neighbors = graph.get(nodeId) || [];\n        for (const neighbor of neighbors) {\n            const degree = inDegree.get(neighbor) - 1;\n            inDegree.set(neighbor, degree);\n            if (degree === 0) {\n                queue.push(neighbor);\n            }\n        }\n    }\n    return result;\n}\n","/**\n * Centralized color management for FlowDrop\n * Ensures consistent category colors across sidebar and canvas\n * Uses BEM syntax for CSS classes\n */\nimport { getPortCompatibilityChecker } from './connections.js';\n/**\n * Category color mapping to reference tokens (CSS variables)\n */\nexport const CATEGORY_COLOR_TOKENS = {\n    inputs: 'var(--color-ref-emerald-500)',\n    outputs: 'var(--color-ref-blue-600)',\n    prompts: 'var(--color-ref-amber-500)',\n    models: 'var(--color-ref-indigo-500)',\n    processing: 'var(--color-ref-teal-500)',\n    logic: 'var(--color-ref-purple-600)',\n    data: 'var(--color-ref-orange-500)',\n    helpers: 'var(--color-ref-slate-500)',\n    tools: 'var(--color-ref-amber-500)',\n    'vector stores': 'var(--color-ref-emerald-500)',\n    embeddings: 'var(--color-ref-indigo-500)',\n    memories: 'var(--color-ref-blue-600)',\n    agents: 'var(--color-ref-teal-500)',\n    ai: 'var(--color-ref-purple-500)',\n    bundles: 'var(--color-ref-slate-500)'\n};\n/**\n * Data type color mapping to reference tokens (CSS variables)\n * @deprecated Use getDataTypeColorToken() with port configuration instead\n */\nexport const DATA_TYPE_COLOR_TOKENS = {\n    string: 'var(--color-ref-emerald-500)',\n    text: 'var(--color-ref-emerald-500)',\n    number: 'var(--color-ref-blue-600)',\n    integer: 'var(--color-ref-blue-600)',\n    float: 'var(--color-ref-blue-600)',\n    boolean: 'var(--color-ref-purple-600)',\n    array: 'var(--color-ref-amber-500)',\n    list: 'var(--color-ref-amber-500)',\n    object: 'var(--color-ref-orange-500)',\n    json: 'var(--color-ref-orange-500)',\n    mixed: 'var(--color-ref-orange-500)',\n    file: 'var(--color-ref-red-500)',\n    document: 'var(--color-ref-red-500)',\n    image: 'var(--color-ref-pink-500)',\n    picture: 'var(--color-ref-pink-500)',\n    audio: 'var(--color-ref-indigo-500)',\n    sound: 'var(--color-ref-indigo-500)',\n    video: 'var(--color-ref-teal-500)',\n    movie: 'var(--color-ref-teal-500)',\n    url: 'var(--color-ref-cyan-500)',\n    email: 'var(--color-ref-cyan-500)',\n    date: 'var(--color-ref-lime-500)',\n    datetime: 'var(--color-ref-lime-500)',\n    time: 'var(--color-ref-lime-500)',\n    tool: 'var(--color-ref-amber-500)',\n    trigger: 'var(--color-ref-gray-950)',\n    branch: 'var(--color-ref-purple-500)'\n};\n/**\n * Get the reference color token for a category\n */\nexport function getCategoryColorToken(category) {\n    return CATEGORY_COLOR_TOKENS[category] || 'var(--color-ref-slate-500)';\n}\n/**\n * Get the reference color token for a data type (configurable version)\n */\nexport function getDataTypeColorToken(dataType) {\n    try {\n        const checker = getPortCompatibilityChecker();\n        const config = checker.getDataTypeConfig(dataType);\n        if (config?.color) {\n            return config.color;\n        }\n    }\n    catch {\n        // Fallback to static color mapping if port checker not initialized\n        // console.warn(\"Port compatibility checker not initialized, using fallback colors\");\n    }\n    return DATA_TYPE_COLOR_TOKENS[dataType.toLowerCase()] || 'var(--color-ref-slate-500)';\n}\n/**\n * Get data type configuration from port config\n */\nexport function getDataTypeConfig(dataType) {\n    try {\n        const checker = getPortCompatibilityChecker();\n        return checker.getDataTypeConfig(dataType);\n    }\n    catch (error) {\n        console.warn('Port compatibility checker not initialized:', error);\n        return undefined;\n    }\n}\n/**\n * Get all available data types from port configuration\n */\nexport function getAvailableDataTypes() {\n    try {\n        const checker = getPortCompatibilityChecker();\n        return checker.getEnabledDataTypes();\n    }\n    catch (error) {\n        console.warn('Port compatibility checker not initialized:', error);\n        return [];\n    }\n}\n/**\n * Default colors for fallback cases\n */\nexport const DEFAULT_COLORS = {\n    background: 'flowdrop-color--base-light',\n    accent: 'flowdrop-color--neutral',\n    text: 'flowdrop-color--base-text',\n    border: 'flowdrop-color--base-border'\n};\n/**\n * Get category colors\n * @param category - The node category\n * @returns The color configuration for the category\n */\nexport function getCategoryColors(category) {\n    return CATEGORY_COLOR_TOKENS[category] || 'var(--color-ref-slate-500)';\n}\n/**\n * Get category background color\n * @param category - The node category\n * @returns The background color class\n */\nexport function getCategoryBackground(category) {\n    return getCategoryColors(category);\n}\n/**\n * Get category accent color\n * @param category - The node category\n * @returns The accent color class\n */\nexport function getCategoryAccent(category) {\n    return getCategoryColors(category);\n}\n/**\n * Get category text color\n * @param category - The node category\n * @returns The text color class\n */\nexport function getCategoryText(category) {\n    return getCategoryColors(category);\n}\n/**\n * Get category border color\n * @param category - The node category\n * @returns The border color class\n */\nexport function getCategoryBorder(category) {\n    return getCategoryColors(category);\n}\n/**\n * Get node colors based on category and state\n * @param category - The node category\n * @param isError - Whether the node is in error state\n * @param isProcessing - Whether the node is processing\n * @param isSelected - Whether the node is selected\n * @returns The color configuration object\n */\nexport function getNodeColors(category, isError = false, isProcessing = false, isSelected = false) {\n    const baseColor = getCategoryColors(category);\n    if (isError) {\n        return {\n            background: 'var(--color-ref-red-50)',\n            accent: 'var(--color-ref-red-500)',\n            text: 'var(--color-ref-red-900)',\n            border: 'var(--color-ref-red-200)'\n        };\n    }\n    if (isProcessing) {\n        return {\n            background: 'var(--color-ref-blue-50)',\n            accent: 'var(--color-ref-blue-500)',\n            text: 'var(--color-ref-blue-900)',\n            border: 'var(--color-ref-blue-200)'\n        };\n    }\n    if (isSelected) {\n        return {\n            background: 'var(--color-ref-indigo-50)',\n            accent: 'var(--color-ref-indigo-500)',\n            text: 'var(--color-ref-indigo-900)',\n            border: 'var(--color-ref-indigo-200)'\n        };\n    }\n    return {\n        background: baseColor,\n        accent: baseColor,\n        text: 'var(--color-ref-slate-900)',\n        border: baseColor\n    };\n}\n/**\n * Get node background color\n * @param category - The node category\n * @param isError - Whether the node is in error state\n * @param isProcessing - Whether the node is processing\n * @param isSelected - Whether the node is selected\n * @returns The background color\n */\nexport function getNodeBackground(category, isError = false, isProcessing = false, isSelected = false) {\n    return getNodeColors(category, isError, isProcessing, isSelected).background;\n}\n/**\n * Get node accent color\n * @param category - The node category\n * @param isError - Whether the node is in error state\n * @param isProcessing - Whether the node is processing\n * @param isSelected - Whether the node is selected\n * @returns The accent color\n */\nexport function getNodeAccent(category, isError = false, isProcessing = false, isSelected = false) {\n    return getNodeColors(category, isError, isProcessing, isSelected).accent;\n}\n/**\n * Get node text color\n * @param category - The node category\n * @param isError - Whether the node is in error state\n * @param isProcessing - Whether the node is processing\n * @param isSelected - Whether the node is selected\n * @returns The text color\n */\nexport function getNodeText(category, isError = false, isProcessing = false, isSelected = false) {\n    return getNodeColors(category, isError, isProcessing, isSelected).text;\n}\n/**\n * Get node border color\n * @param category - The node category\n * @param isError - Whether the node is in error state\n * @param isProcessing - Whether the node is processing\n * @param isSelected - Whether the node is selected\n * @returns The border color\n */\nexport function getNodeBorder(category, isError = false, isProcessing = false, isSelected = false) {\n    return getNodeColors(category, isError, isProcessing, isSelected).border;\n}\n/**\n * Get data type color\n * @param dataType - The data type\n * @returns The color for the data type\n */\nexport function getDataTypeColor(dataType) {\n    return getDataTypeColorToken(dataType);\n}\n/**\n * Parse typed array notation and get display information\n * @param dataType - The data type (e.g., \"string[]\", \"number\", \"object[]\")\n * @returns Object with display information\n */\nexport function parseDataTypeDisplay(dataType) {\n    // Check if it's a typed array (ends with [])\n    const isArray = dataType.endsWith('[]');\n    if (isArray) {\n        const elementType = dataType.slice(0, -2); // Remove []\n        const config = getDataTypeConfig(dataType);\n        return {\n            baseType: dataType,\n            isArray: true,\n            displayName: config?.name || `${elementType}[]`,\n            elementType: elementType\n        };\n    }\n    else {\n        const config = getDataTypeConfig(dataType);\n        return {\n            baseType: dataType,\n            isArray: false,\n            displayName: config?.name || dataType\n        };\n    }\n}\n/**\n * Get formatted display text for a data type\n * @param dataType - The data type\n * @returns Formatted display text\n */\nexport function getDataTypeDisplayText(dataType) {\n    const parsed = parseDataTypeDisplay(dataType);\n    return parsed.displayName;\n}\n/**\n * Check if a data type represents an array\n * @param dataType - The data type\n * @returns True if it's an array type\n */\nexport function isArrayDataType(dataType) {\n    return dataType.endsWith('[]') || dataType === 'array' || dataType === 'list';\n}\n/**\n * Get the element type from an array data type\n * @param arrayDataType - The array data type (e.g., \"string[]\")\n * @returns The element type (e.g., \"string\") or null if not an array\n */\nexport function getArrayElementType(arrayDataType) {\n    if (arrayDataType.endsWith('[]')) {\n        return arrayDataType.slice(0, -2);\n    }\n    return null;\n}\n","<script lang=\"ts\">\n\timport { getDataTypeColor } from '../utils/colors';\n\timport { useConnection } from '@xyflow/svelte';\n\n\tconst connection = useConnection();\n\n\tlet path: string | null = $derived.by(() => {\n\t\tif (connection.current.inProgress) {\n\t\t\tconst { from, to } = connection.current;\n\t\t\treturn `M${from.x},${from.y} C ${from.x} ${to.y} ${from.x} ${to.y} ${to.x},${to.y}`;\n\t\t}\n\t\treturn null;\n\t});\n</script>\n\n{#if connection.current.inProgress}\n\t<path\n\t\tfill=\"none\"\n\t\tstroke-width={1.5}\n\t\tclass=\"animated\"\n\t\tstroke={getDataTypeColor(connection.current.fromHandle.id)}\n\t\td={path}\n\t/>\n\t<circle\n\t\tcx={connection.current.to.x}\n\t\tcy={connection.current.to.y}\n\t\tfill=\"#fff\"\n\t\tr={3}\n\t\tstroke={getDataTypeColor(connection.current.fromHandle.id)}\n\t\tstroke-width={1.5}\n\t/>\n{/if}\n","import { useStore } from '../store';\n/**\n * Hook for receiving the current connection.\n *\n * @public\n * @returns Current connection as a signal\n */\nexport function useConnection() {\n    const { connection } = $derived(useStore());\n    return {\n        get current() {\n            return connection;\n        }\n    };\n}\n","/**\n * Workflow Store for FlowDrop\n *\n * Provides global state management for workflows with dirty state tracking.\n *\n * @module stores/workflowStore\n */\nimport { writable, derived, get } from \"svelte/store\";\n// =========================================================================\n// Core Workflow Store\n// =========================================================================\n/** Global workflow state */\nexport const workflowStore = writable(null);\n// =========================================================================\n// Dirty State Tracking\n// =========================================================================\n/**\n * Store for tracking if there are unsaved changes\n *\n * This is set to true whenever the workflow changes after initialization.\n * It can be reset to false by calling markAsSaved().\n */\nexport const isDirtyStore = writable(false);\n/**\n * Snapshot of the workflow when it was last saved\n *\n * Used to compare current state with saved state.\n */\nlet savedSnapshot = null;\n/**\n * Callback for dirty state changes\n *\n * Set by the App component to notify parent application.\n */\nlet onDirtyStateChangeCallback = null;\n/**\n * Callback for workflow changes\n *\n * Set by the App component to notify parent application.\n */\nlet onWorkflowChangeCallback = null;\n/**\n * Set the dirty state change callback\n *\n * @param callback - Function to call when dirty state changes\n */\nexport function setOnDirtyStateChange(callback) {\n    onDirtyStateChangeCallback = callback;\n}\n/**\n * Set the workflow change callback\n *\n * @param callback - Function to call when workflow changes\n */\nexport function setOnWorkflowChange(callback) {\n    onWorkflowChangeCallback = callback;\n}\n/**\n * Create a snapshot of the workflow for comparison\n *\n * @param workflow - The workflow to snapshot\n * @returns A JSON string representation for comparison\n */\nfunction createSnapshot(workflow) {\n    if (!workflow)\n        return null;\n    // Only include the parts that matter for \"dirty\" detection\n    const toSnapshot = {\n        name: workflow.name,\n        description: workflow.description,\n        nodes: workflow.nodes.map((n) => ({\n            id: n.id,\n            position: n.position,\n            data: {\n                label: n.data.label,\n                config: n.data.config\n            }\n        })),\n        edges: workflow.edges.map((e) => ({\n            id: e.id,\n            source: e.source,\n            target: e.target,\n            sourceHandle: e.sourceHandle,\n            targetHandle: e.targetHandle\n        }))\n    };\n    return JSON.stringify(toSnapshot);\n}\n/**\n * Update dirty state based on current workflow\n *\n * Compares current workflow with saved snapshot.\n */\nfunction updateDirtyState() {\n    const currentWorkflow = get(workflowStore);\n    const currentSnapshot = createSnapshot(currentWorkflow);\n    const isDirty = currentSnapshot !== savedSnapshot;\n    const previousDirty = get(isDirtyStore);\n    if (isDirty !== previousDirty) {\n        isDirtyStore.set(isDirty);\n        if (onDirtyStateChangeCallback) {\n            onDirtyStateChangeCallback(isDirty);\n        }\n    }\n}\n/**\n * Mark the workflow change and update dirty state\n *\n * @param changeType - The type of change that occurred\n */\nfunction notifyWorkflowChange(changeType) {\n    const workflow = get(workflowStore);\n    if (workflow && onWorkflowChangeCallback) {\n        onWorkflowChangeCallback(workflow, changeType);\n    }\n    updateDirtyState();\n}\n/**\n * Mark the current workflow state as saved\n *\n * Clears the dirty state by updating the saved snapshot.\n */\nexport function markAsSaved() {\n    const currentWorkflow = get(workflowStore);\n    savedSnapshot = createSnapshot(currentWorkflow);\n    isDirtyStore.set(false);\n    if (onDirtyStateChangeCallback) {\n        onDirtyStateChangeCallback(false);\n    }\n}\n/**\n * Check if there are unsaved changes\n *\n * @returns true if there are unsaved changes\n */\nexport function isDirty() {\n    return get(isDirtyStore);\n}\n/**\n * Get the current workflow\n *\n * @returns The current workflow or null\n */\nexport function getWorkflow() {\n    return get(workflowStore);\n}\n// =========================================================================\n// Derived Stores\n// =========================================================================\n/** Derived store for workflow ID */\nexport const workflowId = derived(workflowStore, ($workflow) => $workflow?.id ?? null);\n/** Derived store for workflow name */\nexport const workflowName = derived(workflowStore, ($workflow) => $workflow?.name ?? \"Untitled Workflow\");\n/** Derived store for workflow nodes */\nexport const workflowNodes = derived(workflowStore, ($workflow) => $workflow?.nodes ?? []);\n/** Derived store for workflow edges */\nexport const workflowEdges = derived(workflowStore, ($workflow) => $workflow?.edges ?? []);\n/** Derived store for workflow metadata */\nexport const workflowMetadata = derived(workflowStore, ($workflow) => $workflow?.metadata ?? {\n    version: \"1.0.0\",\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    versionId: `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n    updateNumber: 0\n});\n// =========================================================================\n// Helper Functions\n// =========================================================================\n/**\n * Check if workflow data has actually changed\n *\n * Used to prevent unnecessary updates and infinite loops.\n */\nfunction hasWorkflowDataChanged(currentWorkflow, newNodes, newEdges) {\n    if (!currentWorkflow)\n        return true;\n    // Check if nodes have changed\n    if (currentWorkflow.nodes.length !== newNodes.length)\n        return true;\n    for (let i = 0; i < newNodes.length; i++) {\n        const currentNode = currentWorkflow.nodes[i];\n        const newNode = newNodes[i];\n        if (!currentNode || !newNode)\n            return true;\n        if (currentNode.id !== newNode.id)\n            return true;\n        if (currentNode.position.x !== newNode.position.x ||\n            currentNode.position.y !== newNode.position.y)\n            return true;\n        if (JSON.stringify(currentNode.data) !== JSON.stringify(newNode.data))\n            return true;\n    }\n    // Check if edges have changed\n    if (currentWorkflow.edges.length !== newEdges.length)\n        return true;\n    for (let i = 0; i < newEdges.length; i++) {\n        const currentEdge = currentWorkflow.edges[i];\n        const newEdge = newEdges[i];\n        if (!currentEdge || !newEdge)\n            return true;\n        if (currentEdge.id !== newEdge.id)\n            return true;\n        if (currentEdge.source !== newEdge.source || currentEdge.target !== newEdge.target)\n            return true;\n    }\n    return false;\n}\n// =========================================================================\n// Workflow Actions\n// =========================================================================\n/**\n * Actions for updating the workflow\n *\n * All actions that modify the workflow will trigger dirty state updates\n * and emit change events.\n */\nexport const workflowActions = {\n    /**\n     * Initialize workflow (from load or new)\n     *\n     * This sets the initial saved snapshot and clears dirty state.\n     */\n    initialize: (workflow) => {\n        workflowStore.set(workflow);\n        // Set the saved snapshot - workflow is \"clean\" after initialization\n        savedSnapshot = createSnapshot(workflow);\n        isDirtyStore.set(false);\n        if (onDirtyStateChangeCallback) {\n            onDirtyStateChangeCallback(false);\n        }\n    },\n    /**\n     * Update the entire workflow\n     */\n    updateWorkflow: (workflow) => {\n        workflowStore.set(workflow);\n        notifyWorkflowChange(\"metadata\");\n    },\n    /**\n     * Update nodes\n     */\n    updateNodes: (nodes) => {\n        workflowStore.update(($workflow) => {\n            if (!$workflow)\n                return null;\n            // Check if nodes have actually changed to prevent infinite loops\n            if (!hasWorkflowDataChanged($workflow, nodes, $workflow.edges)) {\n                return $workflow;\n            }\n            // Generate unique version identifier\n            const versionId = `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n            return {\n                ...$workflow,\n                nodes,\n                metadata: {\n                    ...$workflow.metadata,\n                    updatedAt: new Date().toISOString(),\n                    versionId,\n                    updateNumber: ($workflow.metadata?.updateNumber ?? 0) + 1\n                }\n            };\n        });\n        notifyWorkflowChange(\"node_move\");\n    },\n    /**\n     * Update edges\n     */\n    updateEdges: (edges) => {\n        workflowStore.update(($workflow) => {\n            if (!$workflow)\n                return null;\n            // Check if edges have actually changed to prevent infinite loops\n            if (!hasWorkflowDataChanged($workflow, $workflow.nodes, edges)) {\n                return $workflow;\n            }\n            // Generate unique version identifier\n            const versionId = `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n            return {\n                ...$workflow,\n                edges,\n                metadata: {\n                    ...$workflow.metadata,\n                    updatedAt: new Date().toISOString(),\n                    versionId,\n                    updateNumber: ($workflow.metadata?.updateNumber ?? 0) + 1\n                }\n            };\n        });\n        notifyWorkflowChange(\"edge_add\");\n    },\n    /**\n     * Update workflow name\n     */\n    updateName: (name) => {\n        workflowStore.update(($workflow) => {\n            if (!$workflow)\n                return null;\n            return {\n                ...$workflow,\n                name,\n                metadata: {\n                    ...$workflow.metadata,\n                    updatedAt: new Date().toISOString()\n                }\n            };\n        });\n        notifyWorkflowChange(\"name\");\n    },\n    /**\n     * Add a node\n     */\n    addNode: (node) => {\n        workflowStore.update(($workflow) => {\n            if (!$workflow)\n                return null;\n            return {\n                ...$workflow,\n                nodes: [...$workflow.nodes, node],\n                metadata: {\n                    ...$workflow.metadata,\n                    updatedAt: new Date().toISOString()\n                }\n            };\n        });\n        notifyWorkflowChange(\"node_add\");\n    },\n    /**\n     * Remove a node\n     */\n    removeNode: (nodeId) => {\n        workflowStore.update(($workflow) => {\n            if (!$workflow)\n                return null;\n            return {\n                ...$workflow,\n                nodes: $workflow.nodes.filter((node) => node.id !== nodeId),\n                edges: $workflow.edges.filter((edge) => edge.source !== nodeId && edge.target !== nodeId),\n                metadata: {\n                    ...$workflow.metadata,\n                    updatedAt: new Date().toISOString()\n                }\n            };\n        });\n        notifyWorkflowChange(\"node_remove\");\n    },\n    /**\n     * Add an edge\n     */\n    addEdge: (edge) => {\n        workflowStore.update(($workflow) => {\n            if (!$workflow)\n                return null;\n            return {\n                ...$workflow,\n                edges: [...$workflow.edges, edge],\n                metadata: {\n                    ...$workflow.metadata,\n                    updatedAt: new Date().toISOString()\n                }\n            };\n        });\n        notifyWorkflowChange(\"edge_add\");\n    },\n    /**\n     * Remove an edge\n     */\n    removeEdge: (edgeId) => {\n        workflowStore.update(($workflow) => {\n            if (!$workflow)\n                return null;\n            return {\n                ...$workflow,\n                edges: $workflow.edges.filter((edge) => edge.id !== edgeId),\n                metadata: {\n                    ...$workflow.metadata,\n                    updatedAt: new Date().toISOString()\n                }\n            };\n        });\n        notifyWorkflowChange(\"edge_remove\");\n    },\n    /**\n     * Update a specific node\n     */\n    updateNode: (nodeId, updates) => {\n        workflowStore.update(($workflow) => {\n            if (!$workflow)\n                return null;\n            return {\n                ...$workflow,\n                nodes: $workflow.nodes.map((node) => node.id === nodeId ? { ...node, ...updates } : node),\n                metadata: {\n                    ...$workflow.metadata,\n                    updatedAt: new Date().toISOString()\n                }\n            };\n        });\n        notifyWorkflowChange(\"node_config\");\n    },\n    /**\n     * Clear the workflow\n     */\n    clear: () => {\n        workflowStore.set(null);\n        savedSnapshot = null;\n        isDirtyStore.set(false);\n        if (onDirtyStateChangeCallback) {\n            onDirtyStateChangeCallback(false);\n        }\n    },\n    /**\n     * Update workflow metadata\n     */\n    updateMetadata: (metadata) => {\n        workflowStore.update(($workflow) => {\n            if (!$workflow)\n                return null;\n            return {\n                ...$workflow,\n                metadata: {\n                    ...$workflow.metadata,\n                    ...metadata,\n                    updatedAt: new Date().toISOString()\n                }\n            };\n        });\n        notifyWorkflowChange(\"metadata\");\n    },\n    /**\n     * Batch update nodes and edges\n     *\n     * Useful for complex operations that update multiple things at once.\n     */\n    batchUpdate: (updates) => {\n        workflowStore.update(($workflow) => {\n            if (!$workflow)\n                return null;\n            return {\n                ...$workflow,\n                ...(updates.nodes && { nodes: updates.nodes }),\n                ...(updates.edges && { edges: updates.edges }),\n                ...(updates.name && { name: updates.name }),\n                ...(updates.description !== undefined && { description: updates.description }),\n                metadata: {\n                    ...$workflow.metadata,\n                    ...(updates.metadata && { ...updates.metadata }),\n                    updatedAt: new Date().toISOString()\n                }\n            };\n        });\n        notifyWorkflowChange(\"metadata\");\n    }\n};\n// =========================================================================\n// Additional Derived Stores\n// =========================================================================\n/** Derived store for workflow changes (useful for triggering saves) */\nexport const workflowChanged = derived([workflowNodes, workflowEdges, workflowName], ([nodes, edges, name]) => ({ nodes, edges, name }));\n/** Derived store for workflow validation */\nexport const workflowValidation = derived([workflowNodes, workflowEdges], ([nodes, edges]) => ({\n    hasNodes: nodes.length > 0,\n    hasEdges: edges.length > 0,\n    nodeCount: nodes.length,\n    edgeCount: edges.length,\n    isValid: nodes.length > 0 && edges.length >= 0\n}));\n/** Derived store for workflow metadata changes */\nexport const workflowMetadataChanged = derived(workflowMetadata, (metadata) => ({\n    createdAt: metadata.createdAt,\n    updatedAt: metadata.updatedAt,\n    version: metadata.version ?? \"1.0.0\"\n}));\n","/**\n * Centralized icon management for FlowDrop\n * Ensures consistent icon usage across all components\n */\n/**\n * Default icons for different contexts\n */\nexport const DEFAULT_ICONS = {\n    // Node fallback icons\n    NODE: 'mdi:cube',\n    CATEGORY: 'mdi:folder',\n    // UI action icons\n    ADD: 'mdi:plus',\n    REMOVE: 'mdi:minus',\n    EDIT: 'mdi:pencil',\n    SAVE: 'mdi:content-save',\n    LOAD: 'mdi:folder-open',\n    EXPORT: 'mdi:download',\n    IMPORT: 'mdi:upload',\n    SEARCH: 'mdi:magnify',\n    CLOSE: 'mdi:close',\n    SETTINGS: 'mdi:cog',\n    HELP: 'mdi:help-circle',\n    // Status icons\n    SUCCESS: 'mdi:check-circle',\n    ERROR: 'mdi:alert-circle',\n    WARNING: 'mdi:alert',\n    INFO: 'mdi:information',\n    LOADING: 'mdi:loading',\n    // Navigation icons\n    HOME: 'mdi:home',\n    BACK: 'mdi:arrow-left',\n    FORWARD: 'mdi:arrow-right',\n    UP: 'mdi:arrow-up',\n    DOWN: 'mdi:arrow-down',\n    // Workflow icons\n    WORKFLOW: 'mdi:graph',\n    NODE_ADD: 'mdi:plus-circle',\n    NODE_DELETE: 'mdi:minus-circle',\n    CONNECTION: 'mdi:connection',\n    // Data icons\n    DATA: 'mdi:database',\n    FILE: 'mdi:file',\n    TEXT: 'mdi:text',\n    JSON: 'mdi:code-json',\n    // Model and processing icons\n    MODEL: 'mdi:chip',\n    BRAIN: 'mdi:brain',\n    VECTOR: 'mdi:vector-point',\n    ROBOT: 'mdi:robot',\n    // Tool icons\n    TOOL: 'mdi:wrench',\n    CALCULATOR: 'mdi:calculator',\n    CLOCK: 'mdi:clock',\n    // Communication icons\n    CHAT: 'mdi:chat',\n    MESSAGE: 'mdi:message',\n    EMAIL: 'mdi:email',\n    WEBHOOK: 'mdi:webhook',\n    // Storage icons\n    STORAGE: 'mdi:database',\n    MEMORY: 'mdi:memory',\n    CACHE: 'mdi:cached',\n    // Processing icons\n    PROCESS: 'mdi:cog',\n    FILTER: 'mdi:filter',\n    SORT: 'mdi:sort',\n    TRANSFORM: 'mdi:transform',\n    // Logic icons\n    LOGIC: 'mdi:git-branch',\n    CONDITION: 'mdi:source-fork',\n    LOOP: 'mdi:loop',\n    // Integration icons\n    API: 'mdi:api',\n    LINK: 'mdi:link',\n    PLUGIN: 'mdi:puzzle',\n    BUNDLE: 'mdi:package-variant'\n};\n/**\n * Category-specific icons matching Langflow's visual style\n */\nexport const CATEGORY_ICONS = {\n    inputs: 'mdi:arrow-down-circle',\n    outputs: 'mdi:arrow-up-circle',\n    prompts: 'mdi:message-text',\n    models: 'mdi:robot',\n    processing: 'mdi:cog',\n    logic: 'mdi:source-branch',\n    data: 'mdi:database',\n    helpers: 'mdi:help-circle',\n    tools: 'mdi:wrench',\n    'vector stores': 'mdi:vector-square',\n    embeddings: 'mdi:vector-polygon',\n    memories: 'mdi:brain',\n    agents: 'mdi:account-cog',\n    ai: 'mdi:artificial-intelligence',\n    bundles: 'mdi:package-variant'\n};\n/**\n * Get the appropriate icon for a node\n * @param nodeIcon - The node's specific icon\n * @param category - The node's category\n * @returns The icon to use\n */\nexport function getNodeIcon(nodeIcon, category) {\n    // If node has a specific icon, use it\n    if (nodeIcon) {\n        return nodeIcon;\n    }\n    // If category is provided, use category icon\n    if (category && CATEGORY_ICONS[category]) {\n        return CATEGORY_ICONS[category];\n    }\n    // Fallback to default node icon\n    return DEFAULT_ICONS.NODE;\n}\n/**\n * Get the appropriate icon for a category\n * @param category - The category\n * @returns The icon to use\n */\nexport function getCategoryIcon(category) {\n    return CATEGORY_ICONS[category] || DEFAULT_ICONS.CATEGORY;\n}\n/**\n * Get a default icon by key\n * @param key - The icon key from DEFAULT_ICONS\n * @returns The icon string\n */\nexport function getDefaultIcon(key) {\n    return DEFAULT_ICONS[key];\n}\n/**\n * Validate if an icon string is properly formatted\n * @param icon - The icon string to validate\n * @returns True if valid, false otherwise\n */\nexport function isValidIcon(icon) {\n    // Check if it's a valid iconify format (e.g., \"mdi:icon-name\")\n    return /^[a-z-]+:[a-z-]+$/.test(icon);\n}\n/**\n * Get a fallback icon if the provided icon is invalid\n * @param icon - The icon to check\n * @param fallback - The fallback icon to use\n * @returns The valid icon string\n */\nexport function getValidIcon(icon, fallback = DEFAULT_ICONS.NODE) {\n    return isValidIcon(icon) ? icon : fallback;\n}\n","<!--\n  Workflow Node Component\n  Renders individual nodes in the workflow editor with full functionality\n  Uses SvelteFlow's Handle for connection ports\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport { Position, Handle } from '@xyflow/svelte';\n\timport type { WorkflowNode } from '../types/index.js';\n\timport Icon from '@iconify/svelte';\n\timport { getNodeIcon } from '../utils/icons.js';\n\timport { getDataTypeColorToken, getCategoryColorToken } from '../utils/colors.js';\n\n\tinterface Props {\n\t\tdata: WorkflowNode['data'] & {\n\t\t\tnodeId?: string;\n\t\t\tonConfigOpen?: (node: { id: string; type: string; data: WorkflowNode['data'] }) => void;\n\t\t};\n\t\tselected?: boolean;\n\t}\n\n\tlet props: Props = $props();\n\tlet isHandleInteraction = $state(false);\n\n\t/**\n\t * Handle configuration value changes - now handled by global ConfigSidebar\n\t */\n\t// Removed local config handling - now using global ConfigSidebar\n\n\t/**\n\t * Handle node click - only handle selection, no config opening\n\t */\n\tfunction handleNodeClick(): void {\n\t\t// Node selection is handled by Svelte Flow\n\t}\n\n\t/**\n\t * Handle double-click to open config\n\t */\n\tfunction handleDoubleClick(): void {\n\t\topenConfigSidebar();\n\t}\n\n\t/**\n\t * Handle configuration sidebar - now using global ConfigSidebar\n\t */\n\tfunction openConfigSidebar(): void {\n\t\tif (props.data.onConfigOpen) {\n\t\t\t// Create a WorkflowNodeType-like object for the global ConfigSidebar\n\t\t\tconst nodeForConfig = {\n\t\t\t\tid: props.data.nodeId || 'unknown',\n\t\t\t\ttype: 'workflowNode',\n\t\t\t\tdata: props.data\n\t\t\t};\n\t\t\tprops.data.onConfigOpen(nodeForConfig);\n\t\t}\n\t}\n</script>\n\n<!-- Node Container -->\n<div\n\tclass=\"flowdrop-workflow-node\"\n\tclass:flowdrop-workflow-node--selected={props.selected}\n\tonclick={handleNodeClick}\n\tondblclick={handleDoubleClick}\n\tonmouseup={() => {\n\t\tisHandleInteraction = false;\n\t}}\n\tdata-handle-interaction={isHandleInteraction}\n\trole=\"button\"\n\ttabindex=\"0\"\n\tonkeydown={(e) => {\n\t\tif (e.key === 'Enter' || e.key === ' ') {\n\t\t\te.preventDefault();\n\t\t\thandleDoubleClick();\n\t\t}\n\t}}\n\taria-label=\"Workflow node: {props.data.metadata.name}\"\n\taria-describedby=\"node-description-{props.data.nodeId || 'unknown'}\"\n>\n\t<!-- Default Node Header -->\n\t<div class=\"flowdrop-workflow-node__header\">\n\t\t<div class=\"flowdrop-flex flowdrop-gap--3 flowdrop-items--center\">\n\t\t\t<!-- Node Icon -->\n\t\t\t<div\n\t\t\t\tclass=\"flowdrop-workflow-node__icon\"\n\t\t\t\tstyle=\"background-color: {getCategoryColorToken(props.data.metadata.category)}\"\n\t\t\t>\n\t\t\t\t<Icon icon={getNodeIcon(props.data.metadata.icon, props.data.metadata.category)} />\n\t\t\t</div>\n\n\t\t\t<!-- Node Title - Icon and Title on same line -->\n\t\t\t<h3 class=\"flowdrop-text--sm flowdrop-font--medium flowdrop-truncate flowdrop-flex--1\">\n\t\t\t\t{props.data.label}\n\t\t\t</h3>\n\n\t\t\t<!-- Status Indicators -->\n\t\t\t<div class=\"flowdrop-flex flowdrop-gap--2 flowdrop-items--center\">\n\t\t\t\t<!-- Status indicators removed - using outer NodeStatusOverlay instead -->\n\t\t\t</div>\n\t\t</div>\n\t\t<!-- Node Description - on new line below -->\n\t\t<p\n\t\t\tclass=\"flowdrop-text--xs flowdrop-text--gray flowdrop-truncate flowdrop-mt--1\"\n\t\t\tid=\"node-description-{props.data.nodeId || 'unknown'}\"\n\t\t>\n\t\t\t{props.data.metadata.description}\n\t\t</p>\n\t</div>\n\n\t<!-- Input Ports Container -->\n\t{#if props.data.metadata.inputs.length > 0}\n\t\t<div class=\"flowdrop-workflow-node__ports\">\n\t\t\t<div class=\"flowdrop-workflow-node__ports-header\">\n\t\t\t\t<h5 class=\"flowdrop-workflow-node__ports-title\">Inputs</h5>\n\t\t\t</div>\n\t\t\t<div class=\"flowdrop-workflow-node__ports-list\">\n\t\t\t\t{#each props.data.metadata.inputs as port (port.id)}\n\t\t\t\t\t<div class=\"flowdrop-workflow-node__port\">\n\t\t\t\t\t\t<!-- Input Handle -->\n\t\t\t\t\t\t<Handle\n\t\t\t\t\t\t\ttype=\"target\"\n\t\t\t\t\t\t\tposition={Position.Left}\n\t\t\t\t\t\t\tid={`${props.data.nodeId}-input-${port.id}`}\n\t\t\t\t\t\t\tclass=\"flowdrop-workflow-node__handle\"\n\t\t\t\t\t\t\tstyle=\"top: 50%; transform: translateY(-50%); margin-left: -32px; background-color: {getDataTypeColorToken(\n\t\t\t\t\t\t\t\tport.dataType\n\t\t\t\t\t\t\t)}; border-color: '#ffffff';\"\n\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\ttabindex={0}\n\t\t\t\t\t\t\taria-label=\"Connect to {port.name} input port\"\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<!-- Port Info -->\n\t\t\t\t\t\t<div class=\"flowdrop-flex--1 flowdrop-min-w--0\">\n\t\t\t\t\t\t\t<div class=\"flowdrop-flex flowdrop-gap--2\">\n\t\t\t\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-font--medium\">{port.name}</span>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"flowdrop-badge flowdrop-badge--sm\"\n\t\t\t\t\t\t\t\t\tstyle=\"background-color: {getDataTypeColorToken(port.dataType)}; color: #fff;\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{port.dataType}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{#if port.required}\n\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-badge flowdrop-badge--error flowdrop-badge--sm\"\n\t\t\t\t\t\t\t\t\t\t>Required</span\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{#if port.description}\n\t\t\t\t\t\t\t\t<p class=\"flowdrop-text--xs flowdrop-text--gray flowdrop-truncate\">\n\t\t\t\t\t\t\t\t\t{port.description}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\n\t<!-- Output Ports Container -->\n\t{#if props.data.metadata.outputs.length > 0}\n\t\t<div class=\"flowdrop-workflow-node__ports\">\n\t\t\t<div class=\"flowdrop-workflow-node__ports-header\">\n\t\t\t\t<h5 class=\"flowdrop-workflow-node__ports-title\">Outputs</h5>\n\t\t\t</div>\n\t\t\t<div class=\"flowdrop-workflow-node__ports-list\">\n\t\t\t\t{#each props.data.metadata.outputs as port (port.id)}\n\t\t\t\t\t<div class=\"flowdrop-workflow-node__port\">\n\t\t\t\t\t\t<!-- Port Info -->\n\t\t\t\t\t\t<div class=\"flowdrop-flex--1 flowdrop-min-w--0 flowdrop-text--right\">\n\t\t\t\t\t\t\t<div class=\"flowdrop-flex flowdrop-gap--2 flowdrop-justify--end\">\n\t\t\t\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-font--medium\">{port.name}</span>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"flowdrop-badge flowdrop-badge--sm\"\n\t\t\t\t\t\t\t\t\tstyle=\"background-color: {getDataTypeColorToken(port.dataType)}; color: #fff;\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{port.dataType}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{#if port.description}\n\t\t\t\t\t\t\t\t<p class=\"flowdrop-text--xs flowdrop-text--gray flowdrop-truncate\">\n\t\t\t\t\t\t\t\t\t{port.description}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<!-- Output Handle -->\n\t\t\t\t\t\t<Handle\n\t\t\t\t\t\t\ttype=\"source\"\n\t\t\t\t\t\t\tposition={Position.Right}\n\t\t\t\t\t\t\tid={`${props.data.nodeId}-output-${port.id}`}\n\t\t\t\t\t\t\tclass=\"flowdrop-workflow-node__handle\"\n\t\t\t\t\t\t\tstyle=\"top: 50%; transform: translateY(-50%); margin-right: -32px; background-color: {getDataTypeColorToken(\n\t\t\t\t\t\t\t\tport.dataType\n\t\t\t\t\t\t\t)}; border-color: '#ffffff';\"\n\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\ttabindex={0}\n\t\t\t\t\t\t\taria-label=\"Connect from {port.name} output port\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\n\t<!-- Config button -->\n\t<button\n\t\tclass=\"flowdrop-workflow-node__config-btn\"\n\t\tonclick={openConfigSidebar}\n\t\ttitle=\"Configure node\"\n\t>\n\t\t<Icon icon=\"mdi:cog\" />\n\t</button>\n</div>\n\n<!-- ConfigSidebar removed - now using global ConfigSidebar in WorkflowEditor -->\n\n<style>\n\t.flowdrop-workflow-node {\n\t\tposition: relative;\n\t\tbackground-color: #ffffff;\n\t\tborder: 2px solid #e5e7eb;\n\t\tborder-radius: 0.75rem;\n\t\tbox-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n\t\twidth: 18rem;\n\t\tz-index: 10;\n\t}\n\n\t.flowdrop-workflow-node--selected {\n\t\tbox-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n\t\tborder: 2px solid #3b82f6;\n\t}\n\n\t.flowdrop-workflow-node__header {\n\t\tpadding: 1rem;\n\t\tborder-bottom: 1px solid #e5e7eb;\n\t\tbackground-color: #f9fafb;\n\t\tborder-top-left-radius: 0.75rem;\n\t\tborder-top-right-radius: 0.75rem;\n\t}\n\n\t.flowdrop-workflow-node__icon {\n\t\twidth: 2rem;\n\t\theight: 2rem;\n\t\tborder-radius: 0.5rem;\n\t\tcolor: #ffffff;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tbox-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);\n\t}\n\n\t.flowdrop-workflow-node__header h3 {\n\t\tmargin: 0;\n\t\tline-height: 1;\n\t}\n\n\t/* Status indicator styles removed - using outer NodeStatusOverlay instead */\n\n\t@keyframes pulse {\n\t\t0%,\n\t\t100% {\n\t\t\topacity: 1;\n\t\t}\n\t\t50% {\n\t\t\topacity: 0.5;\n\t\t}\n\t}\n\n\t.flowdrop-workflow-node__ports {\n\t\tpadding: 0.75rem 1rem;\n\t}\n\n\t.flowdrop-workflow-node__ports-header {\n\t\tmargin-bottom: 0.5rem;\n\t}\n\n\t.flowdrop-workflow-node__ports-title {\n\t\tmargin: 0;\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 600;\n\t\tcolor: #374151;\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t}\n\n\t.flowdrop-workflow-node__ports-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.5rem;\n\t}\n\n\t.flowdrop-workflow-node__port {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 0.25rem 0;\n\t\tposition: relative;\n\t}\n\n\t.flowdrop-badge {\n\t\tpadding: 0.125rem 0.375rem;\n\t\tborder-radius: 0.25rem;\n\t\tfont-size: 0.625rem;\n\t\tfont-weight: 500;\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t}\n\n\t.flowdrop-badge--error {\n\t\tbackground-color: #ef4444;\n\t\tcolor: #ffffff;\n\t}\n\n\t.flowdrop-badge--sm {\n\t\tfont-size: 0.625rem;\n\t\tpadding: 0.125rem 0.25rem;\n\t}\n\n\t/* Handle styles */\n\t:global(.flowdrop-workflow-node__handle) {\n\t\twidth: 0.75rem;\n\t\theight: 0.75rem;\n\t\tbackground-color: #6b7280;\n\t\tborder: 2px solid #ffffff;\n\t\tborder-radius: 50%;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tcursor: pointer;\n\t}\n\n\t:global(.flowdrop-workflow-node__handle:hover) {\n\t\tbackground-color: #3b82f6;\n\t\ttransform: scale(1.2);\n\t}\n\n\t:global(.flowdrop-workflow-node__handle:focus) {\n\t\toutline: 2px solid #3b82f6;\n\t\toutline-offset: 2px;\n\t}\n\n\t/* Utility classes */\n\t.flowdrop-flex {\n\t\tdisplay: flex;\n\t}\n\n\t.flowdrop-flex--1 {\n\t\tflex: 1;\n\t}\n\n\t.flowdrop-gap--2 {\n\t\tgap: 0.5rem;\n\t}\n\n\t.flowdrop-gap--3 {\n\t\tgap: 0.75rem;\n\t}\n\n\t.flowdrop-items--center {\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-justify--end {\n\t\tjustify-content: flex-end;\n\t}\n\n\t.flowdrop-min-w--0 {\n\t\tmin-width: 0;\n\t}\n\n\t.flowdrop-text--xs {\n\t\tfont-size: 0.75rem;\n\t\tline-height: 1rem;\n\t}\n\n\t.flowdrop-text--sm {\n\t\tfont-size: 0.875rem;\n\t\tline-height: 1.25rem;\n\t}\n\n\t.flowdrop-text--gray {\n\t\tcolor: #6b7280;\n\t}\n\n\t.flowdrop-font--medium {\n\t\tfont-weight: 500;\n\t}\n\n\t.flowdrop-truncate {\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.flowdrop-mt--1 {\n\t\tmargin-top: 0.25rem;\n\t}\n\n\t.flowdrop-text--right {\n\t\ttext-align: right;\n\t}\n\n\t.flowdrop-workflow-node__config-btn {\n\t\tposition: absolute;\n\t\ttop: 0.5rem;\n\t\tright: 0.5rem;\n\t\twidth: 1.5rem;\n\t\theight: 1.5rem;\n\t\tbackground-color: rgba(255, 255, 255, 0.9);\n\t\tborder: 1px solid #e5e7eb;\n\t\tborder-radius: 0.25rem;\n\t\tcolor: #6b7280;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\topacity: 0;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tbackdrop-filter: blur(4px);\n\t\tz-index: 15;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.flowdrop-workflow-node:hover .flowdrop-workflow-node__config-btn {\n\t\topacity: 1;\n\t}\n\n\t.flowdrop-workflow-node__config-btn:hover {\n\t\tbackground-color: #f9fafb;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n</style>\n","/**\n * marked v16.4.1 - a markdown parser\n * Copyright (c) 2011-2025, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\nfunction L(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var T=L();function G(u){T=u}var I={exec:()=>null};function h(u,e=\"\"){let t=typeof u==\"string\"?u:u.source,n={replace:(r,i)=>{let s=typeof i==\"string\"?i:i.source;return s=s.replace(m.caret,\"$1\"),t=t.replace(r,s),n},getRegex:()=>new RegExp(t,e)};return n}var m={codeRemoveIndent:/^(?: {1,4}| {0,3}\\t)/gm,outputLinkReplace:/\\\\([\\[\\]])/g,indentCodeCompensation:/^(\\s+)(?:```)/,beginningSpace:/^\\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\\n/g,tabCharGlobal:/\\t/g,multipleSpaceGlobal:/\\s+/g,blankLine:/^[ \\t]*$/,doubleBlankLine:/\\n[ \\t]*\\n[ \\t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\\n {0,3}((?:=+|-+) *)(?=\\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \\t]?/gm,listReplaceTabs:/^\\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\\[[ xX]\\] /,listReplaceTask:/^\\[[ xX]\\] +/,anyLine:/\\n.*\\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\\||\\| *$/g,tableRowBlankLine:/\\n[ \\t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\\s|>)/i,endPreScriptTag:/^<\\/(pre|code|kbd|script)(\\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/,unicodeAlphaNumeric:/[\\p{L}\\p{N}]/u,escapeTest:/[&<>\"']/,escapeReplace:/[&<>\"']/g,escapeTestNoEncode:/[<>\"']|&(?!(#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);)/,escapeReplaceNoEncode:/[<>\"']|&(?!(#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);)/g,unescapeTest:/&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig,caret:/(^|[^\\[])\\^/g,percentDecode:/%25/g,findPipe:/\\|/g,splitPipe:/ \\|/,slashPipe:/\\\\\\|/g,carriageReturn:/\\r\\n|\\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\\S*/,endingNewline:/\\n$/,listItemRegex:u=>new RegExp(`^( {0,3}${u})((?:[\t ][^\\\\n]*)?(?:\\\\n|$))`),nextBulletRegex:u=>new RegExp(`^ {0,${Math.min(3,u-1)}}(?:[*+-]|\\\\d{1,9}[.)])((?:[ \t][^\\\\n]*)?(?:\\\\n|$))`),hrRegex:u=>new RegExp(`^ {0,${Math.min(3,u-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)`),fencesBeginRegex:u=>new RegExp(`^ {0,${Math.min(3,u-1)}}(?:\\`\\`\\`|~~~)`),headingBeginRegex:u=>new RegExp(`^ {0,${Math.min(3,u-1)}}#`),htmlBeginRegex:u=>new RegExp(`^ {0,${Math.min(3,u-1)}}<(?:[a-z].*>|!--)`,\"i\")},be=/^(?:[ \\t]*(?:\\n|$))+/,Re=/^((?: {4}| {0,3}\\t)[^\\n]+(?:\\n(?:[ \\t]*(?:\\n|$))*)?)+/,Te=/^ {0,3}(`{3,}(?=[^`\\n]*(?:\\n|$))|~{3,})([^\\n]*)(?:\\n|$)(?:|([\\s\\S]*?)(?:\\n|$))(?: {0,3}\\1[~`]* *(?=\\n|$)|$)/,E=/^ {0,3}((?:-[\\t ]*){3,}|(?:_[ \\t]*){3,}|(?:\\*[ \\t]*){3,})(?:\\n+|$)/,Oe=/^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/,F=/(?:[*+-]|\\d{1,9}[.)])/,ie=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\\n(?!\\s*?\\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/,oe=h(ie).replace(/bull/g,F).replace(/blockCode/g,/(?: {4}| {0,3}\\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\\n>]+>\\n/).replace(/\\|table/g,\"\").getRegex(),we=h(ie).replace(/bull/g,F).replace(/blockCode/g,/(?: {4}| {0,3}\\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\\n>]+>\\n/).replace(/table/g,/ {0,3}\\|?(?:[:\\- ]*\\|)+[\\:\\- ]*\\n/).getRegex(),j=/^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\\n)[^\\n]+)*)/,ye=/^[^\\n]+/,Q=/(?!\\s*\\])(?:\\\\[\\s\\S]|[^\\[\\]\\\\])+/,Pe=h(/^ {0,3}\\[(label)\\]: *(?:\\n[ \\t]*)?([^<\\s][^\\s]*|<.*?>)(?:(?: +(?:\\n[ \\t]*)?| *\\n[ \\t]*)(title))? *(?:\\n+|$)/).replace(\"label\",Q).replace(\"title\",/(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/).getRegex(),Se=h(/^( {0,3}bull)([ \\t][^\\n]+?)?(?:\\n|$)/).replace(/bull/g,F).getRegex(),v=\"address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul\",U=/<!--(?:-?>|[\\s\\S]*?(?:-->|$))/,$e=h(\"^ {0,3}(?:<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)|comment[^\\\\n]*(\\\\n+|$)|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n[ \t]*)+\\\\n|$)|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n[ \t]*)+\\\\n|$)|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n[ \t]*)+\\\\n|$))\",\"i\").replace(\"comment\",U).replace(\"tag\",v).replace(\"attribute\",/ +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/).getRegex(),ae=h(j).replace(\"hr\",E).replace(\"heading\",\" {0,3}#{1,6}(?:\\\\s|$)\").replace(\"|lheading\",\"\").replace(\"|table\",\"\").replace(\"blockquote\",\" {0,3}>\").replace(\"fences\",\" {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n\").replace(\"list\",\" {0,3}(?:[*+-]|1[.)]) \").replace(\"html\",\"</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)\").replace(\"tag\",v).getRegex(),_e=h(/^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/).replace(\"paragraph\",ae).getRegex(),K={blockquote:_e,code:Re,def:Pe,fences:Te,heading:Oe,hr:E,html:$e,lheading:oe,list:Se,newline:be,paragraph:ae,table:I,text:ye},re=h(\"^ *([^\\\\n ].*)\\\\n {0,3}((?:\\\\| *)?:?-+:? *(?:\\\\| *:?-+:? *)*(?:\\\\| *)?)(?:\\\\n((?:(?! *\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)\").replace(\"hr\",E).replace(\"heading\",\" {0,3}#{1,6}(?:\\\\s|$)\").replace(\"blockquote\",\" {0,3}>\").replace(\"code\",\"(?: {4}| {0,3}\t)[^\\\\n]\").replace(\"fences\",\" {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n\").replace(\"list\",\" {0,3}(?:[*+-]|1[.)]) \").replace(\"html\",\"</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)\").replace(\"tag\",v).getRegex(),Le={...K,lheading:we,table:re,paragraph:h(j).replace(\"hr\",E).replace(\"heading\",\" {0,3}#{1,6}(?:\\\\s|$)\").replace(\"|lheading\",\"\").replace(\"table\",re).replace(\"blockquote\",\" {0,3}>\").replace(\"fences\",\" {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n\").replace(\"list\",\" {0,3}(?:[*+-]|1[.)]) \").replace(\"html\",\"</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)\").replace(\"tag\",v).getRegex()},Me={...K,html:h(`^ *(?:comment *(?:\\\\n|\\\\s*$)|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\\\s[^'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))`).replace(\"comment\",U).replace(/tag/g,\"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b\").getRegex(),def:/^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,heading:/^(#{1,6})(.*)(?:\\n+|$)/,fences:I,lheading:/^(.+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/,paragraph:h(j).replace(\"hr\",E).replace(\"heading\",` *#{1,6} *[^\n]`).replace(\"lheading\",oe).replace(\"|table\",\"\").replace(\"blockquote\",\" {0,3}>\").replace(\"|fences\",\"\").replace(\"|list\",\"\").replace(\"|html\",\"\").replace(\"|tag\",\"\").getRegex()},ze=/^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,Ae=/^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,le=/^( {2,}|\\\\)\\n(?!\\s*$)/,Ie=/^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/,D=/[\\p{P}\\p{S}]/u,W=/[\\s\\p{P}\\p{S}]/u,ue=/[^\\s\\p{P}\\p{S}]/u,Ee=h(/^((?![*_])punctSpace)/,\"u\").replace(/punctSpace/g,W).getRegex(),pe=/(?!~)[\\p{P}\\p{S}]/u,Ce=/(?!~)[\\s\\p{P}\\p{S}]/u,Be=/(?:[^\\s\\p{P}\\p{S}]|~)/u,qe=h(/link|code|html/,\"g\").replace(\"link\",/\\[(?:[^\\[\\]`]|(?<!`)(?<a>`+)[^`]+\\k<a>(?!`))*?\\]\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)]|\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)])*\\))*\\)/).replace(\"code\",/(?<!`)(?<b>`+)[^`]+\\k<b>(?!`)/).replace(\"html\",/<(?! )[^<>]*?>/).getRegex(),ce=/^(?:\\*+(?:((?!\\*)punct)|[^\\s*]))|^_+(?:((?!_)punct)|([^\\s_]))/,ve=h(ce,\"u\").replace(/punct/g,D).getRegex(),De=h(ce,\"u\").replace(/punct/g,pe).getRegex(),he=\"^[^_*]*?__[^_*]*?\\\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\\\*)punct(\\\\*+)(?=[\\\\s]|$)|notPunctSpace(\\\\*+)(?!\\\\*)(?=punctSpace|$)|(?!\\\\*)punctSpace(\\\\*+)(?=notPunctSpace)|[\\\\s](\\\\*+)(?!\\\\*)(?=punct)|(?!\\\\*)punct(\\\\*+)(?!\\\\*)(?=punct)|notPunctSpace(\\\\*+)(?=notPunctSpace)\",He=h(he,\"gu\").replace(/notPunctSpace/g,ue).replace(/punctSpace/g,W).replace(/punct/g,D).getRegex(),Ze=h(he,\"gu\").replace(/notPunctSpace/g,Be).replace(/punctSpace/g,Ce).replace(/punct/g,pe).getRegex(),Ge=h(\"^[^_*]*?\\\\*\\\\*[^_*]*?_[^_*]*?(?=\\\\*\\\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)\",\"gu\").replace(/notPunctSpace/g,ue).replace(/punctSpace/g,W).replace(/punct/g,D).getRegex(),Ne=h(/\\\\(punct)/,\"gu\").replace(/punct/g,D).getRegex(),Fe=h(/^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/).replace(\"scheme\",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace(\"email\",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),je=h(U).replace(\"(?:-->|$)\",\"-->\").getRegex(),Qe=h(\"^comment|^</[a-zA-Z][\\\\w:-]*\\\\s*>|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>|^<\\\\?[\\\\s\\\\S]*?\\\\?>|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>\").replace(\"comment\",je).replace(\"attribute\",/\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/).getRegex(),q=/(?:\\[(?:\\\\[\\s\\S]|[^\\[\\]\\\\])*\\]|\\\\[\\s\\S]|`+[^`]*?`+(?!`)|[^\\[\\]\\\\`])*?/,Ue=h(/^!?\\[(label)\\]\\(\\s*(href)(?:(?:[ \\t]*(?:\\n[ \\t]*)?)(title))?\\s*\\)/).replace(\"label\",q).replace(\"href\",/<(?:\\\\.|[^\\n<>\\\\])+>|[^ \\t\\n\\x00-\\x1f]*/).replace(\"title\",/\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/).getRegex(),de=h(/^!?\\[(label)\\]\\[(ref)\\]/).replace(\"label\",q).replace(\"ref\",Q).getRegex(),ke=h(/^!?\\[(ref)\\](?:\\[\\])?/).replace(\"ref\",Q).getRegex(),Ke=h(\"reflink|nolink(?!\\\\()\",\"g\").replace(\"reflink\",de).replace(\"nolink\",ke).getRegex(),se=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,X={_backpedal:I,anyPunctuation:Ne,autolink:Fe,blockSkip:qe,br:le,code:Ae,del:I,emStrongLDelim:ve,emStrongRDelimAst:He,emStrongRDelimUnd:Ge,escape:ze,link:Ue,nolink:ke,punctuation:Ee,reflink:de,reflinkSearch:Ke,tag:Qe,text:Ie,url:I},We={...X,link:h(/^!?\\[(label)\\]\\((.*?)\\)/).replace(\"label\",q).getRegex(),reflink:h(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/).replace(\"label\",q).getRegex()},N={...X,emStrongRDelimAst:Ze,emStrongLDelim:De,url:h(/^((?:protocol):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/).replace(\"protocol\",se).replace(\"email\",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'\"~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'\"~)]+(?!$))+/,del:/^(~~?)(?=[^\\s~])((?:\\\\[\\s\\S]|[^\\\\])*?(?:\\\\[\\s\\S]|[^\\s~\\\\]))\\1(?=[^~]|$)/,text:h(/^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|protocol:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/).replace(\"protocol\",se).getRegex()},Xe={...N,br:h(le).replace(\"{2,}\",\"*\").getRegex(),text:h(N.text).replace(\"\\\\b_\",\"\\\\b_| {2,}\\\\n\").replace(/\\{2,\\}/g,\"*\").getRegex()},C={normal:K,gfm:Le,pedantic:Me},M={normal:X,gfm:N,breaks:Xe,pedantic:We};var Je={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\"},ge=u=>Je[u];function w(u,e){if(e){if(m.escapeTest.test(u))return u.replace(m.escapeReplace,ge)}else if(m.escapeTestNoEncode.test(u))return u.replace(m.escapeReplaceNoEncode,ge);return u}function J(u){try{u=encodeURI(u).replace(m.percentDecode,\"%\")}catch{return null}return u}function V(u,e){let t=u.replace(m.findPipe,(i,s,o)=>{let a=!1,l=s;for(;--l>=0&&o[l]===\"\\\\\";)a=!a;return a?\"|\":\" |\"}),n=t.split(m.splitPipe),r=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push(\"\");for(;r<n.length;r++)n[r]=n[r].trim().replace(m.slashPipe,\"|\");return n}function z(u,e,t){let n=u.length;if(n===0)return\"\";let r=0;for(;r<n;){let i=u.charAt(n-r-1);if(i===e&&!t)r++;else if(i!==e&&t)r++;else break}return u.slice(0,n-r)}function fe(u,e){if(u.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<u.length;n++)if(u[n]===\"\\\\\")n++;else if(u[n]===e[0])t++;else if(u[n]===e[1]&&(t--,t<0))return n;return t>0?-2:-1}function me(u,e,t,n,r){let i=e.href,s=e.title||null,o=u[1].replace(r.other.outputLinkReplace,\"$1\");n.state.inLink=!0;let a={type:u[0].charAt(0)===\"!\"?\"image\":\"link\",raw:t,href:i,title:s,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,a}function Ve(u,e,t){let n=u.match(t.other.indentCodeCompensation);if(n===null)return e;let r=n[1];return e.split(`\n`).map(i=>{let s=i.match(t.other.beginningSpace);if(s===null)return i;let[o]=s;return o.length>=r.length?i.slice(r.length):i}).join(`\n`)}var y=class{options;rules;lexer;constructor(e){this.options=e||T}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:\"space\",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let n=t[0].replace(this.rules.other.codeRemoveIndent,\"\");return{type:\"code\",raw:t[0],codeBlockStyle:\"indented\",text:this.options.pedantic?n:z(n,`\n`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let n=t[0],r=Ve(n,t[3]||\"\",this.rules);return{type:\"code\",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,\"$1\"):t[2],text:r}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){let r=z(n,\"#\");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:\"heading\",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:\"hr\",raw:z(t[0],`\n`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let n=z(t[0],`\n`).split(`\n`),r=\"\",i=\"\",s=[];for(;n.length>0;){let o=!1,a=[],l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))a.push(n[l]),o=!0;else if(!o)a.push(n[l]);else break;n=n.slice(l);let c=a.join(`\n`),p=c.replace(this.rules.other.blockquoteSetextReplace,`\n    $1`).replace(this.rules.other.blockquoteSetextReplace2,\"\");r=r?`${r}\n${c}`:c,i=i?`${i}\n${p}`:p;let g=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(p,s,!0),this.lexer.state.top=g,n.length===0)break;let d=s.at(-1);if(d?.type===\"code\")break;if(d?.type===\"blockquote\"){let R=d,f=R.raw+`\n`+n.join(`\n`),O=this.blockquote(f);s[s.length-1]=O,r=r.substring(0,r.length-R.raw.length)+O.raw,i=i.substring(0,i.length-R.text.length)+O.text;break}else if(d?.type===\"list\"){let R=d,f=R.raw+`\n`+n.join(`\n`),O=this.list(f);s[s.length-1]=O,r=r.substring(0,r.length-d.raw.length)+O.raw,i=i.substring(0,i.length-R.raw.length)+O.raw,n=f.substring(s.at(-1).raw.length).split(`\n`);continue}}return{type:\"blockquote\",raw:r,tokens:s,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),r=n.length>1,i={type:\"list\",raw:\"\",ordered:r,start:r?+n.slice(0,-1):\"\",loose:!1,items:[]};n=r?`\\\\d{1,9}\\\\${n.slice(-1)}`:`\\\\${n}`,this.options.pedantic&&(n=r?n:\"[*+-]\");let s=this.rules.other.listItemRegex(n),o=!1;for(;e;){let l=!1,c=\"\",p=\"\";if(!(t=s.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let g=t[2].split(`\n`,1)[0].replace(this.rules.other.listReplaceTabs,H=>\" \".repeat(3*H.length)),d=e.split(`\n`,1)[0],R=!g.trim(),f=0;if(this.options.pedantic?(f=2,p=g.trimStart()):R?f=t[1].length+1:(f=t[2].search(this.rules.other.nonSpaceChar),f=f>4?1:f,p=g.slice(f),f+=t[1].length),R&&this.rules.other.blankLine.test(d)&&(c+=d+`\n`,e=e.substring(d.length+1),l=!0),!l){let H=this.rules.other.nextBulletRegex(f),ee=this.rules.other.hrRegex(f),te=this.rules.other.fencesBeginRegex(f),ne=this.rules.other.headingBeginRegex(f),xe=this.rules.other.htmlBeginRegex(f);for(;e;){let Z=e.split(`\n`,1)[0],A;if(d=Z,this.options.pedantic?(d=d.replace(this.rules.other.listReplaceNesting,\"  \"),A=d):A=d.replace(this.rules.other.tabCharGlobal,\"    \"),te.test(d)||ne.test(d)||xe.test(d)||H.test(d)||ee.test(d))break;if(A.search(this.rules.other.nonSpaceChar)>=f||!d.trim())p+=`\n`+A.slice(f);else{if(R||g.replace(this.rules.other.tabCharGlobal,\"    \").search(this.rules.other.nonSpaceChar)>=4||te.test(g)||ne.test(g)||ee.test(g))break;p+=`\n`+d}!R&&!d.trim()&&(R=!0),c+=Z+`\n`,e=e.substring(Z.length+1),g=A.slice(f)}}i.loose||(o?i.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(o=!0));let O=null,Y;this.options.gfm&&(O=this.rules.other.listIsTask.exec(p),O&&(Y=O[0]!==\"[ ] \",p=p.replace(this.rules.other.listReplaceTask,\"\"))),i.items.push({type:\"list_item\",raw:c,task:!!O,checked:Y,loose:!1,text:p,tokens:[]}),i.raw+=c}let a=i.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){let c=i.items[l].tokens.filter(g=>g.type===\"space\"),p=c.length>0&&c.some(g=>this.rules.other.anyLine.test(g.raw));i.loose=p}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:\"html\",block:!0,raw:t[0],pre:t[1]===\"pre\"||t[1]===\"script\"||t[1]===\"style\",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal,\" \"),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,\"$1\").replace(this.rules.inline.anyPunctuation,\"$1\"):\"\",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,\"$1\"):t[3];return{type:\"def\",tag:n,raw:t[0],href:r,title:i}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=V(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,\"\").split(\"|\"),i=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,\"\").split(`\n`):[],s={type:\"table\",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let o of r)this.rules.other.tableAlignRight.test(o)?s.align.push(\"right\"):this.rules.other.tableAlignCenter.test(o)?s.align.push(\"center\"):this.rules.other.tableAlignLeft.test(o)?s.align.push(\"left\"):s.align.push(null);for(let o=0;o<n.length;o++)s.header.push({text:n[o],tokens:this.lexer.inline(n[o]),header:!0,align:s.align[o]});for(let o of i)s.rows.push(V(o,s.header.length).map((a,l)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:s.align[l]})));return s}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:\"heading\",raw:t[0],depth:t[2].charAt(0)===\"=\"?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let n=t[1].charAt(t[1].length-1)===`\n`?t[1].slice(0,-1):t[1];return{type:\"paragraph\",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:\"text\",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:\"escape\",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:\"html\",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let s=z(n.slice(0,-1),\"\\\\\");if((n.length-s.length)%2===0)return}else{let s=fe(t[2],\"()\");if(s===-2)return;if(s>-1){let a=(t[0].indexOf(\"!\")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,a).trim(),t[3]=\"\"}}let r=t[2],i=\"\";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(r);s&&(r=s[1],i=s[3])}else i=t[3]?t[3].slice(1,-1):\"\";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),me(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,\"$1\"),title:i&&i.replace(this.rules.inline.anyPunctuation,\"$1\")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal,\" \"),i=t[r.toLowerCase()];if(!i){let s=n[0].charAt(0);return{type:\"text\",raw:s,text:s}}return me(n,i,n[0],this.lexer,this.rules)}}emStrong(e,t,n=\"\"){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||\"\")||!n||this.rules.inline.punctuation.exec(n)){let s=[...r[0]].length-1,o,a,l=s,c=0,p=r[0][0]===\"*\"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(p.lastIndex=0,t=t.slice(-1*e.length+s);(r=p.exec(t))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(a=[...o].length,r[3]||r[4]){l+=a;continue}else if((r[5]||r[6])&&s%3&&!((s+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);let g=[...r[0]][0].length,d=e.slice(0,s+r.index+g+a);if(Math.min(s,a)%2){let f=d.slice(1,-1);return{type:\"em\",raw:d,text:f,tokens:this.lexer.inlineTokens(f)}}let R=d.slice(2,-2);return{type:\"strong\",raw:d,text:R,tokens:this.lexer.inlineTokens(R)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal,\" \"),r=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&i&&(n=n.substring(1,n.length-1)),{type:\"codespan\",raw:t[0],text:n}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:\"br\",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:\"del\",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let n,r;return t[2]===\"@\"?(n=t[1],r=\"mailto:\"+n):(n=t[1],r=n),{type:\"link\",raw:t[0],text:n,href:r,tokens:[{type:\"text\",raw:n,text:n}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let n,r;if(t[2]===\"@\")n=t[0],r=\"mailto:\"+n;else{let i;do i=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??\"\";while(i!==t[0]);n=t[0],t[1]===\"www.\"?r=\"http://\"+t[0]:r=t[0]}return{type:\"link\",raw:t[0],text:n,href:r,tokens:[{type:\"text\",raw:n,text:n}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let n=this.lexer.state.inRawBlock;return{type:\"text\",raw:t[0],text:t[0],escaped:n}}}};var x=class u{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||T,this.options.tokenizer=this.options.tokenizer||new y,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:m,block:C.normal,inline:M.normal};this.options.pedantic?(t.block=C.pedantic,t.inline=M.pedantic):this.options.gfm&&(t.block=C.gfm,this.options.breaks?t.inline=M.breaks:t.inline=M.gfm),this.tokenizer.rules=t}static get rules(){return{block:C,inline:M}}static lex(e,t){return new u(t).lex(e)}static lexInline(e,t){return new u(t).inlineTokens(e)}lex(e){e=e.replace(m.carriageReturn,`\n`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){for(this.options.pedantic&&(e=e.replace(m.tabCharGlobal,\"    \").replace(m.spaceLine,\"\"));e;){let r;if(this.options.extensions?.block?.some(s=>(r=s.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))continue;if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length);let s=t.at(-1);r.raw.length===1&&s!==void 0?s.raw+=`\n`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length);let s=t.at(-1);s?.type===\"paragraph\"||s?.type===\"text\"?(s.raw+=(s.raw.endsWith(`\n`)?\"\":`\n`)+r.raw,s.text+=`\n`+r.text,this.inlineQueue.at(-1).src=s.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length);let s=t.at(-1);s?.type===\"paragraph\"||s?.type===\"text\"?(s.raw+=(s.raw.endsWith(`\n`)?\"\":`\n`)+r.raw,s.text+=`\n`+r.raw,this.inlineQueue.at(-1).src=s.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},t.push(r));continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}let i=e;if(this.options.extensions?.startBlock){let s=1/0,o=e.slice(1),a;this.options.extensions.startBlock.forEach(l=>{a=l.call({lexer:this},o),typeof a==\"number\"&&a>=0&&(s=Math.min(s,a))}),s<1/0&&s>=0&&(i=e.substring(0,s+1))}if(this.state.top&&(r=this.tokenizer.paragraph(i))){let s=t.at(-1);n&&s?.type===\"paragraph\"?(s.raw+=(s.raw.endsWith(`\n`)?\"\":`\n`)+r.raw,s.text+=`\n`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):t.push(r),n=i.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length);let s=t.at(-1);s?.type===\"text\"?(s.raw+=(s.raw.endsWith(`\n`)?\"\":`\n`)+r.raw,s.text+=`\n`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):t.push(r);continue}if(e){let s=\"Infinite loop on byte: \"+e.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n=e,r=null;if(this.tokens.links){let o=Object.keys(this.tokens.links);if(o.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)o.includes(r[0].slice(r[0].lastIndexOf(\"[\")+1,-1))&&(n=n.slice(0,r.index)+\"[\"+\"a\".repeat(r[0].length-2)+\"]\"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,r.index)+\"++\"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,r.index)+\"[\"+\"a\".repeat(r[0].length-2)+\"]\"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=this.options.hooks?.emStrongMask?.call({lexer:this},n)??n;let i=!1,s=\"\";for(;e;){i||(s=\"\"),i=!1;let o;if(this.options.extensions?.inline?.some(l=>(o=l.call({lexer:this},e,t))?(e=e.substring(o.raw.length),t.push(o),!0):!1))continue;if(o=this.tokenizer.escape(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.tag(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.link(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(o.raw.length);let l=t.at(-1);o.type===\"text\"&&l?.type===\"text\"?(l.raw+=o.raw,l.text+=o.text):t.push(o);continue}if(o=this.tokenizer.emStrong(e,n,s)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.codespan(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.br(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.del(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.autolink(e)){e=e.substring(o.raw.length),t.push(o);continue}if(!this.state.inLink&&(o=this.tokenizer.url(e))){e=e.substring(o.raw.length),t.push(o);continue}let a=e;if(this.options.extensions?.startInline){let l=1/0,c=e.slice(1),p;this.options.extensions.startInline.forEach(g=>{p=g.call({lexer:this},c),typeof p==\"number\"&&p>=0&&(l=Math.min(l,p))}),l<1/0&&l>=0&&(a=e.substring(0,l+1))}if(o=this.tokenizer.inlineText(a)){e=e.substring(o.raw.length),o.raw.slice(-1)!==\"_\"&&(s=o.raw.slice(-1)),i=!0;let l=t.at(-1);l?.type===\"text\"?(l.raw+=o.raw,l.text+=o.text):t.push(o);continue}if(e){let l=\"Infinite loop on byte: \"+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return t}};var P=class{options;parser;constructor(e){this.options=e||T}space(e){return\"\"}code({text:e,lang:t,escaped:n}){let r=(t||\"\").match(m.notSpaceStart)?.[0],i=e.replace(m.endingNewline,\"\")+`\n`;return r?'<pre><code class=\"language-'+w(r)+'\">'+(n?i:w(i,!0))+`</code></pre>\n`:\"<pre><code>\"+(n?i:w(i,!0))+`</code></pre>\n`}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}def(e){return\"\"}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return`<hr>\n`}list(e){let t=e.ordered,n=e.start,r=\"\";for(let o=0;o<e.items.length;o++){let a=e.items[o];r+=this.listitem(a)}let i=t?\"ol\":\"ul\",s=t&&n!==1?' start=\"'+n+'\"':\"\";return\"<\"+i+s+`>\n`+r+\"</\"+i+`>\n`}listitem(e){let t=\"\";if(e.task){let n=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type===\"paragraph\"?(e.tokens[0].text=n+\" \"+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type===\"text\"&&(e.tokens[0].tokens[0].text=n+\" \"+w(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:\"text\",raw:n+\" \",text:n+\" \",escaped:!0}):t+=n+\" \"}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox({checked:e}){return\"<input \"+(e?'checked=\"\" ':\"\")+'disabled=\"\" type=\"checkbox\">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t=\"\",n=\"\";for(let i=0;i<e.header.length;i++)n+=this.tablecell(e.header[i]);t+=this.tablerow({text:n});let r=\"\";for(let i=0;i<e.rows.length;i++){let s=e.rows[i];n=\"\";for(let o=0;o<s.length;o++)n+=this.tablecell(s[o]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>\n<thead>\n`+t+`</thead>\n`+r+`</table>\n`}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?\"th\":\"td\";return(e.align?`<${n} align=\"${e.align}\">`:`<${n}>`)+t+`</${n}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${w(e,!0)}</code>`}br(e){return\"<br>\"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let r=this.parser.parseInline(n),i=J(e);if(i===null)return r;e=i;let s='<a href=\"'+e+'\"';return t&&(s+=' title=\"'+w(t)+'\"'),s+=\">\"+r+\"</a>\",s}image({href:e,title:t,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let i=J(e);if(i===null)return w(n);e=i;let s=`<img src=\"${e}\" alt=\"${n}\"`;return t&&(s+=` title=\"${w(t)}\"`),s+=\">\",s}text(e){return\"tokens\"in e&&e.tokens?this.parser.parseInline(e.tokens):\"escaped\"in e&&e.escaped?e.text:w(e.text)}};var $=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return\"\"+e}image({text:e}){return\"\"+e}br(){return\"\"}};var b=class u{options;renderer;textRenderer;constructor(e){this.options=e||T,this.options.renderer=this.options.renderer||new P,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new $}static parse(e,t){return new u(t).parse(e)}static parseInline(e,t){return new u(t).parseInline(e)}parse(e,t=!0){let n=\"\";for(let r=0;r<e.length;r++){let i=e[r];if(this.options.extensions?.renderers?.[i.type]){let o=i,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||![\"space\",\"hr\",\"heading\",\"code\",\"table\",\"blockquote\",\"list\",\"html\",\"def\",\"paragraph\",\"text\"].includes(o.type)){n+=a||\"\";continue}}let s=i;switch(s.type){case\"space\":{n+=this.renderer.space(s);continue}case\"hr\":{n+=this.renderer.hr(s);continue}case\"heading\":{n+=this.renderer.heading(s);continue}case\"code\":{n+=this.renderer.code(s);continue}case\"table\":{n+=this.renderer.table(s);continue}case\"blockquote\":{n+=this.renderer.blockquote(s);continue}case\"list\":{n+=this.renderer.list(s);continue}case\"html\":{n+=this.renderer.html(s);continue}case\"def\":{n+=this.renderer.def(s);continue}case\"paragraph\":{n+=this.renderer.paragraph(s);continue}case\"text\":{let o=s,a=this.renderer.text(o);for(;r+1<e.length&&e[r+1].type===\"text\";)o=e[++r],a+=`\n`+this.renderer.text(o);t?n+=this.renderer.paragraph({type:\"paragraph\",raw:a,text:a,tokens:[{type:\"text\",raw:a,text:a,escaped:!0}]}):n+=a;continue}default:{let o='Token with \"'+s.type+'\" type was not found.';if(this.options.silent)return console.error(o),\"\";throw new Error(o)}}}return n}parseInline(e,t=this.renderer){let n=\"\";for(let r=0;r<e.length;r++){let i=e[r];if(this.options.extensions?.renderers?.[i.type]){let o=this.options.extensions.renderers[i.type].call({parser:this},i);if(o!==!1||![\"escape\",\"html\",\"link\",\"image\",\"strong\",\"em\",\"codespan\",\"br\",\"del\",\"text\"].includes(i.type)){n+=o||\"\";continue}}let s=i;switch(s.type){case\"escape\":{n+=t.text(s);break}case\"html\":{n+=t.html(s);break}case\"link\":{n+=t.link(s);break}case\"image\":{n+=t.image(s);break}case\"strong\":{n+=t.strong(s);break}case\"em\":{n+=t.em(s);break}case\"codespan\":{n+=t.codespan(s);break}case\"br\":{n+=t.br(s);break}case\"del\":{n+=t.del(s);break}case\"text\":{n+=t.text(s);break}default:{let o='Token with \"'+s.type+'\" type was not found.';if(this.options.silent)return console.error(o),\"\";throw new Error(o)}}}return n}};var S=class{options;block;constructor(e){this.options=e||T}static passThroughHooks=new Set([\"preprocess\",\"postprocess\",\"processAllTokens\",\"emStrongMask\"]);static passThroughHooksRespectAsync=new Set([\"preprocess\",\"postprocess\",\"processAllTokens\"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?x.lex:x.lexInline}provideParser(){return this.block?b.parse:b.parseInline}};var B=class{defaults=L();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=b;Renderer=P;TextRenderer=$;Lexer=x;Tokenizer=y;Hooks=S;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(let r of e)switch(n=n.concat(t.call(this,r)),r.type){case\"table\":{let i=r;for(let s of i.header)n=n.concat(this.walkTokens(s.tokens,t));for(let s of i.rows)for(let o of s)n=n.concat(this.walkTokens(o.tokens,t));break}case\"list\":{let i=r;n=n.concat(this.walkTokens(i.items,t));break}default:{let i=r;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(s=>{let o=i[s].flat(1/0);n=n.concat(this.walkTokens(o,t))}):i.tokens&&(n=n.concat(this.walkTokens(i.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error(\"extension name required\");if(\"renderer\"in i){let s=t.renderers[i.name];s?t.renderers[i.name]=function(...o){let a=i.renderer.apply(this,o);return a===!1&&(a=s.apply(this,o)),a}:t.renderers[i.name]=i.renderer}if(\"tokenizer\"in i){if(!i.level||i.level!==\"block\"&&i.level!==\"inline\")throw new Error(\"extension level must be 'block' or 'inline'\");let s=t[i.level];s?s.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level===\"block\"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level===\"inline\"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}\"childTokens\"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),r.extensions=t),n.renderer){let i=this.defaults.renderer||new P(this.defaults);for(let s in n.renderer){if(!(s in i))throw new Error(`renderer '${s}' does not exist`);if([\"options\",\"parser\"].includes(s))continue;let o=s,a=n.renderer[o],l=i[o];i[o]=(...c)=>{let p=a.apply(i,c);return p===!1&&(p=l.apply(i,c)),p||\"\"}}r.renderer=i}if(n.tokenizer){let i=this.defaults.tokenizer||new y(this.defaults);for(let s in n.tokenizer){if(!(s in i))throw new Error(`tokenizer '${s}' does not exist`);if([\"options\",\"rules\",\"lexer\"].includes(s))continue;let o=s,a=n.tokenizer[o],l=i[o];i[o]=(...c)=>{let p=a.apply(i,c);return p===!1&&(p=l.apply(i,c)),p}}r.tokenizer=i}if(n.hooks){let i=this.defaults.hooks||new S;for(let s in n.hooks){if(!(s in i))throw new Error(`hook '${s}' does not exist`);if([\"options\",\"block\"].includes(s))continue;let o=s,a=n.hooks[o],l=i[o];S.passThroughHooks.has(s)?i[o]=c=>{if(this.defaults.async&&S.passThroughHooksRespectAsync.has(s))return(async()=>{let g=await a.call(i,c);return l.call(i,g)})();let p=a.call(i,c);return l.call(i,p)}:i[o]=(...c)=>{if(this.defaults.async)return(async()=>{let g=await a.apply(i,c);return g===!1&&(g=await l.apply(i,c)),g})();let p=a.apply(i,c);return p===!1&&(p=l.apply(i,c)),p}}r.hooks=i}if(n.walkTokens){let i=this.defaults.walkTokens,s=n.walkTokens;r.walkTokens=function(o){let a=[];return a.push(s.call(this,o)),i&&(a=a.concat(i.call(this,o))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return x.lex(e,t??this.defaults)}parser(e,t){return b.parse(e,t??this.defaults)}parseMarkdown(e){return(n,r)=>{let i={...r},s={...this.defaults,...i},o=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&i.async===!1)return o(new Error(\"marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise.\"));if(typeof n>\"u\"||n===null)return o(new Error(\"marked(): input parameter is undefined or null\"));if(typeof n!=\"string\")return o(new Error(\"marked(): input parameter is of type \"+Object.prototype.toString.call(n)+\", string expected\"));if(s.hooks&&(s.hooks.options=s,s.hooks.block=e),s.async)return(async()=>{let a=s.hooks?await s.hooks.preprocess(n):n,c=await(s.hooks?await s.hooks.provideLexer():e?x.lex:x.lexInline)(a,s),p=s.hooks?await s.hooks.processAllTokens(c):c;s.walkTokens&&await Promise.all(this.walkTokens(p,s.walkTokens));let d=await(s.hooks?await s.hooks.provideParser():e?b.parse:b.parseInline)(p,s);return s.hooks?await s.hooks.postprocess(d):d})().catch(o);try{s.hooks&&(n=s.hooks.preprocess(n));let l=(s.hooks?s.hooks.provideLexer():e?x.lex:x.lexInline)(n,s);s.hooks&&(l=s.hooks.processAllTokens(l)),s.walkTokens&&this.walkTokens(l,s.walkTokens);let p=(s.hooks?s.hooks.provideParser():e?b.parse:b.parseInline)(l,s);return s.hooks&&(p=s.hooks.postprocess(p)),p}catch(a){return o(a)}}}onError(e,t){return n=>{if(n.message+=`\nPlease report this to https://github.com/markedjs/marked.`,e){let r=\"<p>An error occurred:</p><pre>\"+w(n.message+\"\",!0)+\"</pre>\";return t?Promise.resolve(r):r}if(t)return Promise.reject(n);throw n}}};var _=new B;function k(u,e){return _.parse(u,e)}k.options=k.setOptions=function(u){return _.setOptions(u),k.defaults=_.defaults,G(k.defaults),k};k.getDefaults=L;k.defaults=T;k.use=function(...u){return _.use(...u),k.defaults=_.defaults,G(k.defaults),k};k.walkTokens=function(u,e){return _.walkTokens(u,e)};k.parseInline=_.parseInline;k.Parser=b;k.parser=b.parse;k.Renderer=P;k.TextRenderer=$;k.Lexer=x;k.lexer=x.lex;k.Tokenizer=y;k.Hooks=S;k.parse=k;var Ht=k.options,Zt=k.setOptions,Gt=k.use,Nt=k.walkTokens,Ft=k.parseInline,jt=k,Qt=b.parse,Ut=x.lex;export{S as Hooks,x as Lexer,B as Marked,b as Parser,P as Renderer,$ as TextRenderer,y as Tokenizer,T as defaults,L as getDefaults,Ut as lexer,k as marked,Ht as options,jt as parse,Ft as parseInline,Qt as parser,Zt as setOptions,Gt as use,Nt as walkTokens};\n//# sourceMappingURL=marked.esm.js.map\n","<!--\n  MarkdownDisplay Component\n  Reusable component for rendering markdown content with consistent styling\n  Supports all standard markdown elements with proper typography\n-->\n\n<script lang=\"ts\">\n\timport { marked } from 'marked';\n\n\tinterface Props {\n\t\tcontent: string;\n\t\tclassName?: string;\n\t}\n\n\tlet props: Props = $props();\n\n\t// Parse markdown content\n\tlet renderedContent = $derived(marked.parse(props.content || ''));\n\n\t// Default class name if none provided\n\tlet displayClass = $derived(props.className || 'markdown-display');\n</script>\n\n<div class={displayClass}>\n\t<!-- marked.js sanitizes content by default to prevent XSS attacks -->\n\t<!-- eslint-disable-next-line svelte/no-at-html-tags -->\n\t{@html renderedContent}\n</div>\n","<script lang=\"ts\">\n\timport type { NodeConfig, NodeMetadata } from '../types/index.js';\n\timport Icon from '@iconify/svelte';\n\timport { createEventDispatcher } from 'svelte';\n\timport MarkdownDisplay from './MarkdownDisplay.svelte';\n\n\tconst dispatch = createEventDispatcher();\n\n\tconst props = $props<{\n\t\tdata: {\n\t\t\tlabel: string;\n\t\t\tconfig: NodeConfig;\n\t\t\tmetadata: NodeMetadata;\n\t\t\tnodeId?: string;\n\t\t\tonConfigOpen?: (node: {\n\t\t\t\tid: string;\n\t\t\t\ttype: string;\n\t\t\t\tdata: { label: string; config: NodeConfig; metadata: NodeMetadata };\n\t\t\t}) => void;\n\t\t};\n\t\tselected?: boolean;\n\t\tisProcessing?: boolean;\n\t\tisError?: boolean;\n\t\tisEditing?: boolean;\n\t}>();\n\n\t// Internal state for edit mode\n\tlet isInternalEditing = $state(false);\n\n\t// Reactive values that update when props change\n\tlet noteContent = $state((props.data.config?.content as string) || 'Add your notes here...');\n\tlet noteType = $state((props.data.config?.noteType as string) || 'info');\n\n\t// Update reactive values when props change\n\t$effect(() => {\n\t\tconst newContent = (props.data.config?.content as string) || 'Add your notes here...';\n\t\tconst newType = (props.data.config?.noteType as string) || 'info';\n\n\t\tif (noteContent !== newContent) {\n\t\t\tnoteContent = newContent;\n\t\t}\n\t\tif (noteType !== newType) {\n\t\t\tnoteType = newType;\n\t\t}\n\t});\n\n\t// Note type configuration\n\tconst noteTypes = {\n\t\tinfo: {\n\t\t\tname: 'Info',\n\t\t\tbgColor: 'bg-blue-50',\n\t\t\tborderColor: 'border-blue-200',\n\t\t\ttextColor: 'text-blue-800',\n\t\t\ticonColor: 'text-blue-500',\n\t\t\ticon: 'mdi:information'\n\t\t},\n\t\twarning: {\n\t\t\tname: 'Warning',\n\t\t\tbgColor: 'bg-yellow-50',\n\t\t\tborderColor: 'border-yellow-200',\n\t\t\ttextColor: 'text-yellow-800',\n\t\t\ticonColor: 'text-yellow-500',\n\t\t\ticon: 'mdi:alert'\n\t\t},\n\t\tsuccess: {\n\t\t\tname: 'Success',\n\t\t\tbgColor: 'bg-green-50',\n\t\t\tborderColor: 'border-green-200',\n\t\t\ttextColor: 'text-green-800',\n\t\t\ticonColor: 'text-green-500',\n\t\t\ticon: 'mdi:check-circle'\n\t\t},\n\t\terror: {\n\t\t\tname: 'Error',\n\t\t\tbgColor: 'bg-red-50',\n\t\t\tborderColor: 'border-red-200',\n\t\t\ttextColor: 'text-red-800',\n\t\t\ticonColor: 'text-red-500',\n\t\t\ticon: 'mdi:close-circle'\n\t\t},\n\t\tnote: {\n\t\t\tname: 'Note',\n\t\t\tbgColor: 'bg-gray-50',\n\t\t\tborderColor: 'border-gray-200',\n\t\t\ttextColor: 'text-gray-800',\n\t\t\ticonColor: 'text-gray-500',\n\t\t\ticon: 'mdi:note-text'\n\t\t}\n\t};\n\n\t// Reactive derived values\n\tlet currentType = $derived(noteTypes[noteType as keyof typeof noteTypes] || noteTypes.info);\n\n\t// Handle content updates\n\tfunction handleContentChange(event: Event) {\n\t\tconst target = event.target as HTMLTextAreaElement;\n\t\tnoteContent = target.value;\n\t\tif (props.data.config) {\n\t\t\tprops.data.config.content = target.value;\n\t\t\t// Dispatch event to notify parent of config change\n\t\t\tdispatch('configChange', { config: props.data.config });\n\t\t}\n\t}\n\n\t// Handle note type changes\n\tfunction handleTypeChange(event: Event) {\n\t\tconst target = event.target as HTMLSelectElement;\n\t\tnoteType = target.value;\n\t\tif (props.data.config) {\n\t\t\tprops.data.config.noteType = target.value;\n\t\t\t// Dispatch event to notify parent of config change\n\t\t\tdispatch('configChange', { config: props.data.config });\n\t\t}\n\t}\n\n\t// Toggle edit mode\n\tfunction toggleEditMode() {\n\t\tisInternalEditing = !isInternalEditing;\n\t\t// Dispatch event to notify parent of state change\n\t\tdispatch('editModeChange', { isEditing: isInternalEditing });\n\t}\n\n\t// Handle configuration sidebar - now using global ConfigSidebar\n\tfunction openConfigSidebar(): void {\n\t\tif (props.data.onConfigOpen) {\n\t\t\t// Create a WorkflowNodeType-like object for the global ConfigSidebar\n\t\t\tconst nodeForConfig = {\n\t\t\t\tid: props.data.nodeId || 'unknown',\n\t\t\t\ttype: 'note',\n\t\t\t\tdata: props.data\n\t\t\t};\n\t\t\tprops.data.onConfigOpen(nodeForConfig);\n\t\t}\n\t}\n\n\t// Handle node click - only handle selection, no config opening\n\tfunction handleNodeClick(): void {\n\t\t// Node selection is handled by Svelte Flow\n\t}\n\n\t// Handle double-click to open config\n\tfunction handleDoubleClick(): void {\n\t\topenConfigSidebar();\n\t}\n\n\t// Handle keyboard events\n\tfunction handleKeydown(event: KeyboardEvent): void {\n\t\tif (event.key === 'Enter' || event.key === ' ') {\n\t\t\tevent.preventDefault();\n\t\t\thandleDoubleClick();\n\t\t}\n\t}\n</script>\n\n<div\n\tclass=\"flowdrop-notes-node {currentType.bgColor}\"\n\tclass:flowdrop-notes-node--selected={props.selected}\n\tclass:flowdrop-notes-node--processing={props.isProcessing}\n\tclass:flowdrop-notes-node--error={props.isError}\n\tonclick={handleNodeClick}\n\tondblclick={handleDoubleClick}\n\tonkeydown={handleKeydown}\n\trole=\"button\"\n\ttabindex=\"0\"\n>\n\t{#if isInternalEditing || props.isEditing}\n\t\t<!-- Edit Mode -->\n\t\t<div class=\"flowdrop-notes-node__edit\">\n\t\t\t<!-- Note Type Selector -->\n\t\t\t<div class=\"flowdrop-notes-node__type-selector\">\n\t\t\t\t<label for=\"note-type\" class=\"flowdrop-notes-node__label\">Note Type:</label>\n\t\t\t\t<select\n\t\t\t\t\tid=\"note-type\"\n\t\t\t\t\tclass=\"flowdrop-notes-node__select\"\n\t\t\t\t\tvalue={noteType}\n\t\t\t\t\tonchange={handleTypeChange}\n\t\t\t\t>\n\t\t\t\t\t{#each Object.entries(noteTypes) as [key, type] (key)}\n\t\t\t\t\t\t<option value={key}>{type.name}</option>\n\t\t\t\t\t{/each}\n\t\t\t\t</select>\n\t\t\t</div>\n\n\t\t\t<!-- Markdown Textarea -->\n\t\t\t<div class=\"flowdrop-notes-node__textarea-container\">\n\t\t\t\t<label for=\"note-content\" class=\"flowdrop-notes-node__label\">Content (Markdown):</label>\n\t\t\t\t<textarea\n\t\t\t\t\tid=\"note-content\"\n\t\t\t\t\tclass=\"flowdrop-notes-node__textarea\"\n\t\t\t\t\tplaceholder=\"Write your note in Markdown...\"\n\t\t\t\t\tvalue={noteContent}\n\t\t\t\t\toninput={handleContentChange}\n\t\t\t\t></textarea>\n\t\t\t</div>\n\n\t\t\t<!-- Save/Cancel Buttons -->\n\t\t\t<div class=\"flowdrop-notes-node__edit-actions\">\n\t\t\t\t<button\n\t\t\t\t\tclass=\"flowdrop-notes-node__btn flowdrop-notes-node__btn--save\"\n\t\t\t\t\tonclick={toggleEditMode}\n\t\t\t\t>\n\t\t\t\t\t<Icon icon=\"mdi:check\" />\n\t\t\t\t\tSave\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"flowdrop-notes-node__btn flowdrop-notes-node__btn--cancel\"\n\t\t\t\t\tonclick={toggleEditMode}\n\t\t\t\t>\n\t\t\t\t\t<Icon icon=\"mdi:close\" />\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t{:else}\n\t\t<!-- Display Mode -->\n\t\t<div class=\"flowdrop-notes-node__content {currentType.borderColor} {currentType.textColor}\">\n\t\t\t<!-- Header with icon, type, and edit button -->\n\t\t\t<div class=\"flowdrop-notes-node__header\">\n\t\t\t\t<div class=\"flowdrop-notes-node__header-left\">\n\t\t\t\t\t<Icon icon={currentType.icon} class=\"flowdrop-notes-node__icon {currentType.iconColor}\" />\n\t\t\t\t\t<span class=\"flowdrop-notes-node__type\">{currentType.name}</span>\n\t\t\t\t</div>\n\t\t\t\t<button class=\"flowdrop-notes-node__edit-btn\" onclick={toggleEditMode} title=\"Edit note\">\n\t\t\t\t\t<Icon icon=\"mdi:pencil\" />\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<!-- Rendered markdown content -->\n\t\t\t<div class=\"flowdrop-notes-node__body\">\n\t\t\t\t<MarkdownDisplay content={noteContent} className=\"flowdrop-notes-node__markdown\" />\n\t\t\t</div>\n\n\t\t\t<!-- Processing indicator -->\n\t\t\t{#if props.isProcessing}\n\t\t\t\t<div class=\"flowdrop-notes-node__processing\">\n\t\t\t\t\t<div class=\"flowdrop-notes-node__spinner\"></div>\n\t\t\t\t\t<span>Processing...</span>\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<!-- Error indicator -->\n\t\t\t{#if props.isError}\n\t\t\t\t<div class=\"flowdrop-notes-node__error\">\n\t\t\t\t\t<Icon icon=\"mdi:alert-circle\" class=\"flowdrop-notes-node__error-icon\" />\n\t\t\t\t\t<span>Error occurred</span>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t{/if}\n\n\t<!-- Config button -->\n\t<button\n\t\tclass=\"flowdrop-notes-node__config-btn\"\n\t\tonclick={openConfigSidebar}\n\t\ttitle=\"Configure note\"\n\t>\n\t\t<Icon icon=\"mdi:cog\" />\n\t</button>\n</div>\n\n<!-- Configuration Sidebar -->\n<!-- ConfigSidebar removed - now using global ConfigSidebar in WorkflowEditor -->\n\n<style>\n\t.flowdrop-notes-node {\n\t\tmin-width: var(--notes-node-min-width);\n\t\tmax-width: var(--notes-node-max-width);\n\t\twidth: var(--notes-node-width);\n\t\tborder-radius: var(--notes-node-border-radius);\n\t\tborder: 1px solid;\n\t\tbackground: var(--notes-node-background);\n\t\tbackdrop-filter: var(--notes-node-backdrop-filter);\n\t\tbox-shadow: var(--notes-node-box-shadow);\n\t\ttransition: var(--notes-node-transition);\n\t\toverflow: hidden;\n\t\tz-index: 5;\n\t}\n\n\t/* Background color overrides for different note types */\n\t.flowdrop-notes-node.bg-blue-50 {\n\t\tbackground-color: var(--notes-node-info-bg);\n\t\tborder-color: var(--notes-node-info-border);\n\t}\n\n\t.flowdrop-notes-node.bg-yellow-50 {\n\t\tbackground-color: var(--notes-node-warning-bg);\n\t\tborder-color: var(--notes-node-warning-border);\n\t}\n\n\t.flowdrop-notes-node.bg-green-50 {\n\t\tbackground-color: var(--notes-node-success-bg);\n\t\tborder-color: var(--notes-node-success-border);\n\t}\n\n\t.flowdrop-notes-node.bg-red-50 {\n\t\tbackground-color: var(--notes-node-error-bg);\n\t\tborder-color: var(--notes-node-error-border);\n\t}\n\n\t.flowdrop-notes-node.bg-gray-50 {\n\t\tbackground-color: var(--notes-node-note-bg);\n\t\tborder-color: var(--notes-node-note-border);\n\t}\n\n\t.flowdrop-notes-node:hover {\n\t\tbox-shadow: var(--notes-node-hover-box-shadow);\n\t\ttransform: translateY(-1px);\n\t}\n\n\t.flowdrop-notes-node--selected {\n\t\tbox-shadow: var(--notes-node-selected-box-shadow);\n\t}\n\n\t.flowdrop-notes-node--processing {\n\t\topacity: 0.7;\n\t}\n\n\t.flowdrop-notes-node--error {\n\t\tborder-color: #ef4444 !important;\n\t}\n\n\t/* Edit Mode Styles */\n\t.flowdrop-notes-node__edit {\n\t\tpadding: var(--notes-node-padding);\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t.flowdrop-notes-node__type-selector {\n\t\tmargin-bottom: 1rem;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-notes-node__label {\n\t\tdisplay: block;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 600;\n\t\tmargin-bottom: 0.5rem;\n\t\tcolor: #374151;\n\t}\n\n\t.flowdrop-notes-node__select {\n\t\twidth: 100%;\n\t\tpadding: 0.5rem;\n\t\tborder: 1px solid #d1d5db;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\tbackground-color: white;\n\t}\n\n\t.flowdrop-notes-node__textarea-container {\n\t\tmargin-bottom: 1rem;\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t.flowdrop-notes-node__textarea {\n\t\twidth: 100%;\n\t\tmin-height: 120px;\n\t\tflex: 1;\n\t\tpadding: 0.75rem;\n\t\tborder: 1px solid #d1d5db;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\tfont-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n\t\tline-height: 1.5;\n\t\tresize: none; /* Prevent resizing to maintain consistent size */\n\t\tbackground-color: white;\n\t}\n\n\t.flowdrop-notes-node__textarea:focus {\n\t\toutline: none;\n\t\tborder-color: #3b82f6;\n\t\tbox-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n\t}\n\n\t.flowdrop-notes-node__edit-actions {\n\t\tdisplay: flex;\n\t\tgap: 0.5rem;\n\t\tmargin-top: 1rem;\n\t\tjustify-content: flex-end;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-notes-node__btn {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.25rem;\n\t\tpadding: 0.5rem 1rem;\n\t\tborder: 1px solid;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease-in-out;\n\t}\n\n\t.flowdrop-notes-node__btn--save {\n\t\tbackground-color: #10b981;\n\t\tborder-color: #10b981;\n\t\tcolor: white;\n\t}\n\n\t.flowdrop-notes-node__btn--save:hover {\n\t\tbackground-color: #059669;\n\t\tborder-color: #059669;\n\t}\n\n\t.flowdrop-notes-node__btn--cancel {\n\t\tbackground-color: transparent;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n\n\t.flowdrop-notes-node__btn--cancel:hover {\n\t\tbackground-color: #f3f4f6;\n\t\tborder-color: #9ca3af;\n\t}\n\n\t/* Display Mode Styles */\n\t.flowdrop-notes-node__content {\n\t\tpadding: var(--notes-node-padding);\n\t\tborder-radius: var(--notes-node-border-radius);\n\t\tborder: 1px solid;\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t.flowdrop-notes-node__header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tmargin-bottom: 0.75rem;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-notes-node__header-left {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t}\n\n\t.flowdrop-notes-node__edit-btn {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 2rem;\n\t\theight: 2rem;\n\t\tborder: none;\n\t\tbackground: transparent;\n\t\tcolor: currentColor;\n\t\topacity: 0.7;\n\t\tcursor: pointer;\n\t\tborder-radius: 0.25rem;\n\t\ttransition: all 0.2s ease-in-out;\n\t}\n\n\t.flowdrop-notes-node__edit-btn:hover {\n\t\topacity: 1;\n\t\tbackground-color: rgba(0, 0, 0, 0.1);\n\t}\n\n\t.flowdrop-notes-node__icon {\n\t\twidth: 1.75rem;\n\t\theight: 1.75rem;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-notes-node__type {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 600;\n\t}\n\n\t.flowdrop-notes-node__body {\n\t\tmargin-bottom: 0.5rem;\n\t\tflex: 1;\n\t\toverflow-y: auto;\n\t}\n\n\t.flowdrop-notes-node__processing {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tfont-size: 0.75rem;\n\t\topacity: 0.7;\n\t}\n\n\t.flowdrop-notes-node__spinner {\n\t\twidth: 0.75rem;\n\t\theight: 0.75rem;\n\t\tborder: 1px solid currentColor;\n\t\tborder-top-color: transparent;\n\t\tborder-radius: 50%;\n\t\tanimation: spin 1s linear infinite;\n\t}\n\n\t.flowdrop-notes-node__error {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tfont-size: 0.75rem;\n\t\tcolor: #ef4444;\n\t}\n\n\t.flowdrop-notes-node__error-icon {\n\t\twidth: 0.75rem;\n\t\theight: 0.75rem;\n\t}\n\n\t@keyframes spin {\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t.flowdrop-notes-node__config-btn {\n\t\tposition: absolute;\n\t\ttop: 0.5rem;\n\t\tright: 0.5rem;\n\t\twidth: 1.5rem;\n\t\theight: 1.5rem;\n\t\tbackground-color: rgba(255, 255, 255, 0.9);\n\t\tborder: 1px solid #e5e7eb;\n\t\tborder-radius: 0.25rem;\n\t\tcolor: #6b7280;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\topacity: 0;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tbackdrop-filter: blur(4px);\n\t\tz-index: 15;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.flowdrop-notes-node:hover .flowdrop-notes-node__config-btn {\n\t\topacity: 1;\n\t}\n\n\t.flowdrop-notes-node__config-btn:hover {\n\t\tbackground-color: #f9fafb;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n\n\t/* Responsive design */\n\t@media (max-width: 640px) {\n\t\t.flowdrop-notes-node {\n\t\t\tmin-width: 200px;\n\t\t\tmax-width: 350px;\n\t\t}\n\n\t\t.flowdrop-notes-node__edit,\n\t\t.flowdrop-notes-node__content {\n\t\t\tpadding: 0.75rem;\n\t\t}\n\n\t\t.flowdrop-notes-node__textarea {\n\t\t\tmin-height: 100px;\n\t\t}\n\t}\n</style>\n","<!--\n  Simple Node Component\n  A simple node with optional input and output ports\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport { Position, Handle } from '@xyflow/svelte';\n\timport type { NodeConfig, NodeMetadata } from '../types/index.js';\n\timport Icon from '@iconify/svelte';\n\timport { getDataTypeColor } from '../utils/colors.js';\n\n\tconst props = $props<{\n\t\tdata: {\n\t\t\tlabel: string;\n\t\t\tconfig: NodeConfig;\n\t\t\tmetadata: NodeMetadata;\n\t\t\tnodeId?: string;\n\t\t\tonConfigOpen?: (node: {\n\t\t\t\tid: string;\n\t\t\t\ttype: string;\n\t\t\t\tdata: { label: string; config: NodeConfig; metadata: NodeMetadata };\n\t\t\t}) => void;\n\t\t};\n\t\tselected?: boolean;\n\t\tisProcessing?: boolean;\n\t\tisError?: boolean;\n\t}>();\n\n\t// Removed local config state - now using global ConfigSidebar\n\n\t// Prioritize metadata icon over config icon for simple nodes (metadata is the node definition)\n\tlet nodeIcon = $derived(\n\t\t(props.data.metadata?.icon as string) || (props.data.config?.icon as string) || 'mdi:square'\n\t);\n\tlet nodeColor = $derived(\n\t\t(props.data.metadata?.color as string) || (props.data.config?.color as string) || '#6366f1'\n\t);\n\tlet nodeLayout = $derived((props.data.config?.layout as string) || 'normal');\n\n\t// Layout configurations\n\tconst layoutConfig = {\n\t\tcompact: {\n\t\t\twidth: '80px',\n\t\t\theight: '80px',\n\t\t\ticonSize: '2rem',\n\t\t\tshowHeader: false\n\t\t},\n\t\tnormal: {\n\t\t\twidth: '18rem',\n\t\t\theight: 'auto',\n\t\t\ticonSize: '1rem',\n\t\t\tshowHeader: true\n\t\t}\n\t};\n\n\tlet currentLayout = $derived(\n\t\tlayoutConfig[nodeLayout as keyof typeof layoutConfig] || layoutConfig.normal\n\t);\n\tlet isCompact = $derived(nodeLayout === 'compact');\n\n\t// Handle configuration sidebar - now using global ConfigSidebar\n\tfunction openConfigSidebar(): void {\n\t\tif (props.data.onConfigOpen) {\n\t\t\t// Create a WorkflowNodeType-like object for the global ConfigSidebar\n\t\t\tconst nodeForConfig = {\n\t\t\t\tid: props.data.nodeId || 'unknown',\n\t\t\t\ttype: 'simple',\n\t\t\t\tdata: props.data\n\t\t\t};\n\t\t\tprops.data.onConfigOpen(nodeForConfig);\n\t\t}\n\t}\n\n\t// Handle double-click to open config\n\tfunction handleDoubleClick(): void {\n\t\topenConfigSidebar();\n\t}\n\n\t// Handle single click - only handle selection, no config opening\n\tfunction handleClick(): void {\n\t\t// Node selection is handled by Svelte Flow\n\t}\n\n\t// Handle keyboard events\n\tfunction handleKeydown(event: KeyboardEvent): void {\n\t\tif (event.key === 'Enter' || event.key === ' ') {\n\t\t\tevent.preventDefault();\n\t\t\thandleDoubleClick();\n\t\t}\n\t}\n\n\t// Get first input/output ports for simple node representation\n\t// Special handling for trigger ports - they should always be shown if present\n\tlet triggerInputPort = $derived(\n\t\tprops.data.metadata?.inputs?.find((port) => port.dataType === 'trigger')\n\t);\n\tlet triggerOutputPort = $derived(\n\t\tprops.data.metadata?.outputs?.find((port) => port.dataType === 'trigger')\n\t);\n\n\t// Get first non-trigger ports for data connections\n\tlet firstDataInputPort = $derived(\n\t\tprops.data.metadata?.inputs?.find((port) => port.dataType !== 'trigger')\n\t);\n\tlet firstDataOutputPort = $derived(\n\t\tprops.data.metadata?.outputs?.find((port) => port.dataType !== 'trigger')\n\t);\n\n\t// Check if we need to show both trigger and data ports\n\tlet hasBothInputTypes = $derived(!!triggerInputPort && !!firstDataInputPort);\n\tlet hasBothOutputTypes = $derived(!!triggerOutputPort && !!firstDataOutputPort);\n</script>\n\n<!-- Input Handles -->\n{#if firstDataInputPort}\n\t<!-- Data Input - positioned at top-left if both types exist, otherwise center -->\n\t<Handle\n\t\ttype=\"target\"\n\t\tposition={Position.Left}\n\t\tstyle=\"background-color: {getDataTypeColor(\n\t\t\tfirstDataInputPort.dataType\n\t\t)}; border-color: '#ffffff'; top: {hasBothInputTypes ? '25%' : '50%'}; z-index: 30;\"\n\t\tid={`${props.data.nodeId}-input-${firstDataInputPort.id}`}\n\t/>\n{/if}\n{#if triggerInputPort}\n\t<!-- Trigger Input - positioned at bottom-left -->\n\t<Handle\n\t\ttype=\"target\"\n\t\tposition={Position.Left}\n\t\tstyle=\"background-color: {getDataTypeColor(\n\t\t\ttriggerInputPort.dataType\n\t\t)}; border-color: '#ffffff'; top: {hasBothInputTypes ? '75%' : '50%'}; z-index: 30;\"\n\t\tid={`${props.data.nodeId}-input-${triggerInputPort.id}`}\n\t/>\n{/if}\n\n<!-- Simple Node -->\n<div\n\tclass=\"flowdrop-simple-node\"\n\tclass:flowdrop-simple-node--compact={isCompact}\n\tclass:flowdrop-simple-node--normal={!isCompact}\n\tclass:flowdrop-simple-node--selected={props.selected}\n\tclass:flowdrop-simple-node--processing={props.isProcessing}\n\tclass:flowdrop-simple-node--error={props.isError}\n\tonclick={handleClick}\n\tondblclick={handleDoubleClick}\n\tonkeydown={handleKeydown}\n\trole=\"button\"\n\ttabindex=\"0\"\n>\n\t{#if isCompact}\n\t\t<!-- Compact Layout: Just centered icon -->\n\t\t<div class=\"flowdrop-simple-node__compact-content\">\n\t\t\t<Icon\n\t\t\t\ticon={nodeIcon}\n\t\t\t\tclass=\"flowdrop-simple-node__compact-icon\"\n\t\t\t\tstyle=\"color: {nodeColor}; font-size: {currentLayout.iconSize};\"\n\t\t\t/>\n\t\t</div>\n\t{:else}\n\t\t<!-- Normal Layout: Header with title and description -->\n\t\t<div class=\"flowdrop-simple-node__header\">\n\t\t\t<div class=\"flowdrop-simple-node__header-content\">\n\t\t\t\t<!-- Node Icon -->\n\t\t\t\t<div class=\"flowdrop-simple-node__icon-container\" style=\"background-color: {nodeColor}\">\n\t\t\t\t\t<Icon icon={nodeIcon} class=\"flowdrop-simple-node__icon\" />\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Node Title -->\n\t\t\t\t<h3 class=\"flowdrop-simple-node__title\">\n\t\t\t\t\t{props.data.label}\n\t\t\t\t</h3>\n\t\t\t</div>\n\n\t\t\t<!-- Node Description -->\n\t\t\t<p class=\"flowdrop-simple-node__description\">\n\t\t\t\t{props.data.metadata?.description || 'A configurable simple node'}\n\t\t\t</p>\n\t\t</div>\n\t{/if}\n\n\t<!-- Processing indicator -->\n\t{#if props.isProcessing}\n\t\t<div class=\"flowdrop-simple-node__processing\">\n\t\t\t<div class=\"flowdrop-simple-node__spinner\"></div>\n\t\t</div>\n\t{/if}\n\n\t<!-- Error indicator -->\n\t{#if props.isError}\n\t\t<div class=\"flowdrop-simple-node__error\">\n\t\t\t<Icon icon=\"mdi:alert-circle\" class=\"flowdrop-simple-node__error-icon\" />\n\t\t</div>\n\t{/if}\n\n\t<!-- Config button -->\n\t<button\n\t\tclass=\"flowdrop-simple-node__config-btn\"\n\t\tonclick={openConfigSidebar}\n\t\ttitle=\"Configure node\"\n\t>\n\t\t<Icon icon=\"mdi:cog\" />\n\t</button>\n</div>\n\n<!-- Output Handles -->\n{#if firstDataOutputPort}\n\t<!-- Data Output - positioned at top-right if both types exist, otherwise center -->\n\t<Handle\n\t\ttype=\"source\"\n\t\tposition={Position.Right}\n\t\tid={`${props.data.nodeId}-output-${firstDataOutputPort.id}`}\n\t\tstyle=\"background-color: {getDataTypeColor(\n\t\t\tfirstDataOutputPort.dataType\n\t\t)}; border-color: '#ffffff'; top: {hasBothOutputTypes ? '25%' : '50%'}; z-index: 30;\"\n\t/>\n{/if}\n{#if triggerOutputPort}\n\t<!-- Trigger Output - positioned at bottom-right -->\n\t<Handle\n\t\ttype=\"source\"\n\t\tposition={Position.Right}\n\t\tid={`${props.data.nodeId}-output-${triggerOutputPort.id}`}\n\t\tstyle=\"background-color: {getDataTypeColor(\n\t\t\ttriggerOutputPort.dataType\n\t\t)}; border-color: '#ffffff'; top: {hasBothOutputTypes ? '75%' : '50%'}; z-index: 30;\"\n\t/>\n{/if}\n\n<!-- ConfigSidebar removed - now using global ConfigSidebar in WorkflowEditor -->\n\n<style>\n\t.flowdrop-simple-node {\n\t\tposition: relative;\n\t\tbackground-color: #ffffff;\n\t\tborder: 2px solid #e5e7eb;\n\t\tborder-radius: 0.75rem;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tbox-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n\t\toverflow: visible; /* Changed from hidden to visible to allow handles to be properly accessible */\n\t\tz-index: 10;\n\t}\n\n\t/* Normal layout (default) */\n\t.flowdrop-simple-node--normal {\n\t\twidth: 18rem;\n\t}\n\n\t/* Compact layout */\n\t.flowdrop-simple-node--compact {\n\t\twidth: 80px;\n\t\theight: 80px;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-simple-node:hover {\n\t\tbox-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n\t}\n\n\t.flowdrop-simple-node--selected {\n\t\tbox-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n\t\tborder: 2px solid #3b82f6;\n\t}\n\n\t.flowdrop-simple-node--processing {\n\t\topacity: 0.7;\n\t}\n\n\t.flowdrop-simple-node--error {\n\t\tborder-color: #ef4444 !important;\n\t\tbackground-color: #fef2f2 !important;\n\t}\n\n\t.flowdrop-simple-node__header {\n\t\tpadding: 1rem;\n\t\tbackground-color: #f9fafb;\n\t\tborder-radius: 0.75rem;\n\t}\n\n\t.flowdrop-simple-node__header-content {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.75rem;\n\t}\n\n\t.flowdrop-simple-node__icon-container {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 2rem;\n\t\theight: 2rem;\n\t\tborder-radius: 0.375rem;\n\t\tflex-shrink: 0;\n\t}\n\n\t/* Compact layout styles */\n\t.flowdrop-simple-node__compact-content {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t:global(.flowdrop-simple-node__compact-icon) {\n\t\tfilter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));\n\t}\n\n\t.flowdrop-simple-node__title {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcolor: #1f2937;\n\t\tmargin: 0;\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t\tline-height: 1.4;\n\t}\n\n\t.flowdrop-simple-node__description {\n\t\tfont-size: 0.75rem;\n\t\tcolor: #6b7280;\n\t\tmargin: 0.25rem 0 0 0;\n\t\tline-height: 1.3;\n\t}\n\n\t/* Compact layout text constraints */\n\t.flowdrop-simple-node--compact .flowdrop-simple-node__title {\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.flowdrop-simple-node--compact .flowdrop-simple-node__description {\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t:global(.flowdrop-simple-node__icon) {\n\t\tcolor: white;\n\t\tfont-size: 1rem;\n\t\tfilter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));\n\t}\n\n\t/* Label styling removed - now using header title */\n\n\t.flowdrop-simple-node__processing {\n\t\tposition: absolute;\n\t\ttop: 4px;\n\t\tright: 4px;\n\t}\n\n\t.flowdrop-simple-node__spinner {\n\t\twidth: 12px;\n\t\theight: 12px;\n\t\tborder: 1px solid rgba(255, 255, 255, 0.3);\n\t\tborder-top: 1px solid white;\n\t\tborder-radius: 50%;\n\t\tanimation: spin 1s linear infinite;\n\t}\n\n\t.flowdrop-simple-node__error {\n\t\tposition: absolute;\n\t\ttop: 4px;\n\t\tright: 4px;\n\t\tcolor: #ef4444;\n\t}\n\n\t:global(.flowdrop-simple-node__error-icon) {\n\t\twidth: 12px;\n\t\theight: 12px;\n\t}\n\n\t.flowdrop-simple-node__config-btn {\n\t\tposition: absolute;\n\t\ttop: 0.5rem;\n\t\tright: 0.5rem;\n\t\twidth: 1.5rem;\n\t\theight: 1.5rem;\n\t\tbackground-color: rgba(255, 255, 255, 0.9);\n\t\tborder: 1px solid #e5e7eb;\n\t\tborder-radius: 0.25rem;\n\t\tcolor: #6b7280;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\topacity: 0;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tbackdrop-filter: blur(4px);\n\t\tz-index: 15;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.flowdrop-simple-node:hover .flowdrop-simple-node__config-btn {\n\t\topacity: 1;\n\t}\n\n\t.flowdrop-simple-node__config-btn:hover {\n\t\tbackground-color: #f9fafb;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n\n\t@keyframes spin {\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t/* Handle styles - matching WorkflowNode exactly */\n\t:global(.svelte-flow__node-simple .svelte-flow__handle) {\n\t\twidth: 18px !important;\n\t\theight: 18px !important;\n\t\tborder-radius: 50% !important;\n\t\ttransition: all 0.2s ease-in-out !important;\n\t\tcursor: pointer !important;\n\t\tz-index: 20 !important;\n\t\tpointer-events: auto !important;\n\t}\n\n\t:global(.svelte-flow__node-simple .svelte-flow__handle-left) {\n\t\tleft: -6px !important;\n\t}\n\n\t:global(.svelte-flow__node-simple .svelte-flow__handle-right) {\n\t\tright: -6px !important;\n\t}\n\n\t:global(.svelte-flow__node-simple .svelte-flow__handle:focus) {\n\t\toutline: 2px solid #3b82f6 !important;\n\t\toutline-offset: 2px !important;\n\t}\n</style>\n","<!--\n  Square Node Component\n  A simple square node with optional input and output ports\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport { Position, Handle } from '@xyflow/svelte';\n\timport type { NodeConfig, NodeMetadata } from '../types/index.js';\n\timport Icon from '@iconify/svelte';\n\timport { getDataTypeColor } from '../utils/colors.js';\n\n\tconst props = $props<{\n\t\tdata: {\n\t\t\tlabel: string;\n\t\t\tconfig: NodeConfig;\n\t\t\tmetadata: NodeMetadata;\n\t\t\tnodeId?: string;\n\t\t\tonConfigOpen?: (node: {\n\t\t\t\tid: string;\n\t\t\t\ttype: string;\n\t\t\t\tdata: { label: string; config: NodeConfig; metadata: NodeMetadata };\n\t\t\t}) => void;\n\t\t};\n\t\tselected?: boolean;\n\t\tisProcessing?: boolean;\n\t\tisError?: boolean;\n\t}>();\n\n\t// Removed local config state - now using global ConfigSidebar\n\n\t// Prioritize metadata icon over config icon for square nodes (metadata is the node definition)\n\tlet squareIcon = $derived(\n\t\t(props.data.metadata?.icon as string) || (props.data.config?.icon as string) || 'mdi:square'\n\t);\n\tlet squareColor = $derived(\n\t\t(props.data.metadata?.color as string) || (props.data.config?.color as string) || '#6366f1'\n\t);\n\n\t// Layout configuration for square nodes (always compact)\n\tconst currentLayout = {\n\t\twidth: '80px',\n\t\theight: '80px',\n\t\ticonSize: '2rem',\n\t\tshowHeader: false\n\t};\n\n\t// Handle configuration sidebar - now using global ConfigSidebar\n\tfunction openConfigSidebar(): void {\n\t\tif (props.data.onConfigOpen) {\n\t\t\t// Create a WorkflowNodeType-like object for the global ConfigSidebar\n\t\t\tconst nodeForConfig = {\n\t\t\t\tid: props.data.nodeId || 'unknown',\n\t\t\t\ttype: 'square',\n\t\t\t\tdata: props.data\n\t\t\t};\n\t\t\tprops.data.onConfigOpen(nodeForConfig);\n\t\t}\n\t}\n\n\t// Handle double-click to open config\n\tfunction handleDoubleClick(): void {\n\t\topenConfigSidebar();\n\t}\n\n\t// Handle single click to open config\n\tfunction handleClick(): void {\n\t\topenConfigSidebar();\n\t}\n\n\t// Handle keyboard events\n\tfunction handleKeydown(event: KeyboardEvent): void {\n\t\tif (event.key === 'Enter' || event.key === ' ') {\n\t\t\tevent.preventDefault();\n\t\t\topenConfigSidebar();\n\t\t}\n\t}\n\n\t// Get first input/output ports for square node representation\n\t// Special handling for trigger ports - they should always be shown if present\n\tlet triggerInputPort = $derived(\n\t\tprops.data.metadata?.inputs?.find((port) => port.dataType === 'trigger')\n\t);\n\tlet triggerOutputPort = $derived(\n\t\tprops.data.metadata?.outputs?.find((port) => port.dataType === 'trigger')\n\t);\n\n\t// Get first non-trigger ports for data connections\n\tlet firstDataInputPort = $derived(\n\t\tprops.data.metadata?.inputs?.find((port) => port.dataType !== 'trigger')\n\t);\n\tlet firstDataOutputPort = $derived(\n\t\tprops.data.metadata?.outputs?.find((port) => port.dataType !== 'trigger')\n\t);\n\n\t// Check if we need to show both trigger and data ports\n\tlet hasBothInputTypes = $derived(!!triggerInputPort && !!firstDataInputPort);\n\tlet hasBothOutputTypes = $derived(!!triggerOutputPort && !!firstDataOutputPort);\n</script>\n\n<!-- Input Handles -->\n{#if firstDataInputPort}\n\t<!-- Data Input - positioned at top-left if both types exist, otherwise center -->\n\t<Handle\n\t\ttype=\"target\"\n\t\tposition={Position.Left}\n\t\tstyle=\"background-color: {getDataTypeColor(\n\t\t\tfirstDataInputPort.dataType\n\t\t)}; border-color: '#ffffff'; top: {hasBothInputTypes ? '25%' : '50%'}; z-index: 30;\"\n\t\tid={`${props.data.nodeId}-input-${firstDataInputPort.id}`}\n\t/>\n{/if}\n{#if triggerInputPort}\n\t<!-- Trigger Input - positioned at bottom-left -->\n\t<Handle\n\t\ttype=\"target\"\n\t\tposition={Position.Left}\n\t\tstyle=\"background-color: {getDataTypeColor(\n\t\t\ttriggerInputPort.dataType\n\t\t)}; border-color: '#ffffff'; top: {hasBothInputTypes ? '75%' : '50%'}; z-index: 30;\"\n\t\tid={`${props.data.nodeId}-input-${triggerInputPort.id}`}\n\t/>\n{/if}\n\n<!-- Square Node -->\n<div\n\tclass=\"flowdrop-square-node flowdrop-square-node--compact\"\n\tclass:flowdrop-square-node--selected={props.selected}\n\tclass:flowdrop-square-node--processing={props.isProcessing}\n\tclass:flowdrop-square-node--error={props.isError}\n\tonclick={handleClick}\n\tondblclick={handleDoubleClick}\n\tonkeydown={handleKeydown}\n\trole=\"button\"\n\ttabindex=\"0\"\n>\n\t<!-- Square Layout: Always compact with centered icon -->\n\t<div class=\"flowdrop-square-node__compact-content\">\n\t\t<Icon\n\t\t\ticon={squareIcon}\n\t\t\tclass=\"flowdrop-square-node__compact-icon\"\n\t\t\tstyle=\"color: {squareColor}; font-size: {currentLayout.iconSize};\"\n\t\t/>\n\t</div>\n\n\t<!-- Processing indicator -->\n\t{#if props.isProcessing}\n\t\t<div class=\"flowdrop-square-node__processing\">\n\t\t\t<div class=\"flowdrop-square-node__spinner\"></div>\n\t\t</div>\n\t{/if}\n\n\t<!-- Error indicator -->\n\t{#if props.isError}\n\t\t<div class=\"flowdrop-square-node__error\">\n\t\t\t<Icon icon=\"mdi:alert-circle\" class=\"flowdrop-square-node__error-icon\" />\n\t\t</div>\n\t{/if}\n\n\t<!-- Config button -->\n\t<button\n\t\tclass=\"flowdrop-square-node__config-btn\"\n\t\tonclick={openConfigSidebar}\n\t\ttitle=\"Configure node\"\n\t>\n\t\t<Icon icon=\"mdi:cog\" />\n\t</button>\n</div>\n\n<!-- Output Handles -->\n{#if firstDataOutputPort}\n\t<!-- Data Output - positioned at top-right if both types exist, otherwise center -->\n\t<Handle\n\t\ttype=\"source\"\n\t\tposition={Position.Right}\n\t\tid={`${props.data.nodeId}-output-${firstDataOutputPort.id}`}\n\t\tstyle=\"background-color: {getDataTypeColor(\n\t\t\tfirstDataOutputPort.dataType\n\t\t)}; border-color: '#ffffff'; top: {hasBothOutputTypes ? '25%' : '50%'}; z-index: 30;\"\n\t/>\n{/if}\n{#if triggerOutputPort}\n\t<!-- Trigger Output - positioned at bottom-right -->\n\t<Handle\n\t\ttype=\"source\"\n\t\tposition={Position.Right}\n\t\tid={`${props.data.nodeId}-output-${triggerOutputPort.id}`}\n\t\tstyle=\"background-color: {getDataTypeColor(\n\t\t\ttriggerOutputPort.dataType\n\t\t)}; border-color: '#ffffff'; top: {hasBothOutputTypes ? '75%' : '50%'}; z-index: 30;\"\n\t/>\n{/if}\n\n<!-- ConfigSidebar removed - now using global ConfigSidebar in WorkflowEditor -->\n\n<style>\n\t.flowdrop-square-node {\n\t\tposition: relative;\n\t\tbackground-color: #ffffff;\n\t\tborder: 2px solid #e5e7eb;\n\t\tborder-radius: 0.75rem;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tbox-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n\t\toverflow: visible; /* Changed from hidden to visible to allow handles to be properly accessible */\n\t\tz-index: 10;\n\t}\n\n\t/* Square layout (always compact) */\n\t.flowdrop-square-node--compact {\n\t\twidth: 80px;\n\t\theight: 80px;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-square-node:hover {\n\t\tbox-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n\t}\n\n\t.flowdrop-square-node--selected {\n\t\tbox-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n\t\tborder: 2px solid #3b82f6;\n\t}\n\n\t.flowdrop-square-node--processing {\n\t\topacity: 0.7;\n\t}\n\n\t.flowdrop-square-node--error {\n\t\tborder-color: #ef4444 !important;\n\t\tbackground-color: #fef2f2 !important;\n\t}\n\n\t/* Compact layout styles */\n\t.flowdrop-square-node__compact-content {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t:global(.flowdrop-square-node__compact-icon) {\n\t\tfilter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));\n\t}\n\n\t/* Label styling removed - now using header title */\n\n\t.flowdrop-square-node__processing {\n\t\tposition: absolute;\n\t\ttop: 4px;\n\t\tright: 4px;\n\t}\n\n\t.flowdrop-square-node__spinner {\n\t\twidth: 12px;\n\t\theight: 12px;\n\t\tborder: 1px solid rgba(255, 255, 255, 0.3);\n\t\tborder-top: 1px solid white;\n\t\tborder-radius: 50%;\n\t\tanimation: spin 1s linear infinite;\n\t}\n\n\t.flowdrop-square-node__error {\n\t\tposition: absolute;\n\t\ttop: 4px;\n\t\tright: 4px;\n\t\tcolor: #ef4444;\n\t}\n\n\t:global(.flowdrop-square-node__error-icon) {\n\t\twidth: 12px;\n\t\theight: 12px;\n\t}\n\n\t.flowdrop-square-node__config-btn {\n\t\tposition: absolute;\n\t\ttop: 0.5rem;\n\t\tright: 0.5rem;\n\t\twidth: 1.5rem;\n\t\theight: 1.5rem;\n\t\tbackground-color: rgba(255, 255, 255, 0.9);\n\t\tborder: 1px solid #e5e7eb;\n\t\tborder-radius: 0.25rem;\n\t\tcolor: #6b7280;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\topacity: 0;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tbackdrop-filter: blur(4px);\n\t\tz-index: 15;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.flowdrop-square-node:hover .flowdrop-square-node__config-btn {\n\t\topacity: 1;\n\t}\n\n\t.flowdrop-square-node__config-btn:hover {\n\t\tbackground-color: #f9fafb;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n\n\t@keyframes spin {\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t/* Handle styles - matching WorkflowNode exactly */\n\t:global(.svelte-flow__node-square .svelte-flow__handle) {\n\t\twidth: 18px !important;\n\t\theight: 18px !important;\n\t\tborder-radius: 50% !important;\n\t\ttransition: all 0.2s ease-in-out !important;\n\t\tcursor: pointer !important;\n\t\tz-index: 20 !important;\n\t\tpointer-events: auto !important;\n\t}\n\n\t:global(.svelte-flow__node-square .svelte-flow__handle-left) {\n\t\tleft: -6px !important;\n\t}\n\n\t:global(.svelte-flow__node-square .svelte-flow__handle-right) {\n\t\tright: -6px !important;\n\t}\n\n\t:global(.svelte-flow__node-square .svelte-flow__handle:focus) {\n\t\toutline: 2px solid #3b82f6 !important;\n\t\toutline-offset: 2px !important;\n\t}\n</style>\n","<!--\n  Tool Node Component\n  A specialized node for tools with metadata port\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport { Position, Handle } from '@xyflow/svelte';\n\timport Icon from '@iconify/svelte';\n\timport { getDataTypeColor } from '../utils/colors';\n\timport type { NodeMetadata } from '../types/index.js';\n\n\tinterface ToolNodeParameter {\n\t\tname: string;\n\t\ttype?: string;\n\t\tdescription?: string;\n\t}\n\n\tconst props = $props<{\n\t\tdata: {\n\t\t\tlabel: string;\n\t\t\tconfig: {\n\t\t\t\ticon?: string;\n\t\t\t\tcolor?: string;\n\t\t\t\ttoolName?: string;\n\t\t\t\ttoolDescription?: string;\n\t\t\t\ttoolVersion?: string;\n\t\t\t\tparameters?: ToolNodeParameter[];\n\t\t\t};\n\t\t\tmetadata: NodeMetadata;\n\t\t\tnodeId?: string;\n\t\t\tonConfigOpen?: (node: {\n\t\t\t\tid: string;\n\t\t\t\ttype: string;\n\t\t\t\tdata: { label: string; config: Record<string, unknown>; metadata: NodeMetadata };\n\t\t\t}) => void;\n\t\t};\n\t\tselected?: boolean;\n\t\tisProcessing?: boolean;\n\t\tisError?: boolean;\n\t}>();\n\n\t// Prioritize metadata over config for tool nodes (metadata is the node definition)\n\tlet toolIcon = $derived(\n\t\t(props.data.metadata?.icon as string) || (props.data.config?.icon as string) || 'mdi:tools'\n\t);\n\tlet toolColor = $derived(\n\t\t(props.data.metadata?.color as string) || (props.data.config?.color as string) || '#f59e0b'\n\t);\n\tlet toolName = $derived(\n\t\t(props.data.metadata?.name as string) ||\n\t\t\t(props.data.config?.toolName as string) ||\n\t\t\tprops.data.label ||\n\t\t\t'Tool'\n\t);\n\tlet toolDescription = $derived(\n\t\t(props.data.metadata?.description as string) ||\n\t\t\t(props.data.config?.toolDescription as string) ||\n\t\t\t'A configurable tool for agents'\n\t);\n\tlet toolVersion = $derived(\n\t\t(props.data.metadata?.version as string) ||\n\t\t\t(props.data.config?.toolVersion as string) ||\n\t\t\t'1.0.0'\n\t);\n\n\t// Check for tool interface ports in metadata\n\tlet hasToolInputPort = $derived(\n\t\tprops.data.metadata?.inputs?.some((port) => port.dataType === 'tool') || false\n\t);\n\tlet hasToolOutputPort = $derived(\n\t\tprops.data.metadata?.outputs?.some((port) => port.dataType === 'tool') || false\n\t);\n\n\t// Get the actual tool ports for proper handle generation\n\tlet toolInputPort = $derived(\n\t\tprops.data.metadata?.inputs?.find((port) => port.dataType === 'tool')\n\t);\n\tlet toolOutputPort = $derived(\n\t\tprops.data.metadata?.outputs?.find((port) => port.dataType === 'tool')\n\t);\n\n\t// Handle configuration sidebar - using global ConfigSidebar\n\tfunction openConfigSidebar(): void {\n\t\tif (props.data.onConfigOpen) {\n\t\t\t// Create a WorkflowNodeType-like object for the global ConfigSidebar\n\t\t\tconst nodeForConfig = {\n\t\t\t\tid: props.data.nodeId || 'unknown',\n\t\t\t\ttype: 'tool',\n\t\t\t\tdata: props.data\n\t\t\t};\n\t\t\tprops.data.onConfigOpen(nodeForConfig);\n\t\t}\n\t}\n\n\t// Handle double-click to open config\n\tfunction handleDoubleClick(): void {\n\t\topenConfigSidebar();\n\t}\n\n\t// Handle click events\n\tfunction handleClick(): void {\n\t\t// Node selection is handled by Svelte Flow\n\t}\n\n\t// Handle keyboard events for accessibility\n\tfunction handleKeydown(event: KeyboardEvent): void {\n\t\tif (event.key === 'Enter' || event.key === ' ') {\n\t\t\tevent.preventDefault();\n\t\t\thandleDoubleClick();\n\t\t}\n\t}\n</script>\n\n<!-- Tool Input Handle (optional) -->\n{#if hasToolInputPort && toolInputPort}\n\t<Handle\n\t\ttype=\"target\"\n\t\tposition={Position.Left}\n\t\tid={`${props.data.nodeId}-input-${toolInputPort.id}`}\n\t\tstyle=\"background-color: {getDataTypeColor('tool')}; border-color: '#ffffff';\"\n\t/>\n{/if}\n\n<!-- Tool Node -->\n<div\n\tclass=\"flowdrop-tool-node\"\n\tclass:flowdrop-tool-node--selected={props.selected}\n\tclass:flowdrop-tool-node--processing={props.isProcessing}\n\tclass:flowdrop-tool-node--error={props.isError}\n\tonclick={handleClick}\n\tondblclick={handleDoubleClick}\n\tonkeydown={handleKeydown}\n\trole=\"button\"\n\ttabindex=\"0\"\n>\n\t<!-- Node Header -->\n\t<div class=\"flowdrop-tool-node__header\">\n\t\t<div class=\"flowdrop-tool-node__header-content\">\n\t\t\t<!-- Tool Icon -->\n\t\t\t<div class=\"flowdrop-tool-node__icon-container\" style=\"background-color: {toolColor}\">\n\t\t\t\t<Icon icon={toolIcon} class=\"flowdrop-tool-node__icon\" />\n\t\t\t</div>\n\n\t\t\t<!-- Tool Info -->\n\t\t\t<div class=\"flowdrop-tool-node__info\">\n\t\t\t\t<h3 class=\"flowdrop-tool-node__title\">\n\t\t\t\t\t{toolName}\n\t\t\t\t</h3>\n\t\t\t\t<div class=\"flowdrop-tool-node__version\">\n\t\t\t\t\tv{toolVersion}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- Tool Badge -->\n\t\t\t<div class=\"flowdrop-tool-node__badge\">TOOL</div>\n\t\t</div>\n\n\t\t<!-- Tool Description -->\n\t\t<p class=\"flowdrop-tool-node__description\">\n\t\t\t{toolDescription}\n\t\t</p>\n\t</div>\n\n\t<!-- Processing indicator -->\n\t{#if props.isProcessing}\n\t\t<div class=\"flowdrop-tool-node__processing\">\n\t\t\t<div class=\"flowdrop-tool-node__spinner\"></div>\n\t\t</div>\n\t{/if}\n\n\t<!-- Error indicator -->\n\t{#if props.isError}\n\t\t<div class=\"flowdrop-tool-node__error\">\n\t\t\t<Icon icon=\"mdi:alert-circle\" class=\"flowdrop-tool-node__error-icon\" />\n\t\t</div>\n\t{/if}\n\n\t<!-- Config button -->\n\t<button class=\"flowdrop-tool-node__config-btn\" onclick={openConfigSidebar} title=\"Configure tool\">\n\t\t<Icon icon=\"mdi:cog\" />\n\t</button>\n</div>\n\n<!-- Tool Output Handle (optional) -->\n{#if hasToolOutputPort && toolOutputPort}\n\t<Handle\n\t\ttype=\"source\"\n\t\tposition={Position.Right}\n\t\tid={`${props.data.nodeId}-output-${toolOutputPort.id}`}\n\t\tstyle=\"background-color: {getDataTypeColor('tool')}; border-color: '#ffffff';\"\n\t/>\n{/if}\n\n<style>\n\t.flowdrop-tool-node {\n\t\tposition: relative;\n\t\tbackground-color: #ffffff;\n\t\tborder: 2px solid #e5e7eb;\n\t\tborder-radius: 0.75rem;\n\t\twidth: 18rem;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tbox-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n\t\toverflow: visible;\n\t\tz-index: 10;\n\t}\n\n\t.flowdrop-tool-node:hover {\n\t\tbox-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n\t}\n\n\t.flowdrop-tool-node--selected {\n\t\tbox-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n\t\tborder: 2px solid #f59e0b;\n\t}\n\n\t.flowdrop-tool-node--processing {\n\t\topacity: 0.7;\n\t}\n\n\t.flowdrop-tool-node--error {\n\t\tborder-color: #ef4444 !important;\n\t\tbackground-color: #fef2f2 !important;\n\t}\n\n\t.flowdrop-tool-node__header {\n\t\tpadding: 1rem;\n\t\tbackground-color: #fffbeb;\n\t\tborder-radius: 0.75rem;\n\t\tborder: 1px solid #fcd34d;\n\t}\n\n\t.flowdrop-tool-node__header-content {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.75rem;\n\t\tmargin-bottom: 0.5rem;\n\t}\n\n\t.flowdrop-tool-node__icon-container {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 2.5rem;\n\t\theight: 2.5rem;\n\t\tborder-radius: 0.5rem;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-tool-node__info {\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t}\n\n\t.flowdrop-tool-node__title {\n\t\tfont-size: 1rem;\n\t\tfont-weight: 600;\n\t\tcolor: #1f2937;\n\t\tmargin: 0;\n\t\tline-height: 1.4;\n\t}\n\n\t.flowdrop-tool-node__version {\n\t\tfont-size: 0.75rem;\n\t\tcolor: #6b7280;\n\t\tfont-weight: 500;\n\t\tmargin-top: 0.125rem;\n\t}\n\n\t.flowdrop-tool-node__badge {\n\t\tbackground-color: #f59e0b;\n\t\tcolor: white;\n\t\tfont-size: 0.625rem;\n\t\tfont-weight: 700;\n\t\tpadding: 0.25rem 0.5rem;\n\t\tborder-radius: 0.25rem;\n\t\tletter-spacing: 0.05em;\n\t}\n\n\t.flowdrop-tool-node__description {\n\t\tfont-size: 0.75rem;\n\t\tcolor: #6b7280;\n\t\tmargin: 0;\n\t\tline-height: 1.3;\n\t}\n\n\t:global(.flowdrop-tool-node__icon) {\n\t\tcolor: white;\n\t\tfont-size: 1.25rem;\n\t\tfilter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));\n\t}\n\n\t.flowdrop-tool-node__processing {\n\t\tposition: absolute;\n\t\ttop: 4px;\n\t\tright: 4px;\n\t}\n\n\t.flowdrop-tool-node__spinner {\n\t\twidth: 12px;\n\t\theight: 12px;\n\t\tborder: 1px solid rgba(255, 255, 255, 0.3);\n\t\tborder-top: 1px solid white;\n\t\tborder-radius: 50%;\n\t\tanimation: spin 1s linear infinite;\n\t}\n\n\t.flowdrop-tool-node__error {\n\t\tposition: absolute;\n\t\ttop: 4px;\n\t\tright: 4px;\n\t\tcolor: #ef4444;\n\t}\n\n\t:global(.flowdrop-tool-node__error-icon) {\n\t\twidth: 12px;\n\t\theight: 12px;\n\t}\n\n\t.flowdrop-tool-node__config-btn {\n\t\tposition: absolute;\n\t\ttop: 0.5rem;\n\t\tright: 0.5rem;\n\t\twidth: 1.5rem;\n\t\theight: 1.5rem;\n\t\tbackground-color: rgba(255, 255, 255, 0.9);\n\t\tborder: 1px solid #e5e7eb;\n\t\tborder-radius: 0.25rem;\n\t\tcolor: #6b7280;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\topacity: 0;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tbackdrop-filter: blur(4px);\n\t\tz-index: 15;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.flowdrop-tool-node:hover .flowdrop-tool-node__config-btn {\n\t\topacity: 1;\n\t}\n\n\t.flowdrop-tool-node__config-btn:hover {\n\t\tbackground-color: #f9fafb;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n\n\t@keyframes spin {\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t/* Handle styles - special metadata port styling */\n\t:global(.svelte-flow__node-tool .svelte-flow__handle) {\n\t\twidth: 16px !important;\n\t\theight: 16px !important;\n\t\tborder: 2px solid #ffffff !important;\n\t\tborder-radius: 50% !important;\n\t\ttransition: all 0.2s ease-in-out !important;\n\t\tcursor: pointer !important;\n\t\tz-index: 20 !important;\n\t\tpointer-events: auto !important;\n\t}\n\n\t:global(.svelte-flow__node-tool .svelte-flow__handle-right) {\n\t\tright: -6px !important;\n\t}\n\n\t/* Metadata port hover effects */\n\t:global(.svelte-flow__node-tool .svelte-flow__handle:hover) {\n\t\tbox-shadow: 0 0 0 2px rgba(245, 158, 11, 0.3) !important;\n\t}\n\n\t:global(.svelte-flow__node-tool .svelte-flow__handle:focus) {\n\t\toutline: 2px solid #f59e0b !important;\n\t\toutline-offset: 2px !important;\n\t}\n</style>\n","<!--\n  Gateway Node Component\n  Visual representation of gateway/branch nodes with branching flow indicators\n  Shows active branches and execution paths\n  Styled with BEM syntax following WorkflowNode pattern\n-->\n\n<script lang=\"ts\">\n\timport { Position, Handle } from '@xyflow/svelte';\n\timport type { WorkflowNode } from '../types/index.js';\n\timport Icon from '@iconify/svelte';\n\timport { getNodeIcon } from '../utils/icons.js';\n\timport { getDataTypeColorToken, getCategoryColorToken } from '../utils/colors.js';\n\n\t// Define simplified branch interface - conditions are handled by backend\n\tinterface Branch {\n\t\tname: string;\n\t\tlabel: string;\n\t}\n\n\tinterface Props {\n\t\tdata: WorkflowNode['data'] & {\n\t\t\tnodeId?: string;\n\t\t\tonConfigOpen?: (node: { id: string; type: string; data: WorkflowNode['data'] }) => void;\n\t\t};\n\t\tselected?: boolean;\n\t}\n\n\tlet props: Props = $props();\n\n\t// Gateway-specific data - branches are calculated at runtime from config\n\tlet branches = $derived((props.data.config?.branches as Branch[]) || []);\n\tlet activeBranches = $derived((props.data.executionInfo as any)?.output?.active_branches || []);\n\n\t/**\n\t * Handle node click - only handle selection, no config opening\n\t */\n\tfunction handleNodeClick(): void {\n\t\t// Node selection is handled by Svelte Flow\n\t}\n\n\t/**\n\t * Handle double-click to open config\n\t */\n\tfunction handleNodeDoubleClick(): void {\n\t\tif (props.data.onConfigOpen) {\n\t\t\tprops.data.onConfigOpen({\n\t\t\t\tid: props.data.nodeId || '',\n\t\t\t\ttype: 'gateway',\n\t\t\t\tdata: props.data\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Handle keyboard events for accessibility\n\t */\n\tfunction handleKeydown(event: KeyboardEvent): void {\n\t\tif (event.key === 'Enter' || event.key === ' ') {\n\t\t\tevent.preventDefault();\n\t\t\thandleNodeClick();\n\t\t}\n\t}\n\n\t/**\n\t * Check if a branch is active\n\t */\n\tfunction isBranchActive(branchName: string): boolean {\n\t\treturn activeBranches.includes(branchName);\n\t}\n</script>\n\n<!-- Node Container -->\n<div\n\tclass=\"flowdrop-workflow-node flowdrop-workflow-node--gateway\"\n\tclass:flowdrop-workflow-node--selected={props.selected}\n\tonclick={handleNodeClick}\n\tondblclick={handleNodeDoubleClick}\n\tonkeydown={handleKeydown}\n\trole=\"button\"\n\ttabindex=\"0\"\n\taria-label=\"Gateway node: {props.data.metadata.name}\"\n\taria-describedby=\"node-description-{props.data.nodeId || 'unknown'}\"\n>\n\t<!-- Node Header -->\n\t<div class=\"flowdrop-workflow-node__header\">\n\t\t<div class=\"flowdrop-flex flowdrop-gap--3 flowdrop-items--center\">\n\t\t\t<!-- Node Icon -->\n\t\t\t<div\n\t\t\t\tclass=\"flowdrop-workflow-node__icon\"\n\t\t\t\tstyle=\"background-color: {getCategoryColorToken(props.data.metadata.category)}\"\n\t\t\t>\n\t\t\t\t<Icon icon={getNodeIcon(props.data.metadata.icon, props.data.metadata.category)} />\n\t\t\t</div>\n\n\t\t\t<!-- Node Title -->\n\t\t\t<h3 class=\"flowdrop-text--sm flowdrop-font--medium flowdrop-truncate flowdrop-flex--1\">\n\t\t\t\t{props.data.label}\n\t\t\t</h3>\n\t\t</div>\n\t\t<!-- Node Description -->\n\t\t<p\n\t\t\tclass=\"flowdrop-text--xs flowdrop-text--gray flowdrop-truncate flowdrop-mt--1\"\n\t\t\tid=\"node-description-{props.data.nodeId || 'unknown'}\"\n\t\t>\n\t\t\t{props.data.metadata.description}\n\t\t</p>\n\t</div>\n\n\t<!-- Input Ports Container -->\n\t{#if props.data.metadata.inputs.length > 0}\n\t\t<div class=\"flowdrop-workflow-node__ports\">\n\t\t\t<div class=\"flowdrop-workflow-node__ports-header\">\n\t\t\t\t<h5 class=\"flowdrop-workflow-node__ports-title\">Inputs</h5>\n\t\t\t</div>\n\t\t\t<div class=\"flowdrop-workflow-node__ports-list\">\n\t\t\t\t{#each props.data.metadata.inputs as port (port.id)}\n\t\t\t\t\t<div class=\"flowdrop-workflow-node__port\">\n\t\t\t\t\t\t<!-- Input Handle -->\n\t\t\t\t\t\t<Handle\n\t\t\t\t\t\t\ttype=\"target\"\n\t\t\t\t\t\t\tposition={Position.Left}\n\t\t\t\t\t\t\tid={`${props.data.nodeId}-input-${port.id}`}\n\t\t\t\t\t\t\tclass=\"flowdrop-workflow-node__handle\"\n\t\t\t\t\t\t\tstyle=\"top: 50%; transform: translateY(-50%); margin-left: -32px; background-color: {getDataTypeColorToken(\n\t\t\t\t\t\t\t\tport.dataType\n\t\t\t\t\t\t\t)}; border-color: '#ffffff';\"\n\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\ttabindex={0}\n\t\t\t\t\t\t\taria-label=\"Connect to {port.name} input port\"\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<!-- Port Info -->\n\t\t\t\t\t\t<div class=\"flowdrop-flex--1 flowdrop-min-w--0\">\n\t\t\t\t\t\t\t<div class=\"flowdrop-flex flowdrop-gap--2\">\n\t\t\t\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-font--medium\">{port.name}</span>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"flowdrop-badge flowdrop-badge--sm\"\n\t\t\t\t\t\t\t\t\tstyle=\"background-color: {getDataTypeColorToken(port.dataType)}; color: #fff;\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{port.dataType}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{#if port.required}\n\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-badge flowdrop-badge--error flowdrop-badge--sm\"\n\t\t\t\t\t\t\t\t\t\t>Required</span\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{#if port.description}\n\t\t\t\t\t\t\t\t<p class=\"flowdrop-text--xs flowdrop-text--gray flowdrop-truncate\">\n\t\t\t\t\t\t\t\t\t{port.description}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\n\t<!-- Branches Section (Output Ports) -->\n\t{#if branches.length > 0}\n\t\t<div class=\"flowdrop-workflow-node__ports\">\n\t\t\t<div class=\"flowdrop-workflow-node__ports-header\">\n\t\t\t\t<h5 class=\"flowdrop-workflow-node__ports-title\">\n\t\t\t\t\t<Icon icon=\"mdi:source-branch\" />\n\t\t\t\t\t<span>Branches ({branches.length})</span>\n\t\t\t\t</h5>\n\t\t\t</div>\n\t\t\t<div class=\"flowdrop-workflow-node__ports-list\">\n\t\t\t\t{#each branches as branch (branch.name)}\n\t\t\t\t\t{@const isActive = isBranchActive(branch.name)}\n\t\t\t\t\t<div class=\"flowdrop-workflow-node__port\">\n\t\t\t\t\t\t<!-- Port Info -->\n\t\t\t\t\t\t<div class=\"flowdrop-flex--1 flowdrop-min-w--0 flowdrop-text--right\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"flowdrop-flex flowdrop-gap--2 flowdrop-justify--end flowdrop-items--center\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{#if isActive}\n\t\t\t\t\t\t\t\t\t<span style=\"color: {getDataTypeColorToken('trigger')};\">\n\t\t\t\t\t\t\t\t\t\t<Icon icon=\"mdi:check-circle\" />\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"flowdrop-text--xs flowdrop-font--medium\"\n\t\t\t\t\t\t\t\t\tclass:flowdrop-text--active={isActive}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{branch.name}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"flowdrop-badge flowdrop-badge--sm\"\n\t\t\t\t\t\t\t\t\tstyle=\"background-color: {getDataTypeColorToken('trigger')}; color: #fff;\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\ttrigger\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<!-- Output Handle - Generated from branch name -->\n\t\t\t\t\t\t<Handle\n\t\t\t\t\t\t\ttype=\"source\"\n\t\t\t\t\t\t\tposition={Position.Right}\n\t\t\t\t\t\t\tid={`${props.data.nodeId}-output-${branch.name}`}\n\t\t\t\t\t\t\tclass={`flowdrop-workflow-node__handle ${isActive ? 'flowdrop-workflow-node__handle--active' : ''}`}\n\t\t\t\t\t\t\tstyle=\"top: 50%; transform: translateY(-50%); margin-right: -32px; background-color: {isActive\n\t\t\t\t\t\t\t\t? getDataTypeColorToken('trigger')\n\t\t\t\t\t\t\t\t: getDataTypeColorToken('trigger')}; border-color: '#ffffff';\"\n\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\ttabindex={0}\n\t\t\t\t\t\t\taria-label=\"Connect from {branch.name} branch\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t</div>\n\t{:else}\n\t\t<div class=\"flowdrop-workflow-node__ports\">\n\t\t\t<div class=\"workflow-node__no-branches\">\n\t\t\t\t<Icon icon=\"mdi:alert-circle-outline\" />\n\t\t\t\t<span>No branches configured</span>\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\n\t<!-- Config button -->\n\t<button\n\t\tclass=\"flowdrop-workflow-node__config-btn\"\n\t\tonclick={handleNodeDoubleClick}\n\t\ttitle=\"Configure node\"\n\t>\n\t\t<Icon icon=\"mdi:cog\" />\n\t</button>\n</div>\n\n<style>\n\t.flowdrop-workflow-node {\n\t\tposition: relative;\n\t\tbackground-color: #ffffff;\n\t\tborder: 2px solid #e5e7eb;\n\t\tborder-radius: 0.75rem;\n\t\tbox-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n\t\twidth: 18rem;\n\t\tz-index: 10;\n\t}\n\n\t.flowdrop-workflow-node--gateway {\n\t\tmin-width: 18rem;\n\t}\n\n\t.flowdrop-workflow-node--selected {\n\t\tbox-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n\t\tborder: 2px solid #3b82f6;\n\t}\n\n\t.flowdrop-workflow-node__header {\n\t\tpadding: 1rem;\n\t\tborder-bottom: 1px solid #e5e7eb;\n\t\tbackground-color: #f9fafb;\n\t\tborder-top-left-radius: 0.75rem;\n\t\tborder-top-right-radius: 0.75rem;\n\t}\n\n\t.flowdrop-workflow-node__icon {\n\t\twidth: 2rem;\n\t\theight: 2rem;\n\t\tborder-radius: 0.5rem;\n\t\tcolor: #ffffff;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tbox-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);\n\t}\n\n\t.flowdrop-workflow-node__header h3 {\n\t\tmargin: 0;\n\t\tline-height: 1;\n\t}\n\n\t.flowdrop-workflow-node__ports {\n\t\tpadding: 0.75rem 1rem;\n\t}\n\n\t.flowdrop-workflow-node__ports-header {\n\t\tmargin-bottom: 0.5rem;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.25rem;\n\t}\n\n\t.flowdrop-workflow-node__ports-title {\n\t\tmargin: 0;\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 600;\n\t\tcolor: #374151;\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t}\n\n\t.flowdrop-workflow-node__ports-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.5rem;\n\t}\n\n\t.flowdrop-workflow-node__port {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 0.25rem 0;\n\t\tposition: relative;\n\t}\n\n\t.flowdrop-badge {\n\t\tpadding: 0.125rem 0.375rem;\n\t\tborder-radius: 0.25rem;\n\t\tfont-size: 0.625rem;\n\t\tfont-weight: 500;\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t}\n\n\t.flowdrop-badge--error {\n\t\tbackground-color: #ef4444;\n\t\tcolor: #ffffff;\n\t}\n\n\t.flowdrop-badge--sm {\n\t\tfont-size: 0.625rem;\n\t\tpadding: 0.125rem 0.25rem;\n\t}\n\n\t.workflow-node__no-branches {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 0.75rem;\n\t\tbackground: #fef3c7;\n\t\tborder: 1px solid #f59e0b;\n\t\tborder-radius: 0.5rem;\n\t\tcolor: #92400e;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t/* Handle styles */\n\t:global(.flowdrop-workflow-node__handle) {\n\t\twidth: 0.75rem;\n\t\theight: 0.75rem;\n\t\tbackground-color: #6b7280;\n\t\tborder: 2px solid #ffffff;\n\t\tborder-radius: 50%;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tcursor: pointer;\n\t}\n\n\t:global(.flowdrop-workflow-node__handle:hover) {\n\t\tbackground-color: #3b82f6;\n\t\ttransform: scale(1.2);\n\t}\n\n\t:global(.flowdrop-workflow-node__handle:focus) {\n\t\toutline: 2px solid #3b82f6;\n\t\toutline-offset: 2px;\n\t}\n\n\t:global(.flowdrop-workflow-node__handle--active) {\n\t\ttransform: scale(1.15);\n\t\tbox-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);\n\t}\n\n\t/* Utility classes */\n\t.flowdrop-flex {\n\t\tdisplay: flex;\n\t}\n\n\t.flowdrop-flex--1 {\n\t\tflex: 1;\n\t}\n\n\t.flowdrop-gap--2 {\n\t\tgap: 0.5rem;\n\t}\n\n\t.flowdrop-gap--3 {\n\t\tgap: 0.75rem;\n\t}\n\n\t.flowdrop-items--center {\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-justify--end {\n\t\tjustify-content: flex-end;\n\t}\n\n\t.flowdrop-min-w--0 {\n\t\tmin-width: 0;\n\t}\n\n\t.flowdrop-text--xs {\n\t\tfont-size: 0.75rem;\n\t\tline-height: 1rem;\n\t}\n\n\t.flowdrop-text--sm {\n\t\tfont-size: 0.875rem;\n\t\tline-height: 1.25rem;\n\t}\n\n\t.flowdrop-text--gray {\n\t\tcolor: #6b7280;\n\t}\n\n\t.flowdrop-text--active {\n\t\tcolor: #10b981;\n\t\tfont-weight: 600;\n\t}\n\n\t.flowdrop-font--medium {\n\t\tfont-weight: 500;\n\t}\n\n\t.flowdrop-truncate {\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.flowdrop-mt--1 {\n\t\tmargin-top: 0.25rem;\n\t}\n\n\t.flowdrop-text--right {\n\t\ttext-align: right;\n\t}\n\n\t.flowdrop-workflow-node__config-btn {\n\t\tposition: absolute;\n\t\ttop: 0.5rem;\n\t\tright: 0.5rem;\n\t\twidth: 1.5rem;\n\t\theight: 1.5rem;\n\t\tbackground-color: rgba(255, 255, 255, 0.9);\n\t\tborder: 1px solid #e5e7eb;\n\t\tborder-radius: 0.25rem;\n\t\tcolor: #6b7280;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\topacity: 0;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tbackdrop-filter: blur(4px);\n\t\tz-index: 15;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.flowdrop-workflow-node:hover .flowdrop-workflow-node__config-btn {\n\t\topacity: 1;\n\t}\n\n\t.flowdrop-workflow-node__config-btn:hover {\n\t\tbackground-color: #f9fafb;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n</style>\n","<!--\n  Status Label Component\n  Dedicated component for displaying status labels with consistent styling\n-->\n\n<script lang=\"ts\">\n\tinterface Props {\n\t\tlabel: string;\n\t\tclass?: string;\n\t}\n\n\tlet props: Props = $props();\n</script>\n\n<span class=\"status-label {props.class || ''}\">\n\t{props.label}\n</span>\n\n<style>\n\t.status-label {\n\t\tfont-size: 16px;\n\t\tfont-weight: 600;\n\t\tcolor: #000000;\n\t\twhite-space: nowrap;\n\t\tline-height: 1.2;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\ttext-shadow: 0 1px 2px rgba(255, 255, 255, 0.3);\n\t\tletter-spacing: 0.025em;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n</style>\n","/**\n * Node Status Utility Functions\n * Provides utilities for managing and displaying node execution status\n */\n/**\n * Get the display color for a node execution status\n */\nexport function getStatusColor(status) {\n    const statusColors = {\n        idle: '#6b7280', // gray\n        pending: '#f59e0b', // amber\n        running: '#3b82f6', // blue\n        completed: '#10b981', // emerald\n        failed: '#ef4444', // red\n        cancelled: '#6b7280', // gray\n        skipped: '#8b5cf6' // violet\n    };\n    return statusColors[status] || statusColors.idle;\n}\n/**\n * Get the display icon for a node execution status\n */\nexport function getStatusIcon(status) {\n    const statusIcons = {\n        idle: 'mdi:circle-outline',\n        pending: 'mdi:clock-outline',\n        running: 'mdi:loading',\n        completed: 'mdi:check-circle',\n        failed: 'mdi:alert-circle',\n        cancelled: 'mdi:cancel',\n        skipped: 'mdi:skip-next'\n    };\n    return statusIcons[status] || statusIcons.idle;\n}\n/**\n * Get the display label for a node execution status\n */\nexport function getStatusLabel(status) {\n    const statusLabels = {\n        idle: 'Idle',\n        pending: 'Pending',\n        running: 'Running',\n        completed: 'Completed',\n        failed: 'Failed',\n        cancelled: 'Cancelled',\n        skipped: 'Skipped'\n    };\n    return statusLabels[status] || statusLabels.idle;\n}\n/**\n * Get the background color for a node execution status overlay\n */\nexport function getStatusBackgroundColor(status) {\n    const statusBackgroundColors = {\n        idle: '#f9fafb', // light gray\n        pending: '#fef3c7', // light amber\n        running: '#dbeafe', // light blue\n        completed: '#d1fae5', // light emerald\n        failed: '#fee2e2', // light red\n        cancelled: '#f3f4f6', // light gray\n        skipped: '#ede9fe' // light violet\n    };\n    return statusBackgroundColors[status] || statusBackgroundColors.idle;\n}\n/**\n * Get the text color for a node execution status overlay\n */\nexport function getStatusTextColor(status) {\n    const statusTextColors = {\n        idle: '#6b7280', // gray\n        pending: '#d97706', // amber\n        running: '#1d4ed8', // blue\n        completed: '#059669', // emerald\n        failed: '#dc2626', // red\n        cancelled: '#6b7280', // gray\n        skipped: '#7c3aed' // violet\n    };\n    return statusTextColors[status] || statusTextColors.idle;\n}\n/**\n * Create a default NodeExecutionInfo object\n */\nexport function createDefaultExecutionInfo() {\n    return {\n        status: 'idle',\n        executionCount: 0,\n        isExecuting: false\n    };\n}\n/**\n * Update node execution info when execution starts\n */\nexport function updateExecutionStart(executionInfo) {\n    return {\n        ...executionInfo,\n        status: 'running',\n        isExecuting: true\n    };\n}\n/**\n * Update node execution info when execution completes successfully\n */\nexport function updateExecutionComplete(executionInfo, duration) {\n    return {\n        ...executionInfo,\n        status: 'completed',\n        executionCount: executionInfo.executionCount + 1,\n        lastExecuted: new Date().toISOString(),\n        lastExecutionDuration: duration,\n        isExecuting: false,\n        lastError: undefined // Clear any previous error\n    };\n}\n/**\n * Update node execution info when execution fails\n */\nexport function updateExecutionFailed(executionInfo, error, duration) {\n    return {\n        ...executionInfo,\n        status: 'failed',\n        executionCount: executionInfo.executionCount + 1,\n        lastExecuted: new Date().toISOString(),\n        lastExecutionDuration: duration,\n        isExecuting: false,\n        lastError: error\n    };\n}\n/**\n * Reset node execution info\n */\nexport function resetExecutionInfo(executionInfo) {\n    return {\n        ...executionInfo,\n        status: 'idle',\n        isExecuting: false,\n        lastError: undefined\n    };\n}\n/**\n * Format execution duration for display\n */\nexport function formatExecutionDuration(duration) {\n    if (!duration)\n        return 'N/A';\n    if (duration < 1000) {\n        return `${Math.round(duration)}ms`;\n    }\n    else if (duration < 60000) {\n        return `${(duration / 1000).toFixed(1)}s`;\n    }\n    else {\n        const minutes = Math.floor(duration / 60000);\n        const seconds = Math.floor((duration % 60000) / 1000);\n        return `${minutes}m ${seconds}s`;\n    }\n}\n/**\n * Format last executed timestamp for display\n */\nexport function formatLastExecuted(timestamp) {\n    if (!timestamp)\n        return 'Never';\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    if (diffMs < 60000) {\n        // Less than 1 minute\n        return 'Just now';\n    }\n    else if (diffMs < 3600000) {\n        // Less than 1 hour\n        const minutes = Math.floor(diffMs / 60000);\n        return `${minutes}m ago`;\n    }\n    else if (diffMs < 86400000) {\n        // Less than 1 day\n        const hours = Math.floor(diffMs / 3600000);\n        return `${hours}h ago`;\n    }\n    else {\n        return date.toLocaleDateString();\n    }\n}\n","<!--\n  Node Status Overlay Component\n  Universal status indicator that can be overlaid on any node type\n  Displays execution status, count, and other execution information\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport type { NodeExecutionInfo } from '../types/index.js';\n\timport Icon from '@iconify/svelte';\n\timport StatusLabel from './StatusLabel.svelte';\n\timport {\n\t\tgetStatusColor,\n\t\tgetStatusIcon,\n\t\tgetStatusLabel,\n\t\tgetStatusBackgroundColor,\n\t\tformatExecutionDuration,\n\t\tformatLastExecuted\n\t} from '../utils/nodeStatus.js';\n\n\tinterface Props {\n\t\texecutionInfo?: NodeExecutionInfo;\n\t\tposition?: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right';\n\t\tsize?: 'sm' | 'md' | 'lg';\n\t\tshowDetails?: boolean;\n\t}\n\n\tlet props: Props = $props();\n\n\t// Default values\n\tlet position = $state(props.position || 'top-right');\n\tlet size = $state(props.size || 'md');\n\tlet showDetails = $state(props.showDetails || false);\n\tlet isHovered = $state(false);\n\n\t// Size configurations - optimized for larger, centered overlay\n\tconst sizeConfig = {\n\t\tsm: {\n\t\t\tstatusSize: '18px',\n\t\t\ticonSize: '10px',\n\t\t\tlabelSize: '0.75rem',\n\t\t\tpadding: '6px 12px'\n\t\t},\n\t\tmd: {\n\t\t\tstatusSize: '24px',\n\t\t\ticonSize: '14px',\n\t\t\tlabelSize: '0.875rem',\n\t\t\tpadding: '8px 16px'\n\t\t},\n\t\tlg: {\n\t\t\tstatusSize: '28px',\n\t\t\ticonSize: '16px',\n\t\t\tlabelSize: '1rem',\n\t\t\tpadding: '10px 20px'\n\t\t}\n\t};\n\n\tconst config = sizeConfig[size];\n\n\t// Position styles - horizontal center aligned with top edge of node\n\tconst positionStyles = {\n\t\t'top-left': 'top: -24px; left: 50%; transform: translateX(-50%);',\n\t\t'top-right': 'top: -24px; left: 50%; transform: translateX(-50%);',\n\t\t'bottom-left': 'top: -24px; left: 50%; transform: translateX(-50%);',\n\t\t'bottom-right': 'top: -24px; left: 50%; transform: translateX(-50%);'\n\t};\n\n\t// Get execution info or default\n\tlet executionInfo = $derived(\n\t\tprops.executionInfo || {\n\t\t\tstatus: 'idle' as const,\n\t\t\texecutionCount: 0,\n\t\t\tisExecuting: false\n\t\t}\n\t);\n\n\t// Show overlay if there's meaningful status information\n\tlet shouldShow = $derived(\n\t\texecutionInfo.status !== 'idle' || executionInfo.executionCount > 0 || executionInfo.isExecuting\n\t);\n</script>\n\n{#if shouldShow}\n\t<div\n\t\tclass=\"node-status-overlay\"\n\t\tclass:node-status-overlay--hovered={isHovered}\n\t\tclass:node-status-overlay--top-left={true}\n\t\tclass:node-status-overlay--sm={size === 'sm'}\n\t\tclass:node-status-overlay--md={size === 'md'}\n\t\tclass:node-status-overlay--lg={size === 'lg'}\n\t\tstyle=\"\n\t\t\t{positionStyles[position]}\n\t\t\t--status-size: {config.statusSize};\n\t\t\t--label-size: {config.labelSize};\n\t\t\t--icon-size: {config.iconSize};\n\t\t\t--padding: {config.padding};\n\t\t\"\n\t\tonmouseenter={() => (isHovered = true)}\n\t\tonmouseleave={() => (isHovered = false)}\n\t\ttitle=\"{getStatusLabel(executionInfo.status)} - Executed {executionInfo.executionCount} times\"\n\t\trole=\"status\"\n\t\taria-label=\"Node execution status: {getStatusLabel(executionInfo.status)}\"\n\t>\n\t\t<!-- Status Display: [icon] [label] -->\n\t\t<div\n\t\t\tclass=\"node-status-overlay__status-display\"\n\t\t\tstyle=\"background-color: {getStatusBackgroundColor(executionInfo.status)}\"\n\t\t>\n\t\t\t<div\n\t\t\t\tclass=\"node-status-overlay__status-icon\"\n\t\t\t\tstyle=\"background-color: {getStatusColor(executionInfo.status)}\"\n\t\t\t>\n\t\t\t\t<Icon icon={getStatusIcon(executionInfo.status)} class=\"node-status-overlay__icon\" />\n\t\t\t</div>\n\t\t\t<StatusLabel\n\t\t\t\tlabel={getStatusLabel(executionInfo.status)}\n\t\t\t\tclass=\"node-status-overlay__label\"\n\t\t\t/>\n\t\t</div>\n\n\t\t<!-- Execution Count Badge -->\n\t\t{#if executionInfo.executionCount > 0}\n\t\t\t<div class=\"node-status-overlay__count\">\n\t\t\t\t{executionInfo.executionCount}\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<!-- Detailed Information (shown on hover) -->\n\t\t{#if showDetails && isHovered}\n\t\t\t<div class=\"node-status-overlay__details\">\n\t\t\t\t<div class=\"node-status-overlay__detail-item\">\n\t\t\t\t\t<span class=\"node-status-overlay__detail-label\">Status:</span>\n\t\t\t\t\t<span class=\"node-status-overlay__detail-value\"\n\t\t\t\t\t\t>{getStatusLabel(executionInfo.status)}</span\n\t\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"node-status-overlay__detail-item\">\n\t\t\t\t\t<span class=\"node-status-overlay__detail-label\">Executions:</span>\n\t\t\t\t\t<span class=\"node-status-overlay__detail-value\">{executionInfo.executionCount}</span>\n\t\t\t\t</div>\n\t\t\t\t{#if executionInfo.lastExecuted}\n\t\t\t\t\t<div class=\"node-status-overlay__detail-item\">\n\t\t\t\t\t\t<span class=\"node-status-overlay__detail-label\">Last Run:</span>\n\t\t\t\t\t\t<span class=\"node-status-overlay__detail-value\"\n\t\t\t\t\t\t\t>{formatLastExecuted(executionInfo.lastExecuted)}</span\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t\t{#if executionInfo.lastExecutionDuration}\n\t\t\t\t\t<div class=\"node-status-overlay__detail-item\">\n\t\t\t\t\t\t<span class=\"node-status-overlay__detail-label\">Duration:</span>\n\t\t\t\t\t\t<span class=\"node-status-overlay__detail-value\"\n\t\t\t\t\t\t\t>{formatExecutionDuration(executionInfo.lastExecutionDuration)}</span\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t\t{#if executionInfo.lastError}\n\t\t\t\t\t<div class=\"node-status-overlay__detail-item node-status-overlay__detail-item--error\">\n\t\t\t\t\t\t<span class=\"node-status-overlay__detail-label\">Error:</span>\n\t\t\t\t\t\t<span class=\"node-status-overlay__detail-value\">{executionInfo.lastError}</span>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n{/if}\n\n<style>\n\t.node-status-overlay {\n\t\tposition: absolute;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.75rem;\n\t\tz-index: 1000;\n\t\tpointer-events: none;\n\t\ttransition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\t\theight: 48px;\n\t\twidth: auto;\n\t\tmin-width: 120px;\n\t}\n\n\t.node-status-overlay--hovered {\n\t\tpointer-events: auto;\n\t\ttransform: translateY(-2px);\n\t}\n\n\t.node-status-overlay--hovered .node-status-overlay__status-display {\n\t\tbox-shadow:\n\t\t\t0 8px 25px -5px rgba(0, 0, 0, 0.15),\n\t\t\t0 4px 6px -1px rgba(0, 0, 0, 0.1),\n\t\t\tinset 0 1px 0 rgba(255, 255, 255, 0.2);\n\t\ttransform: scale(1.02);\n\t}\n\n\t.node-status-overlay__status-display {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tborder: 2px solid rgba(255, 255, 255, 0.3);\n\t\tborder-radius: 1rem;\n\t\tpadding: 0.5rem 1rem;\n\t\tbox-shadow:\n\t\t\t0 6px 12px -2px rgba(0, 0, 0, 0.15),\n\t\t\t0 4px 6px -1px rgba(0, 0, 0, 0.1),\n\t\t\tinset 0 1px 0 rgba(255, 255, 255, 0.2);\n\t\ttransition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\t\theight: 48px;\n\t\tbackdrop-filter: blur(12px);\n\t\t-webkit-backdrop-filter: blur(12px);\n\t\twidth: 100%;\n\t\tjustify-content: flex-start;\n\t\toverflow: hidden;\n\t}\n\n\t.node-status-overlay__status-icon {\n\t\twidth: 48px;\n\t\theight: 48px;\n\t\tborder-radius: 0.5rem;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tbox-shadow:\n\t\t\t0 2px 4px rgba(0, 0, 0, 0.1),\n\t\t\tinset 0 1px 0 rgba(255, 255, 255, 0.2);\n\t\ttransition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\t\tflex-shrink: 0;\n\t\tposition: relative;\n\t\tmargin: -0.5rem 0.5rem -0.5rem -1rem;\n\t}\n\n\t.node-status-overlay__count {\n\t\tbackground: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);\n\t\tcolor: #1f2937;\n\t\tborder: 2px solid rgba(255, 255, 255, 0.4);\n\t\tborder-radius: 0.75rem;\n\t\tpadding: var(--padding);\n\t\tfont-size: var(--label-size);\n\t\tfont-weight: 700;\n\t\tmin-width: 2rem;\n\t\ttext-align: center;\n\t\tline-height: 1;\n\t\tbox-shadow:\n\t\t\t0 3px 6px rgba(0, 0, 0, 0.15),\n\t\t\tinset 0 1px 0 rgba(255, 255, 255, 0.3);\n\t\theight: 48px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\ttransition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\t\ttext-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n\t}\n\n\t.node-status-overlay__details {\n\t\tposition: absolute;\n\t\ttop: 100%;\n\t\tright: 0;\n\t\tbackground-color: #ffffff;\n\t\tborder: 1px solid #e5e7eb;\n\t\tborder-radius: 0.5rem;\n\t\tpadding: 0.75rem;\n\t\tbox-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n\t\tmin-width: 200px;\n\t\tz-index: 1001;\n\t\tpointer-events: auto;\n\t}\n\n\t.node-status-overlay__detail-item {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 0.25rem;\n\t}\n\n\t.node-status-overlay__detail-item:last-child {\n\t\tmargin-bottom: 0;\n\t}\n\n\t.node-status-overlay__detail-label {\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 500;\n\t\tcolor: #6b7280;\n\t}\n\n\t.node-status-overlay__detail-value {\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 600;\n\t\tcolor: #374151;\n\t\ttext-align: right;\n\t\tmax-width: 120px;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.node-status-overlay__detail-item--error .node-status-overlay__detail-value {\n\t\tcolor: #ef4444;\n\t}\n\n\t/* Size variants */\n\t.node-status-overlay--sm {\n\t\tgap: 0.125rem;\n\t}\n\n\t.node-status-overlay--md {\n\t\tgap: 0.25rem;\n\t}\n\n\t.node-status-overlay--lg {\n\t\tgap: 0.375rem;\n\t}\n\n\t/* Animation for running status */\n\t.node-status-overlay__status-icon[style*='running'] {\n\t\tanimation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n\t}\n\n\t@keyframes pulse {\n\t\t0%,\n\t\t100% {\n\t\t\topacity: 1;\n\t\t}\n\t\t50% {\n\t\t\topacity: 0.5;\n\t\t}\n\t}\n</style>\n","/**\n * Node Wrapper Utilities\n * Provides utilities for wrapping nodes with status overlays\n */\n/**\n * Default configuration for node status overlays\n */\nexport const DEFAULT_NODE_STATUS_CONFIG = {\n    position: 'top-right',\n    size: 'md',\n    showDetails: true\n};\n/**\n * Create a node wrapper configuration\n */\nexport function createNodeWrapperConfig(nodeId, executionInfo, config = {}) {\n    return {\n        nodeId,\n        executionInfo,\n        statusPosition: config.position || DEFAULT_NODE_STATUS_CONFIG.position,\n        statusSize: config.size || DEFAULT_NODE_STATUS_CONFIG.size,\n        showStatusDetails: config.showDetails ?? DEFAULT_NODE_STATUS_CONFIG.showDetails\n    };\n}\n/**\n * Check if a node should show status overlay\n */\nexport function shouldShowNodeStatus(executionInfo) {\n    if (!executionInfo)\n        return false;\n    return (executionInfo.status !== 'idle' || executionInfo.executionCount > 0 || executionInfo.isExecuting);\n}\n/**\n * Get optimal status position based on node type\n */\nexport function getOptimalStatusPosition(nodeType) {\n    switch (nodeType) {\n        case 'tool':\n            return 'top-left';\n        case 'note':\n            return 'bottom-right';\n        case 'simple':\n        case 'square':\n        default:\n            return 'top-right';\n    }\n}\n/**\n * Get optimal status size based on node type\n */\nexport function getOptimalStatusSize(nodeType) {\n    switch (nodeType) {\n        case 'tool':\n            return 'sm';\n        case 'note':\n            return 'sm';\n        case 'simple':\n        case 'square':\n        default:\n            return 'md';\n    }\n}\n","/**\n * Node type utilities for FlowDrop\n * Handles dynamic node type resolution based on NodeMetadata\n */\n/**\n * Maps NodeType to SvelteFlow component names\n */\nconst NODE_TYPE_TO_COMPONENT_MAP = {\n    note: 'note',\n    simple: 'simple',\n    square: 'square',\n    tool: 'tool',\n    gateway: 'gateway',\n    default: 'workflowNode'\n};\n/**\n * Gets the SvelteFlow component name for a given NodeType\n */\nexport function getComponentNameForNodeType(nodeType) {\n    return NODE_TYPE_TO_COMPONENT_MAP[nodeType] || 'workflowNode';\n}\n/**\n * Gets the available node types for a given NodeMetadata\n * Priority: supportedTypes > type > \"default\"\n */\nexport function getAvailableNodeTypes(metadata) {\n    if (metadata.supportedTypes && metadata.supportedTypes.length > 0) {\n        return metadata.supportedTypes;\n    }\n    if (metadata.type) {\n        return [metadata.type];\n    }\n    return ['default'];\n}\n/**\n * Gets the primary (default) node type for a given NodeMetadata\n * This is used when no specific type is configured by the user\n */\nexport function getPrimaryNodeType(metadata) {\n    const availableTypes = getAvailableNodeTypes(metadata);\n    return availableTypes[0];\n}\n/**\n * Determines the appropriate node type based on configuration and metadata\n * Priority:\n * 1. configNodeType (if valid for this metadata)\n * 2. metadata.type (if valid)\n * 3. First supportedType\n * 4. \"default\"\n */\nexport function resolveNodeType(metadata, configNodeType) {\n    const availableTypes = getAvailableNodeTypes(metadata);\n    // Check if configNodeType is valid for this metadata\n    if (configNodeType && availableTypes.includes(configNodeType)) {\n        return configNodeType;\n    }\n    // Fall back to primary type\n    return getPrimaryNodeType(metadata);\n}\n/**\n * Gets the SvelteFlow component name for resolved node type\n * This replaces the old mapNodeType function\n */\nexport function resolveComponentName(metadata, configNodeType) {\n    const nodeType = resolveNodeType(metadata, configNodeType);\n    return getComponentNameForNodeType(nodeType);\n}\n/**\n * Validates if a node type is supported by the given metadata\n */\nexport function isNodeTypeSupported(metadata, nodeType) {\n    const availableTypes = getAvailableNodeTypes(metadata);\n    return availableTypes.includes(nodeType);\n}\n/**\n * Gets enum options for node type configuration\n * Used in config schemas to show available options\n */\nexport function getNodeTypeEnumOptions(metadata) {\n    const availableTypes = getAvailableNodeTypes(metadata);\n    const typeDisplayNames = {\n        note: 'Note (sticky note style)',\n        simple: 'Simple (compact layout)',\n        square: 'Square (geometric layout)',\n        tool: 'Tool (specialized for agent tools)',\n        gateway: 'Gateway (branching control flow)',\n        default: 'Default (standard workflow node)'\n    };\n    return {\n        enum: availableTypes,\n        enumNames: availableTypes.map((type) => typeDisplayNames[type] || type)\n    };\n}\n/**\n * Creates a nodeType config property that respects supportedTypes\n * This replaces hardcoded enum values in config schemas\n */\nexport function createNodeTypeConfigProperty(metadata, defaultType) {\n    const { enum: enumValues, enumNames } = getNodeTypeEnumOptions(metadata);\n    const primaryType = defaultType || getPrimaryNodeType(metadata);\n    return {\n        type: 'string',\n        title: 'Node Type',\n        description: 'Choose the visual representation for this node',\n        default: primaryType,\n        enum: enumValues,\n        enumNames\n    };\n}\n","<!--\n  Universal Node Component\n  Renders any node type with automatic status overlay injection\n  This component can replace individual node components in SvelteFlow\n-->\n\n<script lang=\"ts\">\n\timport type { WorkflowNode } from '../types/index.js';\n\timport WorkflowNodeComponent from './WorkflowNode.svelte';\n\timport NotesNode from './NotesNode.svelte';\n\timport SimpleNode from './SimpleNode.svelte';\n\timport SquareNode from './SquareNode.svelte';\n\timport ToolNode from './ToolNode.svelte';\n\timport GatewayNode from './GatewayNode.svelte';\n\timport NodeStatusOverlay from './NodeStatusOverlay.svelte';\n\timport {\n\t\tshouldShowNodeStatus,\n\t\tgetOptimalStatusPosition,\n\t\tgetOptimalStatusSize\n\t} from '../utils/nodeWrapper.js';\n\timport { resolveComponentName } from '../utils/nodeTypes.js';\n\n\tlet {\n\t\tdata,\n\t\tselected = false\n\t}: {\n\t\tdata: WorkflowNode['data'] & {\n\t\t\tnodeId?: string;\n\t\t\tonConfigOpen?: (node: { id: string; type: string; data: WorkflowNode['data'] }) => void;\n\t\t};\n\t\tselected?: boolean;\n\t} = $props();\n\n\t// Determine which node component to render based on node type\n\t// Priority: config.nodeType > metadata.type\n\t// Explicitly track config.nodeType to ensure reactivity\n\tlet configNodeType = $derived(data.config?.nodeType as string | undefined);\n\tlet resolvedComponentName = $derived(\n\t\tdata.metadata ? resolveComponentName(data.metadata, configNodeType) : 'workflowNode'\n\t);\n\tlet nodeComponent = $derived(getNodeComponent(resolvedComponentName));\n\n\t// Get execution info\n\tlet executionInfo = $derived(data.executionInfo);\n\tlet shouldShowStatus = $derived(\n\t\tshouldShowNodeStatus(executionInfo) && resolvedComponentName !== 'note'\n\t);\n\n\t/**\n\t * Get the appropriate node component based on type\n\t */\n\tfunction getNodeComponent(nodeType: string) {\n\t\tswitch (nodeType) {\n\t\t\tcase 'note':\n\t\t\t\treturn NotesNode;\n\t\t\tcase 'simple':\n\t\t\t\treturn SimpleNode;\n\t\t\tcase 'square':\n\t\t\t\treturn SquareNode;\n\t\t\tcase 'tool':\n\t\t\t\treturn ToolNode;\n\t\t\tcase 'gateway':\n\t\t\t\treturn GatewayNode;\n\t\t\tcase 'workflowNode':\n\t\t\tdefault:\n\t\t\t\treturn WorkflowNodeComponent;\n\t\t}\n\t}\n\n\t/**\n\t * Get optimal status position for this node type\n\t */\n\tfunction getStatusPosition(): 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right' {\n\t\treturn getOptimalStatusPosition(resolvedComponentName);\n\t}\n\n\t/**\n\t * Get optimal status size for this node type\n\t */\n\tfunction getStatusSize(): 'sm' | 'md' | 'lg' {\n\t\treturn getOptimalStatusSize(resolvedComponentName);\n\t}\n</script>\n\n<div class=\"universal-node\">\n\t<!-- Render the appropriate node component -->\n\t{#if nodeComponent === WorkflowNodeComponent}\n\t\t<WorkflowNodeComponent {data} {selected} />\n\t{:else if nodeComponent === NotesNode}\n\t\t<NotesNode {data} {selected} />\n\t{:else if nodeComponent === SimpleNode}\n\t\t<SimpleNode {data} {selected} />\n\t{:else if nodeComponent === SquareNode}\n\t\t<SquareNode {data} {selected} />\n\t{:else if nodeComponent === ToolNode}\n\t\t<ToolNode {data} {selected} />\n\t{:else if nodeComponent === GatewayNode}\n\t\t<GatewayNode {data} {selected} />\n\t{/if}\n\n\t<!-- Status overlay - only show if there's meaningful status information -->\n\t{#if shouldShowStatus}\n\t\t<NodeStatusOverlay\n\t\t\tnodeId={data.nodeId || 'unknown'}\n\t\t\t{executionInfo}\n\t\t\tposition={getStatusPosition()}\n\t\t\tsize={getStatusSize()}\n\t\t\tshowDetails={true}\n\t\t/>\n\t{/if}\n</div>\n\n<style>\n\t.universal-node {\n\t\tposition: relative;\n\t\tdisplay: inline-block;\n\t}\n</style>\n","/**\n * Client-side API service for FlowDrop\n * Provides methods to interact with the backend APIs using configurable endpoints\n */\nimport { buildEndpointUrl, getEndpointMethod, getEndpointHeaders } from '../config/endpoints.js';\nlet endpointConfig = null;\n/**\n * Set the endpoint configuration at runtime\n */\nexport function setEndpointConfig(config) {\n    endpointConfig = config;\n}\n/**\n * Get the current endpoint configuration\n */\nexport function getEndpointConfig() {\n    return endpointConfig;\n}\n/**\n * Set the API base URL (deprecated - use setEndpointConfig instead)\n * @deprecated Use setEndpointConfig() with a full EndpointConfig object instead\n */\nexport function setApiBaseUrl(url) {\n    console.warn(' setApiBaseUrl() is deprecated. Use setEndpointConfig() with a full EndpointConfig object instead.');\n    if (!endpointConfig) {\n        // Dynamic import for backward compatibility\n        import('../config/endpoints.js')\n            .then(({ createEndpointConfig }) => {\n            endpointConfig = createEndpointConfig(url);\n        })\n            .catch(() => {\n            // Failed to load endpoint config\n        });\n    }\n    else {\n        endpointConfig.baseUrl = url.replace(/\\/$/, '');\n    }\n}\n/**\n * Generic API request helper with endpoint configuration\n */\nasync function apiRequest(endpointKey, endpointPath, params, options = {}) {\n    if (!endpointConfig) {\n        throw new Error('Endpoint configuration not set. Call setEndpointConfig() first.');\n    }\n    const url = buildEndpointUrl(endpointConfig, endpointPath, params);\n    const method = getEndpointMethod(endpointConfig, endpointKey);\n    const headers = getEndpointHeaders(endpointConfig, endpointKey);\n    const response = await fetch(url, {\n        method,\n        headers,\n        ...options\n    });\n    // Check if response is JSON\n    const contentType = response.headers.get('content-type');\n    const isJson = contentType?.includes('application/json');\n    if (!response.ok) {\n        // Try to get error details\n        let errorMessage = `HTTP ${response.status}: ${response.statusText}`;\n        if (isJson) {\n            try {\n                const data = await response.json();\n                errorMessage = data.error || data.message || errorMessage;\n            }\n            catch {\n                // Failed to parse JSON, use default error message\n            }\n        }\n        else {\n            // Response is not JSON (probably HTML error page)\n            try {\n                const text = await response.text();\n                // Extract first 200 characters for debugging\n                const preview = text.substring(0, 200).trim();\n                errorMessage = `${errorMessage}. Server returned: ${preview}...`;\n            }\n            catch {\n                // Failed to read response text\n            }\n        }\n        throw new Error(errorMessage);\n    }\n    // Parse successful response\n    const data = await response.json();\n    return data;\n}\n/**\n * Node API methods\n */\nexport const nodeApi = {\n    /**\n     * Get all node types with optional filtering\n     */\n    async getNodes(options) {\n        if (!endpointConfig) {\n            throw new Error('Endpoint configuration not set');\n        }\n        const params = new URLSearchParams();\n        if (options?.category)\n            params.append('category', options.category);\n        if (options?.search)\n            params.append('search', options.search);\n        if (options?.limit)\n            params.append('limit', options.limit.toString());\n        if (options?.offset)\n            params.append('offset', options.offset.toString());\n        const response = await apiRequest('nodes.list', endpointConfig.endpoints.nodes.list + '?' + params.toString());\n        return response.data || [];\n    },\n    /**\n     * Get a specific node type by ID\n     */\n    async getNode(id) {\n        if (!endpointConfig) {\n            throw new Error('Endpoint configuration not set');\n        }\n        const response = await apiRequest('nodes.get', endpointConfig.endpoints.nodes.get, { id });\n        if (!response.data) {\n            throw new Error('Node not found');\n        }\n        return response.data;\n    }\n};\n/**\n * Workflow API methods\n */\nexport const workflowApi = {\n    /**\n     * Get all workflows with optional filtering\n     */\n    async getWorkflows(options) {\n        if (!endpointConfig) {\n            throw new Error('Endpoint configuration not set');\n        }\n        const params = new URLSearchParams();\n        if (options?.search)\n            params.append('search', options.search);\n        if (options?.limit)\n            params.append('limit', options.limit.toString());\n        if (options?.offset)\n            params.append('offset', options.offset.toString());\n        const response = await apiRequest('workflows.list', endpointConfig.endpoints.workflows.list + '?' + params.toString());\n        return response.data || [];\n    },\n    /**\n     * Get a specific workflow by ID\n     */\n    async getWorkflow(id) {\n        if (!endpointConfig) {\n            throw new Error('Endpoint configuration not set');\n        }\n        const response = await apiRequest('workflows.get', endpointConfig.endpoints.workflows.get, { id });\n        if (!response.data) {\n            throw new Error('Workflow not found');\n        }\n        return response.data;\n    },\n    /**\n     * Create a new workflow\n     */\n    async createWorkflow(workflow) {\n        if (!endpointConfig) {\n            throw new Error('Endpoint configuration not set');\n        }\n        // Transform workflow data for Drupal backend compatibility\n        // Drupal expects \"label\" instead of \"name\"\n        const drupalWorkflow = {\n            ...workflow,\n            label: workflow.name, // Map name to label for Drupal\n            name: workflow.name // Keep name as well for compatibility\n        };\n        const response = await apiRequest('workflows.create', endpointConfig.endpoints.workflows.create, undefined, {\n            method: 'POST',\n            body: JSON.stringify(drupalWorkflow)\n        });\n        if (!response.data) {\n            throw new Error('Failed to create workflow');\n        }\n        return response.data;\n    },\n    /**\n     * Update an existing workflow\n     */\n    async updateWorkflow(id, workflow) {\n        if (!endpointConfig) {\n            throw new Error('Endpoint configuration not set');\n        }\n        // Transform workflow data for Drupal backend compatibility\n        // Drupal expects \"label\" instead of \"name\"\n        const drupalWorkflow = workflow.name\n            ? {\n                ...workflow,\n                label: workflow.name, // Map name to label for Drupal\n                name: workflow.name // Keep name as well for compatibility\n            }\n            : workflow;\n        const response = await apiRequest('workflows.update', endpointConfig.endpoints.workflows.update, { id }, {\n            method: 'PUT',\n            body: JSON.stringify(drupalWorkflow)\n        });\n        if (!response.data) {\n            throw new Error('Failed to update workflow');\n        }\n        return response.data;\n    },\n    /**\n     * Delete a workflow\n     */\n    async deleteWorkflow(id) {\n        if (!endpointConfig) {\n            throw new Error('Endpoint configuration not set');\n        }\n        await apiRequest('workflows.delete', endpointConfig.endpoints.workflows.delete, { id }, { method: 'DELETE' });\n    },\n    /**\n     * Save workflow (create or update)\n     */\n    async saveWorkflow(workflow) {\n        // Check if this is an existing workflow by looking for a valid ID\n        // Valid IDs should not be a UUID (which indicates a new workflow)\n        const isExistingWorkflow = workflow.id &&\n            workflow.id.length > 0 &&\n            !workflow.id.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);\n        if (isExistingWorkflow) {\n            // Update existing workflow\n            return this.updateWorkflow(workflow.id, workflow);\n        }\n        else {\n            // Create new workflow\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            const { id, ...workflowData } = workflow;\n            return this.createWorkflow(workflowData);\n        }\n    }\n};\n/**\n * Export the API service\n */\nexport const api = {\n    nodes: nodeApi,\n    workflows: workflowApi\n};\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n","/**\n * Node Execution Service\n * Handles fetching and managing node execution information from the backend\n */\nimport { getEndpointConfig } from './api.js';\nimport { buildEndpointUrl } from '../config/endpoints.js';\n/**\n * Service for managing node execution information\n */\nexport class NodeExecutionService {\n    static instance;\n    cache = new Map();\n    cacheTimeout = 30000; // 30 seconds\n    lastFetch = 0;\n    apiUnavailable = false;\n    apiUnavailableUntil = 0;\n    constructor() { }\n    static getInstance() {\n        if (!NodeExecutionService.instance) {\n            NodeExecutionService.instance = new NodeExecutionService();\n        }\n        return NodeExecutionService.instance;\n    }\n    /**\n     * Get execution information for a specific node from pipeline data\n     */\n    async getNodeExecutionInfo(nodeId, pipelineId) {\n        if (!pipelineId) {\n            return null;\n        }\n        try {\n            const endpointConfig = getEndpointConfig();\n            const url = buildEndpointUrl(endpointConfig, endpointConfig.endpoints.pipelines.get, {\n                id: pipelineId\n            });\n            const response = await fetch(url);\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`);\n            }\n            const pipelineData = await response.json();\n            const jobs = pipelineData.jobs || [];\n            const nodeStatuses = pipelineData.node_statuses || {};\n            // Find the job for this node\n            const nodeJob = jobs.find((job) => job.node_id === nodeId);\n            const nodeStatus = nodeStatuses[nodeId];\n            if (!nodeJob && !nodeStatus) {\n                return {\n                    status: 'idle',\n                    executionCount: 0,\n                    isExecuting: false\n                };\n            }\n            const executionInfo = {\n                status: this.mapJobStatusToExecutionStatus(nodeStatus?.status || nodeJob?.status || 'idle'),\n                executionCount: nodeJob?.execution_count || 0,\n                isExecuting: nodeStatus?.status === 'running' || nodeJob?.status === 'running',\n                lastExecuted: nodeJob?.last_executed || nodeStatus?.last_executed,\n                lastExecutionDuration: nodeJob?.execution_time || nodeStatus?.execution_time,\n                lastError: nodeJob?.error || nodeStatus?.error\n            };\n            this.cache.set(nodeId, executionInfo);\n            return executionInfo;\n        }\n        catch (error) {\n            console.error('Failed to fetch node execution info:', error);\n            return null;\n        }\n    }\n    /**\n     * Get execution information for multiple nodes from pipeline data\n     */\n    async getMultipleNodeExecutionInfo(nodeIds, pipelineId) {\n        if (!pipelineId) {\n            return {};\n        }\n        // Check if API is temporarily unavailable\n        if (this.apiUnavailable && Date.now() < this.apiUnavailableUntil) {\n            const defaultExecutionInfo = {};\n            nodeIds.forEach((nodeId) => {\n                defaultExecutionInfo[nodeId] = {\n                    status: 'idle',\n                    executionCount: 0,\n                    isExecuting: false\n                };\n            });\n            return defaultExecutionInfo;\n        }\n        try {\n            const endpointConfig = getEndpointConfig();\n            const url = buildEndpointUrl(endpointConfig, endpointConfig.endpoints.pipelines.get, {\n                id: pipelineId\n            });\n            const response = await fetch(url);\n            if (!response.ok) {\n                // If the endpoint returns 404, it means the pipeline API is not available\n                // Mark API as unavailable for 5 minutes to prevent repeated calls\n                if (response.status === 404) {\n                    console.warn(`Pipeline API endpoint not available for pipeline ${pipelineId}`);\n                    this.apiUnavailable = true;\n                    this.apiUnavailableUntil = Date.now() + 5 * 60 * 1000; // 5 minutes\n                    const defaultExecutionInfo = {};\n                    nodeIds.forEach((nodeId) => {\n                        defaultExecutionInfo[nodeId] = {\n                            status: 'idle',\n                            executionCount: 0,\n                            isExecuting: false\n                        };\n                    });\n                    return defaultExecutionInfo;\n                }\n                throw new Error(`HTTP error! status: ${response.status}`);\n            }\n            const result = await response.json();\n            const jobs = result.jobs || [];\n            const executionInfoMap = {};\n            // Initialize all nodes with default values\n            nodeIds.forEach((nodeId) => {\n                executionInfoMap[nodeId] = {\n                    status: 'idle',\n                    executionCount: 0,\n                    isExecuting: false\n                };\n            });\n            // Update with actual job data\n            jobs.forEach((job) => {\n                const nodeId = job.node_id;\n                if (nodeIds.includes(nodeId)) {\n                    executionInfoMap[nodeId] = {\n                        status: this.mapJobStatusToExecutionStatus(job.status),\n                        executionCount: job.execution_count || 0,\n                        isExecuting: job.status === 'running',\n                        lastExecuted: job.completed || job.started,\n                        lastExecutionDuration: job.execution_time,\n                        lastError: job.error_message\n                    };\n                    // Update cache\n                    this.cache.set(nodeId, executionInfoMap[nodeId]);\n                }\n            });\n            return executionInfoMap;\n        }\n        catch (error) {\n            console.error('Failed to fetch multiple node execution info:', error);\n            // Return default values instead of empty object to prevent repeated calls\n            const defaultExecutionInfo = {};\n            nodeIds.forEach((nodeId) => {\n                defaultExecutionInfo[nodeId] = {\n                    status: 'idle',\n                    executionCount: 0,\n                    isExecuting: false\n                };\n            });\n            return defaultExecutionInfo;\n        }\n    }\n    /**\n     * Get all node execution counts\n     */\n    async getAllNodeExecutionCounts() {\n        try {\n            const endpointConfig = getEndpointConfig();\n            const url = buildEndpointUrl(endpointConfig, '/node-execution-counts');\n            const response = await fetch(url);\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`);\n            }\n            const result = await response.json();\n            if (result.success && result.data) {\n                return result.data;\n            }\n            return {};\n        }\n        catch (error) {\n            console.error('Failed to fetch all node execution counts:', error);\n            return {};\n        }\n    }\n    /**\n     * Get cached execution info for a node\n     */\n    getCachedNodeExecutionInfo(nodeId) {\n        return this.cache.get(nodeId) || null;\n    }\n    /**\n     * Clear cache for a specific node\n     */\n    clearNodeCache(nodeId) {\n        this.cache.delete(nodeId);\n    }\n    /**\n     * Clear all cache\n     */\n    clearAllCache() {\n        this.cache.clear();\n        this.lastFetch = 0;\n    }\n    /**\n     * Check if cache is stale\n     */\n    isCacheStale() {\n        return Date.now() - this.lastFetch > this.cacheTimeout;\n    }\n    /**\n     * Update execution info for a node (for real-time updates)\n     */\n    updateNodeExecutionInfo(nodeId, executionInfo) {\n        const existing = this.cache.get(nodeId);\n        if (existing) {\n            this.cache.set(nodeId, { ...existing, ...executionInfo });\n        }\n        else {\n            this.cache.set(nodeId, {\n                status: 'idle',\n                executionCount: 0,\n                isExecuting: false,\n                ...executionInfo\n            });\n        }\n    }\n    /**\n     * Map job status to execution status\n     */\n    mapJobStatusToExecutionStatus(jobStatus) {\n        switch (jobStatus) {\n            case 'pending':\n                return 'pending';\n            case 'running':\n                return 'running';\n            case 'completed':\n                return 'completed';\n            case 'failed':\n                return 'failed';\n            case 'cancelled':\n                return 'cancelled';\n            case 'skipped':\n                return 'skipped';\n            default:\n                return 'idle';\n        }\n    }\n    /**\n     * Batch update execution info for multiple nodes\n     */\n    updateMultipleNodeExecutionInfo(updates) {\n        Object.entries(updates).forEach(([nodeId, executionInfo]) => {\n            this.updateNodeExecutionInfo(nodeId, executionInfo);\n        });\n    }\n    /**\n     * Reset API availability status (useful for testing or when API becomes available)\n     */\n    resetApiAvailability() {\n        this.apiUnavailable = false;\n        this.apiUnavailableUntil = 0;\n    }\n}\n// Export singleton instance\nexport const nodeExecutionService = NodeExecutionService.getInstance();\n","/**\n * Workflow Editor Helper\n * Contains business logic for workflow operations\n */\nimport { MarkerType } from '@xyflow/svelte';\nimport { hasCycles } from '../utils/connections.js';\nimport { workflowApi, nodeApi, setEndpointConfig } from '../services/api.js';\nimport { v4 as uuidv4 } from 'uuid';\nimport { workflowActions } from '../stores/workflowStore.js';\nimport { nodeExecutionService } from '../services/nodeExecutionService.js';\n/**\n * Generate a unique node ID based on node type and existing nodes\n * Format: <node_type>.<number>\n * Example: boolean_gateway.1, calculator.2\n */\nexport function generateNodeId(nodeTypeId, existingNodes) {\n    // Count how many nodes of this type already exist\n    const existingNodeIds = existingNodes\n        .filter((node) => node.data?.metadata?.id === nodeTypeId)\n        .map((node) => node.id);\n    // Extract the numbers from existing IDs with the same prefix\n    const existingNumbers = existingNodeIds\n        .map((id) => {\n        const match = id.match(new RegExp(`^${nodeTypeId}\\\\.(\\\\d+)$`));\n        return match ? parseInt(match[1], 10) : 0;\n    })\n        .filter((num) => num > 0);\n    // Find the next available number (highest + 1)\n    const nextNumber = existingNumbers.length > 0 ? Math.max(...existingNumbers) + 1 : 1;\n    return `${nodeTypeId}.${nextNumber}`;\n}\n/**\n * Edge styling configuration\n */\nexport class EdgeStylingHelper {\n    /**\n     * Apply custom styling to connection edges based on rules:\n     * - Dashed lines for connections to tool nodes\n     * - Arrow markers pointing towards input ports\n     */\n    static applyConnectionStyling(edge, sourceNode, targetNode) {\n        // Rule 1: Dashed lines for tool nodes\n        // A node is a tool node when it uses the ToolNode component,\n        // which happens when sourceNode.type === \"tool\"\n        const isToolNode = sourceNode.type === 'tool';\n        // Use inline styles for dashed lines (more reliable than CSS classes)\n        if (isToolNode) {\n            edge.style = 'stroke-dasharray: 0 4 0; stroke: amber !important;';\n            edge.class = 'flowdrop--edge--tool';\n        }\n        else {\n            edge.style = 'stroke: grey;';\n        }\n        // Store metadata in edge data for debugging\n        edge.data = {\n            ...edge.data,\n            isToolConnection: isToolNode,\n            targetNodeType: targetNode.type,\n            targetCategory: targetNode.data.metadata.category\n        };\n        // Rule 2: Always add arrow pointing towards input port\n        // This replaces the default arrows we removed\n        if (!isToolNode) {\n            edge.markerEnd = {\n                type: MarkerType.ArrowClosed,\n                width: 16,\n                height: 16,\n                color: 'grey'\n            };\n        }\n    }\n    /**\n     * Update existing edges with custom styling rules\n     */\n    static updateEdgeStyles(edges, nodes) {\n        return edges.map((edge) => {\n            // Find source and target nodes\n            const sourceNode = nodes.find((node) => node.id === edge.source);\n            const targetNode = nodes.find((node) => node.id === edge.target);\n            if (!sourceNode || !targetNode) {\n                return edge;\n            }\n            // Create a copy of the edge and apply styling\n            const updatedEdge = { ...edge };\n            this.applyConnectionStyling(updatedEdge, sourceNode, targetNode);\n            return updatedEdge;\n        });\n    }\n}\n/**\n * Node operations helper\n */\nexport class NodeOperationsHelper {\n    /**\n     * Load nodes from API\n     */\n    static async loadNodesFromApi(providedNodes) {\n        // If nodes are provided via props, use them\n        if (providedNodes && providedNodes.length > 0) {\n            return providedNodes;\n        }\n        // Otherwise, load from API\n        try {\n            const fetchedNodes = await nodeApi.getNodes();\n            return fetchedNodes;\n        }\n        catch (error) {\n            console.error(' Failed to load nodes from API:', error);\n            // Use fallback sample nodes\n            return [\n                {\n                    id: 'text-input',\n                    name: 'Text Input',\n                    category: 'inputs',\n                    description: 'Simple text input field',\n                    version: '1.0.0',\n                    icon: 'mdi:text-box',\n                    inputs: [],\n                    outputs: [{ id: 'text', name: 'text', type: 'output', dataType: 'string' }]\n                },\n                {\n                    id: 'text-output',\n                    name: 'Text Output',\n                    category: 'outputs',\n                    description: 'Display text output',\n                    version: '1.0.0',\n                    icon: 'mdi:text-box-outline',\n                    inputs: [{ id: 'text', name: 'text', type: 'input', dataType: 'string' }],\n                    outputs: []\n                }\n            ];\n        }\n    }\n    /**\n     * Load node execution information for all nodes in the workflow\n     */\n    static async loadNodeExecutionInfo(workflow, pipelineId) {\n        if (!workflow?.nodes)\n            return {};\n        // Only load execution info if we have a pipelineId (for pipeline status mode)\n        if (!pipelineId)\n            return {};\n        try {\n            const nodeIds = workflow.nodes.map((node) => node.id);\n            const executionInfo = await nodeExecutionService.getMultipleNodeExecutionInfo(nodeIds, pipelineId);\n            return executionInfo;\n        }\n        catch (error) {\n            console.error('Failed to load node execution info:', error);\n            return {};\n        }\n    }\n    /**\n     * Create a new node from dropped data\n     */\n    static createNodeFromDrop(nodeTypeData, position, existingNodes = []) {\n        try {\n            const parsedData = JSON.parse(nodeTypeData);\n            // Handle both old format (with type: \"node\") and new format (direct NodeMetadata)\n            let nodeType;\n            let nodeData;\n            if (parsedData.type === 'node') {\n                // Old format from sidebar\n                nodeType = parsedData.nodeData.metadata;\n                nodeData = parsedData.nodeData;\n            }\n            else {\n                // New format (direct NodeMetadata)\n                nodeType = parsedData;\n                // Extract initial config from configSchema\n                let initialConfig = {};\n                if (nodeType.configSchema && typeof nodeType.configSchema === 'object') {\n                    // If configSchema is a JSON Schema, extract default values\n                    if (nodeType.configSchema.properties) {\n                        // JSON Schema format - extract defaults\n                        Object.entries(nodeType.configSchema.properties).forEach(([key, prop]) => {\n                            if (prop && typeof prop === 'object' && 'default' in prop) {\n                                initialConfig[key] = prop.default;\n                            }\n                        });\n                    }\n                    else {\n                        // Simple object format - use as is\n                        initialConfig = { ...nodeType.configSchema };\n                    }\n                }\n                nodeData = {\n                    label: nodeType.name,\n                    config: initialConfig,\n                    metadata: nodeType\n                };\n            }\n            // Generate node ID based on node type and existing nodes\n            const newNodeId = generateNodeId(nodeType.id, existingNodes);\n            // All nodes use \"universalNode\" type\n            // UniversalNode component handles internal switching based on metadata and config\n            const newNode = {\n                id: newNodeId,\n                type: 'universalNode',\n                position, // Use the position calculated from the drop event\n                deletable: true,\n                data: {\n                    ...nodeData,\n                    nodeId: newNodeId // Use the same ID\n                }\n            };\n            return newNode;\n        }\n        catch (error) {\n            console.error('Error parsing node data:', error);\n            return null;\n        }\n    }\n}\n/**\n * Workflow operations helper\n */\nexport class WorkflowOperationsHelper {\n    /**\n     * Generate workflow metadata for updates\n     */\n    static generateMetadata(existingMetadata) {\n        return {\n            ...existingMetadata,\n            updatedAt: new Date().toISOString(),\n            versionId: `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n            updateNumber: (existingMetadata?.updateNumber || 0) + 1\n        };\n    }\n    /**\n     * Update workflow with new nodes/edges and generate new metadata\n     */\n    static updateWorkflow(workflow, nodes, edges) {\n        return {\n            ...workflow,\n            nodes,\n            edges,\n            metadata: this.generateMetadata(workflow.metadata)\n        };\n    }\n    /**\n     * Clear workflow (remove all nodes and edges)\n     */\n    static clearWorkflow(workflow) {\n        return {\n            ...workflow,\n            nodes: [],\n            edges: [],\n            metadata: this.generateMetadata(workflow.metadata)\n        };\n    }\n    /**\n     * Update node configuration\n     */\n    static updateNodeConfig(workflow, nodeId, newConfig) {\n        return {\n            ...workflow,\n            nodes: workflow.nodes.map((node) => node.id === nodeId\n                ? {\n                    ...node,\n                    data: { ...node.data, config: { ...newConfig } }\n                }\n                : node),\n            metadata: this.generateMetadata(workflow.metadata)\n        };\n    }\n    /**\n     * Add a new node to the workflow\n     */\n    static addNode(workflow, node) {\n        return {\n            ...workflow,\n            nodes: [...workflow.nodes, node],\n            metadata: this.generateMetadata(workflow.metadata)\n        };\n    }\n    /**\n     * Save workflow to backend\n     */\n    static async saveWorkflow(workflow) {\n        if (!workflow) {\n            console.warn('No workflow data available to save');\n            return null;\n        }\n        try {\n            // Determine the workflow ID based on whether we have an existing workflow\n            let workflowId;\n            if (workflow.id) {\n                // Use the existing workflow ID\n                workflowId = workflow.id;\n            }\n            else {\n                // Generate a new UUID for a new workflow\n                workflowId = uuidv4();\n            }\n            const workflowToSave = {\n                id: workflowId,\n                name: workflow.name || 'Untitled Workflow',\n                nodes: workflow.nodes || [],\n                edges: workflow.edges || [],\n                metadata: {\n                    version: '1.0.0',\n                    createdAt: workflow.metadata?.createdAt || new Date().toISOString(),\n                    updatedAt: new Date().toISOString()\n                }\n            };\n            const savedWorkflow = await workflowApi.saveWorkflow(workflowToSave);\n            // Update the workflow ID if it changed (new workflow)\n            if (savedWorkflow.id && savedWorkflow.id !== workflowToSave.id) {\n                workflowActions.batchUpdate({\n                    nodes: workflowToSave.nodes,\n                    edges: workflowToSave.edges,\n                    name: workflowToSave.name,\n                    metadata: {\n                        ...workflowToSave.metadata,\n                        ...savedWorkflow.metadata\n                    }\n                });\n            }\n            return savedWorkflow;\n        }\n        catch (error) {\n            console.error(' Failed to save workflow:', error);\n            throw error;\n        }\n    }\n    /**\n     * Export workflow as JSON file\n     */\n    static exportWorkflow(workflow) {\n        if (!workflow) {\n            console.warn('No workflow data available to export');\n            return;\n        }\n        // Use the same ID logic as saveWorkflow\n        const workflowId = workflow.id || uuidv4();\n        const workflowToExport = {\n            id: workflowId,\n            name: workflow.name || 'Untitled Workflow',\n            nodes: workflow.nodes || [],\n            edges: workflow.edges || [],\n            metadata: {\n                version: '1.0.0',\n                createdAt: workflow.metadata?.createdAt || new Date().toISOString(),\n                updatedAt: new Date().toISOString()\n            }\n        };\n        const dataStr = JSON.stringify(workflowToExport, null, 2);\n        const dataBlob = new Blob([dataStr], { type: 'application/json' });\n        const url = URL.createObjectURL(dataBlob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `${workflowToExport.name}.json`;\n        link.click();\n        URL.revokeObjectURL(url);\n    }\n    /**\n     * Check if workflow has cycles\n     */\n    static checkWorkflowCycles(nodes, edges) {\n        return hasCycles(nodes, edges);\n    }\n}\n/**\n * Configuration helper\n */\nexport class ConfigurationHelper {\n    /**\n     * Configure API endpoints\n     */\n    static configureEndpoints(config) {\n        setEndpointConfig(config);\n    }\n}\n","<!--\n  Workflow Editor Component\n  Main workflow editor with sidebar and flow canvas\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport {\n\t\tSvelteFlow,\n\t\tConnectionLineType,\n\t\tControls,\n\t\tBackground,\n\t\tBackgroundVariant,\n\t\tMiniMap,\n\t\tSvelteFlowProvider\n\t} from '@xyflow/svelte';\n\timport '@xyflow/svelte/dist/style.css';\n\timport type {\n\t\tWorkflowNode as WorkflowNodeType,\n\t\tNodeMetadata,\n\t\tWorkflow,\n\t\tWorkflowEdge\n\t} from '../types/index.js';\n\timport CanvasBanner from './CanvasBanner.svelte';\n\timport FlowDropZone from './FlowDropZone.svelte';\n\timport { tick } from 'svelte';\n\timport type { EndpointConfig } from '../config/endpoints.js';\n\timport ConnectionLine from './ConnectionLine.svelte';\n\timport { workflowStore, workflowActions } from '../stores/workflowStore.js';\n\timport UniversalNode from './UniversalNode.svelte';\n\timport {\n\t\tEdgeStylingHelper,\n\t\tNodeOperationsHelper,\n\t\tWorkflowOperationsHelper,\n\t\tConfigurationHelper\n\t} from '../helpers/workflowEditorHelper.js';\n\timport type { NodeExecutionInfo } from '../types/index.js';\n\timport { areNodeArraysEqual, areEdgeArraysEqual, throttle } from '../utils/performanceUtils.js';\n\n\tinterface Props {\n\t\tnodes?: NodeMetadata[];\n\t\t// workflow?: Workflow; // Removed - use global store directly\n\t\tendpointConfig?: EndpointConfig;\n\t\theight?: string | number;\n\t\twidth?: string | number;\n\t\tisConfigSidebarOpen?: boolean;\n\t\tselectedNodeForConfig?: WorkflowNodeType | null;\n\t\topenConfigSidebar?: (node: WorkflowNodeType) => void;\n\t\tcloseConfigSidebar?: () => void;\n\t\t// New configuration options for pipeline status mode\n\t\tlockWorkflow?: boolean;\n\t\treadOnly?: boolean;\n\t\tnodeStatuses?: Record<string, 'pending' | 'running' | 'completed' | 'error'>;\n\t\t// Pipeline ID for fetching node execution info from jobs\n\t\tpipelineId?: string;\n\t}\n\n\tlet props: Props = $props();\n\n\t// Create a local currentWorkflow variable that we can control directly\n\tlet currentWorkflow = $state<Workflow | null>(null);\n\n\t// Initialize currentWorkflow from global store\n\t$effect(() => {\n\t\tif ($workflowStore) {\n\t\t\tcurrentWorkflow = $workflowStore;\n\t\t}\n\t});\n\n\t// Create local reactive variables that sync with currentWorkflow\n\tlet flowNodes = $state<WorkflowNodeType[]>([]);\n\tlet flowEdges = $state<WorkflowEdge[]>([]);\n\n\t// Sync local state with currentWorkflow\n\tlet loadExecutionInfoTimeout: number | null = null;\n\tlet executionInfoAbortController: AbortController | null = null;\n\t// Track previous workflow ID to detect when we need to reload execution info\n\tlet previousWorkflowId: string | null = null;\n\tlet previousPipelineId: string | undefined = undefined;\n\n\t$effect(() => {\n\t\tif (currentWorkflow) {\n\t\t\tflowNodes = currentWorkflow.nodes.map((node) => ({\n\t\t\t\t...node,\n\t\t\t\tdata: {\n\t\t\t\t\t...node.data,\n\t\t\t\t\tonConfigOpen: props.openConfigSidebar\n\t\t\t\t}\n\t\t\t}));\n\t\t\tflowEdges = currentWorkflow.edges;\n\n\t\t\t// Only load execution info if we have a pipelineId (pipeline status mode)\n\t\t\t// and if the workflow or pipeline has changed\n\t\t\tconst workflowChanged = currentWorkflow.id !== previousWorkflowId;\n\t\t\tconst pipelineChanged = props.pipelineId !== previousPipelineId;\n\n\t\t\tif (props.pipelineId && (workflowChanged || pipelineChanged)) {\n\t\t\t\t// Cancel any pending timeout\n\t\t\t\tif (loadExecutionInfoTimeout) {\n\t\t\t\t\tclearTimeout(loadExecutionInfoTimeout);\n\t\t\t\t\tloadExecutionInfoTimeout = null;\n\t\t\t\t}\n\n\t\t\t\t// Cancel any in-flight request\n\t\t\t\tif (executionInfoAbortController) {\n\t\t\t\t\texecutionInfoAbortController.abort();\n\t\t\t\t\texecutionInfoAbortController = null;\n\t\t\t\t}\n\n\t\t\t\t// Update tracking variables\n\t\t\t\tpreviousWorkflowId = currentWorkflow.id;\n\t\t\t\tpreviousPipelineId = props.pipelineId;\n\n\t\t\t\t// Use requestIdleCallback for non-critical updates (falls back to setTimeout)\n\t\t\t\tif (typeof requestIdleCallback !== 'undefined') {\n\t\t\t\t\tloadExecutionInfoTimeout = requestIdleCallback(\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\tloadNodeExecutionInfo();\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ timeout: 500 }\n\t\t\t\t\t) as unknown as number;\n\t\t\t\t} else {\n\t\t\t\t\t// Fallback to setTimeout with longer delay for better performance\n\t\t\t\t\tloadExecutionInfoTimeout = setTimeout(() => {\n\t\t\t\t\t\tloadNodeExecutionInfo();\n\t\t\t\t\t}, 300) as unknown as number;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\t/**\n\t * Throttled function to update the global store\n\t * Reduces update frequency during rapid changes (e.g., node dragging)\n\t * Uses 16ms throttle (~60fps) for smooth performance\n\t */\n\tconst updateGlobalStore = throttle((): void => {\n\t\tif (currentWorkflow) {\n\t\t\tworkflowActions.updateWorkflow(currentWorkflow);\n\t\t}\n\t}, 16);\n\n\t/**\n\t * Load node execution information for all nodes in the workflow\n\t * Optimized to reduce processing time and prevent blocking the main thread\n\t */\n\tasync function loadNodeExecutionInfo(): Promise<void> {\n\t\tif (!currentWorkflow?.nodes || !props.pipelineId) return;\n\n\t\ttry {\n\t\t\t// Create abort controller for this request\n\t\t\texecutionInfoAbortController = new AbortController();\n\n\t\t\t// Fetch execution info with abort signal\n\t\t\tconst executionInfo = await NodeOperationsHelper.loadNodeExecutionInfo(\n\t\t\t\tcurrentWorkflow,\n\t\t\t\tprops.pipelineId\n\t\t\t);\n\n\t\t\t// Check if request was aborted\n\t\t\tif (executionInfoAbortController?.signal.aborted) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Default execution info for nodes without data\n\t\t\tconst defaultExecutionInfo: NodeExecutionInfo = {\n\t\t\t\tstatus: 'idle' as const,\n\t\t\t\texecutionCount: 0,\n\t\t\t\tisExecuting: false\n\t\t\t};\n\n\t\t\t// Optimize: Single pass through nodes instead of multiple maps\n\t\t\t// This reduces processing time from ~100ms to ~10-20ms for large workflows\n\t\t\tconst updatedNodes = currentWorkflow.nodes.map((node) => ({\n\t\t\t\t...node,\n\t\t\t\tdata: {\n\t\t\t\t\t...node.data,\n\t\t\t\t\texecutionInfo: executionInfo[node.id] || defaultExecutionInfo,\n\t\t\t\t\tonConfigOpen: props.openConfigSidebar\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\t// Update state in a single operation\n\t\t\tflowNodes = updatedNodes;\n\t\t\tcurrentWorkflow.nodes = updatedNodes;\n\n\t\t\t// Clear abort controller\n\t\t\texecutionInfoAbortController = null;\n\t\t} catch (error) {\n\t\t\t// Only log if it's not an abort error\n\t\t\tif (error instanceof Error && error.name !== 'AbortError') {\n\t\t\t\tconsole.error('Failed to load node execution info:', error);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Function to update currentWorkflow when SvelteFlow changes nodes/edges\n\tfunction updateCurrentWorkflowFromSvelteFlow(): void {\n\t\tif (currentWorkflow) {\n\t\t\tcurrentWorkflow = WorkflowOperationsHelper.updateWorkflow(\n\t\t\t\tcurrentWorkflow,\n\t\t\t\tflowNodes,\n\t\t\t\tflowEdges\n\t\t\t);\n\n\t\t\t// Update the global store\n\t\t\tupdateGlobalStore();\n\t\t}\n\t}\n\n\t// Track previous values to detect changes from SvelteFlow\n\tlet previousNodes = $state<WorkflowNodeType[]>([]);\n\tlet previousEdges = $state<WorkflowEdge[]>([]);\n\n\t/**\n\t * Watch for changes from SvelteFlow and update currentWorkflow\n\t * Uses efficient comparison instead of expensive JSON.stringify\n\t * This reduces event handler time from 290-310ms to <50ms\n\t */\n\t$effect(() => {\n\t\t// Check if nodes have changed from SvelteFlow using fast comparison\n\t\tconst nodesChanged = !areNodeArraysEqual(flowNodes, previousNodes);\n\t\tconst edgesChanged = !areEdgeArraysEqual(flowEdges, previousEdges);\n\n\t\tif ((nodesChanged || edgesChanged) && currentWorkflow) {\n\t\t\tupdateCurrentWorkflowFromSvelteFlow();\n\n\t\t\t// Update previous values with shallow copies\n\t\t\tpreviousNodes = [...flowNodes];\n\t\t\tpreviousEdges = [...flowEdges];\n\t\t}\n\t});\n\n\t// The global store should be initialized by the parent App component\n\n\t// Sidebar is now always visible - removed toggle functionality\n\n\t// Node types for Svelte Flow - using UniversalNode for all node types\n\t// All nodes use 'universalNode' type, and UniversalNode handles internal switching\n\t// Include legacy types for backward compatibility with existing workflows\n\tconst nodeTypes = {\n\t\tuniversalNode: UniversalNode,\n\t\t// Legacy types for backward compatibility\n\t\tworkflowNode: UniversalNode,\n\t\tnote: UniversalNode,\n\t\tsimple: UniversalNode,\n\t\tsquare: UniversalNode,\n\t\ttool: UniversalNode,\n\t\tgateway: UniversalNode\n\t};\n\n\t// Handle arrows in our custom connection handler\n\tconst defaultEdgeOptions = {};\n\n\t/**\n\t * Handle new connections between nodes\n\t * Let SvelteFlow handle edge creation, styling will be applied via reactive effects\n\t */\n\tasync function handleConnect(connection: {\n\t\tsource: string;\n\t\ttarget: string;\n\t\tsourceHandle?: string;\n\t\ttargetHandle?: string;\n\t}): Promise<void> {\n\t\t// SvelteFlow will automatically create the edge due to bind:edges\n\t\t// Wait for DOM update before applying styling\n\t\tawait tick();\n\n\t\t// Apply styling to the new edge (including arrows)\n\t\tupdateExistingEdgeStyles();\n\n\t\t// Update currentWorkflow with the new edge\n\t\tif (currentWorkflow) {\n\t\t\tupdateCurrentWorkflowFromSvelteFlow();\n\t\t}\n\t}\n\n\t/**\n\t * Handle node deletion - automatically remove connected edges\n\t */\n\tfunction handleNodesDelete(params: { nodes: WorkflowNodeType[]; edges: WorkflowEdge[] }): void {\n\t\tconst deletedNodeIds = new Set(params.nodes.map((node) => node.id));\n\n\t\t// Filter out edges connected to deleted nodes\n\t\tflowEdges = flowEdges.filter(\n\t\t\t(edge) => !deletedNodeIds.has(edge.source) && !deletedNodeIds.has(edge.target)\n\t\t);\n\n\t\t// Update currentWorkflow\n\t\tif (currentWorkflow) {\n\t\t\tupdateCurrentWorkflowFromSvelteFlow();\n\t\t}\n\t}\n\n\t/**\n\t * Update existing edges with our custom styling rules\n\t * This ensures all edges (including existing ones) follow our rules\n\t */\n\tasync function updateExistingEdgeStyles(): Promise<void> {\n\t\t// Wait for any pending DOM updates\n\t\tawait tick();\n\n\t\tconst updatedEdges = EdgeStylingHelper.updateEdgeStyles(flowEdges, flowNodes);\n\n\t\t// Update currentWorkflow with the styled edges\n\t\tif (currentWorkflow) {\n\t\t\tcurrentWorkflow = WorkflowOperationsHelper.updateWorkflow(\n\t\t\t\tcurrentWorkflow,\n\t\t\t\tflowNodes,\n\t\t\t\tupdatedEdges\n\t\t\t);\n\n\t\t\t// Update the global store\n\t\t\tupdateGlobalStore();\n\t\t}\n\t}\n\n\t// Edge styling will be handled when edges are first created or manually updated\n\n\t// Configure endpoints when props change\n\t$effect(() => {\n\t\tif (props.endpointConfig) {\n\t\t\tConfigurationHelper.configureEndpoints(props.endpointConfig);\n\t\t}\n\t});\n\n\t/**\n\t * Check if workflow has cycles\n\t */\n\tfunction checkWorkflowCycles(): boolean {\n\t\treturn WorkflowOperationsHelper.checkWorkflowCycles(flowNodes, flowEdges);\n\t}\n\n\t/**\n\t * Handle drop event and add new node to canvas\n\t * This will be called from the inner DropZone component\n\t */\n\tasync function handleNodeDrop(\n\t\tnodeTypeData: string,\n\t\tposition: { x: number; y: number }\n\t): Promise<void> {\n\t\t// Create the node using the helper, passing existing nodes for ID generation\n\t\tconst newNode = NodeOperationsHelper.createNodeFromDrop(nodeTypeData, position, flowNodes);\n\n\t\tif (newNode && currentWorkflow) {\n\t\t\tcurrentWorkflow = WorkflowOperationsHelper.addNode(currentWorkflow, newNode);\n\n\t\t\t// Update the global store\n\t\t\tupdateGlobalStore();\n\n\t\t\t// Wait for DOM update to ensure SvelteFlow updates\n\t\t\tawait tick();\n\t\t} else if (!currentWorkflow) {\n\t\t\tconsole.warn('No currentWorkflow available for new node');\n\t\t}\n\t}\n</script>\n\n<SvelteFlowProvider>\n\t<div class=\"flowdrop-workflow-editor\">\n\t\t<!-- Main Editor Area -->\n\t\t<div class=\"flowdrop-workflow-editor__main\">\n\t\t\t<!-- Flow Canvas -->\n\t\t\t<div class=\"flowdrop-canvas\">\n\t\t\t\t<FlowDropZone ondrop={handleNodeDrop}>\n\t\t\t\t\t<SvelteFlow\n\t\t\t\t\t\tbind:nodes={flowNodes}\n\t\t\t\t\t\tbind:edges={flowEdges}\n\t\t\t\t\t\t{nodeTypes}\n\t\t\t\t\t\t{defaultEdgeOptions}\n\t\t\t\t\t\tonconnect={handleConnect}\n\t\t\t\t\t\tondelete={handleNodesDelete}\n\t\t\t\t\t\tminZoom={0.2}\n\t\t\t\t\t\tmaxZoom={3}\n\t\t\t\t\t\tclickConnect={true}\n\t\t\t\t\t\televateEdgesOnSelect={true}\n\t\t\t\t\t\tconnectionLineType={ConnectionLineType.Bezier}\n\t\t\t\t\t\tconnectionLineComponent={ConnectionLine}\n\t\t\t\t\t\tsnapGrid={[10, 10]}\n\t\t\t\t\t\tfitView\n\t\t\t\t\t>\n\t\t\t\t\t\t<Controls />\n\t\t\t\t\t\t<Background\n\t\t\t\t\t\t\tgap={10}\n\t\t\t\t\t\t\tbgColor=\"var(--flowdrop-background-color)\"\n\t\t\t\t\t\t\tvariant={BackgroundVariant.Dots}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<MiniMap />\n\t\t\t\t\t</SvelteFlow>\n\t\t\t\t\t<!-- Drop Zone Indicator -->\n\t\t\t\t\t{#if flowNodes.length === 0}\n\t\t\t\t\t\t<CanvasBanner\n\t\t\t\t\t\t\ttitle=\"Drag components here to start building\"\n\t\t\t\t\t\t\tdescription=\"Use the sidebar to add components to your workflow\"\n\t\t\t\t\t\t\ticonName=\"mdi:graph\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t{/if}\n\t\t\t\t</FlowDropZone>\n\t\t\t</div>\n\n\t\t\t<!-- Status Bar -->\n\t\t\t<div class=\"flowdrop-status-bar\">\n\t\t\t\t<div class=\"flowdrop-status-bar__content\">\n\t\t\t\t\t<div class=\"flowdrop-flex flowdrop-gap--4\">\n\t\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-text--gray\">{flowNodes.length} nodes</span>\n\t\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-text--gray\"></span>\n\t\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-text--gray\">{flowEdges.length} connections</span\n\t\t\t\t\t\t>\n\n\t\t\t\t\t\t{#if checkWorkflowCycles()}\n\t\t\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-text--gray\"></span>\n\t\t\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-font--medium flowdrop-text--error\"\n\t\t\t\t\t\t\t\t> Cycles detected</span\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</SvelteFlowProvider>\n\n<style>\n\t.flowdrop-workflow-editor {\n\t\tdisplay: flex;\n\t\tflex-direction: row; /* Side by side layout */\n\t\theight: 100%;\n\t\tposition: relative;\n\t}\n\n\t.flowdrop-workflow-editor__main {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 0;\n\t\ttransition: margin-left 0.3s ease-in-out;\n\t}\n\n\t.flowdrop-text--error {\n\t\tcolor: #dc2626;\n\t}\n\n\t.flowdrop-canvas {\n\t\tflex: 1;\n\t\tmin-height: 0;\n\t\tposition: relative;\n\t\tbackground: transparent;\n\t}\n\n\t.flowdrop-status-bar {\n\t\tbackground-color: rgba(255, 255, 255, 0.8);\n\t\tbackdrop-filter: blur(8px);\n\t\tborder-top: 1px solid #e5e7eb;\n\t\tpadding: 0.75rem;\n\t\theight: 40px;\n\t\tmin-height: 40px;\n\t\tmax-height: 40px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-status-bar__content {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t}\n\n\t:global(.flowdrop-workflow-editor .svelte-flow__node:hover) {\n\t\ttransform: translateY(-2px);\n\t}\n\n\t:global(.flowdrop-workflow-editor .svelte-flow__edge) {\n\t\tstroke-width: 2 !important;\n\t\tcursor: pointer;\n\t\tpointer-events: all;\n\t}\n\n\t:global(.flowdrop-workflow-editor .svelte-flow__edge path) {\n\t\tstroke-width: 2 !important;\n\t}\n\n\t:global(.flowdrop-workflow-editor .svelte-flow__edge:hover) {\n\t\tstroke: #3b82f6 !important;\n\t\tstroke-width: 3 !important;\n\t}\n\n\t:global(.flowdrop-workflow-editor .svelte-flow__edge:hover path) {\n\t\tstroke-width: 3 !important;\n\t}\n\n\t:global(.flowdrop-workflow-editor .svelte-flow__edge.selected) {\n\t\tstroke: #3b82f6 !important;\n\t\tstroke-width: 3 !important;\n\t\tfilter: drop-shadow(0 0 4px rgba(59, 130, 246, 0.5));\n\t}\n\n\t:global(.flowdrop-workflow-editor .svelte-flow__edge.selected path) {\n\t\tstroke-width: 3 !important;\n\t}\n\n\t/* Ensure edge paths are clickable */\n\t:global(.flowdrop-workflow-editor .svelte-flow__edge path) {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\n\t/* Enhanced arrow markers for input ports */\n\t:global(.flowdrop-workflow-editor .svelte-flow__edge-marker) {\n\t\tfill: currentColor;\n\t}\n\n\t:global(.flowdrop-workflow-editor .svelte-flow__handle) {\n\t\twidth: 18px;\n\t\theight: 18px;\n\t\tborder: 2px solid white;\n\t\tbox-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n\t\tz-index: 10;\n\t}\n\n\t/* Ensure our custom handles are clickable */\n\t:global(.flowdrop-workflow-editor .svelte-flow__handle) {\n\t\tpointer-events: all;\n\t\tcursor: crosshair;\n\t}\n\t:global(.flowdrop--edge--tool path.svelte-flow__edge-path) {\n\t\tstroke-dasharray: 5 5;\n\t}\n</style>\n","/**\n * Performance Utilities\n * Helper functions for optimizing performance in the FlowDrop app\n */\n/**\n * Fast shallow comparison for workflow nodes\n * Avoids expensive JSON.stringify operations\n */\nexport function areNodeArraysEqual(nodes1, nodes2) {\n    if (nodes1.length !== nodes2.length)\n        return false;\n    for (let i = 0; i < nodes1.length; i++) {\n        const node1 = nodes1[i];\n        const node2 = nodes2[i];\n        // Quick ID check\n        if (node1?.id !== node2?.id)\n            return false;\n        // Check position (most common change during drag)\n        if (node1?.position?.x !== node2?.position?.x || node1?.position?.y !== node2?.position?.y) {\n            return false;\n        }\n        // Check selected state\n        if (node1?.selected !== node2?.selected)\n            return false;\n        // Skip deep config comparison unless we need to\n        // Most updates are position-based\n    }\n    return true;\n}\n/**\n * Fast shallow comparison for workflow edges\n * Avoids expensive JSON.stringify operations\n */\nexport function areEdgeArraysEqual(edges1, edges2) {\n    if (edges1.length !== edges2.length)\n        return false;\n    for (let i = 0; i < edges1.length; i++) {\n        const edge1 = edges1[i];\n        const edge2 = edges2[i];\n        if (edge1?.id !== edge2?.id ||\n            edge1?.source !== edge2?.source ||\n            edge1?.target !== edge2?.target ||\n            edge1?.sourceHandle !== edge2?.sourceHandle ||\n            edge1?.targetHandle !== edge2?.targetHandle) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Throttle function execution to reduce frequency\n * Uses requestAnimationFrame for smooth UI updates\n */\nexport function throttle(func, wait) {\n    let timeout = null;\n    let lastRan = 0;\n    return function (...args) {\n        const now = Date.now();\n        if (!lastRan || now - lastRan >= wait) {\n            func(...args);\n            lastRan = now;\n        }\n        else {\n            if (timeout) {\n                clearTimeout(timeout);\n            }\n            timeout = setTimeout(() => {\n                func(...args);\n                lastRan = Date.now();\n            }, wait - (now - lastRan));\n        }\n    };\n}\n/**\n * Debounce function execution to reduce frequency\n * Waits for a pause in calls before executing\n */\nexport function debounce(func, wait) {\n    let timeout = null;\n    return function (...args) {\n        if (timeout) {\n            clearTimeout(timeout);\n        }\n        timeout = setTimeout(() => {\n            func(...args);\n        }, wait);\n    };\n}\n/**\n * RequestAnimationFrame-based throttle for smooth animations\n * Better for visual updates like node dragging\n */\nexport function rafThrottle(func) {\n    let rafId = null;\n    let lastArgs = null;\n    return function (...args) {\n        lastArgs = args;\n        if (rafId === null) {\n            rafId = requestAnimationFrame(() => {\n                if (lastArgs) {\n                    func(...lastArgs);\n                }\n                rafId = null;\n                lastArgs = null;\n            });\n        }\n    };\n}\n","<script lang=\"ts\" generics=\"NodeType extends Node = Node, EdgeType extends Edge = Edge\">\n  import { onDestroy, setContext } from 'svelte';\n\n  import { createStore, key } from '../../store';\n  import type { SvelteFlowProviderProps } from './types';\n  import type { ProviderContext, SvelteFlowStore } from '../../store/types';\n  import type { Node, Edge } from '../../types';\n\n  let { children }: SvelteFlowProviderProps = $props();\n\n  let store = $state.raw(\n    createStore<NodeType, EdgeType>({\n      props: {},\n      nodes: [],\n      edges: []\n    })\n  );\n\n  setContext(key, {\n    provider: true,\n    getStore() {\n      return store;\n    },\n    setStore: (newStore: SvelteFlowStore<NodeType, EdgeType>) => {\n      store = newStore;\n    }\n  } satisfies ProviderContext<NodeType, EdgeType>);\n\n  onDestroy(() => {\n    store.reset();\n  });\n</script>\n\n{@render children?.()}\n","<!--\n  Flow Drop Zone Component\n  Handles drag and drop with proper coordinate transformation\n  Must be used inside SvelteFlowProvider\n-->\n\n<script lang=\"ts\">\n\timport { useSvelteFlow } from \"@xyflow/svelte\";\n\timport type { Snippet } from \"svelte\";\n\n\tinterface Props {\n\t\tondrop: (nodeTypeData: string, position: { x: number; y: number }) => void;\n\t\tchildren: Snippet;\n\t}\n\n\tlet props: Props = $props();\n\n\t// Access SvelteFlow instance for coordinate transformation\n\tconst { screenToFlowPosition } = useSvelteFlow();\n\n\t/**\n\t * Handle drag over event\n\t */\n\tfunction handleDragOver(e: DragEvent): void {\n\t\te.preventDefault();\n\t\tif (e.dataTransfer) {\n\t\t\te.dataTransfer.dropEffect = \"copy\";\n\t\t}\n\t}\n\n\t/**\n\t * Handle drop event with proper coordinate transformation\n\t */\n\tfunction handleDrop(e: DragEvent): void {\n\t\te.preventDefault();\n\n\t\t// Get the data from the drag event\n\t\tconst nodeTypeData = e.dataTransfer?.getData(\"application/json\");\n\t\tif (nodeTypeData) {\n\t\t\t// Convert screen coordinates to flow coordinates (accounts for zoom and pan)\n\t\t\tconst position = screenToFlowPosition({\n\t\t\t\tx: e.clientX,\n\t\t\t\ty: e.clientY\n\t\t\t});\n\n\t\t\t// Call the parent handler with the converted position\n\t\t\tprops.ondrop(nodeTypeData, position);\n\t\t}\n\t}\n</script>\n\n<div\n\tclass=\"flow-drop-zone\"\n\trole=\"application\"\n\taria-label=\"Workflow canvas\"\n\tondragover={handleDragOver}\n\tondrop={handleDrop}\n>\n\t{@render props.children()}\n</div>\n\n<style>\n\t.flow-drop-zone {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n</style>\n\n","<!--\n  Loading Spinner Component\n  Reusable loading indicator with customizable size and text\n-->\n\n<script lang=\"ts\">\n\tinterface Props {\n\t\tsize?: 'xs' | 'sm' | 'md' | 'lg';\n\t\ttext?: string;\n\t\tshowText?: boolean;\n\t}\n\n\tlet props: Props = $props();\n\n\t// Default values\n\tlet size = $derived(props.size || 'md');\n\tlet text = $derived(props.text || 'Loading...');\n\tlet showText = $derived(props.showText !== false);\n</script>\n\n<div class=\"flowdrop-loading\">\n\t<div class=\"flowdrop-spinner flowdrop-spinner--{size}\"></div>\n\t{#if showText}\n\t\t<p class=\"flowdrop-text--xs flowdrop-text--gray\">{text}</p>\n\t{/if}\n</div>\n\n<style>\n\t.flowdrop-loading {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tgap: 0.5rem;\n\t}\n</style>\n","<!--\n  Node Sidebar Component\n  Displays available node types organized by category with accordion-style groups\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport type { NodeMetadata, NodeCategory } from '../types/index.js';\n\timport LoadingSpinner from './LoadingSpinner.svelte';\n\timport Icon from '@iconify/svelte';\n\timport { getNodeIcon, getCategoryIcon } from '../utils/icons.js';\n\timport { getCategoryColorToken } from '../utils/colors.js';\n\timport { SvelteSet } from 'svelte/reactivity';\n\n\tinterface Props {\n\t\tnodes: NodeMetadata[];\n\t\tselectedCategory?: NodeCategory;\n\t}\n\n\tlet props: Props = $props();\n\tlet searchInput = $state('');\n\tlet selectedCategory = $state(props.selectedCategory || 'all');\n\n\tlet filteredNodes = $derived(getFilteredNodes());\n\tlet categories = $derived(getCategories());\n\n\t/**\n\t * Get all unique categories from node types\n\t */\n\tfunction getCategories(): NodeCategory[] {\n\t\tconst nodes = props.nodes || [];\n\t\tif (nodes.length === 0) return [];\n\t\tconst categories = new SvelteSet<NodeCategory>();\n\t\tnodes.forEach((node) => categories.add(node.category));\n\t\treturn Array.from(categories).sort();\n\t}\n\n\t/**\n\t * Filter node types based on search query and selected category\n\t */\n\tfunction getFilteredNodes(): NodeMetadata[] {\n\t\t// Use actual node types from props\n\t\tlet filtered = props.nodes || [];\n\n\t\t// Filter by category\n\t\tif (selectedCategory !== 'all') {\n\t\t\tfiltered = filtered.filter((node) => node.category === selectedCategory);\n\t\t}\n\n\t\t// Filter by search query\n\t\tif (searchInput.trim()) {\n\t\t\tconst query = searchInput.toLowerCase();\n\t\t\tfiltered = filtered.filter(\n\t\t\t\t(node) =>\n\t\t\t\t\tnode.name.toLowerCase().includes(query) ||\n\t\t\t\t\tnode.description.toLowerCase().includes(query) ||\n\t\t\t\t\tnode.tags?.some((tag) => tag.toLowerCase().includes(query))\n\t\t\t);\n\t\t}\n\n\t\t// Create a new array and sort it to avoid mutating the original\n\t\treturn [...filtered].sort((a, b) => a.name.localeCompare(b.name));\n\t}\n\n\t/**\n\t * Handle node type drag start - creates a new node instance\n\t */\n\tfunction handleNodeDragStart(event: DragEvent, nodeType: NodeMetadata): void {\n\t\tif (!event.dataTransfer) return;\n\n\t\t// Extract initial config from configSchema with proper null checks\n\t\tlet initialConfig = {};\n\t\tif (\n\t\t\tnodeType.configSchema &&\n\t\t\ttypeof nodeType.configSchema === 'object' &&\n\t\t\tnodeType.configSchema.properties &&\n\t\t\ttypeof nodeType.configSchema.properties === 'object'\n\t\t) {\n\t\t\t// JSON Schema format - extract defaults\n\t\t\tObject.entries(nodeType.configSchema.properties).forEach(([key, prop]) => {\n\t\t\t\tif (prop && typeof prop === 'object' && 'default' in prop) {\n\t\t\t\t\tinitialConfig[key] = prop.default;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Create a new node instance from the node type\n\t\tconst newNodeData = {\n\t\t\ttype: 'node',\n\t\t\tnodeType: nodeType.id,\n\t\t\tnodeData: {\n\t\t\t\tlabel: nodeType.name,\n\t\t\t\tconfig: initialConfig,\n\t\t\t\tmetadata: nodeType\n\t\t\t}\n\t\t};\n\n\t\tconst jsonData = JSON.stringify(newNodeData);\n\n\t\t// Set the data that SvelteFlow will receive\n\t\tevent.dataTransfer.setData('application/json', jsonData);\n\t\tevent.dataTransfer.setData('text/plain', nodeType.name);\n\t\tevent.dataTransfer.effectAllowed = 'copy';\n\n\t\t// Set drag image\n\t\tif (event.target) {\n\t\t\tconst rect = (event.target as HTMLElement).getBoundingClientRect();\n\t\t\tevent.dataTransfer.setDragImage(event.target as HTMLElement, rect.width / 2, rect.height / 2);\n\t\t}\n\t}\n\n\t/**\n\t * Handle search input change\n\t */\n\tfunction handleSearchChange(): void {\n\t\t// Search is handled reactively through the derived filteredNodes\n\t}\n\n\t/**\n\t * Handle node click\n\t */\n\tfunction handleNodeClick(nodeType: NodeMetadata): void {\n\t\t// Handle node click - could be used for preview or configuration\n\t}\n\n\t/**\n\t * Get category display name\n\t */\n\tfunction getCategoryDisplayName(category: NodeCategory): string {\n\t\tconst names: Record<NodeCategory, string> = {\n\t\t\tinputs: 'Inputs',\n\t\t\toutputs: 'Outputs',\n\t\t\tprompts: 'Prompts',\n\t\t\tmodels: 'Models',\n\t\t\tprocessing: 'Processing',\n\t\t\tlogic: 'Logic',\n\t\t\tdata: 'Data',\n\t\t\ttools: 'Tools',\n\t\t\thelpers: 'Helpers',\n\t\t\t'vector stores': 'Vector Stores',\n\t\t\tembeddings: 'Embeddings',\n\t\t\tmemories: 'Memories',\n\t\t\tagents: 'Agents',\n\t\t\tai: 'AI',\n\t\t\tbundles: 'Bundles'\n\t\t};\n\t\treturn names[category] || category;\n\t}\n\n\t/**\n\t * Get node types for category\n\t */\n\tfunction getNodesForCategory(category: NodeCategory): NodeMetadata[] {\n\t\tconst nodes = props.nodes || [];\n\t\treturn [...nodes]\n\t\t\t.filter((node) => node.category === category)\n\t\t\t.sort((a, b) => a.name.localeCompare(b.name));\n\t}\n\n\t/**\n\t * Get filtered nodes for category\n\t */\n\tfunction getFilteredNodesForCategory(category: NodeCategory): NodeMetadata[] {\n\t\tlet nodes = getNodesForCategory(category);\n\n\t\t// Filter by search query\n\t\tif (searchInput.trim()) {\n\t\t\tconst query = searchInput.toLowerCase();\n\t\t\tnodes = nodes.filter(\n\t\t\t\t(node) =>\n\t\t\t\t\tnode.name.toLowerCase().includes(query) ||\n\t\t\t\t\tnode.description.toLowerCase().includes(query) ||\n\t\t\t\t\tnode.tags?.some((tag) => tag.toLowerCase().includes(query))\n\t\t\t);\n\t\t}\n\n\t\treturn nodes;\n\t}\n</script>\n\n<!-- Components Sidebar - Always Visible -->\n<div\n\tclass=\"flowdrop-sidebar flowdrop-sidebar--container\"\n\trole=\"complementary\"\n\taria-label=\"Components sidebar\"\n>\n\t<!-- Header -->\n\t<div class=\"flowdrop-sidebar__header\">\n\t\t<div class=\"flowdrop-sidebar__title\">\n\t\t\t<h2 class=\"flowdrop-text--lg flowdrop-font--bold\">Components</h2>\n\t\t</div>\n\t</div>\n\n\t<!-- Search Section -->\n\t<div class=\"flowdrop-sidebar__search\">\n\t\t<div class=\"flowdrop-join flowdrop-w--full\">\n\t\t\t<div class=\"flowdrop-join__item flowdrop-flex--1\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"Search components...\"\n\t\t\t\t\tclass=\"flowdrop-input flowdrop-join__item flowdrop-w--full\"\n\t\t\t\t\tbind:value={searchInput}\n\t\t\t\t\toninput={handleSearchChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<button class=\"flowdrop-btn flowdrop-join__item\" aria-label=\"Search components\">\n\t\t\t\t<Icon icon=\"mdi:magnify\" class=\"flowdrop-icon\" />\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\n\t<!-- Node Types List -->\n\t<div class=\"flowdrop-sidebar__content\">\n\t\t{#if props.nodes?.length === 0}\n\t\t\t<!-- No node types available -->\n\t\t\t<div class=\"flowdrop-hero\">\n\t\t\t\t<div class=\"flowdrop-hero__content\">\n\t\t\t\t\t<div class=\"flowdrop-hero__icon\"></div>\n\t\t\t\t\t<h3 class=\"flowdrop-hero__title\">No node types available</h3>\n\t\t\t\t\t<p class=\"flowdrop-hero__description\">Node type definitions will appear here</p>\n\t\t\t\t\t<div class=\"flowdrop-mb--4\">\n\t\t\t\t\t\t<LoadingSpinner size=\"md\" text=\"Loading from server...\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{:else if searchInput.trim()}\n\t\t\t<!-- Search Results -->\n\t\t\t<div class=\"flowdrop-p--4\">\n\t\t\t\t<div class=\"flowdrop-divider\">\n\t\t\t\t\t<h3 class=\"flowdrop-divider__text\">Search Results</h3>\n\t\t\t\t</div>\n\t\t\t\t{#if filteredNodes.length === 0}\n\t\t\t\t\t<div class=\"flowdrop-hero\">\n\t\t\t\t\t\t<div class=\"flowdrop-hero__content\">\n\t\t\t\t\t\t\t<div class=\"flowdrop-hero__icon\"></div>\n\t\t\t\t\t\t\t<h3 class=\"flowdrop-hero__title\">No components found</h3>\n\t\t\t\t\t\t\t<p class=\"flowdrop-hero__description\">Try adjusting your search</p>\n\t\t\t\t\t\t\t{#if props.nodes?.length === 0}\n\t\t\t\t\t\t\t\t<div class=\"flowdrop-mb--4\">\n\t\t\t\t\t\t\t\t\t<LoadingSpinner size=\"sm\" text=\"Loading components...\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{:else}\n\t\t\t\t\t<div class=\"flowdrop-node-list\">\n\t\t\t\t\t\t{#each filteredNodes as nodeType (nodeType.id)}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"flowdrop-card flowdrop-card--compact flowdrop-node-item\"\n\t\t\t\t\t\t\t\tdraggable=\"true\"\n\t\t\t\t\t\t\t\tondragstart={(e) => handleNodeDragStart(e, nodeType)}\n\t\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"flowdrop-card__body flowdrop-p--1 flowdrop-py--1\">\n\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-flex flowdrop-gap--2 flowdrop-items--center\">\n\t\t\t\t\t\t\t\t\t\t<!-- Node Type Icon -->\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-node-icon\"\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"background-color: {getCategoryColorToken(nodeType.category)}\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Icon icon={getNodeIcon(nodeType.icon, nodeType.category)} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<!-- Node Type Info - Icon and Title only -->\n\t\t\t\t\t\t\t\t\t\t<h4\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-text--sm flowdrop-font--medium flowdrop-truncate flowdrop-flex--1\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{nodeType.name}\n\t\t\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-text--xs flowdrop-text--gray flowdrop-truncate flowdrop-mt--1 flowdrop-ml--0\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{nodeType.description}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<!-- Show categories with details when no search is active -->\n\t\t\t<div class=\"flowdrop-p--4\">\n\t\t\t\t<!-- Category-specific details -->\n\t\t\t\t<div class=\"flowdrop-category-list\">\n\t\t\t\t\t{#each categories as category (category)}\n\t\t\t\t\t\t{@const categoryNodes = getFilteredNodesForCategory(category)}\n\t\t\t\t\t\t{#if categoryNodes.length > 0}\n\t\t\t\t\t\t\t<details class=\"flowdrop-details\">\n\t\t\t\t\t\t\t\t<summary class=\"flowdrop-details__summary\">\n\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-flex flowdrop-gap--2 flowdrop-items--center\">\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-node-icon\"\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"background-color: {getCategoryColorToken(category)}\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Icon icon={getCategoryIcon(category)} />\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span>{getCategoryDisplayName(category)}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-badge flowdrop-badge--secondary\">{categoryNodes.length}</div>\n\t\t\t\t\t\t\t\t</summary>\n\t\t\t\t\t\t\t\t<div class=\"flowdrop-details__content\">\n\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-node-list\">\n\t\t\t\t\t\t\t\t\t\t{#each categoryNodes as nodeType (nodeType.id)}\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-card flowdrop-card--compact flowdrop-node-item\"\n\t\t\t\t\t\t\t\t\t\t\t\tdraggable=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\tondragstart={(e) => handleNodeDragStart(e, nodeType)}\n\t\t\t\t\t\t\t\t\t\t\t\tonclick={() => handleNodeClick(nodeType)}\n\t\t\t\t\t\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\t\t\t\t\t\t\t\tonkeydown={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (e.key === 'Enter' || e.key === ' ') {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleNodeClick(nodeType);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-card__body flowdrop-p--1 flowdrop-py--1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-flex flowdrop-gap--2 flowdrop-items--center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- Node Type Icon -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-node-icon\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"background-color: {getCategoryColorToken(nodeType.category)}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon icon={getNodeIcon(nodeType.icon, nodeType.category)} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- Node Type Info - Icon and Title only -->\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h4\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-text--sm flowdrop-font--medium flowdrop-truncate flowdrop-flex--1\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{nodeType.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-text--xs flowdrop-text--gray flowdrop-truncate flowdrop-mt--1 flowdrop-ml--0\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{nodeType.description}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</details>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\n\t<!-- Footer -->\n\t<div class=\"flowdrop-sidebar__footer\">\n\t\t<div class=\"flowdrop-flex flowdrop-gap--4\">\n\t\t\t<div class=\"flowdrop-flex flowdrop-gap--4\">\n\t\t\t\t{#if props.nodes?.length === 0}\n\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-text--gray\">Loading components...</span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-text--gray\"\n\t\t\t\t\t\t>Total: {props.nodes?.length || 0} components</span\n\t\t\t\t\t>\n\t\t\t\t\t<span class=\"flowdrop-text--xs flowdrop-text--gray\">Showing: {filteredNodes.length}</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<style>\n\t/* Components Sidebar - Always Visible */\n\t.flowdrop-sidebar {\n\t\twidth: 320px;\n\t\theight: calc(100vh - var(--flowdrop-navbar-height, 60px)); /* Account for navbar height */\n\t\tbackground-color: #ffffff;\n\t\tborder-right: 1px solid #e5e7eb;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tbox-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-sidebar--container {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\theight: 100%;\n\t}\n\n\t.flowdrop-sidebar__header {\n\t\tbackground-color: #f8fafc;\n\t\tborder-bottom: 1px solid #e5e7eb;\n\t\tpadding: 0.75rem 1rem;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-sidebar__title {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t/* Close button styles removed - no longer needed */\n\n\t.flowdrop-sidebar__title h2 {\n\t\tfont-size: 1rem;\n\t\tfont-weight: 600;\n\t\tmargin: 0;\n\t}\n\n\t.flowdrop-sidebar__search {\n\t\tpadding: 0.75rem 1rem;\n\t\tbackground-color: #ffffff;\n\t\tborder-bottom: 1px solid #e5e7eb;\n\t}\n\n\t.flowdrop-sidebar__content {\n\t\tflex: 1;\n\t\toverflow-y: scroll; /* Changed from auto to scroll to always show scrollbar */\n\t\tscrollbar-width: thin;\n\t\tscrollbar-color: #d1d5db #f3f4f6;\n\t\tpadding-bottom: 4rem; /* Add padding to ensure content is scrollable above footer */\n\t\tmin-height: 0; /* Allow flex item to shrink below content size */\n\t}\n\n\t.flowdrop-sidebar__content::-webkit-scrollbar {\n\t\twidth: 8px;\n\t\tdisplay: block; /* Ensure scrollbar is always visible */\n\t}\n\n\t.flowdrop-sidebar__content::-webkit-scrollbar-track {\n\t\tbackground: #f3f4f6;\n\t}\n\n\t.flowdrop-sidebar__content::-webkit-scrollbar-thumb {\n\t\tbackground: #d1d5db;\n\t\tborder-radius: 4px;\n\t\tmin-height: 20px; /* Ensure thumb has minimum height for visibility */\n\t}\n\n\t.flowdrop-sidebar__content::-webkit-scrollbar-thumb:hover {\n\t\tbackground: #9ca3af;\n\t}\n\n\t.flowdrop-sidebar__footer {\n\t\tbackground-color: rgba(255, 255, 255, 0.8);\n\t\tbackdrop-filter: blur(8px);\n\t\tborder-top: 1px solid #e5e7eb;\n\t\tpadding: 0.5rem 0.75rem;\n\t\tflex-shrink: 0; /* Prevent footer from shrinking */\n\t\tposition: relative;\n\t\tz-index: 10; /* Ensure footer stays on top */\n\t\theight: 40px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-node-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.375rem;\n\t}\n\n\t.flowdrop-node-item {\n\t\tcursor: grab;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tborder-radius: 0.375rem;\n\t\tborder: 1px solid transparent;\n\t}\n\n\t.flowdrop-node-item:hover {\n\t\tborder-color: #d1d5db;\n\t\tbackground-color: #f9fafb;\n\t}\n\n\t.flowdrop-node-item:active {\n\t\tcursor: grabbing;\n\t}\n\n\t.flowdrop-node-icon {\n\t\twidth: 2rem;\n\t\theight: 2rem;\n\t\tborder-radius: 0.375rem;\n\t\tcolor: #ffffff;\n\t\tfont-size: 0.875rem;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-category-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.375rem;\n\t}\n\n\t.flowdrop-items--center {\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-truncate {\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.flowdrop-card__body h4 {\n\t\tmargin: 0;\n\t\tline-height: 1;\n\t}\n\n\t.flowdrop-p--4 {\n\t\tpadding: 1rem;\n\t}\n\n\t.flowdrop-py--1 {\n\t\tpadding-top: 0.25rem;\n\t\tpadding-bottom: 0.25rem;\n\t}\n\n\t.flowdrop-ml--0 {\n\t\tmargin-left: 0;\n\t}\n\n\t/* Form Elements - Matching App Design System */\n\t.flowdrop-input {\n\t\tpadding: 0.625rem 0.75rem;\n\t\tborder: 1px solid #d1d5db;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\tcolor: #111827;\n\t\tbackground-color: #ffffff;\n\t\ttransition:\n\t\t\tborder-color 0.2s ease-in-out,\n\t\t\tbox-shadow 0.2s ease-in-out;\n\t\twidth: 100%;\n\t\theight: 2.5rem;\n\t\tbox-sizing: border-box;\n\t}\n\n\t.flowdrop-input:focus {\n\t\toutline: none;\n\t\tborder-color: #6b7280;\n\t\tbox-shadow: 0 0 0 3px rgba(107, 114, 128, 0.1);\n\t}\n\n\t.flowdrop-input::placeholder {\n\t\tcolor: #9ca3af;\n\t}\n\n\t.flowdrop-btn {\n\t\tpadding: 0.625rem 0.75rem;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tborder: 1px solid #d1d5db;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tgap: 0.5rem;\n\t\tbackground-color: #f9fafb;\n\t\tcolor: #374151;\n\t\theight: 2.5rem;\n\t\tmin-width: 2.5rem;\n\t\tbox-sizing: border-box;\n\t}\n\n\t.flowdrop-btn:hover {\n\t\tbackground-color: #f3f4f6;\n\t\tborder-color: #9ca3af;\n\t}\n\n\t.flowdrop-btn:active {\n\t\tbackground-color: #e5e7eb;\n\t\tborder-color: #6b7280;\n\t}\n\n\t.flowdrop-btn:focus {\n\t\toutline: none;\n\t\tbox-shadow: 0 0 0 3px rgba(107, 114, 128, 0.1);\n\t}\n\n\t.flowdrop-btn:disabled {\n\t\tbackground-color: #9ca3af;\n\t\tborder-color: #9ca3af;\n\t\tcursor: not-allowed;\n\t\topacity: 0.6;\n\t}\n\n\t/* Join component styles - Seamless integration */\n\t.flowdrop-join {\n\t\tdisplay: flex;\n\t\twidth: 100%;\n\t\tborder-radius: 0.375rem;\n\t\toverflow: hidden;\n\t\tborder: 1px solid #d1d5db;\n\t\tbackground-color: #ffffff;\n\t}\n\n\t.flowdrop-join__item {\n\t\tborder: none;\n\t\tborder-radius: 0;\n\t\tbackground-color: transparent;\n\t}\n\n\t.flowdrop-join__item:first-child {\n\t\tborder-right: 1px solid #d1d5db;\n\t\tflex: 1;\n\t}\n\n\t.flowdrop-join__item:last-child {\n\t\tborder-left: none;\n\t\tbackground-color: #f9fafb;\n\t\tcolor: #374151;\n\t}\n\n\t.flowdrop-join__item:last-child:hover {\n\t\tbackground-color: #f3f4f6;\n\t}\n\n\t.flowdrop-join:focus-within {\n\t\tborder-color: #6b7280;\n\t\tbox-shadow: 0 0 0 3px rgba(107, 114, 128, 0.1);\n\t}\n\n\t/* Utility classes */\n\t.flowdrop-w--full {\n\t\twidth: 100%;\n\t}\n\n\t.flowdrop-flex--1 {\n\t\tflex: 1;\n\t}\n</style>\n","<!--\n  Status Icon Component\n  Reusable status icon that can be used anywhere in the application\n  Displays status with appropriate icon, color, and styling\n-->\n\n<script lang=\"ts\">\n\timport type { NodeExecutionStatus } from '../types/index.js';\n\timport Icon from '@iconify/svelte';\n\timport { getStatusColor, getStatusIcon } from '../utils/nodeStatus.js';\n\n\tinterface Props {\n\t\tstatus: NodeExecutionStatus;\n\t\tsize?: 'sm' | 'md' | 'lg' | 'xl';\n\t\tshowBackground?: boolean;\n\t\tclass?: string;\n\t}\n\n\tlet props: Props = $props();\n\n\t// Size configurations\n\tconst sizeConfig = {\n\t\tsm: {\n\t\t\ticonSize: '12px',\n\t\t\tbackgroundSize: '20px',\n\t\t\tbackgroundRadius: '0.25rem'\n\t\t},\n\t\tmd: {\n\t\t\ticonSize: '16px',\n\t\t\tbackgroundSize: '24px',\n\t\t\tbackgroundRadius: '0.375rem'\n\t\t},\n\t\tlg: {\n\t\t\ticonSize: '24px',\n\t\t\tbackgroundSize: '48px',\n\t\t\tbackgroundRadius: '0.5rem'\n\t\t},\n\t\txl: {\n\t\t\ticonSize: '28px',\n\t\t\tbackgroundSize: '56px',\n\t\t\tbackgroundRadius: '0.75rem'\n\t\t}\n\t};\n\n\tconst config = sizeConfig[props.size || 'md'];\n\tconst statusColor = $derived(getStatusColor(props.status));\n\tconst statusIcon = $derived(getStatusIcon(props.status));\n</script>\n\n{#if props.showBackground}\n\t<div\n\t\tclass=\"status-icon status-icon--with-background {props.class || ''}\"\n\t\tstyle=\"\n\t\t\t--icon-size: {config.iconSize};\n\t\t\t--background-size: {config.backgroundSize};\n\t\t\t--background-radius: {config.backgroundRadius};\n\t\t\t--status-color: {statusColor};\n\t\t\"\n\t\ttitle={props.status}\n\t>\n\t\t<Icon icon={statusIcon} class=\"status-icon__icon\" />\n\t</div>\n{:else}\n\t<Icon\n\t\ticon={statusIcon}\n\t\tclass=\"status-icon status-icon--icon-only {props.class || ''}\"\n\t\tstyle=\"\n\t\t\t--icon-size: {config.iconSize};\n\t\t\t--status-color: {statusColor};\n\t\t\"\n\t/>\n{/if}\n\n<style>\n\t.status-icon {\n\t\tdisplay: inline-flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tcolor: var(--status-color);\n\t\ttransition: all 0.2s ease-in-out;\n\t}\n\n\t.status-icon--with-background {\n\t\twidth: var(--background-size);\n\t\theight: var(--background-size);\n\t\tbackground-color: var(--status-color);\n\t\tborder-radius: var(--background-radius);\n\t\tbox-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n\t\tposition: relative;\n\t}\n\n\t.status-icon--icon-only {\n\t\twidth: var(--icon-size);\n\t\theight: var(--icon-size);\n\t\tfont-size: var(--icon-size);\n\t}\n\n\t/* Animation for running status */\n\t.status-icon--with-background[title='running'] {\n\t\tanimation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n\t}\n\n\t@keyframes pulse {\n\t\t0%,\n\t\t100% {\n\t\t\topacity: 1;\n\t\t}\n\t\t50% {\n\t\t\topacity: 0.7;\n\t\t}\n\t}\n</style>\n","<!--\n  ConfigForm Component\n  Handles dynamic form rendering for node configuration\n  Uses reactive $state for proper Svelte 5 reactivity\n-->\n\n<script lang=\"ts\">\n\timport type { ConfigSchema, WorkflowNode } from '../types/index.js';\n\n\tinterface Props {\n\t\tnode: WorkflowNode;\n\t\tonSave: (config: Record<string, unknown>) => void;\n\t\tonCancel: () => void;\n\t}\n\n\tlet { node, onSave, onCancel }: Props = $props();\n\n\t/**\n\t * Get the configuration schema from node metadata\n\t */\n\tconst configSchema = $derived(node.data.metadata?.configSchema as ConfigSchema | undefined);\n\n\t/**\n\t * Get the current node configuration\n\t */\n\tconst nodeConfig = $derived(node.data.config || {});\n\n\t/**\n\t * Create reactive configuration values using $state\n\t * This fixes the Svelte 5 reactivity warnings\n\t */\n\tlet configValues = $state<Record<string, unknown>>({});\n\n\t/**\n\t * Initialize config values when node or schema changes\n\t */\n\t$effect(() => {\n\t\tif (configSchema?.properties) {\n\t\t\tconst mergedConfig: Record<string, unknown> = {};\n\t\t\tObject.entries(configSchema.properties).forEach(([key, field]) => {\n\t\t\t\tconst fieldConfig = field as any;\n\t\t\t\t// Use existing value if available, otherwise use default\n\t\t\t\tmergedConfig[key] = nodeConfig[key] !== undefined ? nodeConfig[key] : fieldConfig.default;\n\t\t\t});\n\t\t\tconfigValues = mergedConfig;\n\t\t}\n\t});\n\n\t/**\n\t * Handle form submission\n\t */\n\tfunction handleSave(): void {\n\t\t// Collect all form values including hidden fields\n\t\tconst form = document.querySelector('.flowdrop-config-sidebar__form');\n\t\tconst updatedConfig: Record<string, unknown> = { ...configValues };\n\n\t\tif (form) {\n\t\t\tconst inputs = form.querySelectorAll('input, select, textarea');\n\t\t\tinputs.forEach((input: any) => {\n\t\t\t\tif (input.id) {\n\t\t\t\t\tif (input.type === 'checkbox') {\n\t\t\t\t\t\tupdatedConfig[input.id] = input.checked;\n\t\t\t\t\t} else if (input.type === 'number') {\n\t\t\t\t\t\tupdatedConfig[input.id] = input.value ? Number(input.value) : input.value;\n\t\t\t\t\t} else if (input.type === 'hidden') {\n\t\t\t\t\t\t// Parse hidden field values that might be JSON\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst parsed = JSON.parse(input.value);\n\t\t\t\t\t\t\tupdatedConfig[input.id] = parsed;\n\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\t// If not JSON, use raw value\n\t\t\t\t\t\t\tupdatedConfig[input.id] = input.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tupdatedConfig[input.id] = input.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Preserve hidden field values from original config if not collected from form\n\t\tif (node.data.config && configSchema?.properties) {\n\t\t\tObject.entries(configSchema.properties).forEach(([key, property]: [string, any]) => {\n\t\t\t\tif (property.format === 'hidden' && !(key in updatedConfig) && key in node.data.config) {\n\t\t\t\t\tupdatedConfig[key] = node.data.config[key];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tonSave(updatedConfig);\n\t}\n</script>\n\n{#if configSchema}\n\t<div class=\"flowdrop-config-sidebar__form\">\n\t\t{#if configSchema.properties}\n\t\t\t{#each Object.entries(configSchema.properties) as [key, field] (key)}\n\t\t\t\t{@const fieldConfig = field as any}\n\t\t\t\t{#if fieldConfig.format !== 'hidden'}\n\t\t\t\t\t<div class=\"flowdrop-config-sidebar__field\">\n\t\t\t\t\t\t<label class=\"flowdrop-config-sidebar__field-label\" for={key}>\n\t\t\t\t\t\t\t{fieldConfig.title || fieldConfig.description || key}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t{#if fieldConfig.enum && fieldConfig.multiple}\n\t\t\t\t\t\t\t<!-- Checkboxes for enum with multiple selection -->\n\t\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__checkbox-group\">\n\t\t\t\t\t\t\t\t{#each fieldConfig.enum as option (String(option))}\n\t\t\t\t\t\t\t\t\t<label class=\"flowdrop-config-sidebar__checkbox-item\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__checkbox\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={String(option)}\n\t\t\t\t\t\t\t\t\t\t\tchecked={Array.isArray(configValues[key]) &&\n\t\t\t\t\t\t\t\t\t\t\t\tconfigValues[key].includes(String(option))}\n\t\t\t\t\t\t\t\t\t\t\tonchange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst checked = e.currentTarget.checked;\n\t\t\t\t\t\t\t\t\t\t\t\tconst currentValues = Array.isArray(configValues[key])\n\t\t\t\t\t\t\t\t\t\t\t\t\t? [...(configValues[key] as unknown[])]\n\t\t\t\t\t\t\t\t\t\t\t\t\t: [];\n\t\t\t\t\t\t\t\t\t\t\t\tif (checked) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!currentValues.includes(String(option))) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconfigValues[key] = [...currentValues, String(option)];\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconfigValues[key] = currentValues.filter((v) => v !== String(option));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-config-sidebar__checkbox-label\">\n\t\t\t\t\t\t\t\t\t\t\t{String(option)}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{:else if fieldConfig.enum}\n\t\t\t\t\t\t\t<!-- Select for enum with single selection -->\n\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\tid={key}\n\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__select\"\n\t\t\t\t\t\t\t\tbind:value={configValues[key]}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{#each fieldConfig.enum as option (String(option))}\n\t\t\t\t\t\t\t\t\t<option value={String(option)}>{String(option)}</option>\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t{:else if fieldConfig.type === 'string' && fieldConfig.format === 'multiline'}\n\t\t\t\t\t\t\t<!-- Textarea for multiline strings -->\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\tid={key}\n\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__textarea\"\n\t\t\t\t\t\t\t\tbind:value={configValues[key]}\n\t\t\t\t\t\t\t\tplaceholder={String(fieldConfig.placeholder || '')}\n\t\t\t\t\t\t\t\trows=\"4\"\n\t\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t{:else if fieldConfig.type === 'string'}\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid={key}\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__input\"\n\t\t\t\t\t\t\t\tbind:value={configValues[key]}\n\t\t\t\t\t\t\t\tplaceholder={String(fieldConfig.placeholder || '')}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{:else if fieldConfig.type === 'number'}\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid={key}\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__input\"\n\t\t\t\t\t\t\t\tbind:value={configValues[key]}\n\t\t\t\t\t\t\t\tplaceholder={String(fieldConfig.placeholder || '')}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{:else if fieldConfig.type === 'boolean'}\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid={key}\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__checkbox\"\n\t\t\t\t\t\t\t\tchecked={Boolean(configValues[key] || fieldConfig.default || false)}\n\t\t\t\t\t\t\t\tonchange={(e) => {\n\t\t\t\t\t\t\t\t\tconfigValues[key] = e.currentTarget.checked;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{:else if fieldConfig.type === 'select' || fieldConfig.options}\n\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\tid={key}\n\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__select\"\n\t\t\t\t\t\t\t\tbind:value={configValues[key]}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{#if fieldConfig.options}\n\t\t\t\t\t\t\t\t\t{#each fieldConfig.options as option (String(option.value))}\n\t\t\t\t\t\t\t\t\t\t{@const optionConfig = option as any}\n\t\t\t\t\t\t\t\t\t\t<option value={String(optionConfig.value)}>{String(optionConfig.label)}</option>\n\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<!-- Fallback for unknown field types -->\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid={key}\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__input\"\n\t\t\t\t\t\t\t\tbind:value={configValues[key]}\n\t\t\t\t\t\t\t\tplaceholder={String(fieldConfig.placeholder || '')}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{#if fieldConfig.description}\n\t\t\t\t\t\t\t<p class=\"flowdrop-config-sidebar__field-description\">\n\t\t\t\t\t\t\t\t{String(fieldConfig.description)}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t{/each}\n\t\t{:else}\n\t\t\t<!-- If no properties, show the raw schema for debugging -->\n\t\t\t<div class=\"flowdrop-config-sidebar__debug\">\n\t\t\t\t<p><strong>Debug - Config Schema:</strong></p>\n\t\t\t\t<pre>{JSON.stringify(configSchema, null, 2)}</pre>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\n\t<!-- Footer -->\n\t<div class=\"flowdrop-config-sidebar__footer\">\n\t\t<button\n\t\t\tclass=\"flowdrop-config-sidebar__button flowdrop-config-sidebar__button--secondary\"\n\t\t\tonclick={onCancel}\n\t\t>\n\t\t\tCancel\n\t\t</button>\n\t\t<button\n\t\t\tclass=\"flowdrop-config-sidebar__button flowdrop-config-sidebar__button--primary\"\n\t\t\tonclick={handleSave}\n\t\t>\n\t\t\tSave Changes\n\t\t</button>\n\t</div>\n{:else}\n\t<p class=\"flowdrop-config-sidebar__no-config\">\n\t\tNo configuration options available for this node.\n\t</p>\n{/if}\n\n<style>\n\t.flowdrop-config-sidebar__form {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 1rem;\n\t}\n\n\t.flowdrop-config-sidebar__field {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.5rem;\n\t}\n\n\t.flowdrop-config-sidebar__field-label {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcolor: #374151;\n\t}\n\n\t.flowdrop-config-sidebar__input,\n\t.flowdrop-config-sidebar__select {\n\t\tpadding: 0.5rem;\n\t\tborder: 1px solid #d1d5db;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\ttransition:\n\t\t\tborder-color 0.2s,\n\t\t\tbox-shadow 0.2s;\n\t}\n\n\t.flowdrop-config-sidebar__input:focus,\n\t.flowdrop-config-sidebar__select:focus {\n\t\toutline: none;\n\t\tborder-color: #3b82f6;\n\t\tbox-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n\t}\n\n\t.flowdrop-config-sidebar__checkbox-group {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.5rem;\n\t}\n\n\t.flowdrop-config-sidebar__checkbox-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tcursor: pointer;\n\t}\n\n\t.flowdrop-config-sidebar__checkbox {\n\t\twidth: 1rem;\n\t\theight: 1rem;\n\t\taccent-color: #3b82f6;\n\t\tcursor: pointer;\n\t}\n\n\t.flowdrop-config-sidebar__checkbox-label {\n\t\tfont-size: 0.875rem;\n\t\tcolor: #374151;\n\t\tcursor: pointer;\n\t}\n\n\t.flowdrop-config-sidebar__textarea {\n\t\twidth: 100%;\n\t\tpadding: 0.5rem 0.75rem;\n\t\tborder: 1px solid #d1d5db;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\tbackground-color: #ffffff;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tresize: vertical;\n\t\tmin-height: 4rem;\n\t}\n\n\t.flowdrop-config-sidebar__textarea:focus {\n\t\toutline: none;\n\t\tborder-color: #3b82f6;\n\t\tbox-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n\t}\n\n\t.flowdrop-config-sidebar__field-description {\n\t\tmargin: 0;\n\t\tfont-size: 0.75rem;\n\t\tcolor: #6b7280;\n\t\tline-height: 1.4;\n\t}\n\n\t.flowdrop-config-sidebar__no-config {\n\t\ttext-align: center;\n\t\tcolor: #6b7280;\n\t\tfont-style: italic;\n\t\tpadding: 2rem 1rem;\n\t}\n\n\t.flowdrop-config-sidebar__footer {\n\t\tpadding: 1rem;\n\t\tborder-top: 1px solid #e5e7eb;\n\t\tbackground-color: #f9fafb;\n\t\tdisplay: flex;\n\t\tgap: 0.75rem;\n\t\tjustify-content: flex-end;\n\t\theight: 40px;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-config-sidebar__button {\n\t\tpadding: 0.5rem 1rem;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s;\n\t\tborder: 1px solid transparent;\n\t}\n\n\t.flowdrop-config-sidebar__button--secondary {\n\t\tbackground-color: #ffffff;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n\n\t.flowdrop-config-sidebar__button--secondary:hover {\n\t\tbackground-color: #f9fafb;\n\t\tborder-color: #9ca3af;\n\t}\n\n\t.flowdrop-config-sidebar__button--primary {\n\t\tbackground-color: #3b82f6;\n\t\tcolor: #ffffff;\n\t}\n\n\t.flowdrop-config-sidebar__button--primary:hover {\n\t\tbackground-color: #2563eb;\n\t}\n\n\t.flowdrop-config-sidebar__debug {\n\t\tbackground-color: #f3f4f6;\n\t\tborder: 1px solid #d1d5db;\n\t\tborder-radius: 0.375rem;\n\t\tpadding: 1rem;\n\t\tmargin: 1rem 0;\n\t}\n\n\t.flowdrop-config-sidebar__debug pre {\n\t\tbackground-color: #ffffff;\n\t\tborder: 1px solid #e5e7eb;\n\t\tborder-radius: 0.25rem;\n\t\tpadding: 0.75rem;\n\t\tfont-size: 0.75rem;\n\t\toverflow-x: auto;\n\t\tmargin: 0.5rem 0 0 0;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { createEventDispatcher } from 'svelte';\n\timport type { ConfigSchema, ConfigValues } from '../types';\n\timport ConfigForm from './ConfigForm.svelte';\n\n\tinterface Props {\n\t\tisOpen: boolean;\n\t\tnodeLabel: string;\n\t\tconfigSchema: ConfigSchema;\n\t\tconfigValues: ConfigValues;\n\t}\n\n\tlet props: Props = $props();\n\tlet localConfigValues = $derived.by(() => ({ ...props.configValues }));\n\n\tconst dispatch = createEventDispatcher<{\n\t\tclose: void;\n\t\tsave: { values: ConfigValues };\n\t\tcancel: void;\n\t}>();\n\n\tfunction handleSave() {\n\t\tdispatch('save', { values: localConfigValues });\n\t}\n\n\tfunction handleCancel() {\n\t\tdispatch('cancel');\n\t}\n\n\tfunction handleClose() {\n\t\tdispatch('close');\n\t}\n\n\t// Close modal on escape key\n\tfunction handleKeydown(event: KeyboardEvent) {\n\t\tif (event.key === 'Escape') {\n\t\t\thandleClose();\n\t\t}\n\t}\n\n\t// Close modal when clicking outside\n\tfunction handleBackdropClick(event: MouseEvent) {\n\t\tif (event.target === event.currentTarget) {\n\t\t\thandleClose();\n\t\t}\n\t}\n</script>\n\n{#if props.isOpen}\n\t<!-- Modal Backdrop -->\n\t<div\n\t\tclass=\"config-modal-backdrop\"\n\t\tonclick={handleBackdropClick}\n\t\tonkeydown={handleKeydown}\n\t\trole=\"dialog\"\n\t\taria-modal=\"true\"\n\t\taria-labelledby=\"config-modal-title\"\n\t\ttabindex=\"-1\"\n\t>\n\t\t<!-- Modal Container -->\n\t\t<div class=\"config-modal\">\n\t\t\t<!-- Modal Header -->\n\t\t\t<div class=\"config-modal__header\">\n\t\t\t\t<h2 id=\"config-modal-title\" class=\"config-modal__title\">\n\t\t\t\t\tConfigure: {props.nodeLabel}\n\t\t\t\t</h2>\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclass=\"config-modal__close-btn\"\n\t\t\t\t\tonclick={handleClose}\n\t\t\t\t\taria-label=\"Close configuration modal\"\n\t\t\t\t>\n\t\t\t\t\t<span aria-hidden=\"true\"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<!-- Modal Content -->\n\t\t\t<div class=\"config-modal__content\">\n\t\t\t\t<ConfigForm\n\t\t\t\t\tschema={props.configSchema}\n\t\t\t\t\tvalues={localConfigValues}\n\t\t\t\t\ton:change={({ detail }) => {\n\t\t\t\t\t\tlocalConfigValues = detail.values;\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<!-- Modal Footer -->\n\t\t\t<div class=\"config-modal__footer\">\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclass=\"config-modal__btn config-modal__btn--secondary\"\n\t\t\t\t\tonclick={handleCancel}\n\t\t\t\t>\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclass=\"config-modal__btn config-modal__btn--primary\"\n\t\t\t\t\tonclick={handleSave}\n\t\t\t\t>\n\t\t\t\t\tSave Configuration\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/if}\n\n<style>\n\t.config-modal-backdrop {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tz-index: 1000;\n\t\tpadding: 1rem;\n\t}\n\n\t.config-modal {\n\t\tbackground: white;\n\t\tborder-radius: 0.75rem;\n\t\tbox-shadow:\n\t\t\t0 20px 25px -5px rgba(0, 0, 0, 0.1),\n\t\t\t0 10px 10px -5px rgba(0, 0, 0, 0.04);\n\t\twidth: 100%;\n\t\tmax-width: 80vw;\n\t\tmin-width: 40rem;\n\t\tmax-height: 90vh;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\toverflow: hidden;\n\t}\n\n\t.config-modal__header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding: 1.5rem 1.5rem 1rem 1.5rem;\n\t\tborder-bottom: 1px solid #e5e7eb;\n\t}\n\n\t.config-modal__title {\n\t\tmargin: 0;\n\t\tfont-size: 1.125rem;\n\t\tfont-weight: 600;\n\t\tcolor: #111827;\n\t}\n\n\t.config-modal__close-btn {\n\t\twidth: 2rem;\n\t\theight: 2rem;\n\t\tborder: none;\n\t\tbackground: transparent;\n\t\tborder-radius: 0.375rem;\n\t\tcolor: #6b7280;\n\t\tfont-size: 1.5rem;\n\t\tfont-weight: 400;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\ttransition: all 0.2s;\n\t}\n\n\t.config-modal__close-btn:hover {\n\t\tbackground-color: #f3f4f6;\n\t\tcolor: #374151;\n\t}\n\n\t.config-modal__content {\n\t\tpadding: 1.5rem;\n\t\toverflow-y: auto;\n\t\tflex: 1;\n\t\tmin-height: 0;\n\t}\n\n\t.config-modal__footer {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: flex-end;\n\t\tgap: 0.75rem;\n\t\tpadding: 1rem 1.5rem 1.5rem 1.5rem;\n\t\tborder-top: 1px solid #e5e7eb;\n\t\tbackground-color: #f9fafb;\n\t}\n\n\t.config-modal__btn {\n\t\tpadding: 0.5rem 1rem;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s;\n\t\tborder: 1px solid transparent;\n\t}\n\n\t.config-modal__btn--primary {\n\t\tbackground-color: #3b82f6;\n\t\tcolor: white;\n\t\tborder-color: #3b82f6;\n\t}\n\n\t.config-modal__btn--primary:hover {\n\t\tbackground-color: #2563eb;\n\t\tborder-color: #2563eb;\n\t}\n\n\t.config-modal__btn--secondary {\n\t\tbackground-color: white;\n\t\tcolor: #374151;\n\t\tborder-color: #d1d5db;\n\t}\n\n\t.config-modal__btn--secondary:hover {\n\t\tbackground-color: #f9fafb;\n\t\tborder-color: #9ca3af;\n\t}\n\n\t/* Responsive adjustments */\n\t@media (max-width: 1024px) {\n\t\t.config-modal {\n\t\t\tmax-width: 90vw;\n\t\t\tmin-width: 32rem;\n\t\t}\n\t}\n\n\t@media (max-width: 768px) {\n\t\t.config-modal {\n\t\t\tmax-width: 95vw;\n\t\t\tmin-width: 24rem;\n\t\t}\n\n\t\t.config-modal__header {\n\t\t\tpadding: 1rem 1rem 0.75rem 1rem;\n\t\t}\n\n\t\t.config-modal__content {\n\t\t\tpadding: 1rem;\n\t\t}\n\n\t\t.config-modal__footer {\n\t\t\tpadding: 0.75rem 1rem 1rem 1rem;\n\t\t}\n\t}\n\n\t@media (max-width: 640px) {\n\t\t.config-modal {\n\t\t\tmax-width: 100%;\n\t\t\tmin-width: auto;\n\t\t\tmargin: 0.5rem;\n\t\t}\n\t}\n</style>\n","<!--\n  Configuration Sidebar Component\n  Right-side sliding sidebar for node configuration\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport type { ConfigSchema, ConfigValues, ConfigProperty } from '../types/index.js';\n\timport Icon from '@iconify/svelte';\n\timport { createEventDispatcher } from 'svelte';\n\n\tconst dispatch = createEventDispatcher();\n\n\tinterface Props {\n\t\tisOpen: boolean;\n\t\ttitle: string;\n\t\tconfigSchema?: ConfigSchema;\n\t\tconfigValues: ConfigValues;\n\t\tnodeDetails?: {\n\t\t\ttype: string;\n\t\t\tcategory: string;\n\t\t\tdescription: string;\n\t\t\tversion?: string;\n\t\t\ttags?: string[];\n\t\t\tinputs?: Array<{ id: string; name: string; type: string; dataType?: string }>;\n\t\t\toutputs?: Array<{ id: string; name: string; type: string; dataType?: string }>;\n\t\t};\n\t\tonSave?: (config: ConfigValues) => void;\n\t\tonCancel?: () => void;\n\t\tonClose?: () => void;\n\t}\n\n\tlet props: Props = $props();\n\tlet localConfigValues = $state({ ...props.configValues });\n\tlet hasChanges = $derived(\n\t\tJSON.stringify(localConfigValues) !== JSON.stringify(props.configValues)\n\t);\n\n\t// Focus management and body scroll control\n\t$effect(() => {\n\t\tif (props.isOpen) {\n\t\t\t// Focus management - focus the sidebar when it opens\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst sidebar = document.querySelector('.config-sidebar--open');\n\t\t\t\tif (sidebar) {\n\t\t\t\t\t(sidebar as HTMLElement).focus();\n\t\t\t\t}\n\t\t\t}, 100);\n\n\t\t\t// Prevent body scroll\n\t\t\tdocument.body.style.overflow = 'hidden';\n\t\t} else {\n\t\t\t// Restore body scroll\n\t\t\tdocument.body.style.overflow = '';\n\t\t}\n\t});\n\n\t/**\n\t * Handle input changes for different field types\n\t */\n\tfunction handleInputChange(key: string, value: unknown, type: string): void {\n\t\tlet processedValue = value;\n\n\t\t// Process value based on type\n\t\tswitch (type) {\n\t\t\tcase 'number':\n\t\t\tcase 'integer':\n\t\t\t\tprocessedValue = value === '' ? undefined : Number(value);\n\t\t\t\tbreak;\n\t\t\tcase 'boolean':\n\t\t\t\tprocessedValue = Boolean(value);\n\t\t\t\tbreak;\n\t\t\tcase 'array':\n\t\t\t\ttry {\n\t\t\t\t\tprocessedValue = typeof value === 'string' ? JSON.parse(value) : value;\n\t\t\t\t} catch {\n\t\t\t\t\tprocessedValue = [];\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'object':\n\t\t\t\ttry {\n\t\t\t\t\tprocessedValue = typeof value === 'string' ? JSON.parse(value) : value;\n\t\t\t\t} catch {\n\t\t\t\t\tprocessedValue = {};\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tprocessedValue = value;\n\t\t}\n\n\t\tlocalConfigValues = {\n\t\t\t...localConfigValues,\n\t\t\t[key]: processedValue\n\t\t};\n\t}\n\n\t/**\n\t * Handle save action\n\t * Preserves hidden field values from the original configuration\n\t */\n\tfunction handleSave(): void {\n\t\t// Merge hidden field values from original props to ensure they're preserved\n\t\tconst hiddenFieldValues: ConfigValues = {};\n\t\tif (props.configSchema?.properties) {\n\t\t\tObject.entries(props.configSchema.properties).forEach(([key, property]) => {\n\t\t\t\tif (property.format === 'hidden' && key in props.configValues) {\n\t\t\t\t\thiddenFieldValues[key] = props.configValues[key];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tconst mergedConfig = { ...localConfigValues, ...hiddenFieldValues };\n\t\tprops.onSave?.(mergedConfig);\n\t\tdispatch('save', { config: mergedConfig });\n\t}\n\n\t/**\n\t * Handle cancel action\n\t */\n\tfunction handleCancel(): void {\n\t\tlocalConfigValues = { ...props.configValues };\n\t\thasChanges = false;\n\t\tprops.onCancel?.();\n\t\tdispatch('cancel');\n\t}\n\n\t/**\n\t * Handle close action\n\t */\n\tfunction handleClose(): void {\n\t\tif (hasChanges) {\n\t\t\tconst shouldClose = confirm('You have unsaved changes. Are you sure you want to close?');\n\t\t\tif (!shouldClose) return;\n\t\t}\n\n\t\tlocalConfigValues = { ...props.configValues };\n\t\thasChanges = false;\n\t\tprops.onClose?.();\n\t\tdispatch('close');\n\t}\n\n\t/**\n\t * Handle keyboard shortcuts\n\t */\n\tfunction handleKeydown(event: KeyboardEvent): void {\n\t\tif (event.key === 'Escape') {\n\t\t\thandleClose();\n\t\t} else if (event.key === 'Enter' && (event.ctrlKey || event.metaKey)) {\n\t\t\thandleSave();\n\t\t}\n\t}\n\n\t/* Overlay event handlers removed since overlay is no longer used */\n\n\t/**\n\t * Get input type for HTML input element\n\t */\n\tfunction getInputType(schemaType: string): string {\n\t\tswitch (schemaType) {\n\t\t\tcase 'number':\n\t\t\tcase 'integer':\n\t\t\t\treturn 'number';\n\t\t\tcase 'boolean':\n\t\t\t\treturn 'checkbox';\n\t\t\tdefault:\n\t\t\t\treturn 'text';\n\t\t}\n\t}\n\n\t/**\n\t * Check if field should be rendered as textarea\n\t */\n\tfunction isTextarea(property: ConfigProperty): boolean {\n\t\treturn (\n\t\t\tproperty.format === 'multiline' || property.type === 'object' || property.type === 'array'\n\t\t);\n\t}\n\n\t/**\n\t * Get display value for complex types\n\t */\n\tfunction getDisplayValue(value: unknown, type: string): string {\n\t\tif (type === 'object' || type === 'array') {\n\t\t\treturn typeof value === 'string' ? value : JSON.stringify(value, null, 2);\n\t\t}\n\t\treturn String(value ?? '');\n\t}\n</script>\n\n<!-- Overlay removed to avoid darkening the canvas -->\n\n<!-- Sidebar -->\n<div\n\tclass=\"config-sidebar\"\n\tclass:config-sidebar--open={props.isOpen}\n\trole=\"dialog\"\n\taria-label=\"Configuration sidebar\"\n\taria-modal=\"true\"\n\ttabindex=\"-1\"\n\tonkeydown={handleKeydown}\n>\n\t<!-- Header -->\n\t<div class=\"config-sidebar__header\">\n\t\t<div class=\"config-sidebar__title-section\">\n\t\t\t<h2 class=\"config-sidebar__title\">{props.title}</h2>\n\t\t\t{#if hasChanges}\n\t\t\t\t<div class=\"config-sidebar__changes-indicator\" title=\"Unsaved changes\">\n\t\t\t\t\t<Icon icon=\"mdi:circle\" />\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t\t<button\n\t\t\tclass=\"config-sidebar__close-btn\"\n\t\t\tonclick={handleClose}\n\t\t\ttitle=\"Close sidebar (Esc)\"\n\t\t\taria-label=\"Close configuration sidebar\"\n\t\t>\n\t\t\t<Icon icon=\"mdi:close\" />\n\t\t</button>\n\t</div>\n\n\t<!-- Content -->\n\t<div class=\"config-sidebar__content\">\n\t\t<!-- Node Details Section -->\n\t\t{#if props.nodeDetails}\n\t\t\t<div class=\"config-sidebar__details\">\n\t\t\t\t<h3 class=\"config-sidebar__section-title\">Node Details</h3>\n\n\t\t\t\t<div class=\"config-sidebar__detail-grid\">\n\t\t\t\t\t<div class=\"config-sidebar__detail-item\">\n\t\t\t\t\t\t<span class=\"config-sidebar__detail-label\">Type:</span>\n\t\t\t\t\t\t<span class=\"config-sidebar__detail-value\">{props.nodeDetails.type}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"config-sidebar__detail-item\">\n\t\t\t\t\t\t<span class=\"config-sidebar__detail-label\">Category:</span>\n\t\t\t\t\t\t<span class=\"config-sidebar__detail-value config-sidebar__detail-value--badge\"\n\t\t\t\t\t\t\t>{props.nodeDetails.category}</span\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if props.nodeDetails.version}\n\t\t\t\t\t\t<div class=\"config-sidebar__detail-item\">\n\t\t\t\t\t\t\t<span class=\"config-sidebar__detail-label\">Version:</span>\n\t\t\t\t\t\t\t<span class=\"config-sidebar__detail-value\">{props.nodeDetails.version}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"config-sidebar__detail-item config-sidebar__detail-item--full\">\n\t\t\t\t\t<span class=\"config-sidebar__detail-label\">Description:</span>\n\t\t\t\t\t<p class=\"config-sidebar__detail-description\">{props.nodeDetails.description}</p>\n\t\t\t\t</div>\n\n\t\t\t\t{#if props.nodeDetails.inputs && props.nodeDetails.inputs.length > 0}\n\t\t\t\t\t<div class=\"config-sidebar__detail-section\">\n\t\t\t\t\t\t<h4 class=\"config-sidebar__detail-subtitle\">Input Ports</h4>\n\t\t\t\t\t\t<div class=\"config-sidebar__ports\">\n\t\t\t\t\t\t\t{#each props.nodeDetails.inputs as input (input.id)}\n\t\t\t\t\t\t\t\t<div class=\"config-sidebar__port config-sidebar__port--input\">\n\t\t\t\t\t\t\t\t\t<Icon icon=\"mdi:arrow-right\" class=\"config-sidebar__port-icon\" />\n\t\t\t\t\t\t\t\t\t<span class=\"config-sidebar__port-name\">{input.name}</span>\n\t\t\t\t\t\t\t\t\t<span class=\"config-sidebar__port-type\">{input.dataType || input.type}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if props.nodeDetails.outputs && props.nodeDetails.outputs.length > 0}\n\t\t\t\t\t<div class=\"config-sidebar__detail-section\">\n\t\t\t\t\t\t<h4 class=\"config-sidebar__detail-subtitle\">Output Ports</h4>\n\t\t\t\t\t\t<div class=\"config-sidebar__ports\">\n\t\t\t\t\t\t\t{#each props.nodeDetails.outputs as output (output.id)}\n\t\t\t\t\t\t\t\t<div class=\"config-sidebar__port config-sidebar__port--output\">\n\t\t\t\t\t\t\t\t\t<Icon icon=\"mdi:arrow-left\" class=\"config-sidebar__port-icon\" />\n\t\t\t\t\t\t\t\t\t<span class=\"config-sidebar__port-name\">{output.name}</span>\n\t\t\t\t\t\t\t\t\t<span class=\"config-sidebar__port-type\">{output.dataType || output.type}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if props.nodeDetails.tags && props.nodeDetails.tags.length > 0}\n\t\t\t\t\t<div class=\"config-sidebar__detail-section\">\n\t\t\t\t\t\t<h4 class=\"config-sidebar__detail-subtitle\">Tags</h4>\n\t\t\t\t\t\t<div class=\"config-sidebar__tags\">\n\t\t\t\t\t\t\t{#each props.nodeDetails.tags as tag (tag)}\n\t\t\t\t\t\t\t\t<span class=\"config-sidebar__tag\">{tag}</span>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<!-- Separator between details and config -->\n\t\t\t{#if props.configSchema?.properties}\n\t\t\t\t<div class=\"config-sidebar__separator\"></div>\n\t\t\t{/if}\n\t\t{/if}\n\n\t\t<!-- Configuration Section -->\n\t\t{#if props.configSchema?.properties}\n\t\t\t<div class=\"config-sidebar__config-section\">\n\t\t\t\t<h3 class=\"config-sidebar__section-title\">Configuration</h3>\n\t\t\t\t<form\n\t\t\t\t\tclass=\"config-sidebar__form\"\n\t\t\t\t\tonsubmit={(e) => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\thandleSave();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{#each Object.entries(props.configSchema.properties) as [key, property] (key)}\n\t\t\t\t\t\t{#if property.format === 'hidden'}\n\t\t\t\t\t\t\t<!-- Hidden field to preserve value -->\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"hidden\"\n\t\t\t\t\t\t\t\tid=\"config-{key}\"\n\t\t\t\t\t\t\t\tvalue={typeof (localConfigValues[key] ?? property.default) === 'object'\n\t\t\t\t\t\t\t\t\t? JSON.stringify(localConfigValues[key] ?? property.default ?? {})\n\t\t\t\t\t\t\t\t\t: (localConfigValues[key] ?? property.default ?? '')}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<div class=\"config-sidebar__field\">\n\t\t\t\t\t\t\t\t<label class=\"config-sidebar__label\" for=\"config-{key}\">\n\t\t\t\t\t\t\t\t\t{property.title || key}\n\t\t\t\t\t\t\t\t\t{#if props.configSchema?.required?.includes(key)}\n\t\t\t\t\t\t\t\t\t\t<span class=\"config-sidebar__required\">*</span>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t\t{#if property.description}\n\t\t\t\t\t\t\t\t\t<p class=\"config-sidebar__description\">{property.description}</p>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if property.enum && property.multiple}\n\t\t\t\t\t\t\t\t\t<!-- Checkboxes for enum with multiple selection -->\n\t\t\t\t\t\t\t\t\t<div class=\"config-sidebar__checkbox-group\">\n\t\t\t\t\t\t\t\t\t\t{#each property.enum as option (option)}\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"config-sidebar__checkbox-wrapper\">\n\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"config-{key}-{option}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"config-sidebar__checkbox\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={option}\n\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={Array.isArray(localConfigValues[key]) &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalConfigValues[key].includes(option)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonchange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst checked = (e.target as HTMLInputElement).checked;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst currentValues = Array.isArray(localConfigValues[key])\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? [...localConfigValues[key]]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: [];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (checked) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!currentValues.includes(option)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleInputChange(key, [...currentValues, option], property.type);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleInputChange(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentValues.filter((v) => v !== option),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tproperty.type\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<label for=\"config-{key}-{option}\" class=\"config-sidebar__checkbox-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{option}\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{:else if property.enum}\n\t\t\t\t\t\t\t\t\t<!-- Dropdown for enum with single selection -->\n\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\tid=\"config-{key}\"\n\t\t\t\t\t\t\t\t\t\tclass=\"config-sidebar__select\"\n\t\t\t\t\t\t\t\t\t\tvalue={localConfigValues[key] ?? property.default ?? ''}\n\t\t\t\t\t\t\t\t\t\tonchange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\thandleInputChange(key, (e.target as HTMLSelectElement).value, property.type)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{#each property.enum as option (option)}\n\t\t\t\t\t\t\t\t\t\t\t<option value={option}>{option}</option>\n\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t{:else if property.type === 'boolean'}\n\t\t\t\t\t\t\t\t\t<!-- Checkbox for boolean -->\n\t\t\t\t\t\t\t\t\t<div class=\"config-sidebar__checkbox-wrapper\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tid=\"config-{key}\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"config-sidebar__checkbox\"\n\t\t\t\t\t\t\t\t\t\t\tchecked={Boolean(localConfigValues[key] ?? property.default ?? false)}\n\t\t\t\t\t\t\t\t\t\t\tonchange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\thandleInputChange(\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\t\t\t\t\t\t(e.target as HTMLInputElement).checked,\n\t\t\t\t\t\t\t\t\t\t\t\t\tproperty.type\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<label for=\"config-{key}\" class=\"config-sidebar__checkbox-label\">\n\t\t\t\t\t\t\t\t\t\t\t{property.title || key}\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{:else if isTextarea(property)}\n\t\t\t\t\t\t\t\t\t<!-- Textarea for multiline, objects, arrays -->\n\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\tid=\"config-{key}\"\n\t\t\t\t\t\t\t\t\t\tclass=\"config-sidebar__textarea\"\n\t\t\t\t\t\t\t\t\t\tplaceholder={property.default ? String(property.default) : ''}\n\t\t\t\t\t\t\t\t\t\tvalue={getDisplayValue(\n\t\t\t\t\t\t\t\t\t\t\tlocalConfigValues[key] ?? property.default ?? '',\n\t\t\t\t\t\t\t\t\t\t\tproperty.type\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\toninput={(e) =>\n\t\t\t\t\t\t\t\t\t\t\thandleInputChange(\n\t\t\t\t\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\t\t\t\t\t(e.target as HTMLTextAreaElement).value,\n\t\t\t\t\t\t\t\t\t\t\t\tproperty.type\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\trows=\"4\"\n\t\t\t\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<!-- Regular input -->\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tid=\"config-{key}\"\n\t\t\t\t\t\t\t\t\t\ttype={getInputType(property.type)}\n\t\t\t\t\t\t\t\t\t\tclass=\"config-sidebar__input\"\n\t\t\t\t\t\t\t\t\t\tplaceholder={property.default ? String(property.default) : ''}\n\t\t\t\t\t\t\t\t\t\tvalue={localConfigValues[key] ?? property.default ?? ''}\n\t\t\t\t\t\t\t\t\t\tmin={property.minimum}\n\t\t\t\t\t\t\t\t\t\tmax={property.maximum}\n\t\t\t\t\t\t\t\t\t\tstep={property.type === 'number' ? 'any' : undefined}\n\t\t\t\t\t\t\t\t\t\toninput={(e) =>\n\t\t\t\t\t\t\t\t\t\t\thandleInputChange(key, (e.target as HTMLInputElement).value, property.type)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{/each}\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t{:else if !props.nodeDetails}\n\t\t\t<div class=\"config-sidebar__empty\">\n\t\t\t\t<Icon icon=\"mdi:cog-outline\" class=\"config-sidebar__empty-icon\" />\n\t\t\t\t<p class=\"config-sidebar__empty-text\">No configuration options available</p>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\n\t<!-- Footer -->\n\t<div class=\"config-sidebar__footer\">\n\t\t<div class=\"config-sidebar__actions\">\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclass=\"config-sidebar__btn config-sidebar__btn--secondary\"\n\t\t\t\tonclick={handleCancel}\n\t\t\t\tdisabled={!hasChanges}\n\t\t\t>\n\t\t\t\t<Icon icon=\"mdi:undo\" />\n\t\t\t\tReset\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclass=\"config-sidebar__btn config-sidebar__btn--primary\"\n\t\t\t\tonclick={handleSave}\n\t\t\t\tdisabled={!hasChanges}\n\t\t\t\ttitle=\"Save configuration (Ctrl+Enter)\"\n\t\t\t>\n\t\t\t\t<Icon icon=\"mdi:check\" />\n\t\t\t\tSave Changes\n\t\t\t</button>\n\t\t</div>\n\n\t\t{#if hasChanges}\n\t\t\t<p class=\"config-sidebar__changes-text\">You have unsaved changes</p>\n\t\t{/if}\n\t</div>\n</div>\n\n<style>\n\t/* Overlay styles removed to avoid darkening the canvas */\n\n\t.config-sidebar {\n\t\tposition: fixed;\n\t\ttop: var(--flowdrop-navbar-height, 60px); /* Start below navbar */\n\t\tright: 0;\n\t\twidth: 400px;\n\t\theight: calc(100vh - var(--flowdrop-navbar-height, 60px)); /* Account for navbar height */\n\t\tbackground-color: #ffffff;\n\t\tborder-left: 1px solid #e5e7eb;\n\t\tbox-shadow: -4px 0 20px rgba(0, 0, 0, 0.15);\n\t\ttransform: translateX(100%);\n\t\ttransition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\t\tz-index: -1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpointer-events: none;\n\t}\n\n\t/* Mobile responsive */\n\t@media (max-width: 768px) {\n\t\t.config-sidebar {\n\t\t\twidth: 100vw;\n\t\t\tborder-left: none;\n\t\t}\n\t}\n\n\t@media (max-width: 480px) {\n\t\t.config-sidebar {\n\t\t\twidth: 100vw;\n\t\t}\n\t}\n\n\t.config-sidebar--open {\n\t\ttransform: translateX(0);\n\t\tz-index: 999;\n\t\tpointer-events: auto;\n\t}\n\n\t/* Off-canvas overlay styles removed to avoid darkening the canvas */\n\n\t/* Prevent body scroll when sidebar is open */\n\t:global(body:has(.config-sidebar--open)) {\n\t\toverflow: hidden;\n\t}\n\n\t.config-sidebar__header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding: 1rem 1.5rem;\n\t\tborder-bottom: 1px solid #e5e7eb;\n\t\tbackground-color: #f9fafb;\n\t\tflex-shrink: 0;\n\t}\n\n\t.config-sidebar__title-section {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t}\n\n\t.config-sidebar__title {\n\t\tfont-size: 1.125rem;\n\t\tfont-weight: 600;\n\t\tcolor: #111827;\n\t\tmargin: 0;\n\t}\n\n\t.config-sidebar__changes-indicator {\n\t\tcolor: #f59e0b;\n\t\tfont-size: 0.5rem;\n\t\tanimation: pulse 2s infinite;\n\t}\n\n\t.config-sidebar__close-btn {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 2rem;\n\t\theight: 2rem;\n\t\tborder: none;\n\t\tbackground: transparent;\n\t\tcolor: #6b7280;\n\t\tcursor: pointer;\n\t\tborder-radius: 0.375rem;\n\t\ttransition: all 0.2s ease-in-out;\n\t}\n\n\t.config-sidebar__close-btn:hover {\n\t\tbackground-color: #f3f4f6;\n\t\tcolor: #374151;\n\t}\n\n\t.config-sidebar__content {\n\t\tflex: 1;\n\t\toverflow-y: auto;\n\t\tpadding: 1.5rem;\n\t\tmin-height: 0; /* Allow flex item to shrink below content size */\n\t\tmax-height: calc(\n\t\t\t100vh - var(--flowdrop-navbar-height, 60px) - 200px\n\t\t); /* Reserve much more space for header and footer */\n\t}\n\n\t/* Node Details Styles */\n\t.config-sidebar__details {\n\t\tmargin-bottom: 1rem;\n\t}\n\n\t.config-sidebar__section-title {\n\t\tfont-size: 1rem;\n\t\tfont-weight: 600;\n\t\tcolor: #111827;\n\t\tmargin: 0 0 1rem 0;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t}\n\n\t.config-sidebar__detail-grid {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 1fr 1fr;\n\t\tgap: 0.75rem;\n\t\tmargin-bottom: 1rem;\n\t}\n\n\t.config-sidebar__detail-item {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.25rem;\n\t}\n\n\t.config-sidebar__detail-item--full {\n\t\tgrid-column: 1 / -1;\n\t}\n\n\t.config-sidebar__detail-label {\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 500;\n\t\tcolor: #6b7280;\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t}\n\n\t.config-sidebar__detail-value {\n\t\tfont-size: 0.875rem;\n\t\tcolor: #374151;\n\t\tfont-weight: 500;\n\t}\n\n\t.config-sidebar__detail-value--badge {\n\t\tbackground-color: #f3f4f6;\n\t\tcolor: #374151;\n\t\tpadding: 0.25rem 0.5rem;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.75rem;\n\t\twidth: fit-content;\n\t\ttext-transform: capitalize;\n\t}\n\n\t.config-sidebar__detail-description {\n\t\tfont-size: 0.875rem;\n\t\tcolor: #6b7280;\n\t\tline-height: 1.5;\n\t\tmargin: 0;\n\t}\n\n\t.config-sidebar__detail-section {\n\t\tmargin-top: 1rem;\n\t}\n\n\t.config-sidebar__detail-subtitle {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 600;\n\t\tcolor: #374151;\n\t\tmargin: 0 0 0.5rem 0;\n\t}\n\n\t.config-sidebar__ports {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.5rem;\n\t}\n\n\t.config-sidebar__port {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 0.5rem;\n\t\tbackground-color: #f9fafb;\n\t\tborder-radius: 0.375rem;\n\t\tborder: 1px solid #e5e7eb;\n\t}\n\n\t.config-sidebar__port--input {\n\t\tborder-left: 3px solid #3b82f6;\n\t}\n\n\t.config-sidebar__port--output {\n\t\tborder-left: 3px solid #10b981;\n\t}\n\n\t:global(.config-sidebar__port-icon) {\n\t\tcolor: #6b7280;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.config-sidebar__port-name {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcolor: #374151;\n\t\tflex: 1;\n\t}\n\n\t.config-sidebar__port-type {\n\t\tfont-size: 0.75rem;\n\t\tcolor: #6b7280;\n\t\tbackground-color: #ffffff;\n\t\tpadding: 0.125rem 0.375rem;\n\t\tborder-radius: 0.25rem;\n\t\tborder: 1px solid #d1d5db;\n\t}\n\n\t.config-sidebar__tags {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tgap: 0.5rem;\n\t}\n\n\t.config-sidebar__tag {\n\t\tfont-size: 0.75rem;\n\t\tcolor: #374151;\n\t\tbackground-color: #f3f4f6;\n\t\tpadding: 0.25rem 0.5rem;\n\t\tborder-radius: 0.375rem;\n\t\tborder: 1px solid #e5e7eb;\n\t}\n\n\t.config-sidebar__separator {\n\t\theight: 1px;\n\t\tbackground-color: #e5e7eb;\n\t\tmargin: 1.5rem 0;\n\t}\n\n\t.config-sidebar__config-section {\n\t\tmargin-top: 1rem;\n\t}\n\n\t.config-sidebar__form {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 1.5rem;\n\t}\n\n\t.config-sidebar__field {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.5rem;\n\t}\n\n\t.config-sidebar__label {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcolor: #374151;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.25rem;\n\t}\n\n\t.config-sidebar__required {\n\t\tcolor: #ef4444;\n\t\tfont-weight: 600;\n\t}\n\n\t.config-sidebar__description {\n\t\tfont-size: 0.75rem;\n\t\tcolor: #6b7280;\n\t\tmargin: 0;\n\t\tline-height: 1.4;\n\t}\n\n\t.config-sidebar__input,\n\t.config-sidebar__select,\n\t.config-sidebar__textarea {\n\t\tpadding: 0.5rem 0.75rem;\n\t\tborder: 1px solid #d1d5db;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\ttransition:\n\t\t\tborder-color 0.2s ease-in-out,\n\t\t\tbox-shadow 0.2s ease-in-out;\n\t\tbackground-color: #ffffff;\n\t}\n\n\t.config-sidebar__input:focus,\n\t.config-sidebar__select:focus,\n\t.config-sidebar__textarea:focus {\n\t\toutline: none;\n\t\tborder-color: #3b82f6;\n\t\tbox-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n\t}\n\n\t.config-sidebar__textarea {\n\t\tresize: vertical;\n\t\tmin-height: 80px;\n\t\tfont-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n\t\tline-height: 1.4;\n\t}\n\n\t.config-sidebar__checkbox-group {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.5rem;\n\t}\n\n\t.config-sidebar__checkbox-wrapper {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t}\n\n\t.config-sidebar__checkbox {\n\t\twidth: 1rem;\n\t\theight: 1rem;\n\t\taccent-color: #3b82f6;\n\t\tcursor: pointer;\n\t}\n\n\t.config-sidebar__checkbox-label {\n\t\tfont-size: 0.875rem;\n\t\tcolor: #374151;\n\t\tcursor: pointer;\n\t}\n\n\t.config-sidebar__empty {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpadding: 3rem 1rem;\n\t\ttext-align: center;\n\t\tcolor: #6b7280;\n\t}\n\n\t:global(.config-sidebar__empty-icon) {\n\t\tfont-size: 3rem;\n\t\tmargin-bottom: 1rem;\n\t\topacity: 0.5;\n\t}\n\n\t.config-sidebar__empty-text {\n\t\tfont-size: 0.875rem;\n\t\tmargin: 0;\n\t}\n\n\t.config-sidebar__footer {\n\t\tpadding: 1rem 1.5rem;\n\t\tborder-top: 1px solid #e5e7eb;\n\t\tbackground-color: #f9fafb;\n\t\tflex-shrink: 0;\n\t\tposition: sticky;\n\t\tbottom: 0;\n\t\tz-index: 10; /* Ensure footer stays on top */\n\t\theight: 80px; /* Increased height for footer */\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: flex-end;\n\t\tgap: 0.75rem;\n\t\tmin-height: 80px; /* Ensure minimum height */\n\t}\n\n\t.config-sidebar__actions {\n\t\tdisplay: flex;\n\t\tgap: 0.75rem;\n\t\tmargin-bottom: 0.5rem;\n\t}\n\n\t.config-sidebar__btn {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 0.5rem 1rem;\n\t\tborder: 1px solid;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tflex: 1;\n\t\tjustify-content: center;\n\t}\n\n\t.config-sidebar__btn:disabled {\n\t\topacity: 0.5;\n\t\tcursor: not-allowed;\n\t}\n\n\t.config-sidebar__btn--primary {\n\t\tbackground-color: #3b82f6;\n\t\tborder-color: #3b82f6;\n\t\tcolor: #ffffff;\n\t}\n\n\t.config-sidebar__btn--primary:hover:not(:disabled) {\n\t\tbackground-color: #2563eb;\n\t\tborder-color: #2563eb;\n\t}\n\n\t.config-sidebar__btn--secondary {\n\t\tbackground-color: transparent;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n\n\t.config-sidebar__btn--secondary:hover:not(:disabled) {\n\t\tbackground-color: #f3f4f6;\n\t\tborder-color: #9ca3af;\n\t}\n\n\t.config-sidebar__changes-text {\n\t\tfont-size: 0.75rem;\n\t\tcolor: #f59e0b;\n\t\tmargin: 0;\n\t\ttext-align: center;\n\t\tfont-weight: 500;\n\t}\n\n\t@keyframes pulse {\n\t\t0%,\n\t\t100% {\n\t\t\topacity: 1;\n\t\t}\n\t\t50% {\n\t\t\topacity: 0.5;\n\t\t}\n\t}\n\n\t/* Responsive design */\n\t@media (max-width: 640px) {\n\t\t.config-sidebar {\n\t\t\twidth: 100vw;\n\t\t}\n\t}\n\n\t@media (max-width: 480px) {\n\t\t.config-sidebar__header,\n\t\t.config-sidebar__content,\n\t\t.config-sidebar__footer {\n\t\t\tpadding-left: 1rem;\n\t\t\tpadding-right: 1rem;\n\t\t}\n\t}\n</style>\n","<!--\n  Logs Sidebar Component\n  Right-side sliding sidebar for real-time execution logs\n  Similar to ConfigSidebar but for logs display\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport Icon from '@iconify/svelte';\n\timport { createEventDispatcher } from 'svelte';\n\timport type { WorkflowNode as WorkflowNodeType } from '../types/index.js';\n\n\tconst dispatch = createEventDispatcher();\n\n\tinterface LogEntry {\n\t\ttimestamp: string;\n\t\tlevel: string;\n\t\tmessage: string;\n\t\tnodeId?: string;\n\t}\n\n\tinterface Props {\n\t\tisOpen: boolean;\n\t\tlogs: LogEntry[];\n\t\tselectedNode?: WorkflowNodeType | null;\n\t\tonClose?: () => void;\n\t}\n\n\tlet props: Props = $props();\n\n\t// Focus management and body scroll control\n\t$effect(() => {\n\t\tif (props.isOpen) {\n\t\t\t// Focus management - focus the sidebar when it opens\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst sidebar = document.querySelector('.logs-sidebar--open');\n\t\t\t\tif (sidebar) {\n\t\t\t\t\t(sidebar as HTMLElement).focus();\n\t\t\t\t}\n\t\t\t}, 100);\n\n\t\t\t// Prevent body scroll\n\t\t\tdocument.body.style.overflow = 'hidden';\n\t\t} else {\n\t\t\t// Restore body scroll\n\t\t\tdocument.body.style.overflow = '';\n\t\t}\n\t});\n\n\t/**\n\t * Handle close action\n\t */\n\tfunction handleClose(): void {\n\t\tprops.onClose?.();\n\t\tdispatch('close');\n\t}\n\n\t/**\n\t * Handle keyboard shortcuts\n\t */\n\tfunction handleKeydown(event: KeyboardEvent): void {\n\t\tif (event.key === 'Escape') {\n\t\t\thandleClose();\n\t\t}\n\t}\n\n\t/**\n\t * Get log level color\n\t */\n\tfunction getLogLevelColor(level: string): string {\n\t\tswitch (level) {\n\t\t\tcase 'error':\n\t\t\t\treturn '#ef4444';\n\t\t\tcase 'warning':\n\t\t\t\treturn '#f59e0b';\n\t\t\tcase 'success':\n\t\t\t\treturn '#10b981';\n\t\t\tcase 'info':\n\t\t\t\treturn '#3b82f6';\n\t\t\tdefault:\n\t\t\t\treturn '#6b7280';\n\t\t}\n\t}\n\n\t/**\n\t * Get log level icon\n\t */\n\tfunction getLogLevelIcon(level: string): string {\n\t\tswitch (level) {\n\t\t\tcase 'error':\n\t\t\t\treturn 'mdi:alert-circle';\n\t\t\tcase 'warning':\n\t\t\t\treturn 'mdi:alert';\n\t\t\tcase 'success':\n\t\t\t\treturn 'mdi:check-circle';\n\t\t\tcase 'info':\n\t\t\t\treturn 'mdi:information';\n\t\t\tdefault:\n\t\t\t\treturn 'mdi:circle';\n\t\t}\n\t}\n\n\t/**\n\t * Format timestamp for display\n\t */\n\tfunction formatTimestamp(timestamp: string): string {\n\t\tconst date = new Date(timestamp);\n\t\treturn date.toLocaleTimeString('en-US', {\n\t\t\thour12: false,\n\t\t\thour: '2-digit',\n\t\t\tminute: '2-digit',\n\t\t\tsecond: '2-digit',\n\t\t\tfractionalSecondDigits: 3\n\t\t});\n\t}\n\n\t/**\n\t * Filter logs by selected node\n\t */\n\tlet filteredLogs = $derived(() => {\n\t\tif (props.selectedNode) {\n\t\t\treturn props.logs.filter((log) => log.nodeId === props.selectedNode?.id);\n\t\t}\n\t\treturn props.logs;\n\t});\n\n\t/**\n\t * Clear logs\n\t */\n\tfunction clearLogs(): void {\n\t\tdispatch('clear');\n\t}\n\n\t/**\n\t * Export logs\n\t */\n\tfunction exportLogs(): void {\n\t\tconst logText = filteredLogs()\n\t\t\t.map(\n\t\t\t\t(log) =>\n\t\t\t\t\t`[${formatTimestamp(log.timestamp)}] ${log.level.toUpperCase()}: ${log.message}${log.nodeId ? ` (Node: ${log.nodeId})` : ''}`\n\t\t\t)\n\t\t\t.join('\\n');\n\n\t\tconst blob = new Blob([logText], { type: 'text/plain' });\n\t\tconst url = URL.createObjectURL(blob);\n\t\tconst link = document.createElement('a');\n\t\tlink.href = url;\n\t\tlink.download = `pipeline-logs-${new Date().toISOString().split('T')[0]}.txt`;\n\t\tlink.click();\n\t\tURL.revokeObjectURL(url);\n\t}\n\n\t// Auto-scroll to bottom when new logs arrive\n\tlet logsContainer = $state<HTMLElement>();\n\t$effect(() => {\n\t\tif (logsContainer && props.logs.length > 0) {\n\t\t\tlogsContainer.scrollTop = logsContainer.scrollHeight;\n\t\t}\n\t});\n</script>\n\n<!-- Sidebar -->\n<div\n\tclass=\"logs-sidebar\"\n\tclass:logs-sidebar--open={props.isOpen}\n\trole=\"dialog\"\n\taria-label=\"Execution logs sidebar\"\n\taria-modal=\"true\"\n\ttabindex=\"-1\"\n\tonkeydown={handleKeydown}\n>\n\t<!-- Header -->\n\t<div class=\"logs-sidebar__header\">\n\t\t<div class=\"logs-sidebar__title-section\">\n\t\t\t<h2 class=\"logs-sidebar__title\">\n\t\t\t\t{#if props.selectedNode}\n\t\t\t\t\tLogs: {props.selectedNode.data.label}\n\t\t\t\t{:else}\n\t\t\t\t\tExecution Logs\n\t\t\t\t{/if}\n\t\t\t</h2>\n\t\t\t{#if props.logs.length > 0}\n\t\t\t\t<div class=\"logs-sidebar__count\" title=\"Total log entries\">\n\t\t\t\t\t<Icon icon=\"mdi:file-document-outline\" />\n\t\t\t\t\t{props.logs.length}\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t\t<button\n\t\t\tclass=\"logs-sidebar__close-btn\"\n\t\t\tonclick={handleClose}\n\t\t\ttitle=\"Close logs sidebar (Esc)\"\n\t\t\taria-label=\"Close logs sidebar\"\n\t\t>\n\t\t\t<Icon icon=\"mdi:close\" />\n\t\t</button>\n\t</div>\n\n\t<!-- Content -->\n\t<div class=\"logs-sidebar__content\">\n\t\t<!-- Logs List -->\n\t\t{#if filteredLogs().length > 0}\n\t\t\t<div class=\"logs-sidebar__logs\" bind:this={logsContainer}>\n\t\t\t\t{#each filteredLogs() as log, index (index)}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"logs-sidebar__log-entry\"\n\t\t\t\t\t\tclass:logs-sidebar__log-entry--error={log.level === 'error'}\n\t\t\t\t\t\tclass:logs-sidebar__log-entry--warning={log.level === 'warning'}\n\t\t\t\t\t\tclass:logs-sidebar__log-entry--success={log.level === 'success'}\n\t\t\t\t\t\tclass:logs-sidebar__log-entry--info={log.level === 'info'}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"logs-sidebar__log-header\">\n\t\t\t\t\t\t\t<div class=\"logs-sidebar__log-level\">\n\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\ticon={getLogLevelIcon(log.level)}\n\t\t\t\t\t\t\t\t\tstyle=\"color: {getLogLevelColor(log.level)}\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span class=\"logs-sidebar__log-level-text\">{log.level.toUpperCase()}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"logs-sidebar__log-timestamp\">\n\t\t\t\t\t\t\t\t{formatTimestamp(log.timestamp)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"logs-sidebar__log-message\">\n\t\t\t\t\t\t\t{log.message}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{#if log.nodeId}\n\t\t\t\t\t\t\t<div class=\"logs-sidebar__log-node\">\n\t\t\t\t\t\t\t\t<Icon icon=\"mdi:graph\" />\n\t\t\t\t\t\t\t\tNode: {log.nodeId}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<div class=\"logs-sidebar__empty\">\n\t\t\t\t<Icon icon=\"mdi:file-document-outline\" class=\"logs-sidebar__empty-icon\" />\n\t\t\t\t<p class=\"logs-sidebar__empty-text\">\n\t\t\t\t\t{#if props.selectedNode}\n\t\t\t\t\t\tNo logs available for this node\n\t\t\t\t\t{:else}\n\t\t\t\t\t\tNo execution logs yet\n\t\t\t\t\t{/if}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\n\t<!-- Footer -->\n\t<div class=\"logs-sidebar__footer\">\n\t\t<div class=\"logs-sidebar__actions\">\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclass=\"logs-sidebar__btn logs-sidebar__btn--secondary\"\n\t\t\t\tonclick={clearLogs}\n\t\t\t\tdisabled={props.logs.length === 0}\n\t\t\t>\n\t\t\t\t<Icon icon=\"mdi:delete\" />\n\t\t\t\tClear\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclass=\"logs-sidebar__btn logs-sidebar__btn--outline\"\n\t\t\t\tonclick={exportLogs}\n\t\t\t\tdisabled={props.logs.length === 0}\n\t\t\t>\n\t\t\t\t<Icon icon=\"mdi:download\" />\n\t\t\t\tExport\n\t\t\t</button>\n\t\t</div>\n\n\t\t{#if props.logs.length > 0}\n\t\t\t<p class=\"logs-sidebar__info-text\">\n\t\t\t\t{filteredLogs().length} of {props.logs.length} log entries\n\t\t\t</p>\n\t\t{/if}\n\t</div>\n</div>\n\n<style>\n\t.logs-sidebar {\n\t\tposition: fixed;\n\t\ttop: var(--flowdrop-navbar-height, 60px); /* Start below navbar */\n\t\tright: 0;\n\t\twidth: 400px;\n\t\theight: calc(100vh - var(--flowdrop-navbar-height, 60px)); /* Account for navbar height */\n\t\tbackground-color: #ffffff;\n\t\tborder-left: 1px solid #e5e7eb;\n\t\tbox-shadow: -4px 0 20px rgba(0, 0, 0, 0.15);\n\t\ttransform: translateX(100%);\n\t\ttransition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\t\tz-index: -1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpointer-events: none;\n\t}\n\n\t/* Mobile responsive */\n\t@media (max-width: 768px) {\n\t\t.logs-sidebar {\n\t\t\twidth: 100vw;\n\t\t\tborder-left: none;\n\t\t}\n\t}\n\n\t@media (max-width: 480px) {\n\t\t.logs-sidebar {\n\t\t\twidth: 100vw;\n\t\t}\n\t}\n\n\t.logs-sidebar--open {\n\t\ttransform: translateX(0);\n\t\tz-index: 999;\n\t\tpointer-events: auto;\n\t}\n\n\t/* Prevent body scroll when sidebar is open */\n\t:global(body:has(.logs-sidebar--open)) {\n\t\toverflow: hidden;\n\t}\n\n\t.logs-sidebar__header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding: 1rem 1.5rem;\n\t\tborder-bottom: 1px solid #e5e7eb;\n\t\tbackground-color: #f9fafb;\n\t\tflex-shrink: 0;\n\t}\n\n\t.logs-sidebar__title-section {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t}\n\n\t.logs-sidebar__title {\n\t\tfont-size: 1.125rem;\n\t\tfont-weight: 600;\n\t\tcolor: #111827;\n\t\tmargin: 0;\n\t}\n\n\t.logs-sidebar__count {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.25rem;\n\t\tfont-size: 0.75rem;\n\t\tcolor: #6b7280;\n\t\tbackground-color: #f3f4f6;\n\t\tpadding: 0.25rem 0.5rem;\n\t\tborder-radius: 0.375rem;\n\t}\n\n\t.logs-sidebar__close-btn {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 2rem;\n\t\theight: 2rem;\n\t\tborder: none;\n\t\tbackground: transparent;\n\t\tcolor: #6b7280;\n\t\tcursor: pointer;\n\t\tborder-radius: 0.375rem;\n\t\ttransition: all 0.2s ease-in-out;\n\t}\n\n\t.logs-sidebar__close-btn:hover {\n\t\tbackground-color: #f3f4f6;\n\t\tcolor: #374151;\n\t}\n\n\t.logs-sidebar__content {\n\t\tflex: 1;\n\t\toverflow-y: auto;\n\t\tpadding: 1.5rem;\n\t}\n\n\t.logs-sidebar__logs {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.75rem;\n\t}\n\n\t.logs-sidebar__log-entry {\n\t\tbackground-color: #f9fafb;\n\t\tborder: 1px solid #e5e7eb;\n\t\tborder-radius: 0.5rem;\n\t\tpadding: 0.75rem;\n\t\ttransition: all 0.2s ease-in-out;\n\t}\n\n\t.logs-sidebar__log-entry--error {\n\t\tborder-left: 4px solid #ef4444;\n\t\tbackground-color: #fef2f2;\n\t}\n\n\t.logs-sidebar__log-entry--warning {\n\t\tborder-left: 4px solid #f59e0b;\n\t\tbackground-color: #fffbeb;\n\t}\n\n\t.logs-sidebar__log-entry--success {\n\t\tborder-left: 4px solid #10b981;\n\t\tbackground-color: #f0fdf4;\n\t}\n\n\t.logs-sidebar__log-entry--info {\n\t\tborder-left: 4px solid #3b82f6;\n\t\tbackground-color: #eff6ff;\n\t}\n\n\t.logs-sidebar__log-header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tmargin-bottom: 0.5rem;\n\t}\n\n\t.logs-sidebar__log-level {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.25rem;\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 600;\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t}\n\n\t.logs-sidebar__log-level-text {\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 600;\n\t}\n\n\t.logs-sidebar__log-timestamp {\n\t\tfont-size: 0.75rem;\n\t\tcolor: #6b7280;\n\t\tfont-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n\t}\n\n\t.logs-sidebar__log-message {\n\t\tfont-size: 0.875rem;\n\t\tcolor: #374151;\n\t\tline-height: 1.5;\n\t\tmargin-bottom: 0.5rem;\n\t\tword-break: break-word;\n\t}\n\n\t.logs-sidebar__log-node {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.25rem;\n\t\tfont-size: 0.75rem;\n\t\tcolor: #6b7280;\n\t\tbackground-color: #ffffff;\n\t\tpadding: 0.25rem 0.5rem;\n\t\tborder-radius: 0.25rem;\n\t\tborder: 1px solid #e5e7eb;\n\t\twidth: fit-content;\n\t}\n\n\t.logs-sidebar__empty {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpadding: 3rem 1rem;\n\t\ttext-align: center;\n\t\tcolor: #6b7280;\n\t}\n\n\t:global(.logs-sidebar__empty-icon) {\n\t\tfont-size: 3rem;\n\t\tmargin-bottom: 1rem;\n\t\topacity: 0.5;\n\t}\n\n\t.logs-sidebar__empty-text {\n\t\tfont-size: 0.875rem;\n\t\tmargin: 0;\n\t}\n\n\t.logs-sidebar__footer {\n\t\tpadding: 1rem 1.5rem;\n\t\tborder-top: 1px solid #e5e7eb;\n\t\tbackground-color: #f9fafb;\n\t\tflex-shrink: 0;\n\t}\n\n\t.logs-sidebar__actions {\n\t\tdisplay: flex;\n\t\tgap: 0.75rem;\n\t\tmargin-bottom: 0.5rem;\n\t}\n\n\t.logs-sidebar__btn {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 0.5rem 1rem;\n\t\tborder: 1px solid;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tflex: 1;\n\t\tjustify-content: center;\n\t}\n\n\t.logs-sidebar__btn:disabled {\n\t\topacity: 0.5;\n\t\tcursor: not-allowed;\n\t}\n\n\t.logs-sidebar__btn--secondary {\n\t\tbackground-color: #ef4444;\n\t\tborder-color: #ef4444;\n\t\tcolor: #ffffff;\n\t}\n\n\t.logs-sidebar__btn--secondary:hover:not(:disabled) {\n\t\tbackground-color: #dc2626;\n\t\tborder-color: #dc2626;\n\t}\n\n\t.logs-sidebar__btn--outline {\n\t\tbackground-color: transparent;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n\n\t.logs-sidebar__btn--outline:hover:not(:disabled) {\n\t\tbackground-color: #f3f4f6;\n\t\tborder-color: #9ca3af;\n\t}\n\n\t.logs-sidebar__info-text {\n\t\tfont-size: 0.75rem;\n\t\tcolor: #6b7280;\n\t\tmargin: 0;\n\t\ttext-align: center;\n\t}\n\n\t/* Responsive design */\n\t@media (max-width: 640px) {\n\t\t.logs-sidebar {\n\t\t\twidth: 100vw;\n\t\t}\n\t}\n\n\t@media (max-width: 480px) {\n\t\t.logs-sidebar__header,\n\t\t.logs-sidebar__content,\n\t\t.logs-sidebar__footer {\n\t\t\tpadding-left: 1rem;\n\t\t\tpadding-right: 1rem;\n\t\t}\n\t}\n</style>\n","/**\n * Mock for $app/stores\n * Provides minimal implementations for SvelteKit stores in library context\n */\n\nimport { writable } from 'svelte/store';\n\n// Mock page store\nexport const page = writable({\n\turl: new URL('http://localhost:3000'),\n\tparams: {},\n\troute: { id: null },\n\tstatus: 200,\n\terror: null,\n\tdata: {},\n\tform: null\n});\n\n// Mock navigating store\nexport const navigating = writable(null);\n\n// Mock updated store\nexport const updated = writable(false);\n\n// Mock preloadData function\nexport const preloadData = async () => ({});\n","<!--\n  FlowDrop Navbar Component\n  Reusable navigation bar with customizable primary actions\n  - Logo and branding on the left\n  - Primary actions in the center\n  - Status indicator on the right\n-->\n\n<script lang=\"ts\">\n\timport Icon from '@iconify/svelte';\n\timport Logo from './Logo.svelte';\n\n\tinterface NavbarAction {\n\t\tlabel: string;\n\t\thref: string;\n\t\ticon?: string;\n\t\tvariant?: 'primary' | 'secondary' | 'outline';\n\t\tonclick?: (event: Event) => void;\n\t}\n\n\tinterface BreadcrumbItem {\n\t\tlabel: string;\n\t\thref?: string;\n\t\ticon?: string;\n\t}\n\n\tinterface Props {\n\t\tprimaryActions?: NavbarAction[];\n\t\tshowStatus?: boolean;\n\t\ttitle?: string;\n\t\tbreadcrumbs?: BreadcrumbItem[];\n\t}\n\n\tlet { primaryActions = [], showStatus = true, title, breadcrumbs = [] }: Props = $props();\n\n\t// Dropdown state\n\tlet isDropdownOpen = $state(false);\n\n\t// Close dropdown when clicking outside\n\tfunction handleClickOutside(event: MouseEvent) {\n\t\tconst target = event.target as HTMLElement;\n\t\tif (!target.closest('.flowdrop-navbar__dropdown')) {\n\t\t\tisDropdownOpen = false;\n\t\t}\n\t}\n\n\t// Add event listener for click outside\n\tif (typeof window !== 'undefined') {\n\t\tdocument.addEventListener('click', handleClickOutside);\n\t}\n</script>\n\n<div class=\"flowdrop-navbar\">\n\t<div class=\"flowdrop-navbar__start\">\n\t\t<!-- Logo and Title -->\n\t\t<div class=\"flowdrop-logo--container\">\n\t\t\t<div class=\"flowdrop-flex flowdrop-gap--3\">\n\t\t\t\t<div class=\"flowdrop-logo--header\">\n\t\t\t\t\t<Logo />\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h1 class=\"flowdrop-text--logo flowdrop-font--bold\">FlowDrop</h1>\n\t\t\t\t\t<p class=\"flowdrop-text--tagline flowdrop-text--gray\">Visual Workflow Manager</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class=\"flowdrop-navbar__center\">\n\t\t<div class=\"flowdrop-navbar__center-content\">\n\t\t\t<!-- Status Indicator on top -->\n\t\t\t{#if showStatus}\n\t\t\t\t<div class=\"flowdrop-navbar__status-container\">\n\t\t\t\t\t<div class=\"flowdrop-navbar__status\">\n\t\t\t\t\t\t<div class=\"flowdrop-navbar__status-indicator\"></div>\n\t\t\t\t\t\t<span class=\"flowdrop-navbar__status-text\">Connected</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<!-- Title or Breadcrumbs on bottom -->\n\t\t\t{#if breadcrumbs.length > 0}\n\t\t\t\t<div class=\"flowdrop-navbar__breadcrumb-container\">\n\t\t\t\t\t<nav class=\"flowdrop-navbar__breadcrumb\" aria-label=\"Breadcrumb\">\n\t\t\t\t\t\t<ol class=\"flowdrop-navbar__breadcrumb-list\">\n\t\t\t\t\t\t\t{#each breadcrumbs as breadcrumb, index (index)}\n\t\t\t\t\t\t\t\t<li class=\"flowdrop-navbar__breadcrumb-item\">\n\t\t\t\t\t\t\t\t\t{#if breadcrumb.href && index < breadcrumbs.length - 1}\n\t\t\t\t\t\t\t\t\t\t<a href={breadcrumb.href} class=\"flowdrop-navbar__breadcrumb-link\">\n\t\t\t\t\t\t\t\t\t\t\t{#if breadcrumb.icon}\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon icon={breadcrumb.icon} class=\"flowdrop-navbar__breadcrumb-icon\" />\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-navbar__breadcrumb-text\">{breadcrumb.label}</span>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-navbar__breadcrumb-current\">\n\t\t\t\t\t\t\t\t\t\t\t{#if breadcrumb.icon}\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon icon={breadcrumb.icon} class=\"flowdrop-navbar__breadcrumb-icon\" />\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-navbar__breadcrumb-text\">{breadcrumb.label}</span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t{#if index < breadcrumbs.length - 1}\n\t\t\t\t\t\t\t\t\t<li class=\"flowdrop-navbar__breadcrumb-separator\">\n\t\t\t\t\t\t\t\t\t\t<Icon icon=\"mdi:chevron-right\" class=\"flowdrop-navbar__breadcrumb-chevron\" />\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</ol>\n\t\t\t\t\t</nav>\n\t\t\t\t</div>\n\t\t\t{:else if title}\n\t\t\t\t<div class=\"flowdrop-navbar__title-container\">\n\t\t\t\t\t<div class=\"flowdrop-navbar__title\">\n\t\t\t\t\t\t<h2 class=\"flowdrop-navbar__title-text\">{title}</h2>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n\n\t<div class=\"flowdrop-navbar__actions\">\n\t\t{#if primaryActions.length > 0}\n\t\t\t<!-- Primary Action Button -->\n\t\t\t{#if primaryActions[0]}\n\t\t\t\t{@const primaryAction = primaryActions[0]}\n\t\t\t\t<a\n\t\t\t\t\thref={primaryAction.href}\n\t\t\t\t\tclass=\"flowdrop-navbar__primary-action flowdrop-navbar__action--{primaryAction.variant ||\n\t\t\t\t\t\t'primary'}\"\n\t\t\t\t\tonclick={primaryAction.onclick}\n\t\t\t\t>\n\t\t\t\t\t{#if primaryAction.icon}\n\t\t\t\t\t\t<span class=\"flowdrop-navbar__action-icon\">\n\t\t\t\t\t\t\t<Icon icon={primaryAction.icon} class=\"w-4 h-4\" />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t{/if}\n\t\t\t\t\t<span class=\"flowdrop-navbar__action-label\">{primaryAction.label}</span>\n\t\t\t\t</a>\n\t\t\t{/if}\n\n\t\t\t<!-- Dropdown for Additional Actions -->\n\t\t\t{#if primaryActions.length > 1}\n\t\t\t\t<div class=\"flowdrop-navbar__dropdown\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"flowdrop-navbar__dropdown-trigger\"\n\t\t\t\t\t\tonclick={() => (isDropdownOpen = !isDropdownOpen)}\n\t\t\t\t\t\taria-expanded={isDropdownOpen}\n\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon icon=\"heroicons:chevron-down\" class=\"w-4 h-4\" />\n\t\t\t\t\t</button>\n\n\t\t\t\t\t{#if isDropdownOpen}\n\t\t\t\t\t\t<div class=\"flowdrop-navbar__dropdown-menu\">\n\t\t\t\t\t\t\t{#each primaryActions.slice(1) as action (action.label)}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={action.href}\n\t\t\t\t\t\t\t\t\tclass=\"flowdrop-navbar__dropdown-item\"\n\t\t\t\t\t\t\t\t\tonclick={(e) => {\n\t\t\t\t\t\t\t\t\t\taction.onclick?.(e);\n\t\t\t\t\t\t\t\t\t\tisDropdownOpen = false;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{#if action.icon}\n\t\t\t\t\t\t\t\t\t\t<Icon icon={action.icon} class=\"w-4 h-4\" />\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t<span>{action.label}</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t{/if}\n\t</div>\n\n\t<div class=\"flowdrop-navbar__end\">\n\t\t<!-- Additional actions or content can go here -->\n\t</div>\n</div>\n\n<style>\n\t.flowdrop-navbar {\n\t\theight: var(--flowdrop-navbar-height, 60px);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding: 0 1rem;\n\t\tbackground-color: #ffffff;\n\t\tborder-bottom: 1px solid #e5e7eb;\n\t\tbox-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);\n\t\tz-index: 10;\n\t}\n\n\t.flowdrop-navbar__start {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\twidth: 320px;\n\t\tmin-width: 320px;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-logo--container {\n\t\tcolor: #000;\n\t}\n\n\t.flowdrop-logo--header {\n\t\twidth: 40px;\n\t\theight: 40px;\n\t\tfont-size: 1.25rem;\n\t\tpadding: 2px;\n\t}\n\n\t.flowdrop-navbar__center {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tjustify-content: flex-start;\n\t\talign-items: center;\n\t\tpadding-left: 1rem;\n\t}\n\n\t.flowdrop-navbar__center-content {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: flex-start;\n\t\tjustify-content: center;\n\t\tgap: 0.25rem;\n\t}\n\n\t.flowdrop-navbar__title-container {\n\t\tdisplay: flex;\n\t\tjustify-content: flex-start;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-navbar__title {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: flex-start;\n\t\tjustify-content: center;\n\t}\n\n\t.flowdrop-navbar__title-text {\n\t\tmargin: 0;\n\t\tfont-size: 1rem;\n\t\tfont-weight: 600;\n\t\tcolor: #111827;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tmax-width: 500px;\n\t\ttext-align: left;\n\t\tline-height: 1.2;\n\t}\n\n\t/* Breadcrumb Styles */\n\t.flowdrop-navbar__breadcrumb-container {\n\t\tdisplay: flex;\n\t\tjustify-content: flex-start;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-navbar__breadcrumb {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-navbar__breadcrumb-list {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tlist-style: none;\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t\tgap: 0.25rem;\n\t}\n\n\t.flowdrop-navbar__breadcrumb-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-navbar__breadcrumb-link {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.25rem;\n\t\tpadding: 0.25rem 0.5rem;\n\t\tborder-radius: 0.375rem;\n\t\ttext-decoration: none;\n\t\tcolor: #6b7280;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\ttransition: all 0.2s ease;\n\t}\n\n\t.flowdrop-navbar__breadcrumb-link:hover {\n\t\tcolor: #111827;\n\t\tbackground-color: #f3f4f6;\n\t}\n\n\t.flowdrop-navbar__breadcrumb-current {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.25rem;\n\t\tpadding: 0.25rem 0.5rem;\n\t\tcolor: #111827;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 600;\n\t}\n\n\t.flowdrop-navbar__breadcrumb-icon {\n\t\twidth: 1rem;\n\t\theight: 1rem;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-navbar__breadcrumb-text {\n\t\twhite-space: nowrap;\n\t}\n\n\t.flowdrop-navbar__breadcrumb-separator {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tcolor: #9ca3af;\n\t}\n\n\t.flowdrop-navbar__breadcrumb-chevron {\n\t\twidth: 0.875rem;\n\t\theight: 0.875rem;\n\t}\n\n\t.flowdrop-navbar__status-container {\n\t\tdisplay: flex;\n\t\tjustify-content: flex-start;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-navbar__status {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.375rem;\n\t\tpadding: 0.125rem 0.5rem;\n\t\tbackground-color: #f0fdf4;\n\t\tborder: 1px solid #bbf7d0;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 500;\n\t}\n\n\t.flowdrop-navbar__status-indicator {\n\t\twidth: 0.375rem;\n\t\theight: 0.375rem;\n\t\tbackground-color: #22c55e;\n\t\tborder-radius: 50%;\n\t\tanimation: pulse 2s infinite;\n\t}\n\n\t.flowdrop-navbar__status-text {\n\t\tcolor: #166534;\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 500;\n\t}\n\n\t@keyframes pulse {\n\t\t0%,\n\t\t100% {\n\t\t\topacity: 1;\n\t\t}\n\t\t50% {\n\t\t\topacity: 0.5;\n\t\t}\n\t}\n\n\t.flowdrop-navbar__actions {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0;\n\t\tmargin-left: auto;\n\t\tposition: relative;\n\t}\n\n\t.flowdrop-navbar__primary-action {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 0.5rem 1rem;\n\t\ttext-decoration: none;\n\t\tborder: 1px solid #d1d5db;\n\t\tborder-radius: 0.375rem 0 0 0.375rem;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tfont-weight: 500;\n\t\tfont-size: 0.875rem;\n\t\theight: 2.5rem;\n\t\tbox-sizing: border-box;\n\t\tbackground-color: #ffffff;\n\t\tcolor: #374151;\n\t\tborder-right: none;\n\t}\n\n\t.flowdrop-navbar__primary-action:hover {\n\t\tbackground-color: #f9fafb;\n\t\tcolor: #111827;\n\t}\n\n\t.flowdrop-navbar__dropdown {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\theight: 2.5rem;\n\t}\n\n\t.flowdrop-navbar__dropdown-trigger {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 2rem;\n\t\theight: 2.5rem;\n\t\tborder: 1px solid #d1d5db;\n\t\tborder-left: none;\n\t\tborder-radius: 0 0.375rem 0.375rem 0;\n\t\tbackground-color: #ffffff;\n\t\tcolor: #374151;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tbox-sizing: border-box;\n\t}\n\n\t.flowdrop-navbar__dropdown-trigger:hover {\n\t\tbackground-color: #f9fafb;\n\t\tcolor: #111827;\n\t}\n\n\t.flowdrop-navbar__dropdown-trigger[aria-expanded='true'] {\n\t\tbackground-color: #f3f4f6;\n\t\tcolor: #111827;\n\t}\n\n\t.flowdrop-navbar__dropdown-menu {\n\t\tposition: absolute;\n\t\ttop: 100%;\n\t\tright: 0;\n\t\tz-index: 50;\n\t\tmargin-top: 0.25rem;\n\t\tmin-width: 12rem;\n\t\tbackground-color: #ffffff;\n\t\tborder: 1px solid #e5e7eb;\n\t\tborder-radius: 0.5rem;\n\t\tbox-shadow:\n\t\t\t0 10px 15px -3px rgba(0, 0, 0, 0.1),\n\t\t\t0 4px 6px -2px rgba(0, 0, 0, 0.05);\n\t\toverflow: hidden;\n\t}\n\n\t.flowdrop-navbar__dropdown-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.75rem;\n\t\tpadding: 0.75rem 1rem;\n\t\ttext-decoration: none;\n\t\tcolor: #374151;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 500;\n\t\ttransition: background-color 0.2s ease-in-out;\n\t\tborder: none;\n\t\twidth: 100%;\n\t\ttext-align: left;\n\t}\n\n\t.flowdrop-navbar__dropdown-item:hover {\n\t\tbackground-color: #f9fafb;\n\t\tcolor: #111827;\n\t}\n\n\t.flowdrop-navbar__dropdown-item:first-child {\n\t\tborder-top: none;\n\t}\n\n\t.flowdrop-navbar__dropdown-item:last-child {\n\t\tborder-bottom: none;\n\t}\n\n\t.flowdrop-navbar__action {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 0.5rem 1rem;\n\t\ttext-decoration: none;\n\t\tborder-radius: 0.375rem;\n\t\ttransition: all 0.2s ease-in-out;\n\t\tfont-weight: 500;\n\t\tfont-size: 0.875rem;\n\t\tborder: 1px solid transparent;\n\t}\n\n\t.flowdrop-navbar__action--primary {\n\t\tbackground-color: #3b82f6;\n\t\tcolor: #ffffff;\n\t\tborder-color: #3b82f6;\n\t}\n\n\t.flowdrop-navbar__action--primary:hover {\n\t\tbackground-color: #2563eb;\n\t\tborder-color: #2563eb;\n\t\tcolor: #ffffff;\n\t}\n\n\t.flowdrop-navbar__action--secondary {\n\t\tbackground-color: #f3f4f6;\n\t\tcolor: #374151;\n\t\tborder-color: #d1d5db;\n\t}\n\n\t.flowdrop-navbar__action--secondary:hover {\n\t\tbackground-color: #e5e7eb;\n\t\tcolor: #111827;\n\t}\n\n\t.flowdrop-navbar__action--outline {\n\t\tbackground-color: transparent;\n\t\tcolor: #374151;\n\t\tborder-color: #d1d5db;\n\t}\n\n\t.flowdrop-navbar__action--outline:hover {\n\t\tbackground-color: #f9fafb;\n\t\tcolor: #111827;\n\t\tborder-color: #9ca3af;\n\t}\n\n\t.flowdrop-navbar__action--active {\n\t\tbackground-color: #eff6ff;\n\t\tcolor: #1d4ed8;\n\t\tborder-color: #93c5fd;\n\t}\n\n\t.flowdrop-navbar__action-icon {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-navbar__action-icon :global(svg) {\n\t\twidth: 1rem;\n\t\theight: 1rem;\n\t}\n\n\t.flowdrop-navbar__action-label {\n\t\tfont-weight: 500;\n\t}\n\n\t.flowdrop-navbar__end {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.flowdrop-api-status {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tpadding: 0.25rem 0.5rem;\n\t\tborder-radius: 0.375rem;\n\t\tbackground-color: #f3f4f6;\n\t}\n\n\t.flowdrop-api-status__indicator {\n\t\twidth: 0.5rem;\n\t\theight: 0.5rem;\n\t\tborder-radius: 50%;\n\t\ttransition: background-color 0.2s ease-in-out;\n\t}\n\n\t.flowdrop-api-status__indicator--connected {\n\t\tbackground-color: #10b981;\n\t}\n\n\t/* Utility classes */\n\t.flowdrop-flex {\n\t\tdisplay: flex;\n\t}\n\n\t.flowdrop-gap--3 {\n\t\tgap: 0.75rem;\n\t}\n\n\t.flowdrop-text--logo {\n\t\tfont-size: 1.125rem;\n\t\tline-height: 0;\n\t}\n\n\t.flowdrop-text--tagline {\n\t\tfont-size: 0.75rem;\n\t\tline-height: 0.5rem;\n\t}\n\n\t.flowdrop-text--xs {\n\t\tfont-size: 0.75rem;\n\t\tline-height: 1rem;\n\t}\n\n\t.flowdrop-text--gray {\n\t\tcolor: #6b7280;\n\t}\n\n\t.flowdrop-font--bold {\n\t\tfont-weight: 700;\n\t}\n\n\t/* Responsive design */\n\t@media (max-width: 768px) {\n\t\t.flowdrop-navbar {\n\t\t\tpadding: 0 0.5rem;\n\t\t}\n\n\t\t.flowdrop-navbar__start {\n\t\t\twidth: 280px;\n\t\t\tmin-width: 280px;\n\t\t}\n\n\t\t.flowdrop-navbar__actions {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t.flowdrop-text--logo {\n\t\t\tfont-size: 1rem;\n\t\t}\n\n\t\t.flowdrop-text--tagline {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t.flowdrop-navbar__title-text {\n\t\t\tfont-size: 0.875rem;\n\t\t\tmax-width: 300px;\n\t\t}\n\n\t\t.flowdrop-navbar__status {\n\t\t\tfont-size: 0.625rem;\n\t\t\tpadding: 0.125rem 0.375rem;\n\t\t}\n\t}\n\n\t@media (max-width: 480px) {\n\t\t.flowdrop-navbar__start {\n\t\t\twidth: 240px;\n\t\t\tmin-width: 240px;\n\t\t}\n\n\t\t.flowdrop-navbar__title-text {\n\t\t\tfont-size: 0.75rem;\n\t\t\tmax-width: 200px;\n\t\t}\n\t}\n</style>\n","/**\n * Sample data for FlowDrop development and testing\n * Includes sample nodes and workflows for demonstration and testing purposes\n */\nimport { CATEGORY_ICONS } from '../utils/icons.js';\n/**\n * Sample node data for development and testing\n * These represent the available node types in the workflow editor\n */\nexport const sampleNodes = [\n    // ===== INPUTS CATEGORY =====\n    {\n        id: 'sample-text-input',\n        name: 'Text Input',\n        type: 'simple',\n        supportedTypes: ['simple', 'square', 'default'],\n        version: '1.0.0',\n        description: 'User text input field',\n        category: 'inputs',\n        icon: 'mdi:text-box',\n        color: '#10b981',\n        inputs: [],\n        outputs: [\n            {\n                id: 'text',\n                name: 'Text',\n                type: 'output',\n                dataType: 'string',\n                description: 'User entered text'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'simple',\n                    enum: ['simple', 'square', 'default'],\n                    enumNames: [\n                        'Simple (compact layout)',\n                        'Square (square layout)',\n                        'Default (standard workflow node)'\n                    ]\n                },\n                placeholder: {\n                    type: 'string',\n                    title: 'Placeholder',\n                    description: 'Placeholder text for the input field',\n                    default: 'Enter text...'\n                },\n                defaultValue: {\n                    type: 'string',\n                    title: 'Default Value',\n                    description: 'Default text value',\n                    default: ''\n                }\n            }\n        },\n        tags: ['input', 'text', 'user']\n    },\n    {\n        id: 'sample-file-upload',\n        name: 'File Upload',\n        type: 'simple',\n        supportedTypes: ['simple', 'default'],\n        version: '1.0.0',\n        description: 'File upload input with drag and drop support',\n        category: 'inputs',\n        icon: 'mdi:file-upload',\n        color: '#f59e0b',\n        inputs: [],\n        outputs: [\n            {\n                id: 'file',\n                name: 'File',\n                type: 'output',\n                dataType: 'file',\n                description: 'Uploaded file data'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'simple',\n                    enum: ['simple', 'square', 'default'],\n                    enumNames: [\n                        'Simple (compact layout)',\n                        'Square (square layout)',\n                        'Default (standard workflow node)'\n                    ]\n                },\n                accept: {\n                    type: 'string',\n                    title: 'Accepted File Types',\n                    description: 'Comma-separated list of accepted file types',\n                    default: '*'\n                },\n                maxSize: {\n                    type: 'number',\n                    title: 'Maximum File Size (MB)',\n                    description: 'Maximum file size in megabytes',\n                    default: 10\n                }\n            }\n        },\n        tags: ['input', 'file', 'upload']\n    },\n    {\n        id: 'sample-webhook',\n        name: 'Webhook',\n        type: 'simple',\n        supportedTypes: ['simple', 'default'],\n        version: '1.0.0',\n        description: 'Receive data from external webhooks',\n        category: 'inputs',\n        icon: 'mdi:webhook',\n        color: '#8b5cf6',\n        inputs: [],\n        outputs: [\n            {\n                id: 'data',\n                name: 'Data',\n                type: 'output',\n                dataType: 'json',\n                description: 'Webhook payload data'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'simple',\n                    enum: ['simple', 'square', 'default'],\n                    enumNames: [\n                        'Simple (compact layout)',\n                        'Square (square layout)',\n                        'Default (standard workflow node)'\n                    ]\n                },\n                endpoint: {\n                    type: 'string',\n                    title: 'Endpoint',\n                    description: 'Webhook endpoint URL',\n                    default: ''\n                },\n                method: {\n                    type: 'string',\n                    title: 'HTTP Method',\n                    description: 'HTTP method for the webhook',\n                    default: 'POST',\n                    enum: ['GET', 'POST', 'PUT', 'DELETE']\n                }\n            }\n        },\n        tags: ['input', 'webhook', 'external']\n    },\n    // ===== OUTPUTS CATEGORY =====\n    {\n        id: 'sample-chat-output',\n        name: 'Chat Output',\n        type: 'simple',\n        supportedTypes: ['simple', 'default'],\n        version: '1.0.0',\n        description: 'Display chat-style output with formatting',\n        category: 'outputs',\n        icon: 'mdi:chat',\n        color: '#8b5cf6',\n        inputs: [\n            {\n                id: 'message',\n                name: 'Message',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Message to display'\n            }\n        ],\n        outputs: [],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'simple',\n                    enum: ['simple', 'square', 'default'],\n                    enumNames: [\n                        'Simple (compact layout)',\n                        'Square (square layout)',\n                        'Default (standard workflow node)'\n                    ]\n                },\n                showTimestamp: {\n                    type: 'boolean',\n                    title: 'Show Timestamp',\n                    description: 'Display timestamp with messages',\n                    default: true\n                },\n                maxLength: {\n                    type: 'number',\n                    title: 'Maximum Length',\n                    description: 'Maximum message length',\n                    default: 2000\n                },\n                markdown: {\n                    type: 'boolean',\n                    title: 'Markdown Support',\n                    description: 'Enable markdown formatting',\n                    default: true\n                }\n            }\n        },\n        tags: ['output', 'chat', 'display']\n    },\n    {\n        id: 'sample-text-output',\n        name: 'Text Output',\n        type: 'simple',\n        supportedTypes: ['simple', 'default'],\n        version: '1.0.0',\n        description: 'Display plain text output',\n        category: 'outputs',\n        icon: 'mdi:text-box',\n        color: '#10b981',\n        inputs: [\n            {\n                id: 'text',\n                name: 'Text',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Text to display'\n            }\n        ],\n        outputs: [],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'simple',\n                    enum: ['simple', 'square', 'default'],\n                    enumNames: [\n                        'Simple (compact layout)',\n                        'Square (square layout)',\n                        'Default (standard workflow node)'\n                    ]\n                },\n                showTimestamp: {\n                    type: 'boolean',\n                    title: 'Show Timestamp',\n                    description: 'Display timestamp with output',\n                    default: false\n                },\n                maxLength: {\n                    type: 'number',\n                    title: 'Maximum Length',\n                    description: 'Maximum text length',\n                    default: 1000\n                }\n            }\n        },\n        tags: ['output', 'text', 'display']\n    },\n    // ===== PROMPTS CATEGORY =====\n    {\n        id: 'sample-prompt',\n        name: 'Prompt',\n        type: 'simple',\n        supportedTypes: ['simple', 'default'],\n        version: '1.0.0',\n        description: 'Template-based prompt with variables',\n        category: 'prompts',\n        icon: 'mdi:message-text',\n        color: '#f59e0b',\n        inputs: [\n            {\n                id: 'variables',\n                name: 'Variables',\n                type: 'input',\n                dataType: 'json',\n                required: false,\n                description: 'Variables to inject into template'\n            }\n        ],\n        outputs: [\n            {\n                id: 'prompt',\n                name: 'Prompt',\n                type: 'output',\n                dataType: 'string',\n                description: 'Formatted prompt text'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'simple',\n                    enum: ['simple', 'square', 'default'],\n                    enumNames: [\n                        'Simple (compact layout)',\n                        'Square (square layout)',\n                        'Default (standard workflow node)'\n                    ]\n                },\n                template: {\n                    type: 'string',\n                    title: 'Template',\n                    description: 'Prompt template with variables',\n                    default: 'You are a helpful assistant. {input}'\n                },\n                variables: {\n                    type: 'array',\n                    title: 'Variables',\n                    description: 'List of available variables',\n                    default: []\n                }\n            }\n        },\n        tags: ['prompt', 'template', 'variables']\n    },\n    {\n        id: 'sample-structured-output',\n        name: 'Structured Output',\n        type: 'default',\n        supportedTypes: ['default'],\n        version: '1.0.0',\n        description: 'Generate structured output from models',\n        category: 'prompts',\n        icon: 'mdi:table',\n        color: '#6366f1',\n        inputs: [\n            {\n                id: 'model',\n                name: 'Model',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Model to use'\n            },\n            {\n                id: 'message',\n                name: 'Message',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Input message'\n            }\n        ],\n        outputs: [\n            {\n                id: 'dataframe',\n                name: 'DataFrame',\n                type: 'output',\n                dataType: 'json',\n                description: 'Structured output as DataFrame'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                schema: {\n                    type: 'object',\n                    title: 'Schema',\n                    description: 'JSON schema for structured output',\n                    default: {}\n                },\n                outputType: {\n                    type: 'string',\n                    title: 'Output Type',\n                    description: 'Type of structured output',\n                    default: 'json',\n                    enum: ['json', 'xml', 'yaml']\n                }\n            }\n        },\n        tags: ['prompt', 'structured', 'output', 'schema']\n    },\n    // ===== MODELS CATEGORY =====\n    {\n        id: 'sample-openai',\n        name: 'OpenAI',\n        type: 'default',\n        supportedTypes: ['default'],\n        version: '1.0.0',\n        description: 'OpenAI GPT models for text generation',\n        category: 'models',\n        icon: 'mdi:robot',\n        color: '#10a37f',\n        inputs: [\n            {\n                id: 'prompt',\n                name: 'Prompt',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Input prompt for the model'\n            },\n            {\n                id: 'system_message',\n                name: 'System Message',\n                type: 'input',\n                dataType: 'string',\n                required: false,\n                description: 'System message to set behavior'\n            }\n        ],\n        outputs: [\n            {\n                id: 'response',\n                name: 'Response',\n                type: 'output',\n                dataType: 'string',\n                description: 'Model response'\n            },\n            {\n                id: 'usage',\n                name: 'Usage',\n                type: 'output',\n                dataType: 'json',\n                description: 'Token usage information'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                model: {\n                    type: 'string',\n                    title: 'Model',\n                    description: 'OpenAI model to use',\n                    default: 'gpt-4o-mini',\n                    enum: ['gpt-4o-mini', 'gpt-5-chat-latest', 'gpt-4.1']\n                },\n                temperature: {\n                    type: 'number',\n                    title: 'Temperature',\n                    description: 'Creativity level (0-2)',\n                    default: 0.7,\n                    minimum: 0,\n                    maximum: 2\n                },\n                maxTokens: {\n                    type: 'number',\n                    title: 'Max Tokens',\n                    description: 'Maximum tokens to generate',\n                    default: 1000,\n                    minimum: 1,\n                    maximum: 4000\n                },\n                apiKey: {\n                    type: 'string',\n                    title: 'API Key',\n                    description: 'OpenAI API key',\n                    default: ''\n                }\n            }\n        },\n        tags: ['model', 'openai', 'gpt', 'chat']\n    },\n    {\n        id: 'sample-anthropic',\n        name: 'Anthropic',\n        type: 'default',\n        supportedTypes: ['default'],\n        version: '1.0.0',\n        description: 'Anthropic Claude models for text generation',\n        category: 'models',\n        icon: 'mdi:brain',\n        color: '#7c3aed',\n        inputs: [\n            {\n                id: 'prompt',\n                name: 'Prompt',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Input prompt for the model'\n            }\n        ],\n        outputs: [\n            {\n                id: 'response',\n                name: 'Response',\n                type: 'output',\n                dataType: 'string',\n                description: 'Model response'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                model: {\n                    type: 'string',\n                    title: 'Model',\n                    description: 'Anthropic model to use',\n                    default: 'claude-3-sonnet-20240229',\n                    enum: ['claude-3-sonnet-20240229', 'claude-3-opus-20240229', 'claude-3-haiku-20240307']\n                },\n                temperature: {\n                    type: 'number',\n                    title: 'Temperature',\n                    description: 'Creativity level (0-1)',\n                    default: 0.7,\n                    minimum: 0,\n                    maximum: 1\n                },\n                maxTokens: {\n                    type: 'number',\n                    title: 'Max Tokens',\n                    description: 'Maximum tokens to generate',\n                    default: 1000,\n                    minimum: 1,\n                    maximum: 4000\n                },\n                apiKey: {\n                    type: 'string',\n                    title: 'API Key',\n                    description: 'Anthropic API key',\n                    default: ''\n                }\n            }\n        },\n        tags: ['model', 'anthropic', 'claude']\n    },\n    {\n        id: 'sample-groq',\n        name: 'Groq',\n        type: 'default',\n        supportedTypes: ['default'],\n        version: '1.0.0',\n        description: 'Groq fast inference models',\n        category: 'models',\n        icon: 'mdi:lightning-bolt',\n        color: '#f97316',\n        inputs: [\n            {\n                id: 'prompt',\n                name: 'Prompt',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Input prompt for the model'\n            }\n        ],\n        outputs: [\n            {\n                id: 'response',\n                name: 'Response',\n                type: 'output',\n                dataType: 'string',\n                description: 'Model response'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                model: {\n                    type: 'string',\n                    title: 'Model',\n                    description: 'Groq model to use',\n                    default: 'llama-3.1-8b-instant',\n                    enum: ['llama-3.1-8b-instant', 'llama-3.1-70b-versatile', 'mixtral-8x7b-32768']\n                },\n                temperature: {\n                    type: 'number',\n                    title: 'Temperature',\n                    description: 'Creativity level (0-1)',\n                    default: 0.7,\n                    minimum: 0,\n                    maximum: 1\n                },\n                maxTokens: {\n                    type: 'number',\n                    title: 'Max Tokens',\n                    description: 'Maximum tokens to generate',\n                    default: 1000,\n                    minimum: 1,\n                    maximum: 4000\n                },\n                apiKey: {\n                    type: 'string',\n                    title: 'API Key',\n                    description: 'Groq API key',\n                    default: ''\n                }\n            }\n        },\n        tags: ['model', 'groq', 'fast', 'inference']\n    },\n    // ===== PROCESSING CATEGORY =====\n    {\n        id: 'sample-split-text',\n        name: 'Split Text',\n        type: 'default',\n        supportedTypes: ['default'],\n        version: '1.0.0',\n        description: 'Split text into chunks for processing',\n        category: 'processing',\n        icon: 'mdi:content-cut',\n        color: '#f59e0b',\n        inputs: [\n            {\n                id: 'text',\n                name: 'Text',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Text to split'\n            }\n        ],\n        outputs: [\n            {\n                id: 'chunks',\n                name: 'Chunks',\n                type: 'output',\n                dataType: 'string[]',\n                description: 'Split text chunks'\n            },\n            {\n                id: 'dataframe',\n                name: 'DataFrame',\n                type: 'output',\n                dataType: 'json',\n                description: 'Chunks as structured data'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                chunkSize: {\n                    type: 'number',\n                    title: 'Chunk Size',\n                    description: 'Size of each text chunk',\n                    default: 1000,\n                    minimum: 1,\n                    maximum: 10000\n                },\n                chunkOverlap: {\n                    type: 'number',\n                    title: 'Chunk Overlap',\n                    description: 'Overlap between chunks',\n                    default: 200,\n                    minimum: 0,\n                    maximum: 1000\n                },\n                separator: {\n                    type: 'string',\n                    title: 'Separator',\n                    description: 'Text separator for splitting',\n                    default: '\\n'\n                }\n            }\n        },\n        tags: ['processing', 'text', 'split', 'chunking']\n    },\n    {\n        id: 'sample-data-operations',\n        name: 'Data Operations',\n        version: '1.0.0',\n        description: 'Perform operations on Data objects',\n        category: 'processing',\n        icon: 'mdi:database-cog',\n        color: '#6366f1',\n        inputs: [\n            {\n                id: 'data',\n                name: 'Data',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Data to operate on'\n            }\n        ],\n        outputs: [\n            {\n                id: 'result',\n                name: 'Result',\n                type: 'output',\n                dataType: 'json',\n                description: 'Processed data result'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                operation: {\n                    type: 'string',\n                    title: 'Operation',\n                    description: 'Data operation to perform',\n                    default: 'select_keys',\n                    enum: ['select_keys', 'filter', 'sort', 'group']\n                },\n                keys: {\n                    type: 'array',\n                    title: 'Keys',\n                    description: 'Keys to select or filter by',\n                    default: []\n                },\n                filterKey: {\n                    type: 'string',\n                    title: 'Filter Key',\n                    description: 'Key to filter by',\n                    default: ''\n                },\n                filterValue: {\n                    type: 'string',\n                    title: 'Filter Value',\n                    description: 'Value to filter by',\n                    default: ''\n                }\n            }\n        },\n        tags: ['processing', 'data', 'operations']\n    },\n    {\n        id: 'sample-dataframe-operations',\n        name: 'DataFrame Operations',\n        version: '1.0.0',\n        description: 'Perform operations on DataFrames',\n        category: 'processing',\n        icon: 'mdi:table-cog',\n        color: '#84cc16',\n        inputs: [\n            {\n                id: 'dataframe',\n                name: 'DataFrame',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'DataFrame to operate on'\n            }\n        ],\n        outputs: [\n            {\n                id: 'result',\n                name: 'Result',\n                type: 'output',\n                dataType: 'json',\n                description: 'Processed DataFrame'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                operation: {\n                    type: 'string',\n                    title: 'Operation',\n                    description: 'DataFrame operation to perform',\n                    default: 'filter',\n                    enum: ['filter', 'sort', 'group', 'aggregate']\n                },\n                columnName: {\n                    type: 'string',\n                    title: 'Column Name',\n                    description: 'Column to operate on',\n                    default: ''\n                },\n                filterValue: {\n                    type: 'string',\n                    title: 'Filter Value',\n                    description: 'Value to filter by',\n                    default: ''\n                },\n                ascending: {\n                    type: 'boolean',\n                    title: 'Ascending',\n                    description: 'Sort in ascending order',\n                    default: true\n                }\n            }\n        },\n        tags: ['processing', 'dataframe', 'table', 'operations']\n    },\n    {\n        id: 'sample-regex-extractor',\n        name: 'Regex Extractor',\n        version: '1.0.0',\n        description: 'Extract patterns using regular expressions',\n        category: 'processing',\n        icon: 'mdi:regex',\n        color: '#ec4899',\n        inputs: [\n            {\n                id: 'text',\n                name: 'Text',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Text to extract from'\n            }\n        ],\n        outputs: [\n            {\n                id: 'matches',\n                name: 'Matches',\n                type: 'output',\n                dataType: 'string[]',\n                description: 'Extracted matches'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                pattern: {\n                    type: 'string',\n                    title: 'Pattern',\n                    description: 'Regular expression pattern',\n                    default: ''\n                },\n                flags: {\n                    type: 'string',\n                    title: 'Flags',\n                    description: 'Regex flags',\n                    default: 'g',\n                    enum: ['g', 'i', 'm', 'gi', 'gm', 'im', 'gim']\n                }\n            }\n        },\n        tags: ['processing', 'regex', 'extract', 'pattern']\n    },\n    {\n        id: 'sample-smart-function',\n        name: 'Smart Function',\n        version: '1.0.0',\n        description: 'Use models to generate data processing functions',\n        category: 'processing',\n        icon: 'mdi:function-variant',\n        color: '#06b6d4',\n        inputs: [\n            {\n                id: 'data',\n                name: 'Data',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Data to process'\n            },\n            {\n                id: 'model',\n                name: 'Model',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Model for function generation'\n            }\n        ],\n        outputs: [\n            {\n                id: 'filtered_data',\n                name: 'Filtered Data',\n                type: 'output',\n                dataType: 'json',\n                description: 'Processed data'\n            },\n            {\n                id: 'dataframe',\n                name: 'DataFrame',\n                type: 'output',\n                dataType: 'json',\n                description: 'Processed data as DataFrame'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                filter_instruction: {\n                    type: 'string',\n                    title: 'Filter Instruction',\n                    description: 'Instruction for filtering data',\n                    default: ''\n                },\n                sample_size: {\n                    type: 'number',\n                    title: 'Sample Size',\n                    description: 'Number of samples to process',\n                    default: 1000,\n                    minimum: 1,\n                    maximum: 10000\n                },\n                max_size: {\n                    type: 'number',\n                    title: 'Max Size',\n                    description: 'Maximum size of filtered data',\n                    default: 10000,\n                    minimum: 1,\n                    maximum: 100000\n                }\n            }\n        },\n        tags: ['processing', 'smart', 'function', 'model']\n    },\n    // ===== LOGIC CATEGORY =====\n    {\n        id: 'sample-if-else',\n        name: 'If-Else',\n        version: '1.0.0',\n        description: 'Conditional routing based on text comparison',\n        category: 'logic',\n        icon: 'mdi:git-branch',\n        color: '#06b6d4',\n        inputs: [\n            {\n                id: 'input_text',\n                name: 'Input Text',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Text to evaluate'\n            },\n            {\n                id: 'match_text',\n                name: 'Match Text',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Text to compare against'\n            }\n        ],\n        outputs: [\n            {\n                id: 'true_result',\n                name: 'True',\n                type: 'output',\n                dataType: 'string',\n                description: 'Output when condition is true'\n            },\n            {\n                id: 'false_result',\n                name: 'False',\n                type: 'output',\n                dataType: 'string',\n                description: 'Output when condition is false'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                operator: {\n                    type: 'string',\n                    title: 'Operator',\n                    description: 'Comparison operator',\n                    default: 'equals',\n                    enum: ['equals', 'not_equals', 'greater_than', 'less_than', 'contains']\n                },\n                caseSensitive: {\n                    type: 'boolean',\n                    title: 'Case Sensitive',\n                    description: 'Whether comparison is case sensitive',\n                    default: false\n                }\n            }\n        },\n        tags: ['conditional', 'logic', 'routing', 'if-else']\n    },\n    {\n        id: 'sample-loop',\n        name: 'Loop',\n        version: '1.0.0',\n        description: 'Iterate over data items',\n        category: 'logic',\n        icon: 'mdi:loop',\n        color: '#8b5cf6',\n        inputs: [\n            {\n                id: 'data',\n                name: 'Data',\n                type: 'input',\n                dataType: 'json[]',\n                required: true,\n                description: 'Data to iterate over'\n            }\n        ],\n        outputs: [\n            {\n                id: 'item',\n                name: 'Item',\n                type: 'output',\n                dataType: 'json',\n                description: 'Current item in iteration'\n            },\n            {\n                id: 'done',\n                name: 'Done',\n                type: 'output',\n                dataType: 'json',\n                description: 'Aggregated results when complete'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                maxIterations: {\n                    type: 'number',\n                    title: 'Max Iterations',\n                    description: 'Maximum number of loop iterations',\n                    default: 100,\n                    minimum: 1,\n                    maximum: 1000\n                }\n            }\n        },\n        tags: ['conditional', 'logic', 'loop', 'iteration']\n    },\n    // ===== DATA CATEGORY =====\n    {\n        id: 'sample-data-to-dataframe',\n        name: 'Data to DataFrame',\n        version: '1.0.0',\n        description: 'Convert Data objects to DataFrame',\n        category: 'data',\n        icon: 'mdi:table-plus',\n        color: '#10b981',\n        inputs: [\n            {\n                id: 'data_list',\n                name: 'Data List',\n                type: 'input',\n                dataType: 'json[]',\n                required: true,\n                description: 'List of Data objects to convert'\n            }\n        ],\n        outputs: [\n            {\n                id: 'dataframe',\n                name: 'DataFrame',\n                type: 'output',\n                dataType: 'json',\n                description: 'Converted DataFrame'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                includeText: {\n                    type: 'boolean',\n                    title: 'Include Text',\n                    description: 'Include text in DataFrame conversion',\n                    default: true\n                }\n            }\n        },\n        tags: ['data', 'dataframe', 'convert', 'table']\n    },\n    {\n        id: 'sample-message-to-data',\n        name: 'Message to Data',\n        version: '1.0.0',\n        description: 'Convert Message objects to Data objects',\n        category: 'data',\n        icon: 'mdi:message-arrow-right',\n        color: '#f59e0b',\n        inputs: [\n            {\n                id: 'message',\n                name: 'Message',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Message to convert'\n            }\n        ],\n        outputs: [\n            {\n                id: 'data',\n                name: 'Data',\n                type: 'output',\n                dataType: 'json',\n                description: 'Converted Data object'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                format: {\n                    type: 'string',\n                    title: 'Format',\n                    description: 'Input data format',\n                    default: 'auto',\n                    enum: ['auto', 'json', 'csv', 'xml']\n                }\n            }\n        },\n        tags: ['data', 'message', 'convert']\n    },\n    {\n        id: 'sample-save-to-file',\n        name: 'Save to File',\n        version: '1.0.0',\n        description: 'Save data to various file formats',\n        category: 'data',\n        icon: 'mdi:content-save',\n        color: '#ef4444',\n        inputs: [\n            {\n                id: 'data',\n                name: 'Data',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Data to save'\n            }\n        ],\n        outputs: [\n            {\n                id: 'confirmation',\n                name: 'Confirmation',\n                type: 'output',\n                dataType: 'string',\n                description: 'Save confirmation message'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                fileFormat: {\n                    type: 'string',\n                    title: 'File Format',\n                    description: 'Output file format',\n                    default: 'json',\n                    enum: ['json', 'csv', 'txt', 'xml']\n                },\n                filePath: {\n                    type: 'string',\n                    title: 'File Path',\n                    description: 'Output file path',\n                    default: './output/data.json'\n                }\n            }\n        },\n        tags: ['data', 'save', 'file', 'export']\n    },\n    // ===== TOOLS CATEGORY =====\n    {\n        id: 'sample-http-request',\n        name: 'HTTP Request',\n        type: 'tool',\n        supportedTypes: ['tool', 'default'],\n        version: '1.0.0',\n        description: 'Advanced HTTP client with full request/response handling, similar to n8n',\n        category: 'tools',\n        icon: 'mdi:web',\n        color: '#3b82f6',\n        inputs: [\n            {\n                id: 'url',\n                name: 'URL',\n                type: 'input',\n                dataType: 'string',\n                required: false,\n                description: 'Request URL (can be set in config or via input)'\n            },\n            {\n                id: 'headers',\n                name: 'Headers',\n                type: 'input',\n                dataType: 'json',\n                required: false,\n                description: 'Additional HTTP headers as JSON object'\n            },\n            {\n                id: 'body',\n                name: 'Body',\n                type: 'input',\n                dataType: 'mixed',\n                required: false,\n                description: 'Request body (JSON, string, or form data)'\n            },\n            {\n                id: 'query_params',\n                name: 'Query Parameters',\n                type: 'input',\n                dataType: 'json',\n                required: false,\n                description: 'URL query parameters as JSON object'\n            }\n        ],\n        outputs: [\n            {\n                id: 'response',\n                name: 'Response',\n                type: 'output',\n                dataType: 'json',\n                description: 'Complete HTTP response object'\n            },\n            {\n                id: 'body',\n                name: 'Body',\n                type: 'output',\n                dataType: 'mixed',\n                description: 'Response body (parsed JSON or raw text)'\n            },\n            {\n                id: 'headers',\n                name: 'Headers',\n                type: 'output',\n                dataType: 'json',\n                description: 'Response headers as JSON object'\n            },\n            {\n                id: 'status_code',\n                name: 'Status Code',\n                type: 'output',\n                dataType: 'number',\n                description: 'HTTP status code'\n            },\n            {\n                id: 'status_text',\n                name: 'Status Text',\n                type: 'output',\n                dataType: 'string',\n                description: 'HTTP status text'\n            },\n            {\n                id: 'tool',\n                name: 'Tool Interface',\n                type: 'output',\n                dataType: 'tool',\n                description: 'Tool interface for agent connections - provides tool metadata and callable interface'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'tool',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                method: {\n                    type: 'string',\n                    title: 'HTTP Method',\n                    description: 'HTTP request method',\n                    default: 'GET',\n                    enum: ['GET', 'POST', 'PUT', 'PATCH', 'DELETE', 'HEAD', 'OPTIONS']\n                },\n                url: {\n                    type: 'string',\n                    title: 'URL',\n                    description: 'Request URL (overridden by input if provided)',\n                    default: 'https://api.example.com/endpoint'\n                },\n                authentication: {\n                    type: 'string',\n                    title: 'Authentication',\n                    description: 'Authentication method',\n                    default: 'none',\n                    enum: ['none', 'basic', 'bearer', 'api_key', 'oauth2']\n                },\n                auth_username: {\n                    type: 'string',\n                    title: 'Username',\n                    description: 'Username for basic authentication',\n                    default: ''\n                },\n                auth_password: {\n                    type: 'string',\n                    title: 'Password',\n                    description: 'Password for basic authentication',\n                    default: '',\n                    format: 'password'\n                },\n                auth_token: {\n                    type: 'string',\n                    title: 'Bearer Token',\n                    description: 'Bearer token for authentication',\n                    default: '',\n                    format: 'password'\n                },\n                api_key_header: {\n                    type: 'string',\n                    title: 'API Key Header',\n                    description: 'Header name for API key authentication',\n                    default: 'X-API-Key'\n                },\n                api_key_value: {\n                    type: 'string',\n                    title: 'API Key Value',\n                    description: 'API key value',\n                    default: '',\n                    format: 'password'\n                },\n                content_type: {\n                    type: 'string',\n                    title: 'Content Type',\n                    description: 'Request content type',\n                    default: 'application/json',\n                    enum: [\n                        'application/json',\n                        'application/x-www-form-urlencoded',\n                        'multipart/form-data',\n                        'text/plain',\n                        'text/xml',\n                        'application/xml'\n                    ]\n                },\n                timeout: {\n                    type: 'integer',\n                    title: 'Timeout (seconds)',\n                    description: 'Request timeout in seconds',\n                    default: 30,\n                    minimum: 1,\n                    maximum: 300\n                },\n                follow_redirects: {\n                    type: 'boolean',\n                    title: 'Follow Redirects',\n                    description: 'Automatically follow HTTP redirects',\n                    default: true\n                },\n                ssl_verify: {\n                    type: 'boolean',\n                    title: 'Verify SSL',\n                    description: 'Verify SSL certificates',\n                    default: true\n                },\n                retry_attempts: {\n                    type: 'integer',\n                    title: 'Retry Attempts',\n                    description: 'Number of retry attempts on failure',\n                    default: 0,\n                    minimum: 0,\n                    maximum: 5\n                },\n                retry_delay: {\n                    type: 'integer',\n                    title: 'Retry Delay (ms)',\n                    description: 'Delay between retry attempts in milliseconds',\n                    default: 1000,\n                    minimum: 100,\n                    maximum: 10000\n                },\n                response_format: {\n                    type: 'string',\n                    title: 'Response Format',\n                    description: 'How to parse the response body',\n                    default: 'auto',\n                    enum: ['auto', 'json', 'text', 'binary', 'xml']\n                },\n                include_response_headers: {\n                    type: 'boolean',\n                    title: 'Include Response Headers',\n                    description: 'Include response headers in output',\n                    default: true\n                },\n                custom_headers: {\n                    type: 'string',\n                    title: 'Custom Headers (JSON)',\n                    description: 'Custom headers as JSON string',\n                    default: '{}',\n                    format: 'multiline'\n                },\n                user_agent: {\n                    type: 'string',\n                    title: 'User Agent',\n                    description: 'Custom User-Agent header',\n                    default: 'FlowDrop-HTTP-Client/1.0'\n                },\n                proxy_url: {\n                    type: 'string',\n                    title: 'Proxy URL',\n                    description: 'HTTP proxy URL (optional)',\n                    default: ''\n                },\n                ignore_ssl_issues: {\n                    type: 'boolean',\n                    title: 'Ignore SSL Issues',\n                    description: 'Ignore SSL certificate errors (not recommended for production)',\n                    default: false\n                }\n            }\n        },\n        tags: ['tools', 'http', 'api', 'request', 'n8n', 'automation', 'integration']\n    },\n    {\n        id: 'sample-json',\n        name: 'JSON',\n        type: 'tool',\n        supportedTypes: ['tool', 'default'],\n        version: '1.0.0',\n        description: \"Parse, manipulate, and transform JSON data like n8n's JSON node\",\n        category: 'tools',\n        icon: 'mdi:code-json',\n        color: '#f59e0b',\n        inputs: [\n            {\n                id: 'json_input',\n                name: 'JSON Input',\n                type: 'input',\n                dataType: 'mixed',\n                required: false,\n                description: 'JSON data to process'\n            }\n        ],\n        outputs: [\n            {\n                id: 'json_output',\n                name: 'JSON Output',\n                type: 'output',\n                dataType: 'json',\n                description: 'Processed JSON data'\n            },\n            {\n                id: 'tool',\n                name: 'Tool Interface',\n                type: 'output',\n                dataType: 'tool',\n                description: 'Tool interface for agent connections - provides tool metadata and callable interface'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'tool',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                operation: {\n                    type: 'string',\n                    title: 'Operation',\n                    description: 'JSON operation to perform',\n                    default: 'parse',\n                    enum: ['parse', 'stringify', 'extract', 'merge', 'filter', 'transform', 'validate']\n                },\n                json_path: {\n                    type: 'string',\n                    title: 'JSON Path',\n                    description: 'JSONPath expression for extraction (e.g., $.data.items[*].name)',\n                    default: '$'\n                },\n                merge_strategy: {\n                    type: 'string',\n                    title: 'Merge Strategy',\n                    description: 'How to merge JSON objects',\n                    default: 'deep',\n                    enum: ['shallow', 'deep', 'overwrite']\n                },\n                filter_expression: {\n                    type: 'string',\n                    title: 'Filter Expression',\n                    description: 'JavaScript expression for filtering (e.g., item.price > 100)',\n                    default: ''\n                },\n                transform_expression: {\n                    type: 'string',\n                    title: 'Transform Expression',\n                    description: 'JavaScript expression for transformation',\n                    default: '',\n                    format: 'multiline'\n                },\n                pretty_print: {\n                    type: 'boolean',\n                    title: 'Pretty Print',\n                    description: 'Format JSON output with indentation',\n                    default: true\n                },\n                validate_schema: {\n                    type: 'string',\n                    title: 'JSON Schema',\n                    description: 'JSON Schema for validation (optional)',\n                    default: '',\n                    format: 'multiline'\n                }\n            }\n        },\n        tags: ['tools', 'json', 'data', 'transform', 'n8n', 'parse']\n    },\n    {\n        id: 'sample-set',\n        name: 'Set',\n        type: 'tool',\n        supportedTypes: ['tool', 'default'],\n        version: '1.0.0',\n        description: \"Set and manipulate data values like n8n's Set node\",\n        category: 'tools',\n        icon: 'mdi:variable',\n        color: '#10b981',\n        inputs: [\n            {\n                id: 'input_data',\n                name: 'Input Data',\n                type: 'input',\n                dataType: 'mixed',\n                required: false,\n                description: 'Input data to process'\n            }\n        ],\n        outputs: [\n            {\n                id: 'output_data',\n                name: 'Output Data',\n                type: 'output',\n                dataType: 'json',\n                description: 'Processed output data'\n            },\n            {\n                id: 'tool',\n                name: 'Tool Interface',\n                type: 'output',\n                dataType: 'tool',\n                description: 'Tool interface for agent connections - provides tool metadata and callable interface'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'tool',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                operation: {\n                    type: 'string',\n                    title: 'Operation',\n                    description: 'Set operation to perform',\n                    default: 'set',\n                    enum: ['set', 'append', 'prepend', 'remove', 'rename', 'copy', 'move']\n                },\n                keep_only_set: {\n                    type: 'boolean',\n                    title: 'Keep Only Set Fields',\n                    description: 'Only keep the fields that are being set',\n                    default: false\n                },\n                values: {\n                    type: 'string',\n                    title: 'Values (JSON)',\n                    description: 'Values to set as JSON object',\n                    default: '{\\n  \"key1\": \"value1\",\\n  \"key2\": \"{{ $json.input_field }}\",\\n  \"timestamp\": \"{{ new Date().toISOString() }}\"\\n}',\n                    format: 'multiline'\n                },\n                include_binary_data: {\n                    type: 'boolean',\n                    title: 'Include Binary Data',\n                    description: 'Include binary data in output',\n                    default: false\n                },\n                dot_notation: {\n                    type: 'boolean',\n                    title: 'Use Dot Notation',\n                    description: 'Support dot notation for nested properties (e.g., user.name)',\n                    default: true\n                }\n            }\n        },\n        tags: ['tools', 'set', 'data', 'transform', 'n8n', 'variables']\n    },\n    {\n        id: 'sample-calculator',\n        name: 'Calculator',\n        type: 'tool',\n        supportedTypes: ['tool', 'default'],\n        version: '1.0.0',\n        description: 'Perform mathematical calculations',\n        category: 'tools',\n        icon: 'mdi:calculator',\n        color: '#6366f1',\n        inputs: [\n            {\n                id: 'expression',\n                name: 'Expression',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Mathematical expression to evaluate'\n            }\n        ],\n        outputs: [\n            {\n                id: 'result',\n                name: 'Result',\n                type: 'output',\n                dataType: 'number',\n                description: 'Calculation result'\n            },\n            {\n                id: 'tool',\n                name: 'Tool Interface',\n                type: 'output',\n                dataType: 'tool',\n                description: 'Tool interface for agent connections - provides tool metadata and callable interface'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'tool',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                operation: {\n                    type: 'string',\n                    title: 'Operation',\n                    description: 'Mathematical operation to perform',\n                    default: 'add',\n                    enum: [\n                        'add',\n                        'subtract',\n                        'multiply',\n                        'divide',\n                        'power',\n                        'sqrt',\n                        'average',\n                        'min',\n                        'max',\n                        'median',\n                        'mode'\n                    ]\n                },\n                precision: {\n                    type: 'integer',\n                    title: 'Precision',\n                    description: 'Number of decimal places',\n                    default: 2,\n                    minimum: 0,\n                    maximum: 10\n                }\n            }\n        },\n        tags: ['tools', 'calculator', 'math', 'compute']\n    },\n    {\n        id: 'sample-date-time',\n        name: 'Date & Time',\n        type: 'tool',\n        supportedTypes: ['tool', 'default'],\n        version: '1.0.0',\n        description: 'Handle date and time operations',\n        category: 'tools',\n        icon: 'mdi:calendar-clock',\n        color: '#84cc16',\n        inputs: [\n            {\n                id: 'date',\n                name: 'Date',\n                type: 'input',\n                dataType: 'string',\n                required: false,\n                description: 'Input date string'\n            }\n        ],\n        outputs: [\n            {\n                id: 'formatted_date',\n                name: 'Formatted Date',\n                type: 'output',\n                dataType: 'string',\n                description: 'Formatted date string'\n            },\n            {\n                id: 'timestamp',\n                name: 'Timestamp',\n                type: 'output',\n                dataType: 'number',\n                description: 'Unix timestamp'\n            },\n            {\n                id: 'tool',\n                name: 'Tool Interface',\n                type: 'output',\n                dataType: 'tool',\n                description: 'Tool interface for agent connections - provides tool metadata and callable interface'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'tool',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                format: {\n                    type: 'string',\n                    title: 'Format',\n                    description: 'Date/time format',\n                    default: 'YYYY-MM-DD'\n                },\n                timezone: {\n                    type: 'string',\n                    title: 'Timezone',\n                    description: 'Timezone for date operations',\n                    default: 'UTC'\n                }\n            }\n        },\n        tags: ['tools', 'date', 'time', 'format']\n    },\n    {\n        id: 'sample-notes',\n        name: 'Notes',\n        type: 'note',\n        supportedTypes: ['note'],\n        version: '1.0.0',\n        description: 'Add documentation and comments to your workflow with Markdown support',\n        category: 'tools',\n        icon: 'mdi:note-text',\n        color: '#fbbf24',\n        inputs: [],\n        outputs: [],\n        configSchema: {\n            type: 'object',\n            properties: {\n                content: {\n                    type: 'string',\n                    title: 'Note Content',\n                    description: 'Documentation or comment text (supports Markdown)',\n                    default: '# Workflow Notes\\n\\nAdd your documentation here using **Markdown** formatting.\\n\\n## Features\\n- Supports **bold** and *italic* text\\n- Create lists and code blocks\\n- Add links and more!'\n                },\n                noteType: {\n                    type: 'string',\n                    title: 'Note Type',\n                    description: 'Visual style and color of the note',\n                    default: 'info',\n                    enum: ['info', 'warning', 'success', 'error', 'note']\n                }\n            }\n        },\n        tags: ['tools', 'notes', 'documentation', 'comments', 'markdown']\n    },\n    {\n        id: 'sample-simple-node',\n        name: 'Simple Node',\n        type: 'tool',\n        supportedTypes: ['tool', 'default'],\n        version: '1.0.0',\n        description: 'A simple node with optional input and output ports',\n        category: 'tools',\n        icon: 'mdi:square',\n        color: '#6366f1',\n        inputs: [\n            {\n                id: 'input',\n                name: 'Input',\n                type: 'input',\n                dataType: 'mixed',\n                required: false,\n                description: 'Optional input data'\n            }\n        ],\n        outputs: [\n            {\n                id: 'output',\n                name: 'Output',\n                type: 'output',\n                dataType: 'mixed',\n                description: 'Optional output data'\n            },\n            {\n                id: 'tool',\n                name: 'Tool Interface',\n                type: 'output',\n                dataType: 'tool',\n                description: 'Tool interface for agent connections - provides tool metadata and callable interface'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'tool',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool (specialized for agent tools)', 'Default (standard workflow node)']\n                },\n                icon: {\n                    type: 'string',\n                    title: 'Icon',\n                    description: 'Icon to display in the node (Iconify icon name)',\n                    default: 'mdi:square'\n                },\n                color: {\n                    type: 'string',\n                    title: 'Color',\n                    description: 'Background color of the node',\n                    default: '#6366f1'\n                },\n                layout: {\n                    type: 'string',\n                    title: 'Layout',\n                    description: 'Layout style of the simple node',\n                    default: 'normal',\n                    enum: ['compact', 'normal']\n                },\n                label: {\n                    type: 'string',\n                    title: 'Label',\n                    description: 'Custom label for the node',\n                    default: 'Simple Node'\n                },\n                description: {\n                    type: 'string',\n                    title: 'Description',\n                    description: 'Description of what this simple node does',\n                    default: '',\n                    format: 'multiline'\n                }\n            }\n        },\n        tags: ['tools', 'simple', 'custom', 'visual', 'node']\n    },\n    {\n        id: 'sample-trigger-action',\n        name: 'Trigger Action',\n        type: 'simple',\n        supportedTypes: ['simple', 'square', 'default'],\n        version: '1.0.0',\n        description: 'An action that can be triggered and also processes data',\n        category: 'tools',\n        icon: 'mdi:lightning-bolt',\n        color: '#f59e0b',\n        inputs: [\n            {\n                id: 'trigger',\n                name: 'Trigger',\n                type: 'input',\n                dataType: 'trigger',\n                required: false,\n                description: 'Control flow trigger to execute this action'\n            },\n            {\n                id: 'data',\n                name: 'Data',\n                type: 'input',\n                dataType: 'string',\n                required: false,\n                description: 'Optional data input to process'\n            }\n        ],\n        outputs: [\n            {\n                id: 'trigger',\n                name: 'Trigger',\n                type: 'output',\n                dataType: 'trigger',\n                description: 'Control flow trigger after execution'\n            },\n            {\n                id: 'result',\n                name: 'Result',\n                type: 'output',\n                dataType: 'string',\n                description: 'Processed data output'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'simple',\n                    enum: ['simple', 'square', 'default'],\n                    enumNames: [\n                        'Simple (compact layout)',\n                        'Square (square layout)',\n                        'Default (standard workflow node)'\n                    ]\n                },\n                action: {\n                    type: 'string',\n                    title: 'Action',\n                    description: 'The action to perform when triggered',\n                    default: 'Process data'\n                }\n            }\n        },\n        tags: ['trigger', 'action', 'control-flow']\n    },\n    // ===== EMBEDDINGS CATEGORY =====\n    {\n        id: 'sample-openai-embeddings',\n        name: 'OpenAI Embeddings',\n        version: '1.0.0',\n        description: 'Generate embeddings using OpenAI models',\n        category: 'embeddings',\n        icon: 'mdi:vector-point',\n        color: '#10a37f',\n        inputs: [\n            {\n                id: 'text',\n                name: 'Text',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Text to embed'\n            }\n        ],\n        outputs: [\n            {\n                id: 'embeddings',\n                name: 'Embeddings',\n                type: 'output',\n                dataType: 'number[]',\n                description: 'Generated embeddings'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                model: {\n                    type: 'string',\n                    title: 'Model',\n                    description: 'OpenAI embedding model',\n                    default: 'text-embedding-3-small',\n                    enum: ['text-embedding-3-small', 'text-embedding-3-large']\n                },\n                apiKey: {\n                    type: 'string',\n                    title: 'API Key',\n                    description: 'OpenAI API key',\n                    default: ''\n                }\n            }\n        },\n        tags: ['embeddings', 'openai', 'vector']\n    },\n    {\n        id: 'sample-huggingface-embeddings',\n        name: 'HuggingFace Embeddings',\n        version: '1.0.0',\n        description: 'Generate embeddings using HuggingFace models',\n        category: 'embeddings',\n        icon: 'mdi:vector-square',\n        color: '#f59e0b',\n        inputs: [\n            {\n                id: 'text',\n                name: 'Text',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Text to embed'\n            }\n        ],\n        outputs: [\n            {\n                id: 'embeddings',\n                name: 'Embeddings',\n                type: 'output',\n                dataType: 'number[]',\n                description: 'Generated embeddings'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                model: {\n                    type: 'string',\n                    title: 'Model',\n                    description: 'HuggingFace model name',\n                    default: 'sentence-transformers/all-MiniLM-L6-v2'\n                },\n                apiToken: {\n                    type: 'string',\n                    title: 'API Token',\n                    description: 'HuggingFace API token',\n                    default: ''\n                }\n            }\n        },\n        tags: ['embeddings', 'huggingface', 'vector']\n    },\n    // ===== MEMORIES CATEGORY =====\n    {\n        id: 'sample-conversation-buffer',\n        name: 'Conversation Buffer',\n        version: '1.0.0',\n        description: 'Store conversation history',\n        category: 'memories',\n        icon: 'mdi:chat-history',\n        color: '#8b5cf6',\n        inputs: [\n            {\n                id: 'message',\n                name: 'Message',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Message to add to buffer'\n            }\n        ],\n        outputs: [\n            {\n                id: 'history',\n                name: 'History',\n                type: 'output',\n                dataType: 'string[]',\n                description: 'Conversation history'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                maxTokens: {\n                    type: 'number',\n                    title: 'Max Tokens',\n                    description: 'Maximum tokens in buffer',\n                    default: 2000,\n                    minimum: 100,\n                    maximum: 10000\n                },\n                returnMessages: {\n                    type: 'boolean',\n                    title: 'Return Messages',\n                    description: 'Return messages in response',\n                    default: true\n                }\n            }\n        },\n        tags: ['memory', 'conversation', 'history', 'buffer']\n    },\n    // ===== AGENTS CATEGORY =====\n    {\n        id: 'sample-simple-agent',\n        name: 'Simple Agent',\n        version: '1.0.0',\n        description: 'Agent for tool orchestration',\n        category: 'agents',\n        icon: 'mdi:account-cog',\n        color: '#06b6d4',\n        type: 'default',\n        supportedTypes: ['default', 'tool'],\n        inputs: [\n            {\n                id: 'message',\n                name: 'Message',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'User message for agent'\n            },\n            {\n                id: 'tools',\n                name: 'Tools',\n                type: 'input',\n                dataType: 'tool',\n                required: false,\n                description: 'Tool interfaces available to agent - connect to tool output ports'\n            }\n        ],\n        outputs: [\n            {\n                id: 'response',\n                name: 'Response',\n                type: 'output',\n                dataType: 'string',\n                description: 'Agent response'\n            },\n            {\n                id: 'tools',\n                name: 'Tools',\n                type: 'input',\n                dataType: 'tool',\n                required: false,\n                description: 'Tool interfaces available to agent - connect to tool output ports'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'default',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                model: {\n                    type: 'string',\n                    title: 'Model',\n                    description: 'Chat model to use',\n                    default: 'gpt-4o-mini',\n                    enum: ['gpt-4o-mini', 'gpt-5-chat-latest', 'claude-3-sonnet']\n                },\n                temperature: {\n                    type: 'number',\n                    title: 'Temperature',\n                    description: 'Creativity level (0-1)',\n                    default: 0.7,\n                    minimum: 0,\n                    maximum: 1\n                },\n                maxIterations: {\n                    type: 'number',\n                    title: 'Max Iterations',\n                    description: 'Maximum agent iterations',\n                    default: 5,\n                    minimum: 1,\n                    maximum: 20\n                }\n            }\n        },\n        tags: ['agent', 'orchestration', 'tools']\n    },\n    // ===== VECTOR STORES CATEGORY =====\n    {\n        id: 'sample-chroma-vector-store',\n        name: 'Chroma Vector Store',\n        version: '1.0.0',\n        description: 'Store and retrieve vectors using Chroma',\n        category: 'vector stores',\n        icon: 'mdi:database',\n        color: '#84cc16',\n        inputs: [\n            {\n                id: 'embeddings',\n                name: 'Embeddings',\n                type: 'input',\n                dataType: 'number[]',\n                required: true,\n                description: 'Embeddings to store'\n            },\n            {\n                id: 'query',\n                name: 'Query',\n                type: 'input',\n                dataType: 'string',\n                required: false,\n                description: 'Query for similarity search'\n            }\n        ],\n        outputs: [\n            {\n                id: 'results',\n                name: 'Results',\n                type: 'output',\n                dataType: 'json[]',\n                description: 'Search results'\n            },\n            {\n                id: 'metadata',\n                name: 'Metadata',\n                type: 'output',\n                dataType: 'json',\n                description: 'Vector store metadata'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                collectionName: {\n                    type: 'string',\n                    title: 'Collection Name',\n                    description: 'Chroma collection name',\n                    default: 'default'\n                },\n                persistDirectory: {\n                    type: 'string',\n                    title: 'Persist Directory',\n                    description: 'Directory to persist data',\n                    default: './chroma_db'\n                },\n                distanceFunction: {\n                    type: 'string',\n                    title: 'Distance Function',\n                    description: 'Distance function for similarity',\n                    default: 'cosine',\n                    enum: ['cosine', 'euclidean', 'manhattan']\n                }\n            }\n        },\n        tags: ['integration', 'vector-store', 'chroma', 'embeddings']\n    },\n    {\n        id: 'sample-pinecone-vector-store',\n        name: 'Pinecone Vector Store',\n        version: '1.0.0',\n        description: 'Store and retrieve vectors using Pinecone',\n        category: 'vector stores',\n        icon: 'mdi:database-search',\n        color: '#f59e0b',\n        inputs: [\n            {\n                id: 'embeddings',\n                name: 'Embeddings',\n                type: 'input',\n                dataType: 'number[]',\n                required: true,\n                description: 'Embeddings to store'\n            },\n            {\n                id: 'query',\n                name: 'Query',\n                type: 'input',\n                dataType: 'string',\n                required: false,\n                description: 'Query for similarity search'\n            }\n        ],\n        outputs: [\n            {\n                id: 'results',\n                name: 'Results',\n                type: 'output',\n                dataType: 'json[]',\n                description: 'Search results'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                indexName: {\n                    type: 'string',\n                    title: 'Index Name',\n                    description: 'Pinecone index name',\n                    default: 'default'\n                },\n                apiKey: {\n                    type: 'string',\n                    title: 'API Key',\n                    description: 'Pinecone API key',\n                    default: ''\n                },\n                environment: {\n                    type: 'string',\n                    title: 'Environment',\n                    description: 'Pinecone environment',\n                    default: 'us-west1-gcp'\n                }\n            }\n        },\n        tags: ['integration', 'vector-store', 'pinecone', 'embeddings']\n    },\n    // ===== DEMO: AI-POWERED CONTENT MANAGEMENT NODES =====\n    {\n        id: 'demo-chat-input',\n        name: 'Chat Input',\n        type: 'simple',\n        supportedTypes: ['simple', 'default'],\n        version: '1.0.0',\n        description: 'Accept chat instructions from content managers about what content changes to make',\n        category: 'inputs',\n        icon: 'mdi:message-text-outline',\n        color: '#10b981',\n        inputs: [],\n        outputs: [\n            {\n                id: 'user_message',\n                name: 'User Message',\n                type: 'output',\n                dataType: 'string',\n                description: \"Content manager's instructions for content review\"\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'simple',\n                    enum: ['simple', 'default'],\n                    enumNames: ['Simple (compact layout)', 'Default (standard workflow node)']\n                },\n                placeholder: {\n                    type: 'string',\n                    title: 'Placeholder Text',\n                    description: 'Placeholder text shown in the chat input',\n                    default: 'Enter your content management instructions...'\n                },\n                welcomeMessage: {\n                    type: 'string',\n                    title: 'Welcome Message',\n                    description: 'Initial message shown to content managers',\n                    default: 'Hi! I can help you review and update your Drupal content. What would you like me to do?'\n                },\n                maxLength: {\n                    type: 'number',\n                    title: 'Maximum Message Length',\n                    description: 'Maximum characters allowed in a single message',\n                    default: 1000,\n                    minimum: 100,\n                    maximum: 5000\n                }\n            }\n        },\n        tags: ['demo', 'content-management', 'input', 'chat', 'drupal']\n    },\n    {\n        id: 'demo-drupal-search-rag',\n        name: 'Drupal Search API RAG',\n        type: 'tool',\n        supportedTypes: ['tool', 'default'],\n        version: '1.0.0',\n        description: 'Search and retrieve content from Drupal using Search API with AI-powered relevance',\n        category: 'tools',\n        icon: 'mdi:database-search-outline',\n        color: '#0678be',\n        inputs: [\n            {\n                id: 'search_query',\n                name: 'Search Query',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Search terms to find relevant content'\n            },\n            {\n                id: 'content_types',\n                name: 'Content Types',\n                type: 'input',\n                dataType: 'json',\n                required: false,\n                description: \"Array of content types to search (e.g., ['article', 'page', 'blog'])\"\n            }\n        ],\n        outputs: [\n            {\n                id: 'content_results',\n                name: 'Content Results',\n                type: 'output',\n                dataType: 'json',\n                description: 'Array of matching content items with metadata'\n            },\n            {\n                id: 'search_metadata',\n                name: 'Search Metadata',\n                type: 'output',\n                dataType: 'json',\n                description: 'Search statistics and relevance information'\n            },\n            {\n                id: 'tool',\n                name: 'Tool Interface',\n                type: 'output',\n                dataType: 'tool',\n                description: 'Tool interface for agent connections - provides tool metadata and callable interface'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'tool',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                searchIndex: {\n                    type: 'string',\n                    title: 'Search API Index',\n                    description: 'Name of the Drupal Search API index to query',\n                    default: 'content_index'\n                },\n                maxResults: {\n                    type: 'number',\n                    title: 'Maximum Results',\n                    description: 'Maximum number of content items to return',\n                    default: 10,\n                    minimum: 1,\n                    maximum: 100\n                },\n                includeFields: {\n                    type: 'array',\n                    title: 'Include Fields',\n                    description: 'Content fields to include in results',\n                    default: ['title', 'body', 'field_tags', 'created', 'changed']\n                },\n                useAiRanking: {\n                    type: 'boolean',\n                    title: 'Use AI-Powered Ranking',\n                    description: 'Use AI to improve search result relevance',\n                    default: true\n                },\n                contentStatus: {\n                    type: 'string',\n                    title: 'Content Status',\n                    description: 'Filter by publication status',\n                    default: 'published',\n                    enum: ['published', 'unpublished', 'all']\n                }\n            }\n        },\n        tags: ['demo', 'content-management', 'drupal', 'search', 'rag', 'ai']\n    },\n    {\n        id: 'ai_content_analyzer',\n        name: 'AI Content Analyzer',\n        type: 'default',\n        supportedTypes: ['default', 'tool'],\n        version: '1.0.0',\n        description: 'AI-powered content analysis for smart text processing and context understanding',\n        category: 'ai',\n        icon: 'mdi:text-search',\n        color: '#7c3aed',\n        inputs: [\n            {\n                id: 'content_to_analyze',\n                name: 'Content to Analyze',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Text content or array of content items for AI analysis'\n            }\n        ],\n        outputs: [\n            {\n                id: 'analyzed_content',\n                name: 'Analyzed Content',\n                type: 'output',\n                dataType: 'array',\n                description: 'Content items with AI analysis results'\n            },\n            {\n                id: 'total_analyzed',\n                name: 'Total Analyzed',\n                type: 'output',\n                dataType: 'number',\n                description: 'Total number of items analyzed'\n            },\n            {\n                id: 'total_replacements',\n                name: 'Total Replacements',\n                type: 'output',\n                dataType: 'number',\n                description: 'Total number of replacements made'\n            },\n            {\n                id: 'analysis_mode',\n                name: 'Analysis Mode',\n                type: 'output',\n                dataType: 'string',\n                description: 'The analysis mode used'\n            },\n            {\n                id: 'confidence_threshold',\n                name: 'Confidence Threshold',\n                type: 'output',\n                dataType: 'number',\n                description: 'Confidence threshold used for replacements'\n            },\n            {\n                id: 'analyzed_at',\n                name: 'Analyzed At',\n                type: 'output',\n                dataType: 'string',\n                description: 'Timestamp when analysis was completed'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'default',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                targetText: {\n                    type: 'string',\n                    title: 'Target Text',\n                    description: 'Text to analyze and potentially replace',\n                    default: 'XB'\n                },\n                replacementText: {\n                    type: 'string',\n                    title: 'Replacement Text',\n                    description: 'Text to replace with when appropriate',\n                    default: 'Canvas'\n                },\n                analysisMode: {\n                    type: 'string',\n                    title: 'Analysis Mode',\n                    description: 'Type of AI analysis to perform',\n                    default: 'context_aware'\n                },\n                confidenceThreshold: {\n                    type: 'number',\n                    title: 'Confidence Threshold',\n                    description: 'Minimum confidence level for making replacements (0-1)',\n                    default: 0.8,\n                    minimum: 0,\n                    maximum: 1\n                }\n            }\n        },\n        tags: ['ai', 'analysis', 'content', 'context', 'smart-processing']\n    },\n    {\n        id: 'demo-ai-content-analyzer',\n        name: 'AI Content Analyzer',\n        type: 'default',\n        supportedTypes: ['default', 'tool'],\n        version: '1.0.0',\n        description: 'Analyze content for issues like acronym misuse, formatting problems, or content quality',\n        category: 'agents',\n        icon: 'mdi:text-search',\n        color: '#7c3aed',\n        inputs: [\n            {\n                id: 'content',\n                name: 'Content',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Content to analyze'\n            },\n            {\n                id: 'analysis_prompt',\n                name: 'Analysis Instructions',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Instructions for what to analyze in the content'\n            },\n            {\n                id: 'tools',\n                name: 'Tools',\n                type: 'input',\n                dataType: 'tool',\n                required: false,\n                description: 'Tools available to agent'\n            }\n        ],\n        outputs: [\n            {\n                id: 'analysis_results',\n                name: 'Analysis Results',\n                type: 'output',\n                dataType: 'json',\n                description: 'Detailed analysis findings with recommendations'\n            },\n            {\n                id: 'issues_found',\n                name: 'Issues Found',\n                type: 'output',\n                dataType: 'json',\n                description: 'Array of specific issues identified'\n            },\n            {\n                id: 'confidence_score',\n                name: 'Confidence Score',\n                type: 'output',\n                dataType: 'number',\n                description: 'AI confidence in the analysis (0-1)'\n            },\n            {\n                id: 'tools',\n                name: 'Tools',\n                type: 'input',\n                dataType: 'tool',\n                required: false,\n                description: 'Tools available to agent'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'default',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                model: {\n                    type: 'string',\n                    title: 'AI Model',\n                    description: 'AI model to use for content analysis',\n                    default: 'gpt-5-chat-latest',\n                    enum: ['gpt-4o-mini', 'gpt-5-chat-latest', 'claude-3-sonnet', 'claude-3-haiku']\n                },\n                analysisType: {\n                    type: 'string',\n                    title: 'Analysis Type',\n                    description: 'Type of content analysis to perform',\n                    default: 'comprehensive',\n                    enum: ['acronym_detection', 'grammar_check', 'style_review', 'comprehensive']\n                },\n                strictness: {\n                    type: 'string',\n                    title: 'Analysis Strictness',\n                    description: 'How strict should the analysis be',\n                    default: 'balanced',\n                    enum: ['lenient', 'balanced', 'strict']\n                },\n                includeExamples: {\n                    type: 'boolean',\n                    title: 'Include Examples',\n                    description: 'Include specific examples in analysis results',\n                    default: true\n                },\n                customRules: {\n                    type: 'string',\n                    title: 'Custom Analysis Rules',\n                    description: 'Custom rules or guidelines for content analysis',\n                    default: '',\n                    format: 'multiline'\n                }\n            }\n        },\n        tags: ['demo', 'content-management', 'ai', 'analysis', 'quality-control']\n    },\n    {\n        id: 'demo-ai-content-editor',\n        name: 'AI Content Editor',\n        type: 'default',\n        supportedTypes: ['default', 'tool'],\n        version: '1.0.0',\n        description: 'Make AI-powered edits to content based on analysis results and user instructions',\n        category: 'agents',\n        icon: 'mdi:file-edit-outline',\n        color: '#f59e0b',\n        inputs: [\n            {\n                id: 'original_content',\n                name: 'Original Content',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Original content to be edited'\n            },\n            {\n                id: 'analysis_results',\n                name: 'Analysis Results',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Issues and recommendations from content analysis'\n            },\n            {\n                id: 'edit_instructions',\n                name: 'Edit Instructions',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Specific instructions for how to edit the content'\n            },\n            {\n                id: 'tools',\n                name: 'Tools',\n                type: 'input',\n                dataType: 'tool',\n                required: false,\n                description: 'Tools available to agent'\n            }\n        ],\n        outputs: [\n            {\n                id: 'edited_content',\n                name: 'Edited Content',\n                type: 'output',\n                dataType: 'json',\n                description: 'Content with AI-suggested edits applied'\n            },\n            {\n                id: 'edit_summary',\n                name: 'Edit Summary',\n                type: 'output',\n                dataType: 'json',\n                description: 'Summary of changes made with explanations'\n            },\n            {\n                id: 'change_log',\n                name: 'Change Log',\n                type: 'output',\n                dataType: 'json',\n                description: 'Detailed log of all changes made'\n            },\n            {\n                id: 'tools',\n                name: 'Tools',\n                type: 'input',\n                dataType: 'tool',\n                required: false,\n                description: 'Tools available to agent'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'default',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                model: {\n                    type: 'string',\n                    title: 'AI Model',\n                    description: 'AI model to use for content editing',\n                    default: 'gpt-5-chat-latest',\n                    enum: ['gpt-4o-mini', 'gpt-5-chat-latest', 'claude-3-sonnet', 'claude-3-haiku']\n                },\n                editingStyle: {\n                    type: 'string',\n                    title: 'Editing Style',\n                    description: 'Style of editing to apply',\n                    default: 'conservative',\n                    enum: ['minimal', 'conservative', 'moderate', 'comprehensive']\n                },\n                preserveFormatting: {\n                    type: 'boolean',\n                    title: 'Preserve HTML Formatting',\n                    description: 'Maintain existing HTML tags and formatting',\n                    default: true\n                },\n                requireApproval: {\n                    type: 'boolean',\n                    title: 'Require Human Approval',\n                    description: 'Flag all changes for human review before applying',\n                    default: true\n                },\n                trackChanges: {\n                    type: 'boolean',\n                    title: 'Track Changes',\n                    description: 'Create detailed tracking of all modifications',\n                    default: true\n                }\n            }\n        },\n        tags: ['demo', 'content-management', 'ai', 'editing', 'automation']\n    },\n    {\n        id: 'demo-draft-creator',\n        name: 'Draft Creator',\n        type: 'tool',\n        supportedTypes: ['tool', 'default'],\n        version: '1.0.0',\n        description: 'Create draft versions of edited content in Drupal for human review and approval',\n        category: 'tools',\n        icon: 'mdi:file-document-edit-outline',\n        color: '#10b981',\n        inputs: [\n            {\n                id: 'edited_content',\n                name: 'Edited Content',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Content with AI edits to save as draft'\n            },\n            {\n                id: 'edit_summary',\n                name: 'Edit Summary',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Summary of changes made'\n            },\n            {\n                id: 'original_node_id',\n                name: 'Original Node ID',\n                type: 'input',\n                dataType: 'number',\n                required: true,\n                description: 'Drupal node ID of the original content'\n            }\n        ],\n        outputs: [\n            {\n                id: 'draft_node_id',\n                name: 'Draft Node ID',\n                type: 'output',\n                dataType: 'number',\n                description: 'Node ID of the created draft'\n            },\n            {\n                id: 'draft_url',\n                name: 'Draft URL',\n                type: 'output',\n                dataType: 'string',\n                description: 'URL to view the draft content'\n            },\n            {\n                id: 'review_url',\n                name: 'Review URL',\n                type: 'output',\n                dataType: 'string',\n                description: 'URL for content reviewers to approve/reject changes'\n            },\n            {\n                id: 'tool',\n                name: 'Tool Interface',\n                type: 'output',\n                dataType: 'tool',\n                description: 'Tool interface for agent connections - provides tool metadata and callable interface'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'tool',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                draftWorkflow: {\n                    type: 'string',\n                    title: 'Draft Workflow',\n                    description: 'Drupal workflow to use for draft content',\n                    default: 'editorial',\n                    enum: ['editorial', 'simple', 'custom']\n                },\n                assignReviewer: {\n                    type: 'boolean',\n                    title: 'Auto-assign Reviewer',\n                    description: 'Automatically assign a content reviewer',\n                    default: true\n                },\n                reviewerRole: {\n                    type: 'string',\n                    title: 'Reviewer Role',\n                    description: 'User role to assign for content review',\n                    default: 'editor',\n                    enum: ['editor', 'content_manager', 'administrator']\n                },\n                notifyReviewer: {\n                    type: 'boolean',\n                    title: 'Notify Reviewer',\n                    description: 'Send email notification to assigned reviewer',\n                    default: true\n                },\n                retainOriginal: {\n                    type: 'boolean',\n                    title: 'Retain Original',\n                    description: 'Keep original content unchanged until draft is approved',\n                    default: true\n                },\n                addRevisionLog: {\n                    type: 'boolean',\n                    title: 'Add Revision Log',\n                    description: 'Add detailed revision log entry',\n                    default: true\n                }\n            }\n        },\n        tags: ['demo', 'content-management', 'drupal', 'draft', 'workflow', 'review']\n    },\n    {\n        id: 'demo-date-format-converter',\n        name: 'Date Format Converter',\n        type: 'tool',\n        supportedTypes: ['tool', 'default'],\n        version: '1.0.0',\n        description: 'Extract and convert dates in content to new formats (demo review step)',\n        category: 'tools',\n        icon: 'mdi:calendar-edit',\n        color: '#84cc16',\n        inputs: [\n            {\n                id: 'content',\n                name: 'Content',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Content containing dates to convert'\n            }\n        ],\n        outputs: [\n            {\n                id: 'converted_content',\n                name: 'Converted Content',\n                type: 'output',\n                dataType: 'json',\n                description: 'Content with dates converted to new format'\n            },\n            {\n                id: 'dates_found',\n                name: 'Dates Found',\n                type: 'output',\n                dataType: 'json',\n                description: 'Array of dates found and their conversions'\n            },\n            {\n                id: 'conversion_log',\n                name: 'Conversion Log',\n                type: 'output',\n                dataType: 'json',\n                description: 'Log of all date conversions performed'\n            },\n            {\n                id: 'tool',\n                name: 'Tool Interface',\n                type: 'output',\n                dataType: 'tool',\n                description: 'Tool interface for agent connections - provides tool metadata and callable interface'\n            }\n        ],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'tool',\n                    enum: ['tool', 'default'],\n                    enumNames: ['Tool Node (with metadata port)', 'Default Node (standard ports)']\n                },\n                inputFormat: {\n                    type: 'string',\n                    title: 'Input Date Format',\n                    description: 'Expected format of dates in content',\n                    default: 'MM/dd/yyyy',\n                    enum: ['MM/dd/yyyy', 'dd/MM/yyyy', 'yyyy-MM-dd', 'auto-detect']\n                },\n                outputFormat: {\n                    type: 'string',\n                    title: 'Output Date Format',\n                    description: 'Desired format for converted dates',\n                    default: 'MMMM d, yyyy',\n                    enum: ['MMMM d, yyyy', 'dd/MM/yyyy', 'yyyy-MM-dd', 'MMM d, yyyy', 'd MMMM yyyy']\n                },\n                includeTime: {\n                    type: 'boolean',\n                    title: 'Include Time',\n                    description: 'Include time information in conversions',\n                    default: false\n                },\n                timezone: {\n                    type: 'string',\n                    title: 'Timezone',\n                    description: 'Timezone for date conversions',\n                    default: 'UTC',\n                    enum: [\n                        'UTC',\n                        'America/New_York',\n                        'America/Chicago',\n                        'America/Denver',\n                        'America/Los_Angeles',\n                        'Europe/London'\n                    ]\n                },\n                onlyFutureDates: {\n                    type: 'boolean',\n                    title: 'Only Future Dates',\n                    description: 'Only convert dates that are in the future',\n                    default: false\n                }\n            }\n        },\n        tags: ['demo', 'content-management', 'dates', 'formatting', 'conversion', 'review-tool']\n    },\n    {\n        id: 'demo-chat-response',\n        name: 'Chat Response',\n        type: 'simple',\n        supportedTypes: ['simple', 'default'],\n        version: '1.0.0',\n        description: 'Display chat-style responses with workflow results and next steps for content managers',\n        category: 'outputs',\n        icon: 'mdi:message-reply-text',\n        color: '#8b5cf6',\n        inputs: [\n            {\n                id: 'workflow_results',\n                name: 'Workflow Results',\n                type: 'input',\n                dataType: 'json',\n                required: true,\n                description: 'Results from the content management workflow'\n            },\n            {\n                id: 'summary_message',\n                name: 'Summary Message',\n                type: 'input',\n                dataType: 'string',\n                required: true,\n                description: 'Human-readable summary of what was accomplished'\n            }\n        ],\n        outputs: [],\n        configSchema: {\n            type: 'object',\n            properties: {\n                nodeType: {\n                    type: 'string',\n                    title: 'Node Type',\n                    description: 'Choose the visual representation for this node',\n                    default: 'simple',\n                    enum: ['simple', 'default'],\n                    enumNames: ['Simple (compact layout)', 'Default (standard workflow node)']\n                },\n                showTimestamp: {\n                    type: 'boolean',\n                    title: 'Show Timestamp',\n                    description: 'Display timestamp with responses',\n                    default: true\n                },\n                includeActionButtons: {\n                    type: 'boolean',\n                    title: 'Include Action Buttons',\n                    description: 'Show action buttons for next steps',\n                    default: true\n                },\n                responseStyle: {\n                    type: 'string',\n                    title: 'Response Style',\n                    description: 'Style of the chat response',\n                    default: 'professional',\n                    enum: ['casual', 'professional', 'technical', 'friendly']\n                },\n                showWorkflowSummary: {\n                    type: 'boolean',\n                    title: 'Show Workflow Summary',\n                    description: 'Include a summary of workflow steps completed',\n                    default: true\n                },\n                enableMarkdown: {\n                    type: 'boolean',\n                    title: 'Enable Markdown',\n                    description: 'Allow markdown formatting in responses',\n                    default: true\n                }\n            }\n        },\n        tags: ['demo', 'content-management', 'output', 'chat', 'response', 'summary']\n    }\n];\n// Export category icons for use in other components\nexport { CATEGORY_ICONS as categoryIcons };\n/**\n * Demo node whitelist - Multi-agent content management scenario\n * Main Agent + Specialized Sub-Agents + Tools\n */\nconst DEMO_ALLOWED_NODE_IDS = [\n    // === MAIN CONVERSATIONAL AGENT ===\n    'demo-chat-input', // User input interface\n    'sample-simple-agent', // Main conversational agent (orchestrator)\n    'demo-chat-response', // Response back to user\n    // === SPECIALIZED SUB-AGENTS ===\n    'demo-ai-content-analyzer', // Content analysis agent\n    'demo-ai-content-editor', // Content editing agent\n    // === TOOLS (for sub-agents to use) ===\n    'demo-drupal-search-rag', // RAG tool for content search\n    'demo-draft-creator', // Draft creation tool\n    'demo-date-format-converter', // Date formatting tool\n    // === SUPPORTING NODES ===\n    'sample-openai', // AI model for agents\n    'sample-anthropic', // Alternative AI model\n    'sample-notes', // Documentation\n    'sample-prompt', // Prompt templates\n    'sample-text-input', // Alternative input method\n    'sample-chat-output', // Alternative output method\n    // === TOOL INTERFACE NODES ===\n    'sample-http-request', // For external API calls\n    'sample-json', // JSON processing tool\n    'sample-set' // Data manipulation tool\n];\n/**\n * Filter nodes based on demo configuration\n * @param nodes - All available nodes\n * @param config - Demo configuration\n * @returns Filtered array of nodes\n */\nexport function filterNodesForDemo(nodes, config) {\n    if (!config.enabled) {\n        return nodes;\n    }\n    switch (config.mode) {\n        case 'content-management':\n            // Show only specifically whitelisted nodes for the demo\n            return nodes.filter((node) => DEMO_ALLOWED_NODE_IDS.includes(node.id));\n        case 'all':\n        default:\n            return nodes;\n    }\n}\n/**\n * Get the list of allowed demo node IDs\n */\nexport function getDemoAllowedNodeIds() {\n    return [...DEMO_ALLOWED_NODE_IDS];\n}\n/**\n * Check if a node is allowed in demo mode\n */\nexport function isNodeAllowedInDemo(nodeId) {\n    return DEMO_ALLOWED_NODE_IDS.includes(nodeId);\n}\n/**\n * Get demo-specific nodes only\n */\nexport function getDemoNodes() {\n    return sampleNodes.filter((node) => node.tags?.includes('demo'));\n}\n/**\n * Get nodes by category with demo filtering\n */\nexport function getNodesByCategory(category, demoConfig) {\n    const nodes = demoConfig ? filterNodesForDemo(sampleNodes, demoConfig) : sampleNodes;\n    return nodes.filter((node) => node.category === category);\n}\n/**\n * Search nodes with demo filtering\n */\nexport function searchNodes(query, demoConfig) {\n    const nodes = demoConfig ? filterNodesForDemo(sampleNodes, demoConfig) : sampleNodes;\n    const searchTerm = query.toLowerCase();\n    return nodes.filter((node) => node.name.toLowerCase().includes(searchTerm) ||\n        node.description.toLowerCase().includes(searchTerm) ||\n        node.tags?.some((tag) => tag.toLowerCase().includes(searchTerm)));\n}\n/**\n * Sample workflow for development\n * Updated to use the new node types\n */\nexport const sampleWorkflow = {\n    id: 'sample-simple-chat-workflow',\n    name: 'Simple Chat Workflow',\n    description: 'A basic workflow demonstrating direct text input to AI model response',\n    nodes: [\n        {\n            id: 'sample-workflow-text-input',\n            type: 'text-input',\n            position: { x: 100, y: 100 },\n            data: {\n                label: 'Text Input',\n                config: {\n                    placeholder: 'Enter your question...',\n                    defaultValue: 'Hello, how are you?'\n                },\n                metadata: sampleNodes.find((n) => n.name === 'Text Input')\n            }\n        },\n        {\n            id: 'sample-workflow-split-text',\n            type: 'split-text',\n            position: { x: 300, y: 100 },\n            data: {\n                label: 'Split Text',\n                config: {\n                    chunkSize: 500,\n                    chunkOverlap: 100,\n                    separator: '\\n'\n                },\n                metadata: sampleNodes.find((n) => n.name === 'Split Text')\n            }\n        },\n        {\n            id: 'sample-workflow-openai',\n            type: 'openai',\n            position: { x: 500, y: 100 },\n            data: {\n                label: 'OpenAI',\n                config: {\n                    model: 'gpt-4o-mini',\n                    temperature: 0.7,\n                    maxTokens: 1000\n                },\n                metadata: sampleNodes.find((n) => n.name === 'OpenAI')\n            }\n        },\n        {\n            id: 'sample-workflow-note',\n            type: 'note',\n            position: { x: 500, y: 300 },\n            data: {\n                label: 'Workflow Notes',\n                config: {\n                    content: '# Simple Chat Workflow\\n\\nThis workflow demonstrates a basic chat interaction:\\n\\n1. **Text Input** - User enters a question\\n2. **OpenAI** - Processes the input and generates a response\\n3. **Chat Output** - Displays the final response\\n\\n## Port Types Used\\n- **string** - Text data flows between all nodes\\n- Only compatible types can connect (string  string)\\n\\n## Usage\\n- Drag a Notes node to add documentation\\n- Double-click to edit in Markdown\\n- Choose from 5 different note types',\n                    noteType: 'info'\n                },\n                metadata: sampleNodes.find((n) => n.name === 'Notes')\n            }\n        },\n        {\n            id: 'sample-workflow-chat-output',\n            type: 'chat-output',\n            position: { x: 700, y: 100 },\n            data: {\n                label: 'Chat Output',\n                config: {\n                    showTimestamp: true,\n                    maxLength: 2000,\n                    markdown: true\n                },\n                metadata: sampleNodes.find((n) => n.name === 'Chat Output')\n            }\n        }\n    ],\n    edges: [\n        {\n            id: 'sample-workflow-edge-1',\n            source: 'sample-workflow-text-input',\n            target: 'sample-workflow-openai',\n            sourceHandle: 'text',\n            targetHandle: 'prompt'\n        },\n        {\n            id: 'sample-workflow-edge-2',\n            source: 'sample-workflow-openai',\n            target: 'sample-workflow-chat-output',\n            sourceHandle: 'response',\n            targetHandle: 'message'\n        }\n    ],\n    metadata: {\n        version: '1.0.0',\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        author: 'FlowDrop',\n        tags: ['sample', 'chat', 'demo', 'langflow-style']\n    }\n};\n","import { get, writable } from 'svelte/store';\nimport writableDerived from 'svelte-writable-derived';\nconst TOAST_LIMIT = 20;\nexport const toasts = writable([]);\nexport const pausedAt = writable(null);\nconst toastTimeouts = new Map();\nconst addToRemoveQueue = (toastId) => {\n    if (toastTimeouts.has(toastId)) {\n        return;\n    }\n    const timeout = setTimeout(() => {\n        toastTimeouts.delete(toastId);\n        remove(toastId);\n    }, 1000);\n    toastTimeouts.set(toastId, timeout);\n};\nconst clearFromRemoveQueue = (toastId) => {\n    const timeout = toastTimeouts.get(toastId);\n    if (timeout) {\n        clearTimeout(timeout);\n    }\n};\nexport function update(toast, clearTimeout = true) {\n    if (clearTimeout && toast.id) {\n        clearFromRemoveQueue(toast.id);\n    }\n    toasts.update(($toasts) => $toasts.map((t) => (t.id === toast.id ? { ...t, ...toast } : t)));\n}\nexport function add(toast) {\n    toasts.update(($toasts) => [toast, ...$toasts].slice(0, TOAST_LIMIT));\n}\nexport function upsert(toast) {\n    if (get(toasts).find((t) => t.id === toast.id)) {\n        update(toast);\n    }\n    else {\n        add(toast);\n    }\n}\nexport function dismiss(toastId) {\n    toasts.update(($toasts) => {\n        if (toastId) {\n            addToRemoveQueue(toastId);\n        }\n        else {\n            $toasts.forEach((toast) => {\n                addToRemoveQueue(toast.id);\n            });\n        }\n        return $toasts.map((t) => t.id === toastId || toastId === undefined ? { ...t, visible: false } : t);\n    });\n}\nexport function remove(toastId) {\n    toasts.update(($toasts) => {\n        if (toastId === undefined) {\n            return [];\n        }\n        return $toasts.filter((t) => t.id !== toastId);\n    });\n}\nexport function startPause(time) {\n    pausedAt.set(time);\n}\nexport function endPause(time) {\n    let diff;\n    pausedAt.update(($pausedAt) => {\n        diff = time - ($pausedAt || 0);\n        return null;\n    });\n    toasts.update(($toasts) => $toasts.map((t) => ({\n        ...t,\n        pauseDuration: t.pauseDuration + diff\n    })));\n}\nconst defaultTimeouts = {\n    blank: 4000,\n    error: 4000,\n    success: 2000,\n    loading: Infinity,\n    custom: 4000\n};\nexport function useToasterStore(toastOptions = {}) {\n    const mergedToasts = writableDerived(toasts, ($toasts) => $toasts.map((t) => ({\n        ...toastOptions,\n        ...toastOptions[t.type],\n        ...t,\n        duration: t.duration ||\n            toastOptions[t.type]?.duration ||\n            toastOptions?.duration ||\n            defaultTimeouts[t.type],\n        style: [toastOptions.style, toastOptions[t.type]?.style, t.style].join(';')\n    })), ($toasts) => $toasts);\n    return {\n        toasts: mergedToasts,\n        pausedAt\n    };\n}\n","const isFunction = (valOrFunction) => typeof valOrFunction === 'function';\nexport const resolveValue = (valOrFunction, arg) => (isFunction(valOrFunction) ? valOrFunction(arg) : valOrFunction);\n","export const genId = (() => {\n    let count = 0;\n    return () => {\n        count += 1;\n        return count.toString();\n    };\n})();\nexport const prefersReducedMotion = (() => {\n    // Cache result\n    let shouldReduceMotion;\n    return () => {\n        if (shouldReduceMotion === undefined && typeof window !== 'undefined') {\n            const mediaQuery = matchMedia('(prefers-reduced-motion: reduce)');\n            shouldReduceMotion = !mediaQuery || mediaQuery.matches;\n        }\n        return shouldReduceMotion;\n    };\n})();\n","import { dismiss, remove, upsert } from './store';\nimport { resolveValue } from './types';\nimport { genId } from './utils';\nconst createToast = (message, type = 'blank', opts) => ({\n    createdAt: Date.now(),\n    visible: true,\n    type,\n    message,\n    pauseDuration: 0,\n    icon: opts?.icon,\n    duration: opts?.duration,\n    iconTheme: opts?.iconTheme,\n    position: opts?.position,\n    props: opts?.props,\n    id: opts?.id || genId()\n});\nconst createHandler = (type) => (message, options) => {\n    const toast = createToast(message, type, options);\n    upsert(toast);\n    return toast.id;\n};\nconst toast = (message, opts) => createHandler('blank')(message, opts);\ntoast.error = createHandler('error');\ntoast.success = createHandler('success');\ntoast.loading = createHandler('loading');\ntoast.custom = createHandler('custom');\ntoast.dismiss = (toastId) => {\n    dismiss(toastId);\n};\ntoast.remove = (toastId) => remove(toastId);\ntoast.promise = (promise, msgs, opts) => {\n    const id = toast.loading(msgs.loading, { ...opts, ...opts?.loading });\n    promise\n        .then((p) => {\n        toast.success(resolveValue(msgs.success, p), {\n            id,\n            ...opts,\n            ...opts?.success\n        });\n        return p;\n    })\n        .catch((e) => {\n        toast.error(resolveValue(msgs.error, e), {\n            id,\n            ...opts,\n            ...opts?.error\n        });\n    });\n    return promise;\n};\nexport default toast;\n","/**\n * Toast Service\n * Centralized toast notification service using svelte-french-toast\n * Provides consistent toast notifications across the FlowDrop application\n */\nimport { toast } from 'svelte-5-french-toast';\n/**\n * Show a success toast notification\n */\nexport function showSuccess(message, options) {\n    return toast.success(message, {\n        duration: options?.duration || 4000,\n        position: options?.position || 'bottom-center'\n    });\n}\n/**\n * Show an error toast notification\n */\nexport function showError(message, options) {\n    return toast.error(message, {\n        duration: options?.duration || 6000,\n        position: options?.position || 'bottom-center'\n    });\n}\n/**\n * Show a warning toast notification\n */\nexport function showWarning(message, options) {\n    return toast.error(message, {\n        duration: options?.duration || 5000,\n        position: options?.position || 'bottom-center'\n    });\n}\n/**\n * Show an info toast notification\n */\nexport function showInfo(message, options) {\n    return toast.success(message, {\n        duration: options?.duration || 4000,\n        position: options?.position || 'bottom-center'\n    });\n}\n/**\n * Show a loading toast notification\n */\nexport function showLoading(message, options) {\n    return toast.loading(message, {\n        duration: options?.duration || Infinity,\n        position: options?.position || 'bottom-center'\n    });\n}\n/**\n * Dismiss a specific toast by ID\n */\nexport function dismissToast(toastId) {\n    toast.dismiss(toastId);\n}\n/**\n * Dismiss all toasts\n */\nexport function dismissAllToasts() {\n    toast.dismiss();\n}\n/**\n * Show a promise-based toast (loading -> success/error)\n */\nexport function showPromise(promise, { loading, success, error, options }) {\n    return toast.promise(promise, {\n        loading,\n        success,\n        error,\n        ...options\n    });\n}\n/**\n * Show a confirmation toast (simplified version without action buttons)\n */\nexport function showConfirmation(message, options) {\n    return toast(message, {\n        duration: options?.duration || 5000,\n        position: options?.position || 'bottom-center'\n    });\n}\n/**\n * API-specific toast helpers\n */\nexport const apiToasts = {\n    /**\n     * Show API success message\n     */\n    success: (operation, details) => {\n        const message = details ? `${operation}: ${details}` : operation;\n        return showSuccess(message);\n    },\n    /**\n     * Show API error message\n     */\n    error: (operation, error) => {\n        const errorMessage = error instanceof Error ? error.message : error;\n        return showError(`${operation} failed: ${errorMessage}`);\n    },\n    /**\n     * Show API loading message\n     */\n    loading: (operation) => {\n        return showLoading(`${operation}...`);\n    },\n    /**\n     * Show API promise with automatic success/error handling\n     */\n    promise: (promise, operation, options) => {\n        return showPromise(promise, {\n            loading: `${operation}...`,\n            success: options?.successMessage || `${operation} completed successfully`,\n            error: options?.errorMessage || `${operation} failed`\n        });\n    }\n};\n/**\n * Workflow-specific toast helpers\n */\nexport const workflowToasts = {\n    /**\n     * Show workflow save success\n     */\n    saved: (workflowName) => {\n        const message = workflowName\n            ? `Workflow \"${workflowName}\" saved successfully`\n            : 'Workflow saved successfully';\n        return showSuccess(message);\n    },\n    /**\n     * Show workflow save error\n     */\n    saveError: (error) => {\n        const errorMessage = error instanceof Error ? error.message : error;\n        return showError(`Failed to save workflow: ${errorMessage}`);\n    },\n    /**\n     * Show workflow delete success\n     */\n    deleted: (workflowName) => {\n        const message = workflowName\n            ? `Workflow \"${workflowName}\" deleted successfully`\n            : 'Workflow deleted successfully';\n        return showSuccess(message);\n    },\n    /**\n     * Show workflow delete error\n     */\n    deleteError: (error) => {\n        const errorMessage = error instanceof Error ? error.message : error;\n        return showError(`Failed to delete workflow: ${errorMessage}`);\n    },\n    /**\n     * Show workflow execution started\n     */\n    executionStarted: (workflowName) => {\n        const message = workflowName\n            ? `Workflow \"${workflowName}\" execution started`\n            : 'Workflow execution started';\n        return showInfo(message);\n    },\n    /**\n     * Show workflow execution completed\n     */\n    executionCompleted: (workflowName) => {\n        const message = workflowName\n            ? `Workflow \"${workflowName}\" execution completed`\n            : 'Workflow execution completed';\n        return showSuccess(message);\n    },\n    /**\n     * Show workflow export success\n     */\n    exported: (workflowName) => {\n        const message = workflowName\n            ? `Workflow \"${workflowName}\" exported successfully`\n            : 'Workflow exported successfully';\n        return showSuccess(message);\n    },\n    /**\n     * Show workflow execution error\n     */\n    executionError: (error) => {\n        const errorMessage = error instanceof Error ? error.message : error;\n        return showError(`Workflow execution failed: ${errorMessage}`);\n    }\n};\n/**\n * Pipeline-specific toast helpers\n */\nexport const pipelineToasts = {\n    /**\n     * Show pipeline creation success\n     */\n    created: (pipelineName) => {\n        const message = pipelineName\n            ? `Pipeline \"${pipelineName}\" created successfully`\n            : 'Pipeline created successfully';\n        return showSuccess(message);\n    },\n    /**\n     * Show pipeline creation error\n     */\n    creationError: (error) => {\n        const errorMessage = error instanceof Error ? error.message : error;\n        return showError(`Failed to create pipeline: ${errorMessage}`);\n    },\n    /**\n     * Show pipeline execution started\n     */\n    executionStarted: (pipelineId) => {\n        return showInfo(`Pipeline ${pipelineId} execution started`);\n    },\n    /**\n     * Show pipeline execution completed\n     */\n    executionCompleted: (pipelineId) => {\n        return showSuccess(`Pipeline ${pipelineId} execution completed`);\n    },\n    /**\n     * Show pipeline execution error\n     */\n    executionError: (pipelineId, error) => {\n        const errorMessage = error instanceof Error ? error.message : error;\n        return showError(`Pipeline ${pipelineId} execution failed: ${errorMessage}`);\n    },\n    /**\n     * Show pipeline status update\n     */\n    statusUpdate: (pipelineId, status) => {\n        return showInfo(`Pipeline ${pipelineId} status: ${status}`);\n    }\n};\n","<!--\n  FlowDrop App Component\n  Main application wrapper with navbar, sidebars, and workflow editor\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport { onMount, tick } from 'svelte';\n\timport { page } from '$app/stores';\n\timport WorkflowEditor from './WorkflowEditor.svelte';\n\timport NodeSidebar from './NodeSidebar.svelte';\n\timport ConfigSidebar from './ConfigSidebar.svelte';\n\timport ConfigForm from './ConfigForm.svelte';\n\timport Navbar from './Navbar.svelte';\n\timport { api, setEndpointConfig } from '../services/api.js';\n\timport type { NodeMetadata, Workflow, WorkflowNode, ConfigSchema } from '../types/index.js';\n\timport { sampleNodes } from '../data/samples.js';\n\timport { createEndpointConfig } from '../config/endpoints.js';\n\timport type { EndpointConfig } from '../config/endpoints.js';\n\timport type { AuthProvider } from '../types/auth.js';\n\timport type { FlowDropEventHandlers, FlowDropFeatures } from '../types/events.js';\n\timport { mergeFeatures } from '../types/events.js';\n\timport {\n\t\tworkflowStore,\n\t\tworkflowActions,\n\t\tworkflowName,\n\t\tmarkAsSaved\n\t} from '../stores/workflowStore.js';\n\timport { apiToasts, dismissToast } from '../services/toastService.js';\n\n\t/**\n\t * Configuration props for runtime customization\n\t */\n\tinterface Props {\n\t\t/** Initial workflow to load */\n\t\tworkflow?: Workflow;\n\t\t/** Pre-loaded node types (if provided, skips API fetch) */\n\t\tnodes?: NodeMetadata[];\n\t\t/** Editor height */\n\t\theight?: string | number;\n\t\t/** Editor width */\n\t\twidth?: string | number;\n\t\t/** Show the navbar */\n\t\tshowNavbar?: boolean;\n\t\t/** Disable the node sidebar */\n\t\tdisableSidebar?: boolean;\n\t\t/** Lock the workflow (prevent changes) */\n\t\tlockWorkflow?: boolean;\n\t\t/** Read-only mode */\n\t\treadOnly?: boolean;\n\t\t/** Node execution statuses */\n\t\tnodeStatuses?: Record<string, 'pending' | 'running' | 'completed' | 'error'>;\n\t\t/** Pipeline ID for fetching node execution info */\n\t\tpipelineId?: string;\n\t\t/** Custom navbar title */\n\t\tnavbarTitle?: string;\n\t\t/** Custom navbar actions */\n\t\tnavbarActions?: Array<{\n\t\t\tlabel: string;\n\t\t\thref: string;\n\t\t\ticon?: string;\n\t\t\tvariant?: 'primary' | 'secondary' | 'outline';\n\t\t\tonclick?: (event: Event) => void;\n\t\t}>;\n\t\t/** API base URL */\n\t\tapiBaseUrl?: string;\n\t\t/** Endpoint configuration */\n\t\tendpointConfig?: EndpointConfig;\n\t\t/** Authentication provider */\n\t\tauthProvider?: AuthProvider;\n\t\t/** Event handlers */\n\t\teventHandlers?: FlowDropEventHandlers;\n\t\t/** Feature configuration */\n\t\tfeatures?: FlowDropFeatures;\n\t}\n\n\tlet {\n\t\tworkflow: initialWorkflow,\n\t\tnodes: propNodes,\n\t\theight = '100vh',\n\t\twidth = '100%',\n\t\tshowNavbar = false,\n\t\tdisableSidebar = false,\n\t\tlockWorkflow = false,\n\t\treadOnly = false,\n\t\tnodeStatuses = {},\n\t\tpipelineId,\n\t\tnavbarTitle,\n\t\tnavbarActions = [],\n\t\tapiBaseUrl,\n\t\tendpointConfig: propEndpointConfig,\n\t\tauthProvider,\n\t\teventHandlers,\n\t\tfeatures: propFeatures\n\t}: Props = $props();\n\n\t// Merge features with defaults\n\tconst features = mergeFeatures(propFeatures);\n\n\t// Create breadcrumb-style title - at top level to avoid store subscription issues\n\tlet breadcrumbTitle = $derived(() => {\n\t\t// Use custom navbar title if provided\n\t\tif (navbarTitle) {\n\t\t\treturn navbarTitle;\n\t\t}\n\t\t// Default workflow title logic\n\t\tif (!$workflowName || $workflowName === 'Untitled Workflow') {\n\t\t\treturn 'Workflow / New Workflow';\n\t\t}\n\t\treturn `Workflow / ${$workflowName}`;\n\t});\n\n\tlet nodes = $state<NodeMetadata[]>([]);\n\t// Remove workflow prop - use global store directly\n\t// let workflow = $derived($workflowStore || initialWorkflow);\n\tlet error = $state<string | null>(null);\n\tlet endpointConfig = $state<EndpointConfig | null>(null);\n\n\t// ConfigSidebar state\n\tlet isConfigSidebarOpen = $state(false);\n\tlet selectedNodeId = $state<string | null>(null);\n\n\t// Workflow settings sidebar state\n\tlet isWorkflowSettingsOpen = $state(false);\n\n\t// Workflow configuration schema\n\tconst workflowConfigSchema: ConfigSchema = {\n\t\ttype: 'object',\n\t\tproperties: {\n\t\t\tname: {\n\t\t\t\ttype: 'string',\n\t\t\t\ttitle: 'Workflow Name',\n\t\t\t\tdescription: 'The name of the workflow',\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\tdescription: {\n\t\t\t\ttype: 'string',\n\t\t\t\ttitle: 'Description',\n\t\t\t\tdescription: 'A description of the workflow',\n\t\t\t\tdefault: ''\n\t\t\t}\n\t\t},\n\t\trequired: ['name']\n\t};\n\n\t// Workflow configuration values\n\tlet workflowConfigValues = $derived({\n\t\tname: $workflowName || '',\n\t\tdescription: $workflowStore?.description || ''\n\t});\n\n\t// Get the current node from the workflow store\n\tlet selectedNodeForConfig = $derived(() => {\n\t\tif (!selectedNodeId || !$workflowStore) return null;\n\t\treturn $workflowStore.nodes.find((node) => node.id === selectedNodeId) || null;\n\t});\n\n\t// WorkflowEditor reference for save functionality\n\tlet workflowEditorRef: WorkflowEditor | null = null;\n\n\t// Removed currentWorkflowState - no longer needed\n\t// The global store ($workflowStore) serves as the single source of truth\n\n\t/**\n\t * Fetch node types from the server\n\t *\n\t * If propNodes is provided, uses those instead of fetching from API.\n\t * This fixes the bug where propNodes was ignored.\n\t */\n\tasync function fetchNodeTypes(): Promise<void> {\n\t\t// If nodes were provided as props, use them directly (skip API fetch)\n\t\tif (propNodes && propNodes.length > 0) {\n\t\t\tnodes = propNodes;\n\t\t\treturn;\n\t\t}\n\n\t\t// Show loading toast (if toasts are enabled)\n\t\tconst loadingToast = features.showToasts ? apiToasts.loading('Loading node types') : null;\n\t\ttry {\n\t\t\terror = null;\n\n\t\t\tconst fetchedNodes = await api.nodes.getNodes();\n\n\t\t\tnodes = fetchedNodes;\n\t\t\terror = null;\n\n\t\t\t// Dismiss loading toast\n\t\t\tif (loadingToast) {\n\t\t\t\tdismissToast(loadingToast);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t// Dismiss loading toast and show error toast\n\t\t\tif (loadingToast) {\n\t\t\t\tdismissToast(loadingToast);\n\t\t\t}\n\n\t\t\tconst errorMessage = err instanceof Error ? err.message : 'Unknown error';\n\n\t\t\t// Notify parent via event handler\n\t\t\tif (eventHandlers?.onApiError) {\n\t\t\t\tconst suppressToast = eventHandlers.onApiError(\n\t\t\t\t\terr instanceof Error ? err : new Error(errorMessage),\n\t\t\t\t\t'fetchNodes'\n\t\t\t\t);\n\t\t\t\tif (suppressToast) {\n\t\t\t\t\t// Parent handled the error, don't show default toast\n\t\t\t\t\tnodes = sampleNodes;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Show error but don't block the UI\n\t\t\terror = `API Error: ${errorMessage}. Using sample data.`;\n\t\t\tif (features.showToasts) {\n\t\t\t\tapiToasts.error('Load node types', errorMessage);\n\t\t\t}\n\n\t\t\t// Fallback to sample data\n\t\t\tnodes = sampleNodes;\n\t\t}\n\t}\n\n\t/**\n\t * Retry loading node types\n\t */\n\tfunction retryLoad(): void {\n\t\tfetchNodeTypes();\n\t}\n\n\t/**\n\t * Test API connection\n\t */\n\tasync function testApiConnection(): Promise<void> {\n\t\ttry {\n\t\t\tconst baseUrl = endpointConfig?.baseUrl || apiBaseUrl || '/api/flowdrop';\n\t\t\tconst testUrl = `${baseUrl}/nodes`;\n\n\t\t\tconst response = await fetch(testUrl);\n\t\t\tconst data = await response.json();\n\n\t\t\tif (response.ok && data.success) {\n\t\t\t\tapiToasts.success('API connection test', 'Connection successful');\n\t\t\t} else {\n\t\t\t\tapiToasts.error('API connection test', 'Connection failed');\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tapiToasts.error('API connection test', err instanceof Error ? err.message : 'Unknown error');\n\t\t}\n\t}\n\n\t/**\n\t * Initialize API endpoints\n\t * Priority: propEndpointConfig > existingConfig > apiBaseUrl > default\n\t */\n\tasync function initializeApiEndpoints(): Promise<void> {\n\t\t// First priority: Use endpointConfig prop if provided (from mountFlowDropApp)\n\t\tif (propEndpointConfig) {\n\t\t\tsetEndpointConfig(propEndpointConfig);\n\t\t\tendpointConfig = propEndpointConfig;\n\t\t\treturn;\n\t\t}\n\n\t\t// Second priority: Check if endpoint config is already set (e.g., by parent layout)\n\t\tconst { getEndpointConfig } = await import('../services/api.js');\n\t\tconst existingConfig = getEndpointConfig();\n\n\t\t// If config already exists and no override provided, use existing\n\t\tif (existingConfig && !apiBaseUrl) {\n\t\t\tendpointConfig = existingConfig;\n\t\t\treturn;\n\t\t}\n\n\t\t// Third priority: Use provided apiBaseUrl or default\n\t\tconst baseUrl = apiBaseUrl || '/api/flowdrop';\n\n\t\tconst config = createEndpointConfig(baseUrl, {\n\t\t\tauth: {\n\t\t\t\ttype: 'none' // No authentication for now\n\t\t\t},\n\t\t\ttimeout: 10000, // 10 second timeout\n\t\t\tretry: {\n\t\t\t\tenabled: true,\n\t\t\t\tmaxAttempts: 2,\n\t\t\t\tdelay: 1000,\n\t\t\t\tbackoff: 'exponential'\n\t\t\t}\n\t\t});\n\n\t\tsetEndpointConfig(config);\n\t\t// Store the configuration for passing to WorkflowEditor\n\t\tendpointConfig = config;\n\t}\n\n\t/**\n\t * ConfigSidebar functions\n\t */\n\tfunction openConfigSidebar(node: WorkflowNode): void {\n\t\t// Close if already open for the same node\n\t\tif (isConfigSidebarOpen && selectedNodeId === node.id) {\n\t\t\tcloseConfigSidebar();\n\t\t\treturn;\n\t\t}\n\t\tselectedNodeId = node.id;\n\t\tisConfigSidebarOpen = true;\n\t}\n\n\tfunction closeConfigSidebar(): void {\n\t\tisConfigSidebarOpen = false;\n\t\tselectedNodeId = null;\n\t}\n\n\t/**\n\t * Toggle workflow settings sidebar\n\t */\n\tfunction toggleWorkflowSettings(): void {\n\t\tisWorkflowSettingsOpen = !isWorkflowSettingsOpen;\n\t\t// Close config sidebar if opening workflow settings\n\t\tif (isWorkflowSettingsOpen) {\n\t\t\tcloseConfigSidebar();\n\t\t}\n\t}\n\n\t/**\n\t * Handle workflow configuration save\n\t */\n\tasync function handleWorkflowSave(config: any): Promise<void> {\n\t\t// Update the workflow store\n\t\tif ($workflowStore) {\n\t\t\t$workflowStore.name = config.name;\n\t\t\t$workflowStore.description = config.description;\n\t\t}\n\n\t\t// Close the sidebar\n\t\tisWorkflowSettingsOpen = false;\n\n\t\t// Also save the workflow to the backend\n\t\ttry {\n\t\t\tawait saveWorkflow();\n\t\t} catch (error) {\n\t\t\tconsole.error('Failed to save workflow to backend:', error);\n\t\t\t// Note: We don't throw the error here to avoid breaking the UI flow\n\t\t\t// The user can still manually save via the main Save button if needed\n\t\t}\n\t}\n\n\t// Removed handleWorkflowChange function - no longer needed\n\t// The global store serves as the single source of truth and is already reactive\n\n\t/**\n\t * Save workflow - exposed API function\n\t *\n\t * Integrates with event handlers for enterprise customization.\n\t */\n\tasync function saveWorkflow(): Promise<void> {\n\t\t// Wait for any pending DOM updates before saving\n\t\tawait tick();\n\n\t\t// Use current workflow from global store\n\t\tconst workflowToSave = $workflowStore;\n\n\t\tif (!workflowToSave) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Call onBeforeSave if provided - allows cancellation\n\t\tif (eventHandlers?.onBeforeSave) {\n\t\t\tconst shouldContinue = await eventHandlers.onBeforeSave(workflowToSave);\n\t\t\tif (shouldContinue === false) {\n\t\t\t\t// Save cancelled by event handler\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Show loading toast (if enabled)\n\t\tconst loadingToast = features.showToasts ? apiToasts.loading('Saving workflow') : null;\n\n\t\ttry {\n\t\t\t// Import necessary modules\n\t\t\tconst { workflowApi } = await import('../services/api.js');\n\t\t\tconst { v4: uuidv4 } = await import('uuid');\n\n\t\t\t// Determine the workflow ID\n\t\t\tlet workflowId: string;\n\t\t\tif (workflowToSave.id) {\n\t\t\t\tworkflowId = workflowToSave.id;\n\t\t\t} else {\n\t\t\t\tworkflowId = uuidv4();\n\t\t\t}\n\n\t\t\t// Create workflow object for saving\n\t\t\tconst finalWorkflow: Workflow = {\n\t\t\t\tid: workflowId,\n\t\t\t\tname: workflowToSave.name || 'Untitled Workflow',\n\t\t\t\tdescription: workflowToSave.description || '',\n\t\t\t\tnodes: workflowToSave.nodes || [],\n\t\t\t\tedges: workflowToSave.edges || [],\n\t\t\t\tmetadata: {\n\t\t\t\t\tversion: '1.0.0',\n\t\t\t\t\tcreatedAt: workflowToSave.metadata?.createdAt || new Date().toISOString(),\n\t\t\t\t\tupdatedAt: new Date().toISOString()\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst savedWorkflow = await workflowApi.saveWorkflow(finalWorkflow);\n\n\t\t\t// Update the workflow ID if it changed (new workflow)\n\t\t\t// Keep our current workflow state, only update ID and metadata from backend\n\t\t\tif (savedWorkflow.id && savedWorkflow.id !== finalWorkflow.id) {\n\t\t\t\tworkflowActions.batchUpdate({\n\t\t\t\t\tnodes: finalWorkflow.nodes,\n\t\t\t\t\tedges: finalWorkflow.edges,\n\t\t\t\t\tname: finalWorkflow.name,\n\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t...finalWorkflow.metadata,\n\t\t\t\t\t\t...savedWorkflow.metadata\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Mark as saved (clears dirty state)\n\t\t\tmarkAsSaved();\n\n\t\t\t// Dismiss loading toast and show success\n\t\t\tif (loadingToast) {\n\t\t\t\tdismissToast(loadingToast);\n\t\t\t}\n\t\t\tif (features.showToasts) {\n\t\t\t\tapiToasts.success('Save workflow', 'Workflow saved successfully');\n\t\t\t}\n\n\t\t\t// Call onAfterSave if provided\n\t\t\tif (eventHandlers?.onAfterSave) {\n\t\t\t\tawait eventHandlers.onAfterSave(savedWorkflow);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\t// Dismiss loading toast\n\t\t\tif (loadingToast) {\n\t\t\t\tdismissToast(loadingToast);\n\t\t\t}\n\n\t\t\tconst errorObj = error instanceof Error ? error : new Error('Unknown error occurred');\n\n\t\t\t// Call onSaveError if provided\n\t\t\tif (eventHandlers?.onSaveError && workflowToSave) {\n\t\t\t\tawait eventHandlers.onSaveError(errorObj, workflowToSave);\n\t\t\t}\n\n\t\t\t// Check if parent wants to handle API errors\n\t\t\tlet suppressToast = false;\n\t\t\tif (eventHandlers?.onApiError) {\n\t\t\t\tsuppressToast = eventHandlers.onApiError(errorObj, 'save') === true;\n\t\t\t}\n\n\t\t\t// Show error toast if not suppressed\n\t\t\tif (features.showToasts && !suppressToast) {\n\t\t\t\tapiToasts.error('Save workflow', errorObj.message);\n\t\t\t}\n\n\t\t\tthrow error; // Re-throw to allow calling code to handle if needed\n\t\t}\n\t}\n\n\t/**\n\t * Export workflow - exposed API function\n\t */\n\tasync function exportWorkflow(): Promise<void> {\n\t\ttry {\n\t\t\t// Wait for any pending DOM updates before exporting\n\t\t\tawait tick();\n\n\t\t\t// Use current workflow from global store\n\t\t\tconst workflowToExport = $workflowStore;\n\n\t\t\tif (!workflowToExport) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Create workflow object for export\n\t\t\tconst finalWorkflow = {\n\t\t\t\tid: workflowToExport.id || 'untitled-workflow',\n\t\t\t\tname: workflowToExport.name || 'Untitled Workflow',\n\t\t\t\tnodes: workflowToExport.nodes || [],\n\t\t\t\tedges: workflowToExport.edges || [],\n\t\t\t\tmetadata: {\n\t\t\t\t\tversion: '1.0.0',\n\t\t\t\t\tcreatedAt: workflowToExport.metadata?.createdAt || new Date().toISOString(),\n\t\t\t\t\tupdatedAt: new Date().toISOString()\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Create and download the file\n\t\t\tconst dataStr = JSON.stringify(finalWorkflow, null, 2);\n\t\t\tconst dataBlob = new Blob([dataStr], { type: 'application/json' });\n\t\t\tconst url = URL.createObjectURL(dataBlob);\n\t\t\tconst link = document.createElement('a');\n\t\t\tlink.href = url;\n\t\t\tlink.download = `${finalWorkflow.name}.json`;\n\t\t\tlink.click();\n\t\t\tURL.revokeObjectURL(url);\n\t\t} catch {\n\t\t\t// Export failed\n\t\t}\n\t}\n\n\t// Expose save and export functions globally for external access\n\tif (typeof window !== 'undefined') {\n\t\twindow.flowdropSave = saveWorkflow;\n\t\twindow.flowdropExport = exportWorkflow;\n\t}\n\n\t// Function to handle clicks outside the sidebar\n\tfunction handleCanvasClick(event: MouseEvent): void {\n\t\t// Check if the click is outside the right sidebar\n\t\tconst rightSidebar = document.querySelector('.flowdrop-sidebar--right');\n\t\tif (rightSidebar && !rightSidebar.contains(event.target as Node)) {\n\t\t\t// Close sidebar when clicking outside of it\n\t\t\tif (isConfigSidebarOpen) {\n\t\t\t\tcloseConfigSidebar();\n\t\t\t}\n\t\t}\n\t}\n\n\t// Load node types on mount\n\tonMount(() => {\n\t\t(async () => {\n\t\t\tawait initializeApiEndpoints();\n\t\t\tawait fetchNodeTypes();\n\n\t\t\t// Initialize the workflow store if we have an initial workflow\n\t\t\tif (initialWorkflow) {\n\t\t\t\tworkflowActions.initialize(initialWorkflow);\n\n\t\t\t\t// Emit onWorkflowLoad event\n\t\t\t\tif (eventHandlers?.onWorkflowLoad) {\n\t\t\t\t\teventHandlers.onWorkflowLoad(initialWorkflow);\n\t\t\t\t}\n\t\t\t}\n\t\t})();\n\n\t\t// Listen for workflow settings toggle from main navbar\n\t\tconst handleWorkflowSettingsToggle = () => {\n\t\t\ttoggleWorkflowSettings();\n\t\t};\n\n\t\twindow.addEventListener('workflow-settings-toggle', handleWorkflowSettingsToggle);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('workflow-settings-toggle', handleWorkflowSettingsToggle);\n\t\t};\n\t});\n\n\t// Monitor workflow store changes for testing node drag updates\n\t$effect(() => {\n\t\tconst currentWorkflow = $workflowStore;\n\t\tif (currentWorkflow) {\n\t\t\t// Workflow store updated\n\t\t}\n\t});\n</script>\n\n<svelte:head>\n\t<title>FlowDrop - Visual Workflow Manager</title>\n\t<meta name=\"description\" content=\"A modern drag-and-drop workflow editor for LLM applications\" />\n</svelte:head>\n\n<div\n\tclass=\"flowdrop-app\"\n\tstyle=\"height: {typeof height === 'number' ? `${height}px` : height}; width: {typeof width ===\n\t'number'\n\t\t? `${width}px`\n\t\t: width};\"\n>\n\t<!-- Navbar (conditionally rendered) - hide on workflow edit pages -->\n\t{#if showNavbar && !$page.url.pathname.includes('/edit')}\n\t\t<Navbar\n\t\t\ttitle={breadcrumbTitle()}\n\t\t\tprimaryActions={navbarActions.length > 0\n\t\t\t\t? navbarActions\n\t\t\t\t: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: 'Save',\n\t\t\t\t\t\t\thref: '#save',\n\t\t\t\t\t\t\ticon: 'heroicons:document-arrow-down',\n\t\t\t\t\t\t\tvariant: 'primary',\n\t\t\t\t\t\t\tonclick: (e) => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tsaveWorkflow();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: 'Export',\n\t\t\t\t\t\t\thref: '#export',\n\t\t\t\t\t\t\ticon: 'heroicons:arrow-down-tray',\n\t\t\t\t\t\t\tvariant: 'outline',\n\t\t\t\t\t\t\tonclick: (e) => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\texportWorkflow();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: 'Workflow Settings',\n\t\t\t\t\t\t\thref: '#settings',\n\t\t\t\t\t\t\ticon: 'heroicons:cog-6-tooth',\n\t\t\t\t\t\t\tvariant: 'outline',\n\t\t\t\t\t\t\tonclick: (e) => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\ttoggleWorkflowSettings();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]}\n\t\t\tshowStatus={true}\n\t\t/>\n\t{/if}\n\n\t<!-- Main Content -->\n\t<main class=\"flowdrop-main\">\n\t\t<!-- Status Display -->\n\t\t{#if error}\n\t\t\t<div class=\"flowdrop-status flowdrop-status--error\">\n\t\t\t\t<div class=\"flowdrop-status__content\">\n\t\t\t\t\t<div class=\"flowdrop-flex flowdrop-gap--3\">\n\t\t\t\t\t\t<div class=\"flowdrop-status__indicator flowdrop-status__indicator--error\"></div>\n\t\t\t\t\t\t<span class=\"flowdrop-text--sm flowdrop-font--medium\">Error: {error}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"flowdrop-flex flowdrop-gap--2\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"flowdrop-btn flowdrop-btn--sm flowdrop-btn--outline\"\n\t\t\t\t\t\t\tonclick={retryLoad}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRetry\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"flowdrop-btn flowdrop-btn--sm flowdrop-btn--primary\"\n\t\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\t\tnodes = sampleNodes;\n\t\t\t\t\t\t\t\terror = null;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tUse Sample Data\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"flowdrop-btn flowdrop-btn--sm flowdrop-btn--outline\"\n\t\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\t\tconst defaultUrl = '/api/flowdrop';\n\t\t\t\t\t\t\t\tconst newUrl = prompt('Enter Backend API URL:', defaultUrl);\n\t\t\t\t\t\t\t\tif (newUrl) {\n\t\t\t\t\t\t\t\t\tconst endpointConfig = createEndpointConfig(newUrl);\n\t\t\t\t\t\t\t\t\tsetEndpointConfig(endpointConfig);\n\t\t\t\t\t\t\t\t\tfetchNodeTypes();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSet API URL\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"flowdrop-btn flowdrop-btn--sm flowdrop-btn--outline\"\n\t\t\t\t\t\t\tonclick={testApiConnection}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tTest API\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"flowdrop-btn flowdrop-btn--ghost flowdrop-btn--sm\"\n\t\t\t\t\t\t\tonclick={() => (error = null)}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<!-- Workflow Editor with Sidebars -->\n\t\t<div class=\"flowdrop-editor-container\">\n\t\t\t<!-- Left Sidebar - Node Components (conditionally rendered) -->\n\t\t\t{#if !disableSidebar}\n\t\t\t\t<div class=\"flowdrop-sidebar flowdrop-sidebar--left\">\n\t\t\t\t\t<NodeSidebar {nodes} />\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<!-- Main Editor Area -->\n\t\t\t<div\n\t\t\t\tclass=\"flowdrop-editor-main\"\n\t\t\t\tclass:pipeline-view={!!pipelineId}\n\t\t\t\tonclick={handleCanvasClick}\n\t\t\t\tonkeydown={(e) => e.key === 'Escape' && closeConfigSidebar()}\n\t\t\t\trole=\"button\"\n\t\t\t\ttabindex=\"0\"\n\t\t\t\taria-label=\"Workflow canvas - click to close sidebar\"\n\t\t\t>\n\t\t\t\t<WorkflowEditor\n\t\t\t\t\tbind:this={workflowEditorRef}\n\t\t\t\t\t{nodes}\n\t\t\t\t\t{height}\n\t\t\t\t\t{width}\n\t\t\t\t\t{endpointConfig}\n\t\t\t\t\t{isConfigSidebarOpen}\n\t\t\t\t\tselectedNodeForConfig={selectedNodeForConfig()}\n\t\t\t\t\t{openConfigSidebar}\n\t\t\t\t\t{closeConfigSidebar}\n\t\t\t\t\t{lockWorkflow}\n\t\t\t\t\t{readOnly}\n\t\t\t\t\t{nodeStatuses}\n\t\t\t\t\t{pipelineId}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<!-- Right Sidebar - Configuration or Workflow Settings (conditionally rendered) -->\n\t\t\t{#if !disableSidebar && isWorkflowSettingsOpen}\n\t\t\t\t<ConfigSidebar\n\t\t\t\t\tisOpen={isWorkflowSettingsOpen}\n\t\t\t\t\ttitle=\"Workflow Settings\"\n\t\t\t\t\tconfigSchema={workflowConfigSchema}\n\t\t\t\t\tconfigValues={workflowConfigValues}\n\t\t\t\t\tonSave={handleWorkflowSave}\n\t\t\t\t\tonClose={() => (isWorkflowSettingsOpen = false)}\n\t\t\t\t/>\n\t\t\t{:else if !disableSidebar && selectedNodeForConfig()}\n\t\t\t\t<div class=\"flowdrop-sidebar flowdrop-sidebar--right\">\n\t\t\t\t\t<div class=\"flowdrop-config-sidebar\">\n\t\t\t\t\t\t<!-- Header -->\n\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__header\">\n\t\t\t\t\t\t\t<h2 class=\"flowdrop-config-sidebar__title\">{selectedNodeForConfig().data.label}</h2>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__close\"\n\t\t\t\t\t\t\t\tonclick={closeConfigSidebar}\n\t\t\t\t\t\t\t\taria-label=\"Close configuration sidebar\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<!-- Content -->\n\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__content\">\n\t\t\t\t\t\t\t<!-- Node Details -->\n\t\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__section\">\n\t\t\t\t\t\t\t\t<h3 class=\"flowdrop-config-sidebar__section-title\">Node Details</h3>\n\t\t\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__details\">\n\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__detail\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-config-sidebar__detail-label\">Node ID:</span>\n\t\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__detail-value-with-copy\">\n\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__detail-value\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"font-family: monospace;\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{selectedNodeForConfig().id}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flowdrop-config-sidebar__copy-btn\"\n\t\t\t\t\t\t\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tnavigator.clipboard.writeText(selectedNodeForConfig().id);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Copy Node ID\"\n\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"Copy node ID to clipboard\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__detail\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-config-sidebar__detail-label\">Type:</span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-config-sidebar__detail-value\"\n\t\t\t\t\t\t\t\t\t\t\t>{selectedNodeForConfig().data.metadata?.type ||\n\t\t\t\t\t\t\t\t\t\t\t\tselectedNodeForConfig().type}</span\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__detail\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-config-sidebar__detail-label\">Category:</span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-config-sidebar__detail-value\"\n\t\t\t\t\t\t\t\t\t\t\t>{selectedNodeForConfig().data.metadata?.category || 'general'}</span\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__detail\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"flowdrop-config-sidebar__detail-label\">Description:</span>\n\t\t\t\t\t\t\t\t\t\t<p class=\"flowdrop-config-sidebar__detail-description\">\n\t\t\t\t\t\t\t\t\t\t\t{selectedNodeForConfig().data.metadata?.description || 'Node configuration'}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<!-- Configuration Form -->\n\t\t\t\t\t\t\t<div class=\"flowdrop-config-sidebar__section\">\n\t\t\t\t\t\t\t\t<h3 class=\"flowdrop-config-sidebar__section-title\">Configuration</h3>\n\t\t\t\t\t\t\t\t<ConfigForm\n\t\t\t\t\t\t\t\t\tnode={selectedNodeForConfig()}\n\t\t\t\t\t\t\t\t\tonSave={(updatedConfig) => {\n\t\t\t\t\t\t\t\t\t\tconst currentNode = selectedNodeForConfig();\n\t\t\t\t\t\t\t\t\t\tif (selectedNodeId && currentNode) {\n\t\t\t\t\t\t\t\t\t\t\t// Handle nodeType switching if nodeType is in the config\n\t\t\t\t\t\t\t\t\t\t\tlet nodeUpdates: Record<string, unknown> = {\n\t\t\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...currentNode.data,\n\t\t\t\t\t\t\t\t\t\t\t\t\tconfig: updatedConfig\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t\t\t// NOTE: We do NOT change the node's type field anymore\n\t\t\t\t\t\t\t\t\t\t\t// All nodes use 'universalNode' and UniversalNode handles internal switching\n\t\t\t\t\t\t\t\t\t\t\tworkflowActions.updateNode(selectedNodeId, nodeUpdates);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tcloseConfigSidebar();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonCancel={closeConfigSidebar}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t</main>\n</div>\n\n<style>\n\t.flowdrop-app {\n\t\tbackground: linear-gradient(135deg, #f9fafb 0%, #e0e7ff 50%, #c7d2fe 100%);\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\toverflow: hidden;\n\t}\n\n\t.flowdrop-main {\n\t\tflex: 1;\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 0;\n\t\toverflow: hidden;\n\t}\n\n\t.flowdrop-status {\n\t\tbackground-color: #eff6ff;\n\t\tborder-bottom: 1px solid #bfdbfe;\n\t\tpadding: 1rem;\n\t}\n\n\t.flowdrop-status--error {\n\t\tbackground-color: #fef2f2;\n\t\tborder-bottom: 1px solid #fecaca;\n\t}\n\n\t.flowdrop-status__content {\n\t\tmax-width: 80rem;\n\t\tmargin: 0 auto;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t}\n\n\t.flowdrop-status__indicator {\n\t\twidth: 0.5rem;\n\t\theight: 0.5rem;\n\t\tborder-radius: 50%;\n\t}\n\n\t.flowdrop-status__indicator--error {\n\t\tbackground-color: #ef4444;\n\t}\n\n\t.flowdrop-btn {\n\t\tpadding: 0.375rem 0.75rem;\n\t\tborder-radius: 0.375rem;\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 500;\n\t\tcursor: pointer;\n\t\tborder: 1px solid transparent;\n\t\ttransition: all 0.2s ease-in-out;\n\t}\n\n\t.flowdrop-btn--sm {\n\t\tpadding: 0.25rem 0.5rem;\n\t\tfont-size: 0.625rem;\n\t}\n\n\t.flowdrop-btn--outline {\n\t\tbackground-color: transparent;\n\t\tborder-color: #d1d5db;\n\t\tcolor: #374151;\n\t}\n\n\t.flowdrop-btn--outline:hover {\n\t\tbackground-color: #f9fafb;\n\t\tborder-color: #9ca3af;\n\t}\n\n\t.flowdrop-btn--primary {\n\t\tbackground-color: #3b82f6;\n\t\tborder-color: #3b82f6;\n\t\tcolor: #ffffff;\n\t}\n\n\t.flowdrop-btn--primary:hover {\n\t\tbackground-color: #2563eb;\n\t\tborder-color: #2563eb;\n\t}\n\n\t.flowdrop-btn--ghost {\n\t\tbackground-color: transparent;\n\t\tborder-color: transparent;\n\t\tcolor: #6b7280;\n\t}\n\n\t.flowdrop-btn--ghost:hover {\n\t\tbackground-color: #f3f4f6;\n\t\tcolor: #374151;\n\t}\n\n\t.flowdrop-flex {\n\t\tdisplay: flex;\n\t}\n\n\t.flowdrop-gap--2 {\n\t\tgap: 0.5rem;\n\t}\n\n\t.flowdrop-gap--3 {\n\t\tgap: 0.75rem;\n\t}\n\n\t.flowdrop-text--sm {\n\t\tfont-size: 0.875rem;\n\t\tline-height: 1.25rem;\n\t}\n\n\t.flowdrop-font--medium {\n\t\tfont-weight: 500;\n\t}\n\n\t@keyframes spin {\n\t\t0% {\n\t\t\ttransform: rotate(0deg);\n\t\t}\n\t\t100% {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t.flowdrop-editor-container {\n\t\tflex: 1;\n\t\tposition: relative;\n\t\tmin-height: 0;\n\t\toverflow: hidden;\n\t\tdisplay: flex;\n\t}\n\n\t.flowdrop-sidebar {\n\t\tbackground-color: #ffffff;\n\t\tborder: 1px solid #e5e7eb;\n\t\toverflow-y: auto;\n\t\toverflow-x: hidden;\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\t/* Custom scrollbar styling */\n\t\tscrollbar-width: thin;\n\t\tscrollbar-color: #cbd5e1 #f1f5f9;\n\t}\n\n\t.flowdrop-sidebar::-webkit-scrollbar {\n\t\twidth: 8px;\n\t}\n\n\t.flowdrop-sidebar::-webkit-scrollbar-track {\n\t\tbackground: #f1f5f9;\n\t\tborder-radius: 4px;\n\t}\n\n\t.flowdrop-sidebar::-webkit-scrollbar-thumb {\n\t\tbackground: #cbd5e1;\n\t\tborder-radius: 4px;\n\t}\n\n\t.flowdrop-sidebar::-webkit-scrollbar-thumb:hover {\n\t\tbackground: #94a3b8;\n\t}\n\n\t.flowdrop-sidebar--left {\n\t\twidth: 320px;\n\t\tmin-width: 320px;\n\t\tborder-right: 1px solid #e5e7eb;\n\t\tbox-shadow: 2px 0 4px rgba(0, 0, 0, 0.1);\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t.flowdrop-sidebar--right {\n\t\tborder-left: 1px solid #e5e7eb;\n\t\tbox-shadow: -2px 0 4px rgba(0, 0, 0, 0.1);\n\t}\n\n\t.flowdrop-editor-main {\n\t\tflex: 1;\n\t\tposition: relative;\n\t\tmin-width: 0;\n\t\toverflow: hidden;\n\t\tbackground-color: #1f2937;\n\t}\n\n\t/* Configuration Sidebar Styles */\n\t.flowdrop-config-sidebar {\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tbackground-color: #ffffff;\n\t}\n\n\t.flowdrop-config-sidebar__header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tpadding: 1rem;\n\t\tborder-bottom: 1px solid #e5e7eb;\n\t\tbackground-color: #f9fafb;\n\t}\n\n\t.flowdrop-config-sidebar__title {\n\t\tmargin: 0;\n\t\tfont-size: 1.125rem;\n\t\tfont-weight: 600;\n\t\tcolor: #111827;\n\t}\n\n\t.flowdrop-config-sidebar__close {\n\t\tbackground: none;\n\t\tborder: none;\n\t\tfont-size: 1.5rem;\n\t\tcursor: pointer;\n\t\tcolor: #6b7280;\n\t\tpadding: 0.25rem;\n\t\tborder-radius: 0.25rem;\n\t\ttransition: color 0.2s;\n\t}\n\n\t.flowdrop-config-sidebar__close:hover {\n\t\tcolor: #374151;\n\t\tbackground-color: #f3f4f6;\n\t}\n\n\t.flowdrop-config-sidebar__content {\n\t\tflex: 1;\n\t\toverflow-y: auto;\n\t\tpadding: 1rem;\n\t}\n\n\t.flowdrop-config-sidebar__section {\n\t\tmargin-bottom: 1.5rem;\n\t}\n\n\t.flowdrop-config-sidebar__section-title {\n\t\tmargin: 0 0 0.75rem 0;\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 600;\n\t\tcolor: #374151;\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t}\n\n\t.flowdrop-config-sidebar__details {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.5rem;\n\t}\n\n\t.flowdrop-config-sidebar__detail {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.25rem;\n\t}\n\n\t.flowdrop-config-sidebar__detail-label {\n\t\tfont-size: 0.75rem;\n\t\tfont-weight: 500;\n\t\tcolor: #6b7280;\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t}\n\n\t.flowdrop-config-sidebar__detail-value {\n\t\tfont-size: 0.875rem;\n\t\tcolor: #111827;\n\t\tfont-weight: 500;\n\t}\n\n\t.flowdrop-config-sidebar__detail-value-with-copy {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t\tbackground-color: #f3f4f6;\n\t\tpadding: 0.5rem;\n\t\tborder-radius: 0.375rem;\n\t\tborder: 1px solid #e5e7eb;\n\t}\n\n\t.flowdrop-config-sidebar__detail-value-with-copy .flowdrop-config-sidebar__detail-value {\n\t\tflex: 1;\n\t\tfont-size: 0.8125rem;\n\t\tword-break: break-all;\n\t}\n\n\t.flowdrop-config-sidebar__copy-btn {\n\t\tbackground: white;\n\t\tborder: 1px solid #d1d5db;\n\t\tborder-radius: 0.25rem;\n\t\tpadding: 0.25rem 0.5rem;\n\t\tcursor: pointer;\n\t\tfont-size: 1rem;\n\t\ttransition: all 0.2s;\n\t\tflex-shrink: 0;\n\t}\n\n\t.flowdrop-config-sidebar__copy-btn:hover {\n\t\tbackground-color: #f9fafb;\n\t\tborder-color: #9ca3af;\n\t\ttransform: scale(1.05);\n\t}\n\n\t.flowdrop-config-sidebar__copy-btn:active {\n\t\ttransform: scale(0.95);\n\t}\n\n\t.flowdrop-config-sidebar__detail-description {\n\t\tmargin: 0;\n\t\tfont-size: 0.875rem;\n\t\tcolor: #6b7280;\n\t\tline-height: 1.4;\n\t}\n</style>\n","/** @import { TemplateNode } from '#client' */\nimport { hydrate_node, hydrating, set_hydrate_node, set_hydrating } from '../hydration.js';\nimport { create_text, get_first_child, get_next_sibling } from '../operations.js';\nimport { block } from '../../reactivity/effects.js';\nimport { COMMENT_NODE, HEAD_EFFECT } from '#client/constants';\nimport { HYDRATION_START } from '../../../../constants.js';\n\n/**\n * @type {Node | undefined}\n */\nlet head_anchor;\n\nexport function reset_head_anchor() {\n\thead_anchor = undefined;\n}\n\n/**\n * @param {(anchor: Node) => void} render_fn\n * @returns {void}\n */\nexport function head(render_fn) {\n\t// The head function may be called after the first hydration pass and ssr comment nodes may still be present,\n\t// therefore we need to skip that when we detect that we're not in hydration mode.\n\tlet previous_hydrate_node = null;\n\tlet was_hydrating = hydrating;\n\n\t/** @type {Comment | Text} */\n\tvar anchor;\n\n\tif (hydrating) {\n\t\tprevious_hydrate_node = hydrate_node;\n\n\t\t// There might be multiple head blocks in our app, so we need to account for each one needing independent hydration.\n\t\tif (head_anchor === undefined) {\n\t\t\thead_anchor = /** @type {TemplateNode} */ (get_first_child(document.head));\n\t\t}\n\n\t\twhile (\n\t\t\thead_anchor !== null &&\n\t\t\t(head_anchor.nodeType !== COMMENT_NODE ||\n\t\t\t\t/** @type {Comment} */ (head_anchor).data !== HYDRATION_START)\n\t\t) {\n\t\t\thead_anchor = /** @type {TemplateNode} */ (get_next_sibling(head_anchor));\n\t\t}\n\n\t\t// If we can't find an opening hydration marker, skip hydration (this can happen\n\t\t// if a framework rendered body but not head content)\n\t\tif (head_anchor === null) {\n\t\t\tset_hydrating(false);\n\t\t} else {\n\t\t\thead_anchor = set_hydrate_node(/** @type {TemplateNode} */ (get_next_sibling(head_anchor)));\n\t\t}\n\t}\n\n\tif (!hydrating) {\n\t\tanchor = document.head.appendChild(create_text());\n\t}\n\n\ttry {\n\t\tblock(() => render_fn(anchor), HEAD_EFFECT);\n\t} finally {\n\t\tif (was_hydrating) {\n\t\t\tset_hydrating(true);\n\t\t\thead_anchor = hydrate_node; // so that next head block starts from the correct node\n\t\t\tset_hydrate_node(/** @type {TemplateNode} */ (previous_hydrate_node));\n\t\t}\n\t}\n}\n","<!--\n  Pipeline Status Component\n  Displays workflow execution status using the App component in read-only mode\n  Styled with BEM syntax\n-->\n\n<script lang=\"ts\">\n\timport { onMount } from 'svelte';\n\timport App from './App.svelte';\n\timport LogsSidebar from './LogsSidebar.svelte';\n\timport { FlowDropApiClient } from '../api/client.js';\n\timport type { Workflow } from '../types/index.js';\n\timport type { EndpointConfig } from '../config/endpoints.js';\n\n\tinterface Props {\n\t\tpipelineId: string;\n\t\tworkflow: Workflow;\n\t\tapiClient?: FlowDropApiClient;\n\t\tbaseUrl?: string;\n\t\tendpointConfig?: EndpointConfig;\n\t\tonActionsReady?: (\n\t\t\tactions: Array<{\n\t\t\t\tlabel: string;\n\t\t\t\thref: string;\n\t\t\t\ticon?: string;\n\t\t\t\tvariant?: 'primary' | 'secondary' | 'outline';\n\t\t\t\tonclick?: (event: Event) => void;\n\t\t\t}>\n\t\t) => void;\n\t}\n\n\tlet { pipelineId, workflow, apiClient, baseUrl, endpointConfig, onActionsReady }: Props =\n\t\t$props();\n\n\t// Initialize API client if not provided\n\tconst client =\n\t\tapiClient || new FlowDropApiClient(endpointConfig?.baseUrl || baseUrl || '/api/flowdrop');\n\n\t// Pipeline status and job data\n\tlet pipelineStatus = $state<string>('unknown');\n\tlet jobStatusData = $state<{\n\t\tjobs: any[];\n\t\tnode_statuses: Record<string, any>;\n\t\tstatus_summary: {\n\t\t\ttotal: number;\n\t\t\tpending: number;\n\t\t\trunning: number;\n\t\t\tcompleted: number;\n\t\t\tfailed: number;\n\t\t\tcancelled: number;\n\t\t};\n\t}>({\n\t\tjobs: [],\n\t\tnode_statuses: {},\n\t\tstatus_summary: {\n\t\t\ttotal: 0,\n\t\t\tpending: 0,\n\t\t\trunning: 0,\n\t\t\tcompleted: 0,\n\t\t\tfailed: 0,\n\t\t\tcancelled: 0\n\t\t}\n\t});\n\n\t// Node statuses for visual indicators\n\tlet nodeStatuses = $state<Record<string, 'pending' | 'running' | 'completed' | 'error'>>({});\n\n\t// Loading and error states\n\tlet isLoadingJobStatus = $state(false);\n\n\t// Logs sidebar state\n\tlet isLogsSidebarOpen = $state(false);\n\tlet logs = $state<Array<{ level: string; message: string; timestamp: string }>>([]);\n\n\t/**\n\t * Fetch pipeline data including job information\n\t */\n\tasync function fetchPipelineData(): Promise<void> {\n\t\tif (!pipelineId) return;\n\n\t\ttry {\n\t\t\tisLoadingJobStatus = true;\n\t\t\tconst pipelineData = await client.getPipelineData(pipelineId);\n\n\t\t\tpipelineStatus = pipelineData.status;\n\t\t\tjobStatusData = {\n\t\t\t\tjobs: pipelineData.jobs || [],\n\t\t\t\tnode_statuses: pipelineData.node_statuses || {},\n\t\t\t\tstatus_summary: pipelineData.job_status_summary || {\n\t\t\t\t\ttotal: 0,\n\t\t\t\t\tpending: 0,\n\t\t\t\t\trunning: 0,\n\t\t\t\t\tcompleted: 0,\n\t\t\t\t\tfailed: 0,\n\t\t\t\t\tcancelled: 0\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Update node statuses based on job data\n\t\t\tif (jobStatusData.node_statuses) {\n\t\t\t\tconst newNodeStatuses: Record<string, 'pending' | 'running' | 'completed' | 'error'> = {};\n\n\t\t\t\t// Initialize all nodes as pending\n\t\t\t\tif (workflow && workflow.nodes) {\n\t\t\t\t\tworkflow.nodes.forEach((node) => {\n\t\t\t\t\t\tnewNodeStatuses[node.id] = 'pending';\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Override with actual job statuses\n\t\t\t\tfor (const nodeId in jobStatusData.node_statuses) {\n\t\t\t\t\tconst status = jobStatusData.node_statuses[nodeId].status;\n\t\t\t\t\tif (['pending', 'running', 'completed', 'failed', 'cancelled'].includes(status)) {\n\t\t\t\t\t\tnewNodeStatuses[nodeId] = status === 'failed' ? 'error' : status;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnodeStatuses = newNodeStatuses;\n\t\t\t}\n\n\t\t\taddLog('info', `Job status updated: ${jobStatusData.status_summary.total} total jobs`);\n\t\t} catch (error) {\n\t\t\tconsole.error('Failed to fetch pipeline data:', error);\n\t\t\taddLog(\n\t\t\t\t'error',\n\t\t\t\t`Failed to fetch pipeline data: ${error instanceof Error ? error.message : 'Unknown error'}`\n\t\t\t);\n\t\t} finally {\n\t\t\tisLoadingJobStatus = false;\n\t\t}\n\t}\n\n\t/**\n\t * Add a log entry\n\t */\n\tfunction addLog(level: string, message: string): void {\n\t\tlogs = [\n\t\t\t...logs,\n\t\t\t{\n\t\t\t\tlevel,\n\t\t\t\tmessage,\n\t\t\t\ttimestamp: new Date().toISOString()\n\t\t\t}\n\t\t];\n\t}\n\n\t/**\n\t * Toggle logs sidebar\n\t */\n\tfunction toggleLogsSidebar(): void {\n\t\tisLogsSidebarOpen = !isLogsSidebarOpen;\n\t}\n\n\t/**\n\t * Get pipeline actions for the parent navbar\n\t */\n\tfunction getPipelineActions() {\n\t\treturn [\n\t\t\t{\n\t\t\t\tlabel: isLoadingJobStatus ? 'Refreshing...' : 'Refresh Status',\n\t\t\t\thref: '#refresh',\n\t\t\t\ticon: isLoadingJobStatus ? 'mdi:loading' : 'mdi:refresh',\n\t\t\t\tvariant: 'outline' as const,\n\t\t\t\tonclick: (e: Event) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tfetchPipelineData();\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: 'View Logs',\n\t\t\t\thref: '#logs',\n\t\t\t\ticon: 'mdi:file-document-outline',\n\t\t\t\tvariant: 'outline' as const,\n\t\t\t\tonclick: (e: Event) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\ttoggleLogsSidebar();\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t}\n\n\t// Fetch pipeline data on mount\n\tonMount(() => {\n\t\tfetchPipelineData();\n\t\t// Expose actions to parent\n\t\tif (onActionsReady) {\n\t\t\tonActionsReady(getPipelineActions());\n\t\t}\n\n\t\t// Listen for custom events from the layout navbar\n\t\tconst handleRefresh = () => fetchPipelineData();\n\t\tconst handleViewLogs = () => toggleLogsSidebar();\n\n\t\twindow.addEventListener('pipeline-refresh', handleRefresh);\n\t\twindow.addEventListener('pipeline-view-logs', handleViewLogs);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('pipeline-refresh', handleRefresh);\n\t\t\twindow.removeEventListener('pipeline-view-logs', handleViewLogs);\n\t\t};\n\t});\n\n\t// Send pipeline breadcrumbs to layout when they change\n\t$effect(() => {\n\t\tif (pipelineStatus && pipelineId && workflow) {\n\t\t\tconst breadcrumbs = [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Home',\n\t\t\t\t\thref: '/',\n\t\t\t\t\ticon: 'mdi:home'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Workflows',\n\t\t\t\t\thref: '/',\n\t\t\t\t\ticon: 'mdi:view-list'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: workflow.name || 'Workflow',\n\t\t\t\t\thref: `/workflow/${workflow.id}/edit`,\n\t\t\t\t\ticon: 'mdi:workflow'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Pipelines',\n\t\t\t\t\thref: `/workflow/${workflow.id}/pipelines`,\n\t\t\t\t\ticon: 'mdi:source-branch'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: `Pipeline ${pipelineId} - ${pipelineStatus}`,\n\t\t\t\t\ticon: 'mdi:play-circle'\n\t\t\t\t}\n\t\t\t];\n\n\t\t\twindow.dispatchEvent(\n\t\t\t\tnew CustomEvent('page-breadcrumbs-update', {\n\t\t\t\t\tdetail: { breadcrumbs }\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t});\n\n\t// Update actions when loading state changes\n\t$effect(() => {\n\t\tif (onActionsReady) {\n\t\t\tonActionsReady(getPipelineActions());\n\t\t}\n\t});\n\n\t// Auto-refresh pipeline data every 5 seconds when pipeline is running\n\tlet refreshInterval: NodeJS.Timeout | null = null;\n\n\t$effect(() => {\n\t\t// Clear existing interval\n\t\tif (refreshInterval) {\n\t\t\tclearInterval(refreshInterval);\n\t\t\trefreshInterval = null;\n\t\t}\n\n\t\t// Only start polling if pipeline is running\n\t\tif (pipelineStatus === 'running' && pipelineId) {\n\t\t\trefreshInterval = setInterval(() => {\n\t\t\t\tfetchPipelineData();\n\t\t\t}, 5000);\n\t\t}\n\t});\n\n\t// Cleanup on unmount\n\tonMount(() => {\n\t\treturn () => {\n\t\t\tif (refreshInterval) {\n\t\t\t\tclearInterval(refreshInterval);\n\t\t\t\trefreshInterval = null;\n\t\t\t}\n\t\t};\n\t});\n</script>\n\n<div class=\"pipeline-status-container\">\n\t<!-- Workflow Visualization using App component -->\n\t<App\n\t\t{workflow}\n\t\theight=\"100vh\"\n\t\twidth=\"100%\"\n\t\tshowNavbar={false}\n\t\tdisableSidebar={true}\n\t\tlockWorkflow={true}\n\t\treadOnly={true}\n\t\t{nodeStatuses}\n\t\t{pipelineId}\n\t\t{endpointConfig}\n\t/>\n\n\t<!-- Logs Sidebar -->\n\t{#if isLogsSidebarOpen}\n\t\t<LogsSidebar {logs} isOpen={isLogsSidebarOpen} onClose={() => (isLogsSidebarOpen = false)} />\n\t{/if}\n</div>\n\n<style>\n\t.pipeline-status-container {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\theight: 100vh;\n\t\tbackground: #f3f4f6;\n\t}\n</style>\n","/**\n * Configuration utilities for FlowDrop Editor\n */\nimport { createEndpointConfig } from '../config/endpoints.js';\n/**\n * Create default editor features configuration\n */\nexport function createDefaultFeatures() {\n    return {\n        dragAndDrop: true,\n        nodeEditing: true,\n        execution: true,\n        saveWorkflow: true,\n        loadWorkflow: true,\n        undoRedo: true,\n        nodeSearch: true,\n        nodeCategories: true,\n        nodeValidation: true,\n        collaboration: false,\n        templates: false,\n        importExport: false\n    };\n}\n/**\n * Create default UI configuration\n */\nexport function createDefaultUIConfig() {\n    return {\n        showSidebar: true,\n        showToolbar: true,\n        showMinimap: true,\n        showGrid: true,\n        gridSize: 20,\n        nodeSpacing: 100,\n        canvasPadding: 50,\n        navbarHeight: 60, // Default navbar height in pixels (current demo height)\n        zoom: {\n            min: 0.1,\n            max: 2,\n            default: 1\n        },\n        colors: {\n            primary: '#3b82f6',\n            secondary: '#64748b',\n            accent: '#f59e0b',\n            background: '#ffffff',\n            text: '#1f2937'\n        },\n        cssClasses: {}\n    };\n}\n/**\n * Create default API configuration\n */\nexport function createDefaultAPIConfig() {\n    return {\n        endpoints: createEndpointConfig('/api/flowdrop'),\n        timeout: 30000,\n        retry: {\n            enabled: true,\n            maxAttempts: 3,\n            delay: 1000\n        },\n        auth: {\n            type: 'none'\n        },\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    };\n}\n/**\n * Create default execution configuration\n */\nexport function createDefaultExecutionConfig() {\n    return {\n        realTimeUpdates: true,\n        timeout: 300,\n        maxConcurrent: 5,\n        showProgress: true,\n        autoSaveState: true,\n        caching: {\n            enabled: true,\n            ttl: 3600\n        }\n    };\n}\n/**\n * Create default storage configuration\n */\nexport function createDefaultStorageConfig() {\n    return {\n        type: 'api',\n        autoSaveInterval: 5000,\n        maxUndoSteps: 50,\n        keyPrefix: 'flowdrop_'\n    };\n}\n/**\n * Create default workflow editor configuration\n */\nexport function createDefaultConfig(endpointConfig) {\n    return {\n        theme: 'auto',\n        features: createDefaultFeatures(),\n        ui: createDefaultUIConfig(),\n        api: {\n            ...createDefaultAPIConfig(),\n            endpoints: endpointConfig || createEndpointConfig('/api/flowdrop')\n        },\n        ports: {\n            dataTypes: [],\n            compatibilityRules: [],\n            defaultDataType: 'mixed'\n        },\n        execution: createDefaultExecutionConfig(),\n        storage: createDefaultStorageConfig()\n    };\n}\n/**\n * Merge configuration with defaults\n */\nexport function mergeConfig(userConfig, defaultConfig) {\n    return {\n        ...defaultConfig,\n        ...userConfig,\n        features: {\n            ...defaultConfig.features,\n            ...userConfig.features\n        },\n        ui: {\n            ...defaultConfig.ui,\n            ...userConfig.ui,\n            zoom: {\n                ...defaultConfig.ui.zoom,\n                ...userConfig.ui?.zoom\n            },\n            colors: {\n                ...defaultConfig.ui.colors,\n                ...userConfig.ui?.colors\n            },\n            cssClasses: {\n                ...defaultConfig.ui.cssClasses,\n                ...userConfig.ui?.cssClasses\n            }\n        },\n        api: {\n            ...defaultConfig.api,\n            ...userConfig.api,\n            retry: {\n                ...defaultConfig.api.retry,\n                ...userConfig.api?.retry\n            },\n            auth: {\n                ...defaultConfig.api.auth,\n                ...userConfig.api?.auth\n            },\n            headers: {\n                ...defaultConfig.api.headers,\n                ...userConfig.api?.headers\n            },\n            endpoints: {\n                ...defaultConfig.api.endpoints,\n                ...userConfig.api?.endpoints\n            }\n        },\n        execution: {\n            ...defaultConfig.execution,\n            ...userConfig.execution,\n            caching: {\n                ...defaultConfig.execution.caching,\n                ...userConfig.execution?.caching\n            }\n        },\n        storage: {\n            ...defaultConfig.storage,\n            ...userConfig.storage\n        }\n    };\n}\n/**\n * Validate configuration\n */\nexport function validateConfig(config) {\n    const errors = [];\n    if (!config.features) {\n        errors.push('features configuration is required');\n    }\n    if (!config.ui) {\n        errors.push('ui configuration is required');\n    }\n    if (!config.api) {\n        errors.push('api configuration is required');\n    }\n    if (!config.execution) {\n        errors.push('execution configuration is required');\n    }\n    if (!config.storage) {\n        errors.push('storage configuration is required');\n    }\n    // Validate API configuration\n    if (config.api.timeout <= 0) {\n        errors.push('API timeout must be greater than 0');\n    }\n    if (config.api.retry.maxAttempts < 0) {\n        errors.push('Retry max attempts must be non-negative');\n    }\n    // Validate execution configuration\n    if (config.execution.timeout <= 0) {\n        errors.push('Execution timeout must be greater than 0');\n    }\n    if (config.execution.maxConcurrent <= 0) {\n        errors.push('Max concurrent executions must be greater than 0');\n    }\n    // Validate UI configuration\n    if (config.ui.gridSize <= 0) {\n        errors.push('Grid size must be greater than 0');\n    }\n    if (config.ui.nodeSpacing <= 0) {\n        errors.push('Node spacing must be greater than 0');\n    }\n    if (config.ui.zoom.min >= config.ui.zoom.max) {\n        errors.push('Zoom min must be less than zoom max');\n    }\n    return errors;\n}\n/**\n * Create default configuration\n * For library usage, all configuration should be provided at runtime\n * This function is kept for backward compatibility but returns defaults\n *\n * @deprecated Use createDefaultConfig() instead and pass runtime configuration\n */\nexport function createConfigFromEnv() {\n    // Return default configuration without environment variables\n    // Configuration should be provided at runtime via props/parameters\n    const apiBaseUrl = '/api/flowdrop';\n    const endpointConfig = createEndpointConfig(apiBaseUrl);\n    return createDefaultConfig(endpointConfig);\n}\n","/**\n * In-memory workflow storage service\n * This can be replaced with a database implementation later\n */\nimport { v4 as uuidv4 } from 'uuid';\n// In-memory storage\nconst workflows = new Map();\n/**\n * Generate a unique workflow ID using UUID v4\n */\nfunction generateWorkflowId() {\n    return uuidv4();\n}\n/**\n * Save a workflow\n */\nexport async function saveWorkflow(workflow) {\n    const id = generateWorkflowId();\n    const newWorkflow = {\n        ...workflow,\n        id,\n        metadata: {\n            version: '1.0.0',\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString(),\n            ...workflow.metadata\n        }\n    };\n    workflows.set(id, newWorkflow);\n    return newWorkflow;\n}\n/**\n * Update an existing workflow\n */\nexport async function updateWorkflow(id, workflow) {\n    const existing = workflows.get(id);\n    if (!existing) {\n        return null;\n    }\n    const updatedWorkflow = {\n        ...existing,\n        ...workflow,\n        id, // Ensure ID doesn't change\n        metadata: {\n            version: existing.metadata?.version || '1.0.0',\n            createdAt: existing.metadata?.createdAt || new Date().toISOString(),\n            updatedAt: new Date().toISOString(),\n            author: workflow.metadata?.author || existing.metadata?.author,\n            tags: workflow.metadata?.tags || existing.metadata?.tags\n        }\n    };\n    workflows.set(id, updatedWorkflow);\n    return updatedWorkflow;\n}\n/**\n * Get a workflow by ID\n */\nexport async function getWorkflow(id) {\n    return workflows.get(id) || null;\n}\n/**\n * Get all workflows with optional filtering\n */\nexport async function getWorkflows(options) {\n    let filteredWorkflows = Array.from(workflows.values());\n    // Apply search filter\n    if (options?.search) {\n        const searchLower = options.search.toLowerCase();\n        filteredWorkflows = filteredWorkflows.filter((workflow) => workflow.name.toLowerCase().includes(searchLower) ||\n            workflow.description?.toLowerCase().includes(searchLower) ||\n            workflow.metadata?.tags?.some((tag) => tag.toLowerCase().includes(searchLower)));\n    }\n    // Sort by updated date (newest first)\n    filteredWorkflows.sort((a, b) => new Date(b.metadata?.updatedAt || 0).getTime() -\n        new Date(a.metadata?.updatedAt || 0).getTime());\n    // Apply pagination\n    const offset = options?.offset || 0;\n    const limit = options?.limit || filteredWorkflows.length;\n    return filteredWorkflows.slice(offset, offset + limit);\n}\n/**\n * Delete a workflow\n */\nexport async function deleteWorkflow(id) {\n    return workflows.delete(id);\n}\n/**\n * Get workflow count\n */\nexport async function getWorkflowCount() {\n    return workflows.size;\n}\n/**\n * Initialize with sample workflows (for development)\n */\nexport async function initializeSampleWorkflows() {\n    // Only initialize if no workflows exist\n    if (workflows.size > 0) {\n        return;\n    }\n    // Add a sample workflow\n    const sampleWorkflow = {\n        name: 'Sample Chat Workflow',\n        description: 'A simple workflow demonstrating chat completion',\n        nodes: [],\n        edges: [],\n        metadata: {\n            version: '1.0.0',\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString(),\n            author: 'System',\n            tags: ['sample', 'chat']\n        }\n    };\n    await saveWorkflow(sampleWorkflow);\n}\n","/**\n * Global Save Service\n * Provides save and export functionality that can be accessed from anywhere in the app\n * This allows the main navbar to save workflows without being tied to a specific component\n */\nimport { get } from 'svelte/store';\nimport { workflowStore } from '../stores/workflowStore.js';\nimport { workflowApi, setEndpointConfig } from './api.js';\nimport { createEndpointConfig } from '../config/endpoints.js';\nimport { v4 as uuidv4 } from 'uuid';\nimport { apiToasts, workflowToasts, dismissToast } from './toastService.js';\n/**\n * Ensure API configuration is initialized\n * This is needed when the global save function is called from the layout component\n * which doesn't initialize the API configuration like the App component does\n */\nasync function ensureApiConfiguration() {\n    // Check if we need to initialize the API configuration\n    // We'll check if the endpointConfig is already set by importing the api module\n    try {\n        // Import the api module to check if endpointConfig is already set\n        const { getEndpointConfig } = await import('./api.js');\n        // Try to get the current configuration\n        const currentConfig = getEndpointConfig();\n        if (currentConfig && currentConfig.baseUrl) {\n            return;\n        }\n    }\n    catch {\n        // Could not check existing API configuration, initializing\n    }\n    // API configuration is not initialized, so let's initialize it\n    // Use runtime detection to determine appropriate API base URL\n    const apiBaseUrl = (() => {\n        // If we're in development (localhost:5173), use relative path\n        if (typeof window !== 'undefined') {\n            if (window.location.hostname === 'localhost' && window.location.port === '5173') {\n                return '/api/flowdrop';\n            }\n            // Otherwise, use the current domain\n            return `${window.location.protocol}//${window.location.host}/api/flowdrop`;\n        }\n        // Fallback to relative path\n        return '/api/flowdrop';\n    })();\n    const config = createEndpointConfig(apiBaseUrl, {\n        auth: {\n            type: 'none' // No authentication for now\n        },\n        timeout: 10000, // 10 second timeout\n        retry: {\n            enabled: true,\n            maxAttempts: 2,\n            delay: 1000,\n            backoff: 'exponential'\n        }\n    });\n    setEndpointConfig(config);\n}\n/**\n * Global save function that can be called from anywhere\n * Uses the current workflow from the global store\n */\nexport async function globalSaveWorkflow() {\n    let loadingToast;\n    try {\n        // Show loading toast\n        loadingToast = apiToasts.loading('Saving workflow');\n        // Ensure API configuration is initialized\n        await ensureApiConfiguration();\n        // Get current workflow from global store\n        const currentWorkflow = get(workflowStore);\n        if (!currentWorkflow) {\n            if (loadingToast)\n                dismissToast(loadingToast);\n            apiToasts.error('Save workflow', 'No workflow to save');\n            return;\n        }\n        // Determine the workflow ID\n        let workflowId;\n        if (currentWorkflow.id) {\n            workflowId = currentWorkflow.id;\n        }\n        else {\n            workflowId = uuidv4();\n        }\n        // Create workflow object for saving\n        const finalWorkflow = {\n            id: workflowId,\n            name: currentWorkflow.name || 'Untitled Workflow',\n            nodes: currentWorkflow.nodes || [],\n            edges: currentWorkflow.edges || [],\n            metadata: {\n                version: '1.0.0',\n                createdAt: currentWorkflow.metadata?.createdAt || new Date().toISOString(),\n                updatedAt: new Date().toISOString()\n            }\n        };\n        await workflowApi.saveWorkflow(finalWorkflow);\n        // Dismiss loading toast and show success toast\n        if (loadingToast)\n            dismissToast(loadingToast);\n        workflowToasts.saved(finalWorkflow.name);\n    }\n    catch (error) {\n        // Dismiss loading toast and show error toast\n        if (loadingToast)\n            dismissToast(loadingToast);\n        apiToasts.error('Save workflow', error instanceof Error ? error.message : 'Unknown error');\n        throw error;\n    }\n}\n/**\n * Global export function that can be called from anywhere\n * Uses the current workflow from the global store\n */\nexport async function globalExportWorkflow() {\n    try {\n        // Get current workflow from global store\n        const currentWorkflow = get(workflowStore);\n        if (!currentWorkflow) {\n            apiToasts.error('Export workflow', 'No workflow to export');\n            return;\n        }\n        // Create workflow object for export\n        const finalWorkflow = {\n            id: currentWorkflow.id || 'untitled-workflow',\n            name: currentWorkflow.name || 'Untitled Workflow',\n            nodes: currentWorkflow.nodes || [],\n            edges: currentWorkflow.edges || [],\n            metadata: {\n                version: '1.0.0',\n                createdAt: currentWorkflow.metadata?.createdAt || new Date().toISOString(),\n                updatedAt: new Date().toISOString()\n            }\n        };\n        // Create and download the file\n        const dataStr = JSON.stringify(finalWorkflow, null, 2);\n        const dataBlob = new Blob([dataStr], { type: 'application/json' });\n        const url = URL.createObjectURL(dataBlob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `${finalWorkflow.name}.json`;\n        link.click();\n        URL.revokeObjectURL(url);\n        // Show success toast\n        workflowToasts.exported(finalWorkflow.name);\n    }\n    catch (error) {\n        // Export failed\n        apiToasts.error('Export workflow', error instanceof Error ? error.message : 'Unknown error');\n    }\n}\n/**\n * Initialize global save functions on window object for external access\n * This allows the functions to be called from anywhere in the application\n */\nexport function initializeGlobalSave() {\n    if (typeof window !== 'undefined') {\n        // @ts-expect-error - Adding to window for external access\n        window.flowdropGlobalSave = globalSaveWorkflow;\n        // @ts-expect-error - Adding to window for external access\n        window.flowdropGlobalExport = globalExportWorkflow;\n    }\n}\n","/**\n * Default port configuration for FlowDrop\n * Provides backward compatibility and serves as an example configuration\n */\nexport const DEFAULT_PORT_CONFIG = {\n    version: '1.0.0',\n    defaultDataType: 'string',\n    dataTypes: [\n        // Text and basic types\n        {\n            id: 'trigger',\n            name: 'Trigger',\n            description: 'Control flow of the workflow',\n            color: 'var(--color-ref-purple-500)',\n            category: 'basic',\n            enabled: true\n        },\n        // Text and basic types\n        {\n            id: 'string',\n            name: 'String',\n            description: 'Text data',\n            color: 'var(--color-ref-emerald-500)',\n            category: 'basic',\n            enabled: true\n        },\n        // Numeric types\n        {\n            id: 'number',\n            name: 'Number',\n            description: 'Numeric data',\n            color: 'var(--color-ref-blue-600)',\n            category: 'numeric',\n            enabled: true\n        },\n        // Boolean types\n        {\n            id: 'boolean',\n            name: 'Boolean',\n            description: 'True/false values',\n            color: 'var(--color-ref-purple-600)',\n            category: 'logical',\n            enabled: true\n        },\n        // Collection types\n        {\n            id: 'array',\n            name: 'Array',\n            description: 'Ordered list of items',\n            color: 'var(--color-ref-amber-500)',\n            category: 'collection',\n            enabled: true\n        },\n        // Typed arrays\n        {\n            id: 'string[]',\n            name: 'String Array',\n            description: 'Array of strings',\n            color: 'var(--color-ref-emerald-400)',\n            category: 'collection',\n            enabled: true\n        },\n        {\n            id: 'number[]',\n            name: 'Number Array',\n            description: 'Array of numbers',\n            color: 'var(--color-ref-blue-400)',\n            category: 'collection',\n            enabled: true\n        },\n        {\n            id: 'boolean[]',\n            name: 'Boolean Array',\n            description: 'Array of true/false values',\n            color: 'var(--color-ref-purple-400)',\n            category: 'collection',\n            enabled: true\n        },\n        {\n            id: 'json[]',\n            name: 'JSON Array',\n            description: 'Array of JSON objects',\n            color: 'var(--color-ref-orange-400)',\n            category: 'collection',\n            enabled: true\n        },\n        {\n            id: 'file[]',\n            name: 'File Array',\n            description: 'Array of files',\n            color: 'var(--color-ref-red-400)',\n            category: 'collection',\n            enabled: true\n        },\n        {\n            id: 'image[]',\n            name: 'Image Array',\n            description: 'Array of images',\n            color: 'var(--color-ref-pink-400)',\n            category: 'collection',\n            enabled: true\n        },\n        // Complex types\n        {\n            id: 'json',\n            name: 'JSON',\n            description: 'JSON structured data',\n            color: 'var(--color-ref-orange-500)',\n            category: 'complex',\n            enabled: true\n        },\n        // File types\n        {\n            id: 'file',\n            name: 'File',\n            description: 'File data',\n            color: 'var(--color-ref-red-500)',\n            category: 'file',\n            enabled: true\n        },\n        // Media types\n        {\n            id: 'image',\n            name: 'Image',\n            description: 'Image data',\n            color: 'var(--color-ref-pink-500)',\n            category: 'media',\n            enabled: true\n        },\n        {\n            id: 'audio',\n            name: 'Audio',\n            description: 'Audio data',\n            color: 'var(--color-ref-indigo-500)',\n            category: 'media',\n            enabled: true\n        },\n        {\n            id: 'video',\n            name: 'Video',\n            description: 'Video data',\n            color: 'var(--color-ref-teal-500)',\n            category: 'media',\n            enabled: true\n        },\n        // Special types\n        {\n            id: 'url',\n            name: 'URL',\n            description: 'Web address',\n            color: 'var(--color-ref-cyan-500)',\n            category: 'special',\n            enabled: true\n        },\n        {\n            id: 'email',\n            name: 'Email',\n            description: 'Email address',\n            color: 'var(--color-ref-cyan-500)',\n            category: 'special',\n            enabled: true\n        },\n        {\n            id: 'date',\n            name: 'Date',\n            description: 'Date value',\n            color: 'var(--color-ref-lime-500)',\n            category: 'temporal',\n            enabled: true\n        },\n        {\n            id: 'datetime',\n            name: 'DateTime',\n            description: 'Date and time value',\n            color: 'var(--color-ref-lime-500)',\n            category: 'temporal',\n            enabled: true\n        },\n        {\n            id: 'time',\n            name: 'Time',\n            description: 'Time value',\n            color: 'var(--color-ref-lime-500)',\n            category: 'temporal',\n            enabled: true\n        }\n    ],\n    compatibilityRules: [\n    // Pure same-type compatibility: string connects to string, number to number, etc.\n    // No additional rules needed - the system handles same-type connections automatically\n    ]\n};\n","/**\n * Port Configuration API Service\n * Handles fetching port configuration from the backend\n */\nimport { buildEndpointUrl } from '../config/endpoints.js';\nimport { DEFAULT_PORT_CONFIG } from '../config/defaultPortConfig.js';\nimport { FlowDropApiClient } from '../api/client.js';\n/**\n * Fetch port configuration from API\n */\nexport async function fetchPortConfig(endpointConfig) {\n    try {\n        const url = buildEndpointUrl(endpointConfig, endpointConfig.endpoints.portConfig);\n        // Create API client instance\n        const client = new FlowDropApiClient(endpointConfig.baseUrl);\n        // Use the client to fetch port configuration\n        const portConfig = await client.getPortConfig();\n        // Validate the configuration has required fields\n        if (!portConfig.dataTypes || !Array.isArray(portConfig.dataTypes)) {\n            console.warn('Invalid port config received from API, using default');\n            return DEFAULT_PORT_CONFIG;\n        }\n        return portConfig;\n    }\n    catch (error) {\n        console.error('Error fetching port configuration:', error);\n        return DEFAULT_PORT_CONFIG;\n    }\n}\n/**\n * Validate port configuration structure\n */\nexport function validatePortConfig(config) {\n    if (!config || typeof config !== 'object') {\n        return false;\n    }\n    if (!config.dataTypes || !Array.isArray(config.dataTypes)) {\n        return false;\n    }\n    if (!config.defaultDataType || typeof config.defaultDataType !== 'string') {\n        return false;\n    }\n    // Check that all data types have required fields\n    for (const dataType of config.dataTypes) {\n        if (!dataType.id || !dataType.name || !dataType.color) {\n            return false;\n        }\n    }\n    // Check that compatibility rules reference valid data types\n    if (config.compatibilityRules) {\n        // TODO: Fix type definition for PortCompatibilityRule - sourceType and targetType properties missing\n        // const dataTypeIds = new Set(config.dataTypes.map((dt) => dt.id));\n        // for (const rule of config.compatibilityRules) {\n        //   if (!dataTypeIds.has(rule.sourceType) || !dataTypeIds.has(rule.targetType)) {\n        //     console.warn(\" Compatibility rule references unknown data type:\", rule);\n        //     return false;\n        //   }\n        // }\n    }\n    return true;\n}\n","/**\n * Draft Storage Service for FlowDrop\n *\n * Handles saving and loading workflow drafts to/from localStorage.\n * Provides interval-based auto-save functionality.\n *\n * @module services/draftStorage\n */\n/**\n * Default storage key prefix\n */\nconst STORAGE_KEY_PREFIX = \"flowdrop:draft\";\n/**\n * Generate a storage key for a workflow\n *\n * If a custom key is provided, use it directly.\n * Otherwise, generate based on workflow ID or use \"new\" for unsaved workflows.\n *\n * @param workflowId - The workflow ID (optional)\n * @param customKey - Custom storage key provided by enterprise (optional)\n * @returns The storage key to use\n */\nexport function getDraftStorageKey(workflowId, customKey) {\n    if (customKey) {\n        return customKey;\n    }\n    if (workflowId) {\n        return `${STORAGE_KEY_PREFIX}:${workflowId}`;\n    }\n    return `${STORAGE_KEY_PREFIX}:new`;\n}\n/**\n * Save a workflow draft to localStorage\n *\n * @param workflow - The workflow to save\n * @param storageKey - The storage key to use\n * @returns true if saved successfully, false otherwise\n */\nexport function saveDraft(workflow, storageKey) {\n    try {\n        const draft = {\n            workflow,\n            metadata: {\n                savedAt: new Date().toISOString(),\n                workflowId: workflow.id,\n                workflowName: workflow.name\n            }\n        };\n        localStorage.setItem(storageKey, JSON.stringify(draft));\n        return true;\n    }\n    catch (error) {\n        // localStorage might be full or disabled\n        console.warn(\"Failed to save draft to localStorage:\", error);\n        return false;\n    }\n}\n/**\n * Load a workflow draft from localStorage\n *\n * @param storageKey - The storage key to load from\n * @returns The stored draft, or null if not found\n */\nexport function loadDraft(storageKey) {\n    try {\n        const stored = localStorage.getItem(storageKey);\n        if (!stored) {\n            return null;\n        }\n        const draft = JSON.parse(stored);\n        // Validate the draft structure\n        if (!draft.workflow || !draft.metadata) {\n            console.warn(\"Invalid draft structure in localStorage\");\n            return null;\n        }\n        return draft;\n    }\n    catch (error) {\n        console.warn(\"Failed to load draft from localStorage:\", error);\n        return null;\n    }\n}\n/**\n * Delete a workflow draft from localStorage\n *\n * @param storageKey - The storage key to delete\n */\nexport function deleteDraft(storageKey) {\n    try {\n        localStorage.removeItem(storageKey);\n    }\n    catch (error) {\n        console.warn(\"Failed to delete draft from localStorage:\", error);\n    }\n}\n/**\n * Check if a draft exists for a given storage key\n *\n * @param storageKey - The storage key to check\n * @returns true if a draft exists\n */\nexport function hasDraft(storageKey) {\n    try {\n        return localStorage.getItem(storageKey) !== null;\n    }\n    catch {\n        return false;\n    }\n}\n/**\n * Get draft metadata without loading the full workflow\n *\n * Useful for displaying draft information without parsing the entire workflow.\n *\n * @param storageKey - The storage key to check\n * @returns Draft metadata, or null if not found\n */\nexport function getDraftMetadata(storageKey) {\n    const draft = loadDraft(storageKey);\n    return draft?.metadata ?? null;\n}\n/**\n * Draft auto-save manager\n *\n * Handles interval-based auto-saving of workflow drafts.\n * Should be instantiated per FlowDrop instance.\n */\nexport class DraftAutoSaveManager {\n    /** Interval timer ID */\n    intervalId = null;\n    /** Storage key for drafts */\n    storageKey;\n    /** Auto-save interval in milliseconds */\n    interval;\n    /** Whether auto-save is enabled */\n    enabled;\n    /** Function to get current workflow */\n    getWorkflow;\n    /** Function to check if workflow is dirty */\n    isDirty;\n    /** Last saved workflow hash (for change detection) */\n    lastSavedHash = null;\n    /**\n     * Create a new DraftAutoSaveManager\n     *\n     * @param options - Configuration options\n     */\n    constructor(options) {\n        this.storageKey = options.storageKey;\n        this.interval = options.interval;\n        this.enabled = options.enabled;\n        this.getWorkflow = options.getWorkflow;\n        this.isDirty = options.isDirty;\n    }\n    /**\n     * Start auto-save interval\n     *\n     * Will save drafts at the configured interval if there are unsaved changes.\n     */\n    start() {\n        if (!this.enabled || this.intervalId) {\n            return;\n        }\n        this.intervalId = setInterval(() => {\n            this.saveIfDirty();\n        }, this.interval);\n    }\n    /**\n     * Stop auto-save interval\n     */\n    stop() {\n        if (this.intervalId) {\n            clearInterval(this.intervalId);\n            this.intervalId = null;\n        }\n    }\n    /**\n     * Save draft if there are unsaved changes\n     *\n     * @returns true if a draft was saved\n     */\n    saveIfDirty() {\n        if (!this.enabled) {\n            return false;\n        }\n        const workflow = this.getWorkflow();\n        if (!workflow) {\n            return false;\n        }\n        // Only save if dirty\n        if (!this.isDirty()) {\n            return false;\n        }\n        // Check if workflow has actually changed since last save\n        const currentHash = this.hashWorkflow(workflow);\n        if (currentHash === this.lastSavedHash) {\n            return false;\n        }\n        const saved = saveDraft(workflow, this.storageKey);\n        if (saved) {\n            this.lastSavedHash = currentHash;\n        }\n        return saved;\n    }\n    /**\n     * Force save the current workflow as a draft\n     *\n     * Saves regardless of dirty state.\n     *\n     * @returns true if saved successfully\n     */\n    forceSave() {\n        const workflow = this.getWorkflow();\n        if (!workflow) {\n            return false;\n        }\n        const saved = saveDraft(workflow, this.storageKey);\n        if (saved) {\n            this.lastSavedHash = this.hashWorkflow(workflow);\n        }\n        return saved;\n    }\n    /**\n     * Clear the draft from storage\n     */\n    clearDraft() {\n        deleteDraft(this.storageKey);\n        this.lastSavedHash = null;\n    }\n    /**\n     * Mark the current state as saved\n     *\n     * Updates the hash so the next saveIfDirty won't save unless there are new changes.\n     */\n    markAsSaved() {\n        const workflow = this.getWorkflow();\n        if (workflow) {\n            this.lastSavedHash = this.hashWorkflow(workflow);\n        }\n    }\n    /**\n     * Update the storage key\n     *\n     * Useful when the workflow ID changes (e.g., after first save).\n     *\n     * @param newKey - The new storage key\n     */\n    updateStorageKey(newKey) {\n        // If there's an existing draft with the old key, migrate it\n        const existingDraft = loadDraft(this.storageKey);\n        if (existingDraft && this.storageKey !== newKey) {\n            deleteDraft(this.storageKey);\n            saveDraft(existingDraft.workflow, newKey);\n        }\n        this.storageKey = newKey;\n    }\n    /**\n     * Simple hash function for change detection\n     *\n     * Not cryptographically secure, just for detecting changes.\n     *\n     * @param workflow - The workflow to hash\n     * @returns A simple hash string\n     */\n    hashWorkflow(workflow) {\n        // Use a simple stringification for change detection\n        // We only need nodes, edges, name, and description for change detection\n        const toHash = {\n            name: workflow.name,\n            description: workflow.description,\n            nodes: workflow.nodes.map((n) => ({\n                id: n.id,\n                position: n.position,\n                data: n.data\n            })),\n            edges: workflow.edges.map((e) => ({\n                id: e.id,\n                source: e.source,\n                target: e.target,\n                sourceHandle: e.sourceHandle,\n                targetHandle: e.targetHandle\n            }))\n        };\n        return JSON.stringify(toHash);\n    }\n    /**\n     * Check if auto-save is currently running\n     */\n    isRunning() {\n        return this.intervalId !== null;\n    }\n    /**\n     * Get the current storage key\n     */\n    getStorageKey() {\n        return this.storageKey;\n    }\n}\n","/**\n * API Configuration\n * Centralized configuration for all API endpoints\n */\n/**\n * Default API configuration\n * For library usage, configuration should be provided at runtime\n * This provides sensible defaults that can be overridden\n */\nexport const defaultApiConfig = {\n    baseUrl: '/api/flowdrop',\n    endpoints: {\n        workflows: {\n            list: '/workflows',\n            get: '/workflows/{id}',\n            create: '/workflows',\n            update: '/workflows/{id}',\n            delete: '/workflows/{id}',\n            execute: '/workflows/{id}/execute',\n            executionState: '/workflows/{id}/executions/{execution_id}/state'\n        },\n        executions: {\n            active: '/executions/active'\n        },\n        nodes: {\n            list: '/nodes'\n        }\n    }\n};\n/**\n * Get full URL for an endpoint\n */\nexport function getEndpointUrl(config, endpoint, params = {}) {\n    let url = config.baseUrl + endpoint;\n    // Replace path parameters\n    for (const [key, value] of Object.entries(params)) {\n        url = url.replace(`{${key}}`, value);\n    }\n    return url;\n}\n","/**\n * Runtime Configuration Service\n *\n * Provides runtime configuration fetched from the server.\n * This allows the application to use environment variables set at deployment\n * time rather than build time.\n */\n/** Cached runtime configuration */\nlet cachedConfig = null;\n/** Cache timestamp */\nlet cacheTimestamp = 0;\n/** Cache duration in milliseconds (5 minutes) */\nconst CACHE_DURATION = 5 * 60 * 1000;\n/**\n * Fetch runtime configuration from the server\n *\n * @param force - Force fetch even if cached\n * @returns Promise resolving to runtime configuration\n */\nexport async function fetchRuntimeConfig(force = false) {\n    const now = Date.now();\n    // Return cached config if available and not expired\n    if (!force && cachedConfig && now - cacheTimestamp < CACHE_DURATION) {\n        return cachedConfig;\n    }\n    try {\n        const response = await fetch(\"/api/config\");\n        if (!response.ok) {\n            throw new Error(`Failed to fetch runtime config: ${response.statusText}`);\n        }\n        const config = (await response.json());\n        // Update cache\n        cachedConfig = config;\n        cacheTimestamp = now;\n        return config;\n    }\n    catch (error) {\n        console.error(\"Failed to fetch runtime configuration:\", error);\n        // Return default configuration if fetch fails\n        const defaultConfig = {\n            apiBaseUrl: \"/api/flowdrop\",\n            theme: \"auto\",\n            timeout: 30000,\n            authType: \"none\",\n            version: \"1.0.0\",\n            environment: \"production\",\n        };\n        // Cache the default config to avoid repeated failed requests\n        if (!cachedConfig) {\n            cachedConfig = defaultConfig;\n            cacheTimestamp = now;\n        }\n        return cachedConfig || defaultConfig;\n    }\n}\n/**\n * Get runtime configuration synchronously from cache\n *\n * @returns Cached runtime configuration or null if not loaded\n */\nexport function getRuntimeConfig() {\n    return cachedConfig;\n}\n/**\n * Clear the runtime configuration cache\n */\nexport function clearRuntimeConfigCache() {\n    cachedConfig = null;\n    cacheTimestamp = 0;\n}\n/**\n * Initialize runtime configuration\n * Should be called once when the application starts\n *\n * @returns Promise resolving to runtime configuration\n */\nexport async function initRuntimeConfig() {\n    return fetchRuntimeConfig(true);\n}\n","/**\n * WorkflowAdapter - Abstracts SvelteFlow internals for external systems\n *\n * This adapter provides a clean interface for working with workflows without\n * needing to understand SvelteFlow's internal structure. It handles:\n * - Converting between standard workflow format and SvelteFlow format\n * - CRUD operations on workflows, nodes, and edges\n * - Validation and error checking\n * - Import/export functionality\n *\n * The adapter is designed to be used by:\n * - Backend systems that need to process workflows\n * - External applications that want to integrate with FlowDrop\n * - Systems that need to generate or modify workflows programmatically\n */\nimport { v4 as uuidv4 } from 'uuid';\n/**\n * Generate a unique node ID based on node type and existing nodes\n * Format: <node_type>.<number>\n * Example: boolean_gateway.1, calculator.2\n */\nfunction generateStandardNodeId(nodeTypeId, existingNodes) {\n    // Count how many nodes of this type already exist\n    const existingNodeIds = existingNodes\n        .filter((node) => node.data?.metadata?.id === nodeTypeId)\n        .map((node) => node.id);\n    // Extract the numbers from existing IDs with the same prefix\n    const existingNumbers = existingNodeIds\n        .map((id) => {\n        const match = id.match(new RegExp(`^${nodeTypeId}\\\\.(\\\\d+)$`));\n        return match ? parseInt(match[1], 10) : 0;\n    })\n        .filter((num) => num > 0);\n    // Find the next available number (highest + 1)\n    const nextNumber = existingNumbers.length > 0 ? Math.max(...existingNumbers) + 1 : 1;\n    return `${nodeTypeId}.${nextNumber}`;\n}\n/**\n * Workflow Adapter Class\n * Provides a clean API for workflow operations without exposing SvelteFlow internals\n */\nexport class WorkflowAdapter {\n    nodeTypes = [];\n    constructor(nodeTypes = []) {\n        this.nodeTypes = nodeTypes;\n    }\n    /**\n     * Create a new workflow\n     */\n    createWorkflow(name, description) {\n        return {\n            id: uuidv4(),\n            name,\n            description,\n            nodes: [],\n            edges: [],\n            metadata: {\n                version: '1.0.0',\n                createdAt: new Date().toISOString(),\n                updatedAt: new Date().toISOString()\n            }\n        };\n    }\n    /**\n     * Add a node to a workflow\n     */\n    addNode(workflow, nodeType, position, config) {\n        const metadata = this.nodeTypes.find((nt) => nt.id === nodeType);\n        if (!metadata) {\n            throw new Error(`Node type '${nodeType}' not found`);\n        }\n        // Generate node ID based on node type and existing nodes\n        const nodeId = generateStandardNodeId(nodeType, workflow.nodes);\n        const node = {\n            id: nodeId,\n            type: nodeType,\n            position,\n            data: {\n                label: metadata.name,\n                config: config || {},\n                metadata\n            }\n        };\n        workflow.nodes.push(node);\n        workflow.metadata.updatedAt = new Date().toISOString();\n        return node;\n    }\n    /**\n     * Remove a node from a workflow\n     */\n    removeNode(workflow, nodeId) {\n        const nodeIndex = workflow.nodes.findIndex((n) => n.id === nodeId);\n        if (nodeIndex === -1)\n            return false;\n        workflow.nodes.splice(nodeIndex, 1);\n        // Remove associated edges\n        workflow.edges = workflow.edges.filter((edge) => edge.source !== nodeId && edge.target !== nodeId);\n        workflow.metadata.updatedAt = new Date().toISOString();\n        return true;\n    }\n    /**\n     * Update node position\n     */\n    updateNodePosition(workflow, nodeId, position) {\n        const node = workflow.nodes.find((n) => n.id === nodeId);\n        if (!node)\n            return false;\n        node.position = position;\n        workflow.metadata.updatedAt = new Date().toISOString();\n        return true;\n    }\n    /**\n     * Update node configuration\n     */\n    updateNodeConfig(workflow, nodeId, config) {\n        const node = workflow.nodes.find((n) => n.id === nodeId);\n        if (!node)\n            return false;\n        node.data.config = { ...node.data.config, ...config };\n        workflow.metadata.updatedAt = new Date().toISOString();\n        return true;\n    }\n    /**\n     * Add an edge between nodes\n     */\n    addEdge(workflow, sourceNodeId, targetNodeId, sourceHandle, targetHandle) {\n        const edge = {\n            id: uuidv4(),\n            source: sourceNodeId,\n            target: targetNodeId,\n            sourceHandle,\n            targetHandle\n        };\n        workflow.edges.push(edge);\n        workflow.metadata.updatedAt = new Date().toISOString();\n        return edge;\n    }\n    /**\n     * Remove an edge from a workflow\n     */\n    removeEdge(workflow, edgeId) {\n        const edgeIndex = workflow.edges.findIndex((e) => e.id === edgeId);\n        if (edgeIndex === -1)\n            return false;\n        workflow.edges.splice(edgeIndex, 1);\n        workflow.metadata.updatedAt = new Date().toISOString();\n        return true;\n    }\n    /**\n     * Get all nodes of a specific type\n     */\n    getNodesByType(workflow, nodeType) {\n        return workflow.nodes.filter((node) => node.type === nodeType);\n    }\n    /**\n     * Get all edges connected to a node\n     */\n    getNodeEdges(workflow, nodeId) {\n        return workflow.edges.filter((edge) => edge.source === nodeId || edge.target === nodeId);\n    }\n    /**\n     * Get connected nodes (both incoming and outgoing)\n     */\n    getConnectedNodes(workflow, nodeId) {\n        const connectedNodeIds = new Set();\n        workflow.edges.forEach((edge) => {\n            if (edge.source === nodeId) {\n                connectedNodeIds.add(edge.target);\n            }\n            else if (edge.target === nodeId) {\n                connectedNodeIds.add(edge.source);\n            }\n        });\n        return workflow.nodes.filter((node) => connectedNodeIds.has(node.id));\n    }\n    /**\n     * Validate workflow structure\n     */\n    validateWorkflow(workflow) {\n        const errors = [];\n        const warnings = [];\n        // Check for empty workflow\n        if (workflow.nodes.length === 0) {\n            warnings.push('Workflow has no nodes');\n        }\n        // Check for orphaned edges\n        const nodeIds = new Set(workflow.nodes.map((n) => n.id));\n        workflow.edges.forEach((edge) => {\n            if (!nodeIds.has(edge.source)) {\n                errors.push(`Edge ${edge.id} references non-existent source node ${edge.source}`);\n            }\n            if (!nodeIds.has(edge.target)) {\n                errors.push(`Edge ${edge.id} references non-existent target node ${edge.target}`);\n            }\n        });\n        // Check for self-connections\n        workflow.edges.forEach((edge) => {\n            if (edge.source === edge.target) {\n                errors.push(`Node ${edge.source} cannot connect to itself`);\n            }\n        });\n        // Check for duplicate node IDs\n        const nodeIdCounts = new Map();\n        workflow.nodes.forEach((node) => {\n            nodeIdCounts.set(node.id, (nodeIdCounts.get(node.id) || 0) + 1);\n        });\n        nodeIdCounts.forEach((count, id) => {\n            if (count > 1) {\n                errors.push(`Duplicate node ID: ${id}`);\n            }\n        });\n        // Check for duplicate edge IDs\n        const edgeIdCounts = new Map();\n        workflow.edges.forEach((edge) => {\n            edgeIdCounts.set(edge.id, (edgeIdCounts.get(edge.id) || 0) + 1);\n        });\n        edgeIdCounts.forEach((count, id) => {\n            if (count > 1) {\n                errors.push(`Duplicate edge ID: ${id}`);\n            }\n        });\n        return {\n            valid: errors.length === 0,\n            errors,\n            warnings\n        };\n    }\n    /**\n     * Export workflow to JSON\n     */\n    exportWorkflow(workflow) {\n        return JSON.stringify(workflow, null, 2);\n    }\n    /**\n     * Import workflow from JSON\n     */\n    importWorkflow(json) {\n        try {\n            const workflow = JSON.parse(json);\n            // Validate the imported workflow\n            const validation = this.validateWorkflow(workflow);\n            if (!validation.valid) {\n                throw new Error(`Invalid workflow: ${validation.errors.join(', ')}`);\n            }\n            // Update metadata\n            workflow.metadata = {\n                version: workflow.metadata?.version || '1.0.0',\n                createdAt: workflow.metadata?.createdAt || new Date().toISOString(),\n                updatedAt: new Date().toISOString(),\n                author: workflow.metadata?.author,\n                tags: workflow.metadata?.tags\n            };\n            return workflow;\n        }\n        catch (error) {\n            throw new Error(`Failed to import workflow: ${error instanceof Error ? error.message : 'Unknown error'}`);\n        }\n    }\n    /**\n     * Convert SvelteFlow workflow to standard format\n     */\n    fromSvelteFlow(svelteFlowWorkflow) {\n        return {\n            id: svelteFlowWorkflow.id,\n            name: svelteFlowWorkflow.name,\n            description: svelteFlowWorkflow.description,\n            nodes: svelteFlowWorkflow.nodes.map((node) => ({\n                id: node.id,\n                type: node.data.metadata.id,\n                position: node.position,\n                data: {\n                    label: node.data.label,\n                    config: node.data.config,\n                    metadata: node.data.metadata\n                }\n            })),\n            edges: svelteFlowWorkflow.edges.map((edge) => ({\n                id: edge.id,\n                source: edge.source,\n                target: edge.target,\n                sourceHandle: edge.sourceHandle,\n                targetHandle: edge.targetHandle\n            })),\n            metadata: svelteFlowWorkflow.metadata\n        };\n    }\n    /**\n     * Convert standard workflow to SvelteFlow format\n     */\n    toSvelteFlow(workflow) {\n        return {\n            id: workflow.id,\n            name: workflow.name,\n            description: workflow.description,\n            nodes: workflow.nodes.map((node) => ({\n                id: node.id,\n                type: 'workflowNode',\n                position: node.position,\n                deletable: true,\n                data: {\n                    label: node.data.label,\n                    config: node.data.config,\n                    metadata: node.data.metadata,\n                    nodeId: node.id\n                }\n            })),\n            edges: workflow.edges.map((edge) => ({\n                id: edge.id,\n                source: edge.source,\n                target: edge.target,\n                sourceHandle: edge.sourceHandle,\n                targetHandle: edge.targetHandle\n            })),\n            metadata: workflow.metadata\n        };\n    }\n    /**\n     * Get workflow statistics\n     */\n    getWorkflowStats(workflow) {\n        const nodeTypeCounts = new Map();\n        workflow.nodes.forEach((node) => {\n            nodeTypeCounts.set(node.type, (nodeTypeCounts.get(node.type) || 0) + 1);\n        });\n        return {\n            totalNodes: workflow.nodes.length,\n            totalEdges: workflow.edges.length,\n            nodeTypeCounts: Object.fromEntries(nodeTypeCounts),\n            lastModified: workflow.metadata?.updatedAt\n        };\n    }\n    /**\n     * Clone a workflow\n     */\n    cloneWorkflow(workflow, newName) {\n        const cloned = JSON.parse(JSON.stringify(workflow));\n        // Generate new IDs for all nodes and edges\n        const idMapping = new Map();\n        // Count nodes by type to generate proper sequential IDs\n        const nodeTypeCounts = new Map();\n        cloned.nodes.forEach((node) => {\n            const oldId = node.id;\n            const nodeTypeId = node.data.metadata.id;\n            // Get the current count for this node type\n            const currentCount = nodeTypeCounts.get(nodeTypeId) || 0;\n            const newCount = currentCount + 1;\n            nodeTypeCounts.set(nodeTypeId, newCount);\n            // Generate new ID with the sequential number\n            node.id = `${nodeTypeId}.${newCount}`;\n            idMapping.set(oldId, node.id);\n        });\n        cloned.edges.forEach((edge) => {\n            edge.id = uuidv4();\n            edge.source = idMapping.get(edge.source) || edge.source;\n            edge.target = idMapping.get(edge.target) || edge.target;\n        });\n        cloned.id = uuidv4();\n        cloned.name = newName || `${workflow.name} (Copy)`;\n        cloned.metadata = {\n            version: cloned.metadata?.version || '1.0.0',\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString(),\n            author: cloned.metadata?.author,\n            tags: cloned.metadata?.tags\n        };\n        return cloned;\n    }\n}\n","/**\n * FlowDrop API Client\n * Type-safe client for the FlowDrop API\n */\n/**\n * FlowDrop API Client Class\n */\nexport class ApiClient {\n    config;\n    defaultHeaders;\n    constructor(config) {\n        this.config = {\n            timeout: 30000,\n            ...config\n        };\n        this.defaultHeaders = {\n            'Content-Type': 'application/json',\n            ...config.headers\n        };\n        if (config.apiKey) {\n            this.defaultHeaders.Authorization = `Bearer ${config.apiKey}`;\n        }\n    }\n    /**\n     * Make an HTTP request\n     */\n    async request(method, path, data, options = {}) {\n        const url = `${this.config.baseUrl}${path}`;\n        const headers = { ...this.defaultHeaders, ...options.headers };\n        const timeout = options.timeout || this.config.timeout;\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), timeout);\n        try {\n            const response = await fetch(url, {\n                method,\n                headers,\n                body: data ? JSON.stringify(data) : undefined,\n                signal: controller.signal\n            });\n            clearTimeout(timeoutId);\n            if (!response.ok) {\n                const errorData = await response.json().catch(() => ({}));\n                throw new ApiError(response.status, errorData.error || `HTTP ${response.status}`, errorData.code, errorData.details);\n            }\n            return await response.json();\n        }\n        catch (error) {\n            clearTimeout(timeoutId);\n            if (error instanceof ApiError) {\n                throw error;\n            }\n            if (error instanceof Error && error.name === 'AbortError') {\n                throw new ApiError(408, 'Request timeout', 'TIMEOUT');\n            }\n            throw new ApiError(500, error instanceof Error ? error.message : 'Network error', 'NETWORK_ERROR');\n        }\n    }\n    // ===== HEALTH CHECK =====\n    /**\n     * Check API health\n     */\n    async healthCheck() {\n        return this.request('GET', '/health');\n    }\n    // ===== NODE TYPES =====\n    /**\n     * Get all node types\n     */\n    async getNodeTypes(query) {\n        const params = new URLSearchParams();\n        if (query?.category)\n            params.append('category', query.category);\n        if (query?.search)\n            params.append('search', query.search);\n        if (query?.limit)\n            params.append('limit', query.limit.toString());\n        if (query?.offset)\n            params.append('offset', query.offset.toString());\n        const path = `/nodes${params.toString() ? `?${params.toString()}` : ''}`;\n        return this.request('GET', path);\n    }\n    /**\n     * Get node type by ID\n     */\n    async getNodeType(id) {\n        return this.request('GET', `/nodes/${id}`);\n    }\n    // ===== WORKFLOWS =====\n    /**\n     * Get all workflows\n     */\n    async getWorkflows(query) {\n        const params = new URLSearchParams();\n        if (query?.search)\n            params.append('search', query.search);\n        if (query?.tags)\n            params.append('tags', query.tags);\n        if (query?.limit)\n            params.append('limit', query.limit.toString());\n        if (query?.offset)\n            params.append('offset', query.offset.toString());\n        if (query?.sort)\n            params.append('sort', query.sort);\n        if (query?.order)\n            params.append('order', query.order);\n        const path = `/workflows${params.toString() ? `?${params.toString()}` : ''}`;\n        return this.request('GET', path);\n    }\n    /**\n     * Get workflow by ID\n     */\n    async getWorkflow(id) {\n        return this.request('GET', `/workflows/${id}`);\n    }\n    /**\n     * Create a new workflow\n     */\n    async createWorkflow(data) {\n        return this.request('POST', '/workflows', data);\n    }\n    /**\n     * Update workflow\n     */\n    async updateWorkflow(id, data) {\n        return this.request('PUT', `/workflows/${id}`, data);\n    }\n    /**\n     * Delete workflow\n     */\n    async deleteWorkflow(id) {\n        return this.request('DELETE', `/workflows/${id}`);\n    }\n    // ===== WORKFLOW EXECUTION =====\n    /**\n     * Execute workflow\n     */\n    async executeWorkflow(id, data) {\n        return this.request('POST', `/workflows/${id}/execute`, data);\n    }\n    /**\n     * Get execution status\n     */\n    async getExecutionStatus(id) {\n        return this.request('GET', `/executions/${id}`);\n    }\n    /**\n     * Cancel execution\n     */\n    async cancelExecution(id) {\n        return this.request('POST', `/executions/${id}/cancel`);\n    }\n    // ===== IMPORT/EXPORT =====\n    /**\n     * Export workflow\n     */\n    async exportWorkflow(id, format = 'json') {\n        return this.request('GET', `/workflows/${id}/export?format=${format}`);\n    }\n    /**\n     * Import workflow\n     */\n    async importWorkflow(workflow) {\n        return this.request('POST', '/workflows/import', workflow);\n    }\n    // ===== VALIDATION =====\n    /**\n     * Validate workflow\n     */\n    async validateWorkflow(workflow) {\n        return this.request('POST', '/workflows/validate', workflow);\n    }\n    // ===== UTILITY METHODS =====\n    /**\n     * Wait for execution completion\n     */\n    async waitForExecution(id, pollInterval = 1000) {\n        while (true) {\n            const status = await this.getExecutionStatus(id);\n            if (status.data?.status === 'completed' ||\n                status.data?.status === 'failed' ||\n                status.data?.status === 'cancelled') {\n                return status;\n            }\n            await new Promise((resolve) => setTimeout(resolve, pollInterval));\n        }\n    }\n    /**\n     * Get workflows by tag\n     */\n    async getWorkflowsByTag(tag, query) {\n        return this.getWorkflows({ ...query, tags: tag });\n    }\n    /**\n     * Get node types by category\n     */\n    async getNodeTypesByCategory(category, query) {\n        return this.getNodeTypes({ ...query, category });\n    }\n}\n/**\n * API Error Class\n */\nexport class ApiError extends Error {\n    status;\n    code;\n    details;\n    constructor(status, message, code, details) {\n        super(message);\n        this.status = status;\n        this.code = code;\n        this.details = details;\n        this.name = 'ApiError';\n    }\n}\n","/**\n * Svelte App Wrapper for Framework Integration\n *\n * Provides mount/unmount functions for integrating FlowDrop into any web application.\n * Particularly useful for integration with vanilla JS, Drupal, WordPress, or other frameworks.\n *\n * @module svelte-app\n */\nimport { mount, unmount } from \"svelte\";\nimport WorkflowEditor from \"./components/WorkflowEditor.svelte\";\nimport App from \"./components/App.svelte\";\nimport { initializePortCompatibility } from \"./utils/connections.js\";\nimport { DEFAULT_PORT_CONFIG } from \"./config/defaultPortConfig.js\";\nimport { fetchPortConfig } from \"./services/portConfigApi.js\";\nimport { isDirty, markAsSaved, getWorkflow as getWorkflowFromStore, setOnDirtyStateChange, setOnWorkflowChange } from \"./stores/workflowStore.js\";\nimport { DraftAutoSaveManager, getDraftStorageKey } from \"./services/draftStorage.js\";\nimport { mergeFeatures } from \"./types/events.js\";\n/**\n * Mount the full FlowDrop App with navbar, sidebars, and workflow editor\n *\n * Use this for a complete workflow editing experience with all UI components.\n *\n * @param container - DOM element to mount the app into\n * @param options - Configuration options for the app\n * @returns Promise resolving to a MountedFlowDropApp instance\n *\n * @example\n * ```typescript\n * const app = await mountFlowDropApp(document.getElementById(\"editor\"), {\n *   workflow: myWorkflow,\n *   endpointConfig: createEndpointConfig(\"/api/flowdrop\"),\n *   authProvider: new CallbackAuthProvider({\n *     getToken: () => authService.getAccessToken()\n *   }),\n *   eventHandlers: {\n *     onDirtyStateChange: (isDirty) => updateSaveButton(isDirty),\n *     onAfterSave: () => showSuccess(\"Saved!\")\n *   }\n * });\n * ```\n */\nexport async function mountFlowDropApp(container, options = {}) {\n    const { workflow, nodes, endpointConfig, portConfig, height = \"100vh\", width = \"100%\", showNavbar = false, disableSidebar, lockWorkflow, readOnly, nodeStatuses, pipelineId, navbarTitle, navbarActions, authProvider, eventHandlers, features: userFeatures, draftStorageKey: customDraftKey } = options;\n    // Merge features with defaults\n    const features = mergeFeatures(userFeatures);\n    // Create endpoint configuration\n    let config;\n    if (endpointConfig) {\n        // Merge with default configuration to ensure all required endpoints are present\n        const { defaultEndpointConfig } = await import(\"./config/endpoints.js\");\n        config = {\n            ...defaultEndpointConfig,\n            ...endpointConfig,\n            endpoints: {\n                ...defaultEndpointConfig.endpoints,\n                ...endpointConfig.endpoints\n            }\n        };\n    }\n    else {\n        // Use default configuration if none provided\n        const { defaultEndpointConfig } = await import(\"./config/endpoints.js\");\n        config = defaultEndpointConfig;\n    }\n    // Initialize port configuration\n    let finalPortConfig = portConfig;\n    if (!finalPortConfig && config) {\n        // Try to fetch port configuration from API\n        try {\n            finalPortConfig = await fetchPortConfig(config);\n        }\n        catch (error) {\n            console.warn(\"Failed to fetch port config from API, using default:\", error);\n            finalPortConfig = DEFAULT_PORT_CONFIG;\n        }\n    }\n    else if (!finalPortConfig) {\n        finalPortConfig = DEFAULT_PORT_CONFIG;\n    }\n    initializePortCompatibility(finalPortConfig);\n    // Set up event handler callbacks in the store\n    if (eventHandlers?.onDirtyStateChange) {\n        setOnDirtyStateChange(eventHandlers.onDirtyStateChange);\n    }\n    if (eventHandlers?.onWorkflowChange) {\n        setOnWorkflowChange(eventHandlers.onWorkflowChange);\n    }\n    // Create the Svelte App component with configuration\n    const svelteApp = mount(App, {\n        target: container,\n        props: {\n            workflow,\n            nodes,\n            height,\n            width,\n            showNavbar,\n            disableSidebar,\n            lockWorkflow,\n            readOnly,\n            nodeStatuses,\n            pipelineId,\n            navbarTitle,\n            navbarActions,\n            endpointConfig: config,\n            authProvider,\n            eventHandlers,\n            features\n        }\n    });\n    // Set up draft auto-save manager\n    let draftManager = null;\n    if (features.autoSaveDraft) {\n        const storageKey = getDraftStorageKey(workflow?.id, customDraftKey);\n        draftManager = new DraftAutoSaveManager({\n            storageKey,\n            interval: features.autoSaveDraftInterval,\n            enabled: features.autoSaveDraft,\n            getWorkflow: getWorkflowFromStore,\n            isDirty\n        });\n        draftManager.start();\n    }\n    // Store state for cleanup\n    const state = {\n        svelteApp,\n        draftManager,\n        eventHandlers: eventHandlers ?? null\n    };\n    // Create the mounted app interface\n    const mountedApp = {\n        destroy: () => {\n            // Call onBeforeUnmount if provided\n            if (state.eventHandlers?.onBeforeUnmount) {\n                const currentWorkflow = getWorkflowFromStore();\n                if (currentWorkflow) {\n                    state.eventHandlers.onBeforeUnmount(currentWorkflow, isDirty());\n                }\n            }\n            // Stop draft manager\n            if (state.draftManager) {\n                // Save one final draft if dirty\n                if (isDirty()) {\n                    state.draftManager.forceSave();\n                }\n                state.draftManager.stop();\n            }\n            // Clear event callbacks\n            setOnDirtyStateChange(null);\n            setOnWorkflowChange(null);\n            // Unmount Svelte app\n            unmount(state.svelteApp);\n        },\n        isDirty: () => isDirty(),\n        markAsSaved: () => {\n            markAsSaved();\n            // Also update draft manager\n            if (state.draftManager) {\n                state.draftManager.markAsSaved();\n            }\n        },\n        getWorkflow: () => getWorkflowFromStore(),\n        save: async () => {\n            if (typeof window !== \"undefined\" && window.flowdropSave) {\n                await window.flowdropSave();\n            }\n            else {\n                console.warn(\" Save functionality not available\");\n            }\n        },\n        export: () => {\n            if (typeof window !== \"undefined\" && window.flowdropExport) {\n                window.flowdropExport();\n            }\n            else {\n                console.warn(\" Export functionality not available\");\n            }\n        }\n    };\n    return mountedApp;\n}\n/**\n * Mount the WorkflowEditor component in a container\n *\n * Simpler alternative to mountFlowDropApp - only mounts the editor without navbar.\n *\n * @param container - DOM element to mount the editor into\n * @param options - Configuration options\n * @returns Promise resolving to a MountedFlowDropApp instance\n */\nexport async function mountWorkflowEditor(container, options = {}) {\n    const { nodes = [], endpointConfig, portConfig } = options;\n    // Create endpoint configuration\n    let config;\n    if (endpointConfig) {\n        // Merge with default configuration to ensure all required endpoints are present\n        const { defaultEndpointConfig } = await import(\"./config/endpoints.js\");\n        config = {\n            ...defaultEndpointConfig,\n            ...endpointConfig,\n            endpoints: {\n                ...defaultEndpointConfig.endpoints,\n                ...endpointConfig.endpoints\n            }\n        };\n    }\n    else {\n        // Use default configuration if none provided\n        const { defaultEndpointConfig } = await import(\"./config/endpoints.js\");\n        config = defaultEndpointConfig;\n    }\n    // Initialize port configuration\n    let finalPortConfig = portConfig;\n    if (!finalPortConfig && config) {\n        // Try to fetch port configuration from API\n        try {\n            finalPortConfig = await fetchPortConfig(config);\n        }\n        catch (error) {\n            console.warn(\"Failed to fetch port config from API, using default:\", error);\n            finalPortConfig = DEFAULT_PORT_CONFIG;\n        }\n    }\n    else if (!finalPortConfig) {\n        finalPortConfig = DEFAULT_PORT_CONFIG;\n    }\n    initializePortCompatibility(finalPortConfig);\n    // Create the Svelte component\n    const svelteApp = mount(WorkflowEditor, {\n        target: container,\n        props: {\n            nodes,\n            endpointConfig: config\n        }\n    });\n    // Create the mounted app interface (simpler version)\n    const mountedApp = {\n        destroy: () => {\n            unmount(svelteApp);\n        },\n        isDirty: () => isDirty(),\n        markAsSaved: () => markAsSaved(),\n        getWorkflow: () => getWorkflowFromStore(),\n        save: async () => {\n            if (typeof window !== \"undefined\" && window.flowdropSave) {\n                await window.flowdropSave();\n            }\n            else {\n                console.warn(\" Save functionality not available\");\n            }\n        },\n        export: () => {\n            if (typeof window !== \"undefined\" && window.flowdropExport) {\n                window.flowdropExport();\n            }\n            else {\n                console.warn(\" Export functionality not available\");\n            }\n        }\n    };\n    return mountedApp;\n}\n/**\n * Unmount a FlowDrop app\n *\n * @param app - The mounted app to unmount\n */\nexport function unmountFlowDropApp(app) {\n    if (app && typeof app.destroy === \"function\") {\n        app.destroy();\n    }\n}\n/**\n * Unmount a FlowDrop app (alias for backward compatibility)\n *\n * @param app - The mounted app to unmount\n */\nexport function unmountWorkflowEditor(app) {\n    unmountFlowDropApp(app);\n}\n"],"names":["StaticAuthProvider","constructor","config","__publicField","this","headers","type","token","apiKey","__spreadValues","getAuthHeaders","__async","isAuthenticated","Object","keys","length","onUnauthorized","onForbidden","CallbackAuthProvider","getToken","onUnauthorizedCallback","onForbiddenCallback","Authorization","NoAuthProvider","createAuthProviderFromLegacyConfig","authConfig","DEFAULT_FEATURES","autoSaveDraft","autoSaveDraftInterval","showToasts","mergeFeatures","features","FlowDropApiClient","baseUrl","replace","request","_0","arguments","endpoint","options","url","response","fetch","ok","Error","status","statusText","json","error","console","message","getAvailableNodes","success","data","getNodesByCategory","category","encodeURIComponent","getNodeMetadata","nodeId","saveWorkflow","workflow","method","body","JSON","stringify","updateWorkflow","workflowId","loadWorkflow","listWorkflows","deleteWorkflow","executeWorkflow","inputs","getExecutionStatus","executionId","cancelExecution","getExecutionLogs","validateWorkflow","exportWorkflow","importWorkflow","workflowJson","getPortConfig","getPipelineData","pipelineId","defaultEndpointConfig","endpoints","nodes","list","get","byCategory","metadata","portConfig","workflows","create","update","delete","validate","export","import","executions","execute","cancel","logs","history","pipelines","stop","templates","users","profile","preferences","system","health","version","timeout","retry","enabled","maxAttempts","delay","backoff","createEndpointConfig","overrides","buildEndpointUrl","endpointPath","params","entries","forEach","key","value","startsWith","getEndpointMethod","endpointKey","_a","methods","getEndpointHeaders","baseHeaders","auth","_b","_c","assign","endpointHeaders","_d","operation","errorData","super","name","EnhancedFlowDropApiClient","authProvider","_1","_2","configHeaders","authHeaders","fetchConfig","lastError","attempt","newAuthHeaders","ApiError","catch","String","_e","backoffDelay","_f","Math","pow","Promise","resolve","setTimeout","setAuthProvider","getAuthProvider","id","listTemplates","getTemplate","templateId","getSystemHealth","getSystemConfig","getSystemVersion","window","__svelte","v","Set","add","UNINITIALIZED","Symbol","FILENAME","node_env","globalThis","process","env","NODE_ENV","DEV","toLowerCase","is_array","Array","isArray","index_of","prototype","indexOf","array_from","from","define_property","defineProperty","get_descriptor","getOwnPropertyDescriptor","get_descriptors","getOwnPropertyDescriptors","object_prototype","array_prototype","get_prototype_of","getPrototypeOf","is_extensible","isExtensible","is_function","thing","noop","run_all","arr","i","deferred","reject","promise","res","rej","fallback","lazy","to_array","n","iterator","array","element","push","BLOCK_EFFECT","BRANCH_EFFECT","ROOT_EFFECT","BOUNDARY_EFFECT","CLEAN","DIRTY","MAYBE_DIRTY","INERT","DESTROYED","EFFECT_RAN","EFFECT_TRANSPARENT","INSPECT_EFFECT","HEAD_EFFECT","EFFECT_PRESERVED","UNOWNED","DISCONNECTED","WAS_MARKED","REACTION_IS_UPDATING","ASYNC","ERROR_VALUE","STATE_SYMBOL","LEGACY_PROPS","LOADING_ATTR_SYMBOL","PROXY_PATH_SYMBOL","STALE_REACTION","lifecycle_outside_component","bind_invalid_checkbox_value","bold","normal","state_proxy_equality_mismatch","operator","warn","equals","safe_not_equal","a","b","safe_equals","state_snapshot_uncloneable","properties","empty","snapshot","skip_warning","no_tojson","paths","copy","clone","Map","w.state_snapshot_uncloneable","slice","excess","uncloned","map","path","join","cloned","original","unwrapped","set","Date","structuredClone","toJSON","EventTarget","e","get_stack","label","limit","stackTraceLimit","Infinity","stack","lines","split","new_lines","line","posixified","replaceAll","includes","tag","source","tag_proxy","call","component_context","set_component_context","context","dev_stack","set_dev_stack","dev_current_component_function","set_dev_current_component_function","fn","getContext","get_or_init_context_map","setContext","props","runes","p","c","s","x","l","function","pop","component","effects","create_user_effect","e.lifecycle_outside_component","parent","context_map","get_parent_context","micro_tasks","run_micro_tasks","tasks","queue_micro_task","is_flushing_sync","queueMicrotask","flush_tasks","adjustments","WeakMap","handle_error","effect","active_effect","active_reaction","f","has","message_descriptor","configurable","indent","is_firefox","component_stack","ctx","filter","get_adjustments","apply_adjustments","invoke_error_boundary","adjusted","batches","current_batch","previous_batch","batch_values","effect_pending_updates","queued_root_effects","last_scheduled_effect","is_flushing","_previous","_callbacks","_pending","_blocking_pending","_deferred","_dirty_effects","_maybe_dirty_effects","_Batch_instances","WeakSet","traverse_effect_tree_fn","root","target","first","flags","is_branch","skip","skipped_effects","is_pending","render_effects","block_effects","is_dirty","update_effect","child","next","__privateMethod","defer_effects_fn","__privateGet","set_signal_status","resolve_fn","clear","commit_fn","size","previous_batch_values","is_earlier","dummy_target","batch","sources","current","others","marked","checked","mark_effects","apply","deactivate","committed","Batch","_Batch","__privateAdd","root_effects","flush_queued_effects","capture","activate","flush","flush_effects","increment","blocking","__privateSet","decrement","schedule_effect","add_callback","settled","ensure","enqueue","task","was_updating_effect","is_updating_effect","flush_count","set_is_updating_effect","updates","updated","entry","count","values","infinite_loop_guard","old_values","e.effect_update_depth_exceeded","eager_block_effects","deps","nodes_start","teardown","ac","unlink_effect","ordered_effects","ancestor","j","reactions","reaction","depends_on","depends","dep","signal","createSubscriber","start","subscribers","untracking","render_effect","untrack","Boundary","node","children","_Boundary_instances","_anchor","_hydrate_open","_props","_children","_effect","_main_effect","_pending_effect","_failed_effect","_offscreen_fragment","_local_pending_count","_pending_count","_is_creating_fallback","_effect_pending","_effect_pending_update","internal_set","_effect_pending_subscriber","pending","block","branch","show_pending_snippet_fn","has_pending_snippet","update_pending_count","d","get_effect_pending","onerror","failed","destroy_effect","did_reset","calling_on_error","reset","e.svelte_boundary_reset_onerror","pause_effect","run_fn","previous_reaction","set_active_reaction","flatten","sync","async","derived","restore","previous_effect","previous_component_context","previous_dev_stack","set_active_effect","set_from_async_derived","all","expression","async_derived","then","result","unset_context","previous_ctx","document","createDocumentFragment","move_effect","update_pending_count_fn","before","current_async_effect","recent_async_deriveds","DERIVED","parent_derived","rv","wv","location","e.async_derived_orphan","boundary","should_suspend","deferreds","create_effect","async_effect","handler","fulfil","go","user_derived","push_reaction_value","derived_safe_equal","destroy_derived_effects","execute_derived","prev_active_effect","get_derived_parent_effect","prev_inspect_effects","inspect_effects","set_inspect_effects","e.derived_references_self","update_reaction","update_derived","increment_write_version","is_destroying_effect","skip_reaction","inspect_effects_deferred","state","mutable_source","initial_value","immutable","trackable","should_proxy","current_sources","e.state_unsafe_mutation","new_value","proxy","old_value","set_during_effect","mark_reactions","untracked_writes","set_untracked_writes","flush_inspect_effects","inspects","not_dirty","regex_is_valid_identifier","is_proxied_array","parent_version","update_version","with_parent","set_update_version","Proxy","prop","receiver","Reflect","ARRAY_MUTATING_METHODS","args","updating","update_path","new_path","get_label","_","descriptor","enumerable","writable","e.state_descriptors_fixed","deleteProperty","exists","other_s","ls","Number","isInteger","ownKeys","own_keys","setPrototypeOf","e.state_prototype_fixed","description","test","get_proxied_value","is","$window","$document","first_child_getter","next_sibling_getter","init_operations","navigator","userAgent","element_prototype","Element","node_prototype","Node","text_prototype","Text","__click","__className","__attributes","__style","__e","__t","__svelte_meta","cleanup","__svelte_cleanup","lastIndexOf","item","from_index","index","w.state_proxy_equality_mismatch","init_array_prototype_warnings","create_text","createTextNode","get_first_child","get_next_sibling","is_text","first_child","fragment","Comment","sibling","next_sibling","autofocus","dom","activeElement","focus","listening_to_form_reset","without_reactive_context","listen_to_event_and_reset_event","event","on_reset","addEventListener","prev","__on_r","evt","defaultPrevented","elements","validate_effect","rune","e.effect_orphan","e.effect_in_unowned_derived","e.effect_in_teardown","nodes_end","last","transitions","component_function","parent_effect","parent_last","push_effect","user_effect","EFFECT","effect_root","template_effect","execute_effect_teardown","previously_destroying_effect","set_is_destroying_effect","destroy_effect_children","remove_dom","controller","abort","removed","remove_effect_dom","remove_reactions","transition","end","remove","callback","destroy","pause_children","run_out_transitions","remaining","check","out","local","is_global","resume_effect","resume_children","in","append","new_deps","skipped_deps","write_version","read_version","dependencies","is_unowned","dependency","is_disconnected","is_unowned_connected","schedule_possible_effect_self_invalidation","previous_deps","previous_skipped_deps","previous_untracked_writes","previous_skip_reaction","previous_sources","previous_untracking","previous_update_version","remove_reaction","new_length","start_index","previous_component_fn","previous_stack","destroy_block_effect_children","tick","was_flushing_sync","flushSync","is_derived","tracking","was_read","trace","depends_on_old_values","STATUS_MASK","deep_read","visited","getTime","proto","descriptors","all_registered_events","root_event_handles","create_event","event_name","target_handler","handle_event_propagation","cancelBubble","on","removeEventListener","passive","HTMLMediaElement","delegate","events","last_propagated_event","handler_element","owner_document","composedPath","current_target","path_idx","handled_at","__root","at_idx","handler_idx","throw_error","other_errors","parent_element","assignedSlot","parentNode","host","delegated","disabled","currentTarget","create_fragment_from_html","html","elem","createElement","innerHTML","content","assign_nodes","from_html","is_fragment","use_import_node","has_start","importNode","cloneNode","from_namespace","ns","wrapped","appendChild","from_svg","text","t","comment","frag","createComment","anchor","is_capture_event","endsWith","DELEGATED_EVENTS","is_delegated","ATTRIBUTE_ALIASES","formnovalidate","ismap","nomodule","playsinline","readonly","defaultvalue","defaultchecked","srcobject","novalidate","allowfullscreen","disablepictureinpicture","disableremoteplayback","normalize_attribute","PASSIVE_EVENTS","is_passive_event","set_text","str","nodeValue","mount","Component","intro","registered_events","event_handle","document_listeners","unmount","outro","component_root","anchor_node","$$events","removeChild","mounted_components","_mount","BranchManager","_batches","_onscreen","_offscreen","_transition","_commit","onscreen","offscreen","lastChild","k","on_destroy","snippet","get_snippet","branches","e.invalid_snippet","throw_rune_error","e.rune_outside_svelte","onMount","onDestroy","createEventDispatcher","active_component_context","detail","callbacks","bubbles","cancelable","CustomEvent","create_custom_event","if_block","elseif","update_branch","condition","has_branch","flag","each","get_collection","get_key","render_fn","fallback_fn","items","each_effect","was_empty","offscreen_items","each_array","collection","commit","seen","to_animate","is_animated","should_update","matched","stashed","measure","update_item","unfix","move","link","create_item","to_destroy","destroy_length","controlled_anchor","fix","items_map","is_controlled","parent_node","textContent","pause_effects","unused","reconcile","reactive","collection_index","dest","next_node","get_value","svg","mathml","get_component","action","payload","inited","deep_read_state","attach","get_fn","r","o","clsx","_clsx","whitespace","append_styles","styles","important","separator","css","to_css_name","set_class","is_html","hash","prev_classes","next_classes","next_class_name","directives","classname","len","substring","to_class","removeAttribute","className","setAttribute","is_present","classList","toggle","update_styles","priority","style","removeProperty","setProperty","set_style","prev_styles","next_styles","next_style_attr","normal_styles","important_styles","new_style","trim","in_str","in_apo","in_comment","reserved_names","name_index","to_style","cssText","select_option","select","mounting","multiple","option","selected","get_option_value","selectedIndex","init_select","observer","MutationObserver","__value","observe","childList","subtree","attributes","attributeFilter","disconnect","bind_select_value","is_reset","query","querySelectorAll","selected_option","querySelector","CLASS","STYLE","IS_CUSTOM_ELEMENT","IS_HTML","set_value","get_attributes","nodeName","set_checked","set_selected","hasAttribute","set_attribute","attribute","get_setters","attribute_effect","css_hash","should_remove_defaults","is_select","is_custom_element","preserve_attribute_case","is_option_element","tagName","class","setters","prev_value","prefix","opts","event_handle_key","handle","Boolean","is_default","input","use_default","previous","defaultValue","defaultChecked","namespaceURI","set_attributes","symbol","getOwnPropertySymbols","setters_cache","cache_key","getAttribute","element_proto","bind_value","e.bind_invalid_checkbox_value","is_numberlike_input","to_number","selectionStart","selectionEnd","min","_ResizeObserverSingleton","_ResizeObserverSingleton_instances","_listeners","_observer","_options","listener","listeners","getObserver_fn","unobserve","ResizeObserver","resize_observer_border_box","box","bind_element_size","unsub","is_bound_this","bound_value","element_or_component","bind_this","get_parts","old_parts","parts","subscribe_to_store","store","run","invalidate","subscribe","unsubscribe","subscriber_queue","run_queue","subscriber","stores","single","stores_array","every","auto","started","unsubscribers","is_store_binding","IS_UNMOUNTED","store_get","store_name","is_synchronous_callback","get_store","setup_stores","store_mutate","rest_props_handler","exclude","property","e.props_rest_readonly","rest_props","other","to_proxy","spread_props_handler","desc","spread_props","setter","bindable","fallback_value","fallback_dirty","get_fallback","is_entry_props","getter","is_store_sub","previous_is_store_binding","capture_store_binding","e.props_invalid_value","legacy_parent","$$legacy","mutation","overridden","dispatch","Dispatch","concat","typename","types","T","hasOwnProperty","that","xhtml","namespaces","xlink","xml","xmlns","namespace","space","creatorInherit","ownerDocument","uri","documentElement","createElementNS","creatorFixed","fullname","creator","none","selector","selectorAll","arrayAll","matcher","matches","childMatcher","find","childFirst","firstElementChild","sparse","EnterNode","datum","_next","_parent","__data__","bindIndex","group","enter","exit","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","arraylike","ascending","NaN","attrRemove","attrRemoveNS","removeAttributeNS","attrConstant","attrConstantNS","setAttributeNS","attrFunction","attrFunctionNS","defaultView","styleRemove","styleConstant","styleFunction","styleValue","getPropertyValue","getComputedStyle","propertyRemove","propertyConstant","propertyFunction","classArray","string","ClassList","_node","_names","classedAdd","names","classedRemove","classedTrue","classedFalse","classedFunction","textRemove","textConstant","textFunction","htmlRemove","htmlConstant","htmlFunction","raise","nextSibling","lower","previousSibling","insertBefore","firstChild","constantNull","selection_cloneShallow","selection_cloneDeep","onRemove","__on","m","onAdd","contextListener","dispatchEvent","createEvent","initEvent","dispatchConstant","dispatchFunction","splice","contains","Selection","groups","parents","_groups","_parents","selection","pointer","sourceEvent","ownerSVGElement","createSVGPoint","point","clientX","y","clientY","matrixTransform","getScreenCTM","inverse","getBoundingClientRect","rect","left","clientLeft","top","clientTop","pageX","pageY","subgroups","subnode","subgroup","selectAll","selectChild","match","childFind","selectChildren","childrenFilter","bind","enterGroup","updateGroup","i0","i1","_enter","_exit","onenter","onupdate","onexit","merge","order","groups0","groups1","m0","m1","merges","group0","group1","compareDocumentPosition","sort","compare","compareNode","sortgroups","sortgroup","attr","getAttributeNS","classed","insert","deep","typenames","parseTypenames","nonpassive","nonpassivecapture","nopropagation","stopImmediatePropagation","noevent$1","preventDefault","dragDisable","view","noevent","__noselect","MozUserSelect","yesdrag","noclick","constant$2","DragEvent","subject","identifier","active","dx","dy","defineProperties","defaultFilter","ctrlKey","button","defaultContainer","defaultSubject","defaultTouchable","maxTouchPoints","define","factory","extend","definition","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","format","exec","parseInt","rgbn","Rgb","rgba","hsla","g","opacity","rgb_formatHex","hex","rgb_formatRgb","clampa","clampi","isNaN","max","round","toString","h","Hsl","hslConvert","clamph","clampt","hsl2rgb","m2","channels","displayable","formatHex8","formatHsl","clamp","constant$1","gamma","nogamma","exponential","constant","linear","interpolateRgb","rgbGamma","colorRgb","numberArray","genericArray","nb","na","date","setTime","interpolateNumber","object","reA","reB","interpolateString","am","bm","bs","bi","lastIndex","q","number","one","zero","interpolate$1","ArrayBuffer","isView","DataView","valueOf","svgNode","degrees","PI","identity","translateX","translateY","rotate","skewX","scaleX","scaleY","decompose","sqrt","atan2","atan","interpolateTransform","parse","pxComma","pxParen","degParen","xa","ya","xb","yb","translate","scale","interpolateTransformCss","DOMMatrix","WebKitCSSMatrix","isIdentity","interpolateTransformSvg","transform","baseVal","consolidate","matrix","cosh","exp","interpolateZoom","zoomRho","rho","rho2","rho4","zoom","p0","p1","S","ux0","uy0","w0","ux1","uy1","w1","d2","log","d1","b0","b1","r0","r1","coshr0","u","sinh","duration","SQRT2","taskHead","taskTail","frame","interval","clockLast","clockNow","clockSkew","clock","performance","now","setFrame","requestAnimationFrame","clearNow","Timer","_call","_time","timer","time","restart","wake","timerFlush","t0","t2","t1","sleep","nap","poke","clearTimeout","clearInterval","setInterval","elapsed","TypeError","emptyOn","emptyTween","schedule","timing","schedules","__transition","self","tween","ease","init","interrupt","tweenRemove","tween0","tween1","tweenFunction","tweenValue","_id","interpolate","value1","string00","interpolate0","string1","string0","string10","attrTweenNS","attrInterpolateNS","_value","attrTween","attrInterpolate","delayFunction","delayConstant","durationFunction","durationConstant","Transition","_name","newId","selection_prototype","inherit","id0","id1","on0","on1","sit","onFunction","styleTween","styleNull","listener0","styleMaybeRemove","styleInterpolate","textTween","textInterpolate","easeConstant","easeVarying","defaultTiming","ZoomEvent","Transform","applyX","applyY","invert","invertX","invertY","rescaleX","domain","range","rescaleY","__zoom","defaultExtent","SVGElement","viewBox","width","height","clientWidth","clientHeight","defaultTransform","defaultWheelDelta","deltaY","deltaMode","defaultConstrain","extent","translateExtent","dx0","dx1","dy0","dy1","zoom$1","touchstarting","touchfirst","touchending","constrain","wheelDelta","touchable","scaleExtent","clickDistance2","tapDistance","wheeled","mousedowned","dblclicked","touchstarted","touchmoved","touchended","centroid","gesture","w","clean","__zooming","Gesture","taps","wheel","mouse","moved","x0","y0","dragEnable","changedTouches","k1","shiftKey","touches","touch0","touch1","l0","l1","dp","dl","hypot","scaleBy","scaleTo","translateBy","translateTo","emit","clickDistance","errorMessages","handleType","sourceHandle","targetHandle","infiniteExtent","NEGATIVE_INFINITY","POSITIVE_INFINITY","elementSelectionKeys","defaultAriaLabelConfig","direction","ConnectionMode","PanOnScrollMode","SelectionMode","initialConnection","inProgress","isValid","fromHandle","fromPosition","fromNode","to","toHandle","toPosition","toNode","ConnectionLineType","MarkerType","Position","oppositePosition","Left","Right","Top","Bottom","handleConnectionChange","cb","diff","connection","isEdgeBase","isInternalNodeBase","getNodePositionWithOrigin","nodeOrigin","getNodeDimensions","origin","offsetX","offsetY","position","getInternalNodesBounds","nodeLookup","x2","y2","nodeBox","nodeToBox","getBoundsOfBoxes","boxToRect","getNodesInside","tx","ty","tScale","partially","excludeNonSelectableNodes","paneRect","__spreadProps","pointToRendererPoint","visibleNodes","measured","selectable","hidden","initialWidth","initialHeight","overlappingArea","getOverlappingArea","nodeToRect","area","partiallyVisible","internals","handleBounds","dragging","fitViewport","panZoom","minZoom","maxZoom","nodesToFit","fitViewNodes","optionNodeIds","includeHiddenNodes","getFitViewNodes","bounds","viewport","getViewportForBounds","padding","setViewport","calculateNodePosition","nextPosition","nodeExtent","onError","parentId","parentX","parentY","positionAbsolute","expandParent","isCoordinateExtent","parentWidth","parentHeight","clampPosition","getElementsToRemove","nodesToRemove","edgesToRemove","edges","onBeforeDelete","nodeIds","matchingNodes","deletable","isIncluded","parentHit","edgeIds","edge","deletableEdges","connectedEdges","getConnectedEdges","matchingEdges","onBeforeDeleteResult","val","dimensions","clampPositionToParent","childPosition","childDimensions","calcAutoPanVelocity","abs","calcAutoPan","pos","speed","distance","box1","box2","rectToBox","_h","_g","getBoundsOfRects","rect1","rect2","rectA","rectB","xOverlap","yOverlap","ceil","isRectObject","obj","isNumeric","isFinite","devWarn","snapPosition","snapGrid","snapToGrid","rendererPointToPoint","parsePadding","floor","paddingValue","parseFloat","paddingY","paddingX","right","bottom","parsePaddings","xZoom","yZoom","clampedZoom","newPadding","boundRight","boundBottom","calculateAppliedPaddings","offset","isMacOs","nodeHasDimensions","getPointerPosition","containerBounds","getEventPosition","pointerPos","xSnapped","ySnapped","getDimensions","offsetWidth","offsetHeight","getHostForElement","getRootNode","inputTags","isInputDOMNode","nodeType","closest","isMouseEvent","isMouse","evtX","evtY","getHandleBounds","nodeElement","nodeBounds","handles","calculateControlOffset","curvature","getControlWithCurvature","x1","y1","getBezierPath","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition","sourceControlX","sourceControlY","targetControlX","targetControlY","labelX","labelY","centerX","centerY","getBezierEdgeCenter","getEdgeCenter","xOffset","yOffset","getElevatedEdgeZIndex","sourceNode","targetNode","zIndex","elevateOnSelect","z","isEdgeVisible","edgeBox","viewRect","getEdgeId","getStraightPath","handleDirections","getPoints","center","stepPosition","sourceDir","targetDir","sourceGapped","targetGapped","dir","getDirection","dirAccessor","currDir","points","sourceGapOffset","targetGapOffset","defaultOffsetX","defaultOffsetY","verticalSplit","horizontalSplit","sourceTarget","targetSource","gapOffset","dirAccessorOpposite","isSameDir","sourceGtTargetOppo","sourceLtTargetOppo","sourceGapPoint","targetGapPoint","getSmoothStepPath","borderRadius","reduce","segment","bendSize","xDir","getBend","isNodeInitialized","getEdgePosition","sourceHandleBounds","toHandleBounds","targetHandleBounds","getHandle$1","connectionMode","Strict","getHandlePosition","fallbackPosition","handleId","getMarkerId","marker","defaultOptions","elevateNodesOnSelect","defaults","adoptUserNodesDefaultOptions","checkEquality","mergeObjects","base","incoming","updateChildNode","parentLookup","childNodes","updateParentLookup","selectedNodeZ","childNode","positionWithOrigin","clampedPosition","absolutePosition","childZ","calculateZ","parentZ","calculateChildXYZ","positionChanged","updateNodeInternals","domNode","viewportNode","updatedInternals","changes","m22","DOMMatrixReadOnly","parentExpandChildren","dimensionChanged","force","newNode","parentExpandChanges","parentExpansions","parentRect","expandedRect","xChange","yChange","newWidth","newHeight","widthChange","heightChange","some","setAttributes","handleExpandParent","addConnectionToLookup","connectionKey","connectionLookup","nodeMap","typeMap","handleMap","isParentSelected","hasSelector","parentElement","getEventHandlerParams","dragItems","nodesFromDragItems","dragItem","userNode","XYDrag","onNodeMouseDown","getStoreItems","onDragStart","onDrag","onDragStop","lastPos","autoPanId","autoPanStarted","mousePosition","dragStarted","d3Selection","abortDrag","nodePositionsChanged","dragEvent","noDragClassName","handleSelector","isSelectable","nodeClickDistance","updateNodes","onNodeDrag","onSelectionDrag","updateNodePositions","hasChange","isMultiDrag","nodesBox","multiDragSnapOffset","refDragItem","refPos","refPosSnapped","calculateSnapOffset","adjustedNodeExtent","currentNode","currentNodes","autoPan","panBy","autoPanSpeed","autoPanOnNodeDrag","cancelAnimationFrame","xMovement","yMovement","startDrag","multiSelectionActive","nodesDraggable","selectNodesOnDrag","onNodeDragStart","onSelectionDragStart","unselectNodesAndEdges","mousePos","draggable","internalNode","getDragItems","d3DragInstance","mousedownx","mousedowny","mousemoving","container","gestures","drag","beforestart","mousemoved","mouseupped","nodrag","touch","nodeDragThreshold","onNodeDragStop","onSelectionDragStop","getClosestHandle","connectionRadius","closestHandles","minDistance","closeNodes","getNodesWithinDistance","allHandles","oppositeHandleType","getHandle","withAbsolutePosition","getHandleType","edgeUpdaterType","handleDomNode","alwaysValid","isValidHandle","fromNodeId","fromHandleId","fromType","doc","lib","flowId","isValidConnection","isTarget","handleBelow","elementFromPoint","handleToCheck","handleNodeId","connectable","connectableEnd","XYHandle","onPointerDown","autoPanOnConnect","cancelConnection","onConnectStart","onConnect","onConnectEnd","onReconnectEnd","updateConnection","getTransform","getFromHandle","dragThreshold","closestHandle","connectionStarted","fromHandleInternal","resultHandleDomNode","fromNodeInternal","previousConnection","startConnection","onPointerMove","onPointerUp","isInsideConnectionRadius","isHandleValid","isConnectionValid","newConnection","connectionState","__objRest","finalConnectionState","transformToViewport","viewportToTransform","zoomIdentity","isWrappedWithClass","isRightClickPan","panOnDrag","usedButton","defaultEase","getD3Transition","onEnd","hasDuration","factor","XYPanZoom","paneClickDistance","onPanZoom","onPanZoomStart","onPanZoomEnd","onDraggingChange","zoomPanValues","isZoomingOrPanning","usedRightMouseButton","prevViewport","mouseButton","timerId","panScrollTimeout","isPanScrolling","bbox","d3ZoomInstance","setViewportConstrained","d3ZoomHandler","d3DblClickZoomHandler","setTransform","nextTransform","contrainedTransform","noWheelClassName","noPanClassName","onPaneContextMenu","userSelectionActive","panOnScroll","panOnScrollMode","panOnScrollSpeed","preventScrolling","zoomOnPinch","zoomOnScroll","zoomOnDoubleClick","zoomActivationKeyPressed","onTransformChange","wheelHandler","d3Zoom","currentZoom","pinchDelta","deltaNormalize","deltaX","Vertical","Horizontal","internal","nextViewport","createPanOnScrollHandler","isWheel","preventZoom","hasNoWheelClass","createZoomOnScrollHandler","startHandler","createPanZoomStartHandler","panZoomHandler","createPanZoomHandler","panZoomEndHandler","eventViewport","createPanZoomEndHandler","zoomScroll","pinchZoom","buttonAllowed","createFilter","getViewport","zoomTransform","setScaleExtent","setTranslateExtent","syncViewport","currentTransform","setClickDistance","validDistance","ResizeControlVariant","$.prop","$$props","isConnectableStart","isConnectableEnd","rest","isConnectableContext","$.derived","isConnectable","useStore","ariaLabelConfig","prevConnections","onconnect","ondisconnect","connections","areConnectionMapsEqual","_connections","RENDER_EFFECT","$$d","connectingFrom","connectingTo","connectionInProgress","$.get","$$array","isPossibleTargetHandle","valid","onConnectExtended","onbeforeconnect","addEdge","onpointerdown","isMouseTriggered","startParams","onconnectstart","onconnectend","connectionDragThreshold","onclick","clickConnectStartHandle","onclickconnectstart","isValidConnectionHandler","connectionClone","$.snapshot","onclickconnectend","event_handler","noDragClass","noPanClass","clickConnect","connectionindicator","tryToMount","targetEl","portal","destroyEffect","$.user_effect","hideOnSSR","hide","$.state","$.set","isNode","isNodeBase","toPxString","arrowKeyDiffs","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","interactionWidth","$.rest_props","$$render","consequent","selectEdgeOnClick","transparent","visible","handleEdgeSelection","display","pathOptions","read_methods","set_like_methods","_SvelteSet","_SvelteSet_instances","_sources","_version","_size","_update_version","init_fn","deleted","source_fn","set_proto","SvelteSet","ReactiveValue","onsubscribe","_fn","_subscribe","parenthesis_regex","non_parenthesized_keywords","MediaQuery","final_query","keyword","matchMedia","getLayoutedEdges","defaultEdgeOptions","previousEdges","onlyRenderVisible","elevateEdgesOnSelect","layoutedEdges","edgePosition","initialNodeTypes","$.template_effect","$.set_text","output","default","DefaultNode","initialEdgeTypes","straight","smoothstep","BezierEdgeInternal","step","getInitialStore","signals","_flowId","_nodesDraggable","_nodesConnectable","_elementsSelectable","_nodesFocusable","_edgesFocusable","_disableKeyboardA11y","_minZoom","_maxZoom","_nodeOrigin","_nodeExtent","_translateExtent","_nodeDragThreshold","_autoPanOnNodeDrag","_autoPanOnConnect","_autoPanOnNodeFocus","_connectionDragThreshold","_snapGrid","_selectionMode","_nodeTypes","_edgeTypes","_noPanClass","_noDragClass","_noWheelClass","_ariaLabelConfig","_connectionMode","_connectionRadius","_isValidConnection","_selectNodesOnDrag","_defaultMarkerColor","_onlyRenderVisibleElements","_onerror","_clickConnect","_colorMode","nodesInitialized","tmpLookup","adoptUserNodes","fitViewQueued","fitViewOptions","resolveFitView","edgeLookup","edgeId","sourceKey","updateConnectionLookup","selectedNodesCount","_prevSelectedNodeIds","selectedNodeIds","selectedNodes","_prevSelectedNodes","selectedEdgesCount","_prevSelectedEdgeIds","selectedEdgeIds","selectedEdges","_prevSelectedEdges","_edges","_prevVisibleEdges","onlyRenderVisibleElements","visibleEdges","getVisibleNodes","nodesConnectable","elementsSelectable","nodesFocusable","edgesFocusable","disableKeyboardA11y","autoPanOnNodeFocus","fitView","selectionMode","Partial","nodeTypes","edgeTypes","noWheelClass","mergeAriaLabelConfig","partial","_nodesInitialized","initialViewport","getInitialViewport","_connection","defaultMarkerColor","defaultColor","defaultMarkerStart","defaultMarkerEnd","ids","markers","markerStart","markerEnd","markerId","localeCompare","createMarkerIds","onflowerror","ondelete","onbeforedelete","onbeforereconnect","onreconnect","onreconnectstart","onreconnectend","onselectiondrag","onselectiondragstart","onselectiondragstop","fitViewResolver","colorModeSSR","colorMode","_prefersDark","viewportInitialized","selectionRect","selectionKeyPressed","multiselectionKeyPressed","deleteKeyPressed","panActivationKeyPressed","selectionRectMode","ariaLiveMessage","_viewport","newViewport","resetStoreValues","storeContext","getStore","createStore","nodeDragItems","zoomBy","deselect","elementsToDeselect","deselected","newElements","nodesToDeselect","nodesDeselected","newNodes","edgesToDeselect","edgesDeselected","newEdges","addSelectedNodes","isMultiSelection","nodeWillBeSelected","addSelectedEdges","edgeWillBeSelected","storeWithActions","setNodeTypes","setEdgeTypes","edgeParams","el","connectionExists","addEdgeUtil","updateNodeInternalsSystem","updateAbsolutePositions","change","zoomIn","zoomOut","withResolvers","setCenter","nextZoom","currentPanZoom","setMinZoom","setMaxZoom","setPaneClickDistance","handleNodeSelection","unselect","nodeRef","blur","moveSelectedNodes","nodeUpdates","xVelo","yVelo","xDiff","yDiff","delta","transformChanged","panBySystem","setPanZoomInstance","panZoomInstance","wrapHandler","toggleSelected","isSelected","isSetEqual","dragInstance","updateDrag","ARIA_NODE_DESC_KEY","ARIA_EDGE_DESC_KEY","ARIA_LIVE_MESSAGE","$.fallback","_draggable","_selectable","_connectable","_focusable","focusable","measuredWidth","measuredHeight","dragHandle","positionX","positionY","hasDimensions","hasHandleBounds","isInitialized","isParent","isInParentLookup","prevNodeRef","prevType","prevSourcePosition","prevTargetPosition","NodeComponent","nodeStyle","onSelectNodeHandler","onKeyDown","resizeObserver","onFocus","onnodepointerenter","onnodepointerleave","onnodepointermove","onnodecontextmenu","role","ariaRole","domAttributes","$.bind_this","div","$$value","$$anchor","markerUnits","orient","stroke","ArrowClosed","consequent_1","Arrow","alternate","$.each","animated","labelStyle","ariaLabel","edgeRef","EdgeComponent","markerStartUrl","markerEndUrl","onedgeclick","onmouseevent","onkeydown","onedgecontextmenu","onedgepointerenter","onedgepointerleave","isVisible","oncontextmenu","mapModifierToBitMask","def","shortcut","param","off","trigger","normalizedTriggers","modifierMask","metaKey","altKey","acc","mergedTrigger","modifier","triggerEnabled","orDefs","modified","orDef","originalEvent","newEnabled","newType","useSvelteFlow","getNodeRect","nodeToUse","evaluateAbsolutePosition","nodeWithPosition","updateNode","nodeUpdate","nextNode","getInternalNode","getNode","getNodes","getElements","getEdge","getEdges","setZoom","zoomLevel","getZoom","currentViewport","fitBounds","getIntersectingNodes","nodeOrRect","nodesToIntersect","isRect","nodeRect","currNodeRect","isNodeIntersecting","deleteElements","deletedNodes","deletedEdges","screenToFlowPosition","domX","domY","correctedPosition","flowToScreenPosition","rendererPosition","toObject","updateNodeData","dataUpdate","nextData","updateEdge","edgeUpdate","nextEdge","getNodesBounds","currBox","nodeOrId","isId","getHandleConnections","lookup","selectionKey","multiSelectionKey","deleteKey","panActivationKey","zoomActivationKey","isKeyObject","getModifier","getShortcutTrigger","_key","keyString","getKeyString","resetKeysAndSelection","handleDelete","positionClasses","Free","selectionOnDrag","connectionLineType","Bezier","$.proxy","providerContext","setStore","provider","onselectionchange","selectionChangeHandlers","divAttributes","$.exclude_from_object","wrapperOnScroll","scrollTo","behavior","onscroll","panOnDragActive","panOnScrollActive","onInitCalled","instance","onmovestart","onmove","onmoveend","isSelecting","hasActiveSelection","selectionInProgress","onClick","setPointerCapture","pointerId","startX","startY","nextUserSelectRect","prevSelectedNodeIds","prevSelectedEdgeIds","edgesSelectable","releasePointerCapture","onContextMenu","$$args","pathParams","Straight","Step","SmoothStep","ref","preventScroll","__","onnodedrag","onnodedragstart","onnodedragstop","$.set_class","$.clsx","$0","hideAttribution","$.set_attribute","div_2","div_1","text_1","restProps","BackgroundVariant","orientation","showZoom","showFitView","showLock","buttonProps","bgColor","buttonBgColor","bgColorHover","buttonBgColorHover","buttonColor","colorHover","buttonColorHover","borderColor","buttonBorderColor","isInteractive","minZoomReached","maxZoomReached","orientationClass","onZoomInHandler","onZoomOutHandler","onFitViewHandler","onToggleInteractivity","interactive","consequent_2","consequent_3","consequent_4","defaultSize","Dots","Lines","Cross","variant","gap","lineWidth","isDots","isCross","gapXY","patternId","scaledGap","scaledSize","patternDimensions","patternOffset","circle","pattern","minimap","getViewScale","zoomStep","pannable","zoomable","inversePan","panStart","zoomAndPanHandler","panCurrent","panDelta","moveScale","XYMinimap","getAttrFunction","func","Function","nodeStrokeColor","nodeClass","nodeBorderRadius","nodeStrokeWidth","nodeColorFunc","nodeColor","nodeStrokeColorFunc","nodeClassFunc","shapeRendering","chrome","labelledBy","viewBB","boundingRect","scaledWidth","scaledHeight","viewScale","viewWidth","viewHeight","viewboxWidth","viewboxHeight","get_styles","nodeDimesions","$1","$2","strokeWidth","classes","maskStrokeWidth","matchIconName","stringToIcon","allowSimpleName","colonSeparated","shift","name$1","validateIconName","dashSeparated","icon","defaultIconDimensions","freeze","defaultIconTransformations","vFlip","hFlip","defaultIconProps","defaultExtendedIconProps","mergeIconData","obj1","obj2","mergeIconTransformations","internalGetIconData","tree","icons","aliases","currentProps","parseIconSet","not_found","resolved","getIconsTree","optionalPropertyDefaults","checkOptionalProps","quicklyValidateIconSet","dataStorage","getStorage","providerStorage","missing","newStorage","addIconSet","storage","simpleNames","allowSimpleNames","allow","addIcon","err","addIconToStorage","defaultIconSizeCustomisations","defaultIconCustomisations","unitsSplit","unitsTest","calculateSize","ratio","precision","oldParts","newParts","code","isNumber","num","regex","counters","replaceIDs","suffix","random","newID","nextID","escapedID","getAPIModule","createAPIConfig","resources","maxURL","dataAfterTimeout","configStorage","fallBackAPISources","fallBackAPI","addAPIProvider","customConfig","getAPIConfig","fetchModule","detectFetch","fetchAPIModule","prepare","results","maxLength","maxHostLength","calculateMaxLength","send","getPath","iconsList","URLSearchParams","defaultError","shouldAbort","removeCallback","storages","loaderCallbacks","row","idCounter","defaultConfig","sendQuery","done","resourcesCount","startIndex","nextIndex","startTime","queriesSent","queue","doneCallbacks","resetTimer","overwrite","failQuery","clearQueue","execNext","resource","status$1","isError","queued","moduleResponse","queriesPending","initRedundancy","cfg","queries","queryCallback","doneCallback","query$1","setIndex","getIndex","emptyCallback$1","redundancyCache","sendAPIQuery","redundancy","api","cached","getRedundancyCache","emptyCallback","loadedNewIcons","iconsLoaderFlag","pendingCallbacksFlag","hasPending","oldLength","loaded","updateCallbacks","parseLoaderResponse","checkMissing","pendingIcons","parsePossiblyAsyncResponse","loadNewIcons","iconsToLoad","iconsQueueFlag","icons$1","customIconLoader","loadIcon","loadIcons","invalid","checkIconNamesForAPI","sortedIcons","lastIcon","localStorage","sortIcons","listToIcons","callCallback","newIcons","lastProvider","lastPrefix","providerNewIcons","pendingQueue","pendingSources","storeCallback","flipFromString","custom","flip","rotateFromString","units","value$1","defaultExtendedIconCustomisations","inline","svgDefaults","commonProps","monotoneProps","coloredProps","propsToAdd","image","repeat","propsToAddTo","mask","background","render","customisations","valueType","mergeCustomisations","mode","componentProps","fullIcon","fullCustomisations","transformations","tempValue","rotation","unshift","defs","endEnd","splitSVGDefs","wrapSVGContent","customisationsWidth","customisationsHeight","boxWidth","boxHeight","setAttr","isUnsetKeyword","iconToSVG","renderAttribs","useMask","renderAttribsHTML","iconToHTML","encodeSVGforURL","svgToData","fixSize","customStyle","_window","IconifyPreload","preload","added","addCollection","IconifyProviders","providers","checkIconState","onload","abortLoading","loading","iconName","getIconData","isSSR","destroyed","iconState","counter","iconData","generatedData","generateIcon","$.attribute_effect","$.html","span","PortCompatibilityChecker","compatibilityMap","buildCompatibilityMap","dataType","dataTypes","rule","compatibilityRules","alias","mainCompatibility","areDataTypesCompatible","outputType","inputType","compatibleTypes","getCompatibleTypes","sourceType","getDataTypeConfig","dataTypeId","dt","getEnabledDataTypes","globalCompatibilityChecker","initializePortCompatibility","getPortCompatibilityChecker","getPossibleConnections","targetNodes","sourceMetadata","nt","possibleConnections","sourceOutputs","outputs","targetMetadata","targetInputs","sourcePort","targetPort","compatible","sourceNodeId","sourcePortId","targetNodeId","targetPortId","validateConnection","getConnectionSuggestions","suggestions","otherNodes","otherNode","otherMetadata","portId","portName","portType","hasCycles","recursionStack","hasCycleUtil","outgoingEdges","getExecutionOrder","inDegree","graph","neighbors","degree","neighbor","CATEGORY_COLOR_TOKENS","prompts","models","processing","logic","helpers","tools","embeddings","memories","agents","ai","bundles","DATA_TYPE_COLOR_TOKENS","integer","float","boolean","mixed","file","picture","audio","sound","video","movie","email","datetime","tool","getCategoryColorToken","getDataTypeColorToken","getAvailableDataTypes","DEFAULT_COLORS","accent","border","getCategoryColors","getCategoryBackground","getCategoryAccent","getCategoryText","getCategoryBorder","getNodeColors","isProcessing","baseColor","getNodeBackground","getNodeAccent","getNodeText","getNodeBorder","getDataTypeColor","parseDataTypeDisplay","elementType","baseType","displayName","getDataTypeDisplayText","isArrayDataType","getArrayElementType","arrayDataType","useConnection","workflowStore","isDirtyStore","savedSnapshot","onDirtyStateChangeCallback","onWorkflowChangeCallback","setOnDirtyStateChange","setOnWorkflowChange","createSnapshot","toSnapshot","notifyWorkflowChange","changeType","isDirty","updateDirtyState","markAsSaved","currentWorkflow","getWorkflow","$workflow","workflowName","workflowNodes","workflowEdges","workflowMetadata","createdAt","toISOString","updatedAt","versionId","substr","updateNumber","hasWorkflowDataChanged","currentEdge","newEdge","workflowActions","initialize","updateEdges","updateName","addNode","removeNode","removeEdge","updateMetadata","batchUpdate","workflowChanged","workflowValidation","hasNodes","hasEdges","nodeCount","edgeCount","workflowMetadataChanged","DEFAULT_ICONS","NODE","CATEGORY","ADD","REMOVE","EDIT","SAVE","LOAD","EXPORT","IMPORT","SEARCH","CLOSE","SETTINGS","HELP","SUCCESS","ERROR","WARNING","INFO","LOADING","HOME","BACK","FORWARD","UP","DOWN","WORKFLOW","NODE_ADD","NODE_DELETE","CONNECTION","DATA","FILE","TEXT","MODEL","BRAIN","VECTOR","ROBOT","TOOL","CALCULATOR","CLOCK","CHAT","MESSAGE","EMAIL","WEBHOOK","STORAGE","MEMORY","CACHE","PROCESS","FILTER","SORT","TRANSFORM","LOGIC","CONDITION","LOOP","API","LINK","PLUGIN","BUNDLE","CATEGORY_ICONS","getNodeIcon","nodeIcon","getCategoryIcon","getDefaultIcon","isValidIcon","getValidIcon","handleNodeClick","isHandleInteraction","on_keydown","handleDoubleClick","openConfigSidebar","onConfigOpen","nodeForConfig","port","required","text_4","text_2","text_3","text_7","text_5","text_6","L","breaks","extensions","gfm","hooks","pedantic","renderer","silent","tokenizer","walkTokens","G","I","caret","getRegex","codeRemoveIndent","outputLinkReplace","indentCodeCompensation","beginningSpace","endingHash","startingSpaceChar","endingSpaceChar","nonSpaceChar","newLineCharGlobal","tabCharGlobal","multipleSpaceGlobal","blankLine","doubleBlankLine","blockquoteStart","blockquoteSetextReplace","blockquoteSetextReplace2","listReplaceTabs","listReplaceNesting","listIsTask","listReplaceTask","anyLine","hrefBrackets","tableDelimiter","tableAlignChars","tableRowBlankLine","tableAlignRight","tableAlignCenter","tableAlignLeft","startATag","endATag","startPreScriptTag","endPreScriptTag","startAngleBracket","endAngleBracket","pedanticHrefTitle","unicodeAlphaNumeric","escapeTest","escapeReplace","escapeTestNoEncode","escapeReplaceNoEncode","unescapeTest","percentDecode","findPipe","splitPipe","slashPipe","carriageReturn","spaceLine","notSpaceStart","endingNewline","listItemRegex","nextBulletRegex","hrRegex","fencesBeginRegex","headingBeginRegex","htmlBeginRegex","E","F","ie","oe","we","Q","Pe","Se","U","$e","ae","K","blockquote","fences","heading","hr","lheading","newline","paragraph","table","re","Le","Me","le","D","W","ue","Ee","pe","qe","ce","ve","De","he","He","Ze","Ge","Ne","Fe","je","Qe","Ue","de","ke","se","X","_backpedal","anyPunctuation","autolink","blockSkip","br","del","emStrongLDelim","emStrongRDelimAst","emStrongRDelimUnd","escape","nolink","punctuation","reflink","reflinkSearch","We","N","Xe","C","M","Je","ge","J","encodeURI","V","at","charAt","me","href","title","inLink","raw","tokens","inlineTokens","rules","codeBlockStyle","Ve","lang","depth","lexer","blockTokens","R","O","ordered","loose","H","trimStart","search","ee","te","ne","xe","A","Z","Y","trimEnd","pre","header","align","rows","inRawBlock","fe","emStrong","codespan","inlineText","escaped","links","inlineQueue","lex","lexInline","src","startBlock","charCodeAt","emStrongMask","startInline","P","parser","parseInline","listitem","checkbox","tablecell","tablerow","strong","em","textRenderer","$","renderers","preprocess","postprocess","processAllTokens","provideLexer","provideParser","setOptions","parseMarkdown","use","childTokens","flat","level","passThroughHooks","passThroughHooksRespectAsync","getDefaults","Parser","Renderer","TextRenderer","Lexer","Tokenizer","Hooks","renderedContent","displayClass","handleContentChange","noteContent","handleTypeChange","noteType","toggleEditMode","isInternalEditing","isEditing","handleKeydown","newContent","noteTypes","info","textColor","iconColor","warning","note","currentType","$$item","div_5","handleClick","nodeLayout","layout","layoutConfig","compact","iconSize","showHeader","currentLayout","isCompact","triggerInputPort","triggerOutputPort","firstDataInputPort","firstDataOutputPort","hasBothInputTypes","hasBothOutputTypes","consequent_5","consequent_6","__1","squareIcon","squareColor","toolIcon","toolColor","toolName","toolDescription","toolVersion","hasToolInputPort","hasToolOutputPort","toolInputPort","toolOutputPort","handleNodeDoubleClick","activeBranches","executionInfo","active_branches","isActive","isBranchActive","branchName","$.set_style","span_4","getStatusColor","statusColors","idle","running","completed","cancelled","skipped","getStatusIcon","statusIcons","getStatusLabel","statusLabels","getStatusBackgroundColor","statusBackgroundColors","getStatusTextColor","statusTextColors","createDefaultExecutionInfo","executionCount","isExecuting","updateExecutionStart","updateExecutionComplete","lastExecuted","lastExecutionDuration","updateExecutionFailed","resetExecutionInfo","formatExecutionDuration","toFixed","formatLastExecuted","timestamp","diffMs","toLocaleDateString","showDetails","isHovered","sm","statusSize","labelSize","md","lg","positionStyles","shouldShow","$.event","DEFAULT_NODE_STATUS_CONFIG","createNodeWrapperConfig","statusPosition","showStatusDetails","shouldShowNodeStatus","getOptimalStatusPosition","getOptimalStatusSize","NODE_TYPE_TO_COMPONENT_MAP","simple","square","gateway","getComponentNameForNodeType","getAvailableNodeTypes","supportedTypes","getPrimaryNodeType","resolveNodeType","configNodeType","availableTypes","resolveComponentName","isNodeTypeSupported","getNodeTypeEnumOptions","typeDisplayNames","enum","enumNames","createNodeTypeConfigProperty","defaultType","enumValues","resolvedComponentName","nodeComponent","NotesNode","SimpleNode","SquareNode","ToolNode","GatewayNode","WorkflowNodeComponent","getNodeComponent","shouldShowStatus","getStatusPosition","getStatusSize","alternate_1","alternate_2","alternate_3","alternate_4","endpointConfig","setEndpointConfig","getEndpointConfig","setApiBaseUrl","apiRequest","contentType","isJson","errorMessage","nodeApi","workflowApi","getWorkflows","createWorkflow","drupalWorkflow","workflowData","byteToHex","getRandomValues","rnds8","Uint8Array","native","randomUUID","crypto","v4","buf","rnds","rng","RangeError","unsafeStringify","_NodeExecutionService","getInstance","getNodeExecutionInfo","pipelineData","jobs","nodeStatuses","node_statuses","nodeJob","job","node_id","nodeStatus","mapJobStatusToExecutionStatus","execution_count","last_executed","execution_time","cache","getMultipleNodeExecutionInfo","apiUnavailable","apiUnavailableUntil","defaultExecutionInfo","executionInfoMap","error_message","getAllNodeExecutionCounts","getCachedNodeExecutionInfo","clearNodeCache","clearAllCache","lastFetch","isCacheStale","cacheTimeout","updateNodeExecutionInfo","existing","jobStatus","updateMultipleNodeExecutionInfo","resetApiAvailability","NodeExecutionService","nodeExecutionService","EdgeStylingHelper","applyConnectionStyling","isToolNode","isToolConnection","targetNodeType","targetCategory","updateEdgeStyles","updatedEdge","NodeOperationsHelper","loadNodesFromApi","providedNodes","loadNodeExecutionInfo","createNodeFromDrop","nodeTypeData","existingNodes","parsedData","nodeData","initialConfig","configSchema","newNodeId","nodeTypeId","existingNumbers","nextNumber","generateNodeId","WorkflowOperationsHelper","generateMetadata","existingMetadata","clearWorkflow","updateNodeConfig","newConfig","uuidv4","workflowToSave","savedWorkflow","workflowToExport","dataStr","dataBlob","Blob","URL","createObjectURL","download","click","revokeObjectURL","checkWorkflowCycles","ConfigurationHelper","configureEndpoints","$workflowStore","previousPipelineId","flowNodes","flowEdges","loadExecutionInfoTimeout","executionInfoAbortController","previousWorkflowId","pipelineChanged","requestIdleCallback","updateGlobalStore","wait","lastRan","throttle","AbortController","aborted","updatedNodes","updateCurrentWorkflowFromSvelteFlow","previousNodes","nodesChanged","nodes1","nodes2","node1","node2","areNodeArraysEqual","edgesChanged","edges1","edges2","edge1","edge2","areEdgeArraysEqual","universalNode","UniversalNode","workflowNode","handleConnect","updatedEdges","updateExistingEdgeStyles","handleNodesDelete","deletedNodeIds","handleNodeDrop","newStore","dataTransfer","dropEffect","getData","ondrop","ConnectionLine","showText","handleSearchChange","searchInput","selectedCategory","filteredNodes","getFilteredNodes","categories","getCategories","filtered","tags","handleNodeDragStart","newNodeData","jsonData","setData","effectAllowed","setDragImage","getFilteredNodesForCategory","getNodesForCategory","div_12","div_13","categoryNodes","div_23","getCategoryDisplayName","$.bind_value","backgroundSize","backgroundRadius","xl","statusColor","statusIcon","showBackground","on_change","configValues","currentValues","on_change_1","nodeConfig","handleSave","form","updatedConfig","parsed","mergedConfig","field","fieldConfig","$.bind_select_value","placeholder","textarea","input_2","input_3","optionConfig","select_1","input_5","consequent_7","alternate_5","alternate_6","consequent_8","consequent_9","consequent_10","alternate_7","consequent_11","alternate_8","localConfigValues","handleCancel","handleClose","handleBackdropClick","nodeLabel","isOpen","hasChanges","onCancel","handleInputChange","on_change_2","on_input","on_input_1","processedValue","key2","hiddenFieldValues","onSave","confirm","onClose","sidebar","overflow","nodeDetails","text_8","text_11","div_22","label_1","select_value","$.select_option","$.set_value","input_4","minimum","maximum","schemaType","getInputType","isTextarea","consequent_13","consequent_12","consequent_15","consequent_14","consequent_16","clearLogs","formatTimestamp","toLocaleTimeString","hour12","hour","minute","second","fractionalSecondDigits","filteredLogs","selectedNode","logsContainer","scrollTop","scrollHeight","getLogLevelIcon","getLogLevelColor","toUpperCase","logText","blob","text_9","page","route","on_click","isDropdownOpen","on_click_1","primaryActions","showStatus","breadcrumbs","breadcrumb","primaryAction","a_1","a_2","sampleNodes","accept","maxSize","showTimestamp","markdown","template","variables","schema","model","temperature","maxTokens","chunkSize","chunkOverlap","filterKey","filterValue","columnName","filter_instruction","sample_size","max_size","caseSensitive","maxIterations","includeText","fileFormat","filePath","authentication","auth_username","auth_password","auth_token","api_key_header","api_key_value","content_type","follow_redirects","ssl_verify","retry_attempts","retry_delay","response_format","include_response_headers","custom_headers","user_agent","proxy_url","ignore_ssl_issues","json_path","merge_strategy","filter_expression","transform_expression","pretty_print","validate_schema","keep_only_set","include_binary_data","dot_notation","timezone","apiToken","returnMessages","collectionName","persistDirectory","distanceFunction","indexName","environment","welcomeMessage","searchIndex","maxResults","includeFields","useAiRanking","contentStatus","targetText","replacementText","analysisMode","confidenceThreshold","analysisType","strictness","includeExamples","customRules","editingStyle","preserveFormatting","requireApproval","trackChanges","draftWorkflow","assignReviewer","reviewerRole","notifyReviewer","retainOriginal","addRevisionLog","inputFormat","outputFormat","includeTime","onlyFutureDates","includeActionButtons","responseStyle","showWorkflowSummary","enableMarkdown","sampleWorkflow","author","toasts","toastTimeouts","addToRemoveQueue","toastId","toast","clearFromRemoveQueue","$toasts","upsert","resolveValue","valOrFunction","arg","isFunction","genId","createHandler","pauseDuration","iconTheme","createToast","showSuccess","showError","showWarning","showInfo","showLoading","dismissToast","dismiss","dismissAllToasts","showPromise","showConfirmation","msgs","apiToasts","details","successMessage","workflowToasts","saved","saveError","deleteError","executionStarted","executionCompleted","exported","executionError","pipelineToasts","created","pipelineName","creationError","statusUpdate","retryLoad","fetchNodeTypes","testApiConnection","testUrl","handleCanvasClick","isConfigSidebarOpen","closeConfigSidebar","rightSidebar","__2","__3","newUrl","prompt","on_click_2","__4","on_click_3","__5","selectedNodeForConfig","clipboard","writeText","showNavbar","disableSidebar","lockWorkflow","readOnly","navbarActions","breadcrumbTitle","navbarTitle","$workflowName","selectedNodeId","isWorkflowSettingsOpen","workflowConfigSchema","workflowConfigValues","workflowEditorRef","loadingToast","fetchedNodes","eventHandlers","onApiError","toggleWorkflowSettings","handleWorkflowSave","$.store_mutate","$.untrack","onBeforeSave","index$1","finalWorkflow","onAfterSave","errorObj","onSaveError","suppressToast","flowdropSave","flowdropExport","existingConfig","apiBaseUrl","initializeApiEndpoints","onWorkflowLoad","handleWorkflowSettingsToggle","head","pathname","client","apiClient","pipelineStatus","jobStatusData","status_summary","total","isLoadingJobStatus","isLogsSidebarOpen","fetchPipelineData","job_status_summary","newNodeStatuses","addLog","toggleLogsSidebar","getPipelineActions","onActionsReady","handleRefresh","handleViewLogs","refreshInterval","createDefaultFeatures","dragAndDrop","nodeEditing","execution","undoRedo","nodeSearch","nodeCategories","nodeValidation","collaboration","importExport","createDefaultUIConfig","showSidebar","showToolbar","showMinimap","showGrid","gridSize","nodeSpacing","canvasPadding","navbarHeight","colors","primary","secondary","cssClasses","createDefaultAPIConfig","createDefaultExecutionConfig","realTimeUpdates","maxConcurrent","showProgress","autoSaveState","caching","ttl","createDefaultStorageConfig","autoSaveInterval","maxUndoSteps","keyPrefix","createDefaultConfig","theme","ui","ports","defaultDataType","mergeConfig","userConfig","validateConfig","errors","createConfigFromEnv","newWorkflow","updatedWorkflow","filteredWorkflows","searchLower","getWorkflowCount","initializeSampleWorkflows","globalSaveWorkflow","api$1","currentConfig","hostname","protocol","ensureApiConfiguration","globalExportWorkflow","initializeGlobalSave","flowdropGlobalSave","flowdropGlobalExport","DEFAULT_PORT_CONFIG","fetchPortConfig","validatePortConfig","STORAGE_KEY_PREFIX","getDraftStorageKey","customKey","saveDraft","storageKey","draft","savedAt","setItem","loadDraft","stored","getItem","deleteDraft","removeItem","hasDraft","getDraftMetadata","DraftAutoSaveManager","intervalId","saveIfDirty","currentHash","hashWorkflow","lastSavedHash","forceSave","clearDraft","updateStorageKey","newKey","existingDraft","toHash","isRunning","getStorageKey","defaultApiConfig","executionState","getEndpointUrl","cachedConfig","cacheTimestamp","fetchRuntimeConfig","authType","getRuntimeConfig","clearRuntimeConfigCache","initRuntimeConfig","WorkflowAdapter","generateStandardNodeId","nodeIndex","findIndex","updateNodePosition","edgeIndex","getNodesByType","getNodeEdges","getConnectedNodes","connectedNodeIds","warnings","nodeIdCounts","edgeIdCounts","validation","fromSvelteFlow","svelteFlowWorkflow","toSvelteFlow","getWorkflowStats","nodeTypeCounts","totalNodes","totalEdges","fromEntries","lastModified","cloneWorkflow","newName","idMapping","oldId","newCount","ApiClient","defaultHeaders","timeoutId","healthCheck","getNodeTypes","getNodeType","waitForExecution","pollInterval","getWorkflowsByTag","getNodeTypesByCategory","mountFlowDropApp","userFeatures","draftStorageKey","customDraftKey","finalPortConfig","onDirtyStateChange","onWorkflowChange","svelteApp","App","draftManager","getWorkflowFromStore","onBeforeUnmount","save","mountWorkflowEditor","WorkflowEditor","unmountFlowDropApp","app","unmountWorkflowEditor"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284]}